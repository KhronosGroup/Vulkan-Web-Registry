<!DOCTYPE html><html lang="en"><head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<meta name="author" content="The Khronos® Vulkan  Working Group">
<title>Vulkan® 1.1.261 - A Specification (with KHR extensions)</title>
<link rel="stylesheet" href="style0.css" type="text/css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="style1.css" type="text/css">
<link rel="stylesheet" href="style2.css" type="text/css">

<!-- dragged in by font-awesome css included by asciidoctor, but preloaded in this extension for convenience -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0" as="font" type="font/woff2" crossorigin="">

<!-- Note: Chrome needs crossorigin="" even for same-origin fonts -->
<link rel="preload" href="../katex/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Typewriter-Regular.woff2" as="font" type="font/woff2" crossorigin=""><link rel="stylesheet" href="../katex/katex.min.css">
<!--ChunkedSearchJSMarker-->
<link href="chunked.css?4" rel="stylesheet">
<script>var searchindexurl = 'search.index.js?4' + (document.title.replace(/[^0-9.]/g, ''));</script>
<script src="chunked.js?4"></script>
<link rel="stylesheet" href="style3.css" type="text/css">
<script>
    function hideElement(e){
        e.setAttribute("hidden", "");
        e.classList.add("hidden");
    }

    function unhideElement(e){
        e.classList.remove("hidden");
        e.removeAttribute("hidden");
    }

    function hideLoadableContent(){
        unhideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) hideElement(loadable);
    }

    function unhideLoadableContent(){
        hideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) unhideElement(loadable);
    }

    window.addEventListener("load", unhideLoadableContent);
</script>
<link rel="stylesheet" href="asciidoctor-chunker.css" type="text/css"></head>
<body class="book toc2 toc-left">
<div style="text-align: center;">
    <span class="image"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+Cjxzdmcgdmlld0JveD0iMCAwIDExNTAgMzI2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHN0eWxlPSJmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MS40MTQyMTsiPgogICAgPGcgaWQ9IkFydGJvYXJkMSIgdHJhbnNmb3JtPSJtYXRyaXgoMC45NTUxNSwwLDAsMC44ODgyODMsLTQwLjExNjMsLTMwLjIwMTYpIj4KICAgICAgICA8cmVjdCB4PSI0MiIgeT0iMzQiIHdpZHRoPSIxMjA0IiBoZWlnaHQ9IjM2NyIgc3R5bGU9ImZpbGw6bm9uZTsiLz4KICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxLjA0Njk2LDAsMCwxLjEyNTc3LC00Ni45OTEzLC01MC40MzI1KSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik03MjQuMSwzODUuMDZMNjgzLjUzLDM4NS4wNkM2ODMuNTMsMzg1LjA2IDY4My41MywyODYuMDkgNjgzLjUzLDI1NS40QzY5Ni40OSwyNjIuNjIgNzEzLjYyLDI3NS45NCA3MjQuMSwyODguNzJMNzI0LjEsMzg1LjA2WiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxnPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTM4MS43NSwzODUuMDZMMzMxLjE3LDM4NS4wNkwyNjUuMTYsMTgxLjAzTDMxMS4xNywxODEuMDNMMzU2LjYxLDMyNC40OEwzNTcuMTgsMzI0LjQ4TDQwMy4xOCwxODEuMDNMNDQ5LjQ3LDE4MS4wM0wzODEuNzUsMzg1LjA2WiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNTg1LjUxLDM4NS4wNkw1NDYuOTMsMzg1LjA2TDU0Ni45MywzNjQuNDlMNTQ2LjA4LDM2NC40OUM1NDAuOTMsMzczLjA3IDUzNC4yNywzNzkuMjYgNTI2LjA3LDM4My4wN0M1MTcuODgsMzg2Ljg4IDUwOS41LDM4OC43OCA1MDAuOTIsMzg4Ljc4QzQ5MC4wNiwzODguNzggNDgxLjE2LDM4Ny4zNSA0NzQuMiwzODQuNUM0NjcuMjUsMzgxLjY1IDQ2MS43NywzNzcuNTkgNDU3Ljc3LDM3Mi4zNkM0NTMuNzYsMzY3LjEyIDQ1MC45NSwzNjAuNzQgNDQ5LjMzLDM1My4yMUM0NDcuNzIsMzQ1LjY5IDQ0Ni45MSwzMzcuMzUgNDQ2LjkxLDMyOC4yMUw0NDYuOTEsMjM3LjMzTDQ4Ny40OSwyMzcuMzNMNDg3LjQ5LDMyMC43N0M0ODcuNDksMzMyLjk2IDQ4OS40LDM0Mi4wNiA0OTMuMjEsMzQ4LjA2QzQ5Ny4wMiwzNTQuMDcgNTAzLjc4LDM1Ny4wNiA1MTMuNSwzNTcuMDZDNTI0LjU1LDM1Ny4wNiA1MzIuNTUsMzUzLjc4IDUzNy41LDM0Ny4yQzU0Mi40NiwzNDAuNjIgNTQ0LjkzLDMyOS44MSA1NDQuOTMsMzE0Ljc2TDU0NC45MywyMzcuMzJMNTg1LjUyLDIzNy4zMkw1ODUuNTIsMzg1LjA2TDU4NS41MSwzODUuMDZaIiBzdHlsZT0iZmlsbDpyZ2IoMTcyLDIyLDQ0KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8cGF0aCBkPSJNNzMwLjg0LDI5Ni4xOUw3MzAuNzQsMjkwLjQ3TDc4MS44OSwyMzcuMzNMODI5LjkxLDIzNy4zM0w3NzQuMTgsMjkxLjYyTDgzNi4xOSwzODUuMDZMNzg3LjA0LDM4NS4wNkw3MzAuODQsMjk2LjE5WiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik04NDMuNjIsMjgyLjc2Qzg0NC4xOSwyNzMuMjQgODQ2LjU4LDI2NS4zMyA4NTAuNzcsMjU5LjA0Qzg1NC45NiwyNTIuNzUgODYwLjI5LDI0Ny43MSA4NjYuNzcsMjQzLjlDODczLjI1LDI0MC4wOSA4ODAuNTQsMjM3LjM3IDg4OC42NCwyMzUuNzZDODk2LjczLDIzNC4xNCA5MDQuODgsMjMzLjMzIDkxMy4wNywyMzMuMzNDOTIwLjUsMjMzLjMzIDkyOC4wMiwyMzMuODUgOTM1LjY0LDIzNC45Qzk0My4yNywyMzUuOTUgOTUwLjIxLDIzOCA5NTYuNSwyNDEuMDVDOTYyLjc4LDI0NC4xIDk2Ny45MywyNDguMzQgOTcxLjk0LDI1My43NkM5NzUuOTQsMjU5LjE5IDk3Ny45NCwyNjYuMzggOTc3Ljk0LDI3NS4zNEw5NzcuOTQsMzUyLjIxQzk3Ny45NCwzNTguODggOTc4LjMyLDM2NS4yNyA5NzkuMDgsMzcxLjM2Qzk3OS44NCwzNzcuNDYgOTgxLjE4LDM4Mi4wMyA5ODMuMDksMzg1LjA4TDk0MS45NCwzODUuMDhDOTQxLjE4LDM4Mi44IDk0MC41NiwzODAuNDYgOTQwLjA4LDM3OC4wOEM5MzkuNjEsMzc1LjcgOTM5LjI3LDM3My4yOCA5MzkuMDgsMzcwLjc5QzkzMi42LDM3Ny40NyA5MjQuOTcsMzgyLjEzIDkxNi4yMSwzODQuOEM5MDcuNDUsMzg3LjQ2IDg5OC40OSwzODguOCA4ODkuMzUsMzg4LjhDODgyLjMsMzg4LjggODc1LjcyLDM4Ny45NCA4NjkuNjQsMzg2LjIzQzg2My41NCwzODQuNTIgODU4LjIsMzgxLjg1IDg1My42NCwzNzguMjNDODQ5LjA2LDM3NC42MSA4NDUuNDgsMzcwLjA0IDg0Mi45MiwzNjQuNTFDODQwLjM1LDM1OC45OSA4MzkuMDYsMzUyLjQyIDgzOS4wNiwzNDQuOEM4MzkuMDYsMzM2LjQyIDg0MC41NCwzMjkuNTEgODQzLjQ5LDMyNC4wOEM4NDYuNDUsMzE4LjY1IDg1MC4yNSwzMTQuMzIgODU0LjkzLDMxMS4wOEM4NTkuNiwzMDcuODQgODY0LjkzLDMwNS40MSA4NzAuOTMsMzAzLjc5Qzg3Ni45MywzMDIuMTcgODgyLjk4LDMwMC44OCA4ODkuMDcsMjk5LjkzQzg5NS4xNywyOTguOTkgOTAxLjE3LDI5OC4yMiA5MDcuMDgsMjk3LjY1QzkxMi45OSwyOTcuMDggOTE4LjIyLDI5Ni4yMiA5MjIuNzksMjk1LjA4QzkyNy4zNywyOTMuOTMgOTMwLjk4LDI5Mi4yNyA5MzMuNjUsMjkwLjA3QzkzNi4zMiwyODcuODggOTM3LjU2LDI4NC42OSA5MzcuMzcsMjgwLjVDOTM3LjM3LDI3Ni4xMiA5MzYuNjUsMjcyLjY0IDkzNS4yMiwyNzAuMDdDOTMzLjc5LDI2Ny41IDkzMS44OSwyNjUuNSA5MjkuNTEsMjY0LjA3QzkyNy4xMywyNjIuNjQgOTI0LjM3LDI2MS42OSA5MjEuMjIsMjYxLjIxQzkxOC4wNywyNjAuNzMgOTE0LjcsMjYwLjQ5IDkxMS4wOCwyNjAuNDlDOTAzLjA4LDI2MC40OSA4OTYuNzksMjYyLjIgODkyLjIyLDI2NS42NEM4ODcuNjUsMjY5LjA3IDg4NC45OCwyNzQuNzggODg0LjIyLDI4Mi43OUw4NDMuNjIsMjgyLjc5TDg0My42MiwyODIuNzZaTTkzNy4zNSwzMTIuNzdDOTM1LjYzLDMxNC4zIDkzMy40OSwzMTUuNDggOTMwLjkyLDMxNi4zNEM5MjguMzUsMzE3LjIxIDkyNS41OSwzMTcuOTIgOTIyLjYzLDMxOC40OUM5MTkuNjgsMzE5LjA2IDkxNi41OCwzMTkuNTQgOTEzLjM1LDMxOS45MkM5MTAuMTEsMzIwLjMgOTA2Ljg3LDMyMC43NyA5MDMuNjMsMzIxLjM1QzkwMC41OCwzMjEuOTIgODk3LjU4LDMyMi42OSA4OTQuNjMsMzIzLjYzQzg5MS42OCwzMjQuNTkgODg5LjEsMzI1Ljg3IDg4Ni45MSwzMjcuNDlDODg0LjcyLDMyOS4xMSA4ODIuOTYsMzMxLjE2IDg4MS42MiwzMzMuNjNDODgwLjI5LDMzNi4xMSA4NzkuNjIsMzM5LjI1IDg3OS42MiwzNDMuMDZDODc5LjYyLDM0Ni42OCA4ODAuMjksMzQ5LjczIDg4MS42MiwzNTIuMkM4ODIuOTYsMzU0LjY4IDg4NC43NywzNTYuNjMgODg3LjA1LDM1OC4wNkM4ODkuMzQsMzU5LjQ5IDg5MiwzNjAuNDkgODk1LjA1LDM2MS4wNkM4OTguMSwzNjEuNjMgOTAxLjI0LDM2MS45MSA5MDQuNDgsMzYxLjkxQzkxMi40OCwzNjEuOTEgOTE4LjY4LDM2MC41OCA5MjMuMDYsMzU3LjkyQzkyNy40NCwzNTUuMjUgOTMwLjY5LDM1Mi4wNiA5MzIuNzcsMzQ4LjM0QzkzNC44NiwzNDQuNjMgOTM2LjE2LDM0MC44NyA5MzYuNjIsMzM3LjA2QzkzNy4xLDMzMy4yNSA5MzcuMzMsMzMwLjIgOTM3LjM0LDMyNy45Mkw5MzcuMzQsMzEyLjc3TDkzNy4zNSwzMTIuNzdaIiBzdHlsZT0iZmlsbDpyZ2IoMTcyLDIyLDQ0KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTEwMDQuMjEsMjM3LjMzTDEwNDIuOCwyMzcuMzNMMTA0Mi44LDI1Ny45TDEwNDMuNjUsMjU3LjlDMTA0OC43OSwyNDkuMzMgMTA1NS40NiwyNDMuMDkgMTA2My42NSwyMzkuMTlDMTA3MS44NCwyMzUuMjggMTA4MC4yMywyMzMuMzMgMTA4OC43OSwyMzMuMzNDMTA5OS42NiwyMzMuMzMgMTEwOC41NiwyMzQuODEgMTExNS41MiwyMzcuNzZDMTEyMi40NywyNDAuNzIgMTEyNy45NCwyNDQuODEgMTEzMS45NSwyNTAuMDVDMTEzNS45NSwyNTUuMjkgMTEzOC43NiwyNjEuNjcgMTE0MC4zOCwyNjkuMTlDMTE0MiwyNzYuNzIgMTE0Mi44MSwyODUuMDUgMTE0Mi44MSwyOTQuMkwxMTQyLjgxLDM4NS4wN0wxMTAyLjI0LDM4NS4wN0wxMTAyLjI0LDMwMS42M0MxMTAyLjI0LDI4OS40MyAxMTAwLjMzLDI4MC4zNCAxMDk2LjUzLDI3NC4zNEMxMDkyLjcxLDI2OC4zNCAxMDg1Ljk1LDI2NS4zNCAxMDc2LjIzLDI2NS4zNEMxMDY1LjE4LDI2NS4zNCAxMDU3LjE5LDI2OC42MyAxMDUyLjIzLDI3NS4yQzEwNDcuMjcsMjgxLjc2IDEwNDQuOCwyOTIuNTggMTA0NC44LDMwNy42M0wxMDQ0LjgsMzg1LjA3TDEwMDQuMjIsMzg1LjA3TDEwMDQuMjIsMjM3LjMzTDEwMDQuMjEsMjM3LjMzWiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik02MTIuMzcsMjExLjg0TDYxMi4zNywzODUuMDdMNjUyLjk1LDM4NS4wN0w2NTIuOTUsMjM0LjIxQzYzOS45MywyMjYuMjMgNjI2LjM2LDIxOC43NCA2MTIuMzcsMjExLjg0WiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xOTguNDMsMjE5LjIxQzIyMS45NSwxNTAuMzIgMzYyLjU4LDEyNS4wNSA1MTIuNTgsMTYyLjc4QzYwMi41NSwxODUuNCA2NzYuMDcsMjI5LjI4IDcyNC4wOSwyNzIuNjdDNzAyLjMsMjE1LjEyIDU5Ni42NSwxMzMuMDggNDUxLjE4LDEwNC45NkMyODYuNyw3My4xNiAxMjQuNDcsMTAxLjExIDEwNC4zOSwxNzQuMUM4OS44OSwyMjYuODMgMTUzLjU3LDI4OC42IDI1Mi4wNSwzMzAuODRDMjA3LjgxLDI5NS4wMiAxODYuMjksMjU0Ljc4IDE5OC40MywyMTkuMjFaIiBzdHlsZT0iZmlsbDpyZ2IoMTcyLDIyLDQ0KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTcyNC4xNiwyNDcuNjJMNzI0LjE2LDE4MS4wM0w2ODMuNTcsMTgxLjAzTDY4My41NywyMDEuMjVDNzAwLjg4LDIxNi43MSA3MTQuNjEsMjMyLjQ1IDcyNC4xNiwyNDcuNjJaIiBzdHlsZT0iZmlsbDpyZ2IoMTcyLDIyLDQ0KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICA8L2c+CiAgICAgICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMS4wNDY5NiwwLDAsMS4xMjU3NywtNDYuOTkxMywtNTAuNDMyNSkiPgogICAgICAgICAgICA8cGF0aCBkPSJNMTIxNC45OCwzNjMuNDNDMTIxNC45OCwzNzUuNjkgMTIwNS4zNSwzODUuMzIgMTE5Mi44MywzODUuMzJDMTE4MC40MywzODUuMzIgMTE3MC41NCwzNzUuNjkgMTE3MC41NCwzNjMuNDNDMTE3MC41NCwzNTEuNDMgMTE4MC40MywzNDEuOCAxMTkyLjgzLDM0MS44QzEyMDUuMzUsMzQxLjggMTIxNC45OCwzNTEuNDMgMTIxNC45OCwzNjMuNDNaTTExNzYuMDgsMzYzLjQzQzExNzYuMDgsMzczLjA2IDExODMuMiwzODAuNyAxMTkyLjk2LDM4MC43QzEyMDIuNDUsMzgwLjcgMTIwOS40NCwzNzMuMDUgMTIwOS40NCwzNjMuNTZDMTIwOS40NCwzNTMuOTMgMTIwMi40NSwzNDYuMTUgMTE5Mi44MiwzNDYuMTVDMTE4My4yLDM0Ni4xNiAxMTc2LjA4LDM1My45NCAxMTc2LjA4LDM2My40M1pNMTE4OS4zOSwzNzQuNzdMMTE4NC4zOCwzNzQuNzdMMTE4NC4zOCwzNTMuMTRDMTE4Ni4zNiwzNTIuNzQgMTE4OS4xMywzNTIuNDggMTE5Mi42OSwzNTIuNDhDMTE5Ni43OCwzNTIuNDggMTE5OC42MiwzNTMuMTQgMTIwMC4yMSwzNTQuMDZDMTIwMS40LDM1NC45OCAxMjAyLjMyLDM1Ni43IDEyMDIuMzIsMzU4LjgxQzEyMDIuMzIsMzYxLjE4IDEyMDAuNDcsMzYzLjAzIDExOTcuODQsMzYzLjgyTDExOTcuODQsMzY0LjA4QzExOTkuOTUsMzY0Ljg3IDEyMDEuMTQsMzY2LjQ1IDEyMDEuOCwzNjkuMzVDMTIwMi40NiwzNzIuNjUgMTIwMi44NSwzNzMuOTcgMTIwMy4zOCwzNzQuNzZMMTE5Ny45NywzNzQuNzZDMTE5Ny4zMSwzNzMuOTcgMTE5Ni45MiwzNzEuOTkgMTE5Ni4yNiwzNjkuNDlDMTE5NS44NiwzNjcuMTIgMTE5NC41NSwzNjYuMDYgMTE5MS43OCwzNjYuMDZMMTE4OS40MSwzNjYuMDZMMTE4OS40MSwzNzQuNzdMMTE4OS4zOSwzNzQuNzdaTTExODkuNTMsMzYyLjUxTDExOTEuOSwzNjIuNTFDMTE5NC42NywzNjIuNTEgMTE5Ni45MSwzNjEuNTkgMTE5Ni45MSwzNTkuMzRDMTE5Ni45MSwzNTcuMzYgMTE5NS40NiwzNTYuMDQgMTE5Mi4yOSwzNTYuMDRDMTE5MC45NywzNTYuMDQgMTE5MC4wNSwzNTYuMTcgMTE4OS41MiwzNTYuM0wxMTg5LjUyLDM2Mi41MUwxMTg5LjUzLDM2Mi41MVoiIHN0eWxlPSJmaWxsOnJnYigxNzIsMjIsNDQpO2ZpbGwtcnVsZTpub256ZXJvOyIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+Cg==" alt="Vulkan Logo" width="50%">
    </span>
</div>
<div id="header">
<h1>Vulkan<sup>®</sup> 1.1.261 - A Specification (with KHR extensions)</h1>
<div class="details">
<span id="author" class="author">The Khronos<sup>®</sup> Vulkan  Working Group</span><br>
<span id="revnumber">version 1.1.261,</span>
<span id="revdate">2023-08-04 10:48:40Z</span>
<br><span id="revremark">from git branch: github-main commit: b9aad705f0d9e5e6734ac2ad671d5d1de57b05e0</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="index.html">Titlepage</a></li><li><a href="chap1.html">1. Preamble</a></li>
<li><a href="chap2.html">2. Introduction</a>
<ul class="sectlevel2">
<li><a href="chap2.html#introduction-conventions">2.1. Document Conventions</a></li>
</ul>
</li>
<li><a href="chap3.html">3. Fundamentals</a>
<ul class="sectlevel2">
<li><a href="chap3.html#fundamentals-host-environment">3.1. Host and Device Environment</a></li>
<li><a href="chap3.html#fundamentals-execmodel">3.2. Execution Model</a></li>
<li><a href="chap3.html#fundamentals-objectmodel-overview">3.3. Object Model</a></li>
<li><a href="chap3.html#fundamentals-abi">3.4. Application Binary Interface</a></li>
<li><a href="chap3.html#fundamentals-commandsyntax">3.5. Command Syntax and Duration</a></li>
<li><a href="chap3.html#fundamentals-threadingbehavior">3.6. Threading Behavior</a></li>
<li><a href="chap3.html#fundamentals-validusage">3.7. Valid Usage</a></li>
<li><a href="chap3.html#fundamentals-returncodes">3.8. <code>VkResult</code> Return Codes</a></li>
<li><a href="chap3.html#fundamentals-numerics">3.9. Numeric Representation and Computation</a></li>
<li><a href="chap3.html#fundamentals-fixedconv">3.10. Fixed-Point Data Conversions</a></li>
<li><a href="chap3.html#fundamentals-common-objects">3.11. Common Object Types</a></li>
<li><a href="chap3.html#fundamentals-api-name-aliases">3.12. API Name Aliases</a></li>
</ul>
</li>
<li><a href="chap4.html">4. Initialization</a>
<ul class="sectlevel2">
<li><a href="chap4.html#initialization-functionpointers">4.1. Command Function Pointers</a></li>
<li><a href="chap4.html#initialization-instances">4.2. Instances</a></li>
</ul>
</li>
<li><a href="chap5.html">5. Devices and Queues</a>
<ul class="sectlevel2">
<li><a href="chap5.html#devsandqueues-physical-device-enumeration">5.1. Physical Devices</a></li>
<li><a href="chap5.html#devsandqueues-devices">5.2. Devices</a></li>
<li><a href="chap5.html#devsandqueues-queues">5.3. Queues</a></li>
</ul>
</li>
<li><a href="chap6.html">6. Command Buffers</a>
<ul class="sectlevel2">
<li><a href="chap6.html#commandbuffers-lifecycle">6.1. Command Buffer Lifecycle</a></li>
<li><a href="chap6.html#commandbuffers-pools">6.2. Command Pools</a></li>
<li><a href="chap6.html#commandbuffer-allocation">6.3. Command Buffer Allocation and Management</a></li>
<li><a href="chap6.html#commandbuffers-recording">6.4. Command Buffer Recording</a></li>
<li><a href="chap6.html#commandbuffers-submission">6.5. Command Buffer Submission</a></li>
<li><a href="chap6.html#commandbuffers-submission-progress">6.6. Queue Forward Progress</a></li>
<li><a href="chap6.html#commandbuffers-secondary">6.7. Secondary Command Buffer Execution</a></li>
<li><a href="chap6.html#commandbuffers-devicemask">6.8. Command Buffer Device Mask</a></li>
</ul>
</li>
<li><a href="chap7.html">7. Synchronization and Cache Control</a>
<ul class="sectlevel2">
<li><a href="chap7.html#synchronization-dependencies">7.1. Execution and Memory Dependencies</a></li>
<li><a href="chap7.html#synchronization-implicit">7.2. Implicit Synchronization Guarantees</a></li>
<li><a href="chap7.html#synchronization-fences">7.3. Fences</a></li>
<li><a href="chap7.html#synchronization-semaphores">7.4. Semaphores</a></li>
<li><a href="chap7.html#synchronization-events">7.5. Events</a></li>
<li><a href="chap7.html#synchronization-pipeline-barriers">7.6. Pipeline Barriers</a></li>
<li><a href="chap7.html#synchronization-memory-barriers">7.7. Memory Barriers</a></li>
<li><a href="chap7.html#synchronization-wait-idle">7.8. Wait Idle Operations</a></li>
<li><a href="chap7.html#synchronization-submission-host-writes">7.9. Host Write Ordering Guarantees</a></li>
<li><a href="chap7.html#synchronization-device-group">7.10. Synchronization and Multiple Physical Devices</a></li>
</ul>
</li>
<li><a href="chap8.html">8. Render Pass</a>
<ul class="sectlevel2">
<li><a href="chap8.html#_render_pass_objects">8.1. Render Pass Objects</a></li>
<li><a href="chap8.html#renderpass-creation">8.2. Render Pass Creation</a></li>
<li><a href="chap8.html#renderpass-compatibility">8.3. Render Pass Compatibility</a></li>
<li><a href="chap8.html#_framebuffers">8.4. Framebuffers</a></li>
<li><a href="chap8.html#renderpass-load-operations">8.5. Render Pass Load Operations</a></li>
<li><a href="chap8.html#renderpass-store-operations">8.6. Render Pass Store Operations</a></li>
<li><a href="chap8.html#renderpass-resolve-operations">8.7. Render Pass Multisample Resolve Operations</a></li>
<li><a href="chap8.html#renderpass-commands">8.8. Render Pass Commands</a></li>
<li><a href="chap8.html#_common_render_pass_data_races_informative">8.9. Common Render Pass Data Races (Informative)</a></li>
</ul>
</li>
<li><a href="chap9.html">9. Shaders</a>
<ul class="sectlevel2">
<li><a href="chap9.html#shader-modules">9.1. Shader Modules</a></li>
<li><a href="chap9.html#shaders-binding">9.2. Binding Shaders</a></li>
<li><a href="chap9.html#shaders-execution">9.3. Shader Execution</a></li>
<li><a href="chap9.html#shaders-execution-memory-ordering">9.4. Shader Memory Access Ordering</a></li>
<li><a href="chap9.html#shaders-inputs">9.5. Shader Inputs and Outputs</a></li>
<li><a href="chap9.html#shaders-vertex">9.6. Vertex Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-control">9.7. Tessellation Control Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-evaluation">9.8. Tessellation Evaluation Shaders</a></li>
<li><a href="chap9.html#shaders-geometry">9.9. Geometry Shaders</a></li>
<li><a href="chap9.html#shaders-fragment">9.10. Fragment Shaders</a></li>
<li><a href="chap9.html#shaders-compute">9.11. Compute Shaders</a></li>
<li><a href="chap9.html#shaders-ray-generation">9.12. Ray Generation Shaders</a></li>
<li><a href="chap9.html#shaders-intersection">9.13. Intersection Shaders</a></li>
<li><a href="chap9.html#shaders-any-hit">9.14. Any-Hit Shaders</a></li>
<li><a href="chap9.html#shaders-closest-hit">9.15. Closest Hit Shaders</a></li>
<li><a href="chap9.html#shaders-miss">9.16. Miss Shaders</a></li>
<li><a href="chap9.html#shaders-callable">9.17. Callable Shaders</a></li>
<li><a href="chap9.html#shaders-interpolation-decorations">9.18. Interpolation decorations</a></li>
<li><a href="chap9.html#shaders-staticuse">9.19. Static Use</a></li>
<li><a href="chap9.html#shaders-scope">9.20. Scope</a></li>
<li><a href="chap9.html#shaders-group-operations">9.21. Group Operations</a></li>
<li><a href="chap9.html#shaders-quad-operations">9.22. Quad Group Operations</a></li>
<li><a href="chap9.html#shaders-derivative-operations">9.23. Derivative Operations</a></li>
<li><a href="chap9.html#shaders-helper-invocations">9.24. Helper Invocations</a></li>
<li><a href="chap9.html#_cooperative_matrices">9.25. Cooperative Matrices</a></li>
</ul>
</li>
<li><a href="chap10.html">10. Pipelines</a>
<ul class="sectlevel2">
<li><a href="chap10.html#pipelines-compute">10.1. Compute Pipelines</a></li>
<li><a href="chap10.html#pipelines-graphics">10.2. Graphics Pipelines</a></li>
<li><a href="chap10.html#pipelines-ray-tracing">10.3. Ray Tracing Pipelines</a></li>
<li><a href="chap10.html#pipelines-destruction">10.4. Pipeline Destruction</a></li>
<li><a href="chap10.html#pipelines-multiple">10.5. Multiple Pipeline Creation</a></li>
<li><a href="chap10.html#pipelines-pipeline-derivatives">10.6. Pipeline Derivatives</a></li>
<li><a href="chap10.html#pipelines-cache">10.7. Pipeline Cache</a></li>
<li><a href="chap10.html#pipelines-specialization-constants">10.8. Specialization Constants</a></li>
<li><a href="chap10.html#pipelines-library">10.9. Pipeline Libraries</a></li>
<li><a href="chap10.html#pipelines-binding">10.10. Pipeline Binding</a></li>
<li><a href="chap10.html#pipelines-dynamic-state">10.11. Dynamic State</a></li>
<li><a href="chap10.html#pipelines-shader-information">10.12. Pipeline Properties and Shader Information</a></li>
</ul>
</li>
<li><a href="chap11.html">11. Memory Allocation</a>
<ul class="sectlevel2">
<li><a href="chap11.html#memory-host">11.1. Host Memory</a></li>
<li><a href="chap11.html#memory-device">11.2. Device Memory</a></li>
</ul>
</li>
<li><a href="chap12.html">12. Resource Creation</a>
<ul class="sectlevel2">
<li><a href="chap12.html#resources-buffers">12.1. Buffers</a></li>
<li><a href="chap12.html#resources-buffer-views">12.2. Buffer Views</a></li>
<li><a href="chap12.html#resources-images">12.3. Images</a></li>
<li><a href="chap12.html#resources-image-layouts">12.4. Image Layouts</a></li>
<li><a href="chap12.html#resources-image-views">12.5. Image Views</a></li>
<li><a href="chap12.html#resources-acceleration-structures">12.6. Acceleration Structures</a></li>
<li><a href="chap12.html#resources-association">12.7. Resource Memory Association</a></li>
<li><a href="chap12.html#resources-sharing">12.8. Resource Sharing Mode</a></li>
<li><a href="chap12.html#resources-memory-aliasing">12.9. Memory Aliasing</a></li>
</ul>
</li>
<li><a href="chap13.html">13. Samplers</a>
<ul class="sectlevel2">
<li><a href="chap13.html#samplers-YCbCr-conversion">13.1. Sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></li>
</ul>
</li>
<li><a href="chap14.html">14. Resource Descriptors</a>
<ul class="sectlevel2">
<li><a href="chap14.html#descriptorsets-types">14.1. Descriptor Types</a></li>
<li><a href="chap14.html#descriptorsets-sets">14.2. Descriptor Sets</a></li>
<li><a href="chap14.html#descriptorsets-physical-storage-buffer">14.3. Physical Storage Buffer Access</a></li>
</ul>
</li>
<li><a href="chap15.html">15. Shader Interfaces</a>
<ul class="sectlevel2">
<li><a href="chap15.html#interfaces-iointerfaces">15.1. Shader Input and Output Interfaces</a></li>
<li><a href="chap15.html#interfaces-vertexinput">15.2. Vertex Input Interface</a></li>
<li><a href="chap15.html#interfaces-fragmentoutput">15.3. Fragment Output Interface</a></li>
<li><a href="chap15.html#interfaces-inputattachment">15.4. Fragment Input Attachment Interface</a></li>
<li><a href="chap15.html#interfaces-raypipeline">15.5. Ray Tracing Pipeline Interface</a></li>
<li><a href="chap15.html#interfaces-resources">15.6. Shader Resource Interface</a></li>
<li><a href="chap15.html#interfaces-builtin-variables">15.7. Built-In Variables</a></li>
</ul>
</li>
<li><a href="chap16.html">16. Image Operations</a>
<ul class="sectlevel2">
<li><a href="chap16.html#_image_operations_overview">16.1. Image Operations Overview</a></li>
<li><a href="chap16.html#_conversion_formulas">16.2. Conversion Formulas</a></li>
<li><a href="chap16.html#_texel_input_operations">16.3. Texel Input Operations</a></li>
<li><a href="chap16.html#_texel_output_operations">16.4. Texel Output Operations</a></li>
<li><a href="chap16.html#textures-normalized-operations">16.5. Normalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#_unnormalized_texel_coordinate_operations">16.6. Unnormalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-integer-coordinate-operations">16.7. Integer Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-sample-operations">16.8. Image Sample Operations</a></li>
<li><a href="chap16.html#textures-instructions">16.9. Image Operation Steps</a></li>
<li><a href="chap16.html#textures-queries">16.10. Image Query Instructions</a></li>
</ul>
</li>
<li><a href="chap17.html">17. Queries</a>
<ul class="sectlevel2">
<li><a href="chap17.html#queries-pools">17.1. Query Pools</a></li>
<li><a href="chap17.html#queries-operation">17.2. Query Operation</a></li>
<li><a href="chap17.html#queries-occlusion">17.3. Occlusion Queries</a></li>
<li><a href="chap17.html#queries-pipestats">17.4. Pipeline Statistics Queries</a></li>
<li><a href="chap17.html#queries-timestamps">17.5. Timestamp Queries</a></li>
<li><a href="chap17.html#queries-performance">17.6. Performance Queries</a></li>
<li><a href="chap17.html#queries-result-status-only">17.7. Result Status Queries</a></li>
<li><a href="chap17.html#queries-video-encode-feedback">17.8. Video Encode Feedback Queries</a></li>
</ul>
</li>
<li><a href="chap18.html">18. Clear Commands</a>
<ul class="sectlevel2">
<li><a href="chap18.html#clears-outside">18.1. Clearing Images Outside A Render Pass Instance</a></li>
<li><a href="chap18.html#clears-inside">18.2. Clearing Images Inside A Render Pass Instance</a></li>
<li><a href="chap18.html#clears-values">18.3. Clear Values</a></li>
<li><a href="chap18.html#clears-filling-buffers">18.4. Filling Buffers</a></li>
<li><a href="chap18.html#clears-updating-buffers">18.5. Updating Buffers</a></li>
</ul>
</li>
<li><a href="chap19.html">19. Copy Commands</a>
<ul class="sectlevel2">
<li><a href="chap19.html#copies-buffers">19.1. Copying Data Between Buffers</a></li>
<li><a href="chap19.html#copies-images">19.2. Copying Data Between Images</a></li>
<li><a href="chap19.html#copies-buffers-images">19.3. Copying Data Between Buffers and Images</a></li>
<li><a href="chap19.html#copies-imagescaling">19.4. Image Copies with Scaling</a></li>
<li><a href="chap19.html#copies-resolve">19.5. Resolving Multisample Images</a></li>
</ul>
</li>
<li><a href="chap20.html">20. Drawing Commands</a>
<ul class="sectlevel2">
<li><a href="chap20.html#drawing-primitive-topologies">20.1. Primitive Topologies</a></li>
<li><a href="chap20.html#drawing-primitive-order">20.2. Primitive Order</a></li>
<li><a href="chap20.html#drawing-primitive-shading">20.3. Programmable Primitive Shading</a></li>
</ul>
</li>
<li><a href="chap21.html">21. Fixed-Function Vertex Processing</a>
<ul class="sectlevel2">
<li><a href="chap21.html#fxvertex-attrib">21.1. Vertex Attributes</a></li>
<li><a href="chap21.html#fxvertex-input">21.2. Vertex Input Description</a></li>
<li><a href="chap21.html#fxvertex-input-address-calculation">21.3. Vertex Input Address Calculation</a></li>
</ul>
</li>
<li><a href="chap22.html">22. Tessellation</a>
<ul class="sectlevel2">
<li><a href="chap22.html#_tessellator">22.1. Tessellator</a></li>
<li><a href="chap22.html#_tessellator_patch_discard">22.2. Tessellator Patch Discard</a></li>
<li><a href="chap22.html#tessellation-tessellator-spacing">22.3. Tessellator Spacing</a></li>
<li><a href="chap22.html#tessellation-primitive-order">22.4. Tessellation Primitive Ordering</a></li>
<li><a href="chap22.html#tessellation-vertex-winding-order">22.5. Tessellator Vertex Winding Order</a></li>
<li><a href="chap22.html#tessellation-triangle-tessellation">22.6. Triangle Tessellation</a></li>
<li><a href="chap22.html#tessellation-quad-tessellation">22.7. Quad Tessellation</a></li>
<li><a href="chap22.html#tessellation-isoline-tessellation">22.8. Isoline Tessellation</a></li>
<li><a href="chap22.html#tessellation-point-mode">22.9. Tessellation Point Mode</a></li>
<li><a href="chap22.html#_tessellation_pipeline_state">22.10. Tessellation Pipeline State</a></li>
</ul>
</li>
<li><a href="chap23.html">23. Geometry Shading</a>
<ul class="sectlevel2">
<li><a href="chap23.html#geometry-input">23.1. Geometry Shader Input Primitives</a></li>
<li><a href="chap23.html#geometry-output">23.2. Geometry Shader Output Primitives</a></li>
<li><a href="chap23.html#geometry-invocations">23.3. Multiple Invocations of Geometry Shaders</a></li>
<li><a href="chap23.html#geometry-ordering">23.4. Geometry Shader Primitive Ordering</a></li>
</ul>
</li>
<li><a href="chap24.html">24. Fixed-Function Vertex Post-Processing</a>
<ul class="sectlevel2">
<li><a href="chap24.html#vertexpostproc-flatshading">24.1. Flat Shading</a></li>
<li><a href="chap24.html#vertexpostproc-clipping">24.2. Primitive Clipping</a></li>
<li><a href="chap24.html#vertexpostproc-clipping-shader-outputs">24.3. Clipping Shader Outputs</a></li>
<li><a href="chap24.html#vertexpostproc-coord-transform">24.4. Coordinate Transformations</a></li>
<li><a href="chap24.html#vertexpostproc-viewport">24.5. Controlling the Viewport</a></li>
</ul>
</li>
<li><a href="chap25.html">25. Rasterization</a>
<ul class="sectlevel2">
<li><a href="chap25.html#primsrast-discard">25.1. Discarding Primitives Before Rasterization</a></li>
<li><a href="chap25.html#primsrast-order">25.2. Rasterization Order</a></li>
<li><a href="chap25.html#primsrast-multisampling">25.3. Multisampling</a></li>
<li><a href="chap25.html#primsrast-fragment-shading-rate">25.4. Fragment Shading Rates</a></li>
<li><a href="chap25.html#primsrast-sampleshading">25.5. Sample Shading</a></li>
<li><a href="chap25.html#primsrast-barycentric">25.6. Barycentric Interpolation</a></li>
<li><a href="chap25.html#primsrast-points">25.7. Points</a></li>
<li><a href="chap25.html#primsrast-lines">25.8. Line Segments</a></li>
<li><a href="chap25.html#primsrast-polygons">25.9. Polygons</a></li>
</ul>
</li>
<li><a href="chap38.html#fragops">26. Fragment Operations</a>
<ul class="sectlevel2">
<li><a href="chap26.html#fragops-scissor">26.1. Scissor Test</a></li>
<li><a href="chap26.html#fragops-samplemask">26.2. Sample Mask Test</a></li>
<li><a href="chap26.html#fragops-shader">26.3. Fragment Shading</a></li>
<li><a href="chap26.html#fragops-covg">26.4. Multisample Coverage</a></li>
<li><a href="chap26.html#fragops-ds-state">26.5. Depth and Stencil Operations</a></li>
<li><a href="chap26.html#fragops-dbt">26.6. Depth Bounds Test</a></li>
<li><a href="chap26.html#fragops-stencil">26.7. Stencil Test</a></li>
<li><a href="chap26.html#fragops-depth">26.8. Depth Test</a></li>
<li><a href="chap26.html#fragops-samplecount">26.9. Sample Counting</a></li>
<li><a href="chap26.html#fragops-coverage-reduction">26.10. Coverage Reduction</a></li>
</ul>
</li>
<li><a href="chap27.html">27. The Framebuffer</a>
<ul class="sectlevel2">
<li><a href="chap27.html#framebuffer-blending">27.1. Blending</a></li>
<li><a href="chap27.html#framebuffer-logicop">27.2. Logical Operations</a></li>
<li><a href="chap27.html#framebuffer-color-write-mask">27.3. Color Write Mask</a></li>
</ul>
</li>
<li><a href="chap28.html">28. Dispatching Commands</a></li>
<li><a href="chap29.html">29. Sparse Resources</a>
<ul class="sectlevel2">
<li><a href="chap29.html#sparsememory-sparseresourcefeatures">29.1. Sparse Resource Features</a></li>
<li><a href="chap29.html#sparsememory-fully-resident">29.2. Sparse Buffers and Fully-Resident Images</a></li>
<li><a href="chap29.html#sparsememory-partially-resident-buffers">29.3. Sparse Partially-Resident Buffers</a></li>
<li><a href="chap29.html#sparsememory-partially-resident-images">29.4. Sparse Partially-Resident Images</a></li>
<li><a href="chap29.html#sparsememory-sparse-memory-aliasing">29.5. Sparse Memory Aliasing</a></li>
<li><a href="chap29.html#_sparse_resource_implementation_guidelines_informative">29.6. Sparse Resource Implementation Guidelines (Informative)</a></li>
<li><a href="chap29.html#sparsememory-resourceapi">29.7. Sparse Resource API</a></li>
</ul>
</li>
<li><a href="chap30.html">30. Window System Integration (WSI)</a>
<ul class="sectlevel2">
<li><a href="chap30.html#_wsi_platform">30.1. WSI Platform</a></li>
<li><a href="chap30.html#_wsi_surface">30.2. WSI Surface</a></li>
<li><a href="chap30.html#display">30.3. Presenting Directly to Display Devices</a></li>
<li><a href="chap30.html#_querying_for_wsi_support">30.4. Querying for WSI Support</a></li>
<li><a href="chap30.html#_surface_queries">30.5. Surface Queries</a></li>
<li><a href="chap30.html#_device_group_queries">30.6. Device Group Queries</a></li>
<li><a href="chap30.html#present-wait">30.7. Present Wait</a></li>
<li><a href="chap30.html#_wsi_swapchain">30.8. WSI Swapchain</a></li>
</ul>
</li>
<li><a href="chap31.html">31. Deferred Host Operations</a>
<ul class="sectlevel2">
<li><a href="chap31.html#deferred-host-operations-requesting">31.1. Requesting Deferral</a></li>
<li><a href="chap31.html#_deferred_host_operations_api">31.2. Deferred Host Operations API</a></li>
</ul>
</li>
<li><a href="chap32.html">32. Acceleration Structures</a>
<ul class="sectlevel2">
<li><a href="chap32.html#acceleration-structure-def">32.1. Acceleration Structures</a></li>
<li><a href="chap32.html#host-acceleration-structure">32.2. Host Acceleration Structure Operations</a></li>
</ul>
</li>
<li><a href="chap33.html">33. Ray Traversal</a>
<ul class="sectlevel2">
<li><a href="chap33.html#ray-intersection-candidate-determination">33.1. Ray Intersection Candidate Determination</a></li>
<li><a href="chap33.html#ray-intersection-culling">33.2. Ray Intersection Culling</a></li>
<li><a href="chap33.html#ray-intersection-confirmation">33.3. Ray Intersection Confirmation</a></li>
<li><a href="chap33.html#ray-closest-hit-determination">33.4. Ray Closest Hit Determination</a></li>
<li><a href="chap33.html#ray-result-determination">33.5. Ray Result Determination</a></li>
</ul>
</li>
<li class="current"><a href="chap34.html">34. Ray Tracing</a>
<ul class="sectlevel2">
<li class="current"><a href="chap34.html#ray-tracing-shader-call">34.1. Shader Call Instructions</a></li>
<li class="current"><a href="chap34.html#ray-tracing-commands">34.2. Ray Tracing Commands</a></li>
<li class="current"><a href="chap34.html#shader-binding-table">34.3. Shader Binding Table</a></li>
<li class="current"><a href="chap34.html#ray-tracing-pipeline-stack">34.4. Ray Tracing Pipeline Stack</a></li>
<li class="current"><a href="chap34.html#ray-tracing-capture-replay">34.5. Ray Tracing Capture Replay</a></li>
</ul>
</li>
<li><a href="chap35.html">35. Video Coding</a>
<ul class="sectlevel2">
<li><a href="chap35.html#video-picture-resources">35.1. Video Picture Resources</a></li>
<li><a href="chap35.html#dpb">35.2. Decoded Picture Buffer</a></li>
<li><a href="chap35.html#video-profiles">35.3. Video Profiles</a></li>
<li><a href="chap35.html#video-capabilities">35.4. Video Capabilities</a></li>
<li><a href="chap35.html#video-session">35.5. Video Sessions</a></li>
<li><a href="chap35.html#video-profile-compatibility">35.6. Video Profile Compatibility</a></li>
<li><a href="chap35.html#video-session-parameters">35.7. Video Session Parameters</a></li>
<li><a href="chap35.html#video-coding-scope">35.8. Video Coding Scope</a></li>
<li><a href="chap35.html#video-coding-control">35.9. Video Coding Control</a></li>
<li><a href="chap35.html#video-decode-operations">35.10. Video Decode Operations</a></li>
<li><a href="chap35.html#decode-h264">35.11. H.264 Decode Operations</a></li>
<li><a href="chap35.html#decode-h265">35.12. H.265 Decode Operations</a></li>
<li><a href="chap35.html#video-encode-operations">35.13. Video Encode Operations</a></li>
</ul>
</li>
<li><a href="chap36.html">36. Extending Vulkan</a>
<ul class="sectlevel2">
<li><a href="chap36.html#extendingvulkan-instanceanddevicefunctionality">36.1. Instance and Device Functionality</a></li>
<li><a href="chap36.html#extendingvulkan-coreversions">36.2. Core Versions</a></li>
<li><a href="chap36.html#extendingvulkan-layers">36.3. Layers</a></li>
<li><a href="chap36.html#extendingvulkan-extensions">36.4. Extensions</a></li>
<li><a href="chap36.html#extendingvulkan-extensions-extensiondependencies">36.5. Extension Dependencies</a></li>
<li><a href="chap36.html#_compatibility_guarantees_informative">36.6. Compatibility Guarantees (Informative)</a></li>
</ul>
</li>
<li><a href="chap37.html">37. Features</a>
<ul class="sectlevel2">
<li><a href="chap37.html#features-requirements">37.1. Feature Requirements</a></li>
</ul>
</li>
<li><a href="chap38.html">38. Limits</a>
<ul class="sectlevel2">
<li><a href="chap38.html#limits-minmax">38.1. Limit Requirements</a></li>
</ul>
</li>
<li><a href="chap39.html">39. Formats</a>
<ul class="sectlevel2">
<li><a href="chap39.html#formats-definition">39.1. Format Definition</a></li>
<li><a href="chap39.html#formats-properties">39.2. Format Properties</a></li>
<li><a href="chap39.html#features-required-format-support">39.3. Required Format Support</a></li>
</ul>
</li>
<li><a href="chap40.html">40. Additional Capabilities</a>
<ul class="sectlevel2">
<li><a href="chap40.html#capabilities-image">40.1. Additional Image Capabilities</a></li>
<li><a href="chap40.html#capabilities-buffer">40.2. Additional Buffer Capabilities</a></li>
<li><a href="chap40.html#capabilities-semaphore">40.3. Optional Semaphore Capabilities</a></li>
<li><a href="chap40.html#capabilities-fence">40.4. Optional Fence Capabilities</a></li>
</ul>
</li>
<li><a href="chap41.html">41. Debugging</a></li>
<li><a href="chap42.html">Appendix A: Vulkan Environment for SPIR-V</a>
<ul class="sectlevel2">
<li><a href="chap42.html#_versions_and_formats">Versions and Formats</a></li>
<li><a href="chap42.html#spirvenv-capabilities">Capabilities</a></li>
<li><a href="chap42.html#spirvenv-module-validation">Validation Rules within a Module</a></li>
<li><a href="chap42.html#spirvenv-precision-operation">Precision and Operation of SPIR-V Instructions</a></li>
<li><a href="chap42.html#spirvenv-image-signedness">Signedness of SPIR-V Image Accesses</a></li>
<li><a href="chap42.html#spirvenv-format-type-matching">Image Format and Type Matching</a></li>
<li><a href="chap42.html#spirvenv-image-formats">Compatibility Between SPIR-V Image Formats And Vulkan Formats</a></li>
<li><a href="chap42.html#spirenv-ray-query-precision-operation">Ray Query Precision and Operation</a></li>
</ul>
</li>
<li><a href="chap43.html">Appendix B: Memory Model</a>
<ul class="sectlevel2">
<li><a href="chap43.html#memory-model-agent">Agent</a></li>
<li><a href="chap43.html#memory-model-memory-location">Memory Location</a></li>
<li><a href="chap43.html#memory-model-allocation">Allocation</a></li>
<li><a href="chap43.html#memory-model-memory-operation">Memory Operation</a></li>
<li><a href="chap43.html#memory-model-references">Reference</a></li>
<li><a href="chap43.html#memory-model-program-order">Program-Order</a></li>
<li><a href="chap43.html#shader-call-related">Shader Call Related</a></li>
<li><a href="chap43.html#shader-call-order">Shader Call Order</a></li>
<li><a href="chap43.html#memory-model-scope">Scope</a></li>
<li><a href="chap43.html#memory-model-atomic-operation">Atomic Operation</a></li>
<li><a href="chap43.html#memory-model-scoped-modification-order">Scoped Modification Order</a></li>
<li><a href="chap43.html#memory-model-memory-semantics">Memory Semantics</a></li>
<li><a href="chap43.html#memory-model-release-sequence">Release Sequence</a></li>
<li><a href="chap43.html#memory-model-synchronizes-with">Synchronizes-With</a></li>
<li><a href="chap43.html#memory-model-system-synchronizes-with">System-Synchronizes-With</a></li>
<li><a href="chap43.html#memory-model-non-private">Private vs. Non-Private</a></li>
<li><a href="chap43.html#memory-model-inter-thread-happens-before">Inter-Thread-Happens-Before</a></li>
<li><a href="chap43.html#memory-model-happens-before">Happens-Before</a></li>
<li><a href="chap43.html#memory-model-availability-visibility">Availability and Visibility</a></li>
<li><a href="chap43.html#memory-model-vulkan-availability-visibility">Availability, Visibility, and Domain Operations</a></li>
<li><a href="chap43.html#memory-model-availability-visibility-semantics">Availability and Visibility Semantics</a></li>
<li><a href="chap43.html#memory-model-instruction-av-vis">Per-Instruction Availability and Visibility Semantics</a></li>
<li><a href="chap43.html#memory-model-location-ordered">Location-Ordered</a></li>
<li><a href="chap43.html#memory-model-access-data-race">Data Race</a></li>
<li><a href="chap43.html#memory-model-visible-to">Visible-To</a></li>
<li><a href="chap43.html#memory-model-acyclicity">Acyclicity</a></li>
<li><a href="chap43.html#memory-model-shader-io">Shader I/O</a></li>
<li><a href="chap43.html#memory-model-deallocation">Deallocation</a></li>
<li><a href="chap43.html#memory-model-informative-descriptions">Descriptions (Informative)</a></li>
<li><a href="chap43.html#memory-model-tessellation-output-ordering">Tessellation Output Ordering</a></li>
</ul>
</li>
<li><a href="chap44.html">Appendix C: Compressed Image Formats</a>
<ul class="sectlevel2">
<li><a href="chap44.html#appendix-compressedtex-bc">Block-Compressed Image Formats</a></li>
<li><a href="chap44.html#appendix-compressedtex-etc2">ETC Compressed Image Formats</a></li>
<li><a href="chap44.html#appendix-compressedtex-astc">ASTC Compressed Image Formats</a></li>
</ul>
</li>
<li><a href="chap45.html">Appendix D: Core Revisions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap45.html#versions-1.1">Version 1.1</a></li>
<li><a href="chap45.html#versions-1.0">Version 1.0</a></li>
</ul>
</li>
<li><a href="chap46.html">Appendix E: Layers &amp; Extensions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap46.html#_extension_dependencies">Extension Dependencies</a></li>
<li><a href="chap46.html#extension-appendices-list">List of Current Extensions</a></li>
<li><a href="chap46.html#provisional-extension-appendices-list">List of Provisional Extensions</a></li>
<li><a href="chap46.html#deprecated-extension-appendices-list">List of Deprecated Extensions</a></li>
</ul>
</li>
<li><a href="chap47.html">Appendix F: API Boilerplate</a>
<ul class="sectlevel2">
<li><a href="chap47.html#boilerplate-headers">Vulkan Header Files</a></li>
<li><a href="chap47.html#boilerplate-wsi-header">Window System-Specific Header Control (Informative)</a></li>
<li><a href="chap47.html#boilerplate-provisional-header">Provisional Extension Header Control (Informative)</a></li>
<li><a href="chap47.html#boilerplate-video-std-headers">Video Std Headers</a></li>
</ul>
</li>
<li><a href="chap48.html">Appendix G: Invariance</a>
<ul class="sectlevel2">
<li><a href="chap48.html#_repeatability">Repeatability</a></li>
<li><a href="chap48.html#_multi_pass_algorithms">Multi-pass Algorithms</a></li>
<li><a href="chap48.html#_invariance_rules">Invariance Rules</a></li>
<li><a href="chap48.html#_tessellation_invariance">Tessellation Invariance</a></li>
</ul>
</li>
<li><a href="chap49.html">Appendix H: Lexicon</a>
<ul class="sectlevel2">
<li><a href="chap49.html#glossary">Glossary</a></li>
<li><a href="chap49.html#lexicon-common-abbreviations">Common Abbreviations</a></li>
<li><a href="chap49.html#lexicon-video-abbreviations">Video-Specific Abbreviations</a></li>
<li><a href="chap49.html#lexicon-prefixes">Prefixes</a></li>
</ul>
</li>
<li><a href="chap50.html">Appendix I: Credits (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap50.html#_working_group_contributors_to_vulkan">Working Group Contributors to Vulkan</a></li>
<li><a href="chap50.html#_other_credits">Other Credits</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="loading_msg" class="hidden" hidden=""><p>Loading… please wait.</p></div>
<!--ChunkedSearchboxMarker-->
<div class="searchbox"><label for="searchbox">Search: </label><input id="searchbox" type="text" disabled="disabled" value="Loading Search Data"><div id="resultsdiv"><ol id="results"></ol></div></div>
<div id="content" class="loadable"><div class="sect1">
<h2 id="ray-tracing"><a class="anchor" href="chap34.html"></a>34. Ray Tracing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ray tracing uses a separate rendering pipeline from both the graphics and
compute pipelines (see <a href="chap10.html#pipelines-ray-tracing">Ray Tracing Pipeline</a>).</p>
</div>
<div id="fig-raypipe" class="imageblock text-center">
<div class="content">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="454.53473" height="183.80112" viewBox="0 0 454.53472 183.80112" version="1.1" id="svg8" sodipodi:docname="ray_tracing_execution.svg" inkscape:version="0.92.4 (5da689c313, 2019-01-14)">
  <defs id="defs2">
    <marker inkscape:stockid="Arrow1Mend" orient="auto" refY="0" refX="0" id="marker9512-2-2-4-7" style="overflow:visible" inkscape:isstock="true" inkscape:collect="always">
      <path id="path9510-2-3-81-1" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:stockid="Arrow1Mend" orient="auto" refY="0" refX="0" id="marker9512-2-2-4-7-1" style="overflow:visible" inkscape:isstock="true" inkscape:collect="always">
      <path id="path9510-2-3-81-1-2" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:stockid="Arrow1Mend" orient="auto" refY="0" refX="0" id="marker9512-2-2-8-1-7-0" style="overflow:visible" inkscape:isstock="true" inkscape:collect="always">
      <path id="path9510-2-3-8-2-1-9" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:stockid="Arrow1Mend" orient="auto" refY="0" refX="0" id="marker9512-2-2-8-1-7-05" style="overflow:visible" inkscape:isstock="true" inkscape:collect="always">
      <path id="path9510-2-3-8-2-1-3" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:stockid="Arrow1Mend" orient="auto" refY="0" refX="0" id="marker9512-2-2-8-1-7-05-1" style="overflow:visible" inkscape:isstock="true" inkscape:collect="always">
      <path id="path9510-2-3-8-2-1-3-9" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:stockid="Arrow1Mend" orient="auto" refY="0" refX="0" id="marker9512-2-2-4-7-13" style="overflow:visible" inkscape:isstock="true" inkscape:collect="always">
      <path id="path9510-2-3-81-1-8" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:stockid="Arrow1Mend" orient="auto" refY="0" refX="0" id="marker9512-2-2-4-7-1-3" style="overflow:visible" inkscape:isstock="true" inkscape:collect="always">
      <path id="path9510-2-3-81-1-2-3" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)" inkscape:connector-curvature="0"></path>
    </marker>
  </defs>
  <sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="2.0000001" inkscape:cx="263.45186" inkscape:cy="204.85377" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" inkscape:snap-center="true" inkscape:snap-object-midpoints="true" inkscape:snap-text-baseline="true" inkscape:window-width="1920" inkscape:window-height="1001" inkscape:window-x="-9" inkscape:window-y="-9" inkscape:window-maximized="0" showguides="false" fit-margin-top="1" fit-margin-right="1" fit-margin-bottom="1" fit-margin-left="1" units="in" inkscape:snap-others="true" inkscape:snap-nodes="true" inkscape:object-nodes="true" height="7.5in">
    <inkscape:grid type="xygrid" id="grid817" originx="79.262856" originy="-1225.558"></inkscape:grid>
  </sodipodi:namedview>
  <metadata id="metadata5">
    <rdf:rdf>
      <cc:work rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc:type>
        <dc:title></dc:title>
      </cc:work>
    </rdf:rdf>
  </metadata>
  <g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(-35.742392,209.97146)">
    <g id="g1684" transform="translate(76.761047,177.11848)">
      <rect y="-385.62808" x="196.64136" height="47.54937" width="98.349922" id="rect815-1-6-5-1-3-2-0" style="fill:#ffffff;fill-opacity:1;stroke:#ff0000;stroke-width:0.92372322;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13.33333302px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.26999986;stroke-miterlimit:4;stroke-dasharray:none" x="246.41849" y="-357.55588" id="text823-0-2-6-1-7-2-1"><tspan y="-357.55588" x="246.41849" id="tspan981" sodipodi:role="line">Any-Hit</tspan></text>
    </g>
    <g transform="translate(-36.358826,-133.79857)" id="g988-3">
      <g id="g4763">
        <rect style="fill:#ffffff;fill-opacity:1;stroke:#ff0000;stroke-width:0.92372322;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" id="rect815-1-6-5-1-3-2-0-7" width="98.349922" height="47.54937" x="191.76122" y="-74.711029"></rect>
        <text id="text823-0-2-6-1-7-2-1-1" y="-46.1577" x="241.06639" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13.33333302px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.26999986;stroke-miterlimit:4;stroke-dasharray:none" xml:space="preserve"><tspan sodipodi:role="line" id="tspan8376" x="241.06639" y="-46.1577">Intersection</tspan></text>
      </g>
    </g>
    <text id="text823-0-2-6-1-7-2-1-9-1" y="-113.86218" x="438.78833" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13.33333302px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.26999986;stroke-miterlimit:4;stroke-dasharray:none" xml:space="preserve"><tspan sodipodi:role="line" id="tspan6495" x="438.78833" y="-113.86218">Hit?</tspan></text>
    <g id="g7686" transform="translate(-211.72239,-23.523486)">
      <rect y="-184.80975" x="600.11108" height="47.54937" width="98.349922" id="rect815-1-6-5-1-3-0-9" style="fill:#ffffff;fill-opacity:1;stroke:#ff0000;stroke-width:0.92372322;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13.33333302px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.26999986;stroke-miterlimit:4;stroke-dasharray:none" x="649.0517" y="-156.07088" id="text823-0-2-6-1-7-4-9"><tspan y="-156.07088" x="649.0517" id="tspan6645" sodipodi:role="line">Closest Hit</tspan></text>
    </g>
    <g transform="translate(196.84052,-0.4705565)" id="g988-3-6">
      <g id="g4763-9">
        <rect style="fill:#ffffff;fill-opacity:1;stroke:#ff0000;stroke-width:0.92372322;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" id="rect815-1-6-5-1-3-2-0-7-3" width="98.349922" height="47.54937" x="191.76122" y="-74.711029"></rect>
        <text id="text823-0-2-6-1-7-2-1-1-5" y="-46.144676" x="240.56183" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13.33333302px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.26999986;stroke-miterlimit:4;stroke-dasharray:none" xml:space="preserve"><tspan sodipodi:role="line" id="tspan6647" x="240.56183" y="-46.144676">Miss</tspan></text>
      </g>
    </g>
    <path style="fill:none;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9512-2-2-4-7)" d="m 439.07803,-95.453012 v 17.927004" id="path9502-8-53-6-5" inkscape:connector-curvature="0" sodipodi:nodetypes="cc"></path>
    <rect style="fill:none;stroke:#000000;stroke-width:1.44848073;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" id="rect3643-7-6" width="54.151859" height="54.151859" x="354.16718" y="78.002197" transform="matrix(0.90285598,-0.42994311,0.90285598,0.42994311,0,0)"></rect>
    <path style="fill:none;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9512-2-2-4-7-1)" d="m 439.07803,-142.01745 v -16.38351" id="path9502-8-53-6-5-2" inkscape:connector-curvature="0" sodipodi:nodetypes="cc"></path>
    <text id="text823-0-2-6-1-7-2-1-5-2-2" y="-145.3622" x="431.07803" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13.33333302px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.26999986;stroke-miterlimit:4;stroke-dasharray:none" xml:space="preserve"><tspan sodipodi:role="line" id="tspan9812-5-3" x="431.07803" y="-145.3622">Y</tspan></text>
    <text id="text823-0-2-6-1-7-2-1-5-1-3" y="-82.515198" x="431.065" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13.33333302px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.26999986;stroke-miterlimit:4;stroke-dasharray:none" xml:space="preserve"><tspan sodipodi:role="line" id="tspan10386-33" x="431.065" y="-82.515198">N</tspan></text>
    <g id="g988-0" transform="translate(-277.43985,-72.408014)">
      <g id="g1576">
        <rect style="fill:#ffffff;fill-opacity:1;stroke:#ff0000;stroke-width:0.92372322;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" id="rect815-1-6-5-1-3-2-0-6" width="98.349922" height="47.54937" x="314.6441" y="-70.14447"></rect>
        <text id="text823-0-2-6-1-7-2-1-8" y="-50.072266" x="364.42123" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13.33333302px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.26999986;stroke-miterlimit:4;stroke-dasharray:none" xml:space="preserve"><tspan y="-50.072266" x="364.42123" id="tspan1568" sodipodi:role="line">Ray</tspan><tspan y="-33.405598" x="364.42123" id="tspan1570" sodipodi:role="line">Generation</tspan></text>
      </g>
    </g>
    <rect style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.92372322;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" id="rect815-1-6-3" width="215.34993" height="47.54937" x="155.40239" y="-142.5096"></rect>
    <text id="text823-0-2-6" y="-130.43739" x="263.56888" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13.33333302px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.26999986;stroke-miterlimit:4;stroke-dasharray:none" xml:space="preserve"><tspan y="-130.43739" x="263.56888" id="tspan947-5" sodipodi:role="line">Acceleration</tspan><tspan id="tspan1116" y="-113.77073" x="263.56888" sodipodi:role="line">Structure</tspan><tspan id="tspan1118" y="-97.104057" x="263.56888" sodipodi:role="line">Traversal</tspan></text>
    <path style="fill:none;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9512-2-2-8-1-7-0)" d="m 135.82735,-118.73491 h 17.927" id="path9502-8-53-7-5-7-6" inkscape:connector-curvature="0" sodipodi:nodetypes="cc"></path>
    <path style="fill:none;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9512-2-2-8-1-7-05)" d="M 370.25969,-118.73523 H 388.1867" id="path9502-8-53-7-5-7-0" inkscape:connector-curvature="0" sodipodi:nodetypes="cc"></path>
    <path style="fill:none;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9512-2-2-8-1-7-05-1)" d="m 254.12852,-184.73491 h 17.92701" id="path9502-8-53-7-5-7-0-2" inkscape:connector-curvature="0" sodipodi:nodetypes="cc"></path>
    <path style="fill:none;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9512-2-2-4-7-13)" d="m 323.17953,-161.4009 v 17.927" id="path9502-8-53-6-5-25" inkscape:connector-curvature="0" sodipodi:nodetypes="cc"></path>
    <path style="fill:none;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9512-2-2-4-7-1-3)" d="m 204.70756,-142.77917 v -16.38351" id="path9502-8-53-6-5-2-9" inkscape:connector-curvature="0" sodipodi:nodetypes="cc" inkscape:transform-center-x="-208" inkscape:transform-center-y="18.485341"></path>
  </g>
</svg>
</div>
<div class="title">Figure 24. Ray tracing pipeline execution</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Caption</div>
<div class="paragraph">
<p>Interaction between the different shader stages in the ray tracing pipeline</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Within the ray tracing pipeline, <code>OpTraceRayKHR</code>
<strong class="purple">can</strong> be called to perform a <a href="chap33.html">ray traversal</a> that invokes the
various ray tracing shader stages during its execution.
The relationship between the ray tracing pipeline object and the geometries
present in the acceleration structure traversed is passed into the ray
tracing command in a <a href="chap12.html#VkBuffer">VkBuffer</a> object known as a <em>shader binding
table</em>.
<code>OpExecuteCallableKHR</code> can also be used in ray tracing pipelines to
invoke a <a href="chap9.html#shaders-callable">callable shader</a>.</p>
</div>
<div class="paragraph">
<p>During execution, control alternates between scheduling and other
operations.
The scheduling functionality is implementation-specific and is responsible
for workload execution.
The shader stages are programmable.
<a href="chap33.html"><em>Traversal</em></a>, which refers to the process of traversing
acceleration structures to find potential intersections of rays with
geometry, is fixed function.</p>
</div>
<div class="paragraph">
<p>The programmable portions of the pipeline are exposed in a single-ray
programming model, with each invocation handling one ray at a time.
Memory operations <strong class="purple">can</strong> be synchronized using standard memory barriers.
The <code>Workgroup</code> scope and variables with a storage class of
<code>Workgroup</code> <strong class="purple">must</strong> not be used in the ray tracing pipeline.</p>
</div>
<div class="sect2">
<h3 id="ray-tracing-shader-call"><a class="anchor" href="chap34.html#ray-tracing-shader-call"></a>34.1. Shader Call Instructions</h3>
<div class="paragraph">
<p>A <em>shader call</em> is an instruction which <strong class="purple">may</strong> cause execution to continue
elsewhere by creating one or more invocations that execute a different
shader stage.</p>
</div>
<div class="paragraph">
<p>The shader call instructions are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>OpTraceRayKHR</code> which <strong class="purple">may</strong> invoke intersection, any-hit, closest hit,
or miss shaders,</p>
</li>
<li>
<p><code>OpReportIntersectionKHR</code> which <strong class="purple">may</strong> invoke any-hit shaders, and</p>
</li>
<li>
<p><code>OpExecuteCallableKHR</code> which will invoke a callable shader.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The invocations created by shader call instructions are grouped into
subgroups by the implementation.
Those subgroups <strong class="purple">may</strong> be unrelated to the subgroup of the parent invocation.</p>
</div>
<div id="ray-tracing-recursion-depth" class="paragraph">
<p><em>Pipeline trace ray instructions</em> <strong class="purple">can</strong> be used recursively; invoked shaders
<strong class="purple">can</strong> themselves execute pipeline trace ray instructions, to a maximum depth
defined by the
<a href="chap38.html#limits-maxRayRecursionDepth"><code>maxRayRecursionDepth</code></a> limit.</p>
</div>
<div class="paragraph">
<p>Shaders directly invoked from the API always have a recursion depth of 0;
each shader executed by a pipeline trace ray instruction has a recursion
depth one higher than the recursion depth of the shader which invoked it.
Applications <strong class="purple">must</strong> not invoke a shader with a recursion depth greater than
the value of
<code>maxPipelineRayRecursionDepth</code> specified in the pipeline.</p>
</div>
<div class="paragraph">
<p>There is no explicit recursion limit for other shader call instructions
which may recurse (e.g. <code>OpExecuteCallableKHR</code>) but there is an upper
bound determined by the <a href="chap34.html#ray-tracing-pipeline-stack">stack size</a>.</p>
</div>
<div id="ray-tracing-repack" class="paragraph">
<p>An <em>invocation repack instruction</em> is a ray tracing shader call instruction
where the implementation <strong class="purple">may</strong> change the set of invocations that are
executing.
When a repack instruction is encountered, the invocation is suspended and a
new invocation begins and executes the instruction.
After executing the repack instruction (which <strong class="purple">may</strong> result in other ray
tracing shader stages executing) the new invocation ends and the original
invocation is resumed, but it <strong class="purple">may</strong> be resumed in a different subgroup or at
a different <code>SubgroupLocalInvocationId</code> within the same subgroup.
When a subset of invocations in a subgroup execute the invocation repack
instruction, those that do not execute it remain in the same subgroup at the
same <code>SubgroupLocalInvocationId</code>.</p>
</div>
<div class="paragraph">
<p>The <code>OpTraceRayKHR</code>,
<code>OpReportIntersectionKHR</code>, and <code>OpExecuteCallableKHR</code> instructions are
invocation repack instructions.</p>
</div>
<div class="paragraph">
<p>The invocations that are executing before an invocation repack instruction,
after the instruction, or are created by the instruction, are
<a href="chap43.html#shader-call-related">shader-call-related</a>.</p>
</div>
<div class="paragraph">
<p>If the implementation changes the composition of subgroups, the values of
<code>SubgroupSize</code>, <code>SubgroupLocalInvocationId</code>,
and builtin variables that are derived from them (<code>SubgroupEqMask</code>,
<code>SubgroupGeMask</code>, <code>SubgroupGtMask</code>, <code>SubgroupLeMask</code>,
<code>SubgroupLtMask</code>) <strong class="purple">must</strong> be changed accordingly by the invocation repack
instruction.
The application <strong class="purple">must</strong> use <a href="chap42.html#builtin-volatile-semantics"><code>Volatile</code>
semantics</a> on these <code>BuiltIn</code> variables when used in the ray generation,
closest hit, miss, intersection, and callable shaders.
Similarly, the application <strong class="purple">must</strong> use <code>Volatile</code> semantics on any
<code>RayTmaxKHR</code> decorated <code>Builtin</code> used in an intersection shader.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p><a href="chap9.html#shaders-group-operations">Subgroup operations</a> are permitted in the
programmable ray tracing shader stages.
However, shader call instructions place a bound on where results of subgroup
instructions or subgroup-scoped instructions that execute the dynamic
instance of that instruction are potentially valid.
For example, care <strong class="purple">must</strong> be taken when using the result of a ballot operation
that was computed before an invocation repack instruction, after that repack
instruction.
The ballot <strong class="purple">may</strong> be incorrect as the set of invocations could have changed.</p>
</div>
<div class="paragraph">
<p>For clock operations, the value of a <code>Subgroup</code> scoped
<code>OpReadClockKHR</code> read before the dynamic instance of a repack instruction
<strong class="purple">should</strong> not be compared to the result of that clock instruction after the
repack instruction.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>When a ray tracing shader executes a dynamic instance of an invocation
repack instruction which results in another ray tracing shader being
invoked, their instructions are related by
<a href="chap43.html#shader-call-order">shader-call-order</a>.</p>
</div>
<div class="paragraph">
<p>For ray tracing invocations that are
<a href="chap43.html#shader-call-related">shader-call-related</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="chap43.html#memory-model-memory-operation">memory operations</a> on
    <code>StorageBuffer</code>, <code>Image</code>, and <code>ShaderRecordBufferKHR</code> storage
    classes <strong class="purple">can</strong> be synchronized using the
<code>ShaderCallKHR</code>
    scope.</p>
</li>
<li>
<p>the <code>CallableDataKHR</code>, <code>IncomingCallableDataKHR</code>,
<code>RayPayloadKHR</code>, <code>HitAttributeKHR</code>, and <code>IncomingRayPayloadKHR</code>
storage classes are <a href="chap43.html#memory-model-shader-io">system-synchronized</a> and
no application availability and visibility operations are required.</p>
</li>
<li>
<p>memory operations within a single invocation before and after the
invocation repack instruction are ordered by
<a href="chap43.html#memory-model-program-order">program-order</a> and do not require explicit
synchronization.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="ray-tracing-commands"><a class="anchor" href="chap34.html#ray-tracing-commands"></a>34.2. Ray Tracing Commands</h3>
<div class="paragraph">
<p><em>Ray tracing commands</em> provoke work in the ray tracing pipeline.
Ray tracing commands are recorded into a command buffer and when executed by
a queue will produce work that executes according to the currently bound ray
tracing pipeline.
A ray tracing pipeline <strong class="purple">must</strong> be bound to a command buffer before any ray
tracing commands are recorded in that command buffer.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To dispatch ray tracing use:</p>
</div>
<div id="vkCmdTraceRaysKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_ray_tracing_pipeline</span>
<span class="kt">void</span> <span class="nf">vkCmdTraceRaysKHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkStridedDeviceAddressRegionKHR</span><span class="o">*</span>      <span class="n">pRaygenShaderBindingTable</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkStridedDeviceAddressRegionKHR</span><span class="o">*</span>      <span class="n">pMissShaderBindingTable</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkStridedDeviceAddressRegionKHR</span><span class="o">*</span>      <span class="n">pHitShaderBindingTable</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkStridedDeviceAddressRegionKHR</span><span class="o">*</span>      <span class="n">pCallableShaderBindingTable</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">width</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">height</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">depth</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pRaygenShaderBindingTable</code> is a
<a href="chap34.html#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> that holds the shader binding
table data for the ray generation shader stage.</p>
</li>
<li>
<p><code>pMissShaderBindingTable</code> is a <a href="chap34.html#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a>
that holds the shader binding table data for the miss shader stage.</p>
</li>
<li>
<p><code>pHitShaderBindingTable</code> is a <a href="chap34.html#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a>
that holds the shader binding table data for the hit shader stage.</p>
</li>
<li>
<p><code>pCallableShaderBindingTable</code> is a
<a href="chap34.html#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> that holds the shader binding
table data for the callable shader stage.</p>
</li>
<li>
<p><code>width</code> is the width of the ray trace query dimensions.</p>
</li>
<li>
<p><code>height</code> is height of the ray trace query dimensions.</p>
</li>
<li>
<p><code>depth</code> is depth of the ray trace query dimensions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When the command is executed, a ray generation group of <span class="eq"><code>width</code>
× <code>height</code> × <code>depth</code></span> rays is assembled.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-magFilter-04553" href="chap34.html#VUID-vkCmdTraceRaysKHR-magFilter-04553"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-magFilter-04553</span><br>

If a <a href="chap13.html#VkSampler">VkSampler</a> created with <code>magFilter</code> or <code>minFilter</code>
equal to <code>VK_FILTER_LINEAR</code> and <code>compareEnable</code> equal to
<code>VK_FALSE</code> is used to sample a <a href="chap12.html#VkImageView">VkImageView</a> as a result of this
command, then the image view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-mipmapMode-04770" href="chap34.html#VUID-vkCmdTraceRaysKHR-mipmapMode-04770"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-mipmapMode-04770</span><br>

If a <a href="chap13.html#VkSampler">VkSampler</a> created with <code>mipmapMode</code> equal to
<code>VK_SAMPLER_MIPMAP_MODE_LINEAR</code> and <code>compareEnable</code> equal to
<code>VK_FALSE</code> is used to sample a <a href="chap12.html#VkImageView">VkImageView</a> as a result of this
command, then the image view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-06479" href="chap34.html#VUID-vkCmdTraceRaysKHR-None-06479"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-06479</span><br>

If a <a href="chap12.html#VkImageView">VkImageView</a> is sampled with
<a href="chap16.html#textures-depth-compare-operation">depth comparison</a>, the image view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_2_SAMPLED_IMAGE_DEPTH_COMPARISON_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02691" href="chap34.html#VUID-vkCmdTraceRaysKHR-None-02691"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02691</span><br>

If a <a href="chap12.html#VkImageView">VkImageView</a> is accessed using atomic operations as a result
of this command, then the image view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_STORAGE_IMAGE_ATOMIC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-07888" href="chap34.html#VUID-vkCmdTraceRaysKHR-None-07888"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-07888</span><br>

If a <code>VK_DESCRIPTOR_TYPE_STORAGE_TEXEL_BUFFER</code> descriptor is
accessed using atomic operations as a result of this command, then the
storage texel buffer’s <a href="chap12.html#resources-buffer-view-format-features">format
features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_STORAGE_TEXEL_BUFFER_ATOMIC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-OpTypeImage-07027" href="chap34.html#VUID-vkCmdTraceRaysKHR-OpTypeImage-07027"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-OpTypeImage-07027</span><br>

For any <a href="chap12.html#VkImageView">VkImageView</a> being written as a storage image where the
image format field of the <code>OpTypeImage</code> is <code>Unknown</code>, the view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_WRITE_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-OpTypeImage-07028" href="chap34.html#VUID-vkCmdTraceRaysKHR-OpTypeImage-07028"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-OpTypeImage-07028</span><br>

For any <a href="chap12.html#VkImageView">VkImageView</a> being read as a storage image where the image
format field of the <code>OpTypeImage</code> is <code>Unknown</code>, the view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_READ_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-OpTypeImage-07029" href="chap34.html#VUID-vkCmdTraceRaysKHR-OpTypeImage-07029"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-OpTypeImage-07029</span><br>

For any <a href="chap12.html#VkBufferView">VkBufferView</a> being written as a storage texel buffer where
the image format field of the <code>OpTypeImage</code> is <code>Unknown</code>, the
view’s <a href="chap39.html#VkFormatProperties3">buffer features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_WRITE_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-OpTypeImage-07030" href="chap34.html#VUID-vkCmdTraceRaysKHR-OpTypeImage-07030"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-OpTypeImage-07030</span><br>

Any <a href="chap12.html#VkBufferView">VkBufferView</a> being read as a storage texel buffer where the
image format field of the <code>OpTypeImage</code> is <code>Unknown</code> then the
view’s <a href="chap39.html#VkFormatProperties3">buffer features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_READ_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02697" href="chap34.html#VUID-vkCmdTraceRaysKHR-None-02697"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02697</span><br>

For each set <em>n</em> that is statically used by <a href="chap9.html#shaders-binding">a bound
shader</a>, a descriptor set <strong class="purple">must</strong> have been bound to <em>n</em> at the same
pipeline bind point, with a <a href="chap14.html#VkPipelineLayout">VkPipelineLayout</a> that is compatible
for set <em>n</em>, with the <a href="chap14.html#VkPipelineLayout">VkPipelineLayout</a> used to create the current
<a href="chap10.html#VkPipeline">VkPipeline</a>, as described in <a href="chap14.html#descriptorsets-compatibility">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02698" href="chap34.html#VUID-vkCmdTraceRaysKHR-None-02698"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02698</span><br>

For each push constant that is statically used by <a href="chap9.html#shaders-binding">a
bound shader</a>, a push constant value <strong class="purple">must</strong> have been set for the same
pipeline bind point, with a <a href="chap14.html#VkPipelineLayout">VkPipelineLayout</a> that is compatible
for push constants, with the <a href="chap14.html#VkPipelineLayout">VkPipelineLayout</a> used to create the
current <a href="chap10.html#VkPipeline">VkPipeline</a>, as described in
<a href="chap14.html#descriptorsets-compatibility">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-maintenance4-06425" href="chap34.html#VUID-vkCmdTraceRaysKHR-maintenance4-06425"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-maintenance4-06425</span><br>

If the <a href="chap37.html#features-maintenance4"><code>maintenance4</code></a> feature is not
enabled, then for each push constant that is statically used by
<a href="chap9.html#shaders-binding">a bound shader</a>, a push constant value <strong class="purple">must</strong> have
been set for the same pipeline bind point, with a <a href="chap14.html#VkPipelineLayout">VkPipelineLayout</a>
that is compatible for push constants, with the <a href="chap14.html#VkPipelineLayout">VkPipelineLayout</a>
used to create the current <a href="chap10.html#VkPipeline">VkPipeline</a>, as described in
<a href="chap14.html#descriptorsets-compatibility">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02699" href="chap34.html#VUID-vkCmdTraceRaysKHR-None-02699"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02699</span><br>

Descriptors in each bound descriptor set, specified via
<a href="chap14.html#vkCmdBindDescriptorSets">vkCmdBindDescriptorSets</a>, <strong class="purple">must</strong> be valid as described by
<a href="chap14.html#descriptor-validity">descriptor validity</a> if they are statically used
by <a href="chap9.html#shaders-binding">a bound shader</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02700" href="chap34.html#VUID-vkCmdTraceRaysKHR-None-02700"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02700</span><br>

A valid pipeline <strong class="purple">must</strong> be bound to the pipeline bind point used by this
command</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02859" href="chap34.html#VUID-vkCmdTraceRaysKHR-None-02859"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02859</span><br>

There <strong class="purple">must</strong> not have been any calls to dynamic state setting commands
for any state not specified as dynamic in the <a href="chap10.html#VkPipeline">VkPipeline</a> object
bound to the pipeline bind point used by this command, since that
pipeline was bound</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02702" href="chap34.html#VUID-vkCmdTraceRaysKHR-None-02702"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02702</span><br>

If the <a href="chap10.html#VkPipeline">VkPipeline</a> object bound to the pipeline bind point used by
this command accesses a <a href="chap13.html#VkSampler">VkSampler</a> object that uses unnormalized
coordinates, that sampler <strong class="purple">must</strong> not be used to sample from any
<a href="chap12.html#VkImage">VkImage</a> with a <a href="chap12.html#VkImageView">VkImageView</a> of the type
<code>VK_IMAGE_VIEW_TYPE_3D</code>, <code>VK_IMAGE_VIEW_TYPE_CUBE</code>,
<code>VK_IMAGE_VIEW_TYPE_1D_ARRAY</code>, <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code> or
<code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code>, in any shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02703" href="chap34.html#VUID-vkCmdTraceRaysKHR-None-02703"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02703</span><br>

If the <a href="chap10.html#VkPipeline">VkPipeline</a> object bound to the pipeline bind point used by
this command accesses a <a href="chap13.html#VkSampler">VkSampler</a> object that uses unnormalized
coordinates, that sampler <strong class="purple">must</strong> not be used with any of the SPIR-V
<code>OpImageSample*</code> or <code>OpImageSparseSample*</code> instructions with
<code>ImplicitLod</code>, <code>Dref</code> or <code>Proj</code> in their name, in any shader
stage</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02704" href="chap34.html#VUID-vkCmdTraceRaysKHR-None-02704"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02704</span><br>

If the <a href="chap10.html#VkPipeline">VkPipeline</a> object bound to the pipeline bind point used by
this command accesses a <a href="chap13.html#VkSampler">VkSampler</a> object that uses unnormalized
coordinates, that sampler <strong class="purple">must</strong> not be used with any of the SPIR-V
<code>OpImageSample*</code> or <code>OpImageSparseSample*</code> instructions that includes a
LOD bias or any offset values, in any shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02705" href="chap34.html#VUID-vkCmdTraceRaysKHR-None-02705"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02705</span><br>

If the <a href="chap37.html#features-robustBufferAccess"><code>robustBufferAccess</code></a> feature
is not enabled, and if the <a href="chap10.html#VkPipeline">VkPipeline</a> object bound to the pipeline
bind point used by this command accesses a uniform buffer, it <strong class="purple">must</strong> not
access values outside of the range of the buffer as specified in the
descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02706" href="chap34.html#VUID-vkCmdTraceRaysKHR-None-02706"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02706</span><br>

If the <a href="chap37.html#features-robustBufferAccess"><code>robustBufferAccess</code></a> feature
is not enabled, and if the <a href="chap10.html#VkPipeline">VkPipeline</a> object bound to the pipeline
bind point used by this command accesses a storage buffer, it <strong class="purple">must</strong> not
access values outside of the range of the buffer as specified in the
descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-commandBuffer-02707" href="chap34.html#VUID-vkCmdTraceRaysKHR-commandBuffer-02707"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-commandBuffer-02707</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap38.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
any resource accessed by <a href="chap9.html#shaders-binding">bound shaders</a> <strong class="purple">must</strong> not be
a protected resource</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-06550" href="chap34.html#VUID-vkCmdTraceRaysKHR-None-06550"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-06550</span><br>

If <a href="chap9.html#shaders-binding">a bound shader</a> accesses a <a href="chap13.html#VkSampler">VkSampler</a> or
<a href="chap12.html#VkImageView">VkImageView</a> object that enables
<a href="chap13.html#samplers-YCbCr-conversion">sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>, that object
<strong class="purple">must</strong> only be used with <code>OpImageSample*</code> or <code>OpImageSparseSample*</code>
instructions</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-ConstOffset-06551" href="chap34.html#VUID-vkCmdTraceRaysKHR-ConstOffset-06551"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-ConstOffset-06551</span><br>

If <a href="chap9.html#shaders-binding">a bound shader</a> accesses a <a href="chap13.html#VkSampler">VkSampler</a> or
<a href="chap12.html#VkImageView">VkImageView</a> object that enables
<a href="chap13.html#samplers-YCbCr-conversion">sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>, that object
<strong class="purple">must</strong> not use the <code>ConstOffset</code> and <code>Offset</code> operands</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-viewType-07752" href="chap34.html#VUID-vkCmdTraceRaysKHR-viewType-07752"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-viewType-07752</span><br>

If a <a href="chap12.html#VkImageView">VkImageView</a> is accessed as a result of this command, then the
image view’s <code>viewType</code> <strong class="purple">must</strong> match the <code>Dim</code> operand of the
<code>OpTypeImage</code> as described in <a href="chap16.html#textures-operation-validation">Instruction/Sampler/Image View Validation</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-format-07753" href="chap34.html#VUID-vkCmdTraceRaysKHR-format-07753"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-format-07753</span><br>

If a <a href="chap12.html#VkImageView">VkImageView</a> is accessed as a result of this command, then the
<a href="chap39.html#formats-numericformat">numeric type</a> of the image view’s <code>format</code>
and the <code>Sampled</code> <code>Type</code> operand of the <code>OpTypeImage</code> <strong class="purple">must</strong>
match</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-OpImageWrite-08795" href="chap34.html#VUID-vkCmdTraceRaysKHR-OpImageWrite-08795"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-OpImageWrite-08795</span><br>

If a <a href="chap12.html#VkImageView">VkImageView</a> created with a format other than
<code>VK_FORMAT_A8_UNORM_KHR</code> is accessed using <code>OpImageWrite</code> as a
result of this command, then the <code>Type</code> of the <code>Texel</code> operand of
that instruction <strong class="purple">must</strong> have at least as many components as the image
view’s format</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-OpImageWrite-08796" href="chap34.html#VUID-vkCmdTraceRaysKHR-OpImageWrite-08796"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-OpImageWrite-08796</span><br>

If a <a href="chap12.html#VkImageView">VkImageView</a> created with the format
<code>VK_FORMAT_A8_UNORM_KHR</code> is accessed using <code>OpImageWrite</code> as a
result of this command, then the <code>Type</code> of the <code>Texel</code> operand of
that instruction <strong class="purple">must</strong> have four components</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-OpImageWrite-04469" href="chap34.html#VUID-vkCmdTraceRaysKHR-OpImageWrite-04469"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-OpImageWrite-04469</span><br>

If a <a href="chap12.html#VkBufferView">VkBufferView</a> is accessed using <code>OpImageWrite</code> as a result
of this command, then the <code>Type</code> of the <code>Texel</code> operand of that
instruction <strong class="purple">must</strong> have at least as many components as the buffer view’s
format</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-07288" href="chap34.html#VUID-vkCmdTraceRaysKHR-None-07288"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-07288</span><br>

Any shader invocation executed by this command <strong class="purple">must</strong>
<a href="chap9.html#shaders-termination">terminate</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-03429" href="chap34.html#VUID-vkCmdTraceRaysKHR-None-03429"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-03429</span><br>

Any shader group handle referenced by this call <strong class="purple">must</strong> have been queried
from the currently bound ray tracing pipeline</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-maxPipelineRayRecursionDepth-03679" href="chap34.html#VUID-vkCmdTraceRaysKHR-maxPipelineRayRecursionDepth-03679"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-maxPipelineRayRecursionDepth-03679</span><br>

This command <strong class="purple">must</strong> not cause a shader call instruction to be executed
from a shader invocation with a <a href="chap34.html#ray-tracing-recursion-depth">recursion
depth</a> greater than the value of <code>maxPipelineRayRecursionDepth</code>
used to create the bound ray tracing pipeline</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-commandBuffer-03635" href="chap34.html#VUID-vkCmdTraceRaysKHR-commandBuffer-03635"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-commandBuffer-03635</span><br>

<code>commandBuffer</code> <strong class="purple">must</strong> not be a protected command buffer</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-size-04023" href="chap34.html#VUID-vkCmdTraceRaysKHR-size-04023"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-size-04023</span><br>

The <code>size</code> member of <code>pRayGenShaderBindingTable</code> <strong class="purple">must</strong> be equal
to its <code>stride</code> member</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pRayGenShaderBindingTable-03680" href="chap34.html#VUID-vkCmdTraceRaysKHR-pRayGenShaderBindingTable-03680"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pRayGenShaderBindingTable-03680</span><br>

If the buffer from which <code>pRayGenShaderBindingTable-&gt;deviceAddress</code> was queried
is non-sparse then it <strong class="purple">must</strong> be bound completely and contiguously to a
single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pRayGenShaderBindingTable-03681" href="chap34.html#VUID-vkCmdTraceRaysKHR-pRayGenShaderBindingTable-03681"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pRayGenShaderBindingTable-03681</span><br>

The buffer from which the <code>pRayGenShaderBindingTable-&gt;deviceAddress</code> is queried
<strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pRayGenShaderBindingTable-03682" href="chap34.html#VUID-vkCmdTraceRaysKHR-pRayGenShaderBindingTable-03682"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pRayGenShaderBindingTable-03682</span><br>

<code>pRayGenShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupBaseAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-03683" href="chap34.html#VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-03683"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-03683</span><br>

If the buffer from which <code>pMissShaderBindingTable-&gt;deviceAddress</code> was queried is
non-sparse then it <strong class="purple">must</strong> be bound completely and contiguously to a
single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-03684" href="chap34.html#VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-03684"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-03684</span><br>

The buffer from which the <code>pMissShaderBindingTable-&gt;deviceAddress</code> is queried
<strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-03685" href="chap34.html#VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-03685"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-03685</span><br>

<code>pMissShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupBaseAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-stride-03686" href="chap34.html#VUID-vkCmdTraceRaysKHR-stride-03686"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-stride-03686</span><br>

<code>pMissShaderBindingTable-&gt;stride</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupHandleAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-stride-04029" href="chap34.html#VUID-vkCmdTraceRaysKHR-stride-04029"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-stride-04029</span><br>

<code>pMissShaderBindingTable-&gt;stride</code> <strong class="purple">must</strong> be less than or equal to
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>maxShaderGroupStride</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03687" href="chap34.html#VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03687"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03687</span><br>

If the buffer from which <code>pHitShaderBindingTable-&gt;deviceAddress</code> was queried is
non-sparse then it <strong class="purple">must</strong> be bound completely and contiguously to a
single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03688" href="chap34.html#VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03688"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03688</span><br>

The buffer from which the <code>pHitShaderBindingTable-&gt;deviceAddress</code> is queried
<strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03689" href="chap34.html#VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03689"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03689</span><br>

<code>pHitShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupBaseAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-stride-03690" href="chap34.html#VUID-vkCmdTraceRaysKHR-stride-03690"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-stride-03690</span><br>

<code>pHitShaderBindingTable-&gt;stride</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupHandleAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-stride-04035" href="chap34.html#VUID-vkCmdTraceRaysKHR-stride-04035"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-stride-04035</span><br>

<code>pHitShaderBindingTable-&gt;stride</code> <strong class="purple">must</strong> be less than or equal to
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>maxShaderGroupStride</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-03691" href="chap34.html#VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-03691"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-03691</span><br>

If the buffer from which <code>pCallableShaderBindingTable-&gt;deviceAddress</code> was queried
is non-sparse then it <strong class="purple">must</strong> be bound completely and contiguously to a
single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-03692" href="chap34.html#VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-03692"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-03692</span><br>

The buffer from which the <code>pCallableShaderBindingTable-&gt;deviceAddress</code> is queried
<strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-03693" href="chap34.html#VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-03693"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-03693</span><br>

<code>pCallableShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupBaseAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-stride-03694" href="chap34.html#VUID-vkCmdTraceRaysKHR-stride-03694"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-stride-03694</span><br>

<code>pCallableShaderBindingTable-&gt;stride</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupHandleAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-stride-04041" href="chap34.html#VUID-vkCmdTraceRaysKHR-stride-04041"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-stride-04041</span><br>

<code>pCallableShaderBindingTable-&gt;stride</code> <strong class="purple">must</strong> be less than or equal to
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>maxShaderGroupStride</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-flags-03696" href="chap34.html#VUID-vkCmdTraceRaysKHR-flags-03696"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-flags-03696</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_CLOSEST_HIT_SHADERS_BIT_KHR</code>,
<code>pHitShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong> not be zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-flags-03697" href="chap34.html#VUID-vkCmdTraceRaysKHR-flags-03697"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-flags-03697</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_INTERSECTION_SHADERS_BIT_KHR</code>,
<code>pHitShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong> not be zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-flags-03511" href="chap34.html#VUID-vkCmdTraceRaysKHR-flags-03511"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-flags-03511</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_MISS_SHADERS_BIT_KHR</code>, the
shader group handle identified by <code>pMissShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong>
not be set to zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-flags-03512" href="chap34.html#VUID-vkCmdTraceRaysKHR-flags-03512"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-flags-03512</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_ANY_HIT_SHADERS_BIT_KHR</code>,
entries in the table identified by <code>pHitShaderBindingTable-&gt;deviceAddress</code>
accessed as a result of this command in order to execute an any-hit
shader <strong class="purple">must</strong> not be set to zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-flags-03513" href="chap34.html#VUID-vkCmdTraceRaysKHR-flags-03513"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-flags-03513</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_CLOSEST_HIT_SHADERS_BIT_KHR</code>,
entries in the table identified by <code>pHitShaderBindingTable-&gt;deviceAddress</code>
accessed as a result of this command in order to execute a closest hit
shader <strong class="purple">must</strong> not be set to zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-flags-03514" href="chap34.html#VUID-vkCmdTraceRaysKHR-flags-03514"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-flags-03514</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_INTERSECTION_SHADERS_BIT_KHR</code>,
entries in the table identified by <code>pHitShaderBindingTable-&gt;deviceAddress</code>
accessed as a result of this command in order to execute an intersection
shader <strong class="purple">must</strong> not be set to zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-04735" href="chap34.html#VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-04735"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-04735</span><br>

Any non-zero hit shader group entries in the table identified by
<code>pHitShaderBindingTable-&gt;deviceAddress</code> accessed by this call from a geometry
with a <code>geometryType</code> of <code>VK_GEOMETRY_TYPE_TRIANGLES_KHR</code> <strong class="purple">must</strong>
have been created with
<code>VK_RAY_TRACING_SHADER_GROUP_TYPE_TRIANGLES_HIT_GROUP_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-04736" href="chap34.html#VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-04736"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-04736</span><br>

Any non-zero hit shader group entries in the table identified by
<code>pHitShaderBindingTable-&gt;deviceAddress</code> accessed by this call from a geometry
with a <code>geometryType</code> of <code>VK_GEOMETRY_TYPE_AABBS_KHR</code> <strong class="purple">must</strong> have
been created with
<code>VK_RAY_TRACING_SHADER_GROUP_TYPE_PROCEDURAL_HIT_GROUP_KHR</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-width-03638" href="chap34.html#VUID-vkCmdTraceRaysKHR-width-03638"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-width-03638</span><br>

<code>width</code> <strong class="purple">must</strong> be less than or equal to
<span class="eq"><code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[0]
× <code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupSize</code>[0]</span></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-height-03639" href="chap34.html#VUID-vkCmdTraceRaysKHR-height-03639"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-height-03639</span><br>

<code>height</code> <strong class="purple">must</strong> be less than or equal to
<span class="eq"><code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[1]
× <code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupSize</code>[1]</span></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-depth-03640" href="chap34.html#VUID-vkCmdTraceRaysKHR-depth-03640"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-depth-03640</span><br>

<code>depth</code> <strong class="purple">must</strong> be less than or equal to
<span class="eq"><code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[2]
× <code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupSize</code>[2]</span></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-width-03641" href="chap34.html#VUID-vkCmdTraceRaysKHR-width-03641"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-width-03641</span><br>

<span class="eq"><code>width</code> × <code>height</code> × <code>depth</code></span> <strong class="purple">must</strong> be less
than or equal to
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>maxRayDispatchInvocationCount</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-commandBuffer-parameter" href="chap34.html#VUID-vkCmdTraceRaysKHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pRaygenShaderBindingTable-parameter" href="chap34.html#VUID-vkCmdTraceRaysKHR-pRaygenShaderBindingTable-parameter"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pRaygenShaderBindingTable-parameter</span><br>
 <code>pRaygenShaderBindingTable</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap34.html#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-parameter" href="chap34.html#VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-parameter"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-parameter</span><br>
 <code>pMissShaderBindingTable</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap34.html#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-parameter" href="chap34.html#VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-parameter"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-parameter</span><br>
 <code>pHitShaderBindingTable</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap34.html#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-parameter" href="chap34.html#VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-parameter"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-parameter</span><br>
 <code>pCallableShaderBindingTable</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap34.html#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-commandBuffer-recording" href="chap34.html#VUID-vkCmdTraceRaysKHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-commandBuffer-cmdpool" href="chap34.html#VUID-vkCmdTraceRaysKHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-renderpass" href="chap34.html#VUID-vkCmdTraceRaysKHR-renderpass"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-videocoding" href="chap34.html#VUID-vkCmdTraceRaysKHR-videocoding"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap35.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkStridedDeviceAddressRegionKHR</code> structure is defined as:</p>
</div>
<div id="VkStridedDeviceAddressRegionKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_ray_tracing_pipeline</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkStridedDeviceAddressRegionKHR</span> <span class="p">{</span>
    <span class="n">VkDeviceAddress</span>    <span class="n">deviceAddress</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">stride</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">size</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkStridedDeviceAddressRegionKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>deviceAddress</code> is the device address (as returned by the
<a href="chap14.html#vkGetBufferDeviceAddressKHR">vkGetBufferDeviceAddressKHR</a> command) at which the region starts, or
zero if the region is unused.</p>
</li>
<li>
<p><code>stride</code> is the byte stride between consecutive elements.</p>
</li>
<li>
<p><code>size</code> is the size in bytes of the region starting at
<code>deviceAddress</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkStridedDeviceAddressRegionKHR-size-04631" href="chap34.html#VUID-VkStridedDeviceAddressRegionKHR-size-04631"></a> <span class="vuid">VUID-VkStridedDeviceAddressRegionKHR-size-04631</span><br>

If <code>size</code> is not zero, all addresses between <code>deviceAddress</code> and
<span class="eq"><code>deviceAddress</code> +  <code>size</code> - 1</span> <strong class="purple">must</strong> be in the buffer
device address range of the same buffer</p>
</li>
<li>
<p><a id="VUID-VkStridedDeviceAddressRegionKHR-size-04632" href="chap34.html#VUID-VkStridedDeviceAddressRegionKHR-size-04632"></a> <span class="vuid">VUID-VkStridedDeviceAddressRegionKHR-size-04632</span><br>

If <code>size</code> is not zero, <code>stride</code> <strong class="purple">must</strong> be less than or equal to
the size of the buffer from which <code>deviceAddress</code> was queried</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To dispatch ray tracing, with some parameters sourced on the device, use:</p>
</div>
<div id="vkCmdTraceRaysIndirectKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_ray_tracing_pipeline</span>
<span class="kt">void</span> <span class="nf">vkCmdTraceRaysIndirectKHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkStridedDeviceAddressRegionKHR</span><span class="o">*</span>      <span class="n">pRaygenShaderBindingTable</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkStridedDeviceAddressRegionKHR</span><span class="o">*</span>      <span class="n">pMissShaderBindingTable</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkStridedDeviceAddressRegionKHR</span><span class="o">*</span>      <span class="n">pHitShaderBindingTable</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkStridedDeviceAddressRegionKHR</span><span class="o">*</span>      <span class="n">pCallableShaderBindingTable</span><span class="p">,</span>
    <span class="n">VkDeviceAddress</span>                             <span class="n">indirectDeviceAddress</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pRaygenShaderBindingTable</code> is a
<a href="chap34.html#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> that holds the shader binding
table data for the ray generation shader stage.</p>
</li>
<li>
<p><code>pMissShaderBindingTable</code> is a <a href="chap34.html#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a>
that holds the shader binding table data for the miss shader stage.</p>
</li>
<li>
<p><code>pHitShaderBindingTable</code> is a <a href="chap34.html#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a>
that holds the shader binding table data for the hit shader stage.</p>
</li>
<li>
<p><code>pCallableShaderBindingTable</code> is a
<a href="chap34.html#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> that holds the shader binding
table data for the callable shader stage.</p>
</li>
<li>
<p><code>indirectDeviceAddress</code> is a buffer device address which is a
pointer to a <a href="chap34.html#VkTraceRaysIndirectCommandKHR">VkTraceRaysIndirectCommandKHR</a> structure containing
the trace ray parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkCmdTraceRaysIndirectKHR</code> behaves similarly to <a href="chap34.html#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>
except that the ray trace query dimensions are read by the device from
<code>indirectDeviceAddress</code> during execution.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-magFilter-04553" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-magFilter-04553"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-magFilter-04553</span><br>

If a <a href="chap13.html#VkSampler">VkSampler</a> created with <code>magFilter</code> or <code>minFilter</code>
equal to <code>VK_FILTER_LINEAR</code> and <code>compareEnable</code> equal to
<code>VK_FALSE</code> is used to sample a <a href="chap12.html#VkImageView">VkImageView</a> as a result of this
command, then the image view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-mipmapMode-04770" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-mipmapMode-04770"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-mipmapMode-04770</span><br>

If a <a href="chap13.html#VkSampler">VkSampler</a> created with <code>mipmapMode</code> equal to
<code>VK_SAMPLER_MIPMAP_MODE_LINEAR</code> and <code>compareEnable</code> equal to
<code>VK_FALSE</code> is used to sample a <a href="chap12.html#VkImageView">VkImageView</a> as a result of this
command, then the image view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-06479" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-None-06479"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-06479</span><br>

If a <a href="chap12.html#VkImageView">VkImageView</a> is sampled with
<a href="chap16.html#textures-depth-compare-operation">depth comparison</a>, the image view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_2_SAMPLED_IMAGE_DEPTH_COMPARISON_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02691" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-None-02691"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02691</span><br>

If a <a href="chap12.html#VkImageView">VkImageView</a> is accessed using atomic operations as a result
of this command, then the image view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_STORAGE_IMAGE_ATOMIC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-07888" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-None-07888"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-07888</span><br>

If a <code>VK_DESCRIPTOR_TYPE_STORAGE_TEXEL_BUFFER</code> descriptor is
accessed using atomic operations as a result of this command, then the
storage texel buffer’s <a href="chap12.html#resources-buffer-view-format-features">format
features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_STORAGE_TEXEL_BUFFER_ATOMIC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-OpTypeImage-07027" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-OpTypeImage-07027"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-OpTypeImage-07027</span><br>

For any <a href="chap12.html#VkImageView">VkImageView</a> being written as a storage image where the
image format field of the <code>OpTypeImage</code> is <code>Unknown</code>, the view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_WRITE_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-OpTypeImage-07028" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-OpTypeImage-07028"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-OpTypeImage-07028</span><br>

For any <a href="chap12.html#VkImageView">VkImageView</a> being read as a storage image where the image
format field of the <code>OpTypeImage</code> is <code>Unknown</code>, the view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_READ_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-OpTypeImage-07029" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-OpTypeImage-07029"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-OpTypeImage-07029</span><br>

For any <a href="chap12.html#VkBufferView">VkBufferView</a> being written as a storage texel buffer where
the image format field of the <code>OpTypeImage</code> is <code>Unknown</code>, the
view’s <a href="chap39.html#VkFormatProperties3">buffer features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_WRITE_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-OpTypeImage-07030" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-OpTypeImage-07030"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-OpTypeImage-07030</span><br>

Any <a href="chap12.html#VkBufferView">VkBufferView</a> being read as a storage texel buffer where the
image format field of the <code>OpTypeImage</code> is <code>Unknown</code> then the
view’s <a href="chap39.html#VkFormatProperties3">buffer features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_READ_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02697" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-None-02697"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02697</span><br>

For each set <em>n</em> that is statically used by <a href="chap9.html#shaders-binding">a bound
shader</a>, a descriptor set <strong class="purple">must</strong> have been bound to <em>n</em> at the same
pipeline bind point, with a <a href="chap14.html#VkPipelineLayout">VkPipelineLayout</a> that is compatible
for set <em>n</em>, with the <a href="chap14.html#VkPipelineLayout">VkPipelineLayout</a> used to create the current
<a href="chap10.html#VkPipeline">VkPipeline</a>, as described in <a href="chap14.html#descriptorsets-compatibility">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02698" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-None-02698"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02698</span><br>

For each push constant that is statically used by <a href="chap9.html#shaders-binding">a
bound shader</a>, a push constant value <strong class="purple">must</strong> have been set for the same
pipeline bind point, with a <a href="chap14.html#VkPipelineLayout">VkPipelineLayout</a> that is compatible
for push constants, with the <a href="chap14.html#VkPipelineLayout">VkPipelineLayout</a> used to create the
current <a href="chap10.html#VkPipeline">VkPipeline</a>, as described in
<a href="chap14.html#descriptorsets-compatibility">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-maintenance4-06425" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-maintenance4-06425"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-maintenance4-06425</span><br>

If the <a href="chap37.html#features-maintenance4"><code>maintenance4</code></a> feature is not
enabled, then for each push constant that is statically used by
<a href="chap9.html#shaders-binding">a bound shader</a>, a push constant value <strong class="purple">must</strong> have
been set for the same pipeline bind point, with a <a href="chap14.html#VkPipelineLayout">VkPipelineLayout</a>
that is compatible for push constants, with the <a href="chap14.html#VkPipelineLayout">VkPipelineLayout</a>
used to create the current <a href="chap10.html#VkPipeline">VkPipeline</a>, as described in
<a href="chap14.html#descriptorsets-compatibility">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02699" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-None-02699"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02699</span><br>

Descriptors in each bound descriptor set, specified via
<a href="chap14.html#vkCmdBindDescriptorSets">vkCmdBindDescriptorSets</a>, <strong class="purple">must</strong> be valid as described by
<a href="chap14.html#descriptor-validity">descriptor validity</a> if they are statically used
by <a href="chap9.html#shaders-binding">a bound shader</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02700" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-None-02700"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02700</span><br>

A valid pipeline <strong class="purple">must</strong> be bound to the pipeline bind point used by this
command</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02859" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-None-02859"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02859</span><br>

There <strong class="purple">must</strong> not have been any calls to dynamic state setting commands
for any state not specified as dynamic in the <a href="chap10.html#VkPipeline">VkPipeline</a> object
bound to the pipeline bind point used by this command, since that
pipeline was bound</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02702" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-None-02702"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02702</span><br>

If the <a href="chap10.html#VkPipeline">VkPipeline</a> object bound to the pipeline bind point used by
this command accesses a <a href="chap13.html#VkSampler">VkSampler</a> object that uses unnormalized
coordinates, that sampler <strong class="purple">must</strong> not be used to sample from any
<a href="chap12.html#VkImage">VkImage</a> with a <a href="chap12.html#VkImageView">VkImageView</a> of the type
<code>VK_IMAGE_VIEW_TYPE_3D</code>, <code>VK_IMAGE_VIEW_TYPE_CUBE</code>,
<code>VK_IMAGE_VIEW_TYPE_1D_ARRAY</code>, <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code> or
<code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code>, in any shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02703" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-None-02703"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02703</span><br>

If the <a href="chap10.html#VkPipeline">VkPipeline</a> object bound to the pipeline bind point used by
this command accesses a <a href="chap13.html#VkSampler">VkSampler</a> object that uses unnormalized
coordinates, that sampler <strong class="purple">must</strong> not be used with any of the SPIR-V
<code>OpImageSample*</code> or <code>OpImageSparseSample*</code> instructions with
<code>ImplicitLod</code>, <code>Dref</code> or <code>Proj</code> in their name, in any shader
stage</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02704" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-None-02704"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02704</span><br>

If the <a href="chap10.html#VkPipeline">VkPipeline</a> object bound to the pipeline bind point used by
this command accesses a <a href="chap13.html#VkSampler">VkSampler</a> object that uses unnormalized
coordinates, that sampler <strong class="purple">must</strong> not be used with any of the SPIR-V
<code>OpImageSample*</code> or <code>OpImageSparseSample*</code> instructions that includes a
LOD bias or any offset values, in any shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02705" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-None-02705"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02705</span><br>

If the <a href="chap37.html#features-robustBufferAccess"><code>robustBufferAccess</code></a> feature
is not enabled, and if the <a href="chap10.html#VkPipeline">VkPipeline</a> object bound to the pipeline
bind point used by this command accesses a uniform buffer, it <strong class="purple">must</strong> not
access values outside of the range of the buffer as specified in the
descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02706" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-None-02706"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02706</span><br>

If the <a href="chap37.html#features-robustBufferAccess"><code>robustBufferAccess</code></a> feature
is not enabled, and if the <a href="chap10.html#VkPipeline">VkPipeline</a> object bound to the pipeline
bind point used by this command accesses a storage buffer, it <strong class="purple">must</strong> not
access values outside of the range of the buffer as specified in the
descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-02707" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-02707"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-02707</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap38.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
any resource accessed by <a href="chap9.html#shaders-binding">bound shaders</a> <strong class="purple">must</strong> not be
a protected resource</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-06550" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-None-06550"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-06550</span><br>

If <a href="chap9.html#shaders-binding">a bound shader</a> accesses a <a href="chap13.html#VkSampler">VkSampler</a> or
<a href="chap12.html#VkImageView">VkImageView</a> object that enables
<a href="chap13.html#samplers-YCbCr-conversion">sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>, that object
<strong class="purple">must</strong> only be used with <code>OpImageSample*</code> or <code>OpImageSparseSample*</code>
instructions</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-ConstOffset-06551" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-ConstOffset-06551"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-ConstOffset-06551</span><br>

If <a href="chap9.html#shaders-binding">a bound shader</a> accesses a <a href="chap13.html#VkSampler">VkSampler</a> or
<a href="chap12.html#VkImageView">VkImageView</a> object that enables
<a href="chap13.html#samplers-YCbCr-conversion">sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>, that object
<strong class="purple">must</strong> not use the <code>ConstOffset</code> and <code>Offset</code> operands</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-viewType-07752" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-viewType-07752"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-viewType-07752</span><br>

If a <a href="chap12.html#VkImageView">VkImageView</a> is accessed as a result of this command, then the
image view’s <code>viewType</code> <strong class="purple">must</strong> match the <code>Dim</code> operand of the
<code>OpTypeImage</code> as described in <a href="chap16.html#textures-operation-validation">Instruction/Sampler/Image View Validation</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-format-07753" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-format-07753"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-format-07753</span><br>

If a <a href="chap12.html#VkImageView">VkImageView</a> is accessed as a result of this command, then the
<a href="chap39.html#formats-numericformat">numeric type</a> of the image view’s <code>format</code>
and the <code>Sampled</code> <code>Type</code> operand of the <code>OpTypeImage</code> <strong class="purple">must</strong>
match</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-OpImageWrite-08795" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-OpImageWrite-08795"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-OpImageWrite-08795</span><br>

If a <a href="chap12.html#VkImageView">VkImageView</a> created with a format other than
<code>VK_FORMAT_A8_UNORM_KHR</code> is accessed using <code>OpImageWrite</code> as a
result of this command, then the <code>Type</code> of the <code>Texel</code> operand of
that instruction <strong class="purple">must</strong> have at least as many components as the image
view’s format</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-OpImageWrite-08796" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-OpImageWrite-08796"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-OpImageWrite-08796</span><br>

If a <a href="chap12.html#VkImageView">VkImageView</a> created with the format
<code>VK_FORMAT_A8_UNORM_KHR</code> is accessed using <code>OpImageWrite</code> as a
result of this command, then the <code>Type</code> of the <code>Texel</code> operand of
that instruction <strong class="purple">must</strong> have four components</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-OpImageWrite-04469" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-OpImageWrite-04469"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-OpImageWrite-04469</span><br>

If a <a href="chap12.html#VkBufferView">VkBufferView</a> is accessed using <code>OpImageWrite</code> as a result
of this command, then the <code>Type</code> of the <code>Texel</code> operand of that
instruction <strong class="purple">must</strong> have at least as many components as the buffer view’s
format</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-07288" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-None-07288"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-07288</span><br>

Any shader invocation executed by this command <strong class="purple">must</strong>
<a href="chap9.html#shaders-termination">terminate</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-03429" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-None-03429"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-03429</span><br>

Any shader group handle referenced by this call <strong class="purple">must</strong> have been queried
from the currently bound ray tracing pipeline</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-maxPipelineRayRecursionDepth-03679" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-maxPipelineRayRecursionDepth-03679"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-maxPipelineRayRecursionDepth-03679</span><br>

This command <strong class="purple">must</strong> not cause a shader call instruction to be executed
from a shader invocation with a <a href="chap34.html#ray-tracing-recursion-depth">recursion
depth</a> greater than the value of <code>maxPipelineRayRecursionDepth</code>
used to create the bound ray tracing pipeline</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-03635" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-03635"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-03635</span><br>

<code>commandBuffer</code> <strong class="purple">must</strong> not be a protected command buffer</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-size-04023" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-size-04023"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-size-04023</span><br>

The <code>size</code> member of <code>pRayGenShaderBindingTable</code> <strong class="purple">must</strong> be equal
to its <code>stride</code> member</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pRayGenShaderBindingTable-03680" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-pRayGenShaderBindingTable-03680"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pRayGenShaderBindingTable-03680</span><br>

If the buffer from which <code>pRayGenShaderBindingTable-&gt;deviceAddress</code> was queried
is non-sparse then it <strong class="purple">must</strong> be bound completely and contiguously to a
single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pRayGenShaderBindingTable-03681" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-pRayGenShaderBindingTable-03681"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pRayGenShaderBindingTable-03681</span><br>

The buffer from which the <code>pRayGenShaderBindingTable-&gt;deviceAddress</code> is queried
<strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pRayGenShaderBindingTable-03682" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-pRayGenShaderBindingTable-03682"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pRayGenShaderBindingTable-03682</span><br>

<code>pRayGenShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupBaseAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-03683" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-03683"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-03683</span><br>

If the buffer from which <code>pMissShaderBindingTable-&gt;deviceAddress</code> was queried is
non-sparse then it <strong class="purple">must</strong> be bound completely and contiguously to a
single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-03684" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-03684"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-03684</span><br>

The buffer from which the <code>pMissShaderBindingTable-&gt;deviceAddress</code> is queried
<strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-03685" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-03685"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-03685</span><br>

<code>pMissShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupBaseAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-stride-03686" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-stride-03686"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-stride-03686</span><br>

<code>pMissShaderBindingTable-&gt;stride</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupHandleAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-stride-04029" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-stride-04029"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-stride-04029</span><br>

<code>pMissShaderBindingTable-&gt;stride</code> <strong class="purple">must</strong> be less than or equal to
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>maxShaderGroupStride</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03687" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03687"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03687</span><br>

If the buffer from which <code>pHitShaderBindingTable-&gt;deviceAddress</code> was queried is
non-sparse then it <strong class="purple">must</strong> be bound completely and contiguously to a
single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03688" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03688"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03688</span><br>

The buffer from which the <code>pHitShaderBindingTable-&gt;deviceAddress</code> is queried
<strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03689" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03689"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03689</span><br>

<code>pHitShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupBaseAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-stride-03690" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-stride-03690"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-stride-03690</span><br>

<code>pHitShaderBindingTable-&gt;stride</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupHandleAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-stride-04035" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-stride-04035"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-stride-04035</span><br>

<code>pHitShaderBindingTable-&gt;stride</code> <strong class="purple">must</strong> be less than or equal to
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>maxShaderGroupStride</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-03691" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-03691"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-03691</span><br>

If the buffer from which <code>pCallableShaderBindingTable-&gt;deviceAddress</code> was queried
is non-sparse then it <strong class="purple">must</strong> be bound completely and contiguously to a
single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-03692" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-03692"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-03692</span><br>

The buffer from which the <code>pCallableShaderBindingTable-&gt;deviceAddress</code> is queried
<strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-03693" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-03693"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-03693</span><br>

<code>pCallableShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupBaseAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-stride-03694" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-stride-03694"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-stride-03694</span><br>

<code>pCallableShaderBindingTable-&gt;stride</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupHandleAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-stride-04041" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-stride-04041"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-stride-04041</span><br>

<code>pCallableShaderBindingTable-&gt;stride</code> <strong class="purple">must</strong> be less than or equal to
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>maxShaderGroupStride</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-flags-03696" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-flags-03696"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-flags-03696</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_CLOSEST_HIT_SHADERS_BIT_KHR</code>,
<code>pHitShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong> not be zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-flags-03697" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-flags-03697"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-flags-03697</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_INTERSECTION_SHADERS_BIT_KHR</code>,
<code>pHitShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong> not be zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-flags-03511" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-flags-03511"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-flags-03511</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_MISS_SHADERS_BIT_KHR</code>, the
shader group handle identified by <code>pMissShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong>
not be set to zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-flags-03512" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-flags-03512"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-flags-03512</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_ANY_HIT_SHADERS_BIT_KHR</code>,
entries in the table identified by <code>pHitShaderBindingTable-&gt;deviceAddress</code>
accessed as a result of this command in order to execute an any-hit
shader <strong class="purple">must</strong> not be set to zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-flags-03513" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-flags-03513"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-flags-03513</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_CLOSEST_HIT_SHADERS_BIT_KHR</code>,
entries in the table identified by <code>pHitShaderBindingTable-&gt;deviceAddress</code>
accessed as a result of this command in order to execute a closest hit
shader <strong class="purple">must</strong> not be set to zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-flags-03514" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-flags-03514"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-flags-03514</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_INTERSECTION_SHADERS_BIT_KHR</code>,
entries in the table identified by <code>pHitShaderBindingTable-&gt;deviceAddress</code>
accessed as a result of this command in order to execute an intersection
shader <strong class="purple">must</strong> not be set to zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-04735" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-04735"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-04735</span><br>

Any non-zero hit shader group entries in the table identified by
<code>pHitShaderBindingTable-&gt;deviceAddress</code> accessed by this call from a geometry
with a <code>geometryType</code> of <code>VK_GEOMETRY_TYPE_TRIANGLES_KHR</code> <strong class="purple">must</strong>
have been created with
<code>VK_RAY_TRACING_SHADER_GROUP_TYPE_TRIANGLES_HIT_GROUP_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-04736" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-04736"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-04736</span><br>

Any non-zero hit shader group entries in the table identified by
<code>pHitShaderBindingTable-&gt;deviceAddress</code> accessed by this call from a geometry
with a <code>geometryType</code> of <code>VK_GEOMETRY_TYPE_AABBS_KHR</code> <strong class="purple">must</strong> have
been created with
<code>VK_RAY_TRACING_SHADER_GROUP_TYPE_PROCEDURAL_HIT_GROUP_KHR</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03632" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03632"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03632</span><br>

If the buffer from which <code>indirectDeviceAddress</code> was queried is
non-sparse then it <strong class="purple">must</strong> be bound completely and contiguously to a
single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03633" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03633"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03633</span><br>

The buffer from which <code>indirectDeviceAddress</code> was queried <strong class="purple">must</strong> have
been created with the <code>VK_BUFFER_USAGE_INDIRECT_BUFFER_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03634" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03634"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03634</span><br>

<code>indirectDeviceAddress</code> <strong class="purple">must</strong> be a multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03636" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03636"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03636</span><br>

All device addresses between <code>indirectDeviceAddress</code> and
<span class="eq"><code>indirectDeviceAddress</code> +  <code>sizeof</code>(<code>VkTraceRaysIndirectCommandKHR</code>) -
1</span> <strong class="purple">must</strong> be in the buffer device address range of the same buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-rayTracingPipelineTraceRaysIndirect-03637" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-rayTracingPipelineTraceRaysIndirect-03637"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-rayTracingPipelineTraceRaysIndirect-03637</span><br>

The <a href="chap37.html#features-rayTracingPipelineTraceRaysIndirect"><code>rayTracingPipelineTraceRaysIndirect</code></a> feature <strong class="purple">must</strong> be enabled</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-parameter" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pRaygenShaderBindingTable-parameter" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-pRaygenShaderBindingTable-parameter"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pRaygenShaderBindingTable-parameter</span><br>
 <code>pRaygenShaderBindingTable</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap34.html#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-parameter" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-parameter"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-parameter</span><br>
 <code>pMissShaderBindingTable</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap34.html#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-parameter" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-parameter"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-parameter</span><br>
 <code>pHitShaderBindingTable</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap34.html#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-parameter" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-parameter"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-parameter</span><br>
 <code>pCallableShaderBindingTable</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap34.html#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-recording" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-cmdpool" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-renderpass" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-renderpass"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-videocoding" href="chap34.html#VUID-vkCmdTraceRaysIndirectKHR-videocoding"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap35.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkTraceRaysIndirectCommandKHR</code> structure is defined as:</p>
</div>
<div id="VkTraceRaysIndirectCommandKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_ray_tracing_pipeline</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkTraceRaysIndirectCommandKHR</span> <span class="p">{</span>
    <span class="kt">uint32_t</span>    <span class="n">width</span><span class="p">;</span>
    <span class="kt">uint32_t</span>    <span class="n">height</span><span class="p">;</span>
    <span class="kt">uint32_t</span>    <span class="n">depth</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkTraceRaysIndirectCommandKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>width</code> is the width of the ray trace query dimensions.</p>
</li>
<li>
<p><code>height</code> is height of the ray trace query dimensions.</p>
</li>
<li>
<p><code>depth</code> is depth of the ray trace query dimensions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The members of <code>VkTraceRaysIndirectCommandKHR</code> have the same meaning as
the similarly named parameters of <a href="chap34.html#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommandKHR-width-03638" href="chap34.html#VUID-VkTraceRaysIndirectCommandKHR-width-03638"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommandKHR-width-03638</span><br>

<code>width</code> <strong class="purple">must</strong> be less than or equal to
<span class="eq"><code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[0]
× <code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupSize</code>[0]</span></p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommandKHR-height-03639" href="chap34.html#VUID-VkTraceRaysIndirectCommandKHR-height-03639"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommandKHR-height-03639</span><br>

<code>height</code> <strong class="purple">must</strong> be less than or equal to
<span class="eq"><code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[1]
× <code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupSize</code>[1]</span></p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommandKHR-depth-03640" href="chap34.html#VUID-VkTraceRaysIndirectCommandKHR-depth-03640"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommandKHR-depth-03640</span><br>

<code>depth</code> <strong class="purple">must</strong> be less than or equal to
<span class="eq"><code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[2]
× <code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupSize</code>[2]</span></p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommandKHR-width-03641" href="chap34.html#VUID-VkTraceRaysIndirectCommandKHR-width-03641"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommandKHR-width-03641</span><br>

<span class="eq"><code>width</code> × <code>height</code> × <code>depth</code></span> <strong class="purple">must</strong> be less
than or equal to
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>maxRayDispatchInvocationCount</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To dispatch ray tracing, with some parameters sourced on the device, use:</p>
</div>
<div id="vkCmdTraceRaysIndirect2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_ray_tracing_maintenance1 with VK_KHR_ray_tracing_pipeline</span>
<span class="kt">void</span> <span class="nf">vkCmdTraceRaysIndirect2KHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkDeviceAddress</span>                             <span class="n">indirectDeviceAddress</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>indirectDeviceAddress</code> is a buffer device address which is a
pointer to a <a href="chap34.html#VkTraceRaysIndirectCommand2KHR">VkTraceRaysIndirectCommand2KHR</a> structure containing
the trace ray parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkCmdTraceRaysIndirect2KHR</code> behaves similarly to
<a href="chap34.html#vkCmdTraceRaysIndirectKHR">vkCmdTraceRaysIndirectKHR</a> except that shader binding table parameters
as well as dispatch dimensions are read by the device from
<code>indirectDeviceAddress</code> during execution.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-magFilter-04553" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-magFilter-04553"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-magFilter-04553</span><br>

If a <a href="chap13.html#VkSampler">VkSampler</a> created with <code>magFilter</code> or <code>minFilter</code>
equal to <code>VK_FILTER_LINEAR</code> and <code>compareEnable</code> equal to
<code>VK_FALSE</code> is used to sample a <a href="chap12.html#VkImageView">VkImageView</a> as a result of this
command, then the image view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-mipmapMode-04770" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-mipmapMode-04770"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-mipmapMode-04770</span><br>

If a <a href="chap13.html#VkSampler">VkSampler</a> created with <code>mipmapMode</code> equal to
<code>VK_SAMPLER_MIPMAP_MODE_LINEAR</code> and <code>compareEnable</code> equal to
<code>VK_FALSE</code> is used to sample a <a href="chap12.html#VkImageView">VkImageView</a> as a result of this
command, then the image view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-None-06479" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-None-06479"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-None-06479</span><br>

If a <a href="chap12.html#VkImageView">VkImageView</a> is sampled with
<a href="chap16.html#textures-depth-compare-operation">depth comparison</a>, the image view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_2_SAMPLED_IMAGE_DEPTH_COMPARISON_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-None-02691" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-None-02691"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-None-02691</span><br>

If a <a href="chap12.html#VkImageView">VkImageView</a> is accessed using atomic operations as a result
of this command, then the image view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_STORAGE_IMAGE_ATOMIC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-None-07888" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-None-07888"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-None-07888</span><br>

If a <code>VK_DESCRIPTOR_TYPE_STORAGE_TEXEL_BUFFER</code> descriptor is
accessed using atomic operations as a result of this command, then the
storage texel buffer’s <a href="chap12.html#resources-buffer-view-format-features">format
features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_STORAGE_TEXEL_BUFFER_ATOMIC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-OpTypeImage-07027" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-OpTypeImage-07027"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-OpTypeImage-07027</span><br>

For any <a href="chap12.html#VkImageView">VkImageView</a> being written as a storage image where the
image format field of the <code>OpTypeImage</code> is <code>Unknown</code>, the view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_WRITE_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-OpTypeImage-07028" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-OpTypeImage-07028"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-OpTypeImage-07028</span><br>

For any <a href="chap12.html#VkImageView">VkImageView</a> being read as a storage image where the image
format field of the <code>OpTypeImage</code> is <code>Unknown</code>, the view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_READ_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-OpTypeImage-07029" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-OpTypeImage-07029"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-OpTypeImage-07029</span><br>

For any <a href="chap12.html#VkBufferView">VkBufferView</a> being written as a storage texel buffer where
the image format field of the <code>OpTypeImage</code> is <code>Unknown</code>, the
view’s <a href="chap39.html#VkFormatProperties3">buffer features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_WRITE_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-OpTypeImage-07030" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-OpTypeImage-07030"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-OpTypeImage-07030</span><br>

Any <a href="chap12.html#VkBufferView">VkBufferView</a> being read as a storage texel buffer where the
image format field of the <code>OpTypeImage</code> is <code>Unknown</code> then the
view’s <a href="chap39.html#VkFormatProperties3">buffer features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_2_STORAGE_READ_WITHOUT_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-None-02697" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-None-02697"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-None-02697</span><br>

For each set <em>n</em> that is statically used by <a href="chap9.html#shaders-binding">a bound
shader</a>, a descriptor set <strong class="purple">must</strong> have been bound to <em>n</em> at the same
pipeline bind point, with a <a href="chap14.html#VkPipelineLayout">VkPipelineLayout</a> that is compatible
for set <em>n</em>, with the <a href="chap14.html#VkPipelineLayout">VkPipelineLayout</a> used to create the current
<a href="chap10.html#VkPipeline">VkPipeline</a>, as described in <a href="chap14.html#descriptorsets-compatibility">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-None-02698" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-None-02698"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-None-02698</span><br>

For each push constant that is statically used by <a href="chap9.html#shaders-binding">a
bound shader</a>, a push constant value <strong class="purple">must</strong> have been set for the same
pipeline bind point, with a <a href="chap14.html#VkPipelineLayout">VkPipelineLayout</a> that is compatible
for push constants, with the <a href="chap14.html#VkPipelineLayout">VkPipelineLayout</a> used to create the
current <a href="chap10.html#VkPipeline">VkPipeline</a>, as described in
<a href="chap14.html#descriptorsets-compatibility">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-maintenance4-06425" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-maintenance4-06425"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-maintenance4-06425</span><br>

If the <a href="chap37.html#features-maintenance4"><code>maintenance4</code></a> feature is not
enabled, then for each push constant that is statically used by
<a href="chap9.html#shaders-binding">a bound shader</a>, a push constant value <strong class="purple">must</strong> have
been set for the same pipeline bind point, with a <a href="chap14.html#VkPipelineLayout">VkPipelineLayout</a>
that is compatible for push constants, with the <a href="chap14.html#VkPipelineLayout">VkPipelineLayout</a>
used to create the current <a href="chap10.html#VkPipeline">VkPipeline</a>, as described in
<a href="chap14.html#descriptorsets-compatibility">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-None-02699" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-None-02699"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-None-02699</span><br>

Descriptors in each bound descriptor set, specified via
<a href="chap14.html#vkCmdBindDescriptorSets">vkCmdBindDescriptorSets</a>, <strong class="purple">must</strong> be valid as described by
<a href="chap14.html#descriptor-validity">descriptor validity</a> if they are statically used
by <a href="chap9.html#shaders-binding">a bound shader</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-None-02700" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-None-02700"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-None-02700</span><br>

A valid pipeline <strong class="purple">must</strong> be bound to the pipeline bind point used by this
command</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-None-02859" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-None-02859"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-None-02859</span><br>

There <strong class="purple">must</strong> not have been any calls to dynamic state setting commands
for any state not specified as dynamic in the <a href="chap10.html#VkPipeline">VkPipeline</a> object
bound to the pipeline bind point used by this command, since that
pipeline was bound</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-None-02702" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-None-02702"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-None-02702</span><br>

If the <a href="chap10.html#VkPipeline">VkPipeline</a> object bound to the pipeline bind point used by
this command accesses a <a href="chap13.html#VkSampler">VkSampler</a> object that uses unnormalized
coordinates, that sampler <strong class="purple">must</strong> not be used to sample from any
<a href="chap12.html#VkImage">VkImage</a> with a <a href="chap12.html#VkImageView">VkImageView</a> of the type
<code>VK_IMAGE_VIEW_TYPE_3D</code>, <code>VK_IMAGE_VIEW_TYPE_CUBE</code>,
<code>VK_IMAGE_VIEW_TYPE_1D_ARRAY</code>, <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code> or
<code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code>, in any shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-None-02703" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-None-02703"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-None-02703</span><br>

If the <a href="chap10.html#VkPipeline">VkPipeline</a> object bound to the pipeline bind point used by
this command accesses a <a href="chap13.html#VkSampler">VkSampler</a> object that uses unnormalized
coordinates, that sampler <strong class="purple">must</strong> not be used with any of the SPIR-V
<code>OpImageSample*</code> or <code>OpImageSparseSample*</code> instructions with
<code>ImplicitLod</code>, <code>Dref</code> or <code>Proj</code> in their name, in any shader
stage</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-None-02704" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-None-02704"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-None-02704</span><br>

If the <a href="chap10.html#VkPipeline">VkPipeline</a> object bound to the pipeline bind point used by
this command accesses a <a href="chap13.html#VkSampler">VkSampler</a> object that uses unnormalized
coordinates, that sampler <strong class="purple">must</strong> not be used with any of the SPIR-V
<code>OpImageSample*</code> or <code>OpImageSparseSample*</code> instructions that includes a
LOD bias or any offset values, in any shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-None-02705" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-None-02705"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-None-02705</span><br>

If the <a href="chap37.html#features-robustBufferAccess"><code>robustBufferAccess</code></a> feature
is not enabled, and if the <a href="chap10.html#VkPipeline">VkPipeline</a> object bound to the pipeline
bind point used by this command accesses a uniform buffer, it <strong class="purple">must</strong> not
access values outside of the range of the buffer as specified in the
descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-None-02706" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-None-02706"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-None-02706</span><br>

If the <a href="chap37.html#features-robustBufferAccess"><code>robustBufferAccess</code></a> feature
is not enabled, and if the <a href="chap10.html#VkPipeline">VkPipeline</a> object bound to the pipeline
bind point used by this command accesses a storage buffer, it <strong class="purple">must</strong> not
access values outside of the range of the buffer as specified in the
descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-commandBuffer-02707" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-commandBuffer-02707"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-commandBuffer-02707</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap38.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
any resource accessed by <a href="chap9.html#shaders-binding">bound shaders</a> <strong class="purple">must</strong> not be
a protected resource</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-None-06550" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-None-06550"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-None-06550</span><br>

If <a href="chap9.html#shaders-binding">a bound shader</a> accesses a <a href="chap13.html#VkSampler">VkSampler</a> or
<a href="chap12.html#VkImageView">VkImageView</a> object that enables
<a href="chap13.html#samplers-YCbCr-conversion">sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>, that object
<strong class="purple">must</strong> only be used with <code>OpImageSample*</code> or <code>OpImageSparseSample*</code>
instructions</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-ConstOffset-06551" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-ConstOffset-06551"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-ConstOffset-06551</span><br>

If <a href="chap9.html#shaders-binding">a bound shader</a> accesses a <a href="chap13.html#VkSampler">VkSampler</a> or
<a href="chap12.html#VkImageView">VkImageView</a> object that enables
<a href="chap13.html#samplers-YCbCr-conversion">sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>, that object
<strong class="purple">must</strong> not use the <code>ConstOffset</code> and <code>Offset</code> operands</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-viewType-07752" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-viewType-07752"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-viewType-07752</span><br>

If a <a href="chap12.html#VkImageView">VkImageView</a> is accessed as a result of this command, then the
image view’s <code>viewType</code> <strong class="purple">must</strong> match the <code>Dim</code> operand of the
<code>OpTypeImage</code> as described in <a href="chap16.html#textures-operation-validation">Instruction/Sampler/Image View Validation</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-format-07753" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-format-07753"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-format-07753</span><br>

If a <a href="chap12.html#VkImageView">VkImageView</a> is accessed as a result of this command, then the
<a href="chap39.html#formats-numericformat">numeric type</a> of the image view’s <code>format</code>
and the <code>Sampled</code> <code>Type</code> operand of the <code>OpTypeImage</code> <strong class="purple">must</strong>
match</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-OpImageWrite-08795" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-OpImageWrite-08795"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-OpImageWrite-08795</span><br>

If a <a href="chap12.html#VkImageView">VkImageView</a> created with a format other than
<code>VK_FORMAT_A8_UNORM_KHR</code> is accessed using <code>OpImageWrite</code> as a
result of this command, then the <code>Type</code> of the <code>Texel</code> operand of
that instruction <strong class="purple">must</strong> have at least as many components as the image
view’s format</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-OpImageWrite-08796" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-OpImageWrite-08796"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-OpImageWrite-08796</span><br>

If a <a href="chap12.html#VkImageView">VkImageView</a> created with the format
<code>VK_FORMAT_A8_UNORM_KHR</code> is accessed using <code>OpImageWrite</code> as a
result of this command, then the <code>Type</code> of the <code>Texel</code> operand of
that instruction <strong class="purple">must</strong> have four components</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-OpImageWrite-04469" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-OpImageWrite-04469"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-OpImageWrite-04469</span><br>

If a <a href="chap12.html#VkBufferView">VkBufferView</a> is accessed using <code>OpImageWrite</code> as a result
of this command, then the <code>Type</code> of the <code>Texel</code> operand of that
instruction <strong class="purple">must</strong> have at least as many components as the buffer view’s
format</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-None-07288" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-None-07288"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-None-07288</span><br>

Any shader invocation executed by this command <strong class="purple">must</strong>
<a href="chap9.html#shaders-termination">terminate</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-None-03429" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-None-03429"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-None-03429</span><br>

Any shader group handle referenced by this call <strong class="purple">must</strong> have been queried
from the currently bound ray tracing pipeline</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-maxPipelineRayRecursionDepth-03679" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-maxPipelineRayRecursionDepth-03679"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-maxPipelineRayRecursionDepth-03679</span><br>

This command <strong class="purple">must</strong> not cause a shader call instruction to be executed
from a shader invocation with a <a href="chap34.html#ray-tracing-recursion-depth">recursion
depth</a> greater than the value of <code>maxPipelineRayRecursionDepth</code>
used to create the bound ray tracing pipeline</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-commandBuffer-03635" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-commandBuffer-03635"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-commandBuffer-03635</span><br>

<code>commandBuffer</code> <strong class="purple">must</strong> not be a protected command buffer</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-indirectDeviceAddress-03632" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-indirectDeviceAddress-03632"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-indirectDeviceAddress-03632</span><br>

If the buffer from which <code>indirectDeviceAddress</code> was queried is
non-sparse then it <strong class="purple">must</strong> be bound completely and contiguously to a
single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-indirectDeviceAddress-03633" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-indirectDeviceAddress-03633"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-indirectDeviceAddress-03633</span><br>

The buffer from which <code>indirectDeviceAddress</code> was queried <strong class="purple">must</strong> have
been created with the <code>VK_BUFFER_USAGE_INDIRECT_BUFFER_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-indirectDeviceAddress-03634" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-indirectDeviceAddress-03634"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-indirectDeviceAddress-03634</span><br>

<code>indirectDeviceAddress</code> <strong class="purple">must</strong> be a multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-indirectDeviceAddress-03636" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-indirectDeviceAddress-03636"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-indirectDeviceAddress-03636</span><br>

All device addresses between <code>indirectDeviceAddress</code> and
<span class="eq"><code>indirectDeviceAddress</code> +  <code>sizeof</code>(<code>VkTraceRaysIndirectCommand2KHR</code>) -
1</span> <strong class="purple">must</strong> be in the buffer device address range of the same buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-rayTracingPipelineTraceRaysIndirect2-03637" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-rayTracingPipelineTraceRaysIndirect2-03637"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-rayTracingPipelineTraceRaysIndirect2-03637</span><br>

The <a href="chap37.html#features-rayTracingPipelineTraceRaysIndirect2"><code>rayTracingPipelineTraceRaysIndirect2</code></a> feature <strong class="purple">must</strong> be enabled</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-commandBuffer-parameter" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-commandBuffer-recording" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-commandBuffer-cmdpool" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-renderpass" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-renderpass"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirect2KHR-videocoding" href="chap34.html#VUID-vkCmdTraceRaysIndirect2KHR-videocoding"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirect2KHR-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap35.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkTraceRaysIndirectCommand2KHR</code> structure is defined as:</p>
</div>
<div id="VkTraceRaysIndirectCommand2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_ray_tracing_maintenance1 with VK_KHR_ray_tracing_pipeline</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkTraceRaysIndirectCommand2KHR</span> <span class="p">{</span>
    <span class="n">VkDeviceAddress</span>    <span class="n">raygenShaderRecordAddress</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">raygenShaderRecordSize</span><span class="p">;</span>
    <span class="n">VkDeviceAddress</span>    <span class="n">missShaderBindingTableAddress</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">missShaderBindingTableSize</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">missShaderBindingTableStride</span><span class="p">;</span>
    <span class="n">VkDeviceAddress</span>    <span class="n">hitShaderBindingTableAddress</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">hitShaderBindingTableSize</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">hitShaderBindingTableStride</span><span class="p">;</span>
    <span class="n">VkDeviceAddress</span>    <span class="n">callableShaderBindingTableAddress</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">callableShaderBindingTableSize</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">callableShaderBindingTableStride</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">width</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">height</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">depth</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkTraceRaysIndirectCommand2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>raygenShaderRecordAddress</code> is a <a href="chap3.html#VkDeviceAddress">VkDeviceAddress</a> of the ray
generation shader binding table record used by this command.</p>
</li>
<li>
<p><code>raygenShaderRecordSize</code> is a <a href="chap3.html#VkDeviceSize">VkDeviceSize</a> number of bytes
corresponding to the ray generation shader binding table record at base
address <code>raygenShaderRecordAddress</code>.</p>
</li>
<li>
<p><code>missShaderBindingTableAddress</code> is a <a href="chap3.html#VkDeviceAddress">VkDeviceAddress</a> of the
first record in the miss shader binding table used by this command.</p>
</li>
<li>
<p><code>missShaderBindingTableSize</code> is a <a href="chap3.html#VkDeviceSize">VkDeviceSize</a> number of
bytes corresponding to the total size of the miss shader binding table
at <code>missShaderBindingTableAddress</code> that may be accessed by this
command.</p>
</li>
<li>
<p><code>missShaderBindingTableStride</code> is a <a href="chap3.html#VkDeviceSize">VkDeviceSize</a> number of
bytes between records of the miss shader binding table.</p>
</li>
<li>
<p><code>hitShaderBindingTableAddress</code> is a <a href="chap3.html#VkDeviceAddress">VkDeviceAddress</a> of the
first record in the hit shader binding table used by this command.</p>
</li>
<li>
<p><code>hitShaderBindingTableSize</code> is a <a href="chap3.html#VkDeviceSize">VkDeviceSize</a> number of
bytes corresponding to the total size of the hit shader binding table at
<code>hitShaderBindingTableAddress</code> that may be accessed by this command.</p>
</li>
<li>
<p><code>hitShaderBindingTableStride</code> is a <a href="chap3.html#VkDeviceSize">VkDeviceSize</a> number of
bytes between records of the hit shader binding table.</p>
</li>
<li>
<p><code>callableShaderBindingTableAddress</code> is a <a href="chap3.html#VkDeviceAddress">VkDeviceAddress</a> of
the first record in the callable shader binding table used by this
command.</p>
</li>
<li>
<p><code>callableShaderBindingTableSize</code> is a <a href="chap3.html#VkDeviceSize">VkDeviceSize</a> number
of bytes corresponding to the total size of the callable shader binding
table at <code>callableShaderBindingTableAddress</code> that may be accessed by
this command.</p>
</li>
<li>
<p><code>callableShaderBindingTableStride</code> is a <a href="chap3.html#VkDeviceSize">VkDeviceSize</a> number
of bytes between records of the callable shader binding table.</p>
</li>
<li>
<p><code>width</code> is the width of the ray trace query dimensions.</p>
</li>
<li>
<p><code>height</code> is height of the ray trace query dimensions.</p>
</li>
<li>
<p><code>depth</code> is depth of the ray trace query dimensions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The members of <code>VkTraceRaysIndirectCommand2KHR</code> have the same meaning as
the similarly named parameters of <a href="chap34.html#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>.</p>
</div>
<div class="paragraph">
<p>Indirect shader binding table buffer parameters must satisfy the same memory
alignment and binding requirements as their counterparts in
<a href="chap34.html#vkCmdTraceRaysIndirectKHR">vkCmdTraceRaysIndirectKHR</a> and <a href="chap34.html#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-pRayGenShaderBindingTable-03680" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-pRayGenShaderBindingTable-03680"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-pRayGenShaderBindingTable-03680</span><br>

If the buffer from which <code>raygenShaderRecordAddress</code> was queried
is non-sparse then it <strong class="purple">must</strong> be bound completely and contiguously to a
single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-pRayGenShaderBindingTable-03681" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-pRayGenShaderBindingTable-03681"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-pRayGenShaderBindingTable-03681</span><br>

The buffer from which the <code>raygenShaderRecordAddress</code> is queried
<strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-pRayGenShaderBindingTable-03682" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-pRayGenShaderBindingTable-03682"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-pRayGenShaderBindingTable-03682</span><br>

<code>raygenShaderRecordAddress</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupBaseAlignment</code></p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-pMissShaderBindingTable-03683" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-pMissShaderBindingTable-03683"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-pMissShaderBindingTable-03683</span><br>

If the buffer from which <code>missShaderBindingTableAddress</code> was queried is
non-sparse then it <strong class="purple">must</strong> be bound completely and contiguously to a
single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-pMissShaderBindingTable-03684" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-pMissShaderBindingTable-03684"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-pMissShaderBindingTable-03684</span><br>

The buffer from which the <code>missShaderBindingTableAddress</code> is queried
<strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-pMissShaderBindingTable-03685" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-pMissShaderBindingTable-03685"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-pMissShaderBindingTable-03685</span><br>

<code>missShaderBindingTableAddress</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupBaseAlignment</code></p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-stride-03686" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-stride-03686"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-stride-03686</span><br>

<code>missShaderBindingTableStride</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupHandleAlignment</code></p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-stride-04029" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-stride-04029"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-stride-04029</span><br>

<code>missShaderBindingTableStride</code> <strong class="purple">must</strong> be less than or equal to
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>maxShaderGroupStride</code></p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-pHitShaderBindingTable-03687" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-pHitShaderBindingTable-03687"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-pHitShaderBindingTable-03687</span><br>

If the buffer from which <code>hitShaderBindingTableAddress</code> was queried is
non-sparse then it <strong class="purple">must</strong> be bound completely and contiguously to a
single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-pHitShaderBindingTable-03688" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-pHitShaderBindingTable-03688"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-pHitShaderBindingTable-03688</span><br>

The buffer from which the <code>hitShaderBindingTableAddress</code> is queried
<strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-pHitShaderBindingTable-03689" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-pHitShaderBindingTable-03689"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-pHitShaderBindingTable-03689</span><br>

<code>hitShaderBindingTableAddress</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupBaseAlignment</code></p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-stride-03690" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-stride-03690"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-stride-03690</span><br>

<code>hitShaderBindingTableStride</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupHandleAlignment</code></p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-stride-04035" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-stride-04035"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-stride-04035</span><br>

<code>hitShaderBindingTableStride</code> <strong class="purple">must</strong> be less than or equal to
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>maxShaderGroupStride</code></p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-pCallableShaderBindingTable-03691" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-pCallableShaderBindingTable-03691"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-pCallableShaderBindingTable-03691</span><br>

If the buffer from which <code>callableShaderBindingTableAddress</code> was queried
is non-sparse then it <strong class="purple">must</strong> be bound completely and contiguously to a
single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-pCallableShaderBindingTable-03692" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-pCallableShaderBindingTable-03692"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-pCallableShaderBindingTable-03692</span><br>

The buffer from which the <code>callableShaderBindingTableAddress</code> is queried
<strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-pCallableShaderBindingTable-03693" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-pCallableShaderBindingTable-03693"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-pCallableShaderBindingTable-03693</span><br>

<code>callableShaderBindingTableAddress</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupBaseAlignment</code></p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-stride-03694" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-stride-03694"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-stride-03694</span><br>

<code>callableShaderBindingTableStride</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupHandleAlignment</code></p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-stride-04041" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-stride-04041"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-stride-04041</span><br>

<code>callableShaderBindingTableStride</code> <strong class="purple">must</strong> be less than or equal to
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>maxShaderGroupStride</code></p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-flags-03696" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-flags-03696"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-flags-03696</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_CLOSEST_HIT_SHADERS_BIT_KHR</code>,
<code>hitShaderBindingTableAddress</code> <strong class="purple">must</strong> not be zero</p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-flags-03697" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-flags-03697"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-flags-03697</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_INTERSECTION_SHADERS_BIT_KHR</code>,
<code>hitShaderBindingTableAddress</code> <strong class="purple">must</strong> not be zero</p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-flags-03511" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-flags-03511"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-flags-03511</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_MISS_SHADERS_BIT_KHR</code>, the
shader group handle identified by <code>missShaderBindingTableAddress</code> <strong class="purple">must</strong>
not be set to zero</p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-flags-03512" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-flags-03512"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-flags-03512</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_ANY_HIT_SHADERS_BIT_KHR</code>,
entries in the table identified by <code>hitShaderBindingTableAddress</code>
accessed as a result of this command in order to execute an any-hit
shader <strong class="purple">must</strong> not be set to zero</p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-flags-03513" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-flags-03513"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-flags-03513</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_CLOSEST_HIT_SHADERS_BIT_KHR</code>,
entries in the table identified by <code>hitShaderBindingTableAddress</code>
accessed as a result of this command in order to execute a closest hit
shader <strong class="purple">must</strong> not be set to zero</p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-flags-03514" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-flags-03514"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-flags-03514</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_INTERSECTION_SHADERS_BIT_KHR</code>,
entries in the table identified by <code>hitShaderBindingTableAddress</code>
accessed as a result of this command in order to execute an intersection
shader <strong class="purple">must</strong> not be set to zero</p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-pHitShaderBindingTable-04735" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-pHitShaderBindingTable-04735"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-pHitShaderBindingTable-04735</span><br>

Any non-zero hit shader group entries in the table identified by
<code>hitShaderBindingTableAddress</code> accessed by this call from a geometry
with a <code>geometryType</code> of <code>VK_GEOMETRY_TYPE_TRIANGLES_KHR</code> <strong class="purple">must</strong>
have been created with
<code>VK_RAY_TRACING_SHADER_GROUP_TYPE_TRIANGLES_HIT_GROUP_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-pHitShaderBindingTable-04736" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-pHitShaderBindingTable-04736"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-pHitShaderBindingTable-04736</span><br>

Any non-zero hit shader group entries in the table identified by
<code>hitShaderBindingTableAddress</code> accessed by this call from a geometry
with a <code>geometryType</code> of <code>VK_GEOMETRY_TYPE_AABBS_KHR</code> <strong class="purple">must</strong> have
been created with
<code>VK_RAY_TRACING_SHADER_GROUP_TYPE_PROCEDURAL_HIT_GROUP_KHR</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-width-03638" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-width-03638"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-width-03638</span><br>

<code>width</code> <strong class="purple">must</strong> be less than or equal to
<span class="eq"><code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[0]
× <code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupSize</code>[0]</span></p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-height-03639" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-height-03639"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-height-03639</span><br>

<code>height</code> <strong class="purple">must</strong> be less than or equal to
<span class="eq"><code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[1]
× <code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupSize</code>[1]</span></p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-depth-03640" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-depth-03640"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-depth-03640</span><br>

<code>depth</code> <strong class="purple">must</strong> be less than or equal to
<span class="eq"><code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[2]
× <code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupSize</code>[2]</span></p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommand2KHR-width-03641" href="chap34.html#VUID-VkTraceRaysIndirectCommand2KHR-width-03641"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommand2KHR-width-03641</span><br>

<span class="eq"><code>width</code> × <code>height</code> × <code>depth</code></span> <strong class="purple">must</strong> be less
than or equal to
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>maxRayDispatchInvocationCount</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="shader-binding-table"><a class="anchor" href="chap34.html#shader-binding-table"></a>34.3. Shader Binding Table</h3>
<div class="paragraph">
<p>A <em>shader binding table</em> is a resource which establishes the relationship
between the ray tracing pipeline and the acceleration structures that were
built for the ray tracing pipeline.
It indicates the shaders that operate on each geometry in an acceleration
structure.
In addition, it contains the resources accessed by each shader, including
indices of textures, buffer device addresses, and constants.
The application allocates and manages <em>shader binding tables</em> as
<a href="chap12.html#VkBuffer">VkBuffer</a> objects.</p>
</div>
<div class="paragraph">
<p>Each entry in the shader binding table consists of
<code>shaderGroupHandleSize</code> bytes of data, either as queried by
<a href="chap10.html#vkGetRayTracingShaderGroupHandlesKHR">vkGetRayTracingShaderGroupHandlesKHR</a> to refer to those specified
shaders, or all zeros to refer to a zero shader group.
A zero shader group behaves as though it is a shader group consisting
entirely of <code>VK_SHADER_UNUSED_KHR</code>.
The remainder of the data specified by the stride is application-visible
data that can be referenced by a <code>ShaderRecordBufferKHR</code> block in the
shader.</p>
</div>
<div class="paragraph">
<p>The shader binding tables to use in a ray tracing pipeline are passed to the
<a href="chap34.html#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>, or <a href="chap34.html#vkCmdTraceRaysIndirectKHR">vkCmdTraceRaysIndirectKHR</a> commands.
Shader binding tables are read-only in shaders that are executing on the ray
tracing pipeline.</p>
</div>
<div class="paragraph">
<p>Shader variables identified with the <code>ShaderRecordBufferKHR</code> storage
class are used to access the provided shader binding table.
Such variables <strong class="purple">must</strong> be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>typed as <code>OpTypeStruct</code>, or an array of this type,</p>
</li>
<li>
<p>identified with a <code>Block</code> decoration, and</p>
</li>
<li>
<p>laid out explicitly using the <code>Offset</code>, <code>ArrayStride</code>, and
<code>MatrixStride</code> decorations as specified in
<a href="chap15.html#interfaces-resources-layout">Offset and Stride Assignment</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>Offset</code> decoration for any member of a <code>Block</code>-decorated variable
in the <code>ShaderRecordBufferKHR</code> storage class <strong class="purple">must</strong> not cause the space
required for that variable to extend outside the range <span class="eq">[0,
<code>maxStorageBufferRange</code>)</span>.</p>
</div>
<div class="paragraph">
<p>Accesses to the shader binding table from ray tracing pipelines <strong class="purple">must</strong> be
<a href="chap7.html#synchronization-dependencies">synchronized</a> with the
<code>VK_PIPELINE_STAGE_RAY_TRACING_SHADER_BIT_KHR</code>
<a href="chap7.html#synchronization-pipeline-stages">pipeline stage</a> and an
<a href="chap7.html#synchronization-access-types">access type</a> of
<code>VK_ACCESS_SHADER_READ_BIT</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Because different shader record buffers can be associated with the same
shader, a shader variable with <code>ShaderRecordBufferKHR</code> storage class will
not be dynamically uniform if different invocations of the same shader can
reference different data in the shader record buffer, such as if the same
shader occurs twice in the shader binding table with a different shader
record buffer.
In this case, indexing resources based on values in the
<code>ShaderRecordBufferKHR</code> storage class, the index should be decorated as
<code>NonUniform</code>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="shader-binding-table-indexing-rules"><a class="anchor" href="chap34.html#shader-binding-table-indexing-rules"></a>34.3.1. Indexing Rules</h4>
<div class="paragraph">
<p>In order to execute the correct shaders and access the correct resources
during a ray tracing dispatch, the implementation <strong class="purple">must</strong> be able to locate
shader binding table entries at various stages of execution.
This is accomplished by defining a set of indexing rules that compute shader
binding table record positions relative to the buffer’s base address in
memory.
The application <strong class="purple">must</strong> organize the contents of the shader binding table’s
memory in a way that application of the indexing rules will lead to correct
records.</p>
</div>
<div class="sect4">
<h5 id="_ray_generation_shaders"><a class="anchor" href="chap34.html#_ray_generation_shaders"></a>Ray Generation Shaders</h5>
<div class="paragraph">
<p>Only one ray generation shader is executed per ray tracing dispatch.</p>
</div>
<div class="paragraph">
<p>For <a href="chap34.html#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>, the location of the ray generation shader is
specified by the <code>pRaygenShaderBindingTable-&gt;deviceAddress</code> parameter — there is no indexing.
All data accessed <strong class="purple">must</strong> be less than <code>pRaygenShaderBindingTable-&gt;size</code>
bytes from <code>deviceAddress</code>.
<code>pRaygenShaderBindingTable-&gt;stride</code> is unused, and <strong class="purple">must</strong> be equal to
<code>pRaygenShaderBindingTable-&gt;size</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="shader-binding-table-hit-shader-indexing"><a class="anchor" href="chap34.html#shader-binding-table-hit-shader-indexing"></a>Hit Shaders</h5>
<div class="paragraph">
<p>The base for the computation of intersection, any-hit, and closest hit
shader locations is the <code>instanceShaderBindingTableRecordOffset</code> value
stored with each instance of a top-level acceleration structure
(<a href="chap32.html#VkAccelerationStructureInstanceKHR">VkAccelerationStructureInstanceKHR</a>).
This value determines the beginning of the shader binding table records for
a given instance.</p>
</div>
<div class="paragraph">
<p>In the following rule, <code>geometryIndex</code> refers to the
<a href="chap32.html#acceleration-structure-geometry-index">geometry index</a> of the intersected
geometry within the instance.</p>
</div>
<div class="paragraph">
<p>The <code>sbtRecordOffset</code> and <code>sbtRecordStride</code> values are passed in as
parameters to
<code>traceRayEXT</code>()
calls made in the shaders.
See Section 8.19 (Ray Tracing Functions) of the OpenGL Shading Language
Specification for more details.
In SPIR-V, these correspond to the <code>SBTOffset</code> and <code>SBTStride</code>
parameters to the
<code>OpTraceRayKHR</code>
instruction.</p>
</div>
<div class="paragraph">
<p>The result of this computation is then added to
<code>pHitShaderBindingTable-&gt;deviceAddress</code>, a device address passed to
<a href="chap34.html#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>
.</p>
</div>
<div class="paragraph">
<p>For <a href="chap34.html#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>, the complete rule to compute a hit shader
binding table record address in the <code>pHitShaderBindingTable</code> is:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>pHitShaderBindingTable-&gt;deviceAddress</code> + 
<code>pHitShaderBindingTable-&gt;stride</code> × (
<code>instanceShaderBindingTableRecordOffset</code> + 
<code>geometryIndex</code> × <code>sbtRecordStride</code> + 
<code>sbtRecordOffset</code> )</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>All data accessed <strong class="purple">must</strong> be less than <code>pHitShaderBindingTable-&gt;size</code>
bytes from the base address.</p>
</div>
</div>
<div class="sect4">
<h5 id="_miss_shaders"><a class="anchor" href="chap34.html#_miss_shaders"></a>Miss Shaders</h5>
<div class="paragraph">
<p>A miss shader is executed whenever a ray query fails to find an intersection
for the given scene geometry.
Multiple miss shaders <strong class="purple">may</strong> be executed throughout a ray tracing dispatch.</p>
</div>
<div class="paragraph">
<p>The base for the computation of miss shader locations is
<code>pMissShaderBindingTable-&gt;deviceAddress</code>, a device address passed into
<a href="chap34.html#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>
.</p>
</div>
<div class="paragraph">
<p>The <code>missIndex</code> value is passed in as a parameter to
<code>traceRayEXT</code>()
calls made in the shaders.
See Section 8.19 (Ray Tracing Functions) of the OpenGL Shading Language
Specification for more details.
In SPIR-V, this corresponds to the <code>MissIndex</code> parameter to the
<code>OpTraceRayKHR</code>
instruction.</p>
</div>
<div class="paragraph">
<p>For <a href="chap34.html#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>, the complete rule to compute a miss shader
binding table record address in the <code>pMissShaderBindingTable</code> is:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>pMissShaderBindingTable-&gt;deviceAddress</code> + 
<code>pMissShaderBindingTable-&gt;stride</code> × <code>missIndex</code></span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>All data accessed <strong class="purple">must</strong> be less than <code>pMissShaderBindingTable-&gt;size</code>
bytes from the base address.</p>
</div>
</div>
<div class="sect4">
<h5 id="_callable_shaders"><a class="anchor" href="chap34.html#_callable_shaders"></a>Callable Shaders</h5>
<div class="paragraph">
<p>A callable shader is executed when requested by a ray tracing shader.
Multiple callable shaders <strong class="purple">may</strong> be executed throughout a ray tracing
dispatch.</p>
</div>
<div class="paragraph">
<p>The base for the computation of callable shader locations is
<code>pCallableShaderBindingTable-&gt;deviceAddress</code>, a device address passed
into <a href="chap34.html#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>
.</p>
</div>
<div class="paragraph">
<p>The <code>sbtRecordIndex</code> value is passed in as a parameter to
<code>executeCallableEXT</code>()
calls made in the shaders.
See Section 8.19 (Ray Tracing Functions) of the OpenGL Shading Language
Specification for more details.
In SPIR-V, this corresponds to the <code>SBTIndex</code> parameter to the
<code>OpExecuteCallableKHR</code>
instruction.</p>
</div>
<div class="paragraph">
<p>For <a href="chap34.html#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>, the complete rule to compute a callable shader
binding table record address in the <code>pCallableShaderBindingTable</code> is:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>pCallableShaderBindingTable-&gt;deviceAddress</code> + 
<code>pCallableShaderBindingTable-&gt;stride</code> ×
<code>sbtRecordIndex</code></span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>All data accessed <strong class="purple">must</strong> be less than <code>pCallableShaderBindingTable-&gt;size</code>
bytes from the base address.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ray-tracing-pipeline-stack"><a class="anchor" href="chap34.html#ray-tracing-pipeline-stack"></a>34.4. Ray Tracing Pipeline Stack</h3>
<div class="paragraph">
<p>Ray tracing pipelines have a potentially large set of shaders which <strong class="purple">may</strong> be
invoked in various call chain combinations to perform ray tracing.
To store parameters for a given shader execution, an implementation <strong class="purple">may</strong> use
a stack of data in memory.
This stack <strong class="purple">must</strong> be sized to the sum of the stack sizes of all shaders in
any call chain executed by the application.</p>
</div>
<div class="paragraph">
<p>If the stack size is not set explicitly, the stack size for a pipeline is:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">rayGenStackMax +  min(1,
<code>maxPipelineRayRecursionDepth</code>) ×
max(closestHitStackMax, missStackMax, intersectionStackMax
+  anyHitStackMax) +  max(0,
<code>maxPipelineRayRecursionDepth</code>-1) ×
max(closestHitStackMax, missStackMax) +  2 ×
callableStackMax</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>where <span class="eq">rayGenStackMax</span>, <span class="eq">closestHitStackMax</span>, <span class="eq">missStackMax</span>,
<span class="eq">anyHitStackMax</span>, <span class="eq">intersectionStackMax</span>, and <span class="eq">callableStackMax</span>
are the maximum stack values queried by the respective shader stages for any
shaders in any shader groups defined by the pipeline.</p>
</div>
<div class="paragraph">
<p>This stack size is potentially significant, so an application <strong class="purple">may</strong> want to
provide a more accurate stack size after pipeline compilation.
The value that the application provides is the maximum value of the sum of
all shaders in a call chain across all possible call chains, taking into
account any application specific knowledge about the properties of the call
chains.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>For example, if an application has two types of closest hit and miss shaders
that it can use but the first level of rays will only use the first kind
(possibly reflection) and the second level will only use the second kind
(occlusion or shadow ray, for example) then the application can compute the
stack size by something similar to:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>rayGenStack</code> +  max(<code>closestHit1Stack</code>,
<code>miss1Stack</code>) +  max(<code>closestHit2Stack</code>,
<code>miss2Stack</code>)</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This is guaranteed to be no larger than the default stack size computation
which assumes that both call levels may be the larger of the two.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="ray-tracing-capture-replay"><a class="anchor" href="chap34.html#ray-tracing-capture-replay"></a>34.5. Ray Tracing Capture Replay</h3>
<div class="paragraph">
<p>In a similar way to
<a href="chap37.html#features-bufferDeviceAddressCaptureReplay">bufferDeviceAddressCaptureReplay</a>,
the <a href="chap37.html#features-rayTracingPipelineShaderGroupHandleCaptureReplay"><code>rayTracingPipelineShaderGroupHandleCaptureReplay</code></a> feature allows the
querying of opaque data which <strong class="purple">can</strong> be used in a future replay.</p>
</div>
<div class="paragraph">
<p>During the capture phase, capture/replay tools are expected to query opaque
data for shader group handle replay using
<a href="chap10.html#vkGetRayTracingCaptureReplayShaderGroupHandlesKHR">vkGetRayTracingCaptureReplayShaderGroupHandlesKHR</a>.</p>
</div>
<div class="paragraph">
<p>Providing the opaque data during replay, using
<a href="chap10.html#VkRayTracingShaderGroupCreateInfoKHR">VkRayTracingShaderGroupCreateInfoKHR</a>::<code>pShaderGroupCaptureReplayHandle</code>
at pipeline creation time, causes the implementation to generate identical
shader group handles to those in the capture phase, allowing capture/replay
tools to reuse previously recorded shader binding table buffer contents or
to obtain the same handles by calling
<a href="chap10.html#vkGetRayTracingCaptureReplayShaderGroupHandlesKHR">vkGetRayTracingCaptureReplayShaderGroupHandlesKHR</a> again.</p>
</div>
</div>
</div>
</div></div>

<nav>
  <a rel="prev" href="chap33.html" class="nav nav-prev" title="Previous page" aria-label="Previous page" aria-keyshortcuts="Left">
        <i class="fa fa-angle-left"></i>
     </a>
  <a rel="next" href="chap35.html" class="nav nav-next" title="Next page" aria-label="Next page" aria-keyshortcuts="Right">
        <i class="fa fa-angle-right"></i>
     </a>
  <div style="clear: both"></div>
</nav>
<div id="footer">
<div id="footer-text">
Version 1.1.261<br>
Last updated 2023-07-28 03:24:32 -0700
</div>
</div>



</body>
  <script>
  function isInViewport(ele) {
    const rect = ele.getBoundingClientRect();
    return (
        rect.top >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight)
    );
  }
  function yPosition (ele) {
    const rect = ele.getBoundingClientRect();
    return (rect.top - 20); // 20px above
  }
  let curr = document.getElementsByClassName('current');
  if (!isInViewport(curr[curr.length - 1])) {
    document.getElementById('toc').scrollTo({
      top: yPosition(curr[0]),
      left: 0,
      behavior: 'smooth'
    });
  }

  /* For page navigation */
  function gotoPage(selector) {
    const button = document.querySelector(selector);
    if (button)
      window.location.href = button.href;
  }
  document.addEventListener('keydown', e => {
    switch (e.key) {
      case 'ArrowRight':
        e.preventDefault();
        gotoPage('.nav-next');
        break;
      case 'ArrowLeft':
        e.preventDefault();
        gotoPage('.nav-prev');
        break;
    }
  });
  </script>
  </html>