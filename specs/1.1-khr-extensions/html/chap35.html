<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<meta name="author" content="The Khronos® Vulkan Working Group">
<title>Vulkan® 1.1.169 - A Specification (with KHR extensions)</title>
<style>
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: #fff; color: #222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

object, svg { display: inline-block; vertical-align: middle; }

.center { margin-left: auto; margin-right: auto; }

.spread { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.4; color: black; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #0068b0; text-decoration: none; line-height: inherit; }
a:hover, a:focus { color: #333; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: Noto, sans-serif; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 0.75em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Noto, sans-serif; font-weight: normal; font-style: normal; color: black; text-rendering: optimizeLegibility; margin-top: 0.5em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #4d4d4d; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #ddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; color: #264357; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 0.75em; list-style-position: outside; font-family: Noto, sans-serif; }

ul, ol { margin-left: 1.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3em; font-weight: bold; }
dl dd { margin-bottom: 0.75em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: black; border-bottom: 1px dotted #ddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 0.75em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #ddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #5e93b8; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #5e93b8; }

blockquote, blockquote p { line-height: 1.6; color: #333; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #ddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Tables */
table { background: #fff; margin-bottom: 1.25em; border: solid 1px #d8d8ce; }
table thead, table tfoot { background: #eee; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #6d6e71; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f8f8f8; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.4; }

body { -moz-osx-font-smoothing: grayscale; -webkit-font-smoothing: antialiased; tab-size: 4; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }

a:hover, a:focus { text-decoration: underline; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: inherit; font-style: normal !important; letter-spacing: 0; padding: 0; background-color: transparent; -webkit-border-radius: 0; border-radius: 0; line-height: inherit; word-wrap: break-word; }
*:not(pre) > code.nobreak { word-wrap: normal; }
*:not(pre) > code.nowrap { white-space: nowrap; }

pre, pre > code { line-height: 1.6; color: #264357; font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; }

em em { font-style: normal; }

strong strong { font-weight: normal; }

.keyseq { color: #333333; }

kbd { font-family: Consolas, "Liberation Mono", Courier, monospace; display: inline-block; color: black; font-size: 0.65em; line-height: 1.45; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -moz-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: 0 0.15em; padding: 0.2em 0.5em; vertical-align: middle; position: relative; top: -0.1em; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menuref { color: #000; }

.menuseq b:not(.caret), .menuref { font-weight: inherit; }

.menuseq { word-spacing: -0.02em; }
.menuseq b.caret { font-size: 1.25em; line-height: 0.8; }
.menuseq i.caret { font-weight: bold; text-align: center; width: 0.45em; }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 1.5em; padding-right: 1.5em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: black; margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #ddd; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #ddd; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #ddd; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: #5e93b8; display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: #333; }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: #333; }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: black; border-bottom: 1px solid #ddd; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#toc { border-bottom: 0 solid #ddd; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: Noto, sans-serif; list-style-type: none; }
#toc li { line-height: 1.3334; margin-top: 0.3334em; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: black; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background-color: #fff; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #ddd; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; margin-bottom: 0.8rem; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #ddd; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: #fff; -webkit-border-radius: 0; border-radius: 0; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background-color: none; padding: 1.25em; }

#footer-text { color: black; line-height: 1.44; }

#content { margin-bottom: 0.625em; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { #content { margin-bottom: 1.25em; }
  .sect1 { padding-bottom: 1.25em; } }
.sect1:last-child { padding-bottom: 0; }

.sect1 + .sect1 { border-top: 0 solid #ddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: black; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: black; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; }

table.tableblock > caption.title { white-space: nowrap; overflow: visible; max-width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: black; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: initial; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: Noto, sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #ddd; color: #5e93b8; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: #fff; -webkit-border-radius: 0; border-radius: 0; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: #fff; -webkit-border-radius: 0; border-radius: 0; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: black; margin-top: 0; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint { background: #eee; }
.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint { background: #f2f1f1; }

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { border: 1px hidden #666; -webkit-border-radius: 0; border-radius: 0; word-wrap: break-word; padding: 1.25em 1.5625em 1.125em 1.5625em; font-size: 0.8125em; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 1em; } }

.literalblock.output pre { color: #eee; background-color: #264357; }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 1.25em 1.5625em 1.125em 1.5625em; -webkit-border-radius: 0; border-radius: 0; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: #999; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

table.pyhltable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; line-height: 1.6; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

pre.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #ddd; }

pre.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background: none !important; padding-right: 0 !important; }

.quoteblock { margin: 0 1em 0.75em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock blockquote p { color: #333; font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: black; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.5em; margin-right: 0.5ex; text-align: right; }
.quoteblock .quoteblock { margin-left: 0; margin-right: 0; padding: 0.5em 0; border-left: 3px solid #5e93b8; }
.quoteblock .quoteblock blockquote { padding: 0 0 0 0.75em; }
.quoteblock .quoteblock blockquote:before { display: none; }

.verseblock { margin: 0 1em 0.75em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: #333; font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.8125em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.025em; color: #5e93b8; }

.quoteblock.abstract { margin: 0 0 0.75em 0; display: block; }
.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p { text-align: left; word-spacing: 0; }
.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before { display: none; }

table.tableblock { max-width: 100%; border-collapse: separate; }
table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #d8d8ce; }

table.grid-all > thead > tr > .tableblock, table.grid-all > tbody > tr > .tableblock { border-width: 0 1px 1px 0; }

table.grid-all > tfoot > tr > .tableblock { border-width: 1px 1px 0 0; }

table.grid-cols > * > tr > .tableblock { border-width: 0 1px 0 0; }

table.grid-rows > thead > tr > .tableblock, table.grid-rows > tbody > tr > .tableblock { border-width: 0 0 1px 0; }

table.grid-rows > tfoot > tr > .tableblock { border-width: 1px 0 0 0; }

table.grid-all > * > tr > .tableblock:last-child, table.grid-cols > * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-all > tbody > tr:last-child > .tableblock, table.grid-all > thead:last-child > tr > .tableblock, table.grid-rows > tbody > tr:last-child > .tableblock, table.grid-rows > thead:last-child > tr > .tableblock { border-bottom-width: 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot { border-width: 1px 0; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.4; background: #eee; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: #222; font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.375em; }

ul.checklist, ul.none, ol.none, ul.no-bullet, ol.no-bullet, ol.unnumbered, ul.unstyled, ol.unstyled { list-style-type: none; }

ul.no-bullet, ol.no-bullet, ol.unnumbered { margin-left: 0.625em; }

ul.unstyled, ol.unstyled { margin-left: 0; }

ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child { width: 1.25em; font-size: 0.8em; position: relative; bottom: 0.125em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.inline { display: -ms-flexbox; display: -webkit-box; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; list-style: none; margin: 0 0 0.375em -0.75em; }

ul.inline > li { margin-left: 0.75em; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1, td.hdlist2 { vertical-align: top; padding: 0 0.625em; }

td.hdlist1 { font-weight: bold; padding-bottom: 0.75em; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0.4em 0.75em 0 0.75em; line-height: 1; vertical-align: top; }
.colist > table tr > td:first-of-type img { max-width: initial; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px #fff; -webkit-box-shadow: 0 0 0 1px #ddd; box-shadow: 0 0 0 1px #ddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; display: inline-block; }
a.image object { pointer-events: none; }

sup.footnote, sup.footnoteref { font-size: 0.875em; position: static; vertical-align: super; }
sup.footnote a, sup.footnoteref a { text-decoration: none; }
sup.footnote a:active, sup.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -0.25em 0 0.75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em 0 0.225em; line-height: 1.3334; font-size: 0.875em; margin-left: 1.2em; margin-bottom: 0.2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; margin-left: -1.05em; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }
a span.icon > .fa { cursor: inherit; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #29475c; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: black; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { border-bottom: 1px solid #ddd; }

.sect1 { padding-bottom: 0; }

#toctitle { color: #00406F; font-weight: normal; margin-top: 1.5em; }

.sidebarblock { border-color: #aaa; }

code { -webkit-border-radius: 4px; border-radius: 4px; }

p.tableblock.header { color: #6d6e71; }

.literalblock pre, .listingblock pre { background: #eee; }

/* From https://github.com/KhronosGroup/Vulkan-Docs/pull/901 */
a code { color: inherit; }

/* From https://github.com/KhronosGroup/Vulkan-Docs/pull/1157 */
/* Make VUID anchor handles*/
li > p > a[id^="VUID-"] { visibility: hidden; position: absolute; z-index: 1001; width: 2.2ex; margin-left: -2.2ex; display: block; text-decoration: none !important; text-align: center; font-weight: normal; }

li > p > a[id^="VUID-"]:before { content: "\00A7"; font-size: 1em; display: block; padding-top: 0em; background: #fff; }

li > p:hover > a[id^="VUID-"], li > p > a[id^="VUID-"]:hover { visibility: visible; }

li > p > a[id^="VUID-"].link { color: black; text-decoration: none; }

/* TODO: not quite sure what these two do */
li > p > a[id^="VUID-"].link:hover { color: black; }

.vuid { color: gray; font-family: monospace; }

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>

<!-- dragged in by font-awesome css included by asciidoctor, but preloaded in this extension for convenience -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0" as="font" type="font/woff2" crossorigin="">

<!-- Note: Chrome needs crossorigin="" even for same-origin fonts -->
<link rel="preload" href="../katex/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Typewriter-Regular.woff2" as="font" type="font/woff2" crossorigin=""><link rel="stylesheet" href="../katex/katex.min.css">
<!--ChunkedSearchJSMarker-->
<link href="chunked.css?4" rel="stylesheet">
<script>var searchindexurl = 'search.index.js?4' + (document.title.replace(/[^0-9.]/g, ''));</script>
<script src="chunked.js?4"></script>
<style>
    #loading_msg {
        width: 100%;
        margin-left: auto;
        margin-right: auto;
        margin-top: 1ex;
        margin-bottom: 1ex;
        max-width: 62.5em;
        position: relative;
        padding-left: 1.5em;
        padding-right: 1.5em;
    }
    .hidden {display: none;}
</style>
<script>
    function hideElement(e){
        e.setAttribute("hidden", "");
        e.classList.add("hidden");
    }

    function unhideElement(e){
        e.classList.remove("hidden");
        e.removeAttribute("hidden");
    }

    function hideLoadableContent(){
        unhideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) hideElement(loadable);
    }

    function unhideLoadableContent(){
        hideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) unhideElement(loadable);
    }

    window.addEventListener("load", unhideLoadableContent);
</script>
</head>
<body class="book toc2 toc-left">
<div id="header" style="max-width: 100%;">
<h1>Vulkan<sup>®</sup> 1.1.169 - A Specification (with KHR extensions)</h1>
<div class="details">
<span id="author" class="author">The Khronos<sup>®</sup> Vulkan Working Group</span><br>
<span id="revnumber">version 1.1.169,</span>
<span id="revdate">2021-02-02 07:14:49Z</span>
<br><span id="revremark">from git branch: github-main commit: 1eae55f4c780fb0f0aa990071fe158d2a70e7429</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="chap2.html#preamble">1. Preamble</a></li>
<li><a href="chap3.html#introduction">2. Introduction</a>
<ul class="sectlevel2">
<li><a href="chap3.html#introduction-conventions">2.1. Document Conventions</a></li>
</ul>
</li>
<li><a href="chap4.html#fundamentals">3. Fundamentals</a>
<ul class="sectlevel2">
<li><a href="chap4.html#fundamentals-host-environment">3.1. Host and Device Environment</a></li>
<li><a href="chap4.html#fundamentals-execmodel">3.2. Execution Model</a></li>
<li><a href="chap4.html#fundamentals-objectmodel-overview">3.3. Object Model</a></li>
<li><a href="chap4.html#fundamentals-abi">3.4. Application Binary Interface</a></li>
<li><a href="chap4.html#fundamentals-commandsyntax">3.5. Command Syntax and Duration</a></li>
<li><a href="chap4.html#fundamentals-threadingbehavior">3.6. Threading Behavior</a></li>
<li><a href="chap4.html#fundamentals-errors">3.7. Errors</a></li>
<li><a href="chap4.html#fundamentals-numerics">3.8. Numeric Representation and Computation</a></li>
<li><a href="chap4.html#fundamentals-fixedconv">3.9. Fixed-Point Data Conversions</a></li>
<li><a href="chap4.html#fundamentals-common-objects">3.10. Common Object Types</a></li>
</ul>
</li>
<li><a href="chap5.html#initialization">4. Initialization</a>
<ul class="sectlevel2">
<li><a href="chap5.html#initialization-functionpointers">4.1. Command Function Pointers</a></li>
<li><a href="chap5.html#initialization-instances">4.2. Instances</a></li>
</ul>
</li>
<li><a href="chap6.html#devsandqueues">5. Devices and Queues</a>
<ul class="sectlevel2">
<li><a href="chap6.html#devsandqueues-physical-device-enumeration">5.1. Physical Devices</a></li>
<li><a href="chap6.html#devsandqueues-devices">5.2. Devices</a></li>
<li><a href="chap6.html#devsandqueues-queues">5.3. Queues</a></li>
</ul>
</li>
<li><a href="chap7.html#commandbuffers">6. Command Buffers</a>
<ul class="sectlevel2">
<li><a href="chap7.html#commandbuffers-lifecycle">6.1. Command Buffer Lifecycle</a></li>
<li><a href="chap7.html#commandbuffers-pools">6.2. Command Pools</a></li>
<li><a href="chap7.html#commandbuffer-allocation">6.3. Command Buffer Allocation and Management</a></li>
<li><a href="chap7.html#commandbuffers-recording">6.4. Command Buffer Recording</a></li>
<li><a href="chap7.html#commandbuffers-submission">6.5. Command Buffer Submission</a></li>
<li><a href="chap7.html#commandbuffers-submission-progress">6.6. Queue Forward Progress</a></li>
<li><a href="chap7.html#commandbuffers-secondary">6.7. Secondary Command Buffer Execution</a></li>
<li><a href="chap7.html#commandbuffers-devicemask">6.8. Command Buffer Device Mask</a></li>
</ul>
</li>
<li><a href="chap8.html#synchronization">7. Synchronization and Cache Control</a>
<ul class="sectlevel2">
<li><a href="chap8.html#synchronization-dependencies">7.1. Execution and Memory Dependencies</a></li>
<li><a href="chap8.html#synchronization-implicit">7.2. Implicit Synchronization Guarantees</a></li>
<li><a href="chap8.html#synchronization-fences">7.3. Fences</a></li>
<li><a href="chap8.html#synchronization-semaphores">7.4. Semaphores</a></li>
<li><a href="chap8.html#synchronization-events">7.5. Events</a></li>
<li><a href="chap8.html#synchronization-pipeline-barriers">7.6. Pipeline Barriers</a></li>
<li><a href="chap8.html#synchronization-memory-barriers">7.7. Memory Barriers</a></li>
<li><a href="chap8.html#synchronization-wait-idle">7.8. Wait Idle Operations</a></li>
<li><a href="chap8.html#synchronization-submission-host-writes">7.9. Host Write Ordering Guarantees</a></li>
<li><a href="chap8.html#synchronization-device-group">7.10. Synchronization and Multiple Physical Devices</a></li>
</ul>
</li>
<li><a href="chap9.html#renderpass">8. Render Pass</a>
<ul class="sectlevel2">
<li><a href="chap9.html#renderpass-creation">8.1. Render Pass Creation</a></li>
<li><a href="chap9.html#renderpass-compatibility">8.2. Render Pass Compatibility</a></li>
<li><a href="chap9.html#_framebuffers">8.3. Framebuffers</a></li>
<li><a href="chap9.html#renderpass-commands">8.4. Render Pass Commands</a></li>
</ul>
</li>
<li><a href="chap10.html#shaders">9. Shaders</a>
<ul class="sectlevel2">
<li><a href="chap10.html#shader-modules">9.1. Shader Modules</a></li>
<li><a href="chap10.html#shaders-execution">9.2. Shader Execution</a></li>
<li><a href="chap10.html#shaders-execution-memory-ordering">9.3. Shader Memory Access Ordering</a></li>
<li><a href="chap10.html#shaders-inputs">9.4. Shader Inputs and Outputs</a></li>
<li><a href="chap10.html#shaders-vertex">9.5. Vertex Shaders</a></li>
<li><a href="chap10.html#shaders-tessellation-control">9.6. Tessellation Control Shaders</a></li>
<li><a href="chap10.html#shaders-tessellation-evaluation">9.7. Tessellation Evaluation Shaders</a></li>
<li><a href="chap10.html#shaders-geometry">9.8. Geometry Shaders</a></li>
<li><a href="chap10.html#shaders-fragment">9.9. Fragment Shaders</a></li>
<li><a href="chap10.html#shaders-compute">9.10. Compute Shaders</a></li>
<li><a href="chap10.html#shaders-ray-generation">9.11. Ray Generation Shaders</a></li>
<li><a href="chap10.html#shaders-intersection">9.12. Intersection Shaders</a></li>
<li><a href="chap10.html#shaders-any-hit">9.13. Any-Hit Shaders</a></li>
<li><a href="chap10.html#shaders-closest-hit">9.14. Closest Hit Shaders</a></li>
<li><a href="chap10.html#shaders-miss">9.15. Miss Shaders</a></li>
<li><a href="chap10.html#shaders-callable">9.16. Callable Shaders</a></li>
<li><a href="chap10.html#shaders-interpolation-decorations">9.17. Interpolation Decorations</a></li>
<li><a href="chap10.html#shaders-staticuse">9.18. Static Use</a></li>
<li><a href="chap10.html#shaders-scope">9.19. Scope</a></li>
<li><a href="chap10.html#shaders-group-operations">9.20. Group Operations</a></li>
<li><a href="chap10.html#shaders-quad-operations">9.21. Quad Group Operations</a></li>
<li><a href="chap10.html#shaders-derivative-operations">9.22. Derivative Operations</a></li>
<li><a href="chap10.html#shaders-helper-invocations">9.23. Helper Invocations</a></li>
</ul>
</li>
<li><a href="chap11.html#pipelines">10. Pipelines</a>
<ul class="sectlevel2">
<li><a href="chap11.html#pipelines-compute">10.1. Compute Pipelines</a></li>
<li><a href="chap11.html#pipelines-graphics">10.2. Graphics Pipelines</a></li>
<li><a href="chap11.html#pipelines-ray-tracing">10.3. Ray Tracing Pipelines</a></li>
<li><a href="chap11.html#pipelines-destruction">10.4. Pipeline Destruction</a></li>
<li><a href="chap11.html#pipelines-multiple">10.5. Multiple Pipeline Creation</a></li>
<li><a href="chap11.html#pipelines-pipeline-derivatives">10.6. Pipeline Derivatives</a></li>
<li><a href="chap11.html#pipelines-cache">10.7. Pipeline Cache</a></li>
<li><a href="chap11.html#pipelines-specialization-constants">10.8. Specialization Constants</a></li>
<li><a href="chap11.html#pipeline-library">10.9. Pipeline Libraries</a></li>
<li><a href="chap11.html#pipelines-binding">10.10. Pipeline Binding</a></li>
<li><a href="chap11.html#pipelines-dynamic-state">10.11. Dynamic State</a></li>
<li><a href="chap11.html#pipelines-shader-information">10.12. Pipeline Shader Information</a></li>
</ul>
</li>
<li><a href="chap12.html#memory">11. Memory Allocation</a>
<ul class="sectlevel2">
<li><a href="chap12.html#memory-host">11.1. Host Memory</a></li>
<li><a href="chap12.html#memory-device">11.2. Device Memory</a></li>
</ul>
</li>
<li><a href="chap13.html#resources">12. Resource Creation</a>
<ul class="sectlevel2">
<li><a href="chap13.html#resources-buffers">12.1. Buffers</a></li>
<li><a href="chap13.html#resources-buffer-views">12.2. Buffer Views</a></li>
<li><a href="chap13.html#resources-images">12.3. Images</a></li>
<li><a href="chap13.html#resources-image-layouts">12.4. Image Layouts</a></li>
<li><a href="chap13.html#resources-image-views">12.5. Image Views</a></li>
<li><a href="chap13.html#resources-acceleration-structures">12.6. Acceleration Structures</a></li>
<li><a href="chap13.html#resources-association">12.7. Resource Memory Association</a></li>
<li><a href="chap13.html#resources-sharing">12.8. Resource Sharing Mode</a></li>
<li><a href="chap13.html#resources-memory-aliasing">12.9. Memory Aliasing</a></li>
</ul>
</li>
<li><a href="chap14.html#samplers">13. Samplers</a>
<ul class="sectlevel2">
<li><a href="chap14.html#samplers-YCbCr-conversion">13.1. Sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></li>
</ul>
</li>
<li><a href="chap15.html#descriptorsets">14. Resource Descriptors</a>
<ul class="sectlevel2">
<li><a href="chap15.html#descriptorsets-types">14.1. Descriptor Types</a></li>
<li><a href="chap15.html#descriptorsets-sets">14.2. Descriptor Sets</a></li>
<li><a href="chap15.html#_physical_storage_buffer_access">14.3. Physical Storage Buffer Access</a></li>
</ul>
</li>
<li><a href="chap16.html#interfaces">15. Shader Interfaces</a>
<ul class="sectlevel2">
<li><a href="chap16.html#interfaces-iointerfaces">15.1. Shader Input and Output Interfaces</a></li>
<li><a href="chap16.html#interfaces-vertexinput">15.2. Vertex Input Interface</a></li>
<li><a href="chap16.html#interfaces-fragmentoutput">15.3. Fragment Output Interface</a></li>
<li><a href="chap16.html#interfaces-inputattachment">15.4. Fragment Input Attachment Interface</a></li>
<li><a href="chap16.html#interfaces-raypipeline">15.5. Ray Tracing Pipeline Interface</a></li>
<li><a href="chap16.html#interfaces-resources">15.6. Shader Resource Interface</a></li>
<li><a href="chap16.html#interfaces-builtin-variables">15.7. Built-In Variables</a></li>
</ul>
</li>
<li><a href="chap17.html#textures">16. Image Operations</a>
<ul class="sectlevel2">
<li><a href="chap17.html#_image_operations_overview">16.1. Image Operations Overview</a></li>
<li><a href="chap17.html#_conversion_formulas">16.2. Conversion Formulas</a></li>
<li><a href="chap17.html#_texel_input_operations">16.3. Texel Input Operations</a></li>
<li><a href="chap17.html#_texel_output_operations">16.4. Texel Output Operations</a></li>
<li><a href="chap17.html#textures-normalized-operations">16.5. Normalized Texel Coordinate Operations</a></li>
<li><a href="chap17.html#_unnormalized_texel_coordinate_operations">16.6. Unnormalized Texel Coordinate Operations</a></li>
<li><a href="chap17.html#textures-integer-coordinate-operations">16.7. Integer Texel Coordinate Operations</a></li>
<li><a href="chap17.html#textures-sample-operations">16.8. Image Sample Operations</a></li>
<li><a href="chap17.html#textures-instructions">16.9. Image Operation Steps</a></li>
<li><a href="chap17.html#textures-queries">16.10. Image Query Instructions</a></li>
</ul>
</li>
<li><a href="chap18.html#queries">17. Queries</a>
<ul class="sectlevel2">
<li><a href="chap18.html#queries-pools">17.1. Query Pools</a></li>
<li><a href="chap18.html#queries-operation">17.2. Query Operation</a></li>
<li><a href="chap18.html#queries-occlusion">17.3. Occlusion Queries</a></li>
<li><a href="chap18.html#queries-pipestats">17.4. Pipeline Statistics Queries</a></li>
<li><a href="chap18.html#queries-timestamps">17.5. Timestamp Queries</a></li>
<li><a href="chap18.html#queries-performance">17.6. Performance Queries</a></li>
</ul>
</li>
<li><a href="chap19.html#clears">18. Clear Commands</a>
<ul class="sectlevel2">
<li><a href="chap19.html#clears-outside">18.1. Clearing Images Outside A Render Pass Instance</a></li>
<li><a href="chap19.html#clears-inside">18.2. Clearing Images Inside A Render Pass Instance</a></li>
<li><a href="chap19.html#clears-values">18.3. Clear Values</a></li>
<li><a href="chap19.html#clears-filling-buffers">18.4. Filling Buffers</a></li>
<li><a href="chap19.html#clears-updating-buffers">18.5. Updating Buffers</a></li>
</ul>
</li>
<li><a href="chap20.html#copies">19. Copy Commands</a>
<ul class="sectlevel2">
<li><a href="chap20.html#_common_operation">19.1. Common Operation</a></li>
<li><a href="chap20.html#copies-buffers">19.2. Copying Data Between Buffers</a></li>
<li><a href="chap20.html#copies-images">19.3. Copying Data Between Images</a></li>
<li><a href="chap20.html#copies-buffers-images">19.4. Copying Data Between Buffers and Images</a></li>
<li><a href="chap20.html#copies-imagescaling">19.5. Image Copies with Scaling</a></li>
<li><a href="chap20.html#copies-resolve">19.6. Resolving Multisample Images</a></li>
</ul>
</li>
<li><a href="chap21.html#drawing">20. Drawing Commands</a>
<ul class="sectlevel2">
<li><a href="chap21.html#drawing-primitive-topologies">20.1. Primitive Topologies</a></li>
<li><a href="chap21.html#drawing-primitive-order">20.2. Primitive Order</a></li>
<li><a href="chap21.html#drawing-primitive-shading">20.3. Programmable Primitive Shading</a></li>
</ul>
</li>
<li><a href="chap22.html#fxvertex">21. Fixed-Function Vertex Processing</a>
<ul class="sectlevel2">
<li><a href="chap22.html#fxvertex-attrib">21.1. Vertex Attributes</a></li>
<li><a href="chap22.html#fxvertex-input">21.2. Vertex Input Description</a></li>
</ul>
</li>
<li><a href="chap23.html#tessellation">22. Tessellation</a>
<ul class="sectlevel2">
<li><a href="chap23.html#_tessellator">22.1. Tessellator</a></li>
<li><a href="chap23.html#_tessellator_patch_discard">22.2. Tessellator Patch Discard</a></li>
<li><a href="chap23.html#tessellation-tessellator-spacing">22.3. Tessellator Spacing</a></li>
<li><a href="chap23.html#tessellation-primitive-order">22.4. Tessellation Primitive Ordering</a></li>
<li><a href="chap23.html#tessellation-vertex-winding-order">22.5. Tessellator Vertex Winding Order</a></li>
<li><a href="chap23.html#tessellation-triangle-tessellation">22.6. Triangle Tessellation</a></li>
<li><a href="chap23.html#tessellation-quad-tessellation">22.7. Quad Tessellation</a></li>
<li><a href="chap23.html#tessellation-isoline-tessellation">22.8. Isoline Tessellation</a></li>
<li><a href="chap23.html#tessellation-point-mode">22.9. Tessellation Point Mode</a></li>
<li><a href="chap23.html#_tessellation_pipeline_state">22.10. Tessellation Pipeline State</a></li>
</ul>
</li>
<li><a href="chap24.html#geometry">23. Geometry Shading</a>
<ul class="sectlevel2">
<li><a href="chap24.html#geometry-input">23.1. Geometry Shader Input Primitives</a></li>
<li><a href="chap24.html#geometry-output">23.2. Geometry Shader Output Primitives</a></li>
<li><a href="chap24.html#geometry-invocations">23.3. Multiple Invocations of Geometry Shaders</a></li>
<li><a href="chap24.html#geometry-ordering">23.4. Geometry Shader Primitive Ordering</a></li>
</ul>
</li>
<li><a href="chap25.html#vertexpostproc">24. Fixed-Function Vertex Post-Processing</a>
<ul class="sectlevel2">
<li><a href="chap25.html#vertexpostproc-flatshading">24.1. Flat Shading</a></li>
<li><a href="chap25.html#vertexpostproc-clipping">24.2. Primitive Clipping</a></li>
<li><a href="chap25.html#vertexpostproc-clipping-shader-outputs">24.3. Clipping Shader Outputs</a></li>
<li><a href="chap25.html#vertexpostproc-coord-transform">24.4. Coordinate Transformations</a></li>
<li><a href="chap25.html#vertexpostproc-viewport">24.5. Controlling the Viewport</a></li>
</ul>
</li>
<li><a href="chap26.html#primsrast">25. Rasterization</a>
<ul class="sectlevel2">
<li><a href="chap26.html#primsrast-discard">25.1. Discarding Primitives Before Rasterization</a></li>
<li><a href="chap26.html#primrast-order">25.2. Rasterization Order</a></li>
<li><a href="chap26.html#primsrast-multisampling">25.3. Multisampling</a></li>
<li><a href="chap26.html#primsrast-fragment-shading-rate">25.4. Fragment Shading Rates</a></li>
<li><a href="chap26.html#primsrast-sampleshading">25.5. Sample Shading</a></li>
<li><a href="chap26.html#primsrast-points">25.6. Points</a></li>
<li><a href="chap26.html#primsrast-lines">25.7. Line Segments</a></li>
<li><a href="chap26.html#primsrast-polygons">25.8. Polygons</a></li>
</ul>
</li>
<li><a href="chap27.html#fragops">26. Fragment Operations</a>
<ul class="sectlevel2">
<li><a href="chap27.html#fragops-scissor">26.1. Scissor Test</a></li>
<li><a href="chap27.html#fragops-samplemask">26.2. Sample Mask Test</a></li>
<li><a href="chap27.html#fragops-covg">26.3. Multisample Coverage</a></li>
<li><a href="chap27.html#fragops-ds-state">26.4. Depth and Stencil Operations</a></li>
<li><a href="chap27.html#fragops-dbt">26.5. Depth Bounds Test</a></li>
<li><a href="chap27.html#fragops-stencil">26.6. Stencil Test</a></li>
<li><a href="chap27.html#fragops-depth">26.7. Depth Test</a></li>
<li><a href="chap27.html#fragops-samplecount">26.8. Sample Counting</a></li>
<li><a href="chap27.html#fragops-coverage-reduction">26.9. Coverage Reduction</a></li>
</ul>
</li>
<li><a href="chap28.html#framebuffer">27. The Framebuffer</a>
<ul class="sectlevel2">
<li><a href="chap28.html#framebuffer-blending">27.1. Blending</a></li>
<li><a href="chap28.html#framebuffer-logicop">27.2. Logical Operations</a></li>
<li><a href="chap28.html#framebuffer-color-write-mask">27.3. Color Write Mask</a></li>
</ul>
</li>
<li><a href="chap29.html#dispatch">28. Dispatching Commands</a></li>
<li><a href="chap30.html#sparsememory">29. Sparse Resources</a>
<ul class="sectlevel2">
<li><a href="chap30.html#sparsememory-sparseresourcefeatures">29.1. Sparse Resource Features</a></li>
<li><a href="chap30.html#sparsememory-fully-resident">29.2. Sparse Buffers and Fully-Resident Images</a></li>
<li><a href="chap30.html#sparsememory-partially-resident-buffers">29.3. Sparse Partially-Resident Buffers</a></li>
<li><a href="chap30.html#sparsememory-partially-resident-images">29.4. Sparse Partially-Resident Images</a></li>
<li><a href="chap30.html#sparsememory-sparse-memory-aliasing">29.5. Sparse Memory Aliasing</a></li>
<li><a href="chap30.html#_sparse_resource_implementation_guidelines_informative">29.6. Sparse Resource Implementation Guidelines (Informative)</a></li>
<li><a href="chap30.html#sparsememory-resourceapi">29.7. Sparse Resource API</a></li>
</ul>
</li>
<li><a href="chap31.html#wsi">30. Window System Integration (WSI)</a>
<ul class="sectlevel2">
<li><a href="chap31.html#_wsi_platform">30.1. WSI Platform</a></li>
<li><a href="chap31.html#_wsi_surface">30.2. WSI Surface</a></li>
<li><a href="chap31.html#display">30.3. Presenting Directly to Display Devices</a></li>
<li><a href="chap31.html#_querying_for_wsi_support">30.4. Querying for WSI Support</a></li>
<li><a href="chap31.html#_surface_queries">30.5. Surface Queries</a></li>
<li><a href="chap31.html#_device_group_queries">30.6. Device Group Queries</a></li>
<li><a href="chap31.html#_wsi_swapchain">30.7. WSI Swapchain</a></li>
</ul>
</li>
<li><a href="chap32.html#deferred-host-operations">31. Deferred Host Operations</a>
<ul class="sectlevel2">
<li><a href="chap32.html#deferred-host-operations-requesting">31.1. Requesting Deferral</a></li>
<li><a href="chap32.html#_deferred_host_operations_api">31.2. Deferred Host Operations API</a></li>
</ul>
</li>
<li><a href="chap33.html#acceleration-structure">32. Acceleration Structures</a>
<ul class="sectlevel2">
<li><a href="chap33.html#acceleration-structure-def">32.1. Acceleration Structures</a></li>
<li><a href="chap33.html#host-acceleration-structure">32.2. Host Acceleration Structure Operations</a></li>
</ul>
</li>
<li><a href="chap34.html#ray-traversal">33. Ray Traversal</a>
<ul class="sectlevel2">
<li><a href="chap34.html#ray-intersection-candidate-determination">33.1. Ray Intersection Candidate Determination</a></li>
<li><a href="chap34.html#ray-intersection-culling">33.2. Ray Intersection Culling</a></li>
<li><a href="chap34.html#ray-intersection-confirmation">33.3. Ray Intersection Confirmation</a></li>
<li><a href="chap34.html#ray-closest-hit-determination">33.4. Ray Closest Hit Determination</a></li>
<li><a href="chap34.html#ray-result-determination">33.5. Ray Result Determination</a></li>
</ul>
</li>
<li><a href="#ray-tracing">34. Ray Tracing</a>
<ul class="sectlevel2">
<li><a href="#ray-tracing-shader-call">34.1. Shader Call Instructions</a></li>
<li><a href="#ray-tracing-commands">34.2. Ray Tracing Commands</a></li>
<li><a href="#shader-binding-table">34.3. Shader Binding Table</a></li>
<li><a href="#ray-tracing-pipeline-stack">34.4. Ray Tracing Pipeline Stack</a></li>
</ul>
</li>
<li><a href="chap36.html#extendingvulkan">35. Extending Vulkan</a>
<ul class="sectlevel2">
<li><a href="chap36.html#extendingvulkan-instanceanddevicefunctionality">35.1. Instance and Device Functionality</a></li>
<li><a href="chap36.html#extendingvulkan-coreversions">35.2. Core Versions</a></li>
<li><a href="chap36.html#extendingvulkan-layers">35.3. Layers</a></li>
<li><a href="chap36.html#extendingvulkan-extensions">35.4. Extensions</a></li>
<li><a href="chap36.html#extendingvulkan-extensions-extensiondependencies">35.5. Extension Dependencies</a></li>
<li><a href="chap36.html#_compatibility_guarantees_informative">35.6. Compatibility Guarantees (Informative)</a></li>
</ul>
</li>
<li><a href="chap37.html#features">36. Features</a>
<ul class="sectlevel2">
<li><a href="chap37.html#features-requirements">36.1. Feature Requirements</a></li>
</ul>
</li>
<li><a href="chap38.html#limits">37. Limits</a>
<ul class="sectlevel2">
<li><a href="chap38.html#limits-minmax">37.1. Limit Requirements</a></li>
</ul>
</li>
<li><a href="chap39.html#formats">38. Formats</a>
<ul class="sectlevel2">
<li><a href="chap39.html#formats-definition">38.1. Format Definition</a></li>
<li><a href="chap39.html#formats-properties">38.2. Format Properties</a></li>
<li><a href="chap39.html#features-required-format-support">38.3. Required Format Support</a></li>
</ul>
</li>
<li><a href="chap40.html#capabilities">39. Additional Capabilities</a>
<ul class="sectlevel2">
<li><a href="chap40.html#capabilities-image">39.1. Additional Image Capabilities</a></li>
<li><a href="chap40.html#capabilities-buffer">39.2. Additional Buffer Capabilities</a></li>
<li><a href="chap40.html#capabilities-semaphore">39.3. Optional Semaphore Capabilities</a></li>
<li><a href="chap40.html#capabilities-fence">39.4. Optional Fence Capabilities</a></li>
</ul>
</li>
<li><a href="chap41.html#_debugging">40. Debugging</a></li>
<li><a href="chap42.html#spirvenv">Appendix A: Vulkan Environment for SPIR-V</a>
<ul class="sectlevel2">
<li><a href="chap42.html#_versions_and_formats">Versions and Formats</a></li>
<li><a href="chap42.html#spirvenv-capabilities">Capabilities</a></li>
<li><a href="chap42.html#spirvenv-module-validation">Validation Rules within a Module</a></li>
<li><a href="chap42.html#spirvenv-precision-operation">Precision and Operation of SPIR-V Instructions</a></li>
<li><a href="chap42.html#spirvenv-format-type-matching">Image Format and Type Matching</a></li>
<li><a href="chap42.html#spirvenv-image-formats">Compatibility Between SPIR-V Image Formats And Vulkan Formats</a></li>
</ul>
</li>
<li><a href="chap43.html#memory-model">Appendix B: Memory Model</a>
<ul class="sectlevel2">
<li><a href="chap43.html#memory-model-agent">Agent</a></li>
<li><a href="chap43.html#memory-model-memory-location">Memory Location</a></li>
<li><a href="chap43.html#memory-model-allocation">Allocation</a></li>
<li><a href="chap43.html#memory-model-memory-operation">Memory Operation</a></li>
<li><a href="chap43.html#memory-model-references">Reference</a></li>
<li><a href="chap43.html#memory-model-program-order">Program-Order</a></li>
<li><a href="chap43.html#shader-call-related">Shader Call Related</a></li>
<li><a href="chap43.html#shader-call-order">Shader Call Order</a></li>
<li><a href="chap43.html#memory-model-scope">Scope</a></li>
<li><a href="chap43.html#memory-model-atomic-operation">Atomic Operation</a></li>
<li><a href="chap43.html#memory-model-scoped-modification-order">Scoped Modification Order</a></li>
<li><a href="chap43.html#memory-model-memory-semantics">Memory Semantics</a></li>
<li><a href="chap43.html#memory-model-release-sequence">Release Sequence</a></li>
<li><a href="chap43.html#memory-model-synchronizes-with">Synchronizes-With</a></li>
<li><a href="chap43.html#memory-model-system-synchronizes-with">System-Synchronizes-With</a></li>
<li><a href="chap43.html#memory-model-non-private">Private vs. Non-Private</a></li>
<li><a href="chap43.html#memory-model-inter-thread-happens-before">Inter-Thread-Happens-Before</a></li>
<li><a href="chap43.html#memory-model-happens-before">Happens-Before</a></li>
<li><a href="chap43.html#memory-model-availability-visibility">Availability and Visibility</a></li>
<li><a href="chap43.html#memory-model-vulkan-availability-visibility">Availability, Visibility, and Domain Operations</a></li>
<li><a href="chap43.html#memory-model-availability-visibility-semantics">Availability and Visibility Semantics</a></li>
<li><a href="chap43.html#memory-model-instruction-av-vis">Per-Instruction Availability and Visibility Semantics</a></li>
<li><a href="chap43.html#memory-model-location-ordered">Location-Ordered</a></li>
<li><a href="chap43.html#memory-model-access-data-race">Data Race</a></li>
<li><a href="chap43.html#memory-model-visible-to">Visible-To</a></li>
<li><a href="chap43.html#memory-model-acyclicity">Acyclicity</a></li>
<li><a href="chap43.html#memory-model-shader-io">Shader I/O</a></li>
<li><a href="chap43.html#memory-model-deallocation">Deallocation</a></li>
<li><a href="chap43.html#memory-model-informative-descriptions">Descriptions (Informative)</a></li>
<li><a href="chap43.html#memory-model-tessellation-output-ordering">Tessellation Output Ordering</a></li>
</ul>
</li>
<li><a href="chap44.html#_compressed_image_formats">Appendix C: Compressed Image Formats</a>
<ul class="sectlevel2">
<li><a href="chap44.html#appendix-compressedtex-bc">Block-Compressed Image Formats</a></li>
<li><a href="chap44.html#appendix-compressedtex-etc2">ETC Compressed Image Formats</a></li>
<li><a href="chap44.html#appendix-compressedtex-astc">ASTC Compressed Image Formats</a></li>
</ul>
</li>
<li><a href="chap45.html#versions">Appendix D: Core Revisions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap45.html#versions-1.1">Version 1.1</a></li>
</ul>
</li>
<li><a href="chap46.html#extensions">Appendix E: Layers &amp; Extensions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap46.html#extension-appendices-list">List of Current Extensions</a></li>
<li><a href="chap46.html#provisional-extension-appendices-list">List of Provisional Extensions</a></li>
<li><a href="chap46.html#deprecated-extension-appendices-list">List of Deprecated Extensions</a></li>
</ul>
</li>
<li><a href="chap47.html#boilerplate">Appendix F: API Boilerplate</a>
<ul class="sectlevel2">
<li><a href="chap47.html#boilerplate-headers">Vulkan Header Files</a></li>
<li><a href="chap47.html#boilerplate-wsi-header">Window System-Specific Header Control (Informative)</a></li>
<li><a href="chap47.html#boilerplate-provisional-header">Provisional Extension Header Control (Informative)</a></li>
</ul>
</li>
<li><a href="chap48.html#invariance">Appendix G: Invariance</a>
<ul class="sectlevel2">
<li><a href="chap48.html#_repeatability">Repeatability</a></li>
<li><a href="chap48.html#_multi_pass_algorithms">Multi-pass Algorithms</a></li>
<li><a href="chap48.html#_invariance_rules">Invariance Rules</a></li>
<li><a href="chap48.html#_tessellation_invariance">Tessellation Invariance</a></li>
</ul>
</li>
<li><a href="chap49.html#lexicon">Appendix H: Lexicon</a>
<ul class="sectlevel2">
<li><a href="chap49.html#glossary">Glossary</a></li>
<li><a href="chap49.html#lexicon-common-abbreviations">Common Abbreviations</a></li>
<li><a href="chap49.html#lexicon-prefixes">Prefixes</a></li>
</ul>
</li>
<li><a href="chap50.html#credits">Appendix I: Credits (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap50.html#_working_group_contributors_to_vulkan">Working Group Contributors to Vulkan</a></li>
<li><a href="chap50.html#_other_credits">Other Credits</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="loading_msg" class="hidden" hidden=""><p>Loading… please wait.</p></div>
<!--ChunkedSearchboxMarker-->
<div class="searchbox"><label for="searchbox">Search: </label><input id="searchbox" type="text" disabled="disabled" value="Loading Search Data"><div id="resultsdiv"><ol id="results"></ol></div></div>
<div id="content"><div class="sect1">
<h2 id="ray-tracing"><a class="anchor" href="#ray-tracing"></a>34. Ray Tracing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ray tracing uses a separate rendering pipeline from both the graphics and
compute pipelines (see <a href="chap11.html#pipelines-ray-tracing">Ray Tracing Pipeline</a>).</p>
</div>
<div id="fig-raypipe" class="imageblock text-center">
<div class="content">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="454.53473" height="183.80112" viewBox="0 0 454.53472 183.80112" version="1.1" id="svg8" sodipodi:docname="ray_tracing_execution.svg" inkscape:version="0.92.4 (5da689c313, 2019-01-14)">
  <defs id="defs2">
    <marker inkscape:stockid="Arrow1Mend" orient="auto" refY="0" refX="0" id="marker9512-2-2-4-7" style="overflow:visible" inkscape:isstock="true" inkscape:collect="always">
      <path id="path9510-2-3-81-1" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:stockid="Arrow1Mend" orient="auto" refY="0" refX="0" id="marker9512-2-2-4-7-1" style="overflow:visible" inkscape:isstock="true" inkscape:collect="always">
      <path id="path9510-2-3-81-1-2" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:stockid="Arrow1Mend" orient="auto" refY="0" refX="0" id="marker9512-2-2-8-1-7-0" style="overflow:visible" inkscape:isstock="true" inkscape:collect="always">
      <path id="path9510-2-3-8-2-1-9" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:stockid="Arrow1Mend" orient="auto" refY="0" refX="0" id="marker9512-2-2-8-1-7-05" style="overflow:visible" inkscape:isstock="true" inkscape:collect="always">
      <path id="path9510-2-3-8-2-1-3" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:stockid="Arrow1Mend" orient="auto" refY="0" refX="0" id="marker9512-2-2-8-1-7-05-1" style="overflow:visible" inkscape:isstock="true" inkscape:collect="always">
      <path id="path9510-2-3-8-2-1-3-9" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:stockid="Arrow1Mend" orient="auto" refY="0" refX="0" id="marker9512-2-2-4-7-13" style="overflow:visible" inkscape:isstock="true" inkscape:collect="always">
      <path id="path9510-2-3-81-1-8" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:stockid="Arrow1Mend" orient="auto" refY="0" refX="0" id="marker9512-2-2-4-7-1-3" style="overflow:visible" inkscape:isstock="true" inkscape:collect="always">
      <path id="path9510-2-3-81-1-2-3" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)" inkscape:connector-curvature="0"></path>
    </marker>
  </defs>
  <sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="2.0000001" inkscape:cx="263.45186" inkscape:cy="204.85377" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" inkscape:snap-center="true" inkscape:snap-object-midpoints="true" inkscape:snap-text-baseline="true" inkscape:window-width="1920" inkscape:window-height="1001" inkscape:window-x="-9" inkscape:window-y="-9" inkscape:window-maximized="0" showguides="false" fit-margin-top="1" fit-margin-right="1" fit-margin-bottom="1" fit-margin-left="1" units="in" inkscape:snap-others="true" inkscape:snap-nodes="true" inkscape:object-nodes="true" height="7.5in">
    <inkscape:grid type="xygrid" id="grid817" originx="79.262856" originy="-1225.558"></inkscape:grid>
  </sodipodi:namedview>
  <metadata id="metadata5">
    <rdf:RDF>
      <cc:Work rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc:type>
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(-35.742392,209.97146)">
    <g id="g1684" transform="translate(76.761047,177.11848)">
      <rect y="-385.62808" x="196.64136" height="47.54937" width="98.349922" id="rect815-1-6-5-1-3-2-0" style="fill:#ffffff;fill-opacity:1;stroke:#ff0000;stroke-width:0.92372322;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13.33333302px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.26999986;stroke-miterlimit:4;stroke-dasharray:none" x="246.41849" y="-357.55588" id="text823-0-2-6-1-7-2-1"><tspan y="-357.55588" x="246.41849" id="tspan981" sodipodi:role="line">Any-Hit</tspan></text>
    </g>
    <g transform="translate(-36.358826,-133.79857)" id="g988-3">
      <g id="g4763">
        <rect style="fill:#ffffff;fill-opacity:1;stroke:#ff0000;stroke-width:0.92372322;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" id="rect815-1-6-5-1-3-2-0-7" width="98.349922" height="47.54937" x="191.76122" y="-74.711029"></rect>
        <text id="text823-0-2-6-1-7-2-1-1" y="-46.1577" x="241.06639" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13.33333302px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.26999986;stroke-miterlimit:4;stroke-dasharray:none" xml:space="preserve"><tspan sodipodi:role="line" id="tspan8376" x="241.06639" y="-46.1577">Intersection</tspan></text>
      </g>
    </g>
    <text id="text823-0-2-6-1-7-2-1-9-1" y="-113.86218" x="438.78833" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13.33333302px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.26999986;stroke-miterlimit:4;stroke-dasharray:none" xml:space="preserve"><tspan sodipodi:role="line" id="tspan6495" x="438.78833" y="-113.86218">Hit?</tspan></text>
    <g id="g7686" transform="translate(-211.72239,-23.523486)">
      <rect y="-184.80975" x="600.11108" height="47.54937" width="98.349922" id="rect815-1-6-5-1-3-0-9" style="fill:#ffffff;fill-opacity:1;stroke:#ff0000;stroke-width:0.92372322;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13.33333302px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.26999986;stroke-miterlimit:4;stroke-dasharray:none" x="649.0517" y="-156.07088" id="text823-0-2-6-1-7-4-9"><tspan y="-156.07088" x="649.0517" id="tspan6645" sodipodi:role="line">Closest Hit</tspan></text>
    </g>
    <g transform="translate(196.84052,-0.4705565)" id="g988-3-6">
      <g id="g4763-9">
        <rect style="fill:#ffffff;fill-opacity:1;stroke:#ff0000;stroke-width:0.92372322;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" id="rect815-1-6-5-1-3-2-0-7-3" width="98.349922" height="47.54937" x="191.76122" y="-74.711029"></rect>
        <text id="text823-0-2-6-1-7-2-1-1-5" y="-46.144676" x="240.56183" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13.33333302px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.26999986;stroke-miterlimit:4;stroke-dasharray:none" xml:space="preserve"><tspan sodipodi:role="line" id="tspan6647" x="240.56183" y="-46.144676">Miss</tspan></text>
      </g>
    </g>
    <path style="fill:none;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9512-2-2-4-7)" d="m 439.07803,-95.453012 v 17.927004" id="path9502-8-53-6-5" inkscape:connector-curvature="0" sodipodi:nodetypes="cc"></path>
    <rect style="fill:none;stroke:#000000;stroke-width:1.44848073;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" id="rect3643-7-6" width="54.151859" height="54.151859" x="354.16718" y="78.002197" transform="matrix(0.90285598,-0.42994311,0.90285598,0.42994311,0,0)"></rect>
    <path style="fill:none;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9512-2-2-4-7-1)" d="m 439.07803,-142.01745 v -16.38351" id="path9502-8-53-6-5-2" inkscape:connector-curvature="0" sodipodi:nodetypes="cc"></path>
    <text id="text823-0-2-6-1-7-2-1-5-2-2" y="-145.3622" x="431.07803" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13.33333302px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.26999986;stroke-miterlimit:4;stroke-dasharray:none" xml:space="preserve"><tspan sodipodi:role="line" id="tspan9812-5-3" x="431.07803" y="-145.3622">Y</tspan></text>
    <text id="text823-0-2-6-1-7-2-1-5-1-3" y="-82.515198" x="431.065" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13.33333302px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.26999986;stroke-miterlimit:4;stroke-dasharray:none" xml:space="preserve"><tspan sodipodi:role="line" id="tspan10386-33" x="431.065" y="-82.515198">N</tspan></text>
    <g id="g988-0" transform="translate(-277.43985,-72.408014)">
      <g id="g1576">
        <rect style="fill:#ffffff;fill-opacity:1;stroke:#ff0000;stroke-width:0.92372322;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" id="rect815-1-6-5-1-3-2-0-6" width="98.349922" height="47.54937" x="314.6441" y="-70.14447"></rect>
        <text id="text823-0-2-6-1-7-2-1-8" y="-50.072266" x="364.42123" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13.33333302px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.26999986;stroke-miterlimit:4;stroke-dasharray:none" xml:space="preserve"><tspan y="-50.072266" x="364.42123" id="tspan1568" sodipodi:role="line">Ray</tspan><tspan y="-33.405598" x="364.42123" id="tspan1570" sodipodi:role="line">Generation</tspan></text>
      </g>
    </g>
    <rect style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.92372322;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" id="rect815-1-6-3" width="215.34993" height="47.54937" x="155.40239" y="-142.5096"></rect>
    <text id="text823-0-2-6" y="-130.43739" x="263.56888" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:13.33333302px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.26999986;stroke-miterlimit:4;stroke-dasharray:none" xml:space="preserve"><tspan y="-130.43739" x="263.56888" id="tspan947-5" sodipodi:role="line">Acceleration</tspan><tspan id="tspan1116" y="-113.77073" x="263.56888" sodipodi:role="line">Structure</tspan><tspan id="tspan1118" y="-97.104057" x="263.56888" sodipodi:role="line">Traversal</tspan></text>
    <path style="fill:none;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9512-2-2-8-1-7-0)" d="m 135.82735,-118.73491 h 17.927" id="path9502-8-53-7-5-7-6" inkscape:connector-curvature="0" sodipodi:nodetypes="cc"></path>
    <path style="fill:none;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9512-2-2-8-1-7-05)" d="M 370.25969,-118.73523 H 388.1867" id="path9502-8-53-7-5-7-0" inkscape:connector-curvature="0" sodipodi:nodetypes="cc"></path>
    <path style="fill:none;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9512-2-2-8-1-7-05-1)" d="m 254.12852,-184.73491 h 17.92701" id="path9502-8-53-7-5-7-0-2" inkscape:connector-curvature="0" sodipodi:nodetypes="cc"></path>
    <path style="fill:none;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9512-2-2-4-7-13)" d="m 323.17953,-161.4009 v 17.927" id="path9502-8-53-6-5-25" inkscape:connector-curvature="0" sodipodi:nodetypes="cc"></path>
    <path style="fill:none;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9512-2-2-4-7-1-3)" d="m 204.70756,-142.77917 v -16.38351" id="path9502-8-53-6-5-2-9" inkscape:connector-curvature="0" sodipodi:nodetypes="cc" inkscape:transform-center-x="-208" inkscape:transform-center-y="18.485341"></path>
  </g>
</svg>
</div>
<div class="title">Figure 23. Ray tracing pipeline execution</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Caption</div>
<div class="paragraph">
<p>Interaction between the different shader stages in the ray tracing pipeline</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Within the ray tracing pipeline, <code>OpTraceRayKHR</code> <strong class="purple">can</strong> be called to
perform a <a href="chap34.html#ray-traversal">ray traversal</a> that invokes the various ray
tracing shader stages during its execution.
The relationship between the ray tracing pipeline object and the geometries
present in the acceleration structure traversed is passed into the ray
tracing command in a <a href="chap13.html#VkBuffer">VkBuffer</a> object known as a <em>shader binding
table</em>.
<code>OpExecuteCallableKHR</code> can also be used in ray tracing pipelines to
invoke a <a href="chap10.html#shaders-callable">callable shader</a>.</p>
</div>
<div class="paragraph">
<p>During execution, control alternates between scheduling and other
operations.
The scheduling functionality is implementation-specific and is responsible
for workload execution.
The shader stages are programmable.
<a href="chap34.html#ray-traversal"><em>Traversal</em></a>, which refers to the process of traversing
acceleration structures to find potential intersections of rays with
geometry, is fixed function.</p>
</div>
<div class="paragraph">
<p>The programmable portions of the pipeline are exposed in a single-ray
programming model, with each invocation handling one ray at a time.
Memory operations <strong class="purple">can</strong> be synchronized using standard memory barriers.
The <code>Workgroup</code> scope and variables with a storage class of
<code>Workgroup</code> <strong class="purple">must</strong> not be used in the ray tracing pipeline.</p>
</div>
<div class="sect2">
<h3 id="ray-tracing-shader-call"><a class="anchor" href="#ray-tracing-shader-call"></a>34.1. Shader Call Instructions</h3>
<div class="paragraph">
<p>A <em>shader call</em> is an instruction which <strong class="purple">may</strong> cause execution to continue
elsewhere by creating one or more invocations that execute a different
shader stage.</p>
</div>
<div class="paragraph">
<p>The shader call instructions are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>OpTraceRayKHR</code> which <strong class="purple">may</strong> invoke intersection, any-hit, closest hit,
or miss shaders,</p>
</li>
<li>
<p><code>OpReportIntersectionKHR</code> which <strong class="purple">may</strong> invoke any-hit shaders, and</p>
</li>
<li>
<p><code>OpExecuteCallableKHR</code> which will invoke a callable shader.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The invocations created by shader call instructions are grouped into
subgroups by the implementation.
Those subgroups <strong class="purple">may</strong> be unrelated to the subgroup of the parent invocation.</p>
</div>
<div id="ray-tracing-recursion-depth" class="paragraph">
<p>Trace ray instructions <strong class="purple">can</strong> be used recursively; invoked shaders <strong class="purple">can</strong>
themselves execute trace ray instructions, to a maximum depth defined by the
<a href="chap38.html#limits-maxRayRecursionDepth"><code>maxRayRecursionDepth</code></a> limit.</p>
</div>
<div class="paragraph">
<p>Shaders directly invoked from the API always have a recursion depth of 0;
each shader executed by a trace ray instruction has a recursion depth one
higher than the recursion depth of the shader which invoked it.
Applications <strong class="purple">must</strong> not invoke a shader with a recursion depth greater than
the value of
<code>maxPipelineRayRecursionDepth</code> specified in the pipeline.</p>
</div>
<div id="ray-tracing-repack" class="paragraph">
<p>An <em>invocation repack instruction</em> is a ray tracing shader call instruction
where the implementation <strong class="purple">may</strong> change the set of invocations that are
executing.
When a repack instruction is encountered, the invocation is suspended and a
new invocation begins and executes the instruction.
After executing the repack instruction (which <strong class="purple">may</strong> result in other ray
tracing shader stages executing) the new invocation ends and the original
invocation is resumed, but it <strong class="purple">may</strong> be resumed in a different subgroup or at
a different <code>SubgroupLocalInvocationId</code> within the same subgroup.
When a subset of invocations in a subgroup execute the invocation repack
instruction, those that do not execute it remain in the same subgroup at the
same <code>SubgroupLocalInvocationId</code>.</p>
</div>
<div class="paragraph">
<p>The <code>OpTraceRayKHR</code>, <code>OpReportIntersectionKHR</code>, and
<code>OpExecuteCallableKHR</code> instructions are invocation repack instructions.</p>
</div>
<div class="paragraph">
<p>The invocations that are executing before an invocation repack instruction,
after the instruction, or are created by the instruction, are
<a href="chap43.html#shader-call-related">shader-call-related</a>.</p>
</div>
<div class="paragraph">
<p>If the implementation changes the composition of subgroups, the values of
<code>SubgroupSize</code>, <code>SubgroupLocalInvocationId</code>,
and builtin variables that are derived from them (<code>SubgroupEqMask</code>,
<code>SubgroupGeMask</code>, <code>SubgroupGtMask</code>, <code>SubgroupLeMask</code>,
<code>SubgroupLtMask</code>) <strong class="purple">must</strong> be changed accordingly by the invocation repack
instruction.
The application <strong class="purple">must</strong> use <a href="chap42.html#builtin-volatile-semantics"><code>Volatile</code>
semantics</a> on these <code>BuiltIn</code> variables when used in the ray generation,
closest hit, miss, intersection, and callable shaders.
Similarly, the application <strong class="purple">must</strong> use <code>Volatile</code> semantics on any
<code>RayTmaxKHR</code> decorated <code>Builtin</code> used in an intersection shader.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p><a href="chap10.html#shaders-group-operations">Subgroup operations</a> are permitted in the
programmable ray tracing shader stages.
However, shader call instructions place a bound on where results of subgroup
instructions or subgroup-scoped instructions that execute the dynamic
instance of that instruction are potentially valid.
For example, care <strong class="purple">must</strong> be taken when using the result of a ballot operation
that was computed before an invocation repack instruction, after that repack
instruction.
The ballot <strong class="purple">may</strong> be incorrect as the set of invocations could have changed.</p>
</div>
<div class="paragraph">
<p>For clock operations, the value of a <code>Subgroup</code> scoped
<code>OpReadClockKHR</code> read before the dynamic instance of a repack instruction
<strong class="purple">should</strong> not be compared to the result of that clock instruction after the
repack instruction.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When a ray tracing shader executes a dynamic instance of an invocation
repack instruction which results in another ray tracing shader being
invoked, their instructions are related by
<a href="chap43.html#shader-call-order">shader-call-order</a>.</p>
</div>
<div class="paragraph">
<p>For ray tracing invocations that are
<a href="chap43.html#shader-call-related">shader-call-related</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="chap43.html#memory-model-memory-operation">memory operations</a> on
    <code>StorageBuffer</code>, <code>Image</code>, and <code>ShaderRecordBufferKHR</code> storage
    classes <strong class="purple">can</strong> be synchronized using the
<code>ShaderCallKHR</code>
    scope.</p>
</li>
<li>
<p>the <code>CallableDataKHR</code>, <code>IncomingCallableDataKHR</code>,
<code>RayPayloadKHR</code>, <code>HitAttributeKHR</code>, and <code>IncomingRayPayloadKHR</code>
storage classes are <a href="chap43.html#memory-model-shader-io">system-synchronized</a> and
no application availability and visibility operations are required.</p>
</li>
<li>
<p>memory operations within a single invocation before and after the
invocation repack instruction are ordered by
<a href="chap43.html#memory-model-program-order">program-order</a> and do not require explicit
synchronzation.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="ray-tracing-commands"><a class="anchor" href="#ray-tracing-commands"></a>34.2. Ray Tracing Commands</h3>
<div class="paragraph">
<p><em>Ray tracing commands</em> provoke work in the ray tracing pipeline.
Ray tracing commands are recorded into a command buffer and when executed by
a queue will produce work that executes according to the currently bound ray
tracing pipeline.
A ray tracing pipeline <strong class="purple">must</strong> be bound to a command buffer before any ray
tracing commands are recorded in that command buffer.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To dispatch ray tracing use:</p>
</div>
<div id="vkCmdTraceRaysKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_ray_tracing_pipeline</span>
<span class="directive">void</span> vkCmdTraceRaysKHR(
    VkCommandBuffer                             commandBuffer,
    <span class="directive">const</span> VkStridedDeviceAddressRegionKHR*      pRaygenShaderBindingTable,
    <span class="directive">const</span> VkStridedDeviceAddressRegionKHR*      pMissShaderBindingTable,
    <span class="directive">const</span> VkStridedDeviceAddressRegionKHR*      pHitShaderBindingTable,
    <span class="directive">const</span> VkStridedDeviceAddressRegionKHR*      pCallableShaderBindingTable,
    uint32_t                                    width,
    uint32_t                                    height,
    uint32_t                                    depth);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pRaygenShaderBindingTable</code> is a
<a href="#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> that holds the shader binding
table data for the ray generation shader stage.</p>
</li>
<li>
<p><code>pMissShaderBindingTable</code> is a <a href="#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a>
that holds the shader binding table data for the miss shader stage.</p>
</li>
<li>
<p><code>pHitShaderBindingTable</code> is a <a href="#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a>
that holds the shader binding table data for the hit shader stage.</p>
</li>
<li>
<p><code>pCallableShaderBindingTable</code> is a
<a href="#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> that holds the shader binding
table data for the callable shader stage.</p>
</li>
<li>
<p><code>width</code> is the width of the ray trace query dimensions.</p>
</li>
<li>
<p><code>height</code> is height of the ray trace query dimensions.</p>
</li>
<li>
<p><code>depth</code> is depth of the ray trace query dimensions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When the command is executed, a ray generation group of <span class="eq"><code>width</code>
× <code>height</code> × <code>depth</code></span> rays is assembled.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-magFilter-04553" href="#VUID-vkCmdTraceRaysKHR-magFilter-04553"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-magFilter-04553</span><br>

If a <a href="chap14.html#VkSampler">VkSampler</a> created with <code>magFilter</code> or <code>minFilter</code>
equal to <code>VK_FILTER_LINEAR</code> and <code>compareEnable</code> equal to
<code>VK_FALSE</code> is used to sample a <a href="chap13.html#VkImageView">VkImageView</a> as a result of this
command, then the image view’s
<a href="chap13.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02691" href="#VUID-vkCmdTraceRaysKHR-None-02691"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02691</span><br>

If a <code>VkImageView</code> is accessed using atomic operations as a result
of this command, then the image view’s
<a href="chap13.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_STORAGE_IMAGE_ATOMIC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02697" href="#VUID-vkCmdTraceRaysKHR-None-02697"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02697</span><br>

For each set <em>n</em> that is statically used by the <code>VkPipeline</code> bound
to the pipeline bind point used by this command, a descriptor set <strong class="purple">must</strong>
have been bound to <em>n</em> at the same pipeline bind point, with a
<code>VkPipelineLayout</code> that is compatible for set <em>n</em>, with the
<code>VkPipelineLayout</code> used to create the current <code>VkPipeline</code>, as
described in <a href="chap15.html#descriptorsets-compatibility">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02698" href="#VUID-vkCmdTraceRaysKHR-None-02698"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02698</span><br>

For each push constant that is statically used by the <code>VkPipeline</code>
bound to the pipeline bind point used by this command, a push constant
value <strong class="purple">must</strong> have been set for the same pipeline bind point, with a
<code>VkPipelineLayout</code> that is compatible for push constants, with the
<code>VkPipelineLayout</code> used to create the current <code>VkPipeline</code>, as
described in <a href="chap15.html#descriptorsets-compatibility">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02699" href="#VUID-vkCmdTraceRaysKHR-None-02699"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02699</span><br>

Descriptors in each bound descriptor set, specified via
<code>vkCmdBindDescriptorSets</code>, <strong class="purple">must</strong> be valid if they are statically
used by the <code>VkPipeline</code> bound to the pipeline bind point used by
this command</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02700" href="#VUID-vkCmdTraceRaysKHR-None-02700"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02700</span><br>

A valid pipeline <strong class="purple">must</strong> be bound to the pipeline bind point used by this
command</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-commandBuffer-02701" href="#VUID-vkCmdTraceRaysKHR-commandBuffer-02701"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-commandBuffer-02701</span><br>

If the <code>VkPipeline</code> object bound to the pipeline bind point used by
this command requires any dynamic state, that state <strong class="purple">must</strong> have been set
for <code>commandBuffer</code>, and done so after any previously bound pipeline
with the corresponding state not specified as dynamic</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02859" href="#VUID-vkCmdTraceRaysKHR-None-02859"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02859</span><br>

There <strong class="purple">must</strong> not have been any calls to dynamic state setting commands
for any state not specified as dynamic in the <code>VkPipeline</code> object
bound to the pipeline bind point used by this command, since that
pipeline was bound</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02702" href="#VUID-vkCmdTraceRaysKHR-None-02702"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02702</span><br>

If the <code>VkPipeline</code> object bound to the pipeline bind point used by
this command accesses a <code>VkSampler</code> object that uses unnormalized
coordinates, that sampler <strong class="purple">must</strong> not be used to sample from any
<code>VkImage</code> with a <code>VkImageView</code> of the type
<code>VK_IMAGE_VIEW_TYPE_3D</code>, <code>VK_IMAGE_VIEW_TYPE_CUBE</code>,
<code>VK_IMAGE_VIEW_TYPE_1D_ARRAY</code>, <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code> or
<code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code>, in any shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02703" href="#VUID-vkCmdTraceRaysKHR-None-02703"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02703</span><br>

If the <code>VkPipeline</code> object bound to the pipeline bind point used by
this command accesses a <code>VkSampler</code> object that uses unnormalized
coordinates, that sampler <strong class="purple">must</strong> not be used with any of the SPIR-V
<code>OpImageSample*</code> or <code>OpImageSparseSample*</code> instructions with
<code>ImplicitLod</code>, <code>Dref</code> or <code>Proj</code> in their name, in any shader
stage</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02704" href="#VUID-vkCmdTraceRaysKHR-None-02704"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02704</span><br>

If the <code>VkPipeline</code> object bound to the pipeline bind point used by
this command accesses a <code>VkSampler</code> object that uses unnormalized
coordinates, that sampler <strong class="purple">must</strong> not be used with any of the SPIR-V
<code>OpImageSample*</code> or <code>OpImageSparseSample*</code> instructions that includes a
LOD bias or any offset values, in any shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02705" href="#VUID-vkCmdTraceRaysKHR-None-02705"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02705</span><br>

If the <a href="chap37.html#features-robustBufferAccess">robust buffer access</a> feature is
not enabled, and if the <code>VkPipeline</code> object bound to the pipeline
bind point used by this command accesses a uniform buffer, it <strong class="purple">must</strong> not
access values outside of the range of the buffer as specified in the
descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-02706" href="#VUID-vkCmdTraceRaysKHR-None-02706"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-02706</span><br>

If the <a href="chap37.html#features-robustBufferAccess">robust buffer access</a> feature is
not enabled, and if the <code>VkPipeline</code> object bound to the pipeline
bind point used by this command accesses a storage buffer, it <strong class="purple">must</strong> not
access values outside of the range of the buffer as specified in the
descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-commandBuffer-02707" href="#VUID-vkCmdTraceRaysKHR-commandBuffer-02707"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-commandBuffer-02707</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, any resource
accessed by the <code>VkPipeline</code> object bound to the pipeline bind point
used by this command <strong class="purple">must</strong> not be a protected resource</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-04115" href="#VUID-vkCmdTraceRaysKHR-None-04115"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-04115</span><br>

If a <a href="chap13.html#VkImageView">VkImageView</a> is accessed using <code>OpImageWrite</code> as a result
of this command, then the <code>Type</code> of the <code>Texel</code> operand of that
instruction <strong class="purple">must</strong> have at least as many components as the image view’s
format.</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-OpImageWrite-04469" href="#VUID-vkCmdTraceRaysKHR-OpImageWrite-04469"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-OpImageWrite-04469</span><br>

If a <a href="chap13.html#VkBufferView">VkBufferView</a> is accessed using <code>OpImageWrite</code> as a result
of this command, then the <code>Type</code> of the <code>Texel</code> operand of that
instruction <strong class="purple">must</strong> have at least as many components as the image view’s
format.</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-None-03429" href="#VUID-vkCmdTraceRaysKHR-None-03429"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-None-03429</span><br>

Any shader group handle referenced by this call <strong class="purple">must</strong> have been queried
from the currently bound ray tracing shader pipeline</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-maxPipelineRayRecursionDepth-03679" href="#VUID-vkCmdTraceRaysKHR-maxPipelineRayRecursionDepth-03679"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-maxPipelineRayRecursionDepth-03679</span><br>

This command <strong class="purple">must</strong> not cause a shader call instruction to be executed
from a shader invocation with a <a href="#ray-tracing-recursion-depth">recursion
depth</a> greater than the value of <code>maxPipelineRayRecursionDepth</code>
used to create the bound ray tracing pipeline</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pRayGenShaderBindingTable-03680" href="#VUID-vkCmdTraceRaysKHR-pRayGenShaderBindingTable-03680"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pRayGenShaderBindingTable-03680</span><br>

If the buffer from which <code>pRayGenShaderBindingTable-&gt;deviceAddress</code>
was queried is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pRayGenShaderBindingTable-03681" href="#VUID-vkCmdTraceRaysKHR-pRayGenShaderBindingTable-03681"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pRayGenShaderBindingTable-03681</span><br>

The buffer from which the <code>pRayGenShaderBindingTable-&gt;deviceAddress</code>
is queried <strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pRayGenShaderBindingTable-03682" href="#VUID-vkCmdTraceRaysKHR-pRayGenShaderBindingTable-03682"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pRayGenShaderBindingTable-03682</span><br>

<code>pRayGenShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupBaseAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-size-04023" href="#VUID-vkCmdTraceRaysKHR-size-04023"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-size-04023</span><br>

The <code>size</code> member of <code>pRayGenShaderBindingTable</code> <strong class="purple">must</strong> be equal
to its <code>stride</code> member</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-03683" href="#VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-03683"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-03683</span><br>

If the buffer from which <code>pMissShaderBindingTable-&gt;deviceAddress</code>
was queried is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-03684" href="#VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-03684"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-03684</span><br>

The buffer from which the <code>pMissShaderBindingTable-&gt;deviceAddress</code>
is queried <strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-03685" href="#VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-03685"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-03685</span><br>

<code>pMissShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupBaseAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-stride-03686" href="#VUID-vkCmdTraceRaysKHR-stride-03686"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-stride-03686</span><br>

The <code>stride</code> member of <code>pMissShaderBindingTable</code> <strong class="purple">must</strong> be a
multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupHandleAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-stride-04029" href="#VUID-vkCmdTraceRaysKHR-stride-04029"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-stride-04029</span><br>

The <code>stride</code> member of <code>pMissShaderBindingTable</code> <strong class="purple">must</strong> be less
than or equal to
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>maxShaderGroupStride</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03687" href="#VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03687"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03687</span><br>

If the buffer from which <code>pHitShaderBindingTable-&gt;deviceAddress</code> was
queried is non-sparse then it <strong class="purple">must</strong> be bound completely and contiguously
to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03688" href="#VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03688"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03688</span><br>

The buffer from which the <code>pHitShaderBindingTable-&gt;deviceAddress</code> is
queried <strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03689" href="#VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03689"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03689</span><br>

<code>pHitShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupBaseAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-stride-03690" href="#VUID-vkCmdTraceRaysKHR-stride-03690"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-stride-03690</span><br>

The <code>stride</code> member of <code>pHitShaderBindingTable</code> <strong class="purple">must</strong> be a
multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupHandleAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-stride-04035" href="#VUID-vkCmdTraceRaysKHR-stride-04035"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-stride-04035</span><br>

The <code>stride</code> member of <code>pHitShaderBindingTable</code> <strong class="purple">must</strong> be less
than or equal to
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>maxShaderGroupStride</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-03691" href="#VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-03691"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-03691</span><br>

If the buffer from which
<code>pCallableShaderBindingTable-&gt;deviceAddress</code> was queried is
non-sparse then it <strong class="purple">must</strong> be bound completely and contiguously to a
single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-03692" href="#VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-03692"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-03692</span><br>

The buffer from which the
<code>pCallableShaderBindingTable-&gt;deviceAddress</code> is queried <strong class="purple">must</strong> have
been created with the <code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code>
usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-03693" href="#VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-03693"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-03693</span><br>

<code>pCallableShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupBaseAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-stride-03694" href="#VUID-vkCmdTraceRaysKHR-stride-03694"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-stride-03694</span><br>

The <code>stride</code> member of <code>pCallableShaderBindingTable</code> <strong class="purple">must</strong> be a
multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupHandleAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-stride-04041" href="#VUID-vkCmdTraceRaysKHR-stride-04041"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-stride-04041</span><br>

The <code>stride</code> member of <code>pCallableShaderBindingTable</code> <strong class="purple">must</strong> be
less than or equal to
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>maxShaderGroupStride</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-flags-03695" href="#VUID-vkCmdTraceRaysKHR-flags-03695"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-flags-03695</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_ANY_HIT_SHADERS_BIT_KHR</code>,
the <code>deviceAddress</code> member of <code>pHitShaderBindingTable</code> <strong class="purple">must</strong> not
be zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-flags-03696" href="#VUID-vkCmdTraceRaysKHR-flags-03696"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-flags-03696</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_CLOSEST_HIT_SHADERS_BIT_KHR</code>,
the <code>deviceAddress</code> member of <code>pHitShaderBindingTable</code> <strong class="purple">must</strong> not
be zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-flags-03697" href="#VUID-vkCmdTraceRaysKHR-flags-03697"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-flags-03697</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_INTERSECTION_SHADERS_BIT_KHR</code>,
the <code>deviceAddress</code> member of <code>pHitShaderBindingTable</code> <strong class="purple">must</strong> not
be zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-flags-03511" href="#VUID-vkCmdTraceRaysKHR-flags-03511"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-flags-03511</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_MISS_SHADERS_BIT_KHR</code>, the
shader group handle identified by <code>pMissShaderBindingTable</code> <strong class="purple">must</strong>
contain a valid miss shader</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-flags-03512" href="#VUID-vkCmdTraceRaysKHR-flags-03512"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-flags-03512</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_ANY_HIT_SHADERS_BIT_KHR</code>,
entries in <code>pHitShaderBindingTable</code> accessed as a result of this
command in order to execute an any-hit shader <strong class="purple">must</strong> not be set to zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-flags-03513" href="#VUID-vkCmdTraceRaysKHR-flags-03513"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-flags-03513</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_CLOSEST_HIT_SHADERS_BIT_KHR</code>,
entries in <code>pHitShaderBindingTable</code> accessed as a result of this
command in order to execute a closest hit shader <strong class="purple">must</strong> not be set to
zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-flags-03514" href="#VUID-vkCmdTraceRaysKHR-flags-03514"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-flags-03514</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_INTERSECTION_SHADERS_BIT_KHR</code>,
entries in <code>pHitShaderBindingTable</code> accessed as a result of this
command in order to execute an intersection shader <strong class="purple">must</strong> not be set to
zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03720" href="#VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03720"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03720</span><br>

Any hit group entries in <code>pHitShaderBindingTable</code> accessed by this
call from a geometry with a <code>geometryType</code> of
<code>VK_GEOMETRY_TYPE_TRIANGLES_KHR</code> <strong class="purple">must</strong> have been created with
<code>VK_RAY_TRACING_SHADER_GROUP_TYPE_TRIANGLES_HIT_GROUP_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03721" href="#VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03721"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-03721</span><br>

Any hit group entries in <code>pHitShaderBindingTable</code> accessed by this
call from a geometry with a <code>geometryType</code> of
<code>VK_GEOMETRY_TYPE_AABBS_KHR</code> <strong class="purple">must</strong> have been created with
<code>VK_RAY_TRACING_SHADER_GROUP_TYPE_PROCEDURAL_HIT_GROUP_KHR</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-commandBuffer-04625" href="#VUID-vkCmdTraceRaysKHR-commandBuffer-04625"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-commandBuffer-04625</span><br>

<code>commandBuffer</code> <strong class="purple">must</strong> not be a protected command buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-width-03626" href="#VUID-vkCmdTraceRaysKHR-width-03626"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-width-03626</span><br>

<code>width</code> <strong class="purple">must</strong> be less than or equal to
<span class="eq"><code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[0]
× <code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupSize</code>[0]</span></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-height-03627" href="#VUID-vkCmdTraceRaysKHR-height-03627"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-height-03627</span><br>

<code>height</code> <strong class="purple">must</strong> be less than or equal to
<span class="eq"><code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[1]
× <code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupSize</code>[1]</span></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-depth-03628" href="#VUID-vkCmdTraceRaysKHR-depth-03628"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-depth-03628</span><br>

<code>depth</code> <strong class="purple">must</strong> be less than or equal to
<span class="eq"><code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[2]
× <code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupSize</code>[2]</span></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-width-03629" href="#VUID-vkCmdTraceRaysKHR-width-03629"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-width-03629</span><br>

<span class="eq"><code>width</code> × <code>height</code> × <code>depth</code></span> <strong class="purple">must</strong> be less
than or equal to
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>maxRayDispatchInvocationCount</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-commandBuffer-parameter" href="#VUID-vkCmdTraceRaysKHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap7.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pRaygenShaderBindingTable-parameter" href="#VUID-vkCmdTraceRaysKHR-pRaygenShaderBindingTable-parameter"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pRaygenShaderBindingTable-parameter</span><br>
 <code>pRaygenShaderBindingTable</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-parameter" href="#VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-parameter"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pMissShaderBindingTable-parameter</span><br>
 <code>pMissShaderBindingTable</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-parameter" href="#VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-parameter"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pHitShaderBindingTable-parameter</span><br>
 <code>pHitShaderBindingTable</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-parameter" href="#VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-parameter"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-pCallableShaderBindingTable-parameter</span><br>
 <code>pCallableShaderBindingTable</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-commandBuffer-recording" href="#VUID-vkCmdTraceRaysKHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap7.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-commandBuffer-cmdpool" href="#VUID-vkCmdTraceRaysKHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysKHR-renderpass" href="#VUID-vkCmdTraceRaysKHR-renderpass"></a> <span class="vuid">VUID-vkCmdTraceRaysKHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap7.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap9.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#synchronization-pipeline-stages-types">Pipeline Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkStridedDeviceAddressRegionKHR</code> structure is defined as:</p>
</div>
<div id="VkStridedDeviceAddressRegionKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_ray_tracing_pipeline</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkStridedDeviceAddressRegionKHR {
    VkDeviceAddress    deviceAddress;
    VkDeviceSize       stride;
    VkDeviceSize       size;
} VkStridedDeviceAddressRegionKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>deviceAddress</code> is the device address (as returned by the
<a href="#vkGetBufferDeviceAddress">vkGetBufferDeviceAddress</a> command) at which the region starts, or
zero if the region is unused.</p>
</li>
<li>
<p><code>stride</code> is the byte stride between consecutive elements.</p>
</li>
<li>
<p><code>size</code> is the size in bytes of the region starting at
<code>deviceAddress</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkStridedDeviceAddressRegionKHR-size-04631" href="#VUID-VkStridedDeviceAddressRegionKHR-size-04631"></a> <span class="vuid">VUID-VkStridedDeviceAddressRegionKHR-size-04631</span><br>

If <code>size</code> is not zero, all addresses between <code>deviceAddress</code> and
<span class="eq"><code>deviceAddress</code> +  <code>size</code> - 1</span> <strong class="purple">must</strong> be in the buffer
device address range of the same buffer</p>
</li>
<li>
<p><a id="VUID-VkStridedDeviceAddressRegionKHR-size-04632" href="#VUID-VkStridedDeviceAddressRegionKHR-size-04632"></a> <span class="vuid">VUID-VkStridedDeviceAddressRegionKHR-size-04632</span><br>

If <code>size</code> is not zero, <code>stride</code> <strong class="purple">must</strong> be less than the size of
the buffer from which <code>deviceAddress</code> was queried</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To dispatch ray tracing, with some parameters sourced on the device, use:</p>
</div>
<div id="vkCmdTraceRaysIndirectKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_ray_tracing_pipeline</span>
<span class="directive">void</span> vkCmdTraceRaysIndirectKHR(
    VkCommandBuffer                             commandBuffer,
    <span class="directive">const</span> VkStridedDeviceAddressRegionKHR*      pRaygenShaderBindingTable,
    <span class="directive">const</span> VkStridedDeviceAddressRegionKHR*      pMissShaderBindingTable,
    <span class="directive">const</span> VkStridedDeviceAddressRegionKHR*      pHitShaderBindingTable,
    <span class="directive">const</span> VkStridedDeviceAddressRegionKHR*      pCallableShaderBindingTable,
    VkDeviceAddress                             indirectDeviceAddress);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pRaygenShaderBindingTable</code> is a
<a href="#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> that holds the shader binding
table data for the ray generation shader stage.</p>
</li>
<li>
<p><code>pMissShaderBindingTable</code> is a <a href="#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a>
that holds the shader binding table data for the miss shader stage.</p>
</li>
<li>
<p><code>pHitShaderBindingTable</code> is a <a href="#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a>
that holds the shader binding table data for the hit shader stage.</p>
</li>
<li>
<p><code>pCallableShaderBindingTable</code> is a
<a href="#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> that holds the shader binding
table data for the callable shader stage.</p>
</li>
<li>
<p><code>indirectDeviceAddress</code> is a buffer device address which points to a
<a href="#VkTraceRaysIndirectCommandKHR">VkTraceRaysIndirectCommandKHR</a> structure which contains the trace
ray parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkCmdTraceRaysIndirectKHR</code> behaves similarly to <a href="#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>
except that the ray trace query dimensions are read by the device from
<code>indirectDeviceAddress</code> during execution.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-magFilter-04553" href="#VUID-vkCmdTraceRaysIndirectKHR-magFilter-04553"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-magFilter-04553</span><br>

If a <a href="chap14.html#VkSampler">VkSampler</a> created with <code>magFilter</code> or <code>minFilter</code>
equal to <code>VK_FILTER_LINEAR</code> and <code>compareEnable</code> equal to
<code>VK_FALSE</code> is used to sample a <a href="chap13.html#VkImageView">VkImageView</a> as a result of this
command, then the image view’s
<a href="chap13.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02691" href="#VUID-vkCmdTraceRaysIndirectKHR-None-02691"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02691</span><br>

If a <code>VkImageView</code> is accessed using atomic operations as a result
of this command, then the image view’s
<a href="chap13.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_STORAGE_IMAGE_ATOMIC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02697" href="#VUID-vkCmdTraceRaysIndirectKHR-None-02697"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02697</span><br>

For each set <em>n</em> that is statically used by the <code>VkPipeline</code> bound
to the pipeline bind point used by this command, a descriptor set <strong class="purple">must</strong>
have been bound to <em>n</em> at the same pipeline bind point, with a
<code>VkPipelineLayout</code> that is compatible for set <em>n</em>, with the
<code>VkPipelineLayout</code> used to create the current <code>VkPipeline</code>, as
described in <a href="chap15.html#descriptorsets-compatibility">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02698" href="#VUID-vkCmdTraceRaysIndirectKHR-None-02698"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02698</span><br>

For each push constant that is statically used by the <code>VkPipeline</code>
bound to the pipeline bind point used by this command, a push constant
value <strong class="purple">must</strong> have been set for the same pipeline bind point, with a
<code>VkPipelineLayout</code> that is compatible for push constants, with the
<code>VkPipelineLayout</code> used to create the current <code>VkPipeline</code>, as
described in <a href="chap15.html#descriptorsets-compatibility">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02699" href="#VUID-vkCmdTraceRaysIndirectKHR-None-02699"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02699</span><br>

Descriptors in each bound descriptor set, specified via
<code>vkCmdBindDescriptorSets</code>, <strong class="purple">must</strong> be valid if they are statically
used by the <code>VkPipeline</code> bound to the pipeline bind point used by
this command</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02700" href="#VUID-vkCmdTraceRaysIndirectKHR-None-02700"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02700</span><br>

A valid pipeline <strong class="purple">must</strong> be bound to the pipeline bind point used by this
command</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-02701" href="#VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-02701"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-02701</span><br>

If the <code>VkPipeline</code> object bound to the pipeline bind point used by
this command requires any dynamic state, that state <strong class="purple">must</strong> have been set
for <code>commandBuffer</code>, and done so after any previously bound pipeline
with the corresponding state not specified as dynamic</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02859" href="#VUID-vkCmdTraceRaysIndirectKHR-None-02859"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02859</span><br>

There <strong class="purple">must</strong> not have been any calls to dynamic state setting commands
for any state not specified as dynamic in the <code>VkPipeline</code> object
bound to the pipeline bind point used by this command, since that
pipeline was bound</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02702" href="#VUID-vkCmdTraceRaysIndirectKHR-None-02702"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02702</span><br>

If the <code>VkPipeline</code> object bound to the pipeline bind point used by
this command accesses a <code>VkSampler</code> object that uses unnormalized
coordinates, that sampler <strong class="purple">must</strong> not be used to sample from any
<code>VkImage</code> with a <code>VkImageView</code> of the type
<code>VK_IMAGE_VIEW_TYPE_3D</code>, <code>VK_IMAGE_VIEW_TYPE_CUBE</code>,
<code>VK_IMAGE_VIEW_TYPE_1D_ARRAY</code>, <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code> or
<code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code>, in any shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02703" href="#VUID-vkCmdTraceRaysIndirectKHR-None-02703"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02703</span><br>

If the <code>VkPipeline</code> object bound to the pipeline bind point used by
this command accesses a <code>VkSampler</code> object that uses unnormalized
coordinates, that sampler <strong class="purple">must</strong> not be used with any of the SPIR-V
<code>OpImageSample*</code> or <code>OpImageSparseSample*</code> instructions with
<code>ImplicitLod</code>, <code>Dref</code> or <code>Proj</code> in their name, in any shader
stage</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02704" href="#VUID-vkCmdTraceRaysIndirectKHR-None-02704"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02704</span><br>

If the <code>VkPipeline</code> object bound to the pipeline bind point used by
this command accesses a <code>VkSampler</code> object that uses unnormalized
coordinates, that sampler <strong class="purple">must</strong> not be used with any of the SPIR-V
<code>OpImageSample*</code> or <code>OpImageSparseSample*</code> instructions that includes a
LOD bias or any offset values, in any shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02705" href="#VUID-vkCmdTraceRaysIndirectKHR-None-02705"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02705</span><br>

If the <a href="chap37.html#features-robustBufferAccess">robust buffer access</a> feature is
not enabled, and if the <code>VkPipeline</code> object bound to the pipeline
bind point used by this command accesses a uniform buffer, it <strong class="purple">must</strong> not
access values outside of the range of the buffer as specified in the
descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-02706" href="#VUID-vkCmdTraceRaysIndirectKHR-None-02706"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-02706</span><br>

If the <a href="chap37.html#features-robustBufferAccess">robust buffer access</a> feature is
not enabled, and if the <code>VkPipeline</code> object bound to the pipeline
bind point used by this command accesses a storage buffer, it <strong class="purple">must</strong> not
access values outside of the range of the buffer as specified in the
descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-02707" href="#VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-02707"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-02707</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, any resource
accessed by the <code>VkPipeline</code> object bound to the pipeline bind point
used by this command <strong class="purple">must</strong> not be a protected resource</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-04115" href="#VUID-vkCmdTraceRaysIndirectKHR-None-04115"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-04115</span><br>

If a <a href="chap13.html#VkImageView">VkImageView</a> is accessed using <code>OpImageWrite</code> as a result
of this command, then the <code>Type</code> of the <code>Texel</code> operand of that
instruction <strong class="purple">must</strong> have at least as many components as the image view’s
format.</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-OpImageWrite-04469" href="#VUID-vkCmdTraceRaysIndirectKHR-OpImageWrite-04469"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-OpImageWrite-04469</span><br>

If a <a href="chap13.html#VkBufferView">VkBufferView</a> is accessed using <code>OpImageWrite</code> as a result
of this command, then the <code>Type</code> of the <code>Texel</code> operand of that
instruction <strong class="purple">must</strong> have at least as many components as the image view’s
format.</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-None-03429" href="#VUID-vkCmdTraceRaysIndirectKHR-None-03429"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-None-03429</span><br>

Any shader group handle referenced by this call <strong class="purple">must</strong> have been queried
from the currently bound ray tracing shader pipeline</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-maxPipelineRayRecursionDepth-03679" href="#VUID-vkCmdTraceRaysIndirectKHR-maxPipelineRayRecursionDepth-03679"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-maxPipelineRayRecursionDepth-03679</span><br>

This command <strong class="purple">must</strong> not cause a shader call instruction to be executed
from a shader invocation with a <a href="#ray-tracing-recursion-depth">recursion
depth</a> greater than the value of <code>maxPipelineRayRecursionDepth</code>
used to create the bound ray tracing pipeline</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pRayGenShaderBindingTable-03680" href="#VUID-vkCmdTraceRaysIndirectKHR-pRayGenShaderBindingTable-03680"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pRayGenShaderBindingTable-03680</span><br>

If the buffer from which <code>pRayGenShaderBindingTable-&gt;deviceAddress</code>
was queried is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pRayGenShaderBindingTable-03681" href="#VUID-vkCmdTraceRaysIndirectKHR-pRayGenShaderBindingTable-03681"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pRayGenShaderBindingTable-03681</span><br>

The buffer from which the <code>pRayGenShaderBindingTable-&gt;deviceAddress</code>
is queried <strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pRayGenShaderBindingTable-03682" href="#VUID-vkCmdTraceRaysIndirectKHR-pRayGenShaderBindingTable-03682"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pRayGenShaderBindingTable-03682</span><br>

<code>pRayGenShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupBaseAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-size-04023" href="#VUID-vkCmdTraceRaysIndirectKHR-size-04023"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-size-04023</span><br>

The <code>size</code> member of <code>pRayGenShaderBindingTable</code> <strong class="purple">must</strong> be equal
to its <code>stride</code> member</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-03683" href="#VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-03683"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-03683</span><br>

If the buffer from which <code>pMissShaderBindingTable-&gt;deviceAddress</code>
was queried is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-03684" href="#VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-03684"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-03684</span><br>

The buffer from which the <code>pMissShaderBindingTable-&gt;deviceAddress</code>
is queried <strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-03685" href="#VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-03685"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-03685</span><br>

<code>pMissShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupBaseAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-stride-03686" href="#VUID-vkCmdTraceRaysIndirectKHR-stride-03686"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-stride-03686</span><br>

The <code>stride</code> member of <code>pMissShaderBindingTable</code> <strong class="purple">must</strong> be a
multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupHandleAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-stride-04029" href="#VUID-vkCmdTraceRaysIndirectKHR-stride-04029"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-stride-04029</span><br>

The <code>stride</code> member of <code>pMissShaderBindingTable</code> <strong class="purple">must</strong> be less
than or equal to
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>maxShaderGroupStride</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03687" href="#VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03687"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03687</span><br>

If the buffer from which <code>pHitShaderBindingTable-&gt;deviceAddress</code> was
queried is non-sparse then it <strong class="purple">must</strong> be bound completely and contiguously
to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03688" href="#VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03688"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03688</span><br>

The buffer from which the <code>pHitShaderBindingTable-&gt;deviceAddress</code> is
queried <strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03689" href="#VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03689"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03689</span><br>

<code>pHitShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupBaseAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-stride-03690" href="#VUID-vkCmdTraceRaysIndirectKHR-stride-03690"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-stride-03690</span><br>

The <code>stride</code> member of <code>pHitShaderBindingTable</code> <strong class="purple">must</strong> be a
multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupHandleAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-stride-04035" href="#VUID-vkCmdTraceRaysIndirectKHR-stride-04035"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-stride-04035</span><br>

The <code>stride</code> member of <code>pHitShaderBindingTable</code> <strong class="purple">must</strong> be less
than or equal to
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>maxShaderGroupStride</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-03691" href="#VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-03691"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-03691</span><br>

If the buffer from which
<code>pCallableShaderBindingTable-&gt;deviceAddress</code> was queried is
non-sparse then it <strong class="purple">must</strong> be bound completely and contiguously to a
single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-03692" href="#VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-03692"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-03692</span><br>

The buffer from which the
<code>pCallableShaderBindingTable-&gt;deviceAddress</code> is queried <strong class="purple">must</strong> have
been created with the <code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code>
usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-03693" href="#VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-03693"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-03693</span><br>

<code>pCallableShaderBindingTable-&gt;deviceAddress</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupBaseAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-stride-03694" href="#VUID-vkCmdTraceRaysIndirectKHR-stride-03694"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-stride-03694</span><br>

The <code>stride</code> member of <code>pCallableShaderBindingTable</code> <strong class="purple">must</strong> be a
multiple of
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>shaderGroupHandleAlignment</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-stride-04041" href="#VUID-vkCmdTraceRaysIndirectKHR-stride-04041"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-stride-04041</span><br>

The <code>stride</code> member of <code>pCallableShaderBindingTable</code> <strong class="purple">must</strong> be
less than or equal to
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>maxShaderGroupStride</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-flags-03695" href="#VUID-vkCmdTraceRaysIndirectKHR-flags-03695"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-flags-03695</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_ANY_HIT_SHADERS_BIT_KHR</code>,
the <code>deviceAddress</code> member of <code>pHitShaderBindingTable</code> <strong class="purple">must</strong> not
be zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-flags-03696" href="#VUID-vkCmdTraceRaysIndirectKHR-flags-03696"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-flags-03696</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_CLOSEST_HIT_SHADERS_BIT_KHR</code>,
the <code>deviceAddress</code> member of <code>pHitShaderBindingTable</code> <strong class="purple">must</strong> not
be zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-flags-03697" href="#VUID-vkCmdTraceRaysIndirectKHR-flags-03697"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-flags-03697</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_INTERSECTION_SHADERS_BIT_KHR</code>,
the <code>deviceAddress</code> member of <code>pHitShaderBindingTable</code> <strong class="purple">must</strong> not
be zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-flags-03511" href="#VUID-vkCmdTraceRaysIndirectKHR-flags-03511"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-flags-03511</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_MISS_SHADERS_BIT_KHR</code>, the
shader group handle identified by <code>pMissShaderBindingTable</code> <strong class="purple">must</strong>
contain a valid miss shader</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-flags-03512" href="#VUID-vkCmdTraceRaysIndirectKHR-flags-03512"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-flags-03512</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_ANY_HIT_SHADERS_BIT_KHR</code>,
entries in <code>pHitShaderBindingTable</code> accessed as a result of this
command in order to execute an any-hit shader <strong class="purple">must</strong> not be set to zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-flags-03513" href="#VUID-vkCmdTraceRaysIndirectKHR-flags-03513"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-flags-03513</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_CLOSEST_HIT_SHADERS_BIT_KHR</code>,
entries in <code>pHitShaderBindingTable</code> accessed as a result of this
command in order to execute a closest hit shader <strong class="purple">must</strong> not be set to
zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-flags-03514" href="#VUID-vkCmdTraceRaysIndirectKHR-flags-03514"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-flags-03514</span><br>

If the currently bound ray tracing pipeline was created with <code>flags</code>
that included
<code>VK_PIPELINE_CREATE_RAY_TRACING_NO_NULL_INTERSECTION_SHADERS_BIT_KHR</code>,
entries in <code>pHitShaderBindingTable</code> accessed as a result of this
command in order to execute an intersection shader <strong class="purple">must</strong> not be set to
zero</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03720" href="#VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03720"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03720</span><br>

Any hit group entries in <code>pHitShaderBindingTable</code> accessed by this
call from a geometry with a <code>geometryType</code> of
<code>VK_GEOMETRY_TYPE_TRIANGLES_KHR</code> <strong class="purple">must</strong> have been created with
<code>VK_RAY_TRACING_SHADER_GROUP_TYPE_TRIANGLES_HIT_GROUP_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03721" href="#VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03721"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-03721</span><br>

Any hit group entries in <code>pHitShaderBindingTable</code> accessed by this
call from a geometry with a <code>geometryType</code> of
<code>VK_GEOMETRY_TYPE_AABBS_KHR</code> <strong class="purple">must</strong> have been created with
<code>VK_RAY_TRACING_SHADER_GROUP_TYPE_PROCEDURAL_HIT_GROUP_KHR</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03632" href="#VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03632"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03632</span><br>

If the buffer from which <code>indirectDeviceAddress</code> was queried is
non-sparse then it <strong class="purple">must</strong> be bound completely and contiguously to a
single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03633" href="#VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03633"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03633</span><br>

The buffer from which <code>indirectDeviceAddress</code> was queried <strong class="purple">must</strong> have
been created with the <code>VK_BUFFER_USAGE_INDIRECT_BUFFER_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03634" href="#VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03634"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03634</span><br>

<code>indirectDeviceAddress</code> <strong class="purple">must</strong> be a multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-03635" href="#VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-03635"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-03635</span><br>

<code>commandBuffer</code> <strong class="purple">must</strong> not be a protected command buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03636" href="#VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03636"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-indirectDeviceAddress-03636</span><br>

All device addresses between <code>indirectDeviceAddress</code> and
<span class="eq"><code>indirectDeviceAddress</code> + 
<code>sizeof</code>(<code>VkTraceRaysIndirectCommandKHR</code>) - 1</span> <strong class="purple">must</strong> be in the
buffer device address range of the same buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-rayTracingPipelineTraceRaysIndirect-03637" href="#VUID-vkCmdTraceRaysIndirectKHR-rayTracingPipelineTraceRaysIndirect-03637"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-rayTracingPipelineTraceRaysIndirect-03637</span><br>

the <a href="chap37.html#features-rayTracingPipelineTraceRaysIndirect"><code>VkPhysicalDeviceRayTracingPipelineFeaturesKHR</code>::<code>rayTracingPipelineTraceRaysIndirect</code></a>
feature <strong class="purple">must</strong> be enabled</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-parameter" href="#VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap7.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pRaygenShaderBindingTable-parameter" href="#VUID-vkCmdTraceRaysIndirectKHR-pRaygenShaderBindingTable-parameter"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pRaygenShaderBindingTable-parameter</span><br>
 <code>pRaygenShaderBindingTable</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-parameter" href="#VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-parameter"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pMissShaderBindingTable-parameter</span><br>
 <code>pMissShaderBindingTable</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-parameter" href="#VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-parameter"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pHitShaderBindingTable-parameter</span><br>
 <code>pHitShaderBindingTable</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-parameter" href="#VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-parameter"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-pCallableShaderBindingTable-parameter</span><br>
 <code>pCallableShaderBindingTable</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkStridedDeviceAddressRegionKHR">VkStridedDeviceAddressRegionKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-recording" href="#VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap7.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-cmdpool" href="#VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdTraceRaysIndirectKHR-renderpass" href="#VUID-vkCmdTraceRaysIndirectKHR-renderpass"></a> <span class="vuid">VUID-vkCmdTraceRaysIndirectKHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap7.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap9.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#synchronization-pipeline-stages-types">Pipeline Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compute</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkTraceRaysIndirectCommandKHR</code> structure is defined as:</p>
</div>
<div id="VkTraceRaysIndirectCommandKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_ray_tracing_pipeline</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkTraceRaysIndirectCommandKHR {
    uint32_t    width;
    uint32_t    height;
    uint32_t    depth;
} VkTraceRaysIndirectCommandKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>width</code> is the width of the ray trace query dimensions.</p>
</li>
<li>
<p><code>height</code> is height of the ray trace query dimensions.</p>
</li>
<li>
<p><code>depth</code> is depth of the ray trace query dimensions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The members of <code>VkTraceRaysIndirectCommandKHR</code> have the same meaning as
the similarly named parameters of <a href="#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommandKHR-width-03638" href="#VUID-VkTraceRaysIndirectCommandKHR-width-03638"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommandKHR-width-03638</span><br>

<code>width</code> <strong class="purple">must</strong> be less than or equal to
<span class="eq"><code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[0]
× <code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupSize</code>[0]</span></p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommandKHR-height-03639" href="#VUID-VkTraceRaysIndirectCommandKHR-height-03639"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommandKHR-height-03639</span><br>

<code>height</code> <strong class="purple">must</strong> be less than or equal to
<span class="eq"><code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[1]
× <code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupSize</code>[1]</span></p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommandKHR-depth-03640" href="#VUID-VkTraceRaysIndirectCommandKHR-depth-03640"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommandKHR-depth-03640</span><br>

<code>depth</code> <strong class="purple">must</strong> be less than or equal to
<span class="eq"><code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupCount</code>[2]
× <code>VkPhysicalDeviceLimits</code>::<code>maxComputeWorkGroupSize</code>[2]</span></p>
</li>
<li>
<p><a id="VUID-VkTraceRaysIndirectCommandKHR-width-03641" href="#VUID-VkTraceRaysIndirectCommandKHR-width-03641"></a> <span class="vuid">VUID-VkTraceRaysIndirectCommandKHR-width-03641</span><br>

<span class="eq"><code>width</code> × <code>height</code> × <code>depth</code></span> <strong class="purple">must</strong> be less
than or equal to
<code>VkPhysicalDeviceRayTracingPipelinePropertiesKHR</code>::<code>maxRayDispatchInvocationCount</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="shader-binding-table"><a class="anchor" href="#shader-binding-table"></a>34.3. Shader Binding Table</h3>
<div class="paragraph">
<p>A <em>shader binding table</em> is a resource which establishes the relationship
between the ray tracing pipeline and the acceleration structures that were
built for the ray tracing pipeline.
It indicates the shaders that operate on each geometry in an acceleration
structure.
In addition, it contains the resources accessed by each shader, including
indices of textures, buffer device addresses, and constants.
The application allocates and manages <em>shader binding tables</em> as
<a href="chap13.html#VkBuffer">VkBuffer</a> objects.</p>
</div>
<div class="paragraph">
<p>Each entry in the shader binding table consists of
<code>shaderGroupHandleSize</code> bytes of data as queried by
<a href="chap11.html#vkGetRayTracingShaderGroupHandlesKHR">vkGetRayTracingShaderGroupHandlesKHR</a> to refer to the shader that it
invokes.
The remainder of the data specified by the stride is application-visible
data that can be referenced by a <code>ShaderRecordBufferKHR</code> block in the
shader.</p>
</div>
<div class="paragraph">
<p>The shader binding tables to use in a ray tracing pipeline are passed to the
<a href="#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>, or <a href="#vkCmdTraceRaysIndirectKHR">vkCmdTraceRaysIndirectKHR</a> commands.
Shader binding tables are read-only in shaders that are executing on the ray
tracing pipeline.</p>
</div>
<div class="paragraph">
<p>Shader variables identified with the <code>ShaderRecordBufferKHR</code> storage
class are used to access the provided shader binding table.
Such variables <strong class="purple">must</strong> be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>typed as <code>OpTypeStruct</code>, or an array of this type,</p>
</li>
<li>
<p>identified with a <code>Block</code> decoration, and</p>
</li>
<li>
<p>laid out explicitly using the <code>Offset</code>, <code>ArrayStride</code>, and
<code>MatrixStride</code> decorations as specified in
<a href="chap16.html#interfaces-resources-layout">Offset and Stride Assignment</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>Offset</code> decoration for any member of a <code>Block</code>-decorated variable
in the <code>ShaderRecordBufferKHR</code> storage class <strong class="purple">must</strong> not cause the space
required for that variable to extend outside the range <span class="eq">[0,
<code>maxStorageBufferRange</code>)</span>.</p>
</div>
<div class="paragraph">
<p>Accesses to the shader binding table from ray tracing pipelines <strong class="purple">must</strong> be
<a href="chap8.html#synchronization-dependencies">synchronized</a> with the
<code>VK_PIPELINE_STAGE_RAY_TRACING_SHADER_BIT_KHR</code>
<a href="chap8.html#synchronization-pipeline-stages">pipeline stage</a> and an
<a href="chap8.html#synchronization-access-types">access type</a> of
<code>VK_ACCESS_SHADER_READ_BIT</code>.</p>
</div>
<div class="sect3">
<h4 id="shader-binding-table-indexing-rules"><a class="anchor" href="#shader-binding-table-indexing-rules"></a>34.3.1. Indexing Rules</h4>
<div class="paragraph">
<p>In order to execute the correct shaders and access the correct resources
during a ray tracing dispatch, the implementation <strong class="purple">must</strong> be able to locate
shader binding table entries at various stages of execution.
This is accomplished by defining a set of indexing rules that compute shader
binding table record positions relative to the buffer’s base address in
memory.
The application <strong class="purple">must</strong> organize the contents of the shader binding table’s
memory in a way that application of the indexing rules will lead to correct
records.</p>
</div>
<div class="sect4">
<h5 id="_ray_generation_shaders"><a class="anchor" href="#_ray_generation_shaders"></a>Ray Generation Shaders</h5>
<div class="paragraph">
<p>Only one ray generation shader is executed per ray tracing dispatch.</p>
</div>
<div class="paragraph">
<p>For <a href="#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>, the location of the ray generation shader is
specified by the <code>pRaygenShaderBindingTable-&gt;deviceAddress</code> parameter — there is no indexing.
All data accessed <strong class="purple">must</strong> be less than <code>pRaygenShaderBindingTable-&gt;size</code>
bytes from <code>deviceAddress</code>.
<code>pRaygenShaderBindingTable-&gt;stride</code> is unused, and <strong class="purple">must</strong> be equal to
<code>pRaygenShaderBindingTable-&gt;size</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="shader-binding-table-hit-shader-indexing"><a class="anchor" href="#shader-binding-table-hit-shader-indexing"></a>Hit Shaders</h5>
<div class="paragraph">
<p>The base for the computation of intersection, any-hit, and closest hit
shader locations is the <code>instanceShaderBindingTableRecordOffset</code> value
stored with each instance of a top-level acceleration structure
(<a href="chap33.html#VkAccelerationStructureInstanceKHR">VkAccelerationStructureInstanceKHR</a>).
This value determines the beginning of the shader binding table records for
a given instance.</p>
</div>
<div class="paragraph">
<p>In the following rule, <code>geometryIndex</code> refers to the
<a href="chap33.html#acceleration-structure-geometry-index">geometry index</a> of the intersected
geometry within the instance.</p>
</div>
<div class="paragraph">
<p>The <code>sbtRecordOffset</code> and <code>sbtRecordStride</code> values are passed in as
parameters to
<code>traceRayEXT</code>()
calls made in the shaders.
See Section 8.19 (Ray Tracing Functions) of the OpenGL Shading Language
Specification for more details.
In SPIR-V, these correspond to the <code>SBTOffset</code> and <code>SBTStride</code>
parameters to the
<code>OpTraceRayKHR</code>
instruction.</p>
</div>
<div class="paragraph">
<p>The result of this computation is then added to
<code>pHitShaderBindingTable-&gt;deviceAddress</code>, a device address passed to
<a href="#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>
.</p>
</div>
<div class="paragraph">
<p>For <a href="#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>, the complete rule to compute a hit shader
binding table record address in the <code>pHitShaderBindingTable</code> is:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>pHitShaderBindingTable-&gt;deviceAddress</code> + 
<code>pHitShaderBindingTable-&gt;stride</code> × (
<code>instanceShaderBindingTableRecordOffset</code> + 
<code>geometryIndex</code> × <code>sbtRecordStride</code> + 
<code>sbtRecordOffset</code> )</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>All data accessed <strong class="purple">must</strong> be less than <code>pHitShaderBindingTable-&gt;size</code>
bytes from the base address.</p>
</div>
</div>
<div class="sect4">
<h5 id="_miss_shaders"><a class="anchor" href="#_miss_shaders"></a>Miss Shaders</h5>
<div class="paragraph">
<p>A miss shader is executed whenever a ray query fails to find an intersection
for the given scene geometry.
Multiple miss shaders <strong class="purple">may</strong> be executed throughout a ray tracing dispatch.</p>
</div>
<div class="paragraph">
<p>The base for the computation of miss shader locations is
<code>pMissShaderBindingTable-&gt;deviceAddress</code>, a device address passed into
<a href="#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>
.</p>
</div>
<div class="paragraph">
<p>The <code>missIndex</code> value is passed in as a parameter to
<code>traceRayEXT</code>()
calls made in the shaders.
See Section 8.19 (Ray Tracing Functions) of the OpenGL Shading Language
Specification for more details.
In SPIR-V, this corresponds to the <code>MissIndex</code> parameter to the
<code>OpTraceRayKHR</code>
instruction.</p>
</div>
<div class="paragraph">
<p>For <a href="#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>, the complete rule to compute a miss shader
binding table record address in the <code>pMissShaderBindingTable</code> is:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>pMissShaderBindingTable-&gt;deviceAddress</code> + 
<code>pMissShaderBindingTable-&gt;stride</code> × <code>missIndex</code></span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>All data accessed <strong class="purple">must</strong> be less than <code>pMissShaderBindingTable-&gt;size</code>
bytes from the base address.</p>
</div>
</div>
<div class="sect4">
<h5 id="_callable_shaders"><a class="anchor" href="#_callable_shaders"></a>Callable Shaders</h5>
<div class="paragraph">
<p>A callable shader is executed when requested by a ray tracing shader.
Multiple callable shaders <strong class="purple">may</strong> be executed throughout a ray tracing
dispatch.</p>
</div>
<div class="paragraph">
<p>The base for the computation of callable shader locations is
<code>pCallableShaderBindingTable-&gt;deviceAddress</code>, a device address passed
into <a href="#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>
.</p>
</div>
<div class="paragraph">
<p>The <code>sbtRecordIndex</code> value is passed in as a parameter to
<code>executeCallableEXT</code>()
calls made in the shaders.
See Section 8.19 (Ray Tracing Functions) of the OpenGL Shading Language
Specification for more details.
In SPIR-V, this corresponds to the <code>SBTIndex</code> parameter to the
<code>OpExecuteCallableKHR</code>
instruction.</p>
</div>
<div class="paragraph">
<p>For <a href="#vkCmdTraceRaysKHR">vkCmdTraceRaysKHR</a>, the complete rule to compute a callable shader
binding table record address in the <code>pCallableShaderBindingTable</code> is:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>pCallableShaderBindingTable-&gt;deviceAddress</code> + 
<code>pCallableShaderBindingTable-&gt;stride</code> ×
<code>sbtRecordIndex</code></span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>All data accessed <strong class="purple">must</strong> be less than <code>pCallableShaderBindingTable-&gt;size</code>
bytes from the base address.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ray-tracing-pipeline-stack"><a class="anchor" href="#ray-tracing-pipeline-stack"></a>34.4. Ray Tracing Pipeline Stack</h3>
<div class="paragraph">
<p>Ray tracing pipelines have a potentially large set of shaders which <strong class="purple">may</strong> be
invoked in various call chain combinations to perform ray tracing.
To store parameters for a given shader execution, an implementation <strong class="purple">may</strong> use
a stack of data in memory.
This stack <strong class="purple">must</strong> be sized to the sum of the stack sizes of all shaders in
any call chain executed by the application.</p>
</div>
<div class="paragraph">
<p>If the stack size is not set explicitly, the stack size for a pipeline is:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">rayGenStackMax +  min(1,
<code>maxPipelineRayRecursionDepth</code>) ×
max(closestHitStackMax, missStackMax, intersectionStackMax
+  anyHitStackMax) +  max(0,
<code>maxPipelineRayRecursionDepth</code>-1) ×
max(closestHitStackMax, missStackMax) +  2 ×
callableStackMax</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>where <span class="eq">rayGenStackMax</span>, <span class="eq">closestHitStackMax</span>, <span class="eq">missStackMax</span>,
<span class="eq">anyHitStackMax</span>, <span class="eq">intersectionStackMax</span>, and <span class="eq">callableStackMax</span>
are the maximum stack values queried by the respective shader stages for any
shaders in any shader groups defined by the pipeline.</p>
</div>
<div class="paragraph">
<p>This stack size is potentially significant, so an application <strong class="purple">may</strong> want to
provide a more optimal stack size after pipeline compilation.
The value that the application provides is the maximum value of the sum of
all shaders in a call chain across all possible call chains, taking into
account any application specific knowledge about the properties of the call
chains.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>For example, if an implementation has two types of closest hit and miss
shaders that it can use but that the first level of rays will only use the
first kind (possibly reflection) and the second level will only use the
second kind (occlusion or shadow ray, for example) then the application can
compute the stack size by something similar to:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>rayGenStack</code> +  max(<code>closestHit1Stack</code>,
<code>miss1Stack</code>) +  max(<code>closestHit2Stack</code>,
<code>miss2Stack</code>)</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This is guaranteed to be no larger than the default stack size computation
which assumes that both call levels may be the larger of the two.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div></div>
<div id="footer" style="max-width: 100%;">
<div id="footer-text">
Version 1.1.169<br>
Last updated 2021-02-01 22:51:50 -0800
</div>
</div>


</body>
</html>