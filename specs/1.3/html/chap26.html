<!DOCTYPE html><html lang="en"><head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="author" content="The Khronos® Vulkan Working Group">
<title>Vulkan® 1.3.209 - A Specification</title>
<link rel="stylesheet" href="style0.css" type="text/css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="style1.css" type="text/css">
<link rel="stylesheet" href="style2.css" type="text/css">

<!-- dragged in by font-awesome css included by asciidoctor, but preloaded in this extension for convenience -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0" as="font" type="font/woff2" crossorigin="">

<!-- Note: Chrome needs crossorigin="" even for same-origin fonts -->
<link rel="preload" href="../katex/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Typewriter-Regular.woff2" as="font" type="font/woff2" crossorigin=""><link rel="stylesheet" href="../katex/katex.min.css">
<!--ChunkedSearchJSMarker-->
<link href="chunked.css?4" rel="stylesheet">
<script>var searchindexurl = 'search.index.js?4' + (document.title.replace(/[^0-9.]/g, ''));</script>
<script src="chunked.js?4"></script>
<link rel="stylesheet" href="style3.css" type="text/css">
<script>
    function hideElement(e){
        e.setAttribute("hidden", "");
        e.classList.add("hidden");
    }

    function unhideElement(e){
        e.classList.remove("hidden");
        e.removeAttribute("hidden");
    }

    function hideLoadableContent(){
        unhideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) hideElement(loadable);
    }

    function unhideLoadableContent(){
        hideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) unhideElement(loadable);
    }

    window.addEventListener("load", unhideLoadableContent);
</script>
<link rel="stylesheet" href="asciidoctor-chunker.css" type="text/css"></head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Vulkan<sup>®</sup> 1.3.209 - A Specification </h1>
<div class="details">
<span id="author" class="author">The Khronos<sup>®</sup> Vulkan Working Group</span><br>
<span id="revnumber">version 1.3.209,</span>
<span id="revdate">2022-03-23 04:48:57Z</span>
<br><span id="revremark">from git branch: github-main commit: fff65570f345288361958ff530e284de27b1a657</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="index.html">Titlepage</a></li><li><a href="chap1.html">1. Preamble</a></li>
<li><a href="chap2.html">2. Introduction</a>
<ul class="sectlevel2">
<li><a href="chap2.html#introduction-conventions">2.1. Document Conventions</a></li>
</ul>
</li>
<li><a href="chap3.html">3. Fundamentals</a>
<ul class="sectlevel2">
<li><a href="chap3.html#fundamentals-host-environment">3.1. Host and Device Environment</a></li>
<li><a href="chap3.html#fundamentals-execmodel">3.2. Execution Model</a></li>
<li><a href="chap3.html#fundamentals-objectmodel-overview">3.3. Object Model</a></li>
<li><a href="chap3.html#fundamentals-abi">3.4. Application Binary Interface</a></li>
<li><a href="chap3.html#fundamentals-commandsyntax">3.5. Command Syntax and Duration</a></li>
<li><a href="chap3.html#fundamentals-threadingbehavior">3.6. Threading Behavior</a></li>
<li><a href="chap3.html#fundamentals-validusage">3.7. Valid Usage</a></li>
<li><a href="chap3.html#fundamentals-returncodes">3.8. <code>VkResult</code> Return Codes</a></li>
<li><a href="chap3.html#fundamentals-numerics">3.9. Numeric Representation and Computation</a></li>
<li><a href="chap3.html#fundamentals-fixedconv">3.10. Fixed-Point Data Conversions</a></li>
<li><a href="chap3.html#fundamentals-common-objects">3.11. Common Object Types</a></li>
<li><a href="chap3.html#fundamentals-api-name-aliases">3.12. API Name Aliases</a></li>
</ul>
</li>
<li><a href="chap4.html">4. Initialization</a>
<ul class="sectlevel2">
<li><a href="chap4.html#initialization-functionpointers">4.1. Command Function Pointers</a></li>
<li><a href="chap4.html#initialization-instances">4.2. Instances</a></li>
</ul>
</li>
<li><a href="chap5.html">5. Devices and Queues</a>
<ul class="sectlevel2">
<li><a href="chap5.html#devsandqueues-physical-device-enumeration">5.1. Physical Devices</a></li>
<li><a href="chap5.html#devsandqueues-devices">5.2. Devices</a></li>
<li><a href="chap5.html#devsandqueues-queues">5.3. Queues</a></li>
</ul>
</li>
<li><a href="chap6.html">6. Command Buffers</a>
<ul class="sectlevel2">
<li><a href="chap6.html#commandbuffers-lifecycle">6.1. Command Buffer Lifecycle</a></li>
<li><a href="chap6.html#commandbuffers-pools">6.2. Command Pools</a></li>
<li><a href="chap6.html#commandbuffer-allocation">6.3. Command Buffer Allocation and Management</a></li>
<li><a href="chap6.html#commandbuffers-recording">6.4. Command Buffer Recording</a></li>
<li><a href="chap6.html#commandbuffers-submission">6.5. Command Buffer Submission</a></li>
<li><a href="chap6.html#commandbuffers-submission-progress">6.6. Queue Forward Progress</a></li>
<li><a href="chap6.html#commandbuffers-secondary">6.7. Secondary Command Buffer Execution</a></li>
<li><a href="chap6.html#commandbuffers-devicemask">6.8. Command Buffer Device Mask</a></li>
</ul>
</li>
<li><a href="chap7.html">7. Synchronization and Cache Control</a>
<ul class="sectlevel2">
<li><a href="chap7.html#synchronization-dependencies">7.1. Execution and Memory Dependencies</a></li>
<li><a href="chap7.html#synchronization-implicit">7.2. Implicit Synchronization Guarantees</a></li>
<li><a href="chap7.html#synchronization-fences">7.3. Fences</a></li>
<li><a href="chap7.html#synchronization-semaphores">7.4. Semaphores</a></li>
<li><a href="chap7.html#synchronization-events">7.5. Events</a></li>
<li><a href="chap7.html#synchronization-pipeline-barriers">7.6. Pipeline Barriers</a></li>
<li><a href="chap7.html#synchronization-memory-barriers">7.7. Memory Barriers</a></li>
<li><a href="chap7.html#synchronization-wait-idle">7.8. Wait Idle Operations</a></li>
<li><a href="chap7.html#synchronization-submission-host-writes">7.9. Host Write Ordering Guarantees</a></li>
<li><a href="chap7.html#synchronization-device-group">7.10. Synchronization and Multiple Physical Devices</a></li>
</ul>
</li>
<li><a href="chap8.html">8. Render Pass</a>
<ul class="sectlevel2">
<li><a href="chap8.html#renderpass-creation">8.1. Render Pass Creation</a></li>
<li><a href="chap8.html#renderpass-compatibility">8.2. Render Pass Compatibility</a></li>
<li><a href="chap8.html#_framebuffers">8.3. Framebuffers</a></li>
<li><a href="chap8.html#renderpass-commands">8.4. Render Pass Commands</a></li>
</ul>
</li>
<li><a href="chap9.html">9. Shaders</a>
<ul class="sectlevel2">
<li><a href="chap9.html#shader-modules">9.1. Shader Modules</a></li>
<li><a href="chap9.html#shaders-execution">9.2. Shader Execution</a></li>
<li><a href="chap9.html#shaders-execution-memory-ordering">9.3. Shader Memory Access Ordering</a></li>
<li><a href="chap9.html#shaders-inputs">9.4. Shader Inputs and Outputs</a></li>
<li><a href="chap9.html#shaders-vertex">9.5. Vertex Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-control">9.6. Tessellation Control Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-evaluation">9.7. Tessellation Evaluation Shaders</a></li>
<li><a href="chap9.html#shaders-geometry">9.8. Geometry Shaders</a></li>
<li><a href="chap9.html#shaders-fragment">9.9. Fragment Shaders</a></li>
<li><a href="chap9.html#shaders-compute">9.10. Compute Shaders</a></li>
<li><a href="chap9.html#shaders-interpolation-decorations">9.11. Interpolation Decorations</a></li>
<li><a href="chap9.html#shaders-staticuse">9.12. Static Use</a></li>
<li><a href="chap9.html#shaders-scope">9.13. Scope</a></li>
<li><a href="chap9.html#shaders-group-operations">9.14. Group Operations</a></li>
<li><a href="chap9.html#shaders-quad-operations">9.15. Quad Group Operations</a></li>
<li><a href="chap9.html#shaders-derivative-operations">9.16. Derivative Operations</a></li>
<li><a href="chap9.html#shaders-helper-invocations">9.17. Helper Invocations</a></li>
</ul>
</li>
<li><a href="chap10.html">10. Pipelines</a>
<ul class="sectlevel2">
<li><a href="chap10.html#pipelines-compute">10.1. Compute Pipelines</a></li>
<li><a href="chap10.html#pipelines-graphics">10.2. Graphics Pipelines</a></li>
<li><a href="chap10.html#pipelines-destruction">10.3. Pipeline Destruction</a></li>
<li><a href="chap10.html#pipelines-multiple">10.4. Multiple Pipeline Creation</a></li>
<li><a href="chap10.html#pipelines-pipeline-derivatives">10.5. Pipeline Derivatives</a></li>
<li><a href="chap10.html#pipelines-cache">10.6. Pipeline Cache</a></li>
<li><a href="chap10.html#pipelines-specialization-constants">10.7. Specialization Constants</a></li>
<li><a href="chap10.html#pipelines-binding">10.8. Pipeline Binding</a></li>
<li><a href="chap10.html#pipelines-dynamic-state">10.9. Dynamic State</a></li>
<li><a href="chap10.html#pipelines-creation-feedback">10.10. Pipeline Creation Feedback</a></li>
</ul>
</li>
<li><a href="chap11.html">11. Memory Allocation</a>
<ul class="sectlevel2">
<li><a href="chap11.html#memory-host">11.1. Host Memory</a></li>
<li><a href="chap11.html#memory-device">11.2. Device Memory</a></li>
</ul>
</li>
<li><a href="chap12.html">12. Resource Creation</a>
<ul class="sectlevel2">
<li><a href="chap12.html#resources-buffers">12.1. Buffers</a></li>
<li><a href="chap12.html#resources-buffer-views">12.2. Buffer Views</a></li>
<li><a href="chap12.html#resources-images">12.3. Images</a></li>
<li><a href="chap12.html#resources-image-layouts">12.4. Image Layouts</a></li>
<li><a href="chap12.html#resources-image-views">12.5. Image Views</a></li>
<li><a href="chap12.html#resources-association">12.6. Resource Memory Association</a></li>
<li><a href="chap12.html#resources-sharing">12.7. Resource Sharing Mode</a></li>
<li><a href="chap12.html#resources-memory-aliasing">12.8. Memory Aliasing</a></li>
</ul>
</li>
<li><a href="chap13.html">13. Samplers</a>
<ul class="sectlevel2">
<li><a href="chap13.html#samplers-YCbCr-conversion">13.1. Sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></li>
</ul>
</li>
<li><a href="chap14.html">14. Resource Descriptors</a>
<ul class="sectlevel2">
<li><a href="chap14.html#descriptorsets-types">14.1. Descriptor Types</a></li>
<li><a href="chap14.html#descriptorsets-sets">14.2. Descriptor Sets</a></li>
<li><a href="chap14.html#descriptorsets-physical-storage-buffer">14.3. Physical Storage Buffer Access</a></li>
</ul>
</li>
<li><a href="chap15.html">15. Shader Interfaces</a>
<ul class="sectlevel2">
<li><a href="chap15.html#interfaces-iointerfaces">15.1. Shader Input and Output Interfaces</a></li>
<li><a href="chap15.html#interfaces-vertexinput">15.2. Vertex Input Interface</a></li>
<li><a href="chap15.html#interfaces-fragmentoutput">15.3. Fragment Output Interface</a></li>
<li><a href="chap15.html#interfaces-inputattachment">15.4. Fragment Input Attachment Interface</a></li>
<li><a href="chap15.html#interfaces-resources">15.5. Shader Resource Interface</a></li>
<li><a href="chap15.html#interfaces-builtin-variables">15.6. Built-In Variables</a></li>
</ul>
</li>
<li><a href="chap16.html">16. Image Operations</a>
<ul class="sectlevel2">
<li><a href="chap16.html#_image_operations_overview">16.1. Image Operations Overview</a></li>
<li><a href="chap16.html#_conversion_formulas">16.2. Conversion Formulas</a></li>
<li><a href="chap16.html#_texel_input_operations">16.3. Texel Input Operations</a></li>
<li><a href="chap16.html#_texel_output_operations">16.4. Texel Output Operations</a></li>
<li><a href="chap16.html#textures-normalized-operations">16.5. Normalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#_unnormalized_texel_coordinate_operations">16.6. Unnormalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-integer-coordinate-operations">16.7. Integer Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-sample-operations">16.8. Image Sample Operations</a></li>
<li><a href="chap16.html#textures-instructions">16.9. Image Operation Steps</a></li>
<li><a href="chap16.html#textures-queries">16.10. Image Query Instructions</a></li>
</ul>
</li>
<li><a href="chap17.html">17. Queries</a>
<ul class="sectlevel2">
<li><a href="chap17.html#queries-pools">17.1. Query Pools</a></li>
<li><a href="chap17.html#queries-operation">17.2. Query Operation</a></li>
<li><a href="chap17.html#queries-occlusion">17.3. Occlusion Queries</a></li>
<li><a href="chap17.html#queries-pipestats">17.4. Pipeline Statistics Queries</a></li>
<li><a href="chap17.html#queries-timestamps">17.5. Timestamp Queries</a></li>
</ul>
</li>
<li><a href="chap18.html">18. Clear Commands</a>
<ul class="sectlevel2">
<li><a href="chap18.html#clears-outside">18.1. Clearing Images Outside A Render Pass Instance</a></li>
<li><a href="chap18.html#clears-inside">18.2. Clearing Images Inside A Render Pass Instance</a></li>
<li><a href="chap18.html#clears-values">18.3. Clear Values</a></li>
<li><a href="chap18.html#clears-filling-buffers">18.4. Filling Buffers</a></li>
<li><a href="chap18.html#clears-updating-buffers">18.5. Updating Buffers</a></li>
</ul>
</li>
<li><a href="chap19.html">19. Copy Commands</a>
<ul class="sectlevel2">
<li><a href="chap19.html#copies-buffers">19.1. Copying Data Between Buffers</a></li>
<li><a href="chap19.html#copies-images">19.2. Copying Data Between Images</a></li>
<li><a href="chap19.html#copies-buffers-images">19.3. Copying Data Between Buffers and Images</a></li>
<li><a href="chap19.html#copies-imagescaling">19.4. Image Copies with Scaling</a></li>
<li><a href="chap19.html#copies-resolve">19.5. Resolving Multisample Images</a></li>
</ul>
</li>
<li><a href="chap20.html">20. Drawing Commands</a>
<ul class="sectlevel2">
<li><a href="chap20.html#drawing-primitive-topologies">20.1. Primitive Topologies</a></li>
<li><a href="chap20.html#drawing-primitive-order">20.2. Primitive Order</a></li>
<li><a href="chap20.html#drawing-primitive-shading">20.3. Programmable Primitive Shading</a></li>
</ul>
</li>
<li><a href="chap21.html">21. Fixed-Function Vertex Processing</a>
<ul class="sectlevel2">
<li><a href="chap21.html#fxvertex-attrib">21.1. Vertex Attributes</a></li>
<li><a href="chap21.html#fxvertex-input">21.2. Vertex Input Description</a></li>
<li><a href="chap21.html#fxvertex-input-address-calculation">21.3. Vertex Input Address Calculation</a></li>
</ul>
</li>
<li><a href="chap22.html">22. Tessellation</a>
<ul class="sectlevel2">
<li><a href="chap22.html#_tessellator">22.1. Tessellator</a></li>
<li><a href="chap22.html#_tessellator_patch_discard">22.2. Tessellator Patch Discard</a></li>
<li><a href="chap22.html#tessellation-tessellator-spacing">22.3. Tessellator Spacing</a></li>
<li><a href="chap22.html#tessellation-primitive-order">22.4. Tessellation Primitive Ordering</a></li>
<li><a href="chap22.html#tessellation-vertex-winding-order">22.5. Tessellator Vertex Winding Order</a></li>
<li><a href="chap22.html#tessellation-triangle-tessellation">22.6. Triangle Tessellation</a></li>
<li><a href="chap22.html#tessellation-quad-tessellation">22.7. Quad Tessellation</a></li>
<li><a href="chap22.html#tessellation-isoline-tessellation">22.8. Isoline Tessellation</a></li>
<li><a href="chap22.html#tessellation-point-mode">22.9. Tessellation Point Mode</a></li>
<li><a href="chap22.html#_tessellation_pipeline_state">22.10. Tessellation Pipeline State</a></li>
</ul>
</li>
<li><a href="chap23.html">23. Geometry Shading</a>
<ul class="sectlevel2">
<li><a href="chap23.html#geometry-input">23.1. Geometry Shader Input Primitives</a></li>
<li><a href="chap23.html#geometry-output">23.2. Geometry Shader Output Primitives</a></li>
<li><a href="chap23.html#geometry-invocations">23.3. Multiple Invocations of Geometry Shaders</a></li>
<li><a href="chap23.html#geometry-ordering">23.4. Geometry Shader Primitive Ordering</a></li>
</ul>
</li>
<li><a href="chap24.html">24. Fixed-Function Vertex Post-Processing</a>
<ul class="sectlevel2">
<li><a href="chap24.html#vertexpostproc-flatshading">24.1. Flat Shading</a></li>
<li><a href="chap24.html#vertexpostproc-clipping">24.2. Primitive Clipping</a></li>
<li><a href="chap24.html#vertexpostproc-clipping-shader-outputs">24.3. Clipping Shader Outputs</a></li>
<li><a href="chap24.html#vertexpostproc-coord-transform">24.4. Coordinate Transformations</a></li>
<li><a href="chap24.html#vertexpostproc-viewport">24.5. Controlling the Viewport</a></li>
</ul>
</li>
<li><a href="chap25.html">25. Rasterization</a>
<ul class="sectlevel2">
<li><a href="chap25.html#primsrast-discard">25.1. Discarding Primitives Before Rasterization</a></li>
<li><a href="chap25.html#primsrast-order">25.2. Rasterization Order</a></li>
<li><a href="chap25.html#primsrast-multisampling">25.3. Multisampling</a></li>
<li><a href="chap25.html#primsrast-sampleshading">25.4. Sample Shading</a></li>
<li><a href="chap25.html#primsrast-points">25.5. Points</a></li>
<li><a href="chap25.html#primsrast-lines">25.6. Line Segments</a></li>
<li><a href="chap25.html#primsrast-polygons">25.7. Polygons</a></li>
</ul>
</li>
<li class="current"><a href="chap26.html">26. Fragment Operations</a>
<ul class="sectlevel2">
<li class="current"><a href="chap26.html#fragops-scissor">26.1. Scissor Test</a></li>
<li class="current"><a href="chap26.html#fragops-samplemask">26.2. Sample Mask Test</a></li>
<li class="current"><a href="chap26.html#fragops-shader">26.3. Fragment Shading</a></li>
<li class="current"><a href="chap26.html#fragops-covg">26.4. Multisample Coverage</a></li>
<li class="current"><a href="chap26.html#fragops-ds-state">26.5. Depth and Stencil Operations</a></li>
<li class="current"><a href="chap26.html#fragops-dbt">26.6. Depth Bounds Test</a></li>
<li class="current"><a href="chap26.html#fragops-stencil">26.7. Stencil Test</a></li>
<li class="current"><a href="chap26.html#fragops-depth">26.8. Depth Test</a></li>
<li class="current"><a href="chap26.html#fragops-samplecount">26.9. Sample Counting</a></li>
<li class="current"><a href="chap26.html#fragops-coverage-reduction">26.10. Coverage Reduction</a></li>
</ul>
</li>
<li><a href="chap27.html">27. The Framebuffer</a>
<ul class="sectlevel2">
<li><a href="chap27.html#framebuffer-blending">27.1. Blending</a></li>
<li><a href="chap27.html#framebuffer-logicop">27.2. Logical Operations</a></li>
<li><a href="chap27.html#framebuffer-color-write-mask">27.3. Color Write Mask</a></li>
</ul>
</li>
<li><a href="chap28.html">28. Dispatching Commands</a></li>
<li><a href="chap29.html">29. Sparse Resources</a>
<ul class="sectlevel2">
<li><a href="chap29.html#sparsememory-sparseresourcefeatures">29.1. Sparse Resource Features</a></li>
<li><a href="chap29.html#sparsememory-fully-resident">29.2. Sparse Buffers and Fully-Resident Images</a></li>
<li><a href="chap29.html#sparsememory-partially-resident-buffers">29.3. Sparse Partially-Resident Buffers</a></li>
<li><a href="chap29.html#sparsememory-partially-resident-images">29.4. Sparse Partially-Resident Images</a></li>
<li><a href="chap29.html#sparsememory-sparse-memory-aliasing">29.5. Sparse Memory Aliasing</a></li>
<li><a href="chap29.html#_sparse_resource_implementation_guidelines_informative">29.6. Sparse Resource Implementation Guidelines (Informative)</a></li>
<li><a href="chap29.html#sparsememory-resourceapi">29.7. Sparse Resource API</a></li>
</ul>
</li>
<li><a href="chap30.html">30. Private Data</a></li>
<li><a href="chap31.html">31. Extending Vulkan</a>
<ul class="sectlevel2">
<li><a href="chap31.html#extendingvulkan-instanceanddevicefunctionality">31.1. Instance and Device Functionality</a></li>
<li><a href="chap31.html#extendingvulkan-coreversions">31.2. Core Versions</a></li>
<li><a href="chap31.html#extendingvulkan-layers">31.3. Layers</a></li>
<li><a href="chap31.html#extendingvulkan-extensions">31.4. Extensions</a></li>
<li><a href="chap31.html#extendingvulkan-extensions-extensiondependencies">31.5. Extension Dependencies</a></li>
<li><a href="chap31.html#_compatibility_guarantees_informative">31.6. Compatibility Guarantees (Informative)</a></li>
</ul>
</li>
<li><a href="chap32.html">32. Features</a>
<ul class="sectlevel2">
<li><a href="chap32.html#features-requirements">32.1. Feature Requirements</a></li>
<li><a href="chap32.html#profile-features">32.2. Profile Features</a></li>
</ul>
</li>
<li><a href="chap33.html">33. Limits</a>
<ul class="sectlevel2">
<li><a href="chap33.html#limits-minmax">33.1. Limit Requirements</a></li>
<li><a href="chap33.html#profile-limits">33.2. Profile Limits</a></li>
</ul>
</li>
<li><a href="chap34.html">34. Formats</a>
<ul class="sectlevel2">
<li><a href="chap34.html#formats-definition">34.1. Format Definition</a></li>
<li><a href="chap34.html#formats-properties">34.2. Format Properties</a></li>
<li><a href="chap34.html#features-required-format-support">34.3. Required Format Support</a></li>
</ul>
</li>
<li><a href="chap35.html">35. Additional Capabilities</a>
<ul class="sectlevel2">
<li><a href="chap35.html#capabilities-image">35.1. Additional Image Capabilities</a></li>
<li><a href="chap35.html#capabilities-buffer">35.2. Additional Buffer Capabilities</a></li>
<li><a href="chap35.html#capabilities-semaphore">35.3. Optional Semaphore Capabilities</a></li>
<li><a href="chap35.html#capabilities-fence">35.4. Optional Fence Capabilities</a></li>
</ul>
</li>
<li><a href="chap36.html">36. Debugging</a>
<ul class="sectlevel2">
<li><a href="chap36.html#debugging-tooling-info">36.1. Active Tooling Information</a></li>
</ul>
</li>
<li><a href="chap37.html">Appendix A: Vulkan Environment for SPIR-V</a>
<ul class="sectlevel2">
<li><a href="chap37.html#_versions_and_formats">Versions and Formats</a></li>
<li><a href="chap37.html#spirvenv-capabilities">Capabilities</a></li>
<li><a href="chap37.html#spirvenv-module-validation">Validation Rules within a Module</a></li>
<li><a href="chap37.html#spirvenv-precision-operation">Precision and Operation of SPIR-V Instructions</a></li>
<li><a href="chap37.html#spirvenv-image-signedness">Signedness of SPIR-V Image Accesses</a></li>
<li><a href="chap37.html#spirvenv-format-type-matching">Image Format and Type Matching</a></li>
<li><a href="chap37.html#spirvenv-image-formats">Compatibility Between SPIR-V Image Formats And Vulkan Formats</a></li>
</ul>
</li>
<li><a href="chap38.html">Appendix B: Memory Model</a>
<ul class="sectlevel2">
<li><a href="chap38.html#memory-model-agent">Agent</a></li>
<li><a href="chap38.html#memory-model-memory-location">Memory Location</a></li>
<li><a href="chap38.html#memory-model-allocation">Allocation</a></li>
<li><a href="chap38.html#memory-model-memory-operation">Memory Operation</a></li>
<li><a href="chap38.html#memory-model-references">Reference</a></li>
<li><a href="chap38.html#memory-model-program-order">Program-Order</a></li>
<li><a href="chap38.html#memory-model-scope">Scope</a></li>
<li><a href="chap38.html#memory-model-atomic-operation">Atomic Operation</a></li>
<li><a href="chap38.html#memory-model-scoped-modification-order">Scoped Modification Order</a></li>
<li><a href="chap38.html#memory-model-memory-semantics">Memory Semantics</a></li>
<li><a href="chap38.html#memory-model-release-sequence">Release Sequence</a></li>
<li><a href="chap38.html#memory-model-synchronizes-with">Synchronizes-With</a></li>
<li><a href="chap38.html#memory-model-system-synchronizes-with">System-Synchronizes-With</a></li>
<li><a href="chap38.html#memory-model-non-private">Private vs. Non-Private</a></li>
<li><a href="chap38.html#memory-model-inter-thread-happens-before">Inter-Thread-Happens-Before</a></li>
<li><a href="chap38.html#memory-model-happens-before">Happens-Before</a></li>
<li><a href="chap38.html#memory-model-availability-visibility">Availability and Visibility</a></li>
<li><a href="chap38.html#memory-model-vulkan-availability-visibility">Availability, Visibility, and Domain Operations</a></li>
<li><a href="chap38.html#memory-model-availability-visibility-semantics">Availability and Visibility Semantics</a></li>
<li><a href="chap38.html#memory-model-instruction-av-vis">Per-Instruction Availability and Visibility Semantics</a></li>
<li><a href="chap38.html#memory-model-location-ordered">Location-Ordered</a></li>
<li><a href="chap38.html#memory-model-access-data-race">Data Race</a></li>
<li><a href="chap38.html#memory-model-visible-to">Visible-To</a></li>
<li><a href="chap38.html#memory-model-acyclicity">Acyclicity</a></li>
<li><a href="chap38.html#memory-model-shader-io">Shader I/O</a></li>
<li><a href="chap38.html#memory-model-deallocation">Deallocation</a></li>
<li><a href="chap38.html#memory-model-informative-descriptions">Descriptions (Informative)</a></li>
<li><a href="chap38.html#memory-model-tessellation-output-ordering">Tessellation Output Ordering</a></li>
</ul>
</li>
<li><a href="chap39.html">Appendix C: Compressed Image Formats</a>
<ul class="sectlevel2">
<li><a href="chap39.html#appendix-compressedtex-bc">Block-Compressed Image Formats</a></li>
<li><a href="chap39.html#appendix-compressedtex-etc2">ETC Compressed Image Formats</a></li>
<li><a href="chap39.html#appendix-compressedtex-astc">ASTC Compressed Image Formats</a></li>
</ul>
</li>
<li><a href="chap40.html">Appendix D: Core Revisions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap40.html#versions-1.3">Version 1.3</a></li>
<li><a href="chap40.html#versions-1.2">Version 1.2</a></li>
<li><a href="chap40.html#versions-1.1">Version 1.1</a></li>
<li><a href="chap40.html#versions-1.0">Version 1.0</a></li>
</ul>
</li>
<li><a href="chap41.html">Appendix E: Layers &amp; Extensions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap41.html#extension-appendices-list">List of Extensions</a></li>
</ul>
</li>
<li><a href="chap42.html">Appendix F: Vulkan Roadmap Milestones</a>
<ul class="sectlevel2">
<li><a href="chap42.html#roadmap-2022">Roadmap 2022</a></li>
</ul>
</li>
<li><a href="chap43.html">Appendix G: API Boilerplate</a>
<ul class="sectlevel2">
<li><a href="chap43.html#boilerplate-headers">Vulkan Header Files</a></li>
<li><a href="chap43.html#boilerplate-wsi-header">Window System-Specific Header Control (Informative)</a></li>
<li><a href="chap43.html#boilerplate-provisional-header">Provisional Extension Header Control (Informative)</a></li>
</ul>
</li>
<li><a href="chap44.html">Appendix H: Invariance</a>
<ul class="sectlevel2">
<li><a href="chap44.html#_repeatability">Repeatability</a></li>
<li><a href="chap44.html#_multi_pass_algorithms">Multi-pass Algorithms</a></li>
<li><a href="chap44.html#_invariance_rules">Invariance Rules</a></li>
<li><a href="chap44.html#_tessellation_invariance">Tessellation Invariance</a></li>
</ul>
</li>
<li><a href="chap45.html">Appendix I: Lexicon</a>
<ul class="sectlevel2">
<li><a href="chap45.html#glossary">Glossary</a></li>
<li><a href="chap45.html#lexicon-common-abbreviations">Common Abbreviations</a></li>
<li><a href="chap45.html#lexicon-prefixes">Prefixes</a></li>
</ul>
</li>
<li><a href="chap46.html">Appendix J: Credits (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap46.html#_working_group_contributors_to_vulkan">Working Group Contributors to Vulkan</a></li>
<li><a href="chap46.html#_other_credits">Other Credits</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="loading_msg" class="hidden" hidden=""><p>Loading… please wait.</p></div>
<!--ChunkedSearchboxMarker-->
<div class="searchbox"><label for="searchbox">Search: </label><input id="searchbox" type="text" disabled="disabled" value="Loading Search Data"><div id="resultsdiv"><ol id="results"></ol></div></div>
<div id="content" class="loadable"><div class="sect1">
<h2 id="fragops"><a class="anchor" href="chap26.html"></a>26. Fragment Operations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Fragments produced by rasterization go through a number of operations to
determine whether or how values produced by fragment shading are written to
the framebuffer.</p>
</div>
<div class="paragraph">
<p>The following fragment operations adhere to <a href="chap25.html#primsrast-order">rasterization
order</a>, and are typically performed in this order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="chap26.html#fragops-scissor">Scissor test</a></p>
</li>
<li>
<p><a href="chap26.html#fragops-samplemask">Sample mask test</a></p>
</li>
<li>
<p>Certain <a href="chap26.html#fragops-shader">Fragment shading</a> operations:</p>
<div class="ulist">
<ul>
<li>
<p><a href="chap26.html#fragops-shader-samplemask">Sample Mask Accesses</a></p>
</li>
<li>
<p><a href="chap26.html#fragops-shader-depthreplacement">Depth Replacement</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="chap26.html#fragops-covg">Multisample coverage</a></p>
</li>
<li>
<p><a href="chap26.html#fragops-dbt">Depth bounds test</a></p>
</li>
<li>
<p><a href="chap26.html#fragops-stencil">Stencil test</a></p>
</li>
<li>
<p><a href="chap26.html#fragops-depth">Depth test</a></p>
</li>
<li>
<p><a href="chap26.html#fragops-samplecount">Sample counting</a></p>
</li>
<li>
<p><a href="chap26.html#fragops-coverage-reduction">Coverage reduction</a></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <a href="chap25.html#primsrast-multisampling-coverage-mask">coverage mask</a> generated by
rasterization describes the initial coverage of each sample covered by the
fragment.
Fragment operations will update the coverage mask to add or subtract
coverage where appropriate.
If a fragment operation results in all bits of the coverage mask being <code>0</code>,
the fragment is discarded, and no further operations are performed.
Fragments can also be programmatically discarded in a fragment shader by
executing one of</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>OpTerminateInvocation</code></p>
</li>
<li>
<p><code>OpDemoteToHelperInvocationEXT</code></p>
</li>
<li>
<p><code>OpKill</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When one of the fragment operations in this chapter is described as
“replacing” a fragment shader output, that output is replaced
unconditionally, even if no fragment shader previously wrote to that output.</p>
</div>
<div class="paragraph">
<p>If the <a href="chap26.html#fragops-shader">fragment shader</a> declares the
<code>EarlyFragmentTests</code> execution mode, <a href="chap26.html#fragops-shader">fragment shading</a>
and <a href="chap26.html#fragops-covg">multisample coverage</a> operations are instead performed
after <a href="chap26.html#fragops-samplecount">sample counting</a>.</p>
</div>
<div class="paragraph">
<p>Once all fragment operations have completed, fragment shader outputs for
covered color attachment samples pass through <a href="chap27.html">framebuffer
operations</a>.</p>
</div>
<div class="sect2">
<h3 id="fragops-scissor"><a class="anchor" href="chap26.html#fragops-scissor"></a>26.1. Scissor Test</h3>
<div class="paragraph">
<p>The scissor test compares the framebuffer coordinates <span class="eq">(x<sub>f</sub>,y<sub>f</sub>)</span> of
each sample covered by a fragment against a <em>scissor rectangle</em> at the index
equal to the fragment’s <a href="chap15.html#interfaces-builtin-variables-viewportindex"><code>ViewportIndex</code></a>.</p>
</div>
<div class="paragraph">
<p>Each scissor rectangle is defined by a <a href="chap3.html#VkRect2D">VkRect2D</a>.
These values are either set by the <a href="chap24.html#VkPipelineViewportStateCreateInfo">VkPipelineViewportStateCreateInfo</a>
structure during pipeline creation, or dynamically by the
<a href="chap26.html#vkCmdSetScissor">vkCmdSetScissor</a> command.</p>
</div>
<div class="paragraph">
<p>A given sample is considered inside a scissor rectangle if <span class="eq">x<sub>f</sub></span> is in
the range <span class="eq">[<a href="chap3.html#VkRect2D">VkRect2D</a>::offset.x, <a href="chap3.html#VkRect2D">VkRect2D</a>::offset.x + 
<a href="chap3.html#VkRect2D">VkRect2D</a>::extent.x)</span>, and <span class="eq">y<sub>f</sub></span> is in the range
<span class="eq">[<a href="chap3.html#VkRect2D">VkRect2D</a>::offset.y, <a href="chap3.html#VkRect2D">VkRect2D</a>::offset.y + 
<a href="chap3.html#VkRect2D">VkRect2D</a>::extent.y)</span>.
Samples with coordinates outside the scissor rectangle at the corresponding
<code>ViewportIndex</code> will have their coverage set to <code>0</code>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To <a href="chap10.html#pipelines-dynamic-state">dynamically set</a> the scissor rectangles,
call:</p>
</div>
<div id="vkCmdSetScissor" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdSetScissor</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">firstScissor</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">scissorCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkRect2D</span><span class="o">*</span>                             <span class="n">pScissors</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>firstScissor</code> is the index of the first scissor whose state is
updated by the command.</p>
</li>
<li>
<p><code>scissorCount</code> is the number of scissors whose rectangles are
updated by the command.</p>
</li>
<li>
<p><code>pScissors</code> is a pointer to an array of <a href="chap3.html#VkRect2D">VkRect2D</a> structures
defining scissor rectangles.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The scissor rectangles taken from element <span class="eq">i</span> of <code>pScissors</code> replace
the current state for the scissor index <span class="eq"><code>firstScissor</code> +  i</span>,
for <span class="eq">i</span> in <span class="eq">[0, <code>scissorCount</code>)</span>.</p>
</div>
<div class="paragraph">
<p>This command sets the scissor rectangles for subsequent drawing commands
when the graphics pipeline is created with <code>VK_DYNAMIC_STATE_SCISSOR</code>
set in <a href="chap10.html#VkPipelineDynamicStateCreateInfo">VkPipelineDynamicStateCreateInfo</a>::<code>pDynamicStates</code>.
Otherwise, this state is specified by the
<a href="chap24.html#VkPipelineViewportStateCreateInfo">VkPipelineViewportStateCreateInfo</a>::<code>pScissors</code> values used to
create the currently active pipeline.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdSetScissor-firstScissor-00592" href="chap26.html#VUID-vkCmdSetScissor-firstScissor-00592"></a> <span class="vuid">VUID-vkCmdSetScissor-firstScissor-00592</span><br>

The sum of <code>firstScissor</code> and <code>scissorCount</code> <strong class="purple">must</strong> be between
<code>1</code> and <code>VkPhysicalDeviceLimits</code>::<code>maxViewports</code>, inclusive</p>
</li>
<li>
<p><a id="VUID-vkCmdSetScissor-firstScissor-00593" href="chap26.html#VUID-vkCmdSetScissor-firstScissor-00593"></a> <span class="vuid">VUID-vkCmdSetScissor-firstScissor-00593</span><br>

If the <a href="chap32.html#features-multiViewport">multiple viewports</a> feature is not
enabled, <code>firstScissor</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSetScissor-scissorCount-00594" href="chap26.html#VUID-vkCmdSetScissor-scissorCount-00594"></a> <span class="vuid">VUID-vkCmdSetScissor-scissorCount-00594</span><br>

If the <a href="chap32.html#features-multiViewport">multiple viewports</a> feature is not
enabled, <code>scissorCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSetScissor-x-00595" href="chap26.html#VUID-vkCmdSetScissor-x-00595"></a> <span class="vuid">VUID-vkCmdSetScissor-x-00595</span><br>

The <code>x</code> and <code>y</code> members of <code>offset</code> member of any element of
<code>pScissors</code> <strong class="purple">must</strong> be greater than or equal to <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSetScissor-offset-00596" href="chap26.html#VUID-vkCmdSetScissor-offset-00596"></a> <span class="vuid">VUID-vkCmdSetScissor-offset-00596</span><br>

Evaluation of <span class="eq">(<code>offset.x</code> +  <code>extent.width</code>)</span> <strong class="purple">must</strong> not
cause a signed integer addition overflow for any element of
<code>pScissors</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSetScissor-offset-00597" href="chap26.html#VUID-vkCmdSetScissor-offset-00597"></a> <span class="vuid">VUID-vkCmdSetScissor-offset-00597</span><br>

Evaluation of <span class="eq">(<code>offset.y</code> +  <code>extent.height</code>)</span> <strong class="purple">must</strong>
not cause a signed integer addition overflow for any element of
<code>pScissors</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdSetScissor-commandBuffer-parameter" href="chap26.html#VUID-vkCmdSetScissor-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdSetScissor-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdSetScissor-pScissors-parameter" href="chap26.html#VUID-vkCmdSetScissor-pScissors-parameter"></a> <span class="vuid">VUID-vkCmdSetScissor-pScissors-parameter</span><br>
 <code>pScissors</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>scissorCount</code> <a href="chap3.html#VkRect2D">VkRect2D</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdSetScissor-commandBuffer-recording" href="chap26.html#VUID-vkCmdSetScissor-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdSetScissor-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSetScissor-commandBuffer-cmdpool" href="chap26.html#VUID-vkCmdSetScissor-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdSetScissor-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdSetScissor-scissorCount-arraylength" href="chap26.html#VUID-vkCmdSetScissor-scissorCount-arraylength"></a> <span class="vuid">VUID-vkCmdSetScissor-scissorCount-arraylength</span><br>
 <code>scissorCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="fragops-samplemask"><a class="anchor" href="chap26.html#fragops-samplemask"></a>26.2. Sample Mask Test</h3>
<div class="paragraph">
<p>The sample mask test compares the <a href="chap25.html#primsrast-multisampling-coverage-mask">coverage mask</a> for a fragment with the <em>sample mask</em> defined by
<a href="chap25.html#VkPipelineMultisampleStateCreateInfo">VkPipelineMultisampleStateCreateInfo</a>::<code>pSampleMask</code>.</p>
</div>
<div class="paragraph">
<p>Each bit of the coverage mask is associated with a sample index as described
in the <a href="chap25.html#primsrast-multisampling-coverage-mask">rasterization chapter</a>.
If the bit in <a href="chap25.html#VkPipelineMultisampleStateCreateInfo">VkPipelineMultisampleStateCreateInfo</a>::<code>pSampleMask</code>
which is associated with that same sample index is set to <code>0</code>, the coverage
mask bit is set to <code>0</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="fragops-shader"><a class="anchor" href="chap26.html#fragops-shader"></a>26.3. Fragment Shading</h3>
<div class="paragraph">
<p><a href="chap9.html#shaders-fragment">Fragment shaders</a> are invoked for each fragment, or as
<a href="chap9.html#shaders-helper-invocations">helper invocations</a>.</p>
</div>
<div class="paragraph">
<p>Most operations in the fragment shader are not performed in
<a href="chap25.html#primsrast-order">rasterization order</a>, with exceptions called out in the
following sections.</p>
</div>
<div class="paragraph">
<p>For fragment shaders invoked by fragments, the following rules apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A fragment shader <strong class="purple">must</strong> not be executed if a <a href="chap26.html">fragment
operation</a> that executes before fragment shading discards the fragment.</p>
</li>
<li>
<p>A fragment shader <strong class="purple">may</strong> not be executed if:</p>
<div class="ulist">
<ul>
<li>
<p>An implementation determines that another fragment shader, invoked by a
subsequent primitive in <a href="chap20.html#drawing-primitive-order">primitive order</a>,
overwrites all results computed by the shader (including writes to
storage resources).</p>
</li>
<li>
<p>Any other <a href="chap26.html">fragment operation</a> discards the fragment, and
the shader does not write to any storage resources.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Otherwise, at least one fragment shader <strong class="purple">must</strong> be executed.</p>
<div class="ulist">
<ul>
<li>
<p>If <a href="chap25.html#primsrast-sampleshading">sample shading</a> is enabled and multiple
invocations per fragment are <strong class="purple">required</strong>, additional invocations <strong class="purple">must</strong> be
executed as specified.</p>
</li>
<li>
<p>Each covered sample <strong class="purple">must</strong> be included in at least one fragment shader
invocation.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Multiple fragment shader invocations may be executed for the same fragment
for any number of implementation-dependent reasons.
When there is more than one fragment shader invocation per fragment, the
association of samples to invocations is implementation-dependent.
Stores and atomics performed by these additional invocations have the normal
effect.</p>
</div>
<div class="paragraph">
<p>For example, if the subpass includes multiple views in its view mask, a
fragment shader may be invoked separately for each view.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="fragops-shader-samplemask"><a class="anchor" href="chap26.html#fragops-shader-samplemask"></a>26.3.1. Sample Mask</h4>
<div class="paragraph">
<p>Reading from the <a href="chap15.html#interfaces-builtin-variables-samplemask"><code>SampleMask</code></a> built-in in the <code>Input</code> storage class will return the
coverage mask for the current fragment as calculated by fragment operations
that executed prior to fragment shading.</p>
</div>
<div class="paragraph">
<p>If <a href="chap25.html#primsrast-sampleshading">sample shading</a> is enabled, fragment shaders
will only see values of <code>1</code> for samples being shaded - other bits will be
<code>0</code>.</p>
</div>
<div class="paragraph">
<p>Each bit of the coverage mask is associated with a sample index as described
in the <a href="chap25.html#primsrast-multisampling-coverage-mask">rasterization chapter</a>.
If the bit in <code>SampleMask</code> which is associated with that same sample
index is set to <code>0</code>, that coverage mask bit is set to <code>0</code>.</p>
</div>
<div class="paragraph">
<p>Values written to the <a href="chap15.html#interfaces-builtin-variables-samplemask"><code>SampleMask</code></a> built-in in the <code>Output</code> storage class will be used by
the <a href="chap26.html#fragops-covg">multisample coverage</a> operation, with the same encoding
as the input built-in.</p>
</div>
</div>
<div class="sect3">
<h4 id="fragops-shader-depthreplacement"><a class="anchor" href="chap26.html#fragops-shader-depthreplacement"></a>26.3.2. Depth Replacement</h4>
<div class="paragraph">
<p>Writing to the <a href="chap15.html#interfaces-builtin-variables-fragdepth"><code>FragDepth</code></a>
built-in will replace the fragment’s calculated depth values for each sample
in the input <code>SampleMask</code>.
<a href="chap26.html#fragops-depth">Depth testing</a> performed after the fragment shader for
this fragment will use this new value as <span class="eq">z<sub>f</sub></span>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="fragops-covg"><a class="anchor" href="chap26.html#fragops-covg"></a>26.4. Multisample Coverage</h3>
<div class="paragraph">
<p>If a fragment shader is active and its entry point’s interface includes a
built-in output variable decorated with <code>SampleMask</code>,
the coverage mask is <code>ANDed</code> with the bits of the <code>SampleMask</code>
built-in to generate a new coverage mask.
If <a href="chap25.html#primsrast-sampleshading">sample shading</a> is enabled, bits written to
<code>SampleMask</code> corresponding to samples that are not being shaded by the
fragment shader invocation are ignored.
If no fragment shader is active, or if the active fragment shader does not
include <code>SampleMask</code> in its interface, the coverage mask is not modified.</p>
</div>
<div class="paragraph">
<p>Next, the fragment alpha value and coverage mask are modified based on the
<code>alphaToCoverageEnable</code> and <code>alphaToOneEnable</code> members of the
<a href="chap25.html#VkPipelineMultisampleStateCreateInfo">VkPipelineMultisampleStateCreateInfo</a> structure.</p>
</div>
<div class="paragraph">
<p>All alpha values in this section refer only to the alpha component of the
fragment shader output that has a <code>Location</code> and <code>Index</code> decoration of
zero (see the <a href="chap15.html#interfaces-fragmentoutput">Fragment Output Interface</a>
section).
If that shader output has an integer or unsigned integer type, then these
operations are skipped.</p>
</div>
<div class="paragraph">
<p>If <code>alphaToCoverageEnable</code> is enabled, a temporary coverage mask is
generated where each bit is determined by the fragment’s alpha value, which
is ANDed with the fragment coverage mask.</p>
</div>
<div class="paragraph">
<p>No specific algorithm is specified for converting the alpha value to a
temporary coverage mask.
It is intended that the number of 1’s in this value be proportional to the
alpha value (clamped to <span class="eq">[0,1]</span>), with all 1’s corresponding to a value
of 1.0 and all 0’s corresponding to 0.0.
The algorithm <strong class="purple">may</strong> be different at different framebuffer coordinates.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Using different algorithms at different framebuffer coordinates <strong class="purple">may</strong> help to
avoid artifacts caused by regular coverage sample locations.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Finally, if <code>alphaToOneEnable</code> is enabled, each alpha value is replaced
by the maximum representable alpha value for fixed-point color attachments,
or by 1.0 for floating-point attachments.
Otherwise, the alpha values are not changed.</p>
</div>
</div>
<div class="sect2">
<h3 id="fragops-ds-state"><a class="anchor" href="chap26.html#fragops-ds-state"></a>26.5. Depth and Stencil Operations</h3>
<div class="paragraph">
<p>Pipeline state controlling the <a href="chap26.html#fragops-dbt">depth bounds tests</a>,
<a href="chap26.html#fragops-stencil">stencil test</a>, and <a href="chap26.html#fragops-depth">depth test</a> is
specified through the members of the
<code>VkPipelineDepthStencilStateCreateInfo</code> structure.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkPipelineDepthStencilStateCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkPipelineDepthStencilStateCreateInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkPipelineDepthStencilStateCreateInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                           <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                               <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkPipelineDepthStencilStateCreateFlags</span>    <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkBool32</span>                                  <span class="n">depthTestEnable</span><span class="p">;</span>
    <span class="n">VkBool32</span>                                  <span class="n">depthWriteEnable</span><span class="p">;</span>
    <span class="n">VkCompareOp</span>                               <span class="n">depthCompareOp</span><span class="p">;</span>
    <span class="n">VkBool32</span>                                  <span class="n">depthBoundsTestEnable</span><span class="p">;</span>
    <span class="n">VkBool32</span>                                  <span class="n">stencilTestEnable</span><span class="p">;</span>
    <span class="n">VkStencilOpState</span>                          <span class="n">front</span><span class="p">;</span>
    <span class="n">VkStencilOpState</span>                          <span class="n">back</span><span class="p">;</span>
    <span class="kt">float</span>                                     <span class="n">minDepthBounds</span><span class="p">;</span>
    <span class="kt">float</span>                                     <span class="n">maxDepthBounds</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkPipelineDepthStencilStateCreateInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
<li>
<p><code>depthTestEnable</code> controls whether <a href="chap26.html#fragops-depth">depth testing</a>
is enabled.</p>
</li>
<li>
<p><code>depthWriteEnable</code> controls whether <a href="chap26.html#fragops-depth-write">depth
writes</a> are enabled when <code>depthTestEnable</code> is <code>VK_TRUE</code>.
Depth writes are always disabled when <code>depthTestEnable</code> is
<code>VK_FALSE</code>.</p>
</li>
<li>
<p><code>depthCompareOp</code> is the comparison operator used in the
<a href="chap26.html#fragops-depth">depth test</a>.</p>
</li>
<li>
<p><code>depthBoundsTestEnable</code> controls whether <a href="chap26.html#fragops-dbt">depth bounds
testing</a> is enabled.</p>
</li>
<li>
<p><code>stencilTestEnable</code> controls whether <a href="chap26.html#fragops-stencil">stencil
testing</a> is enabled.</p>
</li>
<li>
<p><code>front</code> and <code>back</code> control the parameters of the
<a href="chap26.html#fragops-stencil">stencil test</a>.</p>
</li>
<li>
<p><code>minDepthBounds</code> is the minimum depth bound used in the
<a href="chap26.html#fragops-dbt">depth bounds test</a>.</p>
</li>
<li>
<p><code>maxDepthBounds</code> is the maximum depth bound used in the
<a href="chap26.html#fragops-dbt">depth bounds test</a>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkPipelineDepthStencilStateCreateInfo-depthBoundsTestEnable-00598" href="chap26.html#VUID-VkPipelineDepthStencilStateCreateInfo-depthBoundsTestEnable-00598"></a> <span class="vuid">VUID-VkPipelineDepthStencilStateCreateInfo-depthBoundsTestEnable-00598</span><br>

If the <a href="chap32.html#features-depthBounds">depth bounds testing</a> feature is not
enabled, <code>depthBoundsTestEnable</code> <strong class="purple">must</strong> be <code>VK_FALSE</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkPipelineDepthStencilStateCreateInfo-sType-sType" href="chap26.html#VUID-VkPipelineDepthStencilStateCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkPipelineDepthStencilStateCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_PIPELINE_DEPTH_STENCIL_STATE_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkPipelineDepthStencilStateCreateInfo-pNext-pNext" href="chap26.html#VUID-VkPipelineDepthStencilStateCreateInfo-pNext-pNext"></a> <span class="vuid">VUID-VkPipelineDepthStencilStateCreateInfo-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkPipelineDepthStencilStateCreateInfo-flags-zerobitmask" href="chap26.html#VUID-VkPipelineDepthStencilStateCreateInfo-flags-zerobitmask"></a> <span class="vuid">VUID-VkPipelineDepthStencilStateCreateInfo-flags-zerobitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkPipelineDepthStencilStateCreateInfo-depthCompareOp-parameter" href="chap26.html#VUID-VkPipelineDepthStencilStateCreateInfo-depthCompareOp-parameter"></a> <span class="vuid">VUID-VkPipelineDepthStencilStateCreateInfo-depthCompareOp-parameter</span><br>
 <code>depthCompareOp</code> <strong class="purple">must</strong> be a valid <a href="chap26.html#VkCompareOp">VkCompareOp</a> value</p>
</li>
<li>
<p><a id="VUID-VkPipelineDepthStencilStateCreateInfo-front-parameter" href="chap26.html#VUID-VkPipelineDepthStencilStateCreateInfo-front-parameter"></a> <span class="vuid">VUID-VkPipelineDepthStencilStateCreateInfo-front-parameter</span><br>
 <code>front</code> <strong class="purple">must</strong> be a valid <a href="chap26.html#VkStencilOpState">VkStencilOpState</a> structure</p>
</li>
<li>
<p><a id="VUID-VkPipelineDepthStencilStateCreateInfo-back-parameter" href="chap26.html#VUID-VkPipelineDepthStencilStateCreateInfo-back-parameter"></a> <span class="vuid">VUID-VkPipelineDepthStencilStateCreateInfo-back-parameter</span><br>
 <code>back</code> <strong class="purple">must</strong> be a valid <a href="chap26.html#VkStencilOpState">VkStencilOpState</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><code>VkPipelineDepthStencilStateCreateFlags</code> is a bitmask type for setting a
mask, but is currently reserved for future use.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="fragops-dbt"><a class="anchor" href="chap26.html#fragops-dbt"></a>26.6. Depth Bounds Test</h3>
<div class="paragraph">
<p>The depth bounds test compares the depth value <span class="eq">z<sub>a</sub></span> in the
depth/stencil attachment at each sample’s framebuffer coordinates
<span class="eq">(x<sub>f</sub>,y<sub>f</sub>)</span> and <a href="chap25.html#primsrast-multisampling-coverage-mask">sample
index</a> <span class="eq">i</span> against a set of <em>depth bounds</em>.</p>
</div>
<div class="paragraph">
<p>The depth bounds are determined by two floating point values defining a
minimum (<code>minDepthBounds</code>) and maximum (<code>maxDepthBounds</code>) depth
value.
These values are either set by the
<a href="chap26.html#VkPipelineDepthStencilStateCreateInfo">VkPipelineDepthStencilStateCreateInfo</a> structure during pipeline
creation, or dynamically by
<a href="chap26.html#vkCmdSetDepthBoundsTestEnable">vkCmdSetDepthBoundsTestEnable</a> and
<a href="chap26.html#vkCmdSetDepthBounds">vkCmdSetDepthBounds</a>.</p>
</div>
<div class="paragraph">
<p>A given sample is considered within the depth bounds if <span class="eq">z<sub>a</sub></span> is in the
range <span class="eq">[<code>minDepthBounds</code>,<code>maxDepthBounds</code>]</span>.
Samples with depth attachment values outside of the depth bounds will have
their coverage set to <code>0</code>.</p>
</div>
<div class="paragraph">
<p>If the depth bounds test is disabled, or if there is no depth attachment,
the coverage mask is unmodified by this operation.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To <a href="chap10.html#pipelines-dynamic-state">dynamically enable or disable</a> the depth
bounds test, call:</p>
</div>
<div id="vkCmdSetDepthBoundsTestEnable" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="kt">void</span> <span class="nf">vkCmdSetDepthBoundsTestEnable</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkBool32</span>                                    <span class="n">depthBoundsTestEnable</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>depthBoundsTestEnable</code> specifies if the depth bounds test is
enabled.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command sets the depth bounds enable for subsequent drawing commands
when the graphics pipeline is created with
<code>VK_DYNAMIC_STATE_DEPTH_BOUNDS_TEST_ENABLE</code> set in
<a href="chap10.html#VkPipelineDynamicStateCreateInfo">VkPipelineDynamicStateCreateInfo</a>::<code>pDynamicStates</code>.
Otherwise, this state is specified by the
<a href="chap26.html#VkPipelineDepthStencilStateCreateInfo">VkPipelineDepthStencilStateCreateInfo</a>::<code>depthBoundsTestEnable</code>
value used to create the currently active pipeline.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdSetDepthBoundsTestEnable-commandBuffer-parameter" href="chap26.html#VUID-vkCmdSetDepthBoundsTestEnable-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdSetDepthBoundsTestEnable-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdSetDepthBoundsTestEnable-commandBuffer-recording" href="chap26.html#VUID-vkCmdSetDepthBoundsTestEnable-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdSetDepthBoundsTestEnable-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSetDepthBoundsTestEnable-commandBuffer-cmdpool" href="chap26.html#VUID-vkCmdSetDepthBoundsTestEnable-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdSetDepthBoundsTestEnable-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To <a href="chap10.html#pipelines-dynamic-state">dynamically set</a> the depth bounds range,
call:</p>
</div>
<div id="vkCmdSetDepthBounds" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdSetDepthBounds</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="kt">float</span>                                       <span class="n">minDepthBounds</span><span class="p">,</span>
    <span class="kt">float</span>                                       <span class="n">maxDepthBounds</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>minDepthBounds</code> is the minimum depth bound.</p>
</li>
<li>
<p><code>maxDepthBounds</code> is the maximum depth bound.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command sets the depth bounds range for subsequent drawing commands
when the graphics pipeline is created with
<code>VK_DYNAMIC_STATE_DEPTH_BOUNDS</code> set in
<a href="chap10.html#VkPipelineDynamicStateCreateInfo">VkPipelineDynamicStateCreateInfo</a>::<code>pDynamicStates</code>.
Otherwise, this state is specified by the
<a href="chap26.html#VkPipelineDepthStencilStateCreateInfo">VkPipelineDepthStencilStateCreateInfo</a>::<code>minDepthBounds</code> and
<a href="chap26.html#VkPipelineDepthStencilStateCreateInfo">VkPipelineDepthStencilStateCreateInfo</a>::<code>maxDepthBounds</code> values
used to create the currently active pipeline.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdSetDepthBounds-minDepthBounds-02508" href="chap26.html#VUID-vkCmdSetDepthBounds-minDepthBounds-02508"></a> <span class="vuid">VUID-vkCmdSetDepthBounds-minDepthBounds-02508</span><br>

<code>minDepthBounds</code> <strong class="purple">must</strong> be between <code>0.0</code> and <code>1.0</code>, inclusive</p>
</li>
<li>
<p><a id="VUID-vkCmdSetDepthBounds-maxDepthBounds-02509" href="chap26.html#VUID-vkCmdSetDepthBounds-maxDepthBounds-02509"></a> <span class="vuid">VUID-vkCmdSetDepthBounds-maxDepthBounds-02509</span><br>

<code>maxDepthBounds</code> <strong class="purple">must</strong> be between <code>0.0</code> and <code>1.0</code>, inclusive</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdSetDepthBounds-commandBuffer-parameter" href="chap26.html#VUID-vkCmdSetDepthBounds-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdSetDepthBounds-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdSetDepthBounds-commandBuffer-recording" href="chap26.html#VUID-vkCmdSetDepthBounds-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdSetDepthBounds-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSetDepthBounds-commandBuffer-cmdpool" href="chap26.html#VUID-vkCmdSetDepthBounds-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdSetDepthBounds-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="fragops-stencil"><a class="anchor" href="chap26.html#fragops-stencil"></a>26.7. Stencil Test</h3>
<div class="paragraph">
<p>The stencil test compares the stencil attachment value <span class="eq">s<sub>a</sub></span> in the
depth/stencil attachment at each sample’s framebuffer coordinates
<span class="eq">(x<sub>f</sub>,y<sub>f</sub>)</span> and <a href="chap25.html#primsrast-multisampling-coverage-mask">sample
index</a> <span class="eq">i</span> against a <em>stencil reference value</em>.</p>
</div>
<div class="paragraph">
<p>If the stencil test is not enabled, as specified by
<a href="chap26.html#vkCmdSetStencilTestEnable">vkCmdSetStencilTestEnable</a> or
<a href="chap26.html#VkPipelineDepthStencilStateCreateInfo">VkPipelineDepthStencilStateCreateInfo</a>::<code>stencilTestEnable</code>, or if
there is no stencil attachment, the coverage mask is unmodified by this
operation.</p>
</div>
<div class="paragraph">
<p>The stencil test is controlled by one of two sets of stencil-related state,
the front stencil state and the back stencil state.
Stencil tests and writes use the back stencil state when processing
fragments generated by <a href="chap25.html#primsrast-polygons-basic">back-facing</a>
<a href="chap25.html#primsrast-polygons">polygons</a>, and the front stencil state when processing
fragments generated by <a href="chap25.html#primsrast-polygons-basic">front-facing polygons</a> or
any other primitives.</p>
</div>
<div class="paragraph">
<p>The comparison performed is based on the <a href="chap26.html#VkCompareOp">VkCompareOp</a>, compare mask
<span class="eq">s<sub>c</sub></span> , and stencil reference value <span class="eq">s<sub>r</sub></span> of the relevant state
set.
The compare mask and stencil reference value are set by either the
<a href="chap26.html#VkPipelineDepthStencilStateCreateInfo">VkPipelineDepthStencilStateCreateInfo</a> structure during pipeline
creation, or by the <a href="chap26.html#vkCmdSetStencilCompareMask">vkCmdSetStencilCompareMask</a> and
<a href="chap26.html#vkCmdSetStencilReference">vkCmdSetStencilReference</a> commands respectively.
The compare operation is set by <a href="chap26.html#VkStencilOpState">VkStencilOpState</a>::<code>compareOp</code>
during pipeline creation.</p>
</div>
<div class="paragraph">
<p>The stencil reference and attachment values <span class="eq">s<sub>r</sub></span> and <span class="eq">s<sub>a</sub></span> are
each independently combined with the compare mask <span class="eq">s<sub>c</sub></span> using a logical
<code>AND</code> operation to create masked reference and attachment values
<span class="eq">s'<sub>r</sub></span> and <span class="eq">s'<sub>a</sub></span>.
<span class="eq">s'<sub>r</sub></span> and <span class="eq">s'<sub>a</sub></span> are used as <span class="eq">A</span> and <span class="eq">B</span>, respectively,
in the operation specified by <a href="chap26.html#VkCompareOp">VkCompareOp</a>.</p>
</div>
<div class="paragraph">
<p>If the comparison evaluates to false, the coverage for the sample is set to
<code>0</code>.</p>
</div>
<div class="paragraph">
<p>A new stencil value <span class="eq">s<sub>g</sub></span> is generated according to a stencil operation
defined by <a href="chap26.html#VkStencilOp">VkStencilOp</a> parameters set by
<a href="chap26.html#vkCmdSetStencilOp">vkCmdSetStencilOp</a> or
<a href="chap26.html#VkPipelineDepthStencilStateCreateInfo">VkPipelineDepthStencilStateCreateInfo</a>.
If the stencil test fails, <code>failOp</code> defines the stencil operation used.
If the stencil test passes however, the stencil op used is based on the
<a href="chap26.html#fragops-depth">depth test</a> - if it passes,
<a href="chap26.html#VkPipelineDepthStencilStateCreateInfo">VkPipelineDepthStencilStateCreateInfo</a>::<code>passOp</code> is used, otherwise
<a href="chap26.html#VkPipelineDepthStencilStateCreateInfo">VkPipelineDepthStencilStateCreateInfo</a>::<code>depthFailOp</code> is used.</p>
</div>
<div class="paragraph">
<p>The stencil attachment value <span class="eq">s<sub>a</sub></span> is then updated with the generated
stencil value <span class="eq">s<sub>g</sub></span> according to the write mask <span class="eq">s<sub>w</sub></span> defined by
<a href="chap26.html#VkPipelineDepthStencilStateCreateInfo">VkPipelineDepthStencilStateCreateInfo</a>::<code>writeMask</code> as:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">s<sub>a</sub> = (s<sub>a</sub> &amp; ¬s<sub>w</sub>) | (s<sub>g</sub> &amp; s<sub>w</sub>)</span></p>
</dd>
</dl>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To <a href="chap10.html#pipelines-dynamic-state">dynamically enable or disable</a> the stencil
test, call:</p>
</div>
<div id="vkCmdSetStencilTestEnable" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="kt">void</span> <span class="nf">vkCmdSetStencilTestEnable</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkBool32</span>                                    <span class="n">stencilTestEnable</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>stencilTestEnable</code> specifies if the stencil test is enabled.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command sets the stencil test enable for subsequent drawing commands
when the graphics pipeline is created with
<code>VK_DYNAMIC_STATE_STENCIL_TEST_ENABLE</code> set in
<a href="chap10.html#VkPipelineDynamicStateCreateInfo">VkPipelineDynamicStateCreateInfo</a>::<code>pDynamicStates</code>.
Otherwise, this state is specified by the
<a href="chap26.html#VkPipelineDepthStencilStateCreateInfo">VkPipelineDepthStencilStateCreateInfo</a>::<code>stencilTestEnable</code> value
used to create the currently active pipeline.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdSetStencilTestEnable-commandBuffer-parameter" href="chap26.html#VUID-vkCmdSetStencilTestEnable-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdSetStencilTestEnable-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilTestEnable-commandBuffer-recording" href="chap26.html#VUID-vkCmdSetStencilTestEnable-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdSetStencilTestEnable-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilTestEnable-commandBuffer-cmdpool" href="chap26.html#VUID-vkCmdSetStencilTestEnable-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdSetStencilTestEnable-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To <a href="chap10.html#pipelines-dynamic-state">dynamically set</a> the stencil operation, call:</p>
</div>
<div id="vkCmdSetStencilOp" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="kt">void</span> <span class="nf">vkCmdSetStencilOp</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkStencilFaceFlags</span>                          <span class="n">faceMask</span><span class="p">,</span>
    <span class="n">VkStencilOp</span>                                 <span class="n">failOp</span><span class="p">,</span>
    <span class="n">VkStencilOp</span>                                 <span class="n">passOp</span><span class="p">,</span>
    <span class="n">VkStencilOp</span>                                 <span class="n">depthFailOp</span><span class="p">,</span>
    <span class="n">VkCompareOp</span>                                 <span class="n">compareOp</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>faceMask</code> is a bitmask of <a href="chap26.html#VkStencilFaceFlagBits">VkStencilFaceFlagBits</a> specifying
the set of stencil state for which to update the stencil operation.</p>
</li>
<li>
<p><code>failOp</code> is a <a href="chap26.html#VkStencilOp">VkStencilOp</a> value specifying the action
performed on samples that fail the stencil test.</p>
</li>
<li>
<p><code>passOp</code> is a <a href="chap26.html#VkStencilOp">VkStencilOp</a> value specifying the action
performed on samples that pass both the depth and stencil tests.</p>
</li>
<li>
<p><code>depthFailOp</code> is a <a href="chap26.html#VkStencilOp">VkStencilOp</a> value specifying the action
performed on samples that pass the stencil test and fail the depth test.</p>
</li>
<li>
<p><code>compareOp</code> is a <a href="chap26.html#VkCompareOp">VkCompareOp</a> value specifying the comparison
operator used in the stencil test.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command sets the stencil operation for subsequent drawing commands when
the graphics pipeline is created with <code>VK_DYNAMIC_STATE_STENCIL_OP</code> set
in <a href="chap10.html#VkPipelineDynamicStateCreateInfo">VkPipelineDynamicStateCreateInfo</a>::<code>pDynamicStates</code>.
Otherwise, this state is specified by the corresponding
<code>VkPipelineDepthStencilStateCreateInfo</code>::<code>failOp</code>, <code>passOp</code>,
<code>depthFailOp</code>, and <code>compareOp</code> values used to create the currently
active pipeline, for both front and back faces.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdSetStencilOp-commandBuffer-parameter" href="chap26.html#VUID-vkCmdSetStencilOp-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdSetStencilOp-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilOp-faceMask-parameter" href="chap26.html#VUID-vkCmdSetStencilOp-faceMask-parameter"></a> <span class="vuid">VUID-vkCmdSetStencilOp-faceMask-parameter</span><br>
 <code>faceMask</code> <strong class="purple">must</strong> be a valid combination of <a href="chap26.html#VkStencilFaceFlagBits">VkStencilFaceFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilOp-faceMask-requiredbitmask" href="chap26.html#VUID-vkCmdSetStencilOp-faceMask-requiredbitmask"></a> <span class="vuid">VUID-vkCmdSetStencilOp-faceMask-requiredbitmask</span><br>
 <code>faceMask</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilOp-failOp-parameter" href="chap26.html#VUID-vkCmdSetStencilOp-failOp-parameter"></a> <span class="vuid">VUID-vkCmdSetStencilOp-failOp-parameter</span><br>
 <code>failOp</code> <strong class="purple">must</strong> be a valid <a href="chap26.html#VkStencilOp">VkStencilOp</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilOp-passOp-parameter" href="chap26.html#VUID-vkCmdSetStencilOp-passOp-parameter"></a> <span class="vuid">VUID-vkCmdSetStencilOp-passOp-parameter</span><br>
 <code>passOp</code> <strong class="purple">must</strong> be a valid <a href="chap26.html#VkStencilOp">VkStencilOp</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilOp-depthFailOp-parameter" href="chap26.html#VUID-vkCmdSetStencilOp-depthFailOp-parameter"></a> <span class="vuid">VUID-vkCmdSetStencilOp-depthFailOp-parameter</span><br>
 <code>depthFailOp</code> <strong class="purple">must</strong> be a valid <a href="chap26.html#VkStencilOp">VkStencilOp</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilOp-compareOp-parameter" href="chap26.html#VUID-vkCmdSetStencilOp-compareOp-parameter"></a> <span class="vuid">VUID-vkCmdSetStencilOp-compareOp-parameter</span><br>
 <code>compareOp</code> <strong class="purple">must</strong> be a valid <a href="chap26.html#VkCompareOp">VkCompareOp</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilOp-commandBuffer-recording" href="chap26.html#VUID-vkCmdSetStencilOp-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdSetStencilOp-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilOp-commandBuffer-cmdpool" href="chap26.html#VUID-vkCmdSetStencilOp-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdSetStencilOp-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkStencilOpState</code> structure is defined as:</p>
</div>
<div id="VkStencilOpState" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkStencilOpState</span> <span class="p">{</span>
    <span class="n">VkStencilOp</span>    <span class="n">failOp</span><span class="p">;</span>
    <span class="n">VkStencilOp</span>    <span class="n">passOp</span><span class="p">;</span>
    <span class="n">VkStencilOp</span>    <span class="n">depthFailOp</span><span class="p">;</span>
    <span class="n">VkCompareOp</span>    <span class="n">compareOp</span><span class="p">;</span>
    <span class="kt">uint32_t</span>       <span class="n">compareMask</span><span class="p">;</span>
    <span class="kt">uint32_t</span>       <span class="n">writeMask</span><span class="p">;</span>
    <span class="kt">uint32_t</span>       <span class="n">reference</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkStencilOpState</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>failOp</code> is a <a href="chap26.html#VkStencilOp">VkStencilOp</a> value specifying the action
performed on samples that fail the stencil test.</p>
</li>
<li>
<p><code>passOp</code> is a <a href="chap26.html#VkStencilOp">VkStencilOp</a> value specifying the action
performed on samples that pass both the depth and stencil tests.</p>
</li>
<li>
<p><code>depthFailOp</code> is a <a href="chap26.html#VkStencilOp">VkStencilOp</a> value specifying the action
performed on samples that pass the stencil test and fail the depth test.</p>
</li>
<li>
<p><code>compareOp</code> is a <a href="chap26.html#VkCompareOp">VkCompareOp</a> value specifying the comparison
operator used in the stencil test.</p>
</li>
<li>
<p><code>compareMask</code> selects the bits of the unsigned integer stencil
values participating in the stencil test.</p>
</li>
<li>
<p><code>writeMask</code> selects the bits of the unsigned integer stencil values
updated by the stencil test in the stencil framebuffer attachment.</p>
</li>
<li>
<p><code>reference</code> is an integer reference value that is used in the
unsigned stencil comparison.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkStencilOpState-failOp-parameter" href="chap26.html#VUID-VkStencilOpState-failOp-parameter"></a> <span class="vuid">VUID-VkStencilOpState-failOp-parameter</span><br>
 <code>failOp</code> <strong class="purple">must</strong> be a valid <a href="chap26.html#VkStencilOp">VkStencilOp</a> value</p>
</li>
<li>
<p><a id="VUID-VkStencilOpState-passOp-parameter" href="chap26.html#VUID-VkStencilOpState-passOp-parameter"></a> <span class="vuid">VUID-VkStencilOpState-passOp-parameter</span><br>
 <code>passOp</code> <strong class="purple">must</strong> be a valid <a href="chap26.html#VkStencilOp">VkStencilOp</a> value</p>
</li>
<li>
<p><a id="VUID-VkStencilOpState-depthFailOp-parameter" href="chap26.html#VUID-VkStencilOpState-depthFailOp-parameter"></a> <span class="vuid">VUID-VkStencilOpState-depthFailOp-parameter</span><br>
 <code>depthFailOp</code> <strong class="purple">must</strong> be a valid <a href="chap26.html#VkStencilOp">VkStencilOp</a> value</p>
</li>
<li>
<p><a id="VUID-VkStencilOpState-compareOp-parameter" href="chap26.html#VUID-VkStencilOpState-compareOp-parameter"></a> <span class="vuid">VUID-VkStencilOpState-compareOp-parameter</span><br>
 <code>compareOp</code> <strong class="purple">must</strong> be a valid <a href="chap26.html#VkCompareOp">VkCompareOp</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To <a href="chap10.html#pipelines-dynamic-state">dynamically set</a> the stencil compare mask,
call:</p>
</div>
<div id="vkCmdSetStencilCompareMask" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdSetStencilCompareMask</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkStencilFaceFlags</span>                          <span class="n">faceMask</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">compareMask</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>faceMask</code> is a bitmask of <a href="chap26.html#VkStencilFaceFlagBits">VkStencilFaceFlagBits</a> specifying
the set of stencil state for which to update the compare mask.</p>
</li>
<li>
<p><code>compareMask</code> is the new value to use as the stencil compare mask.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command sets the stencil compare mask for subsequent drawing commands
when the graphics pipeline is created with
<code>VK_DYNAMIC_STATE_STENCIL_COMPARE_MASK</code> set in
<a href="chap10.html#VkPipelineDynamicStateCreateInfo">VkPipelineDynamicStateCreateInfo</a>::<code>pDynamicStates</code>.
Otherwise, this state is specified by the
<a href="chap26.html#VkPipelineDepthStencilStateCreateInfo">VkPipelineDepthStencilStateCreateInfo</a>::<code>compareMask</code> value used to
create the currently active pipeline, for both front and back faces.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdSetStencilCompareMask-commandBuffer-parameter" href="chap26.html#VUID-vkCmdSetStencilCompareMask-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdSetStencilCompareMask-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilCompareMask-faceMask-parameter" href="chap26.html#VUID-vkCmdSetStencilCompareMask-faceMask-parameter"></a> <span class="vuid">VUID-vkCmdSetStencilCompareMask-faceMask-parameter</span><br>
 <code>faceMask</code> <strong class="purple">must</strong> be a valid combination of <a href="chap26.html#VkStencilFaceFlagBits">VkStencilFaceFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilCompareMask-faceMask-requiredbitmask" href="chap26.html#VUID-vkCmdSetStencilCompareMask-faceMask-requiredbitmask"></a> <span class="vuid">VUID-vkCmdSetStencilCompareMask-faceMask-requiredbitmask</span><br>
 <code>faceMask</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilCompareMask-commandBuffer-recording" href="chap26.html#VUID-vkCmdSetStencilCompareMask-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdSetStencilCompareMask-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilCompareMask-commandBuffer-cmdpool" href="chap26.html#VUID-vkCmdSetStencilCompareMask-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdSetStencilCompareMask-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><code>VkStencilFaceFlagBits</code> values are:</p>
</div>
<div id="VkStencilFaceFlagBits" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkStencilFaceFlagBits</span> <span class="p">{</span>
    <span class="n">VK_STENCIL_FACE_FRONT_BIT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_STENCIL_FACE_BACK_BIT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_STENCIL_FACE_FRONT_AND_BACK</span> <span class="o">=</span> <span class="mh">0x00000003</span><span class="p">,</span>
    <span class="n">VK_STENCIL_FRONT_AND_BACK</span> <span class="o">=</span> <span class="n">VK_STENCIL_FACE_FRONT_AND_BACK</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkStencilFaceFlagBits</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_STENCIL_FACE_FRONT_BIT</code> specifies that only the front set of
stencil state is updated.</p>
</li>
<li>
<p><code>VK_STENCIL_FACE_BACK_BIT</code> specifies that only the back set of
stencil state is updated.</p>
</li>
<li>
<p><code>VK_STENCIL_FACE_FRONT_AND_BACK</code> is the combination of
<code>VK_STENCIL_FACE_FRONT_BIT</code> and <code>VK_STENCIL_FACE_BACK_BIT</code>, and
specifies that both sets of stencil state are updated.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkStencilFaceFlags" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkStencilFaceFlags</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkStencilFaceFlags</code> is a bitmask type for setting a mask of zero or
more <a href="chap26.html#VkStencilFaceFlagBits">VkStencilFaceFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To <a href="chap10.html#pipelines-dynamic-state">dynamically set</a> the stencil write mask,
call:</p>
</div>
<div id="vkCmdSetStencilWriteMask" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdSetStencilWriteMask</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkStencilFaceFlags</span>                          <span class="n">faceMask</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">writeMask</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>faceMask</code> is a bitmask of <a href="chap26.html#VkStencilFaceFlagBits">VkStencilFaceFlagBits</a> specifying
the set of stencil state for which to update the write mask, as
described above for <a href="chap26.html#vkCmdSetStencilCompareMask">vkCmdSetStencilCompareMask</a>.</p>
</li>
<li>
<p><code>writeMask</code> is the new value to use as the stencil write mask.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command sets the stencil write mask for subsequent drawing commands
when the graphics pipeline is created with
<code>VK_DYNAMIC_STATE_STENCIL_WRITE_MASK</code> set in
<a href="chap10.html#VkPipelineDynamicStateCreateInfo">VkPipelineDynamicStateCreateInfo</a>::<code>pDynamicStates</code>.
Otherwise, this state is specified by the
<a href="chap26.html#VkPipelineDepthStencilStateCreateInfo">VkPipelineDepthStencilStateCreateInfo</a>::<code>writeMask</code> value used to
create the currently active pipeline, for both front and back faces.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdSetStencilWriteMask-commandBuffer-parameter" href="chap26.html#VUID-vkCmdSetStencilWriteMask-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdSetStencilWriteMask-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilWriteMask-faceMask-parameter" href="chap26.html#VUID-vkCmdSetStencilWriteMask-faceMask-parameter"></a> <span class="vuid">VUID-vkCmdSetStencilWriteMask-faceMask-parameter</span><br>
 <code>faceMask</code> <strong class="purple">must</strong> be a valid combination of <a href="chap26.html#VkStencilFaceFlagBits">VkStencilFaceFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilWriteMask-faceMask-requiredbitmask" href="chap26.html#VUID-vkCmdSetStencilWriteMask-faceMask-requiredbitmask"></a> <span class="vuid">VUID-vkCmdSetStencilWriteMask-faceMask-requiredbitmask</span><br>
 <code>faceMask</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilWriteMask-commandBuffer-recording" href="chap26.html#VUID-vkCmdSetStencilWriteMask-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdSetStencilWriteMask-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilWriteMask-commandBuffer-cmdpool" href="chap26.html#VUID-vkCmdSetStencilWriteMask-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdSetStencilWriteMask-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To <a href="chap10.html#pipelines-dynamic-state">dynamically set</a> the stencil reference value,
call:</p>
</div>
<div id="vkCmdSetStencilReference" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdSetStencilReference</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkStencilFaceFlags</span>                          <span class="n">faceMask</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">reference</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>faceMask</code> is a bitmask of <a href="chap26.html#VkStencilFaceFlagBits">VkStencilFaceFlagBits</a> specifying
the set of stencil state for which to update the reference value, as
described above for <a href="chap26.html#vkCmdSetStencilCompareMask">vkCmdSetStencilCompareMask</a>.</p>
</li>
<li>
<p><code>reference</code> is the new value to use as the stencil reference value.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command sets the stencil reference value for subsequent drawing
commands when the graphics pipeline is created with
<code>VK_DYNAMIC_STATE_STENCIL_REFERENCE</code> set in
<a href="chap10.html#VkPipelineDynamicStateCreateInfo">VkPipelineDynamicStateCreateInfo</a>::<code>pDynamicStates</code>.
Otherwise, this state is specified by the
<a href="chap26.html#VkPipelineDepthStencilStateCreateInfo">VkPipelineDepthStencilStateCreateInfo</a>::<code>reference</code> value used to
create the currently active pipeline, for both front and back faces.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdSetStencilReference-commandBuffer-parameter" href="chap26.html#VUID-vkCmdSetStencilReference-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdSetStencilReference-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilReference-faceMask-parameter" href="chap26.html#VUID-vkCmdSetStencilReference-faceMask-parameter"></a> <span class="vuid">VUID-vkCmdSetStencilReference-faceMask-parameter</span><br>
 <code>faceMask</code> <strong class="purple">must</strong> be a valid combination of <a href="chap26.html#VkStencilFaceFlagBits">VkStencilFaceFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilReference-faceMask-requiredbitmask" href="chap26.html#VUID-vkCmdSetStencilReference-faceMask-requiredbitmask"></a> <span class="vuid">VUID-vkCmdSetStencilReference-faceMask-requiredbitmask</span><br>
 <code>faceMask</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilReference-commandBuffer-recording" href="chap26.html#VUID-vkCmdSetStencilReference-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdSetStencilReference-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSetStencilReference-commandBuffer-cmdpool" href="chap26.html#VUID-vkCmdSetStencilReference-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdSetStencilReference-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of <a href="chap26.html#VkStencilOpState">VkStencilOpState</a>::<code>compareOp</code>, specifying the
stencil comparison function, are:</p>
</div>
<div id="VkCompareOp" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkCompareOp</span> <span class="p">{</span>
    <span class="n">VK_COMPARE_OP_NEVER</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_COMPARE_OP_LESS</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">VK_COMPARE_OP_EQUAL</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">VK_COMPARE_OP_LESS_OR_EQUAL</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
    <span class="n">VK_COMPARE_OP_GREATER</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
    <span class="n">VK_COMPARE_OP_NOT_EQUAL</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">VK_COMPARE_OP_GREATER_OR_EQUAL</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
    <span class="n">VK_COMPARE_OP_ALWAYS</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkCompareOp</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_COMPARE_OP_NEVER</code> specifies that the test evaluates to false.</p>
</li>
<li>
<p><code>VK_COMPARE_OP_LESS</code> specifies that the test evaluates <span class="eq">A &lt; B</span>.</p>
</li>
<li>
<p><code>VK_COMPARE_OP_EQUAL</code> specifies that the test evaluates <span class="eq">A = B</span>.</p>
</li>
<li>
<p><code>VK_COMPARE_OP_LESS_OR_EQUAL</code> specifies that the test evaluates
<span class="eq">A ≤ B</span>.</p>
</li>
<li>
<p><code>VK_COMPARE_OP_GREATER</code> specifies that the test evaluates <span class="eq">A &gt;
B</span>.</p>
</li>
<li>
<p><code>VK_COMPARE_OP_NOT_EQUAL</code> specifies that the test evaluates <span class="eq">A
≠ B</span>.</p>
</li>
<li>
<p><code>VK_COMPARE_OP_GREATER_OR_EQUAL</code> specifies that the test evaluates
<span class="eq">A ≥ B</span>.</p>
</li>
<li>
<p><code>VK_COMPARE_OP_ALWAYS</code> specifies that the test evaluates to true.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of the <code>failOp</code>, <code>passOp</code>, and <code>depthFailOp</code>
members of <a href="chap26.html#VkStencilOpState">VkStencilOpState</a>, specifying what happens to the stored
stencil value if this or certain subsequent tests fail or pass, are:</p>
</div>
<div id="VkStencilOp" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkStencilOp</span> <span class="p">{</span>
    <span class="n">VK_STENCIL_OP_KEEP</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_STENCIL_OP_ZERO</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">VK_STENCIL_OP_REPLACE</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">VK_STENCIL_OP_INCREMENT_AND_CLAMP</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
    <span class="n">VK_STENCIL_OP_DECREMENT_AND_CLAMP</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
    <span class="n">VK_STENCIL_OP_INVERT</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">VK_STENCIL_OP_INCREMENT_AND_WRAP</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
    <span class="n">VK_STENCIL_OP_DECREMENT_AND_WRAP</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkStencilOp</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_STENCIL_OP_KEEP</code> keeps the current value.</p>
</li>
<li>
<p><code>VK_STENCIL_OP_ZERO</code> sets the value to 0.</p>
</li>
<li>
<p><code>VK_STENCIL_OP_REPLACE</code> sets the value to <code>reference</code>.</p>
</li>
<li>
<p><code>VK_STENCIL_OP_INCREMENT_AND_CLAMP</code> increments the current value and
clamps to the maximum representable unsigned value.</p>
</li>
<li>
<p><code>VK_STENCIL_OP_DECREMENT_AND_CLAMP</code> decrements the current value and
clamps to 0.</p>
</li>
<li>
<p><code>VK_STENCIL_OP_INVERT</code> bitwise-inverts the current value.</p>
</li>
<li>
<p><code>VK_STENCIL_OP_INCREMENT_AND_WRAP</code> increments the current value and
wraps to 0 when the maximum value would have been exceeded.</p>
</li>
<li>
<p><code>VK_STENCIL_OP_DECREMENT_AND_WRAP</code> decrements the current value and
wraps to the maximum possible value when the value would go below 0.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For purposes of increment and decrement, the stencil bits are considered as
an unsigned integer.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="fragops-depth"><a class="anchor" href="chap26.html#fragops-depth"></a>26.8. Depth Test</h3>
<div class="paragraph">
<p>The depth test compares the depth value <span class="eq">z<sub>a</sub></span> in the depth/stencil
attachment at each sample’s framebuffer coordinates <span class="eq">(x<sub>f</sub>,y<sub>f</sub>)</span> and
<a href="chap25.html#primsrast-multisampling-coverage-mask">sample index</a> <span class="eq">i</span> against the
sample’s depth value <span class="eq">z<sub>f</sub></span>.
If there is no depth attachment then the depth test is skipped.</p>
</div>
<div class="paragraph">
<p>The depth test occurs in three stages, as detailed in the following
sections.</p>
</div>
<div class="sect3">
<h4 id="_depth_clamping_and_range_adjustment"><a class="anchor" href="chap26.html#_depth_clamping_and_range_adjustment"></a>26.8.1. Depth Clamping and Range Adjustment</h4>
<div class="paragraph">
<p>If <a href="chap25.html#VkPipelineRasterizationStateCreateInfo">VkPipelineRasterizationStateCreateInfo</a>::<code>depthClampEnable</code> is
enabled, before the sample’s <span class="eq">z<sub>f</sub></span> is compared to <span class="eq">z<sub>a</sub></span>,
<span class="eq">z<sub>f</sub></span> is clamped to <span class="eq">[min(n,f),max(n,f)]</span>, where <span class="eq">n</span> and
<span class="eq">f</span> are the <code>minDepth</code> and <code>maxDepth</code> depth range values of the
viewport used by this fragment, respectively.</p>
</div>
<div class="paragraph">
<p>If depth clamping is not enabled and <span class="eq">z<sub>f</sub></span> is not in the range <span class="eq">[0,
1]</span>
then <span class="eq">z<sub>f</sub></span> is undefined following this step.</p>
</div>
</div>
<div class="sect3">
<h4 id="_depth_comparison"><a class="anchor" href="chap26.html#_depth_comparison"></a>26.8.2. Depth Comparison</h4>
<div class="paragraph">
<p>If the depth test is not enabled, as specified by
<a href="chap26.html#vkCmdSetDepthTestEnable">vkCmdSetDepthTestEnable</a> or
<a href="chap26.html#VkPipelineDepthStencilStateCreateInfo">VkPipelineDepthStencilStateCreateInfo</a>::<code>depthTestEnable</code>, then
this step is skipped.</p>
</div>
<div class="paragraph">
<p>The comparison performed is based on the <a href="chap26.html#VkCompareOp">VkCompareOp</a>, set by
<a href="chap26.html#vkCmdSetDepthCompareOp">vkCmdSetDepthCompareOp</a> or
<a href="chap26.html#VkPipelineDepthStencilStateCreateInfo">VkPipelineDepthStencilStateCreateInfo</a>::<code>depthCompareOp</code> during
pipeline creation.
<span class="eq">z<sub>f</sub></span> and <span class="eq">z<sub>a</sub></span> are used as <span class="eq">A</span> and <span class="eq">B</span>, respectively, in
the operation specified by the <a href="chap26.html#VkCompareOp">VkCompareOp</a>.</p>
</div>
<div class="paragraph">
<p>If the comparison evaluates to false, the coverage for the sample is set to
<code>0</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="fragops-depth-write"><a class="anchor" href="chap26.html#fragops-depth-write"></a>26.8.3. Depth Attachment Writes</h4>
<div class="paragraph">
<p>If depth writes are enabled, as specified by
<a href="chap26.html#vkCmdSetDepthWriteEnable">vkCmdSetDepthWriteEnable</a> or
<a href="chap26.html#VkPipelineDepthStencilStateCreateInfo">VkPipelineDepthStencilStateCreateInfo</a>::<code>depthWriteEnable</code>, and the
comparison evaluated to true, the depth attachment value <span class="eq">z<sub>a</sub></span> is set
to the sample’s depth value <span class="eq">z<sub>f</sub></span>.
If there is no depth attachment, no value is written.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To <a href="chap10.html#pipelines-dynamic-state">dynamically enable or disable</a> the depth
test, call:</p>
</div>
<div id="vkCmdSetDepthTestEnable" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="kt">void</span> <span class="nf">vkCmdSetDepthTestEnable</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkBool32</span>                                    <span class="n">depthTestEnable</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>depthTestEnable</code> specifies if the depth test is enabled.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command sets the depth test enable for subsequent drawing commands when
the graphics pipeline is created with
<code>VK_DYNAMIC_STATE_DEPTH_TEST_ENABLE</code> set in
<a href="chap10.html#VkPipelineDynamicStateCreateInfo">VkPipelineDynamicStateCreateInfo</a>::<code>pDynamicStates</code>.
Otherwise, this state is specified by the
<a href="chap26.html#VkPipelineDepthStencilStateCreateInfo">VkPipelineDepthStencilStateCreateInfo</a>::<code>depthTestEnable</code> value
used to create the currently active pipeline.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdSetDepthTestEnable-commandBuffer-parameter" href="chap26.html#VUID-vkCmdSetDepthTestEnable-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdSetDepthTestEnable-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdSetDepthTestEnable-commandBuffer-recording" href="chap26.html#VUID-vkCmdSetDepthTestEnable-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdSetDepthTestEnable-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSetDepthTestEnable-commandBuffer-cmdpool" href="chap26.html#VUID-vkCmdSetDepthTestEnable-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdSetDepthTestEnable-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To <a href="chap10.html#pipelines-dynamic-state">dynamically set</a> the depth compare operator,
call:</p>
</div>
<div id="vkCmdSetDepthCompareOp" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="kt">void</span> <span class="nf">vkCmdSetDepthCompareOp</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkCompareOp</span>                                 <span class="n">depthCompareOp</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>depthCompareOp</code> specifies the depth comparison operator.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command sets the depth comparison operator for subsequent drawing
commands when the graphics pipeline is created with
<code>VK_DYNAMIC_STATE_DEPTH_COMPARE_OP</code> set in
<a href="chap10.html#VkPipelineDynamicStateCreateInfo">VkPipelineDynamicStateCreateInfo</a>::<code>pDynamicStates</code>.
Otherwise, this state is specified by the
<a href="chap26.html#VkPipelineDepthStencilStateCreateInfo">VkPipelineDepthStencilStateCreateInfo</a>::<code>depthCompareOp</code> value used
to create the currently active pipeline.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdSetDepthCompareOp-commandBuffer-parameter" href="chap26.html#VUID-vkCmdSetDepthCompareOp-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdSetDepthCompareOp-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdSetDepthCompareOp-depthCompareOp-parameter" href="chap26.html#VUID-vkCmdSetDepthCompareOp-depthCompareOp-parameter"></a> <span class="vuid">VUID-vkCmdSetDepthCompareOp-depthCompareOp-parameter</span><br>
 <code>depthCompareOp</code> <strong class="purple">must</strong> be a valid <a href="chap26.html#VkCompareOp">VkCompareOp</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdSetDepthCompareOp-commandBuffer-recording" href="chap26.html#VUID-vkCmdSetDepthCompareOp-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdSetDepthCompareOp-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSetDepthCompareOp-commandBuffer-cmdpool" href="chap26.html#VUID-vkCmdSetDepthCompareOp-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdSetDepthCompareOp-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To <a href="chap10.html#pipelines-dynamic-state">dynamically set</a> the depth write enable,
call:</p>
</div>
<div id="vkCmdSetDepthWriteEnable" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="kt">void</span> <span class="nf">vkCmdSetDepthWriteEnable</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkBool32</span>                                    <span class="n">depthWriteEnable</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>depthWriteEnable</code> specifies if depth writes are enabled.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command sets the depth write enable for subsequent drawing commands
when the graphics pipeline is created with
<code>VK_DYNAMIC_STATE_DEPTH_WRITE_ENABLE</code> set in
<a href="chap10.html#VkPipelineDynamicStateCreateInfo">VkPipelineDynamicStateCreateInfo</a>::<code>pDynamicStates</code>.
Otherwise, this state is specified by the
<a href="chap26.html#VkPipelineDepthStencilStateCreateInfo">VkPipelineDepthStencilStateCreateInfo</a>::<code>depthWriteEnable</code> value
used to create the currently active pipeline.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdSetDepthWriteEnable-commandBuffer-parameter" href="chap26.html#VUID-vkCmdSetDepthWriteEnable-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdSetDepthWriteEnable-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdSetDepthWriteEnable-commandBuffer-recording" href="chap26.html#VUID-vkCmdSetDepthWriteEnable-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdSetDepthWriteEnable-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSetDepthWriteEnable-commandBuffer-cmdpool" href="chap26.html#VUID-vkCmdSetDepthWriteEnable-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdSetDepthWriteEnable-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="fragops-samplecount"><a class="anchor" href="chap26.html#fragops-samplecount"></a>26.9. Sample Counting</h3>
<div class="paragraph">
<p>Occlusion queries use query pool entries to track the number of samples that
pass all the per-fragment tests.
The mechanism of collecting an occlusion query value is described in
<a href="chap17.html#queries-occlusion">Occlusion Queries</a>.</p>
</div>
<div class="paragraph">
<p>The occlusion query sample counter increments by one for each sample with a
coverage value of 1 in each fragment that survives all the per-fragment
tests, including scissor,
sample mask, alpha to coverage, stencil, and depth tests.</p>
</div>
</div>
<div class="sect2">
<h3 id="fragops-coverage-reduction"><a class="anchor" href="chap26.html#fragops-coverage-reduction"></a>26.10. Coverage Reduction</h3>
<div class="paragraph">
<p>Coverage reduction takes the coverage information for a fragment and
converts that to a boolean coverage value for each color sample in each
pixel covered by the fragment.</p>
</div>
<div class="sect3">
<h4 id="_pixel_coverage"><a class="anchor" href="chap26.html#_pixel_coverage"></a>26.10.1. Pixel Coverage</h4>
<div class="paragraph">
<p>Coverage for each pixel is first extracted from the total fragment coverage
mask.
This consists of <code>rasterizationSamples</code> unique coverage samples for each
pixel in the fragment area, each with a unique
<a href="chap25.html#primsrast-multisampling-coverage-mask">sample index</a>.
If the fragment only contains a single pixel, coverage for the pixel is
equivalent to the fragment coverage.</p>
</div>
</div>
<div class="sect3">
<h4 id="_color_sample_coverage"><a class="anchor" href="chap26.html#_color_sample_coverage"></a>26.10.2. Color Sample Coverage</h4>
<div class="paragraph">
<p>Once pixel coverage is determined, coverage for each individual color sample
corresponding to that pixel is determined.</p>
</div>
<div class="paragraph">
<p>The
number of <code>rasterizationSamples</code> is identical to the number of samples
in the color attachments.
A color sample is covered if the pixel coverage sample with the same
<a href="chap25.html#primsrast-multisampling-coverage-mask">sample index</a> <span class="eq">i</span> is covered.</p>
</div>
</div>
</div>
</div>
</div></div>

<nav>
  <a rel="prev" href="chap25.html" class="nav nav-prev" title="Previous page" aria-label="Previous page" aria-keyshortcuts="Left">
        <i class="fa fa-angle-left"></i>
     </a>
  <a rel="next" href="chap27.html" class="nav nav-next" title="Next page" aria-label="Next page" aria-keyshortcuts="Right">
        <i class="fa fa-angle-right"></i>
     </a>
  <div style="clear: both"></div>
</nav>
<div id="footer">
<div id="footer-text">
Version 1.3.209<br>
Last updated 2022-01-21 21:58:54 -0800
</div>
</div>



</body>
  <script>
  function isInViewport(ele) {
    const rect = ele.getBoundingClientRect();
    return (
        rect.top >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight)
    );
  }
  function yPosition (ele) {
    const rect = ele.getBoundingClientRect();
    return (rect.top - 20); // 20px above
  }
  let curr = document.getElementsByClassName('current');
  if (!isInViewport(curr[curr.length - 1])) {
    document.getElementById('toc').scrollTo({
      top: yPosition(curr[0]),
      left: 0,
      behavior: 'smooth'
    });
  }

  /* For page navigation */
  function gotoPage(selector) {
    const button = document.querySelector(selector);
    if (button)
      window.location.href = button.href;
  }
  document.addEventListener('keydown', e => {
    switch (e.key) {
      case 'ArrowRight':
        e.preventDefault();
        gotoPage('.nav-next');
        break;
      case 'ArrowLeft':
        e.preventDefault();
        gotoPage('.nav-prev');
        break;
    }
  });
  </script>
  </html>