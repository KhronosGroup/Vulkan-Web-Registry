<!DOCTYPE html><html lang="en"><head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="author" content="The Khronos® Vulkan Working Group">
<title>Vulkan® 1.3.212 - A Specification</title>
<link rel="stylesheet" href="style0.css" type="text/css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="style1.css" type="text/css">
<link rel="stylesheet" href="style2.css" type="text/css">

<!-- dragged in by font-awesome css included by asciidoctor, but preloaded in this extension for convenience -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0" as="font" type="font/woff2" crossorigin="">

<!-- Note: Chrome needs crossorigin="" even for same-origin fonts -->
<link rel="preload" href="../katex/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Typewriter-Regular.woff2" as="font" type="font/woff2" crossorigin=""><link rel="stylesheet" href="../katex/katex.min.css">
<!--ChunkedSearchJSMarker-->
<link href="chunked.css?4" rel="stylesheet">
<script>var searchindexurl = 'search.index.js?4' + (document.title.replace(/[^0-9.]/g, ''));</script>
<script src="chunked.js?4"></script>
<link rel="stylesheet" href="style3.css" type="text/css">
<script>
    function hideElement(e){
        e.setAttribute("hidden", "");
        e.classList.add("hidden");
    }

    function unhideElement(e){
        e.classList.remove("hidden");
        e.removeAttribute("hidden");
    }

    function hideLoadableContent(){
        unhideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) hideElement(loadable);
    }

    function unhideLoadableContent(){
        hideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) unhideElement(loadable);
    }

    window.addEventListener("load", unhideLoadableContent);
</script>
<link rel="stylesheet" href="asciidoctor-chunker.css" type="text/css"></head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Vulkan<sup>®</sup> 1.3.212 - A Specification </h1>
<div class="details">
<span id="author" class="author">The Khronos<sup>®</sup> Vulkan Working Group</span><br>
<span id="revnumber">version 1.3.212,</span>
<span id="revdate">2022-04-21 07:50:07Z</span>
<br><span id="revremark">from git branch: github-main commit: 0a80073e9078eae4266ca779d91e36e91c49a54c</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="index.html">Titlepage</a></li><li><a href="chap1.html">1. Preamble</a></li>
<li><a href="chap2.html">2. Introduction</a>
<ul class="sectlevel2">
<li><a href="chap2.html#introduction-conventions">2.1. Document Conventions</a></li>
</ul>
</li>
<li><a href="chap3.html">3. Fundamentals</a>
<ul class="sectlevel2">
<li><a href="chap3.html#fundamentals-host-environment">3.1. Host and Device Environment</a></li>
<li><a href="chap3.html#fundamentals-execmodel">3.2. Execution Model</a></li>
<li><a href="chap3.html#fundamentals-objectmodel-overview">3.3. Object Model</a></li>
<li><a href="chap3.html#fundamentals-abi">3.4. Application Binary Interface</a></li>
<li><a href="chap3.html#fundamentals-commandsyntax">3.5. Command Syntax and Duration</a></li>
<li><a href="chap3.html#fundamentals-threadingbehavior">3.6. Threading Behavior</a></li>
<li><a href="chap3.html#fundamentals-validusage">3.7. Valid Usage</a></li>
<li><a href="chap3.html#fundamentals-returncodes">3.8. <code>VkResult</code> Return Codes</a></li>
<li><a href="chap3.html#fundamentals-numerics">3.9. Numeric Representation and Computation</a></li>
<li><a href="chap3.html#fundamentals-fixedconv">3.10. Fixed-Point Data Conversions</a></li>
<li><a href="chap3.html#fundamentals-common-objects">3.11. Common Object Types</a></li>
<li><a href="chap3.html#fundamentals-api-name-aliases">3.12. API Name Aliases</a></li>
</ul>
</li>
<li><a href="chap4.html">4. Initialization</a>
<ul class="sectlevel2">
<li><a href="chap4.html#initialization-functionpointers">4.1. Command Function Pointers</a></li>
<li><a href="chap4.html#initialization-instances">4.2. Instances</a></li>
</ul>
</li>
<li><a href="chap5.html">5. Devices and Queues</a>
<ul class="sectlevel2">
<li><a href="chap5.html#devsandqueues-physical-device-enumeration">5.1. Physical Devices</a></li>
<li><a href="chap5.html#devsandqueues-devices">5.2. Devices</a></li>
<li><a href="chap5.html#devsandqueues-queues">5.3. Queues</a></li>
</ul>
</li>
<li><a href="chap6.html">6. Command Buffers</a>
<ul class="sectlevel2">
<li><a href="chap6.html#commandbuffers-lifecycle">6.1. Command Buffer Lifecycle</a></li>
<li><a href="chap6.html#commandbuffers-pools">6.2. Command Pools</a></li>
<li><a href="chap6.html#commandbuffer-allocation">6.3. Command Buffer Allocation and Management</a></li>
<li><a href="chap6.html#commandbuffers-recording">6.4. Command Buffer Recording</a></li>
<li><a href="chap6.html#commandbuffers-submission">6.5. Command Buffer Submission</a></li>
<li><a href="chap6.html#commandbuffers-submission-progress">6.6. Queue Forward Progress</a></li>
<li><a href="chap6.html#commandbuffers-secondary">6.7. Secondary Command Buffer Execution</a></li>
<li><a href="chap6.html#commandbuffers-devicemask">6.8. Command Buffer Device Mask</a></li>
</ul>
</li>
<li><a href="chap7.html">7. Synchronization and Cache Control</a>
<ul class="sectlevel2">
<li><a href="chap7.html#synchronization-dependencies">7.1. Execution and Memory Dependencies</a></li>
<li><a href="chap7.html#synchronization-implicit">7.2. Implicit Synchronization Guarantees</a></li>
<li><a href="chap7.html#synchronization-fences">7.3. Fences</a></li>
<li><a href="chap7.html#synchronization-semaphores">7.4. Semaphores</a></li>
<li><a href="chap7.html#synchronization-events">7.5. Events</a></li>
<li><a href="chap7.html#synchronization-pipeline-barriers">7.6. Pipeline Barriers</a></li>
<li><a href="chap7.html#synchronization-memory-barriers">7.7. Memory Barriers</a></li>
<li><a href="chap7.html#synchronization-wait-idle">7.8. Wait Idle Operations</a></li>
<li><a href="chap7.html#synchronization-submission-host-writes">7.9. Host Write Ordering Guarantees</a></li>
<li><a href="chap7.html#synchronization-device-group">7.10. Synchronization and Multiple Physical Devices</a></li>
</ul>
</li>
<li><a href="chap8.html">8. Render Pass</a>
<ul class="sectlevel2">
<li><a href="chap8.html#renderpass-creation">8.1. Render Pass Creation</a></li>
<li><a href="chap8.html#renderpass-compatibility">8.2. Render Pass Compatibility</a></li>
<li><a href="chap8.html#_framebuffers">8.3. Framebuffers</a></li>
<li><a href="chap8.html#renderpass-commands">8.4. Render Pass Commands</a></li>
</ul>
</li>
<li><a href="chap9.html">9. Shaders</a>
<ul class="sectlevel2">
<li><a href="chap9.html#shader-modules">9.1. Shader Modules</a></li>
<li><a href="chap9.html#shaders-execution">9.2. Shader Execution</a></li>
<li><a href="chap9.html#shaders-execution-memory-ordering">9.3. Shader Memory Access Ordering</a></li>
<li><a href="chap9.html#shaders-inputs">9.4. Shader Inputs and Outputs</a></li>
<li><a href="chap9.html#shaders-vertex">9.5. Vertex Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-control">9.6. Tessellation Control Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-evaluation">9.7. Tessellation Evaluation Shaders</a></li>
<li><a href="chap9.html#shaders-geometry">9.8. Geometry Shaders</a></li>
<li><a href="chap9.html#shaders-fragment">9.9. Fragment Shaders</a></li>
<li><a href="chap9.html#shaders-compute">9.10. Compute Shaders</a></li>
<li><a href="chap9.html#shaders-interpolation-decorations">9.11. Interpolation Decorations</a></li>
<li><a href="chap9.html#shaders-staticuse">9.12. Static Use</a></li>
<li><a href="chap9.html#shaders-scope">9.13. Scope</a></li>
<li><a href="chap9.html#shaders-group-operations">9.14. Group Operations</a></li>
<li><a href="chap9.html#shaders-quad-operations">9.15. Quad Group Operations</a></li>
<li><a href="chap9.html#shaders-derivative-operations">9.16. Derivative Operations</a></li>
<li><a href="chap9.html#shaders-helper-invocations">9.17. Helper Invocations</a></li>
</ul>
</li>
<li><a href="chap10.html">10. Pipelines</a>
<ul class="sectlevel2">
<li><a href="chap10.html#pipelines-compute">10.1. Compute Pipelines</a></li>
<li><a href="chap10.html#pipelines-graphics">10.2. Graphics Pipelines</a></li>
<li><a href="chap10.html#pipelines-destruction">10.3. Pipeline Destruction</a></li>
<li><a href="chap10.html#pipelines-multiple">10.4. Multiple Pipeline Creation</a></li>
<li><a href="chap10.html#pipelines-pipeline-derivatives">10.5. Pipeline Derivatives</a></li>
<li><a href="chap10.html#pipelines-cache">10.6. Pipeline Cache</a></li>
<li><a href="chap10.html#pipelines-specialization-constants">10.7. Specialization Constants</a></li>
<li><a href="chap10.html#pipelines-binding">10.8. Pipeline Binding</a></li>
<li><a href="chap10.html#pipelines-dynamic-state">10.9. Dynamic State</a></li>
<li><a href="chap10.html#pipelines-creation-feedback">10.10. Pipeline Creation Feedback</a></li>
</ul>
</li>
<li><a href="chap11.html">11. Memory Allocation</a>
<ul class="sectlevel2">
<li><a href="chap11.html#memory-host">11.1. Host Memory</a></li>
<li><a href="chap11.html#memory-device">11.2. Device Memory</a></li>
</ul>
</li>
<li><a href="chap12.html">12. Resource Creation</a>
<ul class="sectlevel2">
<li><a href="chap12.html#resources-buffers">12.1. Buffers</a></li>
<li><a href="chap12.html#resources-buffer-views">12.2. Buffer Views</a></li>
<li><a href="chap12.html#resources-images">12.3. Images</a></li>
<li><a href="chap12.html#resources-image-layouts">12.4. Image Layouts</a></li>
<li><a href="chap12.html#resources-image-views">12.5. Image Views</a></li>
<li><a href="chap12.html#resources-association">12.6. Resource Memory Association</a></li>
<li><a href="chap12.html#resources-sharing">12.7. Resource Sharing Mode</a></li>
<li><a href="chap12.html#resources-memory-aliasing">12.8. Memory Aliasing</a></li>
</ul>
</li>
<li><a href="chap13.html">13. Samplers</a>
<ul class="sectlevel2">
<li><a href="chap13.html#samplers-YCbCr-conversion">13.1. Sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></li>
</ul>
</li>
<li><a href="chap14.html">14. Resource Descriptors</a>
<ul class="sectlevel2">
<li><a href="chap14.html#descriptorsets-types">14.1. Descriptor Types</a></li>
<li><a href="chap14.html#descriptorsets-sets">14.2. Descriptor Sets</a></li>
<li><a href="chap14.html#descriptorsets-physical-storage-buffer">14.3. Physical Storage Buffer Access</a></li>
</ul>
</li>
<li><a href="chap15.html">15. Shader Interfaces</a>
<ul class="sectlevel2">
<li><a href="chap15.html#interfaces-iointerfaces">15.1. Shader Input and Output Interfaces</a></li>
<li><a href="chap15.html#interfaces-vertexinput">15.2. Vertex Input Interface</a></li>
<li><a href="chap15.html#interfaces-fragmentoutput">15.3. Fragment Output Interface</a></li>
<li><a href="chap15.html#interfaces-inputattachment">15.4. Fragment Input Attachment Interface</a></li>
<li><a href="chap15.html#interfaces-resources">15.5. Shader Resource Interface</a></li>
<li><a href="chap15.html#interfaces-builtin-variables">15.6. Built-In Variables</a></li>
</ul>
</li>
<li><a href="chap16.html">16. Image Operations</a>
<ul class="sectlevel2">
<li><a href="chap16.html#_image_operations_overview">16.1. Image Operations Overview</a></li>
<li><a href="chap16.html#_conversion_formulas">16.2. Conversion Formulas</a></li>
<li><a href="chap16.html#_texel_input_operations">16.3. Texel Input Operations</a></li>
<li><a href="chap16.html#_texel_output_operations">16.4. Texel Output Operations</a></li>
<li><a href="chap16.html#textures-normalized-operations">16.5. Normalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#_unnormalized_texel_coordinate_operations">16.6. Unnormalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-integer-coordinate-operations">16.7. Integer Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-sample-operations">16.8. Image Sample Operations</a></li>
<li><a href="chap16.html#textures-instructions">16.9. Image Operation Steps</a></li>
<li><a href="chap16.html#textures-queries">16.10. Image Query Instructions</a></li>
</ul>
</li>
<li><a href="chap17.html">17. Queries</a>
<ul class="sectlevel2">
<li><a href="chap17.html#queries-pools">17.1. Query Pools</a></li>
<li><a href="chap17.html#queries-operation">17.2. Query Operation</a></li>
<li><a href="chap17.html#queries-occlusion">17.3. Occlusion Queries</a></li>
<li><a href="chap17.html#queries-pipestats">17.4. Pipeline Statistics Queries</a></li>
<li><a href="chap17.html#queries-timestamps">17.5. Timestamp Queries</a></li>
</ul>
</li>
<li class="current"><a href="chap18.html">18. Clear Commands</a>
<ul class="sectlevel2">
<li class="current"><a href="chap18.html#clears-outside">18.1. Clearing Images Outside A Render Pass Instance</a></li>
<li class="current"><a href="chap18.html#clears-inside">18.2. Clearing Images Inside A Render Pass Instance</a></li>
<li class="current"><a href="chap18.html#clears-values">18.3. Clear Values</a></li>
<li class="current"><a href="chap18.html#clears-filling-buffers">18.4. Filling Buffers</a></li>
<li class="current"><a href="chap18.html#clears-updating-buffers">18.5. Updating Buffers</a></li>
</ul>
</li>
<li><a href="chap19.html">19. Copy Commands</a>
<ul class="sectlevel2">
<li><a href="chap19.html#copies-buffers">19.1. Copying Data Between Buffers</a></li>
<li><a href="chap19.html#copies-images">19.2. Copying Data Between Images</a></li>
<li><a href="chap19.html#copies-buffers-images">19.3. Copying Data Between Buffers and Images</a></li>
<li><a href="chap19.html#copies-imagescaling">19.4. Image Copies with Scaling</a></li>
<li><a href="chap19.html#copies-resolve">19.5. Resolving Multisample Images</a></li>
</ul>
</li>
<li><a href="chap20.html">20. Drawing Commands</a>
<ul class="sectlevel2">
<li><a href="chap20.html#drawing-primitive-topologies">20.1. Primitive Topologies</a></li>
<li><a href="chap20.html#drawing-primitive-order">20.2. Primitive Order</a></li>
<li><a href="chap20.html#drawing-primitive-shading">20.3. Programmable Primitive Shading</a></li>
</ul>
</li>
<li><a href="chap21.html">21. Fixed-Function Vertex Processing</a>
<ul class="sectlevel2">
<li><a href="chap21.html#fxvertex-attrib">21.1. Vertex Attributes</a></li>
<li><a href="chap21.html#fxvertex-input">21.2. Vertex Input Description</a></li>
<li><a href="chap21.html#fxvertex-input-address-calculation">21.3. Vertex Input Address Calculation</a></li>
</ul>
</li>
<li><a href="chap22.html">22. Tessellation</a>
<ul class="sectlevel2">
<li><a href="chap22.html#_tessellator">22.1. Tessellator</a></li>
<li><a href="chap22.html#_tessellator_patch_discard">22.2. Tessellator Patch Discard</a></li>
<li><a href="chap22.html#tessellation-tessellator-spacing">22.3. Tessellator Spacing</a></li>
<li><a href="chap22.html#tessellation-primitive-order">22.4. Tessellation Primitive Ordering</a></li>
<li><a href="chap22.html#tessellation-vertex-winding-order">22.5. Tessellator Vertex Winding Order</a></li>
<li><a href="chap22.html#tessellation-triangle-tessellation">22.6. Triangle Tessellation</a></li>
<li><a href="chap22.html#tessellation-quad-tessellation">22.7. Quad Tessellation</a></li>
<li><a href="chap22.html#tessellation-isoline-tessellation">22.8. Isoline Tessellation</a></li>
<li><a href="chap22.html#tessellation-point-mode">22.9. Tessellation Point Mode</a></li>
<li><a href="chap22.html#_tessellation_pipeline_state">22.10. Tessellation Pipeline State</a></li>
</ul>
</li>
<li><a href="chap23.html">23. Geometry Shading</a>
<ul class="sectlevel2">
<li><a href="chap23.html#geometry-input">23.1. Geometry Shader Input Primitives</a></li>
<li><a href="chap23.html#geometry-output">23.2. Geometry Shader Output Primitives</a></li>
<li><a href="chap23.html#geometry-invocations">23.3. Multiple Invocations of Geometry Shaders</a></li>
<li><a href="chap23.html#geometry-ordering">23.4. Geometry Shader Primitive Ordering</a></li>
</ul>
</li>
<li><a href="chap24.html">24. Fixed-Function Vertex Post-Processing</a>
<ul class="sectlevel2">
<li><a href="chap24.html#vertexpostproc-flatshading">24.1. Flat Shading</a></li>
<li><a href="chap24.html#vertexpostproc-clipping">24.2. Primitive Clipping</a></li>
<li><a href="chap24.html#vertexpostproc-clipping-shader-outputs">24.3. Clipping Shader Outputs</a></li>
<li><a href="chap24.html#vertexpostproc-coord-transform">24.4. Coordinate Transformations</a></li>
<li><a href="chap24.html#vertexpostproc-viewport">24.5. Controlling the Viewport</a></li>
</ul>
</li>
<li><a href="chap25.html">25. Rasterization</a>
<ul class="sectlevel2">
<li><a href="chap25.html#primsrast-discard">25.1. Discarding Primitives Before Rasterization</a></li>
<li><a href="chap25.html#primsrast-order">25.2. Rasterization Order</a></li>
<li><a href="chap25.html#primsrast-multisampling">25.3. Multisampling</a></li>
<li><a href="chap25.html#primsrast-sampleshading">25.4. Sample Shading</a></li>
<li><a href="chap25.html#primsrast-points">25.5. Points</a></li>
<li><a href="chap25.html#primsrast-lines">25.6. Line Segments</a></li>
<li><a href="chap25.html#primsrast-polygons">25.7. Polygons</a></li>
</ul>
</li>
<li><a href="chap26.html">26. Fragment Operations</a>
<ul class="sectlevel2">
<li><a href="chap26.html#fragops-scissor">26.1. Scissor Test</a></li>
<li><a href="chap26.html#fragops-samplemask">26.2. Sample Mask Test</a></li>
<li><a href="chap26.html#fragops-shader">26.3. Fragment Shading</a></li>
<li><a href="chap26.html#fragops-covg">26.4. Multisample Coverage</a></li>
<li><a href="chap26.html#fragops-ds-state">26.5. Depth and Stencil Operations</a></li>
<li><a href="chap26.html#fragops-dbt">26.6. Depth Bounds Test</a></li>
<li><a href="chap26.html#fragops-stencil">26.7. Stencil Test</a></li>
<li><a href="chap26.html#fragops-depth">26.8. Depth Test</a></li>
<li><a href="chap26.html#fragops-samplecount">26.9. Sample Counting</a></li>
<li><a href="chap26.html#fragops-coverage-reduction">26.10. Coverage Reduction</a></li>
</ul>
</li>
<li><a href="chap27.html">27. The Framebuffer</a>
<ul class="sectlevel2">
<li><a href="chap27.html#framebuffer-blending">27.1. Blending</a></li>
<li><a href="chap27.html#framebuffer-logicop">27.2. Logical Operations</a></li>
<li><a href="chap27.html#framebuffer-color-write-mask">27.3. Color Write Mask</a></li>
</ul>
</li>
<li><a href="chap28.html">28. Dispatching Commands</a></li>
<li><a href="chap29.html">29. Sparse Resources</a>
<ul class="sectlevel2">
<li><a href="chap29.html#sparsememory-sparseresourcefeatures">29.1. Sparse Resource Features</a></li>
<li><a href="chap29.html#sparsememory-fully-resident">29.2. Sparse Buffers and Fully-Resident Images</a></li>
<li><a href="chap29.html#sparsememory-partially-resident-buffers">29.3. Sparse Partially-Resident Buffers</a></li>
<li><a href="chap29.html#sparsememory-partially-resident-images">29.4. Sparse Partially-Resident Images</a></li>
<li><a href="chap29.html#sparsememory-sparse-memory-aliasing">29.5. Sparse Memory Aliasing</a></li>
<li><a href="chap29.html#_sparse_resource_implementation_guidelines_informative">29.6. Sparse Resource Implementation Guidelines (Informative)</a></li>
<li><a href="chap29.html#sparsememory-resourceapi">29.7. Sparse Resource API</a></li>
</ul>
</li>
<li><a href="chap30.html">30. Private Data</a></li>
<li><a href="chap31.html">31. Extending Vulkan</a>
<ul class="sectlevel2">
<li><a href="chap31.html#extendingvulkan-instanceanddevicefunctionality">31.1. Instance and Device Functionality</a></li>
<li><a href="chap31.html#extendingvulkan-coreversions">31.2. Core Versions</a></li>
<li><a href="chap31.html#extendingvulkan-layers">31.3. Layers</a></li>
<li><a href="chap31.html#extendingvulkan-extensions">31.4. Extensions</a></li>
<li><a href="chap31.html#extendingvulkan-extensions-extensiondependencies">31.5. Extension Dependencies</a></li>
<li><a href="chap31.html#_compatibility_guarantees_informative">31.6. Compatibility Guarantees (Informative)</a></li>
</ul>
</li>
<li><a href="chap32.html">32. Features</a>
<ul class="sectlevel2">
<li><a href="chap32.html#features-requirements">32.1. Feature Requirements</a></li>
<li><a href="chap32.html#profile-features">32.2. Profile Features</a></li>
</ul>
</li>
<li><a href="chap33.html">33. Limits</a>
<ul class="sectlevel2">
<li><a href="chap33.html#limits-minmax">33.1. Limit Requirements</a></li>
<li><a href="chap33.html#profile-limits">33.2. Profile Limits</a></li>
</ul>
</li>
<li><a href="chap34.html">34. Formats</a>
<ul class="sectlevel2">
<li><a href="chap34.html#formats-definition">34.1. Format Definition</a></li>
<li><a href="chap34.html#formats-properties">34.2. Format Properties</a></li>
<li><a href="chap34.html#features-required-format-support">34.3. Required Format Support</a></li>
</ul>
</li>
<li><a href="chap35.html">35. Additional Capabilities</a>
<ul class="sectlevel2">
<li><a href="chap35.html#capabilities-image">35.1. Additional Image Capabilities</a></li>
<li><a href="chap35.html#capabilities-buffer">35.2. Additional Buffer Capabilities</a></li>
<li><a href="chap35.html#capabilities-semaphore">35.3. Optional Semaphore Capabilities</a></li>
<li><a href="chap35.html#capabilities-fence">35.4. Optional Fence Capabilities</a></li>
</ul>
</li>
<li><a href="chap36.html">36. Debugging</a>
<ul class="sectlevel2">
<li><a href="chap36.html#debugging-tooling-info">36.1. Active Tooling Information</a></li>
</ul>
</li>
<li><a href="chap37.html">Appendix A: Vulkan Environment for SPIR-V</a>
<ul class="sectlevel2">
<li><a href="chap37.html#_versions_and_formats">Versions and Formats</a></li>
<li><a href="chap37.html#spirvenv-capabilities">Capabilities</a></li>
<li><a href="chap37.html#spirvenv-module-validation">Validation Rules within a Module</a></li>
<li><a href="chap37.html#spirvenv-precision-operation">Precision and Operation of SPIR-V Instructions</a></li>
<li><a href="chap37.html#spirvenv-image-signedness">Signedness of SPIR-V Image Accesses</a></li>
<li><a href="chap37.html#spirvenv-format-type-matching">Image Format and Type Matching</a></li>
<li><a href="chap37.html#spirvenv-image-formats">Compatibility Between SPIR-V Image Formats And Vulkan Formats</a></li>
</ul>
</li>
<li><a href="chap38.html">Appendix B: Memory Model</a>
<ul class="sectlevel2">
<li><a href="chap38.html#memory-model-agent">Agent</a></li>
<li><a href="chap38.html#memory-model-memory-location">Memory Location</a></li>
<li><a href="chap38.html#memory-model-allocation">Allocation</a></li>
<li><a href="chap38.html#memory-model-memory-operation">Memory Operation</a></li>
<li><a href="chap38.html#memory-model-references">Reference</a></li>
<li><a href="chap38.html#memory-model-program-order">Program-Order</a></li>
<li><a href="chap38.html#memory-model-scope">Scope</a></li>
<li><a href="chap38.html#memory-model-atomic-operation">Atomic Operation</a></li>
<li><a href="chap38.html#memory-model-scoped-modification-order">Scoped Modification Order</a></li>
<li><a href="chap38.html#memory-model-memory-semantics">Memory Semantics</a></li>
<li><a href="chap38.html#memory-model-release-sequence">Release Sequence</a></li>
<li><a href="chap38.html#memory-model-synchronizes-with">Synchronizes-With</a></li>
<li><a href="chap38.html#memory-model-system-synchronizes-with">System-Synchronizes-With</a></li>
<li><a href="chap38.html#memory-model-non-private">Private vs. Non-Private</a></li>
<li><a href="chap38.html#memory-model-inter-thread-happens-before">Inter-Thread-Happens-Before</a></li>
<li><a href="chap38.html#memory-model-happens-before">Happens-Before</a></li>
<li><a href="chap38.html#memory-model-availability-visibility">Availability and Visibility</a></li>
<li><a href="chap38.html#memory-model-vulkan-availability-visibility">Availability, Visibility, and Domain Operations</a></li>
<li><a href="chap38.html#memory-model-availability-visibility-semantics">Availability and Visibility Semantics</a></li>
<li><a href="chap38.html#memory-model-instruction-av-vis">Per-Instruction Availability and Visibility Semantics</a></li>
<li><a href="chap38.html#memory-model-location-ordered">Location-Ordered</a></li>
<li><a href="chap38.html#memory-model-access-data-race">Data Race</a></li>
<li><a href="chap38.html#memory-model-visible-to">Visible-To</a></li>
<li><a href="chap38.html#memory-model-acyclicity">Acyclicity</a></li>
<li><a href="chap38.html#memory-model-shader-io">Shader I/O</a></li>
<li><a href="chap38.html#memory-model-deallocation">Deallocation</a></li>
<li><a href="chap38.html#memory-model-informative-descriptions">Descriptions (Informative)</a></li>
<li><a href="chap38.html#memory-model-tessellation-output-ordering">Tessellation Output Ordering</a></li>
</ul>
</li>
<li><a href="chap39.html">Appendix C: Compressed Image Formats</a>
<ul class="sectlevel2">
<li><a href="chap39.html#appendix-compressedtex-bc">Block-Compressed Image Formats</a></li>
<li><a href="chap39.html#appendix-compressedtex-etc2">ETC Compressed Image Formats</a></li>
<li><a href="chap39.html#appendix-compressedtex-astc">ASTC Compressed Image Formats</a></li>
</ul>
</li>
<li><a href="chap40.html">Appendix D: Core Revisions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap40.html#versions-1.3">Version 1.3</a></li>
<li><a href="chap40.html#versions-1.2">Version 1.2</a></li>
<li><a href="chap40.html#versions-1.1">Version 1.1</a></li>
<li><a href="chap40.html#versions-1.0">Version 1.0</a></li>
</ul>
</li>
<li><a href="chap41.html">Appendix E: Layers &amp; Extensions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap41.html#extension-appendices-list">List of Extensions</a></li>
</ul>
</li>
<li><a href="chap42.html">Appendix F: Vulkan Roadmap Milestones</a>
<ul class="sectlevel2">
<li><a href="chap42.html#roadmap-2022">Roadmap 2022</a></li>
</ul>
</li>
<li><a href="chap43.html">Appendix G: API Boilerplate</a>
<ul class="sectlevel2">
<li><a href="chap43.html#boilerplate-headers">Vulkan Header Files</a></li>
<li><a href="chap43.html#boilerplate-wsi-header">Window System-Specific Header Control (Informative)</a></li>
<li><a href="chap43.html#boilerplate-provisional-header">Provisional Extension Header Control (Informative)</a></li>
</ul>
</li>
<li><a href="chap44.html">Appendix H: Invariance</a>
<ul class="sectlevel2">
<li><a href="chap44.html#_repeatability">Repeatability</a></li>
<li><a href="chap44.html#_multi_pass_algorithms">Multi-pass Algorithms</a></li>
<li><a href="chap44.html#_invariance_rules">Invariance Rules</a></li>
<li><a href="chap44.html#_tessellation_invariance">Tessellation Invariance</a></li>
</ul>
</li>
<li><a href="chap45.html">Appendix I: Lexicon</a>
<ul class="sectlevel2">
<li><a href="chap45.html#glossary">Glossary</a></li>
<li><a href="chap45.html#lexicon-common-abbreviations">Common Abbreviations</a></li>
<li><a href="chap45.html#lexicon-prefixes">Prefixes</a></li>
</ul>
</li>
<li><a href="chap46.html">Appendix J: Credits (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap46.html#_working_group_contributors_to_vulkan">Working Group Contributors to Vulkan</a></li>
<li><a href="chap46.html#_other_credits">Other Credits</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="loading_msg" class="hidden" hidden=""><p>Loading… please wait.</p></div>
<!--ChunkedSearchboxMarker-->
<div class="searchbox"><label for="searchbox">Search: </label><input id="searchbox" type="text" disabled="disabled" value="Loading Search Data"><div id="resultsdiv"><ol id="results"></ol></div></div>
<div id="content" class="loadable"><div class="sect1">
<h2 id="clears"><a class="anchor" href="chap18.html"></a>18. Clear Commands</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="clears-outside"><a class="anchor" href="chap18.html#clears-outside"></a>18.1. Clearing Images Outside A Render Pass Instance</h3>
<div class="paragraph">
<p>Color and depth/stencil images <strong class="purple">can</strong> be cleared outside a render pass
instance using <a href="chap18.html#vkCmdClearColorImage">vkCmdClearColorImage</a> or
<a href="chap18.html#vkCmdClearDepthStencilImage">vkCmdClearDepthStencilImage</a>, respectively.
These commands are only allowed outside of a render pass instance.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To clear one or more subranges of a color image, call:</p>
</div>
<div id="vkCmdClearColorImage" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdClearColorImage</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">image</span><span class="p">,</span>
    <span class="n">VkImageLayout</span>                               <span class="n">imageLayout</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkClearColorValue</span><span class="o">*</span>                    <span class="n">pColor</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">rangeCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkImageSubresourceRange</span><span class="o">*</span>              <span class="n">pRanges</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>image</code> is the image to be cleared.</p>
</li>
<li>
<p><code>imageLayout</code> specifies the current layout of the image subresource
ranges to be cleared, and <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_GENERAL</code> or
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>.</p>
</li>
<li>
<p><code>pColor</code> is a pointer to a <a href="chap18.html#VkClearColorValue">VkClearColorValue</a> structure
containing the values that the image subresource ranges will be cleared
to (see <a href="chap18.html#clears-values">Clear Values</a> below).</p>
</li>
<li>
<p><code>rangeCount</code> is the number of image subresource range structures in
<code>pRanges</code>.</p>
</li>
<li>
<p><code>pRanges</code> is a pointer to an array of <a href="chap12.html#VkImageSubresourceRange">VkImageSubresourceRange</a>
structures describing a range of mipmap levels, array layers, and
aspects to be cleared, as described in <a href="chap12.html#resources-image-views">Image
Views</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each specified range in <code>pRanges</code> is cleared to the value specified by
<code>pColor</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdClearColorImage-image-01993" href="chap18.html#VUID-vkCmdClearColorImage-image-01993"></a> <span class="vuid">VUID-vkCmdClearColorImage-image-01993</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of <code>image</code>
<strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-image-00002" href="chap18.html#VUID-vkCmdClearColorImage-image-00002"></a> <span class="vuid">VUID-vkCmdClearColorImage-image-00002</span><br>

<code>image</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-image-01545" href="chap18.html#VUID-vkCmdClearColorImage-image-01545"></a> <span class="vuid">VUID-vkCmdClearColorImage-image-01545</span><br>

<code>image</code> <strong class="purple">must</strong> not use any of the
<a href="chap34.html#formats-requiring-sampler-ycbcr-conversion">formats that require a
sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-image-00003" href="chap18.html#VUID-vkCmdClearColorImage-image-00003"></a> <span class="vuid">VUID-vkCmdClearColorImage-image-00003</span><br>

If <code>image</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-imageLayout-00004" href="chap18.html#VUID-vkCmdClearColorImage-imageLayout-00004"></a> <span class="vuid">VUID-vkCmdClearColorImage-imageLayout-00004</span><br>

<code>imageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresource
ranges of <code>image</code> specified in <code>pRanges</code> at the time this
command is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-imageLayout-00005" href="chap18.html#VUID-vkCmdClearColorImage-imageLayout-00005"></a> <span class="vuid">VUID-vkCmdClearColorImage-imageLayout-00005</span><br>

<code>imageLayout</code> <strong class="purple">must</strong> be <code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-aspectMask-02498" href="chap18.html#VUID-vkCmdClearColorImage-aspectMask-02498"></a> <span class="vuid">VUID-vkCmdClearColorImage-aspectMask-02498</span><br>

The <a href="chap12.html#VkImageSubresourceRange">VkImageSubresourceRange</a>::<code>aspectMask</code> members of the
elements of the <code>pRanges</code> array <strong class="purple">must</strong> each only include
<code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-baseMipLevel-01470" href="chap18.html#VUID-vkCmdClearColorImage-baseMipLevel-01470"></a> <span class="vuid">VUID-vkCmdClearColorImage-baseMipLevel-01470</span><br>

The <a href="chap12.html#VkImageSubresourceRange">VkImageSubresourceRange</a>::<code>baseMipLevel</code> members of the
elements of the <code>pRanges</code> array <strong class="purple">must</strong> each be less than the
<code>mipLevels</code> specified in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code>
was created</p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-pRanges-01692" href="chap18.html#VUID-vkCmdClearColorImage-pRanges-01692"></a> <span class="vuid">VUID-vkCmdClearColorImage-pRanges-01692</span><br>

For each <a href="chap12.html#VkImageSubresourceRange">VkImageSubresourceRange</a> element of <code>pRanges</code>, if the
<code>levelCount</code> member is not <code>VK_REMAINING_MIP_LEVELS</code>, then
<span class="eq"><code>baseMipLevel</code> +  <code>levelCount</code></span> <strong class="purple">must</strong> be less than the
<code>mipLevels</code> specified in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code>
was created</p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-baseArrayLayer-01472" href="chap18.html#VUID-vkCmdClearColorImage-baseArrayLayer-01472"></a> <span class="vuid">VUID-vkCmdClearColorImage-baseArrayLayer-01472</span><br>

The <a href="chap12.html#VkImageSubresourceRange">VkImageSubresourceRange</a>::<code>baseArrayLayer</code> members of the
elements of the <code>pRanges</code> array <strong class="purple">must</strong> each be less than the
<code>arrayLayers</code> specified in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code>
was created</p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-pRanges-01693" href="chap18.html#VUID-vkCmdClearColorImage-pRanges-01693"></a> <span class="vuid">VUID-vkCmdClearColorImage-pRanges-01693</span><br>

For each <a href="chap12.html#VkImageSubresourceRange">VkImageSubresourceRange</a> element of <code>pRanges</code>, if the
<code>layerCount</code> member is not <code>VK_REMAINING_ARRAY_LAYERS</code>, then
<span class="eq"><code>baseArrayLayer</code> +  <code>layerCount</code></span> <strong class="purple">must</strong> be less than
the <code>arrayLayers</code> specified in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when
<code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-image-00007" href="chap18.html#VUID-vkCmdClearColorImage-image-00007"></a> <span class="vuid">VUID-vkCmdClearColorImage-image-00007</span><br>

<code>image</code> <strong class="purple">must</strong> not have a compressed or depth/stencil format</p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-pColor-04961" href="chap18.html#VUID-vkCmdClearColorImage-pColor-04961"></a> <span class="vuid">VUID-vkCmdClearColorImage-pColor-04961</span><br>

<code>pColor</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap18.html#VkClearColorValue">VkClearColorValue</a> union</p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-commandBuffer-01805" href="chap18.html#VUID-vkCmdClearColorImage-commandBuffer-01805"></a> <span class="vuid">VUID-vkCmdClearColorImage-commandBuffer-01805</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>image</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-commandBuffer-01806" href="chap18.html#VUID-vkCmdClearColorImage-commandBuffer-01806"></a> <span class="vuid">VUID-vkCmdClearColorImage-commandBuffer-01806</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<strong class="purple">must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdClearColorImage-commandBuffer-parameter" href="chap18.html#VUID-vkCmdClearColorImage-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdClearColorImage-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-image-parameter" href="chap18.html#VUID-vkCmdClearColorImage-image-parameter"></a> <span class="vuid">VUID-vkCmdClearColorImage-image-parameter</span><br>
 <code>image</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-imageLayout-parameter" href="chap18.html#VUID-vkCmdClearColorImage-imageLayout-parameter"></a> <span class="vuid">VUID-vkCmdClearColorImage-imageLayout-parameter</span><br>
 <code>imageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-pRanges-parameter" href="chap18.html#VUID-vkCmdClearColorImage-pRanges-parameter"></a> <span class="vuid">VUID-vkCmdClearColorImage-pRanges-parameter</span><br>
 <code>pRanges</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>rangeCount</code> valid <a href="chap12.html#VkImageSubresourceRange">VkImageSubresourceRange</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-commandBuffer-recording" href="chap18.html#VUID-vkCmdClearColorImage-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdClearColorImage-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-commandBuffer-cmdpool" href="chap18.html#VUID-vkCmdClearColorImage-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdClearColorImage-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-renderpass" href="chap18.html#VUID-vkCmdClearColorImage-renderpass"></a> <span class="vuid">VUID-vkCmdClearColorImage-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-rangeCount-arraylength" href="chap18.html#VUID-vkCmdClearColorImage-rangeCount-arraylength"></a> <span class="vuid">VUID-vkCmdClearColorImage-rangeCount-arraylength</span><br>
 <code>rangeCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdClearColorImage-commonparent" href="chap18.html#VUID-vkCmdClearColorImage-commonparent"></a> <span class="vuid">VUID-vkCmdClearColorImage-commonparent</span><br>
 Both of <code>commandBuffer</code>, and <code>image</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics<br>
Compute</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To clear one or more subranges of a depth/stencil image, call:</p>
</div>
<div id="vkCmdClearDepthStencilImage" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdClearDepthStencilImage</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">image</span><span class="p">,</span>
    <span class="n">VkImageLayout</span>                               <span class="n">imageLayout</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkClearDepthStencilValue</span><span class="o">*</span>             <span class="n">pDepthStencil</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">rangeCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkImageSubresourceRange</span><span class="o">*</span>              <span class="n">pRanges</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>image</code> is the image to be cleared.</p>
</li>
<li>
<p><code>imageLayout</code> specifies the current layout of the image subresource
ranges to be cleared, and <strong class="purple">must</strong> be <code>VK_IMAGE_LAYOUT_GENERAL</code> or
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>.</p>
</li>
<li>
<p><code>pDepthStencil</code> is a pointer to a <a href="chap18.html#VkClearDepthStencilValue">VkClearDepthStencilValue</a>
structure containing the values that the depth and stencil image
subresource ranges will be cleared to (see <a href="chap18.html#clears-values">Clear Values</a> below).</p>
</li>
<li>
<p><code>rangeCount</code> is the number of image subresource range structures in
<code>pRanges</code>.</p>
</li>
<li>
<p><code>pRanges</code> is a pointer to an array of <a href="chap12.html#VkImageSubresourceRange">VkImageSubresourceRange</a>
structures describing a range of mipmap levels, array layers, and
aspects to be cleared, as described in <a href="chap12.html#resources-image-views">Image
Views</a>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-image-01994" href="chap18.html#VUID-vkCmdClearDepthStencilImage-image-01994"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-image-01994</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of <code>image</code>
<strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-pRanges-02658" href="chap18.html#VUID-vkCmdClearDepthStencilImage-pRanges-02658"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-pRanges-02658</span><br>

If the <code>aspect</code> member of any element of <code>pRanges</code> includes
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, and <code>image</code> was created with
<a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> <strong class="purple">must</strong> have been included in the
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> used to create
<code>image</code></p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-pRanges-02659" href="chap18.html#VUID-vkCmdClearDepthStencilImage-pRanges-02659"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-pRanges-02659</span><br>

If the <code>aspect</code> member of any element of <code>pRanges</code> includes
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, and <code>image</code> was not created with
<a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil usage</a>,
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> <strong class="purple">must</strong> have been included in the
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code> used to create <code>image</code></p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-pRanges-02660" href="chap18.html#VUID-vkCmdClearDepthStencilImage-pRanges-02660"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-pRanges-02660</span><br>

If the <code>aspect</code> member of any element of <code>pRanges</code> includes
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code>, <code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code>
<strong class="purple">must</strong> have been included in the <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code>
used to create <code>image</code></p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-image-00010" href="chap18.html#VUID-vkCmdClearDepthStencilImage-image-00010"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-image-00010</span><br>

If <code>image</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-imageLayout-00011" href="chap18.html#VUID-vkCmdClearDepthStencilImage-imageLayout-00011"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-imageLayout-00011</span><br>

<code>imageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresource
ranges of <code>image</code> specified in <code>pRanges</code> at the time this
command is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-imageLayout-00012" href="chap18.html#VUID-vkCmdClearDepthStencilImage-imageLayout-00012"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-imageLayout-00012</span><br>

<code>imageLayout</code> <strong class="purple">must</strong> be either of
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-aspectMask-02824" href="chap18.html#VUID-vkCmdClearDepthStencilImage-aspectMask-02824"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-aspectMask-02824</span><br>

The <a href="chap12.html#VkImageSubresourceRange">VkImageSubresourceRange</a>::<code>aspectMask</code> member of each
element of the <code>pRanges</code> array <strong class="purple">must</strong> not include bits other than
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-image-02825" href="chap18.html#VUID-vkCmdClearDepthStencilImage-image-02825"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-image-02825</span><br>

If the <code>image</code>’s format does not have a stencil component, then the
<a href="chap12.html#VkImageSubresourceRange">VkImageSubresourceRange</a>::<code>aspectMask</code> member of each element
of the <code>pRanges</code> array <strong class="purple">must</strong> not include the
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code> bit</p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-image-02826" href="chap18.html#VUID-vkCmdClearDepthStencilImage-image-02826"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-image-02826</span><br>

If the <code>image</code>’s format does not have a depth component, then the
<a href="chap12.html#VkImageSubresourceRange">VkImageSubresourceRange</a>::<code>aspectMask</code> member of each element
of the <code>pRanges</code> array <strong class="purple">must</strong> not include the
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> bit</p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-baseMipLevel-01474" href="chap18.html#VUID-vkCmdClearDepthStencilImage-baseMipLevel-01474"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-baseMipLevel-01474</span><br>

The <a href="chap12.html#VkImageSubresourceRange">VkImageSubresourceRange</a>::<code>baseMipLevel</code> members of the
elements of the <code>pRanges</code> array <strong class="purple">must</strong> each be less than the
<code>mipLevels</code> specified in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code>
was created</p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-pRanges-01694" href="chap18.html#VUID-vkCmdClearDepthStencilImage-pRanges-01694"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-pRanges-01694</span><br>

For each <a href="chap12.html#VkImageSubresourceRange">VkImageSubresourceRange</a> element of <code>pRanges</code>, if the
<code>levelCount</code> member is not <code>VK_REMAINING_MIP_LEVELS</code>, then
<span class="eq"><code>baseMipLevel</code> +  <code>levelCount</code></span> <strong class="purple">must</strong> be less than the
<code>mipLevels</code> specified in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code>
was created</p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-baseArrayLayer-01476" href="chap18.html#VUID-vkCmdClearDepthStencilImage-baseArrayLayer-01476"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-baseArrayLayer-01476</span><br>

The <a href="chap12.html#VkImageSubresourceRange">VkImageSubresourceRange</a>::<code>baseArrayLayer</code> members of the
elements of the <code>pRanges</code> array <strong class="purple">must</strong> each be less than the
<code>arrayLayers</code> specified in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code>
was created</p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-pRanges-01695" href="chap18.html#VUID-vkCmdClearDepthStencilImage-pRanges-01695"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-pRanges-01695</span><br>

For each <a href="chap12.html#VkImageSubresourceRange">VkImageSubresourceRange</a> element of <code>pRanges</code>, if the
<code>layerCount</code> member is not <code>VK_REMAINING_ARRAY_LAYERS</code>, then
<span class="eq"><code>baseArrayLayer</code> +  <code>layerCount</code></span> <strong class="purple">must</strong> be less than
the <code>arrayLayers</code> specified in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when
<code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-image-00014" href="chap18.html#VUID-vkCmdClearDepthStencilImage-image-00014"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-image-00014</span><br>

<code>image</code> <strong class="purple">must</strong> have a depth/stencil format</p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-commandBuffer-01807" href="chap18.html#VUID-vkCmdClearDepthStencilImage-commandBuffer-01807"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-commandBuffer-01807</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>image</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-commandBuffer-01808" href="chap18.html#VUID-vkCmdClearDepthStencilImage-commandBuffer-01808"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-commandBuffer-01808</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>image</code> <strong class="purple">must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-commandBuffer-parameter" href="chap18.html#VUID-vkCmdClearDepthStencilImage-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-image-parameter" href="chap18.html#VUID-vkCmdClearDepthStencilImage-image-parameter"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-image-parameter</span><br>
 <code>image</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-imageLayout-parameter" href="chap18.html#VUID-vkCmdClearDepthStencilImage-imageLayout-parameter"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-imageLayout-parameter</span><br>
 <code>imageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-pDepthStencil-parameter" href="chap18.html#VUID-vkCmdClearDepthStencilImage-pDepthStencil-parameter"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-pDepthStencil-parameter</span><br>
 <code>pDepthStencil</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap18.html#VkClearDepthStencilValue">VkClearDepthStencilValue</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-pRanges-parameter" href="chap18.html#VUID-vkCmdClearDepthStencilImage-pRanges-parameter"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-pRanges-parameter</span><br>
 <code>pRanges</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>rangeCount</code> valid <a href="chap12.html#VkImageSubresourceRange">VkImageSubresourceRange</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-commandBuffer-recording" href="chap18.html#VUID-vkCmdClearDepthStencilImage-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-commandBuffer-cmdpool" href="chap18.html#VUID-vkCmdClearDepthStencilImage-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-renderpass" href="chap18.html#VUID-vkCmdClearDepthStencilImage-renderpass"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-rangeCount-arraylength" href="chap18.html#VUID-vkCmdClearDepthStencilImage-rangeCount-arraylength"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-rangeCount-arraylength</span><br>
 <code>rangeCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdClearDepthStencilImage-commonparent" href="chap18.html#VUID-vkCmdClearDepthStencilImage-commonparent"></a> <span class="vuid">VUID-vkCmdClearDepthStencilImage-commonparent</span><br>
 Both of <code>commandBuffer</code>, and <code>image</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Clears outside render pass instances are treated as transfer operations for
the purposes of memory barriers.</p>
</div>
</div>
<div class="sect2">
<h3 id="clears-inside"><a class="anchor" href="chap18.html#clears-inside"></a>18.2. Clearing Images Inside A Render Pass Instance</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To clear one or more regions of color and depth/stencil attachments inside a
render pass instance, call:</p>
</div>
<div id="vkCmdClearAttachments" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdClearAttachments</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">attachmentCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkClearAttachment</span><span class="o">*</span>                    <span class="n">pAttachments</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">rectCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkClearRect</span><span class="o">*</span>                          <span class="n">pRects</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>attachmentCount</code> is the number of entries in the <code>pAttachments</code>
array.</p>
</li>
<li>
<p><code>pAttachments</code> is a pointer to an array of <a href="chap18.html#VkClearAttachment">VkClearAttachment</a>
structures defining the attachments to clear and the clear values to
use.
If any attachment index to be cleared is not backed by an image view,
then the clear has no effect.</p>
</li>
<li>
<p><code>rectCount</code> is the number of entries in the <code>pRects</code> array.</p>
</li>
<li>
<p><code>pRects</code> is a pointer to an array of <a href="chap18.html#VkClearRect">VkClearRect</a> structures
defining regions within each selected attachment to clear.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unlike other <a href="chap18.html">clear commands</a>, <a href="chap18.html#vkCmdClearAttachments">vkCmdClearAttachments</a> executes
as a drawing command, rather than a transfer command, with writes performed
by it executing in <a href="chap25.html#primsrast-order">rasterization order</a>.
Clears to color attachments are executed as color attachment writes, by the
<code>VK_PIPELINE_STAGE_COLOR_ATTACHMENT_OUTPUT_BIT</code> stage.
Clears to depth/stencil attachments are executed as <a href="chap26.html#fragops-depth">depth
writes</a> and <a href="chap26.html#fragops-stencil">writes</a> by the
<code>VK_PIPELINE_STAGE_EARLY_FRAGMENT_TESTS_BIT</code> and
<code>VK_PIPELINE_STAGE_LATE_FRAGMENT_TESTS_BIT</code> stages.</p>
</div>
<div class="paragraph">
<p><code>vkCmdClearAttachments</code> is not affected by the bound pipeline state.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>It is generally preferable to clear attachments by using the
<code>VK_ATTACHMENT_LOAD_OP_CLEAR</code> load operation at the start of rendering,
as it is more efficient on some implementations.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdClearAttachments-aspectMask-02501" href="chap18.html#VUID-vkCmdClearAttachments-aspectMask-02501"></a> <span class="vuid">VUID-vkCmdClearAttachments-aspectMask-02501</span><br>

If the <code>aspectMask</code> member of any element of <code>pAttachments</code>
contains <code>VK_IMAGE_ASPECT_COLOR_BIT</code>, then the <code>colorAttachment</code>
member of that element <strong class="purple">must</strong> either refer to a color attachment which is
<code>VK_ATTACHMENT_UNUSED</code>, or <strong class="purple">must</strong> be a valid color attachment</p>
</li>
<li>
<p><a id="VUID-vkCmdClearAttachments-aspectMask-02502" href="chap18.html#VUID-vkCmdClearAttachments-aspectMask-02502"></a> <span class="vuid">VUID-vkCmdClearAttachments-aspectMask-02502</span><br>

If the <code>aspectMask</code> member of any element of <code>pAttachments</code>
contains <code>VK_IMAGE_ASPECT_DEPTH_BIT</code>, then the current subpass'
depth/stencil attachment <strong class="purple">must</strong> either be <code>VK_ATTACHMENT_UNUSED</code>, or
<strong class="purple">must</strong> have a depth component</p>
</li>
<li>
<p><a id="VUID-vkCmdClearAttachments-aspectMask-02503" href="chap18.html#VUID-vkCmdClearAttachments-aspectMask-02503"></a> <span class="vuid">VUID-vkCmdClearAttachments-aspectMask-02503</span><br>

If the <code>aspectMask</code> member of any element of <code>pAttachments</code>
contains <code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, then the current subpass'
depth/stencil attachment <strong class="purple">must</strong> either be <code>VK_ATTACHMENT_UNUSED</code>, or
<strong class="purple">must</strong> have a stencil component</p>
</li>
<li>
<p><a id="VUID-vkCmdClearAttachments-rect-02682" href="chap18.html#VUID-vkCmdClearAttachments-rect-02682"></a> <span class="vuid">VUID-vkCmdClearAttachments-rect-02682</span><br>

The <code>rect</code> member of each element of <code>pRects</code> <strong class="purple">must</strong> have an
<code>extent.width</code> greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdClearAttachments-rect-02683" href="chap18.html#VUID-vkCmdClearAttachments-rect-02683"></a> <span class="vuid">VUID-vkCmdClearAttachments-rect-02683</span><br>

The <code>rect</code> member of each element of <code>pRects</code> <strong class="purple">must</strong> have an
<code>extent.height</code> greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdClearAttachments-pRects-00016" href="chap18.html#VUID-vkCmdClearAttachments-pRects-00016"></a> <span class="vuid">VUID-vkCmdClearAttachments-pRects-00016</span><br>

The rectangular region specified by each element of <code>pRects</code> <strong class="purple">must</strong>
be contained within the render area of the current render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdClearAttachments-pRects-00017" href="chap18.html#VUID-vkCmdClearAttachments-pRects-00017"></a> <span class="vuid">VUID-vkCmdClearAttachments-pRects-00017</span><br>

The layers specified by each element of <code>pRects</code> <strong class="purple">must</strong> be contained
within every attachment that <code>pAttachments</code> refers to</p>
</li>
<li>
<p><a id="VUID-vkCmdClearAttachments-layerCount-01934" href="chap18.html#VUID-vkCmdClearAttachments-layerCount-01934"></a> <span class="vuid">VUID-vkCmdClearAttachments-layerCount-01934</span><br>

The <code>layerCount</code> member of each element of <code>pRects</code> <strong class="purple">must</strong> not be
<code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdClearAttachments-commandBuffer-02504" href="chap18.html#VUID-vkCmdClearAttachments-commandBuffer-02504"></a> <span class="vuid">VUID-vkCmdClearAttachments-commandBuffer-02504</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
each attachment to be cleared <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdClearAttachments-commandBuffer-02505" href="chap18.html#VUID-vkCmdClearAttachments-commandBuffer-02505"></a> <span class="vuid">VUID-vkCmdClearAttachments-commandBuffer-02505</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
each attachment to be cleared <strong class="purple">must</strong> not be an unprotected image</p>
</li>
<li>
<p><a id="VUID-vkCmdClearAttachments-baseArrayLayer-00018" href="chap18.html#VUID-vkCmdClearAttachments-baseArrayLayer-00018"></a> <span class="vuid">VUID-vkCmdClearAttachments-baseArrayLayer-00018</span><br>

If the render pass instance this is recorded in uses multiview, then
<code>baseArrayLayer</code> <strong class="purple">must</strong> be zero and <code>layerCount</code> <strong class="purple">must</strong> be one</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdClearAttachments-commandBuffer-parameter" href="chap18.html#VUID-vkCmdClearAttachments-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdClearAttachments-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdClearAttachments-pAttachments-parameter" href="chap18.html#VUID-vkCmdClearAttachments-pAttachments-parameter"></a> <span class="vuid">VUID-vkCmdClearAttachments-pAttachments-parameter</span><br>
 <code>pAttachments</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>attachmentCount</code> valid <a href="chap18.html#VkClearAttachment">VkClearAttachment</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdClearAttachments-pRects-parameter" href="chap18.html#VUID-vkCmdClearAttachments-pRects-parameter"></a> <span class="vuid">VUID-vkCmdClearAttachments-pRects-parameter</span><br>
 <code>pRects</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>rectCount</code> <a href="chap18.html#VkClearRect">VkClearRect</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdClearAttachments-commandBuffer-recording" href="chap18.html#VUID-vkCmdClearAttachments-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdClearAttachments-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdClearAttachments-commandBuffer-cmdpool" href="chap18.html#VUID-vkCmdClearAttachments-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdClearAttachments-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdClearAttachments-renderpass" href="chap18.html#VUID-vkCmdClearAttachments-renderpass"></a> <span class="vuid">VUID-vkCmdClearAttachments-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called inside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdClearAttachments-attachmentCount-arraylength" href="chap18.html#VUID-vkCmdClearAttachments-attachmentCount-arraylength"></a> <span class="vuid">VUID-vkCmdClearAttachments-attachmentCount-arraylength</span><br>
 <code>attachmentCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdClearAttachments-rectCount-arraylength" href="chap18.html#VUID-vkCmdClearAttachments-rectCount-arraylength"></a> <span class="vuid">VUID-vkCmdClearAttachments-rectCount-arraylength</span><br>
 <code>rectCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkClearRect</code> structure is defined as:</p>
</div>
<div id="VkClearRect" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkClearRect</span> <span class="p">{</span>
    <span class="n">VkRect2D</span>    <span class="n">rect</span><span class="p">;</span>
    <span class="kt">uint32_t</span>    <span class="n">baseArrayLayer</span><span class="p">;</span>
    <span class="kt">uint32_t</span>    <span class="n">layerCount</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkClearRect</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>rect</code> is the two-dimensional region to be cleared.</p>
</li>
<li>
<p><code>baseArrayLayer</code> is the first layer to be cleared.</p>
</li>
<li>
<p><code>layerCount</code> is the number of layers to clear.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The layers <span class="eq">[<code>baseArrayLayer</code>, <code>baseArrayLayer</code> + 
<code>layerCount</code>)</span> counting from the base layer of the attachment image view
are cleared.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkClearAttachment</code> structure is defined as:</p>
</div>
<div id="VkClearAttachment" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkClearAttachment</span> <span class="p">{</span>
    <span class="n">VkImageAspectFlags</span>    <span class="n">aspectMask</span><span class="p">;</span>
    <span class="kt">uint32_t</span>              <span class="n">colorAttachment</span><span class="p">;</span>
    <span class="n">VkClearValue</span>          <span class="n">clearValue</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkClearAttachment</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>aspectMask</code> is a mask selecting the color, depth and/or stencil
aspects of the attachment to be cleared.</p>
</li>
<li>
<p><code>colorAttachment</code> is only meaningful if
<code>VK_IMAGE_ASPECT_COLOR_BIT</code> is set in <code>aspectMask</code>, in which
case it is an index into the currently bound color attachments.</p>
</li>
<li>
<p><code>clearValue</code> is the color or depth/stencil value to clear the
attachment to, as described in <a href="chap18.html#clears-values">Clear Values</a> below.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkClearAttachment-aspectMask-00019" href="chap18.html#VUID-VkClearAttachment-aspectMask-00019"></a> <span class="vuid">VUID-VkClearAttachment-aspectMask-00019</span><br>

If <code>aspectMask</code> includes <code>VK_IMAGE_ASPECT_COLOR_BIT</code>, it <strong class="purple">must</strong>
not include <code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkClearAttachment-aspectMask-00020" href="chap18.html#VUID-VkClearAttachment-aspectMask-00020"></a> <span class="vuid">VUID-VkClearAttachment-aspectMask-00020</span><br>

<code>aspectMask</code> <strong class="purple">must</strong> not include <code>VK_IMAGE_ASPECT_METADATA_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkClearAttachment-clearValue-00021" href="chap18.html#VUID-VkClearAttachment-clearValue-00021"></a> <span class="vuid">VUID-VkClearAttachment-clearValue-00021</span><br>

<code>clearValue</code> <strong class="purple">must</strong> be a valid <code>VkClearValue</code> union</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkClearAttachment-aspectMask-parameter" href="chap18.html#VUID-VkClearAttachment-aspectMask-parameter"></a> <span class="vuid">VUID-VkClearAttachment-aspectMask-parameter</span><br>
 <code>aspectMask</code> <strong class="purple">must</strong> be a valid combination of <a href="chap12.html#VkImageAspectFlagBits">VkImageAspectFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkClearAttachment-aspectMask-requiredbitmask" href="chap18.html#VUID-VkClearAttachment-aspectMask-requiredbitmask"></a> <span class="vuid">VUID-VkClearAttachment-aspectMask-requiredbitmask</span><br>
 <code>aspectMask</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="clears-values"><a class="anchor" href="chap18.html#clears-values"></a>18.3. Clear Values</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkClearColorValue</code> structure is defined as:</p>
</div>
<div id="VkClearColorValue" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">union</span> <span class="n">VkClearColorValue</span> <span class="p">{</span>
    <span class="kt">float</span>       <span class="n">float32</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
    <span class="kt">int32_t</span>     <span class="n">int32</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
    <span class="kt">uint32_t</span>    <span class="n">uint32</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
<span class="p">}</span> <span class="n">VkClearColorValue</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>float32</code> are the color clear values when the format of the image or
attachment is one of the formats in the <a href="chap34.html#formats-numericformat">Interpretation of Numeric Format</a> table
other than signed integer (<code>SINT</code>) or unsigned integer (<code>UINT</code>).
Floating point values are automatically converted to the format of the
image, with the clear value being treated as linear if the image is
sRGB.</p>
</li>
<li>
<p><code>int32</code> are the color clear values when the format of the image or
attachment is signed integer (<code>SINT</code>).
Signed integer values are converted to the format of the image by
casting to the smaller type (with negative 32-bit values mapping to
negative values in the smaller type).
If the integer clear value is not representable in the target type (e.g.
would overflow in conversion to that type), the clear value is
undefined.</p>
</li>
<li>
<p><code>uint32</code> are the color clear values when the format of the image or
attachment is unsigned integer (<code>UINT</code>).
Unsigned integer values are converted to the format of the image by
casting to the integer type with fewer bits.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The four array elements of the clear color map to R, G, B, and A components
of image formats, in order.</p>
</div>
<div class="paragraph">
<p>If the image has more than one sample, the same value is written to all
samples for any pixels being cleared.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkClearDepthStencilValue</code> structure is defined as:</p>
</div>
<div id="VkClearDepthStencilValue" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkClearDepthStencilValue</span> <span class="p">{</span>
    <span class="kt">float</span>       <span class="n">depth</span><span class="p">;</span>
    <span class="kt">uint32_t</span>    <span class="n">stencil</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkClearDepthStencilValue</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>depth</code> is the clear value for the depth aspect of the depth/stencil
attachment.
It is a floating-point value which is automatically converted to the
attachment’s format.</p>
</li>
<li>
<p><code>stencil</code> is the clear value for the stencil aspect of the
depth/stencil attachment.
It is a 32-bit integer value which is converted to the attachment’s
format by taking the appropriate number of LSBs.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkClearDepthStencilValue-depth-02506" href="chap18.html#VUID-VkClearDepthStencilValue-depth-02506"></a> <span class="vuid">VUID-VkClearDepthStencilValue-depth-02506</span><br>

<code>depth</code> <strong class="purple">must</strong> be between <code>0.0</code> and <code>1.0</code>, inclusive</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkClearValue</code> union is defined as:</p>
</div>
<div id="VkClearValue" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">union</span> <span class="n">VkClearValue</span> <span class="p">{</span>
    <span class="n">VkClearColorValue</span>           <span class="n">color</span><span class="p">;</span>
    <span class="n">VkClearDepthStencilValue</span>    <span class="n">depthStencil</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkClearValue</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>color</code> specifies the color image clear values to use when clearing
a color image or attachment.</p>
</li>
<li>
<p><code>depthStencil</code> specifies the depth and stencil clear values to use
when clearing a depth/stencil image or attachment.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This union is used where part of the API requires either color or
depth/stencil clear values, depending on the attachment, and defines the
initial clear values in the <a href="chap8.html#VkRenderPassBeginInfo">VkRenderPassBeginInfo</a> structure.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="clears-filling-buffers"><a class="anchor" href="chap18.html#clears-filling-buffers"></a>18.4. Filling Buffers</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To clear buffer data, call:</p>
</div>
<div id="vkCmdFillBuffer" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdFillBuffer</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkBuffer</span>                                    <span class="n">dstBuffer</span><span class="p">,</span>
    <span class="n">VkDeviceSize</span>                                <span class="n">dstOffset</span><span class="p">,</span>
    <span class="n">VkDeviceSize</span>                                <span class="n">size</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">data</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>dstBuffer</code> is the buffer to be filled.</p>
</li>
<li>
<p><code>dstOffset</code> is the byte offset into the buffer at which to start
filling, and <strong class="purple">must</strong> be a multiple of 4.</p>
</li>
<li>
<p><code>size</code> is the number of bytes to fill, and <strong class="purple">must</strong> be either a
multiple of 4, or <code>VK_WHOLE_SIZE</code> to fill the range from
<code>offset</code> to the end of the buffer.
If <code>VK_WHOLE_SIZE</code> is used and the remaining size of the buffer is
not a multiple of 4, then the nearest smaller multiple is used.</p>
</li>
<li>
<p><code>data</code> is the 4-byte word written repeatedly to the buffer to fill
<code>size</code> bytes of data.
The data word is written to memory according to the host endianness.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkCmdFillBuffer</code> is treated as a “transfer” operation for the
purposes of synchronization barriers.
The <code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> <strong class="purple">must</strong> be specified in <code>usage</code>
of <a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a> in order for the buffer to be compatible with
<code>vkCmdFillBuffer</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdFillBuffer-dstOffset-00024" href="chap18.html#VUID-vkCmdFillBuffer-dstOffset-00024"></a> <span class="vuid">VUID-vkCmdFillBuffer-dstOffset-00024</span><br>

<code>dstOffset</code> <strong class="purple">must</strong> be less than the size of <code>dstBuffer</code></p>
</li>
<li>
<p><a id="VUID-vkCmdFillBuffer-dstOffset-00025" href="chap18.html#VUID-vkCmdFillBuffer-dstOffset-00025"></a> <span class="vuid">VUID-vkCmdFillBuffer-dstOffset-00025</span><br>

<code>dstOffset</code> <strong class="purple">must</strong> be a multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdFillBuffer-size-00026" href="chap18.html#VUID-vkCmdFillBuffer-size-00026"></a> <span class="vuid">VUID-vkCmdFillBuffer-size-00026</span><br>

If <code>size</code> is not equal to <code>VK_WHOLE_SIZE</code>, <code>size</code> <strong class="purple">must</strong> be
greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdFillBuffer-size-00027" href="chap18.html#VUID-vkCmdFillBuffer-size-00027"></a> <span class="vuid">VUID-vkCmdFillBuffer-size-00027</span><br>

If <code>size</code> is not equal to <code>VK_WHOLE_SIZE</code>, <code>size</code> <strong class="purple">must</strong> be
less than or equal to the size of <code>dstBuffer</code> minus <code>dstOffset</code></p>
</li>
<li>
<p><a id="VUID-vkCmdFillBuffer-size-00028" href="chap18.html#VUID-vkCmdFillBuffer-size-00028"></a> <span class="vuid">VUID-vkCmdFillBuffer-size-00028</span><br>

If <code>size</code> is not equal to <code>VK_WHOLE_SIZE</code>, <code>size</code> <strong class="purple">must</strong> be a
multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdFillBuffer-dstBuffer-00029" href="chap18.html#VUID-vkCmdFillBuffer-dstBuffer-00029"></a> <span class="vuid">VUID-vkCmdFillBuffer-dstBuffer-00029</span><br>

<code>dstBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdFillBuffer-dstBuffer-00031" href="chap18.html#VUID-vkCmdFillBuffer-dstBuffer-00031"></a> <span class="vuid">VUID-vkCmdFillBuffer-dstBuffer-00031</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdFillBuffer-commandBuffer-01811" href="chap18.html#VUID-vkCmdFillBuffer-commandBuffer-01811"></a> <span class="vuid">VUID-vkCmdFillBuffer-commandBuffer-01811</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong class="purple">must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdFillBuffer-commandBuffer-01812" href="chap18.html#VUID-vkCmdFillBuffer-commandBuffer-01812"></a> <span class="vuid">VUID-vkCmdFillBuffer-commandBuffer-01812</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong class="purple">must</strong> not be an unprotected buffer</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdFillBuffer-commandBuffer-parameter" href="chap18.html#VUID-vkCmdFillBuffer-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdFillBuffer-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdFillBuffer-dstBuffer-parameter" href="chap18.html#VUID-vkCmdFillBuffer-dstBuffer-parameter"></a> <span class="vuid">VUID-vkCmdFillBuffer-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdFillBuffer-commandBuffer-recording" href="chap18.html#VUID-vkCmdFillBuffer-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdFillBuffer-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdFillBuffer-commandBuffer-cmdpool" href="chap18.html#VUID-vkCmdFillBuffer-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdFillBuffer-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support transfer, graphics or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdFillBuffer-renderpass" href="chap18.html#VUID-vkCmdFillBuffer-renderpass"></a> <span class="vuid">VUID-vkCmdFillBuffer-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdFillBuffer-commonparent" href="chap18.html#VUID-vkCmdFillBuffer-commonparent"></a> <span class="vuid">VUID-vkCmdFillBuffer-commonparent</span><br>
 Both of <code>commandBuffer</code>, and <code>dstBuffer</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="clears-updating-buffers"><a class="anchor" href="chap18.html#clears-updating-buffers"></a>18.5. Updating Buffers</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To update buffer data inline in a command buffer, call:</p>
</div>
<div id="vkCmdUpdateBuffer" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdUpdateBuffer</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkBuffer</span>                                    <span class="n">dstBuffer</span><span class="p">,</span>
    <span class="n">VkDeviceSize</span>                                <span class="n">dstOffset</span><span class="p">,</span>
    <span class="n">VkDeviceSize</span>                                <span class="n">dataSize</span><span class="p">,</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                 <span class="n">pData</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>dstBuffer</code> is a handle to the buffer to be updated.</p>
</li>
<li>
<p><code>dstOffset</code> is the byte offset into the buffer to start updating,
and <strong class="purple">must</strong> be a multiple of 4.</p>
</li>
<li>
<p><code>dataSize</code> is the number of bytes to update, and <strong class="purple">must</strong> be a multiple
of 4.</p>
</li>
<li>
<p><code>pData</code> is a pointer to the source data for the buffer update, and
<strong class="purple">must</strong> be at least <code>dataSize</code> bytes in size.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>dataSize</code> <strong class="purple">must</strong> be less than or equal to 65536 bytes.
For larger updates, applications <strong class="purple">can</strong> use buffer to buffer
<a href="chap19.html#copies-buffers">copies</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Buffer updates performed with <code>vkCmdUpdateBuffer</code> first copy the data
into command buffer memory when the command is recorded (which requires
additional storage and may incur an additional allocation), and then copy
the data from the command buffer into <code>dstBuffer</code> when the command is
executed on a device.</p>
</div>
<div class="paragraph">
<p>The additional cost of this functionality compared to <a href="chap19.html#copies-buffers">buffer to buffer copies</a> means it is only recommended for very small
amounts of data, and is why it is limited to only 65536 bytes.</p>
</div>
<div class="paragraph">
<p>Applications <strong class="purple">can</strong> work around this by issuing multiple
<code>vkCmdUpdateBuffer</code> commands to different ranges of the same buffer, but
it is strongly recommended that they <strong class="purple">should</strong> not.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The source data is copied from the user pointer to the command buffer when
the command is called.</p>
</div>
<div class="paragraph">
<p><code>vkCmdUpdateBuffer</code> is only allowed outside of a render pass.
This command is treated as a “transfer” operation for the purposes of
synchronization barriers.
The <code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> <strong class="purple">must</strong> be specified in <code>usage</code>
of <a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a> in order for the buffer to be compatible with
<code>vkCmdUpdateBuffer</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdUpdateBuffer-dstOffset-00032" href="chap18.html#VUID-vkCmdUpdateBuffer-dstOffset-00032"></a> <span class="vuid">VUID-vkCmdUpdateBuffer-dstOffset-00032</span><br>

<code>dstOffset</code> <strong class="purple">must</strong> be less than the size of <code>dstBuffer</code></p>
</li>
<li>
<p><a id="VUID-vkCmdUpdateBuffer-dataSize-00033" href="chap18.html#VUID-vkCmdUpdateBuffer-dataSize-00033"></a> <span class="vuid">VUID-vkCmdUpdateBuffer-dataSize-00033</span><br>

<code>dataSize</code> <strong class="purple">must</strong> be less than or equal to the size of
<code>dstBuffer</code> minus <code>dstOffset</code></p>
</li>
<li>
<p><a id="VUID-vkCmdUpdateBuffer-dstBuffer-00034" href="chap18.html#VUID-vkCmdUpdateBuffer-dstBuffer-00034"></a> <span class="vuid">VUID-vkCmdUpdateBuffer-dstBuffer-00034</span><br>

<code>dstBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdUpdateBuffer-dstBuffer-00035" href="chap18.html#VUID-vkCmdUpdateBuffer-dstBuffer-00035"></a> <span class="vuid">VUID-vkCmdUpdateBuffer-dstBuffer-00035</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdUpdateBuffer-dstOffset-00036" href="chap18.html#VUID-vkCmdUpdateBuffer-dstOffset-00036"></a> <span class="vuid">VUID-vkCmdUpdateBuffer-dstOffset-00036</span><br>

<code>dstOffset</code> <strong class="purple">must</strong> be a multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdUpdateBuffer-dataSize-00037" href="chap18.html#VUID-vkCmdUpdateBuffer-dataSize-00037"></a> <span class="vuid">VUID-vkCmdUpdateBuffer-dataSize-00037</span><br>

<code>dataSize</code> <strong class="purple">must</strong> be less than or equal to <code>65536</code></p>
</li>
<li>
<p><a id="VUID-vkCmdUpdateBuffer-dataSize-00038" href="chap18.html#VUID-vkCmdUpdateBuffer-dataSize-00038"></a> <span class="vuid">VUID-vkCmdUpdateBuffer-dataSize-00038</span><br>

<code>dataSize</code> <strong class="purple">must</strong> be a multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdUpdateBuffer-commandBuffer-01813" href="chap18.html#VUID-vkCmdUpdateBuffer-commandBuffer-01813"></a> <span class="vuid">VUID-vkCmdUpdateBuffer-commandBuffer-01813</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong class="purple">must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdUpdateBuffer-commandBuffer-01814" href="chap18.html#VUID-vkCmdUpdateBuffer-commandBuffer-01814"></a> <span class="vuid">VUID-vkCmdUpdateBuffer-commandBuffer-01814</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
<code>dstBuffer</code> <strong class="purple">must</strong> not be an unprotected buffer</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdUpdateBuffer-commandBuffer-parameter" href="chap18.html#VUID-vkCmdUpdateBuffer-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdUpdateBuffer-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdUpdateBuffer-dstBuffer-parameter" href="chap18.html#VUID-vkCmdUpdateBuffer-dstBuffer-parameter"></a> <span class="vuid">VUID-vkCmdUpdateBuffer-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdUpdateBuffer-pData-parameter" href="chap18.html#VUID-vkCmdUpdateBuffer-pData-parameter"></a> <span class="vuid">VUID-vkCmdUpdateBuffer-pData-parameter</span><br>
 <code>pData</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>dataSize</code> bytes</p>
</li>
<li>
<p><a id="VUID-vkCmdUpdateBuffer-commandBuffer-recording" href="chap18.html#VUID-vkCmdUpdateBuffer-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdUpdateBuffer-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdUpdateBuffer-commandBuffer-cmdpool" href="chap18.html#VUID-vkCmdUpdateBuffer-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdUpdateBuffer-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdUpdateBuffer-renderpass" href="chap18.html#VUID-vkCmdUpdateBuffer-renderpass"></a> <span class="vuid">VUID-vkCmdUpdateBuffer-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdUpdateBuffer-dataSize-arraylength" href="chap18.html#VUID-vkCmdUpdateBuffer-dataSize-arraylength"></a> <span class="vuid">VUID-vkCmdUpdateBuffer-dataSize-arraylength</span><br>
 <code>dataSize</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdUpdateBuffer-commonparent" href="chap18.html#VUID-vkCmdUpdateBuffer-commonparent"></a> <span class="vuid">VUID-vkCmdUpdateBuffer-commonparent</span><br>
 Both of <code>commandBuffer</code>, and <code>dstBuffer</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The <code>pData</code> parameter was of type <code>uint32_t*</code> instead of <code>void*</code>
prior to version 1.0.19 of the Specification and <a href="chap43.html#VK_HEADER_VERSION">VK_HEADER_VERSION</a> 19
of the <a href="chap43.html#boilerplate-headers">Vulkan Header Files</a>.
This was a historical anomaly, as the source data may be of other types.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div></div>

<nav>
  <a rel="prev" href="chap17.html" class="nav nav-prev" title="Previous page" aria-label="Previous page" aria-keyshortcuts="Left">
        <i class="fa fa-angle-left"></i>
     </a>
  <a rel="next" href="chap19.html" class="nav nav-next" title="Next page" aria-label="Next page" aria-keyshortcuts="Right">
        <i class="fa fa-angle-right"></i>
     </a>
  <div style="clear: both"></div>
</nav>
<div id="footer">
<div id="footer-text">
Version 1.3.212<br>
Last updated 2022-01-21 21:58:54 -0800
</div>
</div>



</body>
  <script>
  function isInViewport(ele) {
    const rect = ele.getBoundingClientRect();
    return (
        rect.top >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight)
    );
  }
  function yPosition (ele) {
    const rect = ele.getBoundingClientRect();
    return (rect.top - 20); // 20px above
  }
  let curr = document.getElementsByClassName('current');
  if (!isInViewport(curr[curr.length - 1])) {
    document.getElementById('toc').scrollTo({
      top: yPosition(curr[0]),
      left: 0,
      behavior: 'smooth'
    });
  }

  /* For page navigation */
  function gotoPage(selector) {
    const button = document.querySelector(selector);
    if (button)
      window.location.href = button.href;
  }
  document.addEventListener('keydown', e => {
    switch (e.key) {
      case 'ArrowRight':
        e.preventDefault();
        gotoPage('.nav-next');
        break;
      case 'ArrowLeft':
        e.preventDefault();
        gotoPage('.nav-prev');
        break;
    }
  });
  </script>
  </html>