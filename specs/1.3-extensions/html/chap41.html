<!DOCTYPE html><html lang="en"><head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="author" content="The Khronos® Vulkan Working Group">
<title>Vulkan® 1.3.235 - A Specification (with all registered Vulkan extensions)</title>
<link rel="stylesheet" href="style0.css" type="text/css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="style1.css" type="text/css">
<link rel="stylesheet" href="style2.css" type="text/css">

<!-- dragged in by font-awesome css included by asciidoctor, but preloaded in this extension for convenience -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0" as="font" type="font/woff2" crossorigin="">

<!-- Note: Chrome needs crossorigin="" even for same-origin fonts -->
<link rel="preload" href="../katex/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Typewriter-Regular.woff2" as="font" type="font/woff2" crossorigin=""><link rel="stylesheet" href="../katex/katex.min.css">
<!--ChunkedSearchJSMarker-->
<link href="chunked.css?4" rel="stylesheet">
<script>var searchindexurl = 'search.index.js?4' + (document.title.replace(/[^0-9.]/g, ''));</script>
<script src="chunked.js?4"></script>
<link rel="stylesheet" href="style3.css" type="text/css">
<script>
    function hideElement(e){
        e.setAttribute("hidden", "");
        e.classList.add("hidden");
    }

    function unhideElement(e){
        e.classList.remove("hidden");
        e.removeAttribute("hidden");
    }

    function hideLoadableContent(){
        unhideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) hideElement(loadable);
    }

    function unhideLoadableContent(){
        hideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) unhideElement(loadable);
    }

    window.addEventListener("load", unhideLoadableContent);
</script>
<link rel="stylesheet" href="asciidoctor-chunker.css" type="text/css"></head>
<body class="book toc2 toc-left">
<div style="text-align: center;">
    <span class="image"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+Cjxzdmcgdmlld0JveD0iMCAwIDExNTAgMzI2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHN0eWxlPSJmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MS40MTQyMTsiPgogICAgPGcgaWQ9IkFydGJvYXJkMSIgdHJhbnNmb3JtPSJtYXRyaXgoMC45NTUxNSwwLDAsMC44ODgyODMsLTQwLjExNjMsLTMwLjIwMTYpIj4KICAgICAgICA8cmVjdCB4PSI0MiIgeT0iMzQiIHdpZHRoPSIxMjA0IiBoZWlnaHQ9IjM2NyIgc3R5bGU9ImZpbGw6bm9uZTsiLz4KICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxLjA0Njk2LDAsMCwxLjEyNTc3LC00Ni45OTEzLC01MC40MzI1KSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik03MjQuMSwzODUuMDZMNjgzLjUzLDM4NS4wNkM2ODMuNTMsMzg1LjA2IDY4My41MywyODYuMDkgNjgzLjUzLDI1NS40QzY5Ni40OSwyNjIuNjIgNzEzLjYyLDI3NS45NCA3MjQuMSwyODguNzJMNzI0LjEsMzg1LjA2WiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxnPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTM4MS43NSwzODUuMDZMMzMxLjE3LDM4NS4wNkwyNjUuMTYsMTgxLjAzTDMxMS4xNywxODEuMDNMMzU2LjYxLDMyNC40OEwzNTcuMTgsMzI0LjQ4TDQwMy4xOCwxODEuMDNMNDQ5LjQ3LDE4MS4wM0wzODEuNzUsMzg1LjA2WiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNTg1LjUxLDM4NS4wNkw1NDYuOTMsMzg1LjA2TDU0Ni45MywzNjQuNDlMNTQ2LjA4LDM2NC40OUM1NDAuOTMsMzczLjA3IDUzNC4yNywzNzkuMjYgNTI2LjA3LDM4My4wN0M1MTcuODgsMzg2Ljg4IDUwOS41LDM4OC43OCA1MDAuOTIsMzg4Ljc4QzQ5MC4wNiwzODguNzggNDgxLjE2LDM4Ny4zNSA0NzQuMiwzODQuNUM0NjcuMjUsMzgxLjY1IDQ2MS43NywzNzcuNTkgNDU3Ljc3LDM3Mi4zNkM0NTMuNzYsMzY3LjEyIDQ1MC45NSwzNjAuNzQgNDQ5LjMzLDM1My4yMUM0NDcuNzIsMzQ1LjY5IDQ0Ni45MSwzMzcuMzUgNDQ2LjkxLDMyOC4yMUw0NDYuOTEsMjM3LjMzTDQ4Ny40OSwyMzcuMzNMNDg3LjQ5LDMyMC43N0M0ODcuNDksMzMyLjk2IDQ4OS40LDM0Mi4wNiA0OTMuMjEsMzQ4LjA2QzQ5Ny4wMiwzNTQuMDcgNTAzLjc4LDM1Ny4wNiA1MTMuNSwzNTcuMDZDNTI0LjU1LDM1Ny4wNiA1MzIuNTUsMzUzLjc4IDUzNy41LDM0Ny4yQzU0Mi40NiwzNDAuNjIgNTQ0LjkzLDMyOS44MSA1NDQuOTMsMzE0Ljc2TDU0NC45MywyMzcuMzJMNTg1LjUyLDIzNy4zMkw1ODUuNTIsMzg1LjA2TDU4NS41MSwzODUuMDZaIiBzdHlsZT0iZmlsbDpyZ2IoMTcyLDIyLDQ0KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8cGF0aCBkPSJNNzMwLjg0LDI5Ni4xOUw3MzAuNzQsMjkwLjQ3TDc4MS44OSwyMzcuMzNMODI5LjkxLDIzNy4zM0w3NzQuMTgsMjkxLjYyTDgzNi4xOSwzODUuMDZMNzg3LjA0LDM4NS4wNkw3MzAuODQsMjk2LjE5WiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik04NDMuNjIsMjgyLjc2Qzg0NC4xOSwyNzMuMjQgODQ2LjU4LDI2NS4zMyA4NTAuNzcsMjU5LjA0Qzg1NC45NiwyNTIuNzUgODYwLjI5LDI0Ny43MSA4NjYuNzcsMjQzLjlDODczLjI1LDI0MC4wOSA4ODAuNTQsMjM3LjM3IDg4OC42NCwyMzUuNzZDODk2LjczLDIzNC4xNCA5MDQuODgsMjMzLjMzIDkxMy4wNywyMzMuMzNDOTIwLjUsMjMzLjMzIDkyOC4wMiwyMzMuODUgOTM1LjY0LDIzNC45Qzk0My4yNywyMzUuOTUgOTUwLjIxLDIzOCA5NTYuNSwyNDEuMDVDOTYyLjc4LDI0NC4xIDk2Ny45MywyNDguMzQgOTcxLjk0LDI1My43NkM5NzUuOTQsMjU5LjE5IDk3Ny45NCwyNjYuMzggOTc3Ljk0LDI3NS4zNEw5NzcuOTQsMzUyLjIxQzk3Ny45NCwzNTguODggOTc4LjMyLDM2NS4yNyA5NzkuMDgsMzcxLjM2Qzk3OS44NCwzNzcuNDYgOTgxLjE4LDM4Mi4wMyA5ODMuMDksMzg1LjA4TDk0MS45NCwzODUuMDhDOTQxLjE4LDM4Mi44IDk0MC41NiwzODAuNDYgOTQwLjA4LDM3OC4wOEM5MzkuNjEsMzc1LjcgOTM5LjI3LDM3My4yOCA5MzkuMDgsMzcwLjc5QzkzMi42LDM3Ny40NyA5MjQuOTcsMzgyLjEzIDkxNi4yMSwzODQuOEM5MDcuNDUsMzg3LjQ2IDg5OC40OSwzODguOCA4ODkuMzUsMzg4LjhDODgyLjMsMzg4LjggODc1LjcyLDM4Ny45NCA4NjkuNjQsMzg2LjIzQzg2My41NCwzODQuNTIgODU4LjIsMzgxLjg1IDg1My42NCwzNzguMjNDODQ5LjA2LDM3NC42MSA4NDUuNDgsMzcwLjA0IDg0Mi45MiwzNjQuNTFDODQwLjM1LDM1OC45OSA4MzkuMDYsMzUyLjQyIDgzOS4wNiwzNDQuOEM4MzkuMDYsMzM2LjQyIDg0MC41NCwzMjkuNTEgODQzLjQ5LDMyNC4wOEM4NDYuNDUsMzE4LjY1IDg1MC4yNSwzMTQuMzIgODU0LjkzLDMxMS4wOEM4NTkuNiwzMDcuODQgODY0LjkzLDMwNS40MSA4NzAuOTMsMzAzLjc5Qzg3Ni45MywzMDIuMTcgODgyLjk4LDMwMC44OCA4ODkuMDcsMjk5LjkzQzg5NS4xNywyOTguOTkgOTAxLjE3LDI5OC4yMiA5MDcuMDgsMjk3LjY1QzkxMi45OSwyOTcuMDggOTE4LjIyLDI5Ni4yMiA5MjIuNzksMjk1LjA4QzkyNy4zNywyOTMuOTMgOTMwLjk4LDI5Mi4yNyA5MzMuNjUsMjkwLjA3QzkzNi4zMiwyODcuODggOTM3LjU2LDI4NC42OSA5MzcuMzcsMjgwLjVDOTM3LjM3LDI3Ni4xMiA5MzYuNjUsMjcyLjY0IDkzNS4yMiwyNzAuMDdDOTMzLjc5LDI2Ny41IDkzMS44OSwyNjUuNSA5MjkuNTEsMjY0LjA3QzkyNy4xMywyNjIuNjQgOTI0LjM3LDI2MS42OSA5MjEuMjIsMjYxLjIxQzkxOC4wNywyNjAuNzMgOTE0LjcsMjYwLjQ5IDkxMS4wOCwyNjAuNDlDOTAzLjA4LDI2MC40OSA4OTYuNzksMjYyLjIgODkyLjIyLDI2NS42NEM4ODcuNjUsMjY5LjA3IDg4NC45OCwyNzQuNzggODg0LjIyLDI4Mi43OUw4NDMuNjIsMjgyLjc5TDg0My42MiwyODIuNzZaTTkzNy4zNSwzMTIuNzdDOTM1LjYzLDMxNC4zIDkzMy40OSwzMTUuNDggOTMwLjkyLDMxNi4zNEM5MjguMzUsMzE3LjIxIDkyNS41OSwzMTcuOTIgOTIyLjYzLDMxOC40OUM5MTkuNjgsMzE5LjA2IDkxNi41OCwzMTkuNTQgOTEzLjM1LDMxOS45MkM5MTAuMTEsMzIwLjMgOTA2Ljg3LDMyMC43NyA5MDMuNjMsMzIxLjM1QzkwMC41OCwzMjEuOTIgODk3LjU4LDMyMi42OSA4OTQuNjMsMzIzLjYzQzg5MS42OCwzMjQuNTkgODg5LjEsMzI1Ljg3IDg4Ni45MSwzMjcuNDlDODg0LjcyLDMyOS4xMSA4ODIuOTYsMzMxLjE2IDg4MS42MiwzMzMuNjNDODgwLjI5LDMzNi4xMSA4NzkuNjIsMzM5LjI1IDg3OS42MiwzNDMuMDZDODc5LjYyLDM0Ni42OCA4ODAuMjksMzQ5LjczIDg4MS42MiwzNTIuMkM4ODIuOTYsMzU0LjY4IDg4NC43NywzNTYuNjMgODg3LjA1LDM1OC4wNkM4ODkuMzQsMzU5LjQ5IDg5MiwzNjAuNDkgODk1LjA1LDM2MS4wNkM4OTguMSwzNjEuNjMgOTAxLjI0LDM2MS45MSA5MDQuNDgsMzYxLjkxQzkxMi40OCwzNjEuOTEgOTE4LjY4LDM2MC41OCA5MjMuMDYsMzU3LjkyQzkyNy40NCwzNTUuMjUgOTMwLjY5LDM1Mi4wNiA5MzIuNzcsMzQ4LjM0QzkzNC44NiwzNDQuNjMgOTM2LjE2LDM0MC44NyA5MzYuNjIsMzM3LjA2QzkzNy4xLDMzMy4yNSA5MzcuMzMsMzMwLjIgOTM3LjM0LDMyNy45Mkw5MzcuMzQsMzEyLjc3TDkzNy4zNSwzMTIuNzdaIiBzdHlsZT0iZmlsbDpyZ2IoMTcyLDIyLDQ0KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTEwMDQuMjEsMjM3LjMzTDEwNDIuOCwyMzcuMzNMMTA0Mi44LDI1Ny45TDEwNDMuNjUsMjU3LjlDMTA0OC43OSwyNDkuMzMgMTA1NS40NiwyNDMuMDkgMTA2My42NSwyMzkuMTlDMTA3MS44NCwyMzUuMjggMTA4MC4yMywyMzMuMzMgMTA4OC43OSwyMzMuMzNDMTA5OS42NiwyMzMuMzMgMTEwOC41NiwyMzQuODEgMTExNS41MiwyMzcuNzZDMTEyMi40NywyNDAuNzIgMTEyNy45NCwyNDQuODEgMTEzMS45NSwyNTAuMDVDMTEzNS45NSwyNTUuMjkgMTEzOC43NiwyNjEuNjcgMTE0MC4zOCwyNjkuMTlDMTE0MiwyNzYuNzIgMTE0Mi44MSwyODUuMDUgMTE0Mi44MSwyOTQuMkwxMTQyLjgxLDM4NS4wN0wxMTAyLjI0LDM4NS4wN0wxMTAyLjI0LDMwMS42M0MxMTAyLjI0LDI4OS40MyAxMTAwLjMzLDI4MC4zNCAxMDk2LjUzLDI3NC4zNEMxMDkyLjcxLDI2OC4zNCAxMDg1Ljk1LDI2NS4zNCAxMDc2LjIzLDI2NS4zNEMxMDY1LjE4LDI2NS4zNCAxMDU3LjE5LDI2OC42MyAxMDUyLjIzLDI3NS4yQzEwNDcuMjcsMjgxLjc2IDEwNDQuOCwyOTIuNTggMTA0NC44LDMwNy42M0wxMDQ0LjgsMzg1LjA3TDEwMDQuMjIsMzg1LjA3TDEwMDQuMjIsMjM3LjMzTDEwMDQuMjEsMjM3LjMzWiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik02MTIuMzcsMjExLjg0TDYxMi4zNywzODUuMDdMNjUyLjk1LDM4NS4wN0w2NTIuOTUsMjM0LjIxQzYzOS45MywyMjYuMjMgNjI2LjM2LDIxOC43NCA2MTIuMzcsMjExLjg0WiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xOTguNDMsMjE5LjIxQzIyMS45NSwxNTAuMzIgMzYyLjU4LDEyNS4wNSA1MTIuNTgsMTYyLjc4QzYwMi41NSwxODUuNCA2NzYuMDcsMjI5LjI4IDcyNC4wOSwyNzIuNjdDNzAyLjMsMjE1LjEyIDU5Ni42NSwxMzMuMDggNDUxLjE4LDEwNC45NkMyODYuNyw3My4xNiAxMjQuNDcsMTAxLjExIDEwNC4zOSwxNzQuMUM4OS44OSwyMjYuODMgMTUzLjU3LDI4OC42IDI1Mi4wNSwzMzAuODRDMjA3LjgxLDI5NS4wMiAxODYuMjksMjU0Ljc4IDE5OC40MywyMTkuMjFaIiBzdHlsZT0iZmlsbDpyZ2IoMTcyLDIyLDQ0KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTcyNC4xNiwyNDcuNjJMNzI0LjE2LDE4MS4wM0w2ODMuNTcsMTgxLjAzTDY4My41NywyMDEuMjVDNzAwLjg4LDIxNi43MSA3MTQuNjEsMjMyLjQ1IDcyNC4xNiwyNDcuNjJaIiBzdHlsZT0iZmlsbDpyZ2IoMTcyLDIyLDQ0KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICA8L2c+CiAgICAgICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMS4wNDY5NiwwLDAsMS4xMjU3NywtNDYuOTkxMywtNTAuNDMyNSkiPgogICAgICAgICAgICA8cGF0aCBkPSJNMTIxNC45OCwzNjMuNDNDMTIxNC45OCwzNzUuNjkgMTIwNS4zNSwzODUuMzIgMTE5Mi44MywzODUuMzJDMTE4MC40MywzODUuMzIgMTE3MC41NCwzNzUuNjkgMTE3MC41NCwzNjMuNDNDMTE3MC41NCwzNTEuNDMgMTE4MC40MywzNDEuOCAxMTkyLjgzLDM0MS44QzEyMDUuMzUsMzQxLjggMTIxNC45OCwzNTEuNDMgMTIxNC45OCwzNjMuNDNaTTExNzYuMDgsMzYzLjQzQzExNzYuMDgsMzczLjA2IDExODMuMiwzODAuNyAxMTkyLjk2LDM4MC43QzEyMDIuNDUsMzgwLjcgMTIwOS40NCwzNzMuMDUgMTIwOS40NCwzNjMuNTZDMTIwOS40NCwzNTMuOTMgMTIwMi40NSwzNDYuMTUgMTE5Mi44MiwzNDYuMTVDMTE4My4yLDM0Ni4xNiAxMTc2LjA4LDM1My45NCAxMTc2LjA4LDM2My40M1pNMTE4OS4zOSwzNzQuNzdMMTE4NC4zOCwzNzQuNzdMMTE4NC4zOCwzNTMuMTRDMTE4Ni4zNiwzNTIuNzQgMTE4OS4xMywzNTIuNDggMTE5Mi42OSwzNTIuNDhDMTE5Ni43OCwzNTIuNDggMTE5OC42MiwzNTMuMTQgMTIwMC4yMSwzNTQuMDZDMTIwMS40LDM1NC45OCAxMjAyLjMyLDM1Ni43IDEyMDIuMzIsMzU4LjgxQzEyMDIuMzIsMzYxLjE4IDEyMDAuNDcsMzYzLjAzIDExOTcuODQsMzYzLjgyTDExOTcuODQsMzY0LjA4QzExOTkuOTUsMzY0Ljg3IDEyMDEuMTQsMzY2LjQ1IDEyMDEuOCwzNjkuMzVDMTIwMi40NiwzNzIuNjUgMTIwMi44NSwzNzMuOTcgMTIwMy4zOCwzNzQuNzZMMTE5Ny45NywzNzQuNzZDMTE5Ny4zMSwzNzMuOTcgMTE5Ni45MiwzNzEuOTkgMTE5Ni4yNiwzNjkuNDlDMTE5NS44NiwzNjcuMTIgMTE5NC41NSwzNjYuMDYgMTE5MS43OCwzNjYuMDZMMTE4OS40MSwzNjYuMDZMMTE4OS40MSwzNzQuNzdMMTE4OS4zOSwzNzQuNzdaTTExODkuNTMsMzYyLjUxTDExOTEuOSwzNjIuNTFDMTE5NC42NywzNjIuNTEgMTE5Ni45MSwzNjEuNTkgMTE5Ni45MSwzNTkuMzRDMTE5Ni45MSwzNTcuMzYgMTE5NS40NiwzNTYuMDQgMTE5Mi4yOSwzNTYuMDRDMTE5MC45NywzNTYuMDQgMTE5MC4wNSwzNTYuMTcgMTE4OS41MiwzNTYuM0wxMTg5LjUyLDM2Mi41MUwxMTg5LjUzLDM2Mi41MVoiIHN0eWxlPSJmaWxsOnJnYigxNzIsMjIsNDQpO2ZpbGwtcnVsZTpub256ZXJvOyIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+Cg==" alt="Vulkan Logo" width="50%">
    </span>
</div>
<div id="header">
<h1>Vulkan<sup>®</sup> 1.3.235 - A Specification (with all registered Vulkan extensions)</h1>
<div class="details">
<span id="author" class="author">The Khronos<sup>®</sup> Vulkan Working Group</span><br>
<span id="revnumber">version 1.3.235,</span>
<span id="revdate">2022-11-17 12:17:37Z</span>
<br><span id="revremark">from git branch: github-main commit: f4eb3e9a7acdef9ab62ac9af954a50409895ac6d</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="index.html">Titlepage</a></li><li><a href="chap1.html">1. Preamble</a></li>
<li><a href="chap2.html">2. Introduction</a>
<ul class="sectlevel2">
<li><a href="chap2.html#introduction-conventions">2.1. Document Conventions</a></li>
</ul>
</li>
<li><a href="chap3.html">3. Fundamentals</a>
<ul class="sectlevel2">
<li><a href="chap3.html#fundamentals-host-environment">3.1. Host and Device Environment</a></li>
<li><a href="chap3.html#fundamentals-execmodel">3.2. Execution Model</a></li>
<li><a href="chap3.html#fundamentals-objectmodel-overview">3.3. Object Model</a></li>
<li><a href="chap3.html#fundamentals-abi">3.4. Application Binary Interface</a></li>
<li><a href="chap3.html#fundamentals-commandsyntax">3.5. Command Syntax and Duration</a></li>
<li><a href="chap3.html#fundamentals-threadingbehavior">3.6. Threading Behavior</a></li>
<li><a href="chap3.html#fundamentals-validusage">3.7. Valid Usage</a></li>
<li><a href="chap3.html#fundamentals-returncodes">3.8. <code>VkResult</code> Return Codes</a></li>
<li><a href="chap3.html#fundamentals-numerics">3.9. Numeric Representation and Computation</a></li>
<li><a href="chap3.html#fundamentals-fixedconv">3.10. Fixed-Point Data Conversions</a></li>
<li><a href="chap3.html#fundamentals-common-objects">3.11. Common Object Types</a></li>
<li><a href="chap3.html#fundamentals-api-name-aliases">3.12. API Name Aliases</a></li>
</ul>
</li>
<li><a href="chap4.html">4. Initialization</a>
<ul class="sectlevel2">
<li><a href="chap4.html#initialization-functionpointers">4.1. Command Function Pointers</a></li>
<li><a href="chap4.html#initialization-instances">4.2. Instances</a></li>
</ul>
</li>
<li><a href="chap5.html">5. Devices and Queues</a>
<ul class="sectlevel2">
<li><a href="chap5.html#devsandqueues-physical-device-enumeration">5.1. Physical Devices</a></li>
<li><a href="chap5.html#devsandqueues-devices">5.2. Devices</a></li>
<li><a href="chap5.html#devsandqueues-queues">5.3. Queues</a></li>
</ul>
</li>
<li><a href="chap6.html">6. Command Buffers</a>
<ul class="sectlevel2">
<li><a href="chap6.html#commandbuffers-lifecycle">6.1. Command Buffer Lifecycle</a></li>
<li><a href="chap6.html#commandbuffers-pools">6.2. Command Pools</a></li>
<li><a href="chap6.html#commandbuffer-allocation">6.3. Command Buffer Allocation and Management</a></li>
<li><a href="chap6.html#commandbuffers-recording">6.4. Command Buffer Recording</a></li>
<li><a href="chap6.html#commandbuffers-submission">6.5. Command Buffer Submission</a></li>
<li><a href="chap6.html#commandbuffers-submission-progress">6.6. Queue Forward Progress</a></li>
<li><a href="chap6.html#commandbuffers-secondary">6.7. Secondary Command Buffer Execution</a></li>
<li><a href="chap6.html#commandbuffers-devicemask">6.8. Command Buffer Device Mask</a></li>
</ul>
</li>
<li><a href="chap7.html">7. Synchronization and Cache Control</a>
<ul class="sectlevel2">
<li><a href="chap7.html#synchronization-dependencies">7.1. Execution and Memory Dependencies</a></li>
<li><a href="chap7.html#synchronization-implicit">7.2. Implicit Synchronization Guarantees</a></li>
<li><a href="chap7.html#synchronization-fences">7.3. Fences</a></li>
<li><a href="chap7.html#synchronization-semaphores">7.4. Semaphores</a></li>
<li><a href="chap7.html#synchronization-events">7.5. Events</a></li>
<li><a href="chap7.html#synchronization-pipeline-barriers">7.6. Pipeline Barriers</a></li>
<li><a href="chap7.html#synchronization-memory-barriers">7.7. Memory Barriers</a></li>
<li><a href="chap7.html#synchronization-wait-idle">7.8. Wait Idle Operations</a></li>
<li><a href="chap7.html#synchronization-submission-host-writes">7.9. Host Write Ordering Guarantees</a></li>
<li><a href="chap7.html#synchronization-device-group">7.10. Synchronization and Multiple Physical Devices</a></li>
<li><a href="chap7.html#calibrated-timestamps">7.11. Calibrated timestamps</a></li>
</ul>
</li>
<li><a href="chap8.html">8. Render Pass</a>
<ul class="sectlevel2">
<li><a href="chap8.html#renderpass-creation">8.1. Render Pass Creation</a></li>
<li><a href="chap8.html#renderpass-compatibility">8.2. Render Pass Compatibility</a></li>
<li><a href="chap8.html#_framebuffers">8.3. Framebuffers</a></li>
<li><a href="chap8.html#renderpass-commands">8.4. Render Pass Commands</a></li>
<li><a href="chap8.html#renderpass-creation-feedback">8.5. Render Pass Creation Feedback</a></li>
</ul>
</li>
<li><a href="chap9.html">9. Shaders</a>
<ul class="sectlevel2">
<li><a href="chap9.html#shader-modules">9.1. Shader Modules</a></li>
<li><a href="chap9.html#shaders-identifiers">9.2. Shader Module Identifiers</a></li>
<li><a href="chap9.html#shaders-execution">9.3. Shader Execution</a></li>
<li><a href="chap9.html#shaders-execution-memory-ordering">9.4. Shader Memory Access Ordering</a></li>
<li><a href="chap9.html#shaders-inputs">9.5. Shader Inputs and Outputs</a></li>
<li><a href="chap9.html#shaders-task">9.6. Task Shaders</a></li>
<li><a href="chap9.html#shaders-mesh">9.7. Mesh Shaders</a></li>
<li><a href="chap9.html#shaders-vertex">9.8. Vertex Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-control">9.9. Tessellation Control Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-evaluation">9.10. Tessellation Evaluation Shaders</a></li>
<li><a href="chap9.html#shaders-geometry">9.11. Geometry Shaders</a></li>
<li><a href="chap9.html#shaders-fragment">9.12. Fragment Shaders</a></li>
<li><a href="chap9.html#shaders-compute">9.13. Compute Shaders</a></li>
<li><a href="chap9.html#shaders-ray-generation">9.14. Ray Generation Shaders</a></li>
<li><a href="chap9.html#shaders-intersection">9.15. Intersection Shaders</a></li>
<li><a href="chap9.html#shaders-any-hit">9.16. Any-Hit Shaders</a></li>
<li><a href="chap9.html#shaders-closest-hit">9.17. Closest Hit Shaders</a></li>
<li><a href="chap9.html#shaders-miss">9.18. Miss Shaders</a></li>
<li><a href="chap9.html#shaders-callable">9.19. Callable Shaders</a></li>
<li><a href="chap9.html#shaders-interpolation-decorations">9.20. Interpolation decorations</a></li>
<li><a href="chap9.html#shaders-staticuse">9.21. Static Use</a></li>
<li><a href="chap9.html#shaders-scope">9.22. Scope</a></li>
<li><a href="chap9.html#shaders-group-operations">9.23. Group Operations</a></li>
<li><a href="chap9.html#shaders-quad-operations">9.24. Quad Group Operations</a></li>
<li><a href="chap9.html#shaders-derivative-operations">9.25. Derivative Operations</a></li>
<li><a href="chap9.html#shaders-helper-invocations">9.26. Helper Invocations</a></li>
<li><a href="chap9.html#_cooperative_matrices">9.27. Cooperative Matrices</a></li>
<li><a href="chap9.html#shaders-validation-cache">9.28. Validation Cache</a></li>
</ul>
</li>
<li><a href="chap10.html">10. Pipelines</a>
<ul class="sectlevel2">
<li><a href="chap10.html#pipelines-compute">10.1. Compute Pipelines</a></li>
<li><a href="chap10.html#pipelines-graphics">10.2. Graphics Pipelines</a></li>
<li><a href="chap10.html#pipelines-ray-tracing">10.3. Ray Tracing Pipelines</a></li>
<li><a href="chap10.html#pipelines-destruction">10.4. Pipeline Destruction</a></li>
<li><a href="chap10.html#pipelines-multiple">10.5. Multiple Pipeline Creation</a></li>
<li><a href="chap10.html#pipelines-pipeline-derivatives">10.6. Pipeline Derivatives</a></li>
<li><a href="chap10.html#pipelines-cache">10.7. Pipeline Cache</a></li>
<li><a href="chap10.html#pipelines-specialization-constants">10.8. Specialization Constants</a></li>
<li><a href="chap10.html#pipelines-library">10.9. Pipeline Libraries</a></li>
<li><a href="chap10.html#pipelines-binding">10.10. Pipeline Binding</a></li>
<li><a href="chap10.html#pipelines-dynamic-state">10.11. Dynamic State</a></li>
<li><a href="chap10.html#pipelines-shader-information">10.12. Pipeline Properties and Shader Information</a></li>
<li><a href="chap10.html#pipelines-compiler-control">10.13. Pipeline Compiler Control</a></li>
<li><a href="chap10.html#pipelines-creation-feedback">10.14. Pipeline Creation Feedback</a></li>
</ul>
</li>
<li><a href="chap11.html">11. Memory Allocation</a>
<ul class="sectlevel2">
<li><a href="chap11.html#memory-host">11.1. Host Memory</a></li>
<li><a href="chap11.html#memory-device">11.2. Device Memory</a></li>
</ul>
</li>
<li><a href="chap12.html">12. Resource Creation</a>
<ul class="sectlevel2">
<li><a href="chap12.html#resources-buffers">12.1. Buffers</a></li>
<li><a href="chap12.html#resources-buffer-views">12.2. Buffer Views</a></li>
<li><a href="chap12.html#resources-images">12.3. Images</a></li>
<li><a href="chap12.html#resources-image-layouts">12.4. Image Layouts</a></li>
<li><a href="chap12.html#resources-image-views">12.5. Image Views</a></li>
<li><a href="chap12.html#resources-acceleration-structures">12.6. Acceleration Structures</a></li>
<li><a href="chap12.html#resources-micromaps">12.7. Micromaps</a></li>
<li><a href="chap12.html#resources-association">12.8. Resource Memory Association</a></li>
<li><a href="chap12.html#resources-sharing">12.9. Resource Sharing Mode</a></li>
<li><a href="chap12.html#resources-memory-aliasing">12.10. Memory Aliasing</a></li>
<li><a href="chap12.html#resources-buffer-collection-fuchsia">12.11. Buffer Collections</a></li>
</ul>
</li>
<li><a href="chap13.html">13. Samplers</a>
<ul class="sectlevel2">
<li><a href="chap13.html#samplers-YCbCr-conversion">13.1. Sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></li>
</ul>
</li>
<li><a href="chap14.html">14. Resource Descriptors</a>
<ul class="sectlevel2">
<li><a href="chap14.html#descriptorsets-types">14.1. Descriptor Types</a></li>
<li><a href="chap14.html#descriptorsets-sets">14.2. Descriptor Sets</a></li>
<li><a href="chap14.html#descriptorsets-physical-storage-buffer">14.3. Physical Storage Buffer Access</a></li>
<li><a href="chap14.html#descriptorbuffers">14.4. Descriptor Buffers</a></li>
</ul>
</li>
<li><a href="chap15.html">15. Shader Interfaces</a>
<ul class="sectlevel2">
<li><a href="chap15.html#interfaces-iointerfaces">15.1. Shader Input and Output Interfaces</a></li>
<li><a href="chap15.html#interfaces-vertexinput">15.2. Vertex Input Interface</a></li>
<li><a href="chap15.html#interfaces-fragmentoutput">15.3. Fragment Output Interface</a></li>
<li><a href="chap15.html#interfaces-legacy-dithering">15.4. Legacy Dithering</a></li>
<li><a href="chap15.html#interfaces-inputattachment">15.5. Fragment Input Attachment Interface</a></li>
<li><a href="chap15.html#interfaces-raypipeline">15.6. Ray Tracing Pipeline Interface</a></li>
<li><a href="chap15.html#interfaces-resources">15.7. Shader Resource Interface</a></li>
<li><a href="chap15.html#interfaces-builtin-variables">15.8. Built-In Variables</a></li>
</ul>
</li>
<li><a href="chap16.html">16. Image Operations</a>
<ul class="sectlevel2">
<li><a href="chap16.html#_image_operations_overview">16.1. Image Operations Overview</a></li>
<li><a href="chap16.html#_conversion_formulas">16.2. Conversion Formulas</a></li>
<li><a href="chap16.html#_texel_input_operations">16.3. Texel Input Operations</a></li>
<li><a href="chap16.html#_texel_output_operations">16.4. Texel Output Operations</a></li>
<li><a href="chap16.html#textures-normalized-operations">16.5. Normalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#_unnormalized_texel_coordinate_operations">16.6. Unnormalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-integer-coordinate-operations">16.7. Integer Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-sample-operations">16.8. Image Sample Operations</a></li>
<li><a href="chap16.html#textures-footprint">16.9. Texel Footprint Evaluation</a></li>
<li><a href="chap16.html#textures-weightimage">16.10. Weight Image Sampling</a></li>
<li><a href="chap16.html#textures-blockmatch">16.11. Block Matching</a></li>
<li><a href="chap16.html#textures-boxfilter">16.12. Box Filter Sampling</a></li>
<li><a href="chap16.html#textures-instructions">16.13. Image Operation Steps</a></li>
<li><a href="chap16.html#textures-queries">16.14. Image Query Instructions</a></li>
</ul>
</li>
<li><a href="chap17.html">17. Fragment Density Map Operations</a>
<ul class="sectlevel2">
<li><a href="chap17.html#_fragment_density_map_operations_overview">17.1. Fragment Density Map Operations Overview</a></li>
<li><a href="chap17.html#fragmentdensitymap-fetch-density-value">17.2. Fetch Density Value</a></li>
<li><a href="chap17.html#fragmentdensitymap-conversion-to-fragment-area">17.3. Fragment Area Conversion</a></li>
</ul>
</li>
<li><a href="chap18.html">18. Queries</a>
<ul class="sectlevel2">
<li><a href="chap18.html#queries-pools">18.1. Query Pools</a></li>
<li><a href="chap18.html#queries-operation">18.2. Query Operation</a></li>
<li><a href="chap18.html#queries-occlusion">18.3. Occlusion Queries</a></li>
<li><a href="chap18.html#queries-pipestats">18.4. Pipeline Statistics Queries</a></li>
<li><a href="chap18.html#queries-timestamps">18.5. Timestamp Queries</a></li>
<li><a href="chap18.html#queries-performance">18.6. Performance Queries</a></li>
<li><a href="chap18.html#queries-transform-feedback">18.7. Transform Feedback Queries</a></li>
<li><a href="chap18.html#queries-primitives-generated">18.8. Primitives Generated Queries</a></li>
<li><a href="chap18.html#queries-mesh-shader">18.9. Mesh Shader Queries</a></li>
<li><a href="chap18.html#queries-performance-intel">18.10. Intel performance queries</a></li>
<li><a href="chap18.html#queries-result-status-only">18.11. Result Status Queries</a></li>
<li><a href="chap18.html#queries-video-encode-bitstream-buffer-range">18.12. Video Encode Bitstream Buffer Range</a></li>
</ul>
</li>
<li><a href="chap19.html">19. Clear Commands</a>
<ul class="sectlevel2">
<li><a href="chap19.html#clears-outside">19.1. Clearing Images Outside A Render Pass Instance</a></li>
<li><a href="chap19.html#clears-inside">19.2. Clearing Images Inside A Render Pass Instance</a></li>
<li><a href="chap19.html#clears-values">19.3. Clear Values</a></li>
<li><a href="chap19.html#clears-filling-buffers">19.4. Filling Buffers</a></li>
<li><a href="chap19.html#clears-updating-buffers">19.5. Updating Buffers</a></li>
</ul>
</li>
<li><a href="chap20.html">20. Copy Commands</a>
<ul class="sectlevel2">
<li><a href="chap20.html#copies-buffers">20.1. Copying Data Between Buffers</a></li>
<li><a href="chap20.html#copies-images">20.2. Copying Data Between Images</a></li>
<li><a href="chap20.html#copies-buffers-images">20.3. Copying Data Between Buffers and Images</a></li>
<li><a href="chap20.html#indirect-copies">20.4. Indirect Copies</a></li>
<li><a href="chap20.html#copies-imagescaling">20.5. Image Copies with Scaling</a></li>
<li><a href="chap20.html#copies-resolve">20.6. Resolving Multisample Images</a></li>
<li><a href="chap20.html#copies-buffer-markers">20.7. Buffer Markers</a></li>
</ul>
</li>
<li><a href="chap21.html">21. Drawing Commands</a>
<ul class="sectlevel2">
<li><a href="chap21.html#drawing-primitive-topologies">21.1. Primitive Topologies</a></li>
<li><a href="chap21.html#drawing-primitive-order">21.2. Primitive Order</a></li>
<li><a href="chap21.html#drawing-primitive-shading">21.3. Programmable Primitive Shading</a></li>
<li><a href="chap21.html#drawing-conditional-rendering">21.4. Conditional Rendering</a></li>
<li><a href="chap21.html#drawing-mesh-shading">21.5. Programmable Mesh Shading</a></li>
</ul>
</li>
<li><a href="chap22.html">22. Fixed-Function Vertex Processing</a>
<ul class="sectlevel2">
<li><a href="chap22.html#fxvertex-attrib">22.1. Vertex Attributes</a></li>
<li><a href="chap22.html#fxvertex-input">22.2. Vertex Input Description</a></li>
<li><a href="chap22.html#fxvertex-attribute_divisor">22.3. Vertex Attribute Divisor in Instanced Rendering</a></li>
<li><a href="chap22.html#fxvertex-input-address-calculation">22.4. Vertex Input Address Calculation</a></li>
</ul>
</li>
<li><a href="chap23.html">23. Tessellation</a>
<ul class="sectlevel2">
<li><a href="chap23.html#_tessellator">23.1. Tessellator</a></li>
<li><a href="chap23.html#_tessellator_patch_discard">23.2. Tessellator Patch Discard</a></li>
<li><a href="chap23.html#tessellation-tessellator-spacing">23.3. Tessellator Spacing</a></li>
<li><a href="chap23.html#tessellation-primitive-order">23.4. Tessellation Primitive Ordering</a></li>
<li><a href="chap23.html#tessellation-vertex-winding-order">23.5. Tessellator Vertex Winding Order</a></li>
<li><a href="chap23.html#tessellation-triangle-tessellation">23.6. Triangle Tessellation</a></li>
<li><a href="chap23.html#tessellation-quad-tessellation">23.7. Quad Tessellation</a></li>
<li><a href="chap23.html#tessellation-isoline-tessellation">23.8. Isoline Tessellation</a></li>
<li><a href="chap23.html#tessellation-point-mode">23.9. Tessellation Point Mode</a></li>
<li><a href="chap23.html#_tessellation_pipeline_state">23.10. Tessellation Pipeline State</a></li>
</ul>
</li>
<li><a href="chap24.html">24. Geometry Shading</a>
<ul class="sectlevel2">
<li><a href="chap24.html#geometry-input">24.1. Geometry Shader Input Primitives</a></li>
<li><a href="chap24.html#geometry-output">24.2. Geometry Shader Output Primitives</a></li>
<li><a href="chap24.html#geometry-invocations">24.3. Multiple Invocations of Geometry Shaders</a></li>
<li><a href="chap24.html#geometry-ordering">24.4. Geometry Shader Primitive Ordering</a></li>
<li><a href="chap24.html#geometry-passthrough">24.5. Geometry Shader Passthrough</a></li>
</ul>
</li>
<li><a href="chap25.html">25. Mesh Shading</a>
<ul class="sectlevel2">
<li><a href="chap25.html#mesh-task-input">25.1. Task Shader Input</a></li>
<li><a href="chap25.html#mesh-task-output">25.2. Task Shader Output</a></li>
<li><a href="chap25.html#mesh-generation">25.3. Mesh Generation</a></li>
<li><a href="chap25.html#mesh-input">25.4. Mesh Shader Input</a></li>
<li><a href="chap25.html#mesh-output">25.5. Mesh Shader Output</a></li>
<li><a href="chap25.html#mesh-output-perview">25.6. Mesh Shader Per-View Outputs</a></li>
<li><a href="chap25.html#mesh-ordering">25.7. Mesh Shader Primitive Ordering</a></li>
</ul>
</li>
<li><a href="chap26.html">26. Fixed-Function Vertex Post-Processing</a>
<ul class="sectlevel2">
<li><a href="chap26.html#vertexpostproc-transform-feedback">26.1. Transform Feedback</a></li>
<li><a href="chap26.html#vertexpostproc-viewport-swizzle">26.2. Viewport Swizzle</a></li>
<li><a href="chap26.html#vertexpostproc-flatshading">26.3. Flat Shading</a></li>
<li><a href="chap26.html#vertexpostproc-clipping">26.4. Primitive Clipping</a></li>
<li><a href="chap26.html#vertexpostproc-clipping-shader-outputs">26.5. Clipping Shader Outputs</a></li>
<li><a href="chap26.html#vertexpostproc-viewportwscaling">26.6. Controlling Viewport W Scaling</a></li>
<li><a href="chap26.html#vertexpostproc-coord-transform">26.7. Coordinate Transformations</a></li>
<li><a href="chap26.html#vertexpostproc-renderpass-transform">26.8. Render Pass Transform</a></li>
<li><a href="chap26.html#vertexpostproc-viewport">26.9. Controlling the Viewport</a></li>
</ul>
</li>
<li><a href="chap27.html">27. Rasterization</a>
<ul class="sectlevel2">
<li><a href="chap27.html#primsrast-discard">27.1. Discarding Primitives Before Rasterization</a></li>
<li><a href="chap27.html#primsrast-stream">27.2. Controlling the Vertex Stream Used for Rasterization</a></li>
<li><a href="chap27.html#primsrast-order">27.3. Rasterization Order</a></li>
<li><a href="chap27.html#primsrast-multisampling">27.4. Multisampling</a></li>
<li><a href="chap27.html#primsrast-samplelocations">27.5. Custom Sample Locations</a></li>
<li><a href="chap27.html#primsrast-fragment-shading-rate">27.6. Fragment Shading Rates</a></li>
<li><a href="chap27.html#primsrast-shading-rate-image">27.7. Shading Rate Image</a></li>
<li><a href="chap27.html#primsrast-sampleshading">27.8. Sample Shading</a></li>
<li><a href="chap27.html#primsrast-barycentric">27.9. Barycentric Interpolation</a></li>
<li><a href="chap27.html#primsrast-points">27.10. Points</a></li>
<li><a href="chap27.html#primsrast-lines">27.11. Line Segments</a></li>
<li><a href="chap27.html#primsrast-polygons">27.12. Polygons</a></li>
</ul>
</li>
<li><a href="chap28.html">28. Fragment Operations</a>
<ul class="sectlevel2">
<li><a href="chap28.html#fragops-discard-rectangles">28.1. Discard Rectangles Test</a></li>
<li><a href="chap28.html#fragops-scissor">28.2. Scissor Test</a></li>
<li><a href="chap28.html#fragops-exclusive-scissor">28.3. Exclusive Scissor Test</a></li>
<li><a href="chap28.html#fragops-samplemask">28.4. Sample Mask Test</a></li>
<li><a href="chap28.html#fragops-shader">28.5. Fragment Shading</a></li>
<li><a href="chap28.html#fragops-covg">28.6. Multisample Coverage</a></li>
<li><a href="chap28.html#fragops-ds-state">28.7. Depth and Stencil Operations</a></li>
<li><a href="chap28.html#fragops-dbt">28.8. Depth Bounds Test</a></li>
<li><a href="chap28.html#fragops-stencil">28.9. Stencil Test</a></li>
<li><a href="chap28.html#fragops-depth">28.10. Depth Test</a></li>
<li><a href="chap28.html#fragops-rep-frag-test">28.11. Representative Fragment Test</a></li>
<li><a href="chap28.html#fragops-samplecount">28.12. Sample Counting</a></li>
<li><a href="chap28.html#fragops-coverage-to-color">28.13. Fragment Coverage To Color</a></li>
<li><a href="chap28.html#fragops-coverage-reduction">28.14. Coverage Reduction</a></li>
</ul>
</li>
<li><a href="chap29.html">29. The Framebuffer</a>
<ul class="sectlevel2">
<li><a href="chap29.html#framebuffer-blending">29.1. Blending</a></li>
<li><a href="chap29.html#framebuffer-logicop">29.2. Logical Operations</a></li>
<li><a href="chap29.html#framebuffer-color-write-mask">29.3. Color Write Mask</a></li>
<li><a href="chap29.html#framebuffer-color-write-enable">29.4. Color Write Enable</a></li>
<li><a href="chap29.html#framebuffer-queries">29.5. Framebuffer Query Instructions</a></li>
</ul>
</li>
<li><a href="chap30.html">30. Dispatching Commands</a></li>
<li><a href="chap31.html">31. Device-Generated Commands</a>
<ul class="sectlevel2">
<li><a href="chap31.html#indirectmdslayout">31.1. Indirect Commands Layout</a></li>
<li><a href="chap31.html#_indirect_commands_generation_and_execution">31.2. Indirect Commands Generation And Execution</a></li>
</ul>
</li>
<li><a href="chap32.html">32. Sparse Resources</a>
<ul class="sectlevel2">
<li><a href="chap32.html#sparsememory-sparseresourcefeatures">32.1. Sparse Resource Features</a></li>
<li><a href="chap32.html#sparsememory-fully-resident">32.2. Sparse Buffers and Fully-Resident Images</a></li>
<li><a href="chap32.html#sparsememory-partially-resident-buffers">32.3. Sparse Partially-Resident Buffers</a></li>
<li><a href="chap32.html#sparsememory-partially-resident-images">32.4. Sparse Partially-Resident Images</a></li>
<li><a href="chap32.html#sparsememory-sparse-memory-aliasing">32.5. Sparse Memory Aliasing</a></li>
<li><a href="chap32.html#_sparse_resource_implementation_guidelines_informative">32.6. Sparse Resource Implementation Guidelines (Informative)</a></li>
<li><a href="chap32.html#sparsememory-resourceapi">32.7. Sparse Resource API</a></li>
</ul>
</li>
<li><a href="chap33.html">33. Window System Integration (WSI)</a>
<ul class="sectlevel2">
<li><a href="chap33.html#_wsi_platform">33.1. WSI Platform</a></li>
<li><a href="chap33.html#_wsi_surface">33.2. WSI Surface</a></li>
<li><a href="chap33.html#display">33.3. Presenting Directly to Display Devices</a></li>
<li><a href="chap33.html#_querying_for_wsi_support">33.4. Querying for WSI Support</a></li>
<li><a href="chap33.html#_surface_queries">33.5. Surface Queries</a></li>
<li><a href="chap33.html#_full_screen_exclusive_control">33.6. Full Screen Exclusive Control</a></li>
<li><a href="chap33.html#_device_group_queries">33.7. Device Group Queries</a></li>
<li><a href="chap33.html#_display_timing_queries">33.8. Display Timing Queries</a></li>
<li><a href="chap33.html#present-wait">33.9. Present Wait</a></li>
<li><a href="chap33.html#_wsi_swapchain">33.10. WSI Swapchain</a></li>
<li><a href="chap33.html#_hdr_metadata">33.11. Hdr Metadata</a></li>
<li><a href="chap33.html#present-barrier">33.12. Present Barrier</a></li>
</ul>
</li>
<li><a href="chap34.html">34. Deferred Host Operations</a>
<ul class="sectlevel2">
<li><a href="chap34.html#deferred-host-operations-requesting">34.1. Requesting Deferral</a></li>
<li><a href="chap34.html#_deferred_host_operations_api">34.2. Deferred Host Operations API</a></li>
</ul>
</li>
<li><a href="chap35.html">35. Private Data</a></li>
<li><a href="chap36.html">36. Acceleration Structures</a>
<ul class="sectlevel2">
<li><a href="chap36.html#acceleration-structure-def">36.1. Acceleration Structures</a></li>
<li><a href="chap36.html#host-acceleration-structure">36.2. Host Acceleration Structure Operations</a></li>
</ul>
</li>
<li><a href="chap37.html">37. Micromap</a>
<ul class="sectlevel2">
<li><a href="chap37.html#micromap-def">37.1. Micromaps</a></li>
<li><a href="chap37.html#host-micromap">37.2. Host Micromap Operations</a></li>
</ul>
</li>
<li><a href="chap38.html">38. Ray Traversal</a>
<ul class="sectlevel2">
<li><a href="chap38.html#ray-intersection-candidate-determination">38.1. Ray Intersection Candidate Determination</a></li>
<li><a href="chap38.html#ray-intersection-culling">38.2. Ray Intersection Culling</a></li>
<li><a href="chap38.html#ray-intersection-confirmation">38.3. Ray Intersection Confirmation</a></li>
<li><a href="chap38.html#ray-closest-hit-determination">38.4. Ray Closest Hit Determination</a></li>
<li><a href="chap38.html#ray-result-determination">38.5. Ray Result Determination</a></li>
</ul>
</li>
<li><a href="chap39.html">39. Ray Tracing</a>
<ul class="sectlevel2">
<li><a href="chap39.html#ray-tracing-shader-call">39.1. Shader Call Instructions</a></li>
<li><a href="chap39.html#ray-tracing-commands">39.2. Ray Tracing Commands</a></li>
<li><a href="chap39.html#shader-binding-table">39.3. Shader Binding Table</a></li>
<li><a href="chap39.html#ray-tracing-pipeline-stack">39.4. Ray Tracing Pipeline Stack</a></li>
</ul>
</li>
<li><a href="chap40.html">40. Memory Decompression</a></li>
<li class="current"><a href="chap41.html">41. Video Decode and Encode Operations</a>
<ul class="sectlevel2">
<li class="current"><a href="chap41.html#_technical_terminology_and_semantics">41.1. Technical Terminology and Semantics</a></li>
<li class="current"><a href="chap41.html#_introduction">41.2. Introduction</a></li>
<li class="current"><a href="chap41.html#video-physical-device-capabilities">41.3. Video Physical Device Capabilities</a></li>
<li class="current"><a href="chap41.html#video-session-objects">41.4. Video Session Objects</a></li>
<li class="current"><a href="chap41.html#video-decode-operations">41.5. Video Decode Operations</a></li>
<li class="current"><a href="chap41.html#decode-h264">41.6. Video Decode of AVC (ITU-T H.264)</a></li>
<li class="current"><a href="chap41.html#decode-h265">41.7. Video Decode of HEVC (ITU-T H.265)</a></li>
<li class="current"><a href="chap41.html#video-encode-operations">41.8. Video Encode Operations</a></li>
<li class="current"><a href="chap41.html#encode-h264">41.9. Encode H.264</a></li>
<li class="current"><a href="chap41.html#encode-h265">41.10. Encode H.265</a></li>
</ul>
</li>
<li><a href="chap42.html">42. Optical Flow</a>
<ul class="sectlevel2">
<li><a href="chap42.html#_optical_flow_queues">42.1. Optical Flow Queues</a></li>
<li><a href="chap42.html#opticalflow-formats">42.2. Optical Flow Image Formats</a></li>
<li><a href="chap42.html#opticalflow-session">42.3. Optical Flow Session</a></li>
</ul>
</li>
<li><a href="chap43.html">43. Extending Vulkan</a>
<ul class="sectlevel2">
<li><a href="chap43.html#extendingvulkan-instanceanddevicefunctionality">43.1. Instance and Device Functionality</a></li>
<li><a href="chap43.html#extendingvulkan-coreversions">43.2. Core Versions</a></li>
<li><a href="chap43.html#extendingvulkan-layers">43.3. Layers</a></li>
<li><a href="chap43.html#extendingvulkan-extensions">43.4. Extensions</a></li>
<li><a href="chap43.html#extendingvulkan-extensions-extensiondependencies">43.5. Extension Dependencies</a></li>
<li><a href="chap43.html#_compatibility_guarantees_informative">43.6. Compatibility Guarantees (Informative)</a></li>
</ul>
</li>
<li><a href="chap44.html">44. Features</a>
<ul class="sectlevel2">
<li><a href="chap44.html#features-requirements">44.1. Feature Requirements</a></li>
<li><a href="chap44.html#profile-features">44.2. Profile Features</a></li>
</ul>
</li>
<li><a href="chap45.html">45. Limits</a>
<ul class="sectlevel2">
<li><a href="chap45.html#limits-minmax">45.1. Limit Requirements</a></li>
<li><a href="chap45.html#limits-multisample">45.2. Additional Multisampling Capabilities</a></li>
<li><a href="chap45.html#profile-limits">45.3. Profile Limits</a></li>
</ul>
</li>
<li><a href="chap46.html">46. Formats</a>
<ul class="sectlevel2">
<li><a href="chap46.html#formats-definition">46.1. Format Definition</a></li>
<li><a href="chap46.html#formats-properties">46.2. Format Properties</a></li>
<li><a href="chap46.html#features-required-format-support">46.3. Required Format Support</a></li>
</ul>
</li>
<li><a href="chap47.html">47. Additional Capabilities</a>
<ul class="sectlevel2">
<li><a href="chap47.html#capabilities-image">47.1. Additional Image Capabilities</a></li>
<li><a href="chap47.html#capabilities-buffer">47.2. Additional Buffer Capabilities</a></li>
<li><a href="chap47.html#capabilities-semaphore">47.3. Optional Semaphore Capabilities</a></li>
<li><a href="chap47.html#capabilities-fence">47.4. Optional Fence Capabilities</a></li>
<li><a href="chap47.html#features-timestamp-calibration">47.5. Timestamp Calibration Capabilities</a></li>
</ul>
</li>
<li><a href="chap48.html">48. Debugging</a>
<ul class="sectlevel2">
<li><a href="chap48.html#debugging-debug-utils">48.1. Debug Utilities</a></li>
<li><a href="chap48.html#debugging-debug-markers">48.2. Debug Markers</a></li>
<li><a href="chap48.html#debugging-debug-report-callbacks">48.3. Debug Report Callbacks</a></li>
<li><a href="chap48.html#_device_loss_debugging">48.4. Device Loss Debugging</a></li>
<li><a href="chap48.html#debugging-tooling-info">48.5. Active Tooling Information</a></li>
</ul>
</li>
<li><a href="chap49.html">Appendix A: Vulkan Environment for SPIR-V</a>
<ul class="sectlevel2">
<li><a href="chap49.html#_versions_and_formats">Versions and Formats</a></li>
<li><a href="chap49.html#spirvenv-capabilities">Capabilities</a></li>
<li><a href="chap49.html#spirvenv-module-validation">Validation Rules within a Module</a></li>
<li><a href="chap49.html#spirvenv-precision-operation">Precision and Operation of SPIR-V Instructions</a></li>
<li><a href="chap49.html#spirvenv-image-signedness">Signedness of SPIR-V Image Accesses</a></li>
<li><a href="chap49.html#spirvenv-format-type-matching">Image Format and Type Matching</a></li>
<li><a href="chap49.html#spirvenv-image-formats">Compatibility Between SPIR-V Image Formats And Vulkan Formats</a></li>
</ul>
</li>
<li><a href="chap50.html">Appendix B: Memory Model</a>
<ul class="sectlevel2">
<li><a href="chap50.html#memory-model-agent">Agent</a></li>
<li><a href="chap50.html#memory-model-memory-location">Memory Location</a></li>
<li><a href="chap50.html#memory-model-allocation">Allocation</a></li>
<li><a href="chap50.html#memory-model-memory-operation">Memory Operation</a></li>
<li><a href="chap50.html#memory-model-references">Reference</a></li>
<li><a href="chap50.html#memory-model-program-order">Program-Order</a></li>
<li><a href="chap50.html#shader-call-related">Shader Call Related</a></li>
<li><a href="chap50.html#shader-call-order">Shader Call Order</a></li>
<li><a href="chap50.html#memory-model-scope">Scope</a></li>
<li><a href="chap50.html#memory-model-atomic-operation">Atomic Operation</a></li>
<li><a href="chap50.html#memory-model-scoped-modification-order">Scoped Modification Order</a></li>
<li><a href="chap50.html#memory-model-memory-semantics">Memory Semantics</a></li>
<li><a href="chap50.html#memory-model-release-sequence">Release Sequence</a></li>
<li><a href="chap50.html#memory-model-synchronizes-with">Synchronizes-With</a></li>
<li><a href="chap50.html#memory-model-system-synchronizes-with">System-Synchronizes-With</a></li>
<li><a href="chap50.html#memory-model-non-private">Private vs. Non-Private</a></li>
<li><a href="chap50.html#memory-model-inter-thread-happens-before">Inter-Thread-Happens-Before</a></li>
<li><a href="chap50.html#memory-model-happens-before">Happens-Before</a></li>
<li><a href="chap50.html#memory-model-availability-visibility">Availability and Visibility</a></li>
<li><a href="chap50.html#memory-model-vulkan-availability-visibility">Availability, Visibility, and Domain Operations</a></li>
<li><a href="chap50.html#memory-model-availability-visibility-semantics">Availability and Visibility Semantics</a></li>
<li><a href="chap50.html#memory-model-instruction-av-vis">Per-Instruction Availability and Visibility Semantics</a></li>
<li><a href="chap50.html#memory-model-location-ordered">Location-Ordered</a></li>
<li><a href="chap50.html#memory-model-access-data-race">Data Race</a></li>
<li><a href="chap50.html#memory-model-visible-to">Visible-To</a></li>
<li><a href="chap50.html#memory-model-acyclicity">Acyclicity</a></li>
<li><a href="chap50.html#memory-model-shader-io">Shader I/O</a></li>
<li><a href="chap50.html#memory-model-deallocation">Deallocation</a></li>
<li><a href="chap50.html#memory-model-informative-descriptions">Descriptions (Informative)</a></li>
<li><a href="chap50.html#memory-model-tessellation-output-ordering">Tessellation Output Ordering</a></li>
<li><a href="chap50.html#memory-model-cooperative-matrix">Cooperative Matrix Memory Access</a></li>
</ul>
</li>
<li><a href="chap51.html">Appendix C: Compressed Image Formats</a>
<ul class="sectlevel2">
<li><a href="chap51.html#appendix-compressedtex-bc">Block-Compressed Image Formats</a></li>
<li><a href="chap51.html#appendix-compressedtex-etc2">ETC Compressed Image Formats</a></li>
<li><a href="chap51.html#appendix-compressedtex-astc">ASTC Compressed Image Formats</a></li>
<li><a href="chap51.html#appendix-compressedtex-pvrtc">PVRTC Compressed Image Formats</a></li>
</ul>
</li>
<li><a href="chap52.html">Appendix D: Core Revisions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap52.html#versions-1.3">Version 1.3</a></li>
<li><a href="chap52.html#versions-1.2">Version 1.2</a></li>
<li><a href="chap52.html#versions-1.1">Version 1.1</a></li>
<li><a href="chap52.html#versions-1.0">Version 1.0</a></li>
</ul>
</li>
<li><a href="chap53.html">Appendix E: Layers &amp; Extensions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap53.html#extension-appendices-list">List of Current Extensions</a></li>
<li><a href="chap53.html#provisional-extension-appendices-list">List of Provisional Extensions</a></li>
<li><a href="chap53.html#deprecated-extension-appendices-list">List of Deprecated Extensions</a></li>
</ul>
</li>
<li><a href="chap54.html">Appendix F: Vulkan Roadmap Milestones</a>
<ul class="sectlevel2">
<li><a href="chap54.html#roadmap-2022">Roadmap 2022</a></li>
</ul>
</li>
<li><a href="chap55.html">Appendix G: API Boilerplate</a>
<ul class="sectlevel2">
<li><a href="chap55.html#boilerplate-headers">Vulkan Header Files</a></li>
<li><a href="chap55.html#boilerplate-wsi-header">Window System-Specific Header Control (Informative)</a></li>
<li><a href="chap55.html#boilerplate-provisional-header">Provisional Extension Header Control (Informative)</a></li>
<li><a href="chap55.html#boilerplate-video-std-headers">Video Std Headers (Informative)</a></li>
</ul>
</li>
<li><a href="chap56.html">Appendix H: Invariance</a>
<ul class="sectlevel2">
<li><a href="chap56.html#_repeatability">Repeatability</a></li>
<li><a href="chap56.html#_multi_pass_algorithms">Multi-pass Algorithms</a></li>
<li><a href="chap56.html#_invariance_rules">Invariance Rules</a></li>
<li><a href="chap56.html#_tessellation_invariance">Tessellation Invariance</a></li>
</ul>
</li>
<li><a href="chap57.html">Appendix I: Lexicon</a>
<ul class="sectlevel2">
<li><a href="chap57.html#glossary">Glossary</a></li>
<li><a href="chap57.html#lexicon-common-abbreviations">Common Abbreviations</a></li>
<li><a href="chap57.html#lexicon-video-abbreviations">Video-Specific Abbreviations</a></li>
<li><a href="chap57.html#lexicon-prefixes">Prefixes</a></li>
</ul>
</li>
<li><a href="chap58.html">Appendix J: Credits (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap58.html#_working_group_contributors_to_vulkan">Working Group Contributors to Vulkan</a></li>
<li><a href="chap58.html#_other_credits">Other Credits</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="loading_msg" class="hidden" hidden=""><p>Loading… please wait.</p></div>
<!--ChunkedSearchboxMarker-->
<div class="searchbox"><label for="searchbox">Search: </label><input id="searchbox" type="text" disabled="disabled" value="Loading Search Data"><div id="resultsdiv"><ol id="results"></ol></div></div>
<div id="content" class="loadable"><div class="sect1">
<h2 id="video-decode-and-encode-operations"><a class="anchor" href="chap41.html"></a>41. Video Decode and Encode Operations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vulkan implementations <strong class="purple">may</strong> expose one or more queue families supporting
video decode and/or encode operations.
These operations are performed by recording them into a command buffer
within a <em>Video Coding Scope</em>, and submitting them to queues with video
decode or encode capabilities, respectively.</p>
</div>
<div class="paragraph">
<p>The Vulkan video functionalities are designed to be made available through a
set of APIs built on top of each other, consisting of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A core API providing common video coding functionalities,</p>
</li>
<li>
<p>APIs providing codec-independent video decode and video encode related
functionalities, respectively,</p>
</li>
<li>
<p>Additional codec-specific APIs built on top of those.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This chapter details the fundamental components and operations of these.</p>
</div>
<div class="sect2">
<h3 id="_technical_terminology_and_semantics"><a class="anchor" href="chap41.html#_technical_terminology_and_semantics"></a>41.1. Technical Terminology and Semantics</h3>
<div class="sect3">
<h4 id="video-picture-resources"><a class="anchor" href="chap41.html#video-picture-resources"></a>41.1.1. Video Picture Resources</h4>
<div class="paragraph">
<p><em>Video Picture Resources</em> represent multidimensional arrays of image data
which <strong class="purple">can</strong> be used as the source or target of video coding operations.
They <strong class="purple">may</strong> have associated metadata that <strong class="purple">can</strong> include implementation-private
details required for the decode or encode operations and application managed
color-space related information.</p>
</div>
<div class="paragraph">
<p>In Vulkan, a video picture resource is represented by a <a href="chap12.html#VkImage">VkImage</a>.
Individual <a href="chap12.html#VkImageView">VkImageView</a> objects created from such resources <strong class="purple">can</strong> be
used as <a href="chap41.html#decoded-output-picture">Decode Output Pictures</a>,
<a href="chap41.html#encode-input-picture">Encode Input Pictures</a>,
<a href="chap41.html#reconstructed-picture">Reconstructed Pictures</a>, and/or
<a href="chap41.html#reference-picture">Reference Pictures</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="decoded-output-picture"><a class="anchor" href="chap41.html#decoded-output-picture"></a>41.1.2. Decoded Output Picture</h4>
<div class="paragraph">
<p>The pixels resulting from the video decoding process are stored in a
<em>Decoded Output Picture</em>, represented by a <a href="chap12.html#VkImageView">VkImageView</a>.
This <strong class="purple">may</strong> be shared with the <a href="chap41.html#dpb">Decoded Picture Buffer</a>.
It <strong class="purple">may</strong> also be used as an input for video encode, graphics, or compute
operations
, or with <a href="chap33.html">Window System Integration</a> APIs
.</p>
</div>
</div>
<div class="sect3">
<h4 id="encode-input-picture"><a class="anchor" href="chap41.html#encode-input-picture"></a>41.1.3. Encode Input Picture</h4>
<div class="paragraph">
<p>The primary source of input pixels for the video encoding process is the
<em>Encode Input Picture</em>, represented by a <a href="chap12.html#VkImageView">VkImageView</a>.
It <strong class="purple">may</strong> also be a direct target of video decode, graphics, or compute
operations
, or with <a href="chap33.html">Window System Integration</a> APIs
.</p>
</div>
</div>
<div class="sect3">
<h4 id="reconstructed-picture"><a class="anchor" href="chap41.html#reconstructed-picture"></a>41.1.4. Reconstructed Picture</h4>
<div class="paragraph">
<p>An integral part of the video decoding pipeline is the reconstruction of
pictures from the compressed stream.
A similar stage exists in the video encoding pipeline as well.
A <em>Reconstructed Picture</em> is a <a href="chap41.html#video-picture-resources">Video Picture
Resource</a> resulting from this process.</p>
</div>
<div class="paragraph">
<p>Such reconstructed pictures <strong class="purple">can</strong> be used as <a href="chap41.html#reference-picture">Reference
Pictures</a> for subsequently decoded or encoded pictures.
The correct use of decoded pictures and/or reconstructed pictures as
reference pictures is driven by the video compression standard, the
implementation, and the application-specific use cases.</p>
</div>
</div>
<div class="sect3">
<h4 id="dpb"><a class="anchor" href="chap41.html#dpb"></a>41.1.5. Decoded Picture Buffer (DPB)</h4>
<div id="reference-picture" class="paragraph">
<p>Previously reconstructed pictures <strong class="purple">can</strong> be used by video codecs to provide
predictions of the values of samples in the subsequently decoded or encoded
pictures in which case they are referred to as <em>Reference Pictures</em>.</p>
</div>
<div class="paragraph">
<p>The <em>Decoded Picture Buffer (DPB)</em> is an indexed set of such reference
pictures corresponding to a particular <a href="chap41.html#video-session">Video Session</a>.</p>
</div>
<div id="dpb-slot" class="paragraph">
<p>Individual indexed entries of the <a href="chap41.html#dpb">DPB</a> are referred to as the
<em>Decoded Picture Buffer (DPB) Slots</em>.
A valid DPB slot index starts from zero and goes up to the maximum of <code>N</code> -
1, where <code>N</code> is the number of <a href="chap41.html#reference-picture">Reference Picture</a>
entries requested for a video session.
Each DPB slot <strong class="purple">can</strong> hold a <a href="chap41.html#reference-picture">Reference Picture</a>.</p>
</div>
<div class="paragraph">
<p>The DPB <strong class="purple">may</strong> be represented by a single multi-layer image where subsequent
layers correspond to subsequent DPB slots, or by individual layers of
multiple images each separately associated with a particular DPB slot.</p>
</div>
</div>
<div class="sect3">
<h4 id="reference-metadata"><a class="anchor" href="chap41.html#reference-metadata"></a>41.1.6. Reference Picture Metadata</h4>
<div class="paragraph">
<p>The opaque <a href="chap41.html#dpb-slot">DPB Slot</a> state managed by the implementation <strong class="purple">may</strong>
contain <em>Reference Picture Metadata</em>, present when the video picture
resource associated with the DPB slot is used as a
<a href="chap41.html#reference-picture">Reference Picture</a> in one or more video decode or
encode operations.</p>
</div>
<div class="paragraph">
<p>An implementation or application <strong class="purple">may</strong> maintain other metadata related to the
video picture resource or the DPB slot, but such data is outside the scope
of this specification.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note:</div>
<div class="paragraph">
<p>The video decode or encode implementation does not maintain internal
references to the reference pictures, beyond the reference picture metadata.
It is the responsibility of the Vulkan Application to create, manage, and
destroy, as well as to provide those video picture resources, when required,
during the decoding or encoding process.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="color-space-metadata"><a class="anchor" href="chap41.html#color-space-metadata"></a>41.1.7. Color Space Metadata</h4>
<div class="paragraph">
<p><em>Color Space Metadata</em> is the additional static or dynamic state associated
with a <a href="chap41.html#video-picture-resources">Video Picture Resource</a> specifying the
color volume (the color primaries, white point, and luminance range) of the
display that was used in mastering the video content.
The use of color space metadata is outside the scope of the current version
of the video core specification.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_introduction"><a class="anchor" href="chap41.html#_introduction"></a>41.2. Introduction</h3>
<div class="paragraph">
<p>This chapter discusses extensions supporting Video Decode or Encode
operations.
Video Decode and Encode operations are supported by queues with an
advertised queue capability of <code>VK_QUEUE_VIDEO_DECODE_BIT_KHR</code> and
<code>VK_QUEUE_VIDEO_ENCODE_BIT_KHR</code>, respectively.
Video Decode or Encode queue operation support allows for Vulkan
applications to cooperate closely with other graphics or compute operations
seamlessly and efficiently, therefore improving the overall application
performance.</p>
</div>
<div class="sect3">
<h4 id="video-decode-queue"><a class="anchor" href="chap41.html#video-decode-queue"></a>41.2.1. Video Decode Queue</h4>
<div class="paragraph">
<p><code><a href="chap53.html#VK_KHR_video_decode_queue">VK_KHR_video_decode_queue</a></code> adds a video decode queue type bit
<code>VK_QUEUE_VIDEO_DECODE_BIT_KHR</code> to <a href="chap5.html#VkQueueFlagBits">VkQueueFlagBits</a>.
As in the case of other queue types, an application <strong class="purple">must</strong> use
<a href="chap5.html#vkGetPhysicalDeviceQueueFamilyProperties">vkGetPhysicalDeviceQueueFamilyProperties</a> to query whether the physical
device has support for the Video Decode Queue.
When the implementation reports the <code>VK_QUEUE_VIDEO_DECODE_BIT_KHR</code> bit
for a queue family, it advertises general support for Vulkan queue
operations described in <a href="chap5.html">Devices and Queues</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="video-encode-queue"><a class="anchor" href="chap41.html#video-encode-queue"></a>41.2.2. Video Encode Queue</h4>
<div class="paragraph">
<p><code><a href="chap53.html#VK_KHR_video_encode_queue">VK_KHR_video_encode_queue</a></code> adds a video encode queue type bit
<code>VK_QUEUE_VIDEO_ENCODE_BIT_KHR</code> to <a href="chap5.html#VkQueueFlagBits">VkQueueFlagBits</a>.
As in the case of other queue types, an application <strong class="purple">must</strong> use
<a href="chap5.html#vkGetPhysicalDeviceQueueFamilyProperties">vkGetPhysicalDeviceQueueFamilyProperties</a> to query whether the physical
device has support for the Video Encode Queue.
When the implementation reports the <code>VK_QUEUE_VIDEO_ENCODE_BIT_KHR</code> bit
for a queue family, it advertises general support for Vulkan queue
operations described in <a href="chap5.html">Devices and Queues</a>.</p>
</div>
<div class="paragraph">
<p>The rest of the chapter focuses, specifically, on Video Decode and Encode
queue operations.</p>
</div>
</div>
<div class="sect3">
<h4 id="video-session-introduction"><a class="anchor" href="chap41.html#video-session-introduction"></a>41.2.3. Video Session</h4>
<div class="paragraph">
<p>Before performing any video decoding or encoding operations, the application
<strong class="purple">must</strong> create a <a href="chap41.html#video-session">Video Session</a> instance, of type
<a href="chap41.html#VkVideoSessionKHR">VkVideoSessionKHR</a>.
A <a href="chap41.html#video-session">Video Session</a> instance is an immutable object and
supports a single compression standard (for example, H.264, H.265, VP9, AV1,
etc.).
The implementation uses the <a href="chap41.html#VkVideoSessionKHR">VkVideoSessionKHR</a> object to maintain the
video state for the video decode or video encode operation.
A <a href="chap41.html#video-session">Video Session</a> instance is created specifically:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For a particular video compression standard;</p>
</li>
<li>
<p>For video decoding or video encoding;</p>
</li>
<li>
<p>With maximum supported decoded or encoded picture width/height;</p>
</li>
<li>
<p>With the maximum number of supported <a href="chap41.html#dpb">DPB</a> or
<a href="chap41.html#reconstructed-picture">Reconstructed Picture</a> slots that can be
allocated;</p>
</li>
<li>
<p>With the maximum number of <a href="chap41.html#reference-picture">Reference Pictures</a> that
<strong class="purple">can</strong> be used simultaneously for video decode or encode operations;</p>
</li>
<li>
<p>Codec color and features profile;</p>
</li>
<li>
<p>Color Space format description (not supported with this version of the
specification);</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="chap41.html#VkVideoSessionKHR">VkVideoSessionKHR</a> represents a single video decode or encode stream.
For each concurrently used stream, a separate instance of
<a href="chap41.html#VkVideoSessionKHR">VkVideoSessionKHR</a> is required.
After the application has finished with the processing of a stream, it can
reuse the <a href="chap41.html#video-session">Video Session</a> instance for another, provided
that the configuration parameters between the two usages are compatible (as
determined by the video compression standard in use).
Once the <a href="chap41.html#VkVideoSessionKHR">VkVideoSessionKHR</a> instance has been created, the video
compression standard and profiles, <a href="chap41.html#encode-input-picture">Input</a> /
<a href="chap41.html#decoded-output-picture">Output</a> / <a href="chap41.html#dpb">DPB</a> formats, and the settings
like the maximum extent <strong class="purple">cannot</strong> be changed.</p>
</div>
<div class="paragraph">
<p>The values of the following <a href="chap41.html#VkVideoSessionKHR">VkVideoSessionKHR</a> parameters <strong class="purple">can</strong> be
updated each frame, subject to the restrictions imposed on parameter updates
by the video compression standard in use:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>decoded or encoded picture size</p>
</li>
<li>
<p>number of active <a href="chap41.html#dpb">DPB</a> or <a href="chap41.html#reconstructed-picture">Reconstructed
Picture</a> slots</p>
</li>
<li>
<p>number of <a href="chap41.html#reference-picture">Reference Pictures</a> in use,</p>
</li>
<li>
<p>color space and color space metadata</p>
</li>
<li>
<p>color space metadata.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The updated parameters <strong class="purple">must</strong> not exceed the maximum limits specified when
creating the <a href="chap41.html#VkVideoSessionKHR">VkVideoSessionKHR</a> instance.</p>
</div>
</div>
<div class="sect3">
<h4 id="video-session-device-memory-heaps"><a class="anchor" href="chap41.html#video-session-device-memory-heaps"></a>41.2.4. Video Session Device Memory Heaps</h4>
<div class="paragraph">
<p>After creating a <a href="chap41.html#video-session">Video Session</a> instance, and before the
object can be used for any of the decode or encode operations, the
application <strong class="purple">must</strong> allocate and bind device memory resources to the Video
Session object.
An implementation <strong class="purple">may</strong> require one or more device memory heaps of different
memory types, as reported by the
<a href="chap41.html#vkGetVideoSessionMemoryRequirementsKHR">vkGetVideoSessionMemoryRequirementsKHR</a> function, to be bound with the
<a href="chap41.html#vkBindVideoSessionMemoryKHR">vkBindVideoSessionMemoryKHR</a> function to the <a href="chap41.html#video-session">Video
Session</a>, For more information about the <strong>Video Session Device Memory</strong>,
please refer to the <a href="chap41.html#binding-session-memory">Binding the Session Object
Device Memory</a> section, below.</p>
</div>
</div>
<div class="sect3">
<h4 id="video-session-parameters-introduction"><a class="anchor" href="chap41.html#video-session-parameters-introduction"></a>41.2.5. Video Session Parameters</h4>
<div class="paragraph">
<p>A lot of codec standards require parameters that are in use for the entire
video stream.
For example, H.264/AVC and HEVC standards require sequence and picture
parameter sets (SPS and PPS) that apply to multiple Video Decode and Encode
frames, layers, and sub-layers.
Vulkan Video uses <a href="chap41.html#video-session-parameters">Video Session Parameters</a>
objects to store such standard parameters.
The application creates one or more <a href="chap41.html#video-session-parameters">Video Session
Parameters</a> Objects against a <a href="chap41.html#video-session">Video Session</a>, with a set
of common Video Parameters that are required for the processing of the video
content.
During the object creation, the implementation stores the parameters to the
created instance.
During command buffer recording, it is the responsibility of the application
to provide the <a href="chap41.html#video-session-parameters">Video Session Parameters</a> object
containing the parameters that are necessary for the processing the portion
of the stream under consideration.</p>
</div>
</div>
<div class="sect3">
<h4 id="video-picture-subresources"><a class="anchor" href="chap41.html#video-picture-subresources"></a>41.2.6. Video Picture Subresources</h4>
<div class="paragraph">
<p>For <a href="chap41.html#video-picture-resources">Video Picture Resources</a>, an application has
the option to use single or multi-layer <a href="chap12.html#VkImage">images</a> for
<a href="chap12.html#resources-image-views">image views</a>.
The layer to be used during decode or encode operations <strong class="purple">can</strong> be specified
when the <a href="chap12.html#VkImageView">image view</a> is being created with the
<a href="chap12.html#VkImageSubresourceRange">VkImageSubresourceRange</a>::<code>baseArrayLayer</code> parameter, and/or within
the resource binding operations in command buffer by using the
<a href="chap41.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a>::<code>baseArrayLayer</code> parameter.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note:</div>
<div class="paragraph">
<p>Both Video Decode and Encode operations only work with a single layer at the
time.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The <a href="chap12.html#resources-image-views">Image views</a> representing the
<a href="chap41.html#encode-input-picture">Input</a> / <a href="chap41.html#decoded-output-picture">Output</a> /
<a href="chap41.html#dpb">DPB</a> <a href="chap41.html#video-picture-resources">Video Picture Resources</a> could have
been created with sizes bigger than the coded size that is used with Video
Decode and Encode operations.
This allows for the same Video Picture Resources to be reused when there is
a change in the input video content resolution.
The effective coded size of the <a href="chap41.html#video-picture-resources">Video Picture
Resources</a> used for Video Decode and Encode operations is provided with
<a href="chap41.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a>::<code>extent</code> parameter of each resource
in use.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note:</div>
<div class="paragraph">
<p>Many codec standards require the coded and <a href="chap41.html#video-picture-resources">Video
Picture Resources'</a> sizes to match.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect4">
<h5 id="dpb-picture-resources"><a class="anchor" href="chap41.html#dpb-picture-resources"></a>Video Session <a href="chap41.html#dpb">DPB and Reconstructed</a> Video Picture Resources</h5>
<div class="paragraph">
<p>The video compression standard chosen <strong class="purple">may</strong> require the use of
<a href="chap41.html#reference-picture">Reference Pictures</a>.
In Vulkan Video, like any other <a href="chap41.html#video-picture-resources">Video Picture
Resources</a>, the <a href="chap41.html#reference-picture">Reference Pictures</a> are represented
with <a href="chap12.html#resources-image-views">Image Views</a>.</p>
</div>
<div class="paragraph">
<p>When an application requires <a href="chap41.html#reference-picture">Reference Picture
Resources</a>, it creates and then associates <a href="chap12.html#VkImageView">image views</a>,
representing these resources, with Video Session <a href="chap41.html#dpb-slot">DPB or
Reconstructed slots</a> while recording the command buffer.</p>
</div>
<div class="paragraph">
<p><a href="chap41.html#decoded-output-picture">Decoded output pictures</a> <strong class="purple">may</strong> be used as
<a href="chap41.html#reference-picture">reference pictures</a> in future video decode operations.
The same pictures <strong class="purple">may</strong> be used in texture sampling operations or in the
(WSI) presentation pipeline.
Representing the <a href="chap41.html#dpb-slot">DPB’s Video Picture Resources</a> by
<a href="chap12.html#VkImageView">image views</a> makes it possible to accommodate all these use
cases in a “zero-copy” fashion.
Also, it provides more fine-grained control of the application over the
efficient usage of the DPB and Reconstructed <a href="chap11.html#VkDeviceMemory">Device Memory
Resources</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="video-session-dpb-slot-resource-management"><a class="anchor" href="chap41.html#video-session-dpb-slot-resource-management"></a>Video Session <a href="chap41.html#dpb-slot">DPB and Reconstructed Slot</a> Resource Management</h5>
<div class="paragraph">
<p>Before <a href="chap41.html#dpb-picture-resources">Video Picture Resources</a> can be used as
<a href="chap41.html#reference-picture">Reference Picture Resources</a>, Video Session
<a href="chap41.html#dpb-slot">DPB or Reconstructed Slots</a> <strong class="purple">must</strong> be associated with those
resources.</p>
</div>
<div class="paragraph">
<p>The application allocates a <a href="chap41.html#dpb-slot">DPB or Reconstructed Slot</a> and
associates it with a <a href="chap41.html#video-picture-resources">Video Picture Resource</a> and
then sets up the resource as a target of decode or encode operation.
After successfully decoding or encoding a picture with the targeted
<a href="chap41.html#dpb-slot">DPB or Reconstructed Slot</a> , in addition to the
<a href="chap41.html#reference-picture">Reference Picture</a> pixel data, the implementation <strong class="purple">may</strong>
generate an opaque <a href="chap41.html#reference-metadata">Reference Picture Metadata</a> for
that video session Slot and its associated <a href="chap41.html#video-picture-resources">Video
Picture Resource</a>.</p>
</div>
<div class="paragraph">
<p>Subsequently, one or more <a href="chap41.html#dpb-slot">DPB or Reconstructed video session
Slots</a>, along with their associated <a href="chap41.html#video-picture-resources">Video Picture
Resources</a>, <strong class="purple">can</strong> be used as <a href="chap41.html#reference-picture">Reference Picture’s</a>
source for the video decode or encode operations.</p>
</div>
<div class="paragraph">
<p>If <a href="chap41.html#reference-picture">Reference Pictures</a> were to be required for decoding
or encoding of the video bitstream, the
<a href="chap41.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>::<code>maxDpbSlots</code> <strong class="purple">must</strong> be set to a value
bigger than <code>0</code> when the instance of the <a href="chap41.html#video-session">Video Session</a>
object is created.</p>
</div>
<div class="paragraph">
<p>Up to <a href="chap41.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>::<code>maxDpbSlots</code> slots <strong class="purple">can</strong> be
activated with <a href="chap41.html#video-picture-resources">Video Picture Resources</a> for a
video session and up to
<a href="chap41.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>::<code>maxActiveReferencePictures</code> active
slots <strong class="purple">can</strong> be used as DPB or Reconstructed <a href="chap41.html#reference-picture">Reference
Pictures</a> within a single decode or encode operation.</p>
</div>
<div class="paragraph">
<p>When the implementation is associating <a href="chap41.html#reference-metadata">Reference
Picture Metadata</a> with the <a href="chap41.html#video-picture-resources">Video Picture
Resources</a> themselves, such data <strong class="purple">must</strong> be independent of the
<a href="chap41.html#video-session">Video Session</a> to allow for those
<a href="chap41.html#video-picture-resources">Video Picture Resources</a> to be shared with other
Video Session instances.
All of the <a href="chap41.html#video-session">Video Session</a>-dependent
<a href="chap41.html#reference-metadata">Reference Picture Metadata</a> <strong class="purple">must</strong> only be associated
with the <a href="chap41.html#video-session">Video Session</a> <a href="chap41.html#dpb-slot">DPB or Reconstructed
Slots</a>.</p>
</div>
<div class="paragraph">
<p>The application with the help of the implementation is responsible for
managing the individual <a href="chap41.html#dpb-slot">DPB, or Reconstructed Slots</a> that belong
to a single <a href="chap41.html#video-session">Video Session</a> <a href="chap41.html#dpb">DPB set</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The application maintains the Slot allocation and per-slot
<a href="chap41.html#reference-picture">Reference Picture</a>
<a href="chap41.html#video-picture-resources">Resources</a>;</p>
</li>
<li>
<p>Implementation maintains global and per-slot opaque
<a href="chap41.html#reference-metadata">Reference Picture Metadata</a>;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The application also manages the mapping between the codec-specific picture
IDs and <a href="chap41.html#dpb-slot">DPB Slots</a>.</p>
</div>
<div class="paragraph">
<p>When a Video Picture is decoded and is set as a
<a href="chap41.html#reference-picture">Reference Picture</a> against a Video Session
<a href="chap41.html#dpb-slot">DPB Slot</a>, or is encoded and a Reconstructed Video Picture
Resource is associated with a Video Session <a href="chap41.html#dpb-slot">DPB Slot</a> then:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="chap41.html#video-picture-resources">Video Picture Resource</a> associated with
the Slot is filled with the decoded or reconstructed pixel data;</p>
</li>
<li>
<p>The implementation generates the <a href="chap41.html#dpb-slot">DPB Slot’s</a>
<a href="chap41.html#reference-metadata">Reference Picture Metadata</a>;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When a <a href="chap41.html#dpb-slot">DPB’s Slot</a> is deactivated, or a different
<a href="chap41.html#video-picture-resources">Video Picture Resource</a> is used with the Slot, or
the content of the <a href="chap41.html#video-picture-resources">Video Picture Resource</a> is
modified, the <a href="chap41.html#reference-metadata">Reference Picture Metadata</a> associated
with the <a href="chap41.html#dpb-slot">DPB Slot</a> gets invalidated by the implementation.
Subsequent attempts to use such, invalidated, <a href="chap41.html#dpb">DPB</a> Slot as a
<a href="chap41.html#reference-picture">Reference</a> source would produce undefined results.</p>
</div>
</div>
<div class="sect4">
<h5 id="video-session-dpb-picture-size-changes"><a class="anchor" href="chap41.html#video-session-dpb-picture-size-changes"></a>Video Session <a href="chap41.html#dpb-slot">DPB Slot</a> subresources</h5>
<div class="paragraph">
<p>DPB <a href="chap41.html#reference-picture">Reference Picture’s</a> coded width and height <strong class="purple">can</strong>
change, dynamically, via <a href="chap41.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a>::<code>extent</code>,
and the picture parameters from the codec-specific extensions.
When a <a href="chap41.html#dpb-slot">DPB Slot</a> is activated as a <a href="chap41.html#reference-picture">Reference
Picture</a> and a decode or encode operation is performed against that slot,
the coded extent <strong class="purple">can</strong> be recorded by the implementation to the corresponding
<a href="chap41.html#dpb-slot">DPB Slot’s</a> metadata state.
Subsequently, when the <a href="chap41.html#reference-picture">Reference Pictures</a> are used
with the decoded <a href="chap41.html#decoded-output-picture">Output</a> or encoded
<a href="chap41.html#encode-input-picture">Input Picture</a>, their coded extent can differ.
Decoding or encoding pictures, using picture sizes, different from the
previously produced <a href="chap41.html#reference-picture">Reference Pictures</a> <strong class="purple">should</strong> be used
with care, not to conflict with the codec standard and the implementation’s
support for that.
It is the responsibility of the application to ensure that valid <a href="chap41.html#dpb">DPB
Set</a> of <a href="chap41.html#reference-picture">Reference Pictures</a> are in use, according to
the codec standard.</p>
</div>
<div class="paragraph">
<p>In addition, the <a href="chap41.html#video-picture-resources">Video Picture Resources</a> extent
<strong class="purple">cannot</strong> exceed the <a href="chap41.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>::<code>maxCodedExtent</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note:</div>
<div class="paragraph">
<p>Coding Standards such as VP9 and AV1 allow for images with different sizes
to be used as <a href="chap41.html#reference-picture">Reference Pictures</a>.
Others, like H.264 and H.265, do not support <a href="chap41.html#reference-picture">Reference
Pictures</a> with different sizes.
Using <a href="chap41.html#reference-picture">Reference Pictures</a> with incompatible sizes with
such standards would render undefined results.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="video-resource-management-by-application"><a class="anchor" href="chap41.html#video-resource-management-by-application"></a>The application is in control of the allocation and use of the system resource</h5>
<div class="paragraph">
<p>In Vulkan Video, the application has complete control over how and when
system resources are used.
The Vulkan Video framework provides the following tools to ensure that
device and host memory resources are used in an optimal way:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The video application <strong class="purple">can</strong> allocate or destroy the number of allocated
<a href="chap41.html#decoded-output-picture">Output</a> or <a href="chap41.html#encode-input-picture">Input</a>
Pictures, and <strong class="purple">can</strong> grow, or shrink the DPB set of
<a href="chap41.html#reference-picture">Reference Pictures</a>, dynamically, based on the
changing video content requirement.</p>
</li>
<li>
<p><a href="chap41.html#reference-picture">Reference Pictures</a> <strong class="purple">can</strong> be shared with the decoded
<a href="chap41.html#decoded-output-picture">Output</a> or encoded <a href="chap41.html#encode-input-picture">Input</a> pictures.</p>
</li>
<li>
<p>The application <strong class="purple">can</strong> use <a href="chap32.html">sparse memory</a> for the
<a href="chap12.html#VkImage">images</a>, representing <a href="chap41.html#video-picture-resources">Video Picture
Resources</a>.
The use of sparse memory would allow the application to remove the
<a href="chap11.html#VkDeviceMemory">Device Memory</a> backing of the <a href="chap12.html#resources-images">image resources</a> when the <a href="chap41.html#dpb-slot">DPB Slot</a> is not in active use.
Furthermore, if the <a href="chap32.html#features-sparseResidency"><code>sparseResidency</code></a>
feature is supported by the implementation (see <a href="chap32.html">Sparse
Resources</a>), then <a href="chap12.html#VkImage">images</a> can be, partially, bound with the
resource memory.
This feature is particularly important when using video content with a
significant change of decoded or encoded resolution.</p>
</li>
<li>
<p>If the implementation supports <a href="chap12.html#VkImage">image arrays</a>, and
<a href="chap32.html">sparse memory resources</a>, then the application <strong class="purple">can</strong>
remove the <a href="chap11.html#VkDeviceMemory">Device Memory</a> backing of <a href="chap12.html#VkImage">image
array</a> layers that are not used by any <a href="chap41.html#dpb-slot">DPB Slots</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="video-session-dpb-binding-reconstructed-slot"><a class="anchor" href="chap41.html#video-session-dpb-binding-reconstructed-slot"></a>Using DPB and Reconstructed Slot’s Associated Resources</h5>
<div class="paragraph">
<p>Before a <a href="chap41.html#dpb-slot">DPB Slot</a> is to become <strong>Valid</strong> for use with a
<a href="chap41.html#reference-picture">Reference Picture</a>, it requires memory resources to be
bound to it.</p>
</div>
<div class="paragraph">
<p>Some of the memory resources required for the <a href="chap41.html#dpb-slot">DPB Slot</a>, are
opaquely managed by the implementation and, internally, allocated from the
<a href="chap41.html#video-session-device-memory-heaps">Session’s Device Memory Heaps</a>.
The application provides the <a href="chap12.html#resources-images">image resources</a> of one or
more <a href="chap41.html#reference-picture">Reference Pictures</a>, in the
<a href="chap41.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>::<code>pReferenceSlots</code> as part of the
<a href="chap41.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command.</p>
</div>
<div class="paragraph">
<p>If a <a href="chap41.html#dpb-slot">DPB Slot</a> was already used with an <a href="chap12.html#resources-image-views">image view</a>, and a new image view or a <a href="chap55.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a> handle is used
with that Slot, then the <a href="chap41.html#dpb-slot">DPB Slot’s</a> state will be invalidated
by the implementation.
If a <a href="chap41.html#dpb-slot">DPB Slot</a> were to be reused with the same
<a href="chap12.html#resources-image-views">image view</a>, the state of the Slot would not
change.</p>
</div>
</div>
<div class="sect4">
<h5 id="video-session-activating-dpb-slot"><a class="anchor" href="chap41.html#video-session-activating-dpb-slot"></a>Video Session Activating DPB Slot as a Reference</h5>
<div class="paragraph">
<p>Before a <a href="chap41.html#dpb-slot">DPB Slot</a> is to be used for a
<a href="chap41.html#reference-picture">Reference Pictures</a> index, it <strong class="purple">must</strong> be activated.
The activation of a <a href="chap41.html#dpb-slot">DPB Slot</a> is done within the
<a href="chap41.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a> command’s
<a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>slotIndex</code> field for the decode operations,
and within the <a href="chap41.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a> command’s
<a href="chap41.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>::<code>slotIndex</code> field for the encode operations.</p>
</div>
<div class="paragraph">
<p>While activating a Slot for DPB, it <strong class="purple">must</strong> already have an associated
<a href="chap12.html#resources-image-views">image view</a>, within the
<a href="chap41.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>::<code>pReferenceSlots</code> in the
<a href="chap41.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command and <a href="chap11.html#VkDeviceMemory">Device Memory</a>
backing of the <a href="chap12.html#resources-images">image resources</a> <strong class="purple">must</strong> be resident.</p>
</div>
<div class="paragraph">
<p>When a <a href="chap41.html#dpb-slot">DPB Slot</a> were to be activated, the
<a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>slotIndex</code> for decode, or
<a href="chap41.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>::<code>slotIndex</code> for encode, <strong class="purple">must</strong> be set to the
application’s allocated <a href="chap41.html#dpb-slot">DPB Slot’s index</a>.
When activating a <a href="chap41.html#dpb-slot">DPB Slot</a>, the application will perform a
decode or encode operation against its Slot’s index in order to enable its
state as a <strong>Valid Picture Reference</strong>.
If a <a href="chap41.html#dpb-slot">DPB Slot</a> is activated, but a decode or encode operation is
not performed against that Slot’s index, or the decode or encode operation
was unsuccessful, then the <a href="chap41.html#dpb-slot">DPB Slot</a> would remain in the
<strong>Invalid Picture Reference</strong> state (see below the
<a href="chap41.html#video-session-dpb-slot-states">DPB Slot States</a>).</p>
</div>
<div class="paragraph">
<p>By just providing a <a href="chap41.html#video-picture-resources">Video Picture Resources</a> for
a <a href="chap41.html#dpb-slot">DPB Slot</a> within the
<a href="chap41.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>::<code>pReferenceSlots</code>, and without
successfully performing a decode or encode operation against that Slot, the
<a href="chap41.html#dpb-slot">DPB Slot’s</a> state <strong class="purple">cannot</strong> be changed to <strong>Valid Picture
Reference</strong>.
If the <a href="chap41.html#dpb-slot">DPB Slots</a> were already in <strong>Valid Picture Reference</strong>, and
there is no <a href="chap41.html#video-picture-resources">Video Picture Resources</a> associated
with the <a href="chap41.html#dpb-slot">DPB Slot</a> for a decode or encode operation, the state
<a href="chap41.html#dpb-slot">DPB Slot</a> would not change.
However, if an application is referring to a valid <a href="chap41.html#dpb-slot">DPB Slot</a> in
its current decode or encode operations, then a valid
<a href="chap12.html#resources-image-views">image view</a> <strong class="purple">must</strong> be provided for that Slot within
<a href="chap41.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a>::<code>imageViewBinding</code> for that decode
or encode operation.</p>
</div>
</div>
<div class="sect4">
<h5 id="video-session-invalidating-dpb-slot"><a class="anchor" href="chap41.html#video-session-invalidating-dpb-slot"></a>Video Session Invalidating DPB Slot’s Reference State</h5>
<div class="paragraph">
<p>When a <a href="chap41.html#dpb-slot">DPB Slot</a> is invalidated, its state is set to <strong>Invalid
Picture Reference</strong>.
Using a <a href="chap41.html#dpb-slot">DPB Slot</a> as a <a href="chap41.html#reference-picture">Reference Picture</a>
index for video decode or encode operations while the Slot is in <strong>Invalid
Picture Reference</strong> state would render undefined results.</p>
</div>
</div>
<div class="sect4">
<h5 id="video-session-dpb-slot-states"><a class="anchor" href="chap41.html#video-session-dpb-slot-states"></a>Video Session <a href="chap41.html#dpb">DPB</a> Slot States</h5>
<div class="paragraph">
<p>To help understand the valid use of the <a href="chap41.html#video-session">Video Session</a>
<a href="chap41.html#dpb">DPB</a> and its resource management, this section aims to explain the
different states and correct usage of <a href="chap41.html#dpb-slot">DPB Slots</a>.</p>
</div>
<div class="paragraph">
<p>There are four (4) states that a <a href="chap41.html#dpb-slot">DPB Slot</a> could be in:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Picture Reference Unused;</p>
</li>
<li>
<p>Invalid Picture Reference;</p>
</li>
<li>
<p>Updating Picture Reference;</p>
</li>
<li>
<p>Valid Picture Reference;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The different states are outlined within the
<a href="chap41.html#video-session-dpb-slot-states-table">DPB Slot States</a> and
<a href="chap41.html#video-session-dpb-slot-states-flow-diagram">DPB Slot States Flow Diagram</a>
below.</p>
</div>
<div class="paragraph">
<p>All DPB Slot management operations are performed via the
<a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>slotIndex</code> or
<a href="chap41.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>::<code>slotIndex</code> field.</p>
</div>
<div class="paragraph">
<p>All DPB resource binding, invalidating, and activating Slot management
operations are performed, by the implementation, <strong>before</strong> the decoding or
encoding commands, based on the <a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>slotIndex</code>
or <a href="chap41.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>::<code>slotIndex</code> field and the entries from
the <a href="chap41.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>::<code>pReferenceSlots</code>.
The application <strong class="purple">cannot</strong> move a DPB Slot from a <strong>Picture Reference Unused</strong> to
<strong>Updating Picture Reference</strong> state, implicitly, within a decode or encode
command operation.
Such a DPB Slot <strong class="purple">must</strong> first be transitioned to an <strong>Invalid Picture
Reference</strong> state using <a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>slotIndex</code> or
<a href="chap41.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>::<code>slotIndex</code>, as part of a decode command.
For more details, see <a href="chap41.html#video-picture-decode-modes">Video Picture Decode
Modes</a>.</p>
</div>
<div class="paragraph">
<p>When using <a href="chap32.html">sparse memory resources</a>, it would be acceptable
and valid behavior for the application to unbind the memory while the DPB
Slot is any of the DPB Slot states, provided the command buffers, in a
<a href="chap6.html#commandbuffers-lifecycle">pending state</a>, do not reference any such
<a href="chap41.html#video-picture-resources">Video Picture Resources</a>.</p>
</div>
<div class="paragraph">
<p>Accessing <a href="chap32.html#sparsememory-accessing-unbound">unbound regions</a> of the
<a href="chap32.html">sparse memory resources</a> by the decoder or encoder,
regardless if those are used as <a href="chap41.html#decoded-output-picture">Output</a>,
<a href="chap41.html#encode-input-picture">Input</a>, <a href="chap41.html#dpb">DPB</a> or
<a href="chap41.html#reconstructed-picture">Reconstructed</a> <a href="chap41.html#video-picture-resources">Video
Picture Resources</a>, would render undefined results.
The <a href="chap32.html#VkPhysicalDeviceSparseProperties">VkPhysicalDeviceSparseProperties</a>::<code>residencyNonResidentStrict</code>
property reported by the implementation does not offer guarantees on the
behavior of decode or encode operations when it comes to accessing
<a href="chap32.html#sparsememory-accessing-unbound">unbound regions</a>.
However, both reads and writes are still considered safe and will not affect
other resources or populated regions of the image.</p>
</div>
<table id="video-session-dpb-slot-states-table" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 50. Video Session <a href="chap41.html#dpb-slot">DPB Slot</a> States</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 30%;">
<col style="width: 50%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap41.html#dpb-slot">DPB Slot</a> State</th>
<th class="tableblock halign-left valign-top">Moving to <a href="chap41.html#dpb-slot">DPB Slot</a> State</th>
<th class="tableblock halign-left valign-top">Exiting <a href="chap41.html#dpb-slot">DPB Slot</a> State</th>
<th class="tableblock halign-left valign-top">Retain Video Picture Resource Memory</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><strong>Picture Reference Unused</strong></p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Bind Device Memory;</p>
</li>
<li>
<p>Reset decode or encode state;</p>
</li>
<li>
<p>Invalidate, delete or unbind memory of a Picture Reference associated with Reference DPB Slot</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Activate Reference DPB Slot → <strong>Invalid Picture Reference</strong></p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Controlled</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><strong>Invalid Picture Reference</strong></p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Activate Reference DPB Slot;</p>
</li>
<li>
<p>Unsuccessful video decode or encode operation;</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Start decode or encode operation with an active Reference DPB Slot target → <strong>Updating Picture Reference</strong>;</p>
</li>
<li>
<p>Updating a Picture Resource outside the decoder or encoder or deleting or removing the memory binding(sparse) → <strong>Picture Reference Unused</strong>;</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Controlled</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><strong>Updating Picture Reference</strong></p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Start decode or encode operation with an active Reference DPB Slot target;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Decode or encode operation with an active Reference DPB Slot target Completed Successfully → <strong>Valid Picture Reference</strong>;<br>
Unsuccessful video decode or encode operation → <strong>Invalid Picture Reference</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><strong>Valid Picture Reference</strong></p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Video decode or encode operation with an active Reference DPB Slot target Completed Successfully;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Replace Reference DPB Slot → <strong>Invalid Picture Reference</strong>;</p>
</li>
<li>
<p>Invalidate, delete or unbind memory of a Picture Reference of the Reference DPB Slot → <strong>Picture Reference Unused</strong>;</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
</tbody>
</table>
<div id="video-session-dpb-slot-states-flow-diagram" class="imageblock text-center">
<div class="content">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" width="1280" height="720" viewBox="0 0 1280 720.00001" id="svg6344" version="1.1">
  <defs id="defs6346">
    <marker orient="auto" refY="0.0" refX="0.0" id="marker5602" style="overflow:visible;">
      <path id="path5604" d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 z " style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1" transform="scale(0.4) rotate(180) translate(10,0)"></path>
    </marker>
    <marker style="overflow:visible;" id="marker12421" refX="0.0" refY="0.0" orient="auto">
      <path transform="scale(0.4) rotate(180) translate(10,0)" style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1" d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 z " id="path12423"></path>
    </marker>
    <marker style="overflow:visible;" id="marker11667" refX="0.0" refY="0.0" orient="auto">
      <path transform="scale(0.4) rotate(180) translate(10,0)" style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1" d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 z " id="path11669"></path>
    </marker>
    <marker style="overflow:visible;" id="marker11475" refX="0.0" refY="0.0" orient="auto">
      <path transform="scale(0.4) rotate(180) translate(10,0)" style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1" d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 z " id="path11477"></path>
    </marker>
    <marker orient="auto" refY="0.0" refX="0.0" id="Arrow1Mend" style="overflow:visible;">
      <path id="path8523" d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 z " style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1" transform="scale(0.4) rotate(180) translate(10,0)"></path>
    </marker>
    <marker orient="auto" refY="0" refX="0" id="Arrow1Mend-7" style="overflow:visible">
      <path id="path8523-9" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)"></path>
    </marker>
    <marker orient="auto" refY="0" refX="0" id="Arrow1Mend-02" style="overflow:visible">
      <path id="path8523-3" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)"></path>
    </marker>
    <marker orient="auto" refY="0" refX="0" id="Arrow1Mend-02-5" style="overflow:visible">
      <path id="path8523-3-9" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)"></path>
    </marker>
  </defs>
  <metadata id="metadata6349">
    <rdf:rdf>
      <cc:work rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc:type>
        <dc:title></dc:title>
      </cc:work>
    </rdf:rdf>
  </metadata>
  <g id="layer1" transform="translate(0,-332.36216)">
    <text xml:space="preserve" style="font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:25px;line-height:125%;font-family:sans-serif;-inkscape-font-specification:'sans-serif Italic';text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="499.45706" y="399.25888" id="text6896"><tspan x="499.35706" y="399.25888" id="tspan7012">New decode session Dpb</tspan></text>
    <text xml:space="preserve" style="font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:25px;line-height:125%;font-family:sans-serif;-inkscape-font-specification:'sans-serif Italic';text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="499.57913" y="539.25891" id="text6904"><tspan x="499.47913" y="539.25891" id="tspan7014">Unused picture reference</tspan></text>
    <text xml:space="preserve" style="font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:25px;line-height:125%;font-family:sans-serif;-inkscape-font-specification:'sans-serif Italic';text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="499.43875" y="679.25891" id="text6904-2"><tspan x="499.33875" y="679.25891" id="tspan7016">Invalid picture reference</tspan></text>
    <text xml:space="preserve" style="font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:25px;line-height:125%;font-family:sans-serif;-inkscape-font-specification:'sans-serif Italic';text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="499.57913" y="819.25891" id="text6904-0"><tspan x="499.47913" y="819.25891" id="tspan7018">Updating picture reference</tspan></text>
    <text xml:space="preserve" style="font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:25px;line-height:125%;font-family:sans-serif;-inkscape-font-specification:'sans-serif Italic';text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="500.5679" y="999.25891" id="text6904-3"><tspan x="500.4679" y="999.25891" id="tspan7020">Valid picture reference</tspan></text>
    <rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect7084" width="360" height="40" x="320.00027" y="372.36191"></rect>
    <rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect7086" width="360" height="40" x="320.00027" y="512.36194"></rect>
    <rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect7088" width="360" height="40" x="320.00027" y="652.36194"></rect>
    <rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect7090" width="360" height="40" x="320.00027" y="792.36194"></rect>
    <rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect7092" width="360" height="40" x="320.00027" y="972.36194"></rect>
    <path style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker-end:url(#Arrow1Mend);color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" d="m 500,412.36188 0,92" id="path8508"></path>
    <path style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker-end:url(#Arrow1Mend-7);color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" d="m 500,552.36188 0,92" id="path8508-2"></path>
    <path style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker-end:url(#Arrow1Mend-02);color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" d="m 500,692.36188 0,92" id="path8508-7"></path>
    <path style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker-end:url(#Arrow1Mend-02-5);color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" d="m 500,832.36188 0,131.99995" id="path8508-7-2"></path>
    <path style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker11475)" d="m 680,992.36189 340,0 0,-320 -332,0" id="path11431"></path>
    <path style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" d="m 680,812.36189 340,0" id="path11851"></path>
    <path style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker11667)" d="m 320,992.36189 -300,0 0,-459.99999 292,0" id="path11853"></path>
    <path style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" d="m 320,672.36189 -300,0" id="path11855"></path>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" x="499.14578" y="469.25885" id="text6990"><tspan x="499.04578" y="469.25885" id="tspan7022">Bind memory</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" x="500.20779" y="609.25891" id="text6994"><tspan id="tspan6996" x="500.10779" y="609.25891">Activate reference Dpb slot</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" x="499.07864" y="749.25891" id="text6998"><tspan id="tspan7000" x="498.97864" y="749.25891">Decode to a reference Dpb slot</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" x="500.46414" y="893.63391" id="text7048"><tspan id="tspan7050" x="500.36414" y="893.63391">On successful decode operation completion,</tspan><tspan x="500.36414" y="924.88391" id="tspan7052">set the slot as a reference picture with valid metadata</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="499.14578" y="469.25885" id="text6990-3"><tspan x="499.04578" y="469.25885" id="tspan7022-1">Bind memory</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="500.20779" y="609.25891" id="text6994-9"><tspan id="tspan6996-4" x="500.10779" y="609.25891">Activate reference Dpb slot</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="499.07864" y="749.25891" id="text6998-7"><tspan id="tspan7000-8" x="498.97864" y="749.25891">Decode to a reference Dpb slot</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="500.46414" y="893.63391" id="text7048-4"><tspan id="tspan7050-5" x="500.36414" y="893.63391">On successful decode operation completion,</tspan><tspan x="500.36414" y="924.88391" id="tspan7052-0">set the slot as a reference picture with valid metadata</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" x="167.46216" y="523.63391" id="text7054-3"><tspan id="tspan7056-6" x="167.36215" y="523.63391">Deactivate</tspan><tspan x="167.36215" y="554.88391" id="tspan7070-1">reference Dpb slot</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" x="863.51117" y="803.63391" id="text7058-0"><tspan id="tspan7060-6" x="863.41119" y="803.63391">Unsuccessful video</tspan><tspan x="863.41119" y="834.88391" id="tspan7074-3">decode operation</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" x="863.09003" y="983.63397" id="text7062-2"><tspan id="tspan7064-0" x="862.99005" y="983.63397">Invalidate</tspan><tspan x="862.99005" y="1014.884" id="tspan7068-6">reference Dpb slot</tspan></text>
    <path style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:12, 12;stroke-dashoffset:0;stroke-opacity:1" d="m 2,572.36216 1268,0" id="path5364"></path>
    <g id="g5966" transform="translate(9.9999974,-20.000007)">
      <path id="path5366" d="m 849.99971,592.36217 0,60" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker5602)"></path>
      <path id="path5368" d="m 849.99971,592.36217 0,-60" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker12421)"></path>
    </g>
    <g id="g6010" transform="translate(0,-13.103047)">
      <text id="text5810" y="552.36218" x="1074" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan id="tspan5814" y="552.36218" x="1073.9">Deactivated reference Dpb slot</tspan></text>
      <text id="text5816" y="632.36218" x="1074" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="632.36218" x="1073.9" id="tspan5818">Activated reference Dpb slot</tspan></text>
    </g>
    <text xml:space="preserve" style="font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:25px;line-height:125%;font-family:sans-serif;-inkscape-font-specification:'sans-serif Italic';text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="1174" y="747.93225" id="text6016"><tspan id="tspan6018" x="1173.9" y="747.93225">The picture</tspan><tspan x="1173.9" y="779.18225" id="tspan6020">resource's</tspan><tspan x="1173.9" y="810.43225" id="tspan6024">memory must</tspan><tspan x="1173.9" y="841.68225" id="tspan6028">be resident</tspan><tspan x="1173.9" y="872.93225" id="tspan6030">within these</tspan><tspan x="1173.9" y="904.18225" id="tspan6032">states of</tspan><tspan x="1173.9" y="935.43225" id="tspan6034">the slot</tspan></text>
    <g id="g6062" transform="translate(0,-20.000007)">
      <path id="path6040" d="m 1040,692.36216 c 40,0 0,160 40,160" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></path>
      <path id="path6040-6" d="m 1040,1012.3622 c 40,0 0,-160.00004 40,-160.00004" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"></path>
    </g>
  </g>
</svg>
</div>
<div class="title">Figure 31. DPB Slot States Flow Diagram</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="video-physical-device-capabilities"><a class="anchor" href="chap41.html#video-physical-device-capabilities"></a>41.3. Video Physical Device Capabilities</h3>
<div class="sect3">
<h4 id="supported-video-codec-operations-enumeration"><a class="anchor" href="chap41.html#supported-video-codec-operations-enumeration"></a>41.3.1. Supported Video Codec Operations Enumeration</h4>
<div class="paragraph">
<p>The structure <a href="chap41.html#VkQueueFamilyVideoPropertiesKHR">VkQueueFamilyVideoPropertiesKHR</a> <strong class="purple">may</strong> be chained to
<a href="chap5.html#VkQueueFamilyProperties2">VkQueueFamilyProperties2</a> when calling
<a href="chap5.html#vkGetPhysicalDeviceQueueFamilyProperties2">vkGetPhysicalDeviceQueueFamilyProperties2</a> to retrieve the video codec
operations supported for the physical device queue family index.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkQueueFamilyVideoPropertiesKHR">VkQueueFamilyVideoPropertiesKHR</a> structure is defined as:</p>
</div>
<div id="VkQueueFamilyVideoPropertiesKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkQueueFamilyVideoPropertiesKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                  <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                            <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoCodecOperationFlagsKHR</span>    <span class="n">videoCodecOperations</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkQueueFamilyVideoPropertiesKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>videoCodecOperations</code> is a bitmask of
<a href="chap41.html#VkVideoCodecOperationFlagBitsKHR">VkVideoCodecOperationFlagBitsKHR</a> specifying supported video codec
operation(s).</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkQueueFamilyVideoPropertiesKHR-sType-sType" href="chap41.html#VUID-VkQueueFamilyVideoPropertiesKHR-sType-sType"></a> <span class="vuid">VUID-VkQueueFamilyVideoPropertiesKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_QUEUE_FAMILY_VIDEO_PROPERTIES_KHR</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The codec operations are defined with the
<a href="chap41.html#VkVideoCodecOperationFlagBitsKHR">VkVideoCodecOperationFlagBitsKHR</a> enum:</p>
</div>
<div id="VkVideoCodecOperationFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoCodecOperationFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_CODEC_OPERATION_NONE_KHR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="cp">#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_EXT_video_encode_h264</span>
    <span class="n">VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00010000</span><span class="p">,</span>
<span class="cp">#endif
#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_EXT_video_encode_h265</span>
    <span class="n">VK_VIDEO_CODEC_OPERATION_ENCODE_H265_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00020000</span><span class="p">,</span>
<span class="cp">#endif
#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_EXT_video_decode_h264</span>
    <span class="n">VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
<span class="cp">#endif
#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_EXT_video_decode_h265</span>
    <span class="n">VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
<span class="cp">#endif
</span><span class="p">}</span> <span class="n">VkVideoCodecOperationFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Each decode or encode codec-specific extension extends this enumeration with
the appropriate bit corresponding to the extension’s codec operation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_CODEC_OPERATION_NONE_KHR</code> indicates no support for any
video codec operations.</p>
</li>
<li>
<p><code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_EXT</code> specifies support for
H.264 video decode operations.</p>
</li>
<li>
<p><code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_EXT</code> specifies support for
H.265 video decode operations.</p>
</li>
<li>
<p><code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code> specifies support for
H.264 video encode operations.</p>
</li>
<li>
<p><code>VK_VIDEO_CODEC_OPERATION_ENCODE_H265_BIT_EXT</code> specifies support for
H.265 video encode operations.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoCodecOperationFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoCodecOperationFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap41.html#VkVideoCodecOperationFlagsKHR">VkVideoCodecOperationFlagsKHR</a> is a bitmask type for setting a mask of
zero or more <a href="chap41.html#VkVideoCodecOperationFlagBitsKHR">VkVideoCodecOperationFlagBitsKHR</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="video-profiles"><a class="anchor" href="chap41.html#video-profiles"></a>41.3.2. Video Profiles</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>A video profile is defined by <a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> structure as:</p>
</div>
<div id="VkVideoProfileInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoProfileInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                     <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                         <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoCodecOperationFlagBitsKHR</span>    <span class="n">videoCodecOperation</span><span class="p">;</span>
    <span class="n">VkVideoChromaSubsamplingFlagsKHR</span>    <span class="n">chromaSubsampling</span><span class="p">;</span>
    <span class="n">VkVideoComponentBitDepthFlagsKHR</span>    <span class="n">lumaBitDepth</span><span class="p">;</span>
    <span class="n">VkVideoComponentBitDepthFlagsKHR</span>    <span class="n">chromaBitDepth</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoProfileInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>videoCodecOperation</code> is a <a href="chap41.html#VkVideoCodecOperationFlagBitsKHR">VkVideoCodecOperationFlagBitsKHR</a>
value specifying a video codec operation.</p>
</li>
<li>
<p><code>chromaSubsampling</code> is a bitmask of
<a href="chap41.html#VkVideoChromaSubsamplingFlagBitsKHR">VkVideoChromaSubsamplingFlagBitsKHR</a> specifying video chroma
subsampling information.</p>
</li>
<li>
<p><code>lumaBitDepth</code> is a bitmask of
<a href="chap41.html#VkVideoComponentBitDepthFlagBitsKHR">VkVideoComponentBitDepthFlagBitsKHR</a> specifying video luma bit
depth information.</p>
</li>
<li>
<p><code>chromaBitDepth</code> is a bitmask of
<a href="chap41.html#VkVideoComponentBitDepthFlagBitsKHR">VkVideoComponentBitDepthFlagBitsKHR</a> specifying video chroma bit
depth information.</p>
</li>
</ul>
</div>
<div id="video-profile-error-codes" class="paragraph">
<p>When a <code>VkVideoProfileInfoKHR</code> structure is specified through the
<code>pProfiles</code> member of an <a href="chap41.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a> structure in
the <code>pNext</code> chain of the input parameter of a query command such as
<a href="chap41.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a>,
<a href="chap41.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a>, or
<a href="chap47.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a>, the following error codes
indicate specific causes of the failure of the query operation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_VIDEO_PICTURE_LAYOUT_NOT_SUPPORTED_KHR</code> The requested
video picture layout
(e.g. through the <code>pictureLayout</code> member of a
<a href="chap41.html#VkVideoDecodeH264ProfileInfoEXT">VkVideoDecodeH264ProfileInfoEXT</a> structure included in the
<code>pNext</code> chain of <code>VkVideoProfileInfoKHR</code>)
is not supported.</p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PROFILE_OPERATION_NOT_SUPPORTED_KHR</code> A video profile
operation specified by <code>videoCodecOperation</code> is not supported.</p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PROFILE_FORMAT_NOT_SUPPORTED_KHR</code> Format parameters
specified by <code>chromaSubsampling</code>, <code>lumaBitDepth</code>, or
<code>chromaBitDepth</code> are not supported.</p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PROFILE_CODEC_NOT_SUPPORTED_KHR</code> Codec-specific
parameters corresponding to the <code>videoCodecOperation</code> are not
provided through the <code>pNext</code> chain of <code>VkVideoProfileInfoKHR</code>,
or the specified parameters are not supported.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-chromaSubsampling-07013" href="chap41.html#VUID-VkVideoProfileInfoKHR-chromaSubsampling-07013"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-chromaSubsampling-07013</span><br>

<code>chromaSubsampling</code> <strong class="purple">must</strong> have a single bit set</p>
</li>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-lumaBitDepth-07014" href="chap41.html#VUID-VkVideoProfileInfoKHR-lumaBitDepth-07014"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-lumaBitDepth-07014</span><br>

<code>lumaBitDepth</code> <strong class="purple">must</strong> have a single bit set</p>
</li>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-chromaSubsampling-07015" href="chap41.html#VUID-VkVideoProfileInfoKHR-chromaSubsampling-07015"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-chromaSubsampling-07015</span><br>

If <code>chromaSubsampling</code> is not
<code>VK_VIDEO_CHROMA_SUBSAMPLING_MONOCHROME_BIT_KHR</code>, then
<code>chromaBitDepth</code> <strong class="purple">must</strong> have a single bit set</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-sType-sType" href="chap41.html#VUID-VkVideoProfileInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_PROFILE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-videoCodecOperation-parameter" href="chap41.html#VUID-VkVideoProfileInfoKHR-videoCodecOperation-parameter"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-videoCodecOperation-parameter</span><br>
 <code>videoCodecOperation</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoCodecOperationFlagBitsKHR">VkVideoCodecOperationFlagBitsKHR</a> value</p>
</li>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-chromaSubsampling-parameter" href="chap41.html#VUID-VkVideoProfileInfoKHR-chromaSubsampling-parameter"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-chromaSubsampling-parameter</span><br>
 <code>chromaSubsampling</code> <strong class="purple">must</strong> be a valid combination of <a href="chap41.html#VkVideoChromaSubsamplingFlagBitsKHR">VkVideoChromaSubsamplingFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-chromaSubsampling-requiredbitmask" href="chap41.html#VUID-VkVideoProfileInfoKHR-chromaSubsampling-requiredbitmask"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-chromaSubsampling-requiredbitmask</span><br>
 <code>chromaSubsampling</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-lumaBitDepth-parameter" href="chap41.html#VUID-VkVideoProfileInfoKHR-lumaBitDepth-parameter"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-lumaBitDepth-parameter</span><br>
 <code>lumaBitDepth</code> <strong class="purple">must</strong> be a valid combination of <a href="chap41.html#VkVideoComponentBitDepthFlagBitsKHR">VkVideoComponentBitDepthFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-lumaBitDepth-requiredbitmask" href="chap41.html#VUID-VkVideoProfileInfoKHR-lumaBitDepth-requiredbitmask"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-lumaBitDepth-requiredbitmask</span><br>
 <code>lumaBitDepth</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-chromaBitDepth-parameter" href="chap41.html#VUID-VkVideoProfileInfoKHR-chromaBitDepth-parameter"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-chromaBitDepth-parameter</span><br>
 <code>chromaBitDepth</code> <strong class="purple">must</strong> be a valid combination of <a href="chap41.html#VkVideoComponentBitDepthFlagBitsKHR">VkVideoComponentBitDepthFlagBitsKHR</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The video format chroma subsampling is defined with the following enums:</p>
</div>
<div id="VkVideoChromaSubsamplingFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoChromaSubsamplingFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_CHROMA_SUBSAMPLING_INVALID_KHR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_VIDEO_CHROMA_SUBSAMPLING_MONOCHROME_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_CHROMA_SUBSAMPLING_420_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_VIDEO_CHROMA_SUBSAMPLING_422_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
    <span class="n">VK_VIDEO_CHROMA_SUBSAMPLING_444_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoChromaSubsamplingFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_CHROMA_SUBSAMPLING_MONOCHROME_BIT_KHR</code> - the format is
monochrome.</p>
</li>
<li>
<p><code>VK_VIDEO_CHROMA_SUBSAMPLING_420_BIT_KHR</code> - the format is 4:2:0
chroma subsampled.
The two chroma components are each subsampled at a factor of 2 both
horizontally and vertically.</p>
</li>
<li>
<p><code>VK_VIDEO_CHROMA_SUBSAMPLING_422_BIT_KHR</code> - the format is 4:2:2
chroma subsampled.
The two chroma components are sampled at half the sample rate of luma.
The horizontal chroma resolution is halved.</p>
</li>
<li>
<p><code>VK_VIDEO_CHROMA_SUBSAMPLING_444_BIT_KHR</code> - the format is 4:4:4
chroma sampled.
Each of the three YCbCr components have the same sample rate, thus there
is no chroma subsampling.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoChromaSubsamplingFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoChromaSubsamplingFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap41.html#VkVideoChromaSubsamplingFlagsKHR">VkVideoChromaSubsamplingFlagsKHR</a> is a bitmask type for setting a mask
of zero or more <a href="chap41.html#VkVideoChromaSubsamplingFlagBitsKHR">VkVideoChromaSubsamplingFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The video format component bit depth is defined with the following enums:</p>
</div>
<div id="VkVideoComponentBitDepthFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoComponentBitDepthFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_COMPONENT_BIT_DEPTH_INVALID_KHR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_VIDEO_COMPONENT_BIT_DEPTH_8_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_COMPONENT_BIT_DEPTH_10_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
    <span class="n">VK_VIDEO_COMPONENT_BIT_DEPTH_12_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000010</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoComponentBitDepthFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_COMPONENT_BIT_DEPTH_8_BIT_KHR</code> - the format component bit
depth is 8 bits.</p>
</li>
<li>
<p><code>VK_VIDEO_COMPONENT_BIT_DEPTH_10_BIT_KHR</code> - the format component bit
depth is 10 bits.</p>
</li>
<li>
<p><code>VK_VIDEO_COMPONENT_BIT_DEPTH_12_BIT_KHR</code> - the format component bit
depth is 12 bits.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoComponentBitDepthFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoComponentBitDepthFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap41.html#VkVideoComponentBitDepthFlagsKHR">VkVideoComponentBitDepthFlagsKHR</a> is a bitmask type for setting a mask
of zero or more <a href="chap41.html#VkVideoComponentBitDepthFlagBitsKHR">VkVideoComponentBitDepthFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>A video profile is provided when querying capabilities or image formats for
video using <a href="chap41.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> or
<a href="chap41.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a>, respectively.
A video profile is also provided when creating resources (images, video
sessions, etc.) used by video queues.
Each instance of <a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> <strong class="purple">must</strong> chain a codec-operation
specific video profile extension structure, corresponding to the
codec-operation specified in
<a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>::<code>videoCodecOperation</code>.
Additional information is provided in each codec-operation-specific video
extension.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Additional information about the video decode use case <strong class="purple">can</strong> be provided by
adding a <code>VkVideoDecodeUsageInfoKHR</code> structure to the <code>pNext</code> chain
of <a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>.</p>
</div>
<div class="paragraph">
<p>The <code>VkVideoDecodeUsageInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoDecodeUsageInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeUsageInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>               <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                   <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoDecodeUsageFlagsKHR</span>    <span class="n">videoUsageHints</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeUsageInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>videoUsageHints</code> is a bitmask of
<a href="chap41.html#VkVideoDecodeUsageFlagBitsKHR">VkVideoDecodeUsageFlagBitsKHR</a> specifying hints about the intended
use of the video decode profile.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeUsageInfoKHR-sType-sType" href="chap41.html#VUID-VkVideoDecodeUsageInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeUsageInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_USAGE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeUsageInfoKHR-videoUsageHints-parameter" href="chap41.html#VUID-VkVideoDecodeUsageInfoKHR-videoUsageHints-parameter"></a> <span class="vuid">VUID-VkVideoDecodeUsageInfoKHR-videoUsageHints-parameter</span><br>
 <code>videoUsageHints</code> <strong class="purple">must</strong> be a valid combination of <a href="chap41.html#VkVideoDecodeUsageFlagBitsKHR">VkVideoDecodeUsageFlagBitsKHR</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The following bits <strong class="purple">can</strong> be specified in
<a href="chap41.html#VkVideoDecodeUsageInfoKHR">VkVideoDecodeUsageInfoKHR</a>::<code>videoUsageHints</code> as a hint about the
video decode use case:</p>
</div>
<div id="VkVideoDecodeUsageFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoDecodeUsageFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_DECODE_USAGE_DEFAULT_KHR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_VIDEO_DECODE_USAGE_TRANSCODING_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_DECODE_USAGE_OFFLINE_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_VIDEO_DECODE_USAGE_STREAMING_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoDecodeUsageFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_DECODE_USAGE_TRANSCODING_BIT_KHR</code> specifies that video
decoding is intended to be used in conjunction with video encoding to
transcode a video bitstream with the same and/or different codecs.</p>
</li>
<li>
<p><code>VK_VIDEO_DECODE_USAGE_OFFLINE_BIT_KHR</code> specifies that video
decoding is intended to be used to consume a local video bitstream.</p>
</li>
<li>
<p><code>VK_VIDEO_DECODE_USAGE_STREAMING_BIT_KHR</code> specifies that video
decoding is intended to be used to consume a video bitstream received as
a continuous flow over network.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>There are no restrictions on the combination of bits that <strong class="purple">can</strong> be specified
by the application.
However, applications <strong class="purple">should</strong> use reasonable combinations in order for the
implementation to be able to select the most appropriate mode of operation
for the particular use case.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoDecodeUsageFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoDecodeUsageFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap41.html#VkVideoDecodeUsageFlagsKHR">VkVideoDecodeUsageFlagsKHR</a> is a bitmask type for setting a mask of
zero or more <a href="chap41.html#VkVideoDecodeUsageFlagBitsKHR">VkVideoDecodeUsageFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Additional information about the video encode use case <strong class="purple">can</strong> be provided by
adding a <code>VkVideoEncodeUsageInfoKHR</code> structure to the <code>pNext</code> chain
of <a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>.</p>
</div>
<div class="paragraph">
<p>The <code>VkVideoEncodeUsageInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeUsageInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeUsageInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                 <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                     <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoEncodeUsageFlagsKHR</span>      <span class="n">videoUsageHints</span><span class="p">;</span>
    <span class="n">VkVideoEncodeContentFlagsKHR</span>    <span class="n">videoContentHints</span><span class="p">;</span>
    <span class="n">VkVideoEncodeTuningModeKHR</span>      <span class="n">tuningMode</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeUsageInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>videoUsageHints</code> is a bitmask of
<a href="chap41.html#VkVideoEncodeUsageFlagBitsKHR">VkVideoEncodeUsageFlagBitsKHR</a> specifying hints about the intended
use of the video encode profile.</p>
</li>
<li>
<p><code>videoContentHints</code> is a bitmask of
<a href="chap41.html#VkVideoEncodeContentFlagBitsKHR">VkVideoEncodeContentFlagBitsKHR</a> specifying hints about the content
to be encoded using the video encode profile.</p>
</li>
<li>
<p><code>tuningMode</code> is a <a href="chap41.html#VkVideoEncodeTuningModeKHR">VkVideoEncodeTuningModeKHR</a> value specifying
the tuning mode to use when encoding with the video profile.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeUsageInfoKHR-sType-sType" href="chap41.html#VUID-VkVideoEncodeUsageInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeUsageInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_USAGE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeUsageInfoKHR-videoUsageHints-parameter" href="chap41.html#VUID-VkVideoEncodeUsageInfoKHR-videoUsageHints-parameter"></a> <span class="vuid">VUID-VkVideoEncodeUsageInfoKHR-videoUsageHints-parameter</span><br>
 <code>videoUsageHints</code> <strong class="purple">must</strong> be a valid combination of <a href="chap41.html#VkVideoEncodeUsageFlagBitsKHR">VkVideoEncodeUsageFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeUsageInfoKHR-videoContentHints-parameter" href="chap41.html#VUID-VkVideoEncodeUsageInfoKHR-videoContentHints-parameter"></a> <span class="vuid">VUID-VkVideoEncodeUsageInfoKHR-videoContentHints-parameter</span><br>
 <code>videoContentHints</code> <strong class="purple">must</strong> be a valid combination of <a href="chap41.html#VkVideoEncodeContentFlagBitsKHR">VkVideoEncodeContentFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeUsageInfoKHR-tuningMode-parameter" href="chap41.html#VUID-VkVideoEncodeUsageInfoKHR-tuningMode-parameter"></a> <span class="vuid">VUID-VkVideoEncodeUsageInfoKHR-tuningMode-parameter</span><br>
 If <code>tuningMode</code> is not <code>0</code>, <code>tuningMode</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoEncodeTuningModeKHR">VkVideoEncodeTuningModeKHR</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The following bits <strong class="purple">can</strong> be specified in
<a href="chap41.html#VkVideoEncodeUsageInfoKHR">VkVideoEncodeUsageInfoKHR</a>::<code>videoUsageHints</code> as a hint about the
video encode use case:</p>
</div>
<div id="VkVideoEncodeUsageFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeUsageFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_USAGE_DEFAULT_KHR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_USAGE_TRANSCODING_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_USAGE_STREAMING_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_USAGE_RECORDING_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_USAGE_CONFERENCING_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeUsageFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_USAGE_TRANSCODING_BIT_KHR</code> specifies that video
encoding is intended to be used in conjunction with video decoding to
transcode a video bitstream with the same and/or different codecs.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_USAGE_STREAMING_BIT_KHR</code> specifies that video
encoding is intended to be used to produce a video bitstream that is
expected to be sent as a continuous flow over network.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_USAGE_RECORDING_BIT_KHR</code> specifies that video
encoding is intended to be used for real-time recording for offline
consumption.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_USAGE_CONFERENCING_BIT_KHR</code> specifies that video
encoding is intended to be used in a video conferencing scenario.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>There are no restrictions on the combination of bits that <strong class="purple">can</strong> be specified
by the application.
However, applications <strong class="purple">should</strong> use reasonable combinations in order for the
implementation to be able to select the most appropriate mode of operation
for the particular use case.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeUsageFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeUsageFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap41.html#VkVideoEncodeUsageFlagsKHR">VkVideoEncodeUsageFlagsKHR</a> is a bitmask type for setting a mask of
zero or more <a href="chap41.html#VkVideoEncodeUsageFlagBitsKHR">VkVideoEncodeUsageFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The following bits <strong class="purple">can</strong> be specified in
<a href="chap41.html#VkVideoEncodeUsageInfoKHR">VkVideoEncodeUsageInfoKHR</a>::<code>videoContentHints</code> as a hint about the
encoded video content:</p>
</div>
<div id="VkVideoEncodeContentFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeContentFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_CONTENT_DEFAULT_KHR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_CONTENT_CAMERA_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_CONTENT_DESKTOP_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_CONTENT_RENDERED_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeContentFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_CONTENT_CAMERA_BIT_KHR</code> specifies that video
encoding is intended to be used to encode camera content.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_CONTENT_DESKTOP_BIT_KHR</code> specifies that video
encoding is intended to be used to encode desktop content.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_CONTENT_RENDERED_BIT_KHR</code> specified that video
encoding is intended to be used to encode rendered (e.g. game) content.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>There are no restrictions on the combination of bits that <strong class="purple">can</strong> be specified
by the application.
However, applications <strong class="purple">should</strong> use reasonable combinations in order for the
implementation to be able to select the most appropriate mode of operation
for the particular content type.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeContentFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeContentFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap41.html#VkVideoEncodeContentFlagsKHR">VkVideoEncodeContentFlagsKHR</a> is a bitmask type for setting a mask of
zero or more <a href="chap41.html#VkVideoEncodeContentFlagBitsKHR">VkVideoEncodeContentFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible video encode tuning mode values are as follows:</p>
</div>
<div id="VkVideoEncodeTuningModeKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeTuningModeKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_TUNING_MODE_DEFAULT_KHR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_TUNING_MODE_HIGH_QUALITY_KHR</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_TUNING_MODE_LOW_LATENCY_KHR</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_TUNING_MODE_ULTRA_LOW_LATENCY_KHR</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_TUNING_MODE_LOSSLESS_KHR</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeTuningModeKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_TUNING_MODE_DEFAULT_KHR</code> specifies the default
tuning mode.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_TUNING_MODE_HIGH_QUALITY_KHR</code> specifies that video
encoding is tuned for high quality.
When using this tuning mode, the implementation <strong class="purple">may</strong> compromise the
latency of video encoding operations to improve quality.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_TUNING_MODE_LOW_LATENCY_KHR</code> specifies that video
encoding is tuned for low latency.
When using this tuning mode, the implementation <strong class="purple">may</strong> compromise quality
to increase the performance and lower the latency of video encode
operations.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_TUNING_MODE_ULTRA_LOW_LATENCY_KHR</code> specifies that
video encoding is tuned for ultra-low latency.
When using this tuning mode, the implementation <strong class="purple">may</strong> compromise quality
to maximimize the performance and minimize the latency of video encoding
operations.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_TUNING_MODE_LOSSLESS_KHR</code> specifies that video
encoding is tuned for lossless encoding.
When using this tuning mode, video encode operations produce lossless
output.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="supported-video-decode-or-encode-capabilities"><a class="anchor" href="chap41.html#supported-video-decode-or-encode-capabilities"></a>41.3.3. Supported Video Decode or Encode Capabilities</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To query video decode or encode capabilities for a specific codec, call:</p>
</div>
<div id="vkGetPhysicalDeviceVideoCapabilitiesKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="n">VkResult</span> <span class="nf">vkGetPhysicalDeviceVideoCapabilitiesKHR</span><span class="p">(</span>
    <span class="n">VkPhysicalDevice</span>                            <span class="n">physicalDevice</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkVideoProfileInfoKHR</span><span class="o">*</span>                <span class="n">pVideoProfile</span><span class="p">,</span>
    <span class="n">VkVideoCapabilitiesKHR</span><span class="o">*</span>                     <span class="n">pCapabilities</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>physicalDevice</code> is the physical device whose video decode or encode
capabilities will be queried.</p>
</li>
<li>
<p><code>pVideoProfile</code> is a pointer to a <a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>
structure with a chained codec-operation specific video profile
structure.</p>
</li>
<li>
<p><code>pCapabilities</code> is a pointer to a <a href="chap41.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>
structure in which the capabilities are returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-physicalDevice-parameter" href="chap41.html#VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-physicalDevice-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-physicalDevice-parameter</span><br>
 <code>physicalDevice</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkPhysicalDevice">VkPhysicalDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-parameter" href="chap41.html#VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-parameter</span><br>
 <code>pVideoProfile</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pCapabilities-parameter" href="chap41.html#VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pCapabilities-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pCapabilities-parameter</span><br>
 <code>pCapabilities</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap41.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PROFILE_OPERATION_NOT_SUPPORTED_KHR</code></p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PROFILE_FORMAT_NOT_SUPPORTED_KHR</code></p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PICTURE_LAYOUT_NOT_SUPPORTED_KHR</code></p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PROFILE_CODEC_NOT_SUPPORTED_KHR</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If <code>pVideoProfile</code> and the chained codec-specific parameters are not
supported, then one of the <a href="chap41.html#video-profile-error-codes">video-profile-specific error codes</a> are returned.</p>
</div>
<div class="paragraph">
<p>Otherwise, the implementation will fill <code>pCapabilities</code> with
capabilities associated with this video profile.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoCapabilitiesKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoCapabilitiesKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>              <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoCapabilityFlagsKHR</span>    <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>                 <span class="n">minBitstreamBufferOffsetAlignment</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>                 <span class="n">minBitstreamBufferSizeAlignment</span><span class="p">;</span>
    <span class="n">VkExtent2D</span>                   <span class="n">pictureAccessGranularity</span><span class="p">;</span>
    <span class="n">VkExtent2D</span>                   <span class="n">minCodedExtent</span><span class="p">;</span>
    <span class="n">VkExtent2D</span>                   <span class="n">maxCodedExtent</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                     <span class="n">maxDpbSlots</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                     <span class="n">maxActiveReferencePictures</span><span class="p">;</span>
    <span class="n">VkExtensionProperties</span>        <span class="n">stdHeaderVersion</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoCapabilitiesKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap41.html#VkVideoCapabilityFlagBitsKHR">VkVideoCapabilityFlagBitsKHR</a>
specifying capability flags.</p>
</li>
<li>
<p><code>minBitstreamBufferOffsetAlignment</code> is the minimum alignment for the
input or output bitstream buffer offset.</p>
</li>
<li>
<p><code>minBitstreamBufferSizeAlignment</code> is the minimum alignment for the
input or output bitstream buffer size</p>
</li>
<li>
<p><code>pictureAccessGranularity</code> is the granularity at which image access
to video picture resources happen.</p>
</li>
<li>
<p><code>minCodedExtent</code> is the minimum width and height of the decoded or
encoded video.</p>
</li>
<li>
<p><code>maxCodedExtent</code> is the maximum width and height of the decoded or
encoded video.</p>
</li>
<li>
<p><code>maxDpbSlots</code> is the maximum number of DPB Slots supported by the
implementation for a single video session instance.</p>
</li>
<li>
<p><code>maxActiveReferencePictures</code> is the maximum slots that can be used
as <a href="chap41.html#reference-picture">Reference Pictures</a> with a single decode or
encode operation.</p>
</li>
<li>
<p><code>stdHeaderVersion</code> is a <a href="chap43.html#VkExtensionProperties">VkExtensionProperties</a> structure
reporting the Video Std header version supported for the
<code>codecOperation</code> requested in
<code>vkGetPhysicalDeviceVideoCapabilitiesKHR</code>::<code>pVideoProfile</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoCapabilitiesKHR-sType-sType" href="chap41.html#VUID-VkVideoCapabilitiesKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoCapabilitiesKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_CAPABILITIES_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoCapabilitiesKHR-pNext-pNext" href="chap41.html#VUID-VkVideoCapabilitiesKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoCapabilitiesKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap41.html#VkVideoDecodeCapabilitiesKHR">VkVideoDecodeCapabilitiesKHR</a>, <a href="chap41.html#VkVideoDecodeH264CapabilitiesEXT">VkVideoDecodeH264CapabilitiesEXT</a>, <a href="chap41.html#VkVideoDecodeH265CapabilitiesEXT">VkVideoDecodeH265CapabilitiesEXT</a>, <a href="chap41.html#VkVideoEncodeCapabilitiesKHR">VkVideoEncodeCapabilitiesKHR</a>, <a href="chap41.html#VkVideoEncodeH264CapabilitiesEXT">VkVideoEncodeH264CapabilitiesEXT</a>, or <a href="chap41.html#VkVideoEncodeH265CapabilitiesEXT">VkVideoEncodeH265CapabilitiesEXT</a></p>
</li>
<li>
<p><a id="VUID-VkVideoCapabilitiesKHR-sType-unique" href="chap41.html#VUID-VkVideoCapabilitiesKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoCapabilitiesKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> flags are defined with the following
enumeration:</p>
</div>
<div id="VkVideoCapabilityFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoCapabilityFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_CAPABILITY_PROTECTED_CONTENT_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_CAPABILITY_SEPARATE_REFERENCE_IMAGES_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoCapabilityFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_CAPABILITY_PROTECTED_CONTENT_BIT_KHR</code> - the decode or
encode session supports protected content.</p>
</li>
<li>
<p><code>VK_VIDEO_CAPABILITY_SEPARATE_REFERENCE_IMAGES_BIT_KHR</code> - the DPB or
Reconstructed Video Picture Resources for the video session <strong class="purple">may</strong> be
created as a separate <a href="chap12.html#VkImage">VkImage</a> for each DPB picture.
If not supported, the DPB <strong class="purple">must</strong> be created as single multi-layered image
where each layer represents one of the DPB Video Picture Resources.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoCapabilityFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoCapabilityFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap41.html#VkVideoCapabilityFlagsKHR">VkVideoCapabilityFlagsKHR</a> is a bitmask type for setting a mask of zero
or more <a href="chap41.html#VkVideoCapabilityFlagBitsKHR">VkVideoCapabilityFlagBitsKHR</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="supported-video-input-output-dpb-formats-enumeration"><a class="anchor" href="chap41.html#supported-video-input-output-dpb-formats-enumeration"></a>41.3.4. Enumeration of Supported Video Output, Input and DPB Formats</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To enumerate the supported output, input and DPB image formats for a
specific codec operation and video profile, call:</p>
</div>
<div id="vkGetPhysicalDeviceVideoFormatPropertiesKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="n">VkResult</span> <span class="nf">vkGetPhysicalDeviceVideoFormatPropertiesKHR</span><span class="p">(</span>
    <span class="n">VkPhysicalDevice</span>                            <span class="n">physicalDevice</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkPhysicalDeviceVideoFormatInfoKHR</span><span class="o">*</span>   <span class="n">pVideoFormatInfo</span><span class="p">,</span>
    <span class="kt">uint32_t</span><span class="o">*</span>                                   <span class="n">pVideoFormatPropertyCount</span><span class="p">,</span>
    <span class="n">VkVideoFormatPropertiesKHR</span><span class="o">*</span>                 <span class="n">pVideoFormatProperties</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>physicalDevice</code> is the physical device being queried.</p>
</li>
<li>
<p><code>pVideoFormatInfo</code> is a pointer to a
<a href="chap41.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a> structure specifying the codec
and video profile for which information is returned.</p>
</li>
<li>
<p><code>pVideoFormatPropertyCount</code> is a pointer to an integer related to
the number of video format properties available or queried, as described
below.</p>
</li>
<li>
<p><code>pVideoFormatProperties</code> is a pointer to an array of
<a href="chap41.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a> structures in which supported formats
and image parameters are returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>pVideoFormatProperties</code> is <code>NULL</code>, then the number of video format
properties supported for the given <code>physicalDevice</code> is returned in
<code>pVideoFormatPropertyCount</code>.
Otherwise, <code>pVideoFormatPropertyCount</code> <strong class="purple">must</strong> point to a variable set by
the user to the number of elements in the <code>pVideoFormatProperties</code>
array, and on return the variable is overwritten with the number of values
actually written to <code>pVideoFormatProperties</code>.
If the value of <code>pVideoFormatPropertyCount</code> is less than the number of
video format properties supported, at most <code>pVideoFormatPropertyCount</code>
values will be written to <code>pVideoFormatProperties</code>, and
<code>VK_INCOMPLETE</code> will be returned instead of <code>VK_SUCCESS</code>, to
indicate that not all the available values were returned.</p>
</div>
<div class="paragraph">
<p>If an implementation reports
<code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_COINCIDE_BIT_KHR</code> is
supported but
<code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_DISTINCT_BIT_KHR</code> is not
supported in <a href="chap41.html#VkVideoDecodeCapabilitiesKHR">VkVideoDecodeCapabilitiesKHR</a>::<code>flags</code>, then to query
for video format properties for decode DPB or output,
<a href="chap41.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a>::<code>imageUsage</code> <strong class="purple">must</strong> have both
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code> and
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code> set.
Otherwise, the call will fail with
<code>VK_ERROR_IMAGE_USAGE_NOT_SUPPORTED_KHR</code>.</p>
</div>
<div class="paragraph">
<p>If an implementation reports
<code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_DISTINCT_BIT_KHR</code> is
supported but
<code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_COINCIDE_BIT_KHR</code> is not
supported in <a href="chap41.html#VkVideoDecodeCapabilitiesKHR">VkVideoDecodeCapabilitiesKHR</a>::<code>flags</code>, then to query
for video format properties for decode DPB,
<a href="chap41.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a>::<code>imageUsage</code> <strong class="purple">must</strong> have
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code> set and
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code> not set.
Otherwise, the call will fail with
<code>VK_ERROR_IMAGE_USAGE_NOT_SUPPORTED_KHR</code>.
Similarly, to query for video format properties for decode output,
<a href="chap41.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a>::<code>imageUsage</code> <strong class="purple">must</strong> have
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code> set and
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code> not set.
Otherwise, the call will fail with
<code>VK_ERROR_IMAGE_USAGE_NOT_SUPPORTED_KHR</code>.</p>
</div>
<div class="paragraph">
<p>The <code>imageUsage</code> member of the <a href="chap41.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a>
structure specifies the expected video usage flags that the returned video
formats <strong class="purple">must</strong> support.
Correspondingly, the <code>imageUsageFlags</code> member of each
<a href="chap41.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a> structure returned will contain at least
the same set of image usage flags.</p>
</div>
<div class="paragraph">
<p>If the implementation supports using video input, output, or DPB images of a
particular format in operations other than video decode/encode then the
<code>imageUsageFlags</code> member of the corresponding
<a href="chap41.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a> structure returned will include additional
image usage flags indicating that.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note:</div>
<div class="paragraph">
<p>For most use cases, only decode or encode related usage flags are going to
be specified.
For a use case such as transcode, if the image were to be shared between
decode and encode session(s), then both decode and encode related usage
flags <strong class="purple">can</strong> be set.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Video format properties are always queried with respect to a specific set of
video profiles, as defined by the <a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> structure.
These are specified by chaining the <a href="chap41.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a>
structure to <code>pVideoFormatInfo</code>.</p>
</div>
<div class="paragraph">
<p>For most use cases, the images are used by a single video session and a
single video profile is provided.
For a use case such as transcode, where a decode session output image <strong class="purple">can</strong>
be used as encode input in one or more encode sessions, multiple video
profiles corresponding to the video sessions that will share the image <strong class="purple">must</strong>
be provided.</p>
</div>
<div class="paragraph">
<p>If any of the profiles specified via
<a href="chap41.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a>::<code>pProfiles</code> are not supported, then
<code>vkGetPhysicalDeviceVideoFormatPropertiesKHR</code> returns one of the
<a href="chap41.html#video-profile-error-codes">video-profile-specific error codes</a>.
Furthermore, if <a href="chap41.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a>::<code>imageUsage</code>
includes any image usage flags not supported by the specified video profiles
then <code>vkGetPhysicalDeviceVideoFormatPropertiesKHR</code> returns
<code>VK_ERROR_IMAGE_USAGE_NOT_SUPPORTED_KHR</code>.</p>
</div>
<div class="paragraph">
<p>Multiple <code>VkVideoFormatPropertiesKHR</code> entries <strong class="purple">may</strong> be returned with the
same <code>format</code> member with different <code>componentMapping</code>,
<code>imageType</code>, or <code>imageTiling</code> values, as described later.</p>
</div>
<div class="paragraph">
<p>In addition, a different set of <code>VkVideoFormatPropertiesKHR</code> entries
<strong class="purple">may</strong> be returned depending on the <code>imageUsage</code> member of the
<code>VkPhysicalDeviceVideoFormatInfoKHR</code> structure, even for the same set of
video profiles, for example, based on whether encode input, encode DPB,
decode output, and/or decode DPB usage is requested.</p>
</div>
<div class="paragraph">
<p>The application <strong class="purple">can</strong> select the parameters returned in the
<code>VkVideoFormatPropertiesKHR</code> entries and use compatible parameters when
creating the input, output, and DPB images.
The implementation will report all image creation and usage flags that are
valid for images used with the requested video profiles but applications
<strong class="purple">should</strong> create images only with those that are necessary for the particular
use case.</p>
</div>
<div class="paragraph">
<p>Before creating an image, the application <strong class="purple">can</strong> obtain the complete set of
supported image format features by calling
<a href="chap47.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a> using parameters derived
from the members of one of the reported <code>VkVideoFormatPropertiesKHR</code>
entries and adding the same <a href="chap41.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a> structure to the
<code>pNext</code> chain of <a href="chap47.html#VkPhysicalDeviceImageFormatInfo2">VkPhysicalDeviceImageFormatInfo2</a>.</p>
</div>
<div class="paragraph">
<p>The <code>componentMapping</code> member of <code>VkVideoFormatPropertiesKHR</code>
defines the ordering of the Y′C<sub>B</sub>C<sub>R</sub> color channels from the perspective of
the video codec operations specified in <code>VkVideoProfileListInfoKHR</code>.
For example, if the implementation produces video decode output with the
format <code>VK_FORMAT_G8_B8R8_2PLANE_420_UNORM</code> where the blue and red
chrominance channels are swapped then the <code>componentMapping</code> member of
the corresponding <code>VkVideoFormatPropertiesKHR</code> structure will have the
following member values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="n">components</span><span class="p">.</span><span class="n">r</span> <span class="o">=</span> <span class="n">VK_COMPONENT_SWIZZLE_B</span><span class="p">;</span>        <span class="c1">// Cb component</span>
<span class="n">components</span><span class="p">.</span><span class="n">g</span> <span class="o">=</span> <span class="n">VK_COMPONENT_SWIZZLE_IDENTITY</span><span class="p">;</span> <span class="c1">// Y component</span>
<span class="n">components</span><span class="p">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">VK_COMPONENT_SWIZZLE_R</span><span class="p">;</span>        <span class="c1">// Cr component</span>
<span class="n">components</span><span class="p">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">VK_COMPONENT_SWIZZLE_IDENTITY</span><span class="p">;</span> <span class="c1">// unused, defaults to 1.0</span></code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pNext-06812" href="chap41.html#VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pNext-06812"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pNext-06812</span><br>

The <code>pNext</code> chain of <code>pVideoFormatInfo</code> <strong class="purple">must</strong> include a valid
<a href="chap41.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a> structure with <code>profileCount</code>
greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-physicalDevice-parameter" href="chap41.html#VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-physicalDevice-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-physicalDevice-parameter</span><br>
 <code>physicalDevice</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkPhysicalDevice">VkPhysicalDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatInfo-parameter" href="chap41.html#VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatInfo-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatInfo-parameter</span><br>
 <code>pVideoFormatInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatPropertyCount-parameter" href="chap41.html#VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatPropertyCount-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatPropertyCount-parameter</span><br>
 <code>pVideoFormatPropertyCount</code> <strong class="purple">must</strong> be a valid pointer to a <code>uint32_t</code> value</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatProperties-parameter" href="chap41.html#VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatProperties-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatProperties-parameter</span><br>
 If the value referenced by <code>pVideoFormatPropertyCount</code> is not <code>0</code>, and <code>pVideoFormatProperties</code> is not <code>NULL</code>, <code>pVideoFormatProperties</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>pVideoFormatPropertyCount</code> <a href="chap41.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
<li>
<p><code>VK_INCOMPLETE</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_IMAGE_USAGE_NOT_SUPPORTED_KHR</code></p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PROFILE_OPERATION_NOT_SUPPORTED_KHR</code></p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PROFILE_FORMAT_NOT_SUPPORTED_KHR</code></p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PICTURE_LAYOUT_NOT_SUPPORTED_KHR</code></p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PROFILE_CODEC_NOT_SUPPORTED_KHR</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a> input structure is defined as:</p>
</div>
<div id="VkPhysicalDeviceVideoFormatInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkPhysicalDeviceVideoFormatInfoKHR</span> <span class="p">{</span>
     <span class="n">VkStructureType</span>     <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>          <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImageUsageFlags</span>    <span class="n">imageUsage</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkPhysicalDeviceVideoFormatInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>imageUsage</code> is a bitmask of <a href="chap12.html#VkImageUsageFlagBits">VkImageUsageFlagBits</a> specifying
the intended usage of the video images.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkPhysicalDeviceVideoFormatInfoKHR-sType-sType" href="chap41.html#VUID-VkPhysicalDeviceVideoFormatInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkPhysicalDeviceVideoFormatInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_PHYSICAL_DEVICE_VIDEO_FORMAT_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkPhysicalDeviceVideoFormatInfoKHR-pNext-pNext" href="chap41.html#VUID-VkPhysicalDeviceVideoFormatInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkPhysicalDeviceVideoFormatInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="chap41.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a></p>
</li>
<li>
<p><a id="VUID-VkPhysicalDeviceVideoFormatInfoKHR-sType-unique" href="chap41.html#VUID-VkPhysicalDeviceVideoFormatInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkPhysicalDeviceVideoFormatInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkPhysicalDeviceVideoFormatInfoKHR-imageUsage-parameter" href="chap41.html#VUID-VkPhysicalDeviceVideoFormatInfoKHR-imageUsage-parameter"></a> <span class="vuid">VUID-VkPhysicalDeviceVideoFormatInfoKHR-imageUsage-parameter</span><br>
 <code>imageUsage</code> <strong class="purple">must</strong> be a valid combination of <a href="chap12.html#VkImageUsageFlagBits">VkImageUsageFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkPhysicalDeviceVideoFormatInfoKHR-imageUsage-requiredbitmask" href="chap41.html#VUID-VkPhysicalDeviceVideoFormatInfoKHR-imageUsage-requiredbitmask"></a> <span class="vuid">VUID-VkPhysicalDeviceVideoFormatInfoKHR-imageUsage-requiredbitmask</span><br>
 <code>imageUsage</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoProfileListInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoProfileListInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                 <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                     <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                        <span class="n">profileCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoProfileInfoKHR</span><span class="o">*</span>    <span class="n">pProfiles</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoProfileListInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>profileCount</code> is an integer which holds the number of video
profiles included in <code>pProfiles</code>.</p>
</li>
<li>
<p><code>pProfiles</code> is a pointer to an array of <a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>
structures.
Each <a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> structure <strong class="purple">must</strong> chain the corresponding
codec-operation specific extension video profile structure.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Video transcoding is an example of a use case that necessitates numerous
profiles.
When the application provides one or more video decode and encode profiles
in the list of profiles, the implementation ensures that the video formats
and parameters reported produce video resources suitable for the transcoding
use cases without the need for manual transformation.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoProfileListInfoKHR-pProfiles-06813" href="chap41.html#VUID-VkVideoProfileListInfoKHR-pProfiles-06813"></a> <span class="vuid">VUID-VkVideoProfileListInfoKHR-pProfiles-06813</span><br>

If the <code>pProfiles</code> list contains more than one
<a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> entry, then it <strong class="purple">must</strong> not contain more than
one entry whose <code>videoCodecOperation</code> member specifies a decode
operation</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoProfileListInfoKHR-sType-sType" href="chap41.html#VUID-VkVideoProfileListInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoProfileListInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_PROFILE_LIST_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoProfileListInfoKHR-pProfiles-parameter" href="chap41.html#VUID-VkVideoProfileListInfoKHR-pProfiles-parameter"></a> <span class="vuid">VUID-VkVideoProfileListInfoKHR-pProfiles-parameter</span><br>
 If <code>profileCount</code> is not <code>0</code>, <code>pProfiles</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>profileCount</code> valid <a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a> output structure for
<a href="chap41.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> is defined as:</p>
</div>
<div id="VkVideoFormatPropertiesKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoFormatPropertiesKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>       <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                 <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkFormat</span>              <span class="n">format</span><span class="p">;</span>
    <span class="n">VkComponentMapping</span>    <span class="n">componentMapping</span><span class="p">;</span>
    <span class="n">VkImageCreateFlags</span>    <span class="n">imageCreateFlags</span><span class="p">;</span>
    <span class="n">VkImageType</span>           <span class="n">imageType</span><span class="p">;</span>
    <span class="n">VkImageTiling</span>         <span class="n">imageTiling</span><span class="p">;</span>
    <span class="n">VkImageUsageFlags</span>     <span class="n">imageUsageFlags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoFormatPropertiesKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>format</code> is a <a href="chap46.html#VkFormat">VkFormat</a> that specifies the format that <strong class="purple">can</strong> be
used with the specified video profiles and image usages.</p>
</li>
<li>
<p><code>componentMapping</code> defines the color channel order used for the
format.
<code>format</code> along with <code>componentMapping</code> describe how the color
channels are ordered when producing video decoder output or are expected
to be ordered in video encoder input, when applicable.
If the <code>format</code> reported does not require component swizzling then
all members of <code>componentMapping</code> will be set to
<code>VK_COMPONENT_SWIZZLE_IDENTITY</code>.</p>
</li>
<li>
<p><code>imageCreateFlags</code> is a bitmask of <a href="chap12.html#VkImageCreateFlagBits">VkImageCreateFlagBits</a>
specifying the supported image creation flags for the format.</p>
</li>
<li>
<p><code>imageType</code> is a <a href="chap12.html#VkImageType">VkImageType</a> that specifies the image type the
format <strong class="purple">can</strong> be used with.</p>
</li>
<li>
<p><code>imageTiling</code> is a <a href="chap12.html#VkImageTiling">VkImageTiling</a> that specifies the image
tiling the format <strong class="purple">can</strong> be used with.</p>
</li>
<li>
<p><code>imageUsageFlags</code> is a bitmask of <a href="chap12.html#VkImageUsageFlagBits">VkImageUsageFlagBits</a>
specifying the supported image usage flags for the format.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoFormatPropertiesKHR-sType-sType" href="chap41.html#VUID-VkVideoFormatPropertiesKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoFormatPropertiesKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_FORMAT_PROPERTIES_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoFormatPropertiesKHR-pNext-pNext" href="chap41.html#VUID-VkVideoFormatPropertiesKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoFormatPropertiesKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="video-session-objects"><a class="anchor" href="chap41.html#video-session-objects"></a>41.4. Video Session Objects</h3>
<div class="sect3">
<h4 id="video-session"><a class="anchor" href="chap41.html#video-session"></a>41.4.1. Video Session</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Video session objects are abstracted and represented by
<a href="chap41.html#VkVideoSessionKHR">VkVideoSessionKHR</a> handles:</p>
</div>
<div id="VkVideoSessionKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="n">VK_DEFINE_NON_DISPATCHABLE_HANDLE</span><span class="p">(</span><span class="n">VkVideoSessionKHR</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="video-session-creation"><a class="anchor" href="chap41.html#video-session-creation"></a>Creating a Video Session</h5>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create a video session object, call:</p>
</div>
<div id="vkCreateVideoSessionKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="n">VkResult</span> <span class="nf">vkCreateVideoSessionKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkVideoSessionCreateInfoKHR</span><span class="o">*</span>          <span class="n">pCreateInfo</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">,</span>
    <span class="n">VkVideoSessionKHR</span><span class="o">*</span>                          <span class="n">pVideoSession</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the decode or encode
session object.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="chap41.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>
structure containing parameters specifying the creation of the decode or
encode session.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pVideoSession</code> is a pointer to a <a href="chap41.html#VkVideoSessionKHR">VkVideoSessionKHR</a> structure
specifying the decode or encode video session object which will be
created by this function when it returns <code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Video session objects are created in <em>uninitialized</em> state.
In order to transition the video session into <em>initial</em> state, the
application <strong class="purple">must</strong> issue a <a href="chap41.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a> command with the
<code>flags</code> member of <a href="chap41.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a> including
<code>VK_VIDEO_CODING_CONTROL_RESET_BIT_KHR</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateVideoSessionKHR-device-parameter" href="chap41.html#VUID-vkCreateVideoSessionKHR-device-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateVideoSessionKHR-pCreateInfo-parameter" href="chap41.html#VUID-vkCreateVideoSessionKHR-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionKHR-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateVideoSessionKHR-pAllocator-parameter" href="chap41.html#VUID-vkCreateVideoSessionKHR-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionKHR-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateVideoSessionKHR-pVideoSession-parameter" href="chap41.html#VUID-vkCreateVideoSessionKHR-pVideoSession-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionKHR-pVideoSession-parameter</span><br>
 <code>pVideoSession</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap41.html#VkVideoSessionKHR">VkVideoSessionKHR</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_STD_VERSION_NOT_SUPPORTED_KHR</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoSessionCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoSessionCreateInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                 <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                     <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                        <span class="n">queueFamilyIndex</span><span class="p">;</span>
    <span class="n">VkVideoSessionCreateFlagsKHR</span>    <span class="n">flags</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoProfileInfoKHR</span><span class="o">*</span>    <span class="n">pVideoProfile</span><span class="p">;</span>
    <span class="n">VkFormat</span>                        <span class="n">pictureFormat</span><span class="p">;</span>
    <span class="n">VkExtent2D</span>                      <span class="n">maxCodedExtent</span><span class="p">;</span>
    <span class="n">VkFormat</span>                        <span class="n">referencePictureFormat</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                        <span class="n">maxDpbSlots</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                        <span class="n">maxActiveReferencePictures</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkExtensionProperties</span><span class="o">*</span>    <span class="n">pStdHeaderVersion</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoSessionCreateInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>queueFamilyIndex</code> is the queue family of the created video session.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap41.html#VkVideoSessionCreateFlagBitsKHR">VkVideoSessionCreateFlagBitsKHR</a>
specifying creation flags.</p>
</li>
<li>
<p><code>pVideoProfile</code> is a pointer to a <a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>
structure.</p>
</li>
<li>
<p><code>pictureFormat</code> is the format of the <a href="chap12.html#resources-image-views">image
views</a> representing decoded <a href="chap41.html#decoded-output-picture">Output</a> or
encoded <a href="chap41.html#encode-input-picture">Input</a> pictures.</p>
</li>
<li>
<p><code>maxCodedExtent</code> is the maximum width and height of the coded
pictures that this instance will be able to support.</p>
</li>
<li>
<p><code>referencePicturesFormat</code> is the format of the <a href="chap41.html#dpb">DPB</a> image
views representing the <a href="chap41.html#reference-picture">Reference Pictures</a>.</p>
</li>
<li>
<p><code>maxDpbSlots</code> is the maximum number of <a href="chap41.html#dpb-slot">DPB Slots</a> that
can be activated with associated <a href="chap41.html#video-picture-resources">Video Picture
Resources</a> for the created video session.</p>
</li>
<li>
<p><code>maxActiveReferencePictures</code> is the maximum number of active
<a href="chap41.html#dpb-slot">DPB Slots</a> that can be used as Dpb or Reconstructed
<a href="chap41.html#reference-picture">Reference Pictures</a> within a single decode or
encode operation for the created video session.</p>
</li>
<li>
<p><code>pStdHeaderVersion</code> is a pointer to a <a href="chap43.html#VkExtensionProperties">VkExtensionProperties</a>
structure requesting the Video Std header version to use for
<code>codecOperation</code> in <code>pVideoProfile</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pVideoProfile-04845" href="chap41.html#VUID-VkVideoSessionCreateInfoKHR-pVideoProfile-04845"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pVideoProfile-04845</span><br>

<code>pVideoProfile</code> <strong class="purple">must</strong> be a pointer to a valid
<a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> structure whose <code>pNext</code> chain <strong class="purple">must</strong>
include a valid codec-specific profile structure</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-maxDpbSlots-04846" href="chap41.html#VUID-VkVideoSessionCreateInfoKHR-maxDpbSlots-04846"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-maxDpbSlots-04846</span><br>

If <a href="chap41.html#reference-picture">Reference Pictures</a> are required for use with
the created video session, the <code>maxDpbSlots</code> <strong class="purple">must</strong> be set to a value
bigger than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-maxDpbSlots-04847" href="chap41.html#VUID-VkVideoSessionCreateInfoKHR-maxDpbSlots-04847"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-maxDpbSlots-04847</span><br>

<code>maxDpbSlots</code> <strong class="purple">cannot</strong> exceed the implementation reported
<a href="chap41.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>maxDpbSlots</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-maxActiveReferencePictures-04848" href="chap41.html#VUID-VkVideoSessionCreateInfoKHR-maxActiveReferencePictures-04848"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-maxActiveReferencePictures-04848</span><br>

If <a href="chap41.html#reference-picture">Reference Pictures</a> are required for use with
the created video session, the <code>maxActiveReferencePictures</code> <strong class="purple">must</strong> be
set to a value bigger than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-maxActiveReferencePictures-04849" href="chap41.html#VUID-VkVideoSessionCreateInfoKHR-maxActiveReferencePictures-04849"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-maxActiveReferencePictures-04849</span><br>

<code>maxActiveReferencePictures</code> <strong class="purple">cannot</strong> exceed the implementation
reported <a href="chap41.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>maxActiveReferencePictures</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-maxActiveReferencePictures-04850" href="chap41.html#VUID-VkVideoSessionCreateInfoKHR-maxActiveReferencePictures-04850"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-maxActiveReferencePictures-04850</span><br>

<code>maxActiveReferencePictures</code> <strong class="purple">cannot</strong> exceed the <code>maxDpbSlots</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-maxCodedExtent-04851" href="chap41.html#VUID-VkVideoSessionCreateInfoKHR-maxCodedExtent-04851"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-maxCodedExtent-04851</span><br>

<code>maxCodedExtent</code> <strong class="purple">cannot</strong> be smaller than
<a href="chap41.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>minExtent</code> and bigger than
<a href="chap41.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>maxExtent</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-referencePicturesFormat-04852" href="chap41.html#VUID-VkVideoSessionCreateInfoKHR-referencePicturesFormat-04852"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-referencePicturesFormat-04852</span><br>

If the <code>videoCodecOperation</code> member of <code>pVideoProfile</code> specifies
a decode operation then <code>referencePicturesFormat</code> <strong class="purple">must</strong> be one of
the supported decode DPB formats as reported by
<a href="chap41.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> in the <code>format</code>
member of <a href="chap41.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a> when called with the
<code>imageUsage</code> member of its <code>pVideoFormatInfo</code> parameter
containing <code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code>, and with a
<a href="chap41.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a> structure chained to its
<code>pVideoFormatInfo</code> parameter whose <code>pProfiles</code> member contains
an entry matching <code>pVideoProfile</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-videoCodecOperation-06814" href="chap41.html#VUID-VkVideoSessionCreateInfoKHR-videoCodecOperation-06814"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-videoCodecOperation-06814</span><br>

If the <code>videoCodecOperation</code> member of <code>pVideoProfile</code> specifies
an encode operation then <code>referencePicturesFormat</code> <strong class="purple">must</strong> be one of
the supported encode DPB formats as reported by
<a href="chap41.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> in the <code>format</code>
member of <a href="chap41.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a> when called with the
<code>imageUsage</code> member of its <code>pVideoFormatInfo</code> parameter
containing <code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code>, and with a
<a href="chap41.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a> structure chained to its
<code>pVideoFormatInfo</code> parameter whose <code>pProfiles</code> member contains
an entry matching <code>pVideoProfile</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pictureFormat-04853" href="chap41.html#VUID-VkVideoSessionCreateInfoKHR-pictureFormat-04853"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pictureFormat-04853</span><br>

If the <code>videoCodecOperation</code> member of <code>pVideoProfile</code> specifies
a decode operation then <code>pictureFormat</code> <strong class="purple">must</strong> be one of the
supported decode output formats as reported by
<a href="chap41.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> in the <code>format</code>
member of <a href="chap41.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a> when called with the
<code>imageUsage</code> member of its <code>pVideoFormatInfo</code> parameter
containing <code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code>, and with a
<a href="chap41.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a> structure chained to its
<code>pVideoFormatInfo</code> parameter whose <code>pProfiles</code> member contains
an entry matching <code>pVideoProfile</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pictureFormat-04854" href="chap41.html#VUID-VkVideoSessionCreateInfoKHR-pictureFormat-04854"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pictureFormat-04854</span><br>

If the <code>videoCodecOperation</code> member of <code>pVideoProfile</code> specifies
an encode operation then <code>pictureFormat</code> <strong class="purple">must</strong> be one of the
supported encode input formats as reported by
<a href="chap41.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> in the <code>format</code>
member of <a href="chap41.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a> when called with the
<code>imageUsage</code> member of its <code>pVideoFormatInfo</code> parameter
containing <code>VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code>, and with a
<a href="chap41.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a> structure chained to its
<code>pVideoFormatInfo</code> parameter whose <code>pProfiles</code> member contains
an entry matching <code>pVideoProfile</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-sType-sType" href="chap41.html#VUID-VkVideoSessionCreateInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_SESSION_CREATE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pNext-pNext" href="chap41.html#VUID-VkVideoSessionCreateInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-flags-parameter" href="chap41.html#VUID-VkVideoSessionCreateInfoKHR-flags-parameter"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap41.html#VkVideoSessionCreateFlagBitsKHR">VkVideoSessionCreateFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pVideoProfile-parameter" href="chap41.html#VUID-VkVideoSessionCreateInfoKHR-pVideoProfile-parameter"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pVideoProfile-parameter</span><br>
 <code>pVideoProfile</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pictureFormat-parameter" href="chap41.html#VUID-VkVideoSessionCreateInfoKHR-pictureFormat-parameter"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pictureFormat-parameter</span><br>
 <code>pictureFormat</code> <strong class="purple">must</strong> be a valid <a href="chap46.html#VkFormat">VkFormat</a> value</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-referencePictureFormat-parameter" href="chap41.html#VUID-VkVideoSessionCreateInfoKHR-referencePictureFormat-parameter"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-referencePictureFormat-parameter</span><br>
 <code>referencePictureFormat</code> <strong class="purple">must</strong> be a valid <a href="chap46.html#VkFormat">VkFormat</a> value</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pStdHeaderVersion-parameter" href="chap41.html#VUID-VkVideoSessionCreateInfoKHR-pStdHeaderVersion-parameter"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pStdHeaderVersion-parameter</span><br>
 <code>pStdHeaderVersion</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap43.html#VkExtensionProperties">VkExtensionProperties</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The decode or encode session creation flags defined with the following
enums:</p>
</div>
<div id="VkVideoSessionCreateFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoSessionCreateFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_SESSION_CREATE_PROTECTED_CONTENT_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoSessionCreateFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_SESSION_CREATE_PROTECTED_CONTENT_BIT_KHR</code> - create the
video session for use with protected video content</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoSessionCreateFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoSessionCreateFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap41.html#VkVideoSessionCreateFlagsKHR">VkVideoSessionCreateFlagsKHR</a> is a bitmask type for setting a mask of
zero or more <a href="chap41.html#VkVideoSessionCreateFlagBitsKHR">VkVideoSessionCreateFlagBitsKHR</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="video-session-destruction"><a class="anchor" href="chap41.html#video-session-destruction"></a>41.4.2. Destroying a Video Session</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy a decode session object, call:</p>
</div>
<div id="vkDestroyVideoSessionKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="kt">void</span> <span class="nf">vkDestroyVideoSessionKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkVideoSessionKHR</span>                           <span class="n">videoSession</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the device that was used for the creation of the video
session.</p>
</li>
<li>
<p><code>videoSession</code> is the decode or encode video session to be
destroyed.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyVideoSessionKHR-device-parameter" href="chap41.html#VUID-vkDestroyVideoSessionKHR-device-parameter"></a> <span class="vuid">VUID-vkDestroyVideoSessionKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyVideoSessionKHR-videoSession-parameter" href="chap41.html#VUID-vkDestroyVideoSessionKHR-videoSession-parameter"></a> <span class="vuid">VUID-vkDestroyVideoSessionKHR-videoSession-parameter</span><br>
 If <code>videoSession</code> is not <a href="chap55.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>videoSession</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoSessionKHR">VkVideoSessionKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyVideoSessionKHR-pAllocator-parameter" href="chap41.html#VUID-vkDestroyVideoSessionKHR-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyVideoSessionKHR-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyVideoSessionKHR-videoSession-parent" href="chap41.html#VUID-vkDestroyVideoSessionKHR-videoSession-parent"></a> <span class="vuid">VUID-vkDestroyVideoSessionKHR-videoSession-parent</span><br>
 If <code>videoSession</code> is a valid handle, it <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>videoSession</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="video-session-memory-resource-management"><a class="anchor" href="chap41.html#video-session-memory-resource-management"></a>41.4.3. Video Session Memory Resource Management</h4>
<div class="sect4">
<h5 id="obtaining-video-session-memory-requirements"><a class="anchor" href="chap41.html#obtaining-video-session-memory-requirements"></a>Obtaining the Video Session Object Device Memory Requirements</h5>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To get memory requirements for a video session, call:</p>
</div>
<div id="vkGetVideoSessionMemoryRequirementsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="n">VkResult</span> <span class="nf">vkGetVideoSessionMemoryRequirementsKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkVideoSessionKHR</span>                           <span class="n">videoSession</span><span class="p">,</span>
    <span class="kt">uint32_t</span><span class="o">*</span>                                   <span class="n">pMemoryRequirementsCount</span><span class="p">,</span>
    <span class="n">VkVideoSessionMemoryRequirementsKHR</span><span class="o">*</span>        <span class="n">pMemoryRequirements</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the video session.</p>
</li>
<li>
<p><code>videoSession</code> is the video session to query.</p>
</li>
<li>
<p><code>pMemoryRequirementsCount</code> is a pointer to an integer related to the
number of memory binding requirements available or queried, as described
below.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is <code>NULL</code> or a pointer to an array of
<a href="chap41.html#VkVideoSessionMemoryRequirementsKHR">VkVideoSessionMemoryRequirementsKHR</a> structures in which the memory
binding requirements of the video session are returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>pMemoryRequirements</code> is <code>NULL</code>, then the number of memory bindings
required for the video session is returned in
<code>pMemoryRequirementsCount</code>.
Otherwise, <code>pMemoryRequirementsCount</code> <strong class="purple">must</strong> point to a variable set by
the user with the number of elements in the <code>pMemoryRequirements</code> array,
and on return the variable is overwritten with the number of memory binding
requirements actually written to <code>pMemoryRequirements</code>.
If <code>pMemoryRequirementsCount</code> is less than the number of memory bindings
required for the video session, then at most <code>pMemoryRequirementsCount</code>
elements will be written to <code>pMemoryRequirements</code>, and
<code>VK_INCOMPLETE</code> will be returned, instead of <code>VK_SUCCESS</code>, to
indicate that not all required memory binding requirements were returned.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetVideoSessionMemoryRequirementsKHR-device-parameter" href="chap41.html#VUID-vkGetVideoSessionMemoryRequirementsKHR-device-parameter"></a> <span class="vuid">VUID-vkGetVideoSessionMemoryRequirementsKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetVideoSessionMemoryRequirementsKHR-videoSession-parameter" href="chap41.html#VUID-vkGetVideoSessionMemoryRequirementsKHR-videoSession-parameter"></a> <span class="vuid">VUID-vkGetVideoSessionMemoryRequirementsKHR-videoSession-parameter</span><br>
 <code>videoSession</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoSessionKHR">VkVideoSessionKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetVideoSessionMemoryRequirementsKHR-pMemoryRequirementsCount-parameter" href="chap41.html#VUID-vkGetVideoSessionMemoryRequirementsKHR-pMemoryRequirementsCount-parameter"></a> <span class="vuid">VUID-vkGetVideoSessionMemoryRequirementsKHR-pMemoryRequirementsCount-parameter</span><br>
 <code>pMemoryRequirementsCount</code> <strong class="purple">must</strong> be a valid pointer to a <code>uint32_t</code> value</p>
</li>
<li>
<p><a id="VUID-vkGetVideoSessionMemoryRequirementsKHR-pMemoryRequirements-parameter" href="chap41.html#VUID-vkGetVideoSessionMemoryRequirementsKHR-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetVideoSessionMemoryRequirementsKHR-pMemoryRequirements-parameter</span><br>
 If the value referenced by <code>pMemoryRequirementsCount</code> is not <code>0</code>, and <code>pMemoryRequirements</code> is not <code>NULL</code>, <code>pMemoryRequirements</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>pMemoryRequirementsCount</code> <a href="chap41.html#VkVideoSessionMemoryRequirementsKHR">VkVideoSessionMemoryRequirementsKHR</a> structures</p>
</li>
<li>
<p><a id="VUID-vkGetVideoSessionMemoryRequirementsKHR-videoSession-parent" href="chap41.html#VUID-vkGetVideoSessionMemoryRequirementsKHR-videoSession-parent"></a> <span class="vuid">VUID-vkGetVideoSessionMemoryRequirementsKHR-videoSession-parent</span><br>
 <code>videoSession</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
<li>
<p><code>VK_INCOMPLETE</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoSessionMemoryRequirementsKHR">VkVideoSessionMemoryRequirementsKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoSessionMemoryRequirementsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoSessionMemoryRequirementsKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>         <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                   <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                <span class="n">memoryBindIndex</span><span class="p">;</span>
    <span class="n">VkMemoryRequirements</span>    <span class="n">memoryRequirements</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoSessionMemoryRequirementsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>memoryBindIndex</code> is the index of the memory binding.</p>
</li>
<li>
<p><code>memoryRequirements</code> is a <a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure in
which the requested memory binding requirements for the binding index
specified by <code>memoryBindIndex</code> are returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoSessionMemoryRequirementsKHR-sType-sType" href="chap41.html#VUID-VkVideoSessionMemoryRequirementsKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoSessionMemoryRequirementsKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_SESSION_MEMORY_REQUIREMENTS_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionMemoryRequirementsKHR-pNext-pNext" href="chap41.html#VUID-VkVideoSessionMemoryRequirementsKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoSessionMemoryRequirementsKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="binding-session-memory"><a class="anchor" href="chap41.html#binding-session-memory"></a>Binding the Session Object Device Memory</h5>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To attach memory to a video session object, call:</p>
</div>
<div id="vkBindVideoSessionMemoryKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="n">VkResult</span> <span class="nf">vkBindVideoSessionMemoryKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkVideoSessionKHR</span>                           <span class="n">videoSession</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">bindSessionMemoryInfoCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBindVideoSessionMemoryInfoKHR</span><span class="o">*</span>      <span class="n">pBindSessionMemoryInfos</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the video session.</p>
</li>
<li>
<p><code>videoSession</code> is the video session to be bound with device memory.</p>
</li>
<li>
<p><code>bindSessionMemoryInfoCount</code> is the number of elements in
<code>pBindSessionMemoryInfos</code>.</p>
</li>
<li>
<p><code>pBindSessionMemoryInfos</code> is a pointer to an array of
<code>bindSessionMemoryInfoCount</code> <a href="chap41.html#VkBindVideoSessionMemoryInfoKHR">VkBindVideoSessionMemoryInfoKHR</a>
structures specifying memory regions to be bound to specific memory
bindings of the video session.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindVideoSessionMemoryKHR-device-parameter" href="chap41.html#VUID-vkBindVideoSessionMemoryKHR-device-parameter"></a> <span class="vuid">VUID-vkBindVideoSessionMemoryKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindVideoSessionMemoryKHR-videoSession-parameter" href="chap41.html#VUID-vkBindVideoSessionMemoryKHR-videoSession-parameter"></a> <span class="vuid">VUID-vkBindVideoSessionMemoryKHR-videoSession-parameter</span><br>
 <code>videoSession</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoSessionKHR">VkVideoSessionKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindVideoSessionMemoryKHR-pBindSessionMemoryInfos-parameter" href="chap41.html#VUID-vkBindVideoSessionMemoryKHR-pBindSessionMemoryInfos-parameter"></a> <span class="vuid">VUID-vkBindVideoSessionMemoryKHR-pBindSessionMemoryInfos-parameter</span><br>
 <code>pBindSessionMemoryInfos</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>bindSessionMemoryInfoCount</code> valid <a href="chap41.html#VkBindVideoSessionMemoryInfoKHR">VkBindVideoSessionMemoryInfoKHR</a> structures</p>
</li>
<li>
<p><a id="VUID-vkBindVideoSessionMemoryKHR-bindSessionMemoryInfoCount-arraylength" href="chap41.html#VUID-vkBindVideoSessionMemoryKHR-bindSessionMemoryInfoCount-arraylength"></a> <span class="vuid">VUID-vkBindVideoSessionMemoryKHR-bindSessionMemoryInfoCount-arraylength</span><br>
 <code>bindSessionMemoryInfoCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkBindVideoSessionMemoryKHR-videoSession-parent" href="chap41.html#VUID-vkBindVideoSessionMemoryKHR-videoSession-parent"></a> <span class="vuid">VUID-vkBindVideoSessionMemoryKHR-videoSession-parent</span><br>
 <code>videoSession</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>videoSession</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkBindVideoSessionMemoryInfoKHR">VkBindVideoSessionMemoryInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkBindVideoSessionMemoryInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBindVideoSessionMemoryInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">memoryBindIndex</span><span class="p">;</span>
    <span class="n">VkDeviceMemory</span>     <span class="n">memory</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">memoryOffset</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">memorySize</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBindVideoSessionMemoryInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>memoryBindIndex</code> is the index of the memory binding returned in
<a href="chap41.html#VkVideoSessionMemoryRequirementsKHR">VkVideoSessionMemoryRequirementsKHR</a>::<code>memoryBindIndex</code> from
<a href="chap41.html#vkGetVideoSessionMemoryRequirementsKHR">vkGetVideoSessionMemoryRequirementsKHR</a>.</p>
</li>
<li>
<p><code>memory</code> is the allocated device memory to be bound to the video
session’s memory binding with index <code>memoryBindIndex</code>.</p>
</li>
<li>
<p><code>memoryOffset</code> is the start offset of the region of <code>memory</code>
which is to be bound.</p>
</li>
<li>
<p><code>memorySize</code> is the size in bytes of the region of <code>memory</code>,
starting from <code>memoryOffset</code> bytes, to be bound.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindVideoSessionMemoryInfoKHR-sType-sType" href="chap41.html#VUID-VkBindVideoSessionMemoryInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkBindVideoSessionMemoryInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BIND_VIDEO_SESSION_MEMORY_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkBindVideoSessionMemoryInfoKHR-pNext-pNext" href="chap41.html#VUID-VkBindVideoSessionMemoryInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkBindVideoSessionMemoryInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkBindVideoSessionMemoryInfoKHR-memory-parameter" href="chap41.html#VUID-VkBindVideoSessionMemoryInfoKHR-memory-parameter"></a> <span class="vuid">VUID-VkBindVideoSessionMemoryInfoKHR-memory-parameter</span><br>
 <code>memory</code> <strong class="purple">must</strong> be a valid <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="video-session-parameters"><a class="anchor" href="chap41.html#video-session-parameters"></a>41.4.4. Video Session Parameters</h4>
<div class="paragraph">
<p>This specification supports several classes of preprocessed parameters
stored in Video Session Parameters objects.
The Video Session Parameters objects reduces the number of parameters being
dispatched and then processed by the implementation while recording video
command buffers.</p>
</div>
</div>
<div class="sect3">
<h4 id="creating-video-session-parameters"><a class="anchor" href="chap41.html#creating-video-session-parameters"></a>41.4.5. Creating Video Session Parameters</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Video session parameter objects are represented by
<a href="chap41.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> handles:</p>
</div>
<div id="VkVideoSessionParametersKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="n">VK_DEFINE_NON_DISPATCHABLE_HANDLE</span><span class="p">(</span><span class="n">VkVideoSessionParametersKHR</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create a video session parameters object, call:</p>
</div>
<div id="vkCreateVideoSessionParametersKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="n">VkResult</span> <span class="nf">vkCreateVideoSessionParametersKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkVideoSessionParametersCreateInfoKHR</span><span class="o">*</span> <span class="n">pCreateInfo</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">,</span>
    <span class="n">VkVideoSessionParametersKHR</span><span class="o">*</span>                <span class="n">pVideoSessionParameters</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that was used for the creation of the
video session object.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to
<a href="chap41.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a> structure specifying the
video session parameters.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pVideoSessionParameters</code> is a pointer to a
<a href="chap41.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> handle in which the video session
parameters object is returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateVideoSessionParametersKHR-device-parameter" href="chap41.html#VUID-vkCreateVideoSessionParametersKHR-device-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionParametersKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateVideoSessionParametersKHR-pCreateInfo-parameter" href="chap41.html#VUID-vkCreateVideoSessionParametersKHR-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionParametersKHR-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateVideoSessionParametersKHR-pAllocator-parameter" href="chap41.html#VUID-vkCreateVideoSessionParametersKHR-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionParametersKHR-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateVideoSessionParametersKHR-pVideoSessionParameters-parameter" href="chap41.html#VUID-vkCreateVideoSessionParametersKHR-pVideoSessionParameters-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionParametersKHR-pVideoSessionParameters-parameter</span><br>
 <code>pVideoSessionParameters</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap41.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_TOO_MANY_OBJECTS</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoSessionParametersCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoSessionParametersCreateInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                           <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                               <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoSessionParametersCreateFlagsKHR</span>    <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkVideoSessionParametersKHR</span>               <span class="n">videoSessionParametersTemplate</span><span class="p">;</span>
    <span class="n">VkVideoSessionKHR</span>                         <span class="n">videoSession</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoSessionParametersCreateInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
<li>
<p><code>videoSessionParametersTemplate</code> is <a href="chap55.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a> or a valid
handle to a <a href="chap41.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object.
If this parameter represents a valid handle, then the underlying Video
Session Parameters object will be used as a template for constructing
the new video session parameters object.
All of the template object’s current parameters will be inherited by the
new object in such a case.
Optionally, some of the template’s parameters can be updated or new
parameters added to the newly constructed object via the
extension-specific parameters.</p>
</li>
<li>
<p><code>videoSession</code> is the video session object against which the video
session parameters object is going to be created.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-04855" href="chap41.html#VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-04855"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-04855</span><br>

If <code>videoSessionParametersTemplate</code> represents a valid handle, it
<strong class="purple">must</strong> have been created against <code>videoSession</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-sType-sType" href="chap41.html#VUID-VkVideoSessionParametersCreateInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_SESSION_PARAMETERS_CREATE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-pNext-pNext" href="chap41.html#VUID-VkVideoSessionParametersCreateInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap41.html#VkVideoDecodeH264SessionParametersCreateInfoEXT">VkVideoDecodeH264SessionParametersCreateInfoEXT</a>, <a href="chap41.html#VkVideoDecodeH265SessionParametersCreateInfoEXT">VkVideoDecodeH265SessionParametersCreateInfoEXT</a>, <a href="chap41.html#VkVideoEncodeH264SessionParametersCreateInfoEXT">VkVideoEncodeH264SessionParametersCreateInfoEXT</a>, or <a href="chap41.html#VkVideoEncodeH265SessionParametersCreateInfoEXT">VkVideoEncodeH265SessionParametersCreateInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-sType-unique" href="chap41.html#VUID-VkVideoSessionParametersCreateInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-flags-zerobitmask" href="chap41.html#VUID-VkVideoSessionParametersCreateInfoKHR-flags-zerobitmask"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-flags-zerobitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-parameter" href="chap41.html#VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-parameter"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-parameter</span><br>
 If <code>videoSessionParametersTemplate</code> is not <a href="chap55.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>videoSessionParametersTemplate</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-parameter" href="chap41.html#VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-parameter"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-parameter</span><br>
 <code>videoSession</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoSessionKHR">VkVideoSessionKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-parent" href="chap41.html#VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-parent"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-parent</span><br>
 If <code>videoSessionParametersTemplate</code> is a valid handle, it <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>videoSession</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-commonparent" href="chap41.html#VUID-VkVideoSessionParametersCreateInfoKHR-commonparent"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-commonparent</span><br>
 Both of <code>videoSession</code>, and <code>videoSessionParametersTemplate</code> that are valid handles of non-ignored parameters <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoSessionParametersCreateFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoSessionParametersCreateFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoSessionParametersCreateFlagsKHR</code> is a bitmask type for setting a
mask, but is currently reserved for future use.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="video-session-parameters-update"><a class="anchor" href="chap41.html#video-session-parameters-update"></a>41.4.6. Updating the parameters of the Video Session Parameters object</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To update, add, or remove video session parameters state, call:</p>
</div>
<div id="vkUpdateVideoSessionParametersKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="n">VkResult</span> <span class="nf">vkUpdateVideoSessionParametersKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkVideoSessionParametersKHR</span>                 <span class="n">videoSessionParameters</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkVideoSessionParametersUpdateInfoKHR</span><span class="o">*</span> <span class="n">pUpdateInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that was used for the creation of the
video session object.</p>
</li>
<li>
<p><code>videoSessionParameters</code> is the video session parameters object that
is going to be updated.</p>
</li>
<li>
<p><code>pUpdateInfo</code> is a pointer to a
<code>VkVideoSessionParametersUpdateInfoKHR</code> structure containing the
session parameters update information.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-device-parameter" href="chap41.html#VUID-vkUpdateVideoSessionParametersKHR-device-parameter"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-parameter" href="chap41.html#VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-parameter"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-parameter</span><br>
 <code>videoSessionParameters</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-pUpdateInfo-parameter" href="chap41.html#VUID-vkUpdateVideoSessionParametersKHR-pUpdateInfo-parameter"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-pUpdateInfo-parameter</span><br>
 <code>pUpdateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkVideoSessionParametersUpdateInfoKHR">VkVideoSessionParametersUpdateInfoKHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_TOO_MANY_OBJECTS</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoSessionParametersUpdateInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoSessionParametersUpdateInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoSessionParametersUpdateInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">updateSequenceCount</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoSessionParametersUpdateInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>updateSequenceCount</code> is the sequence number of the object update
with parameters, starting from <code>1</code> and incrementing the value by one
with each subsequent update.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoSessionParametersUpdateInfoKHR-sType-sType" href="chap41.html#VUID-VkVideoSessionParametersUpdateInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoSessionParametersUpdateInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_SESSION_PARAMETERS_UPDATE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersUpdateInfoKHR-pNext-pNext" href="chap41.html#VUID-VkVideoSessionParametersUpdateInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoSessionParametersUpdateInfoKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap41.html#VkVideoDecodeH264SessionParametersAddInfoEXT">VkVideoDecodeH264SessionParametersAddInfoEXT</a>, <a href="chap41.html#VkVideoDecodeH265SessionParametersAddInfoEXT">VkVideoDecodeH265SessionParametersAddInfoEXT</a>, <a href="chap41.html#VkVideoEncodeH264SessionParametersAddInfoEXT">VkVideoEncodeH264SessionParametersAddInfoEXT</a>, or <a href="chap41.html#VkVideoEncodeH265SessionParametersAddInfoEXT">VkVideoEncodeH265SessionParametersAddInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersUpdateInfoKHR-sType-unique" href="chap41.html#VUID-VkVideoSessionParametersUpdateInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoSessionParametersUpdateInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="destroying-video-session-parameters"><a class="anchor" href="chap41.html#destroying-video-session-parameters"></a>41.4.7. Destroying Video Session Parameters</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy a video session parameters object, call:</p>
</div>
<div id="vkDestroyVideoSessionParametersKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="kt">void</span> <span class="nf">vkDestroyVideoSessionParametersKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkVideoSessionParametersKHR</span>                 <span class="n">videoSessionParameters</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the device the video session parameters object was
created with.</p>
</li>
<li>
<p><code>videoSessionParameters</code> is the video session parameters object to
be destroyed.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyVideoSessionParametersKHR-device-parameter" href="chap41.html#VUID-vkDestroyVideoSessionParametersKHR-device-parameter"></a> <span class="vuid">VUID-vkDestroyVideoSessionParametersKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyVideoSessionParametersKHR-videoSessionParameters-parameter" href="chap41.html#VUID-vkDestroyVideoSessionParametersKHR-videoSessionParameters-parameter"></a> <span class="vuid">VUID-vkDestroyVideoSessionParametersKHR-videoSessionParameters-parameter</span><br>
 If <code>videoSessionParameters</code> is not <a href="chap55.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>videoSessionParameters</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyVideoSessionParametersKHR-pAllocator-parameter" href="chap41.html#VUID-vkDestroyVideoSessionParametersKHR-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyVideoSessionParametersKHR-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>videoSessionParameters</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_begin_video_coding_scope"><a class="anchor" href="chap41.html#_begin_video_coding_scope"></a>41.4.8. Begin Video Coding Scope</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To begin a video coding scope, call:</p>
</div>
<div id="vkCmdBeginVideoCodingKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="kt">void</span> <span class="nf">vkCmdBeginVideoCodingKHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkVideoBeginCodingInfoKHR</span><span class="o">*</span>            <span class="n">pBeginInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer to be used when recording
commands for the video decode or encode operations.</p>
</li>
<li>
<p><code>pBeginInfo</code> is a pointer to a <a href="chap41.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>
structure.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After beginning a video coding scope, the session object specified by the
<code>videoSession</code> member of <a href="chap41.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a> is <em>bound</em> to
the command buffer, and the command buffer is ready to record video coding
operations.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-commandBuffer-parameter" href="chap41.html#VUID-vkCmdBeginVideoCodingKHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-pBeginInfo-parameter" href="chap41.html#VUID-vkCmdBeginVideoCodingKHR-pBeginInfo-parameter"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-pBeginInfo-parameter</span><br>
 <code>pBeginInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-commandBuffer-recording" href="chap41.html#VUID-vkCmdBeginVideoCodingKHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-commandBuffer-cmdpool" href="chap41.html#VUID-vkCmdBeginVideoCodingKHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support decode, or encode operations</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-renderpass" href="chap41.html#VUID-vkCmdBeginVideoCodingKHR-renderpass"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-videocoding" href="chap41.html#VUID-vkCmdBeginVideoCodingKHR-videocoding"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-bufferlevel" href="chap41.html#VUID-vkCmdBeginVideoCodingKHR-bufferlevel"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap41.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decode<br>
Encode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action<br>
State</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoBeginCodingInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoBeginCodingInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                       <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                           <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoBeginCodingFlagsKHR</span>            <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkVideoSessionKHR</span>                     <span class="n">videoSession</span><span class="p">;</span>
    <span class="n">VkVideoSessionParametersKHR</span>           <span class="n">videoSessionParameters</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                              <span class="n">referenceSlotCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoReferenceSlotInfoKHR</span><span class="o">*</span>    <span class="n">pReferenceSlots</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoBeginCodingInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
<li>
<p><code>videoSession</code> is the video session object to be bound for the
processing of the video commands.</p>
</li>
<li>
<p><code>videoSessionParameters</code> is <a href="chap55.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a> or a handle of a
<a href="chap41.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object to be used for the processing
of the video commands.
If <a href="chap55.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, then no video session parameters apply to this
command buffer context.</p>
</li>
<li>
<p><code>referenceSlotCount</code> is the number of reference slot entries
provided in <code>pReferenceSlots</code>.</p>
</li>
<li>
<p><code>pReferenceSlots</code> is a pointer to an array of
<a href="chap41.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structures specifying reference slots,
used within the video command context between this
<a href="chap41.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command and the
<a href="chap41.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> command that follows.
Each reference slot provides a slot index and the
<a href="chap41.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> specifying the reference picture
resource bound to this slot index.
A slot index <strong class="purple">must</strong> not appear more than once in <code>pReferenceSlots</code> in
a given command.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-referenceSlotCount-04856" href="chap41.html#VUID-VkVideoBeginCodingInfoKHR-referenceSlotCount-04856"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-referenceSlotCount-04856</span><br>

<a href="chap41.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>::<code>referenceSlotCount</code> <strong class="purple">must</strong> not
exceed the value specified in
<a href="chap41.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>::<code>maxDpbSlots</code> when creating the
video session object that is being provided in <code>videoSession</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-04857" href="chap41.html#VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-04857"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-04857</span><br>

If <code>videoSessionParameters</code> is not <a href="chap55.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, it <strong class="purple">must</strong>
have been created using <code>videoSession</code> as a parent object</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-sType-sType" href="chap41.html#VUID-VkVideoBeginCodingInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_BEGIN_CODING_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-pNext-pNext" href="chap41.html#VUID-VkVideoBeginCodingInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-flags-zerobitmask" href="chap41.html#VUID-VkVideoBeginCodingInfoKHR-flags-zerobitmask"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-flags-zerobitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-videoSession-parameter" href="chap41.html#VUID-VkVideoBeginCodingInfoKHR-videoSession-parameter"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-videoSession-parameter</span><br>
 <code>videoSession</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoSessionKHR">VkVideoSessionKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-parameter" href="chap41.html#VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-parameter"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-parameter</span><br>
 If <code>videoSessionParameters</code> is not <a href="chap55.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>videoSessionParameters</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-pReferenceSlots-parameter" href="chap41.html#VUID-VkVideoBeginCodingInfoKHR-pReferenceSlots-parameter"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-pReferenceSlots-parameter</span><br>
 If <code>referenceSlotCount</code> is not <code>0</code>, <code>pReferenceSlots</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>referenceSlotCount</code> valid <a href="chap41.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structures</p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-parent" href="chap41.html#VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-parent"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-parent</span><br>
 If <code>videoSessionParameters</code> is a valid handle, it <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>videoSession</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-commonparent" href="chap41.html#VUID-VkVideoBeginCodingInfoKHR-commonparent"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-commonparent</span><br>
 Both of <code>videoSession</code>, and <code>videoSessionParameters</code> that are valid handles of non-ignored parameters <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoBeginCodingFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoBeginCodingFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoBeginCodingFlagsKHR</code> is a bitmask type for setting a mask, but
is currently reserved for future use.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoReferenceSlotInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoReferenceSlotInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                         <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                             <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">int32_t</span>                                 <span class="n">slotIndex</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoPictureResourceInfoKHR</span><span class="o">*</span>    <span class="n">pPictureResource</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoReferenceSlotInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>slotIndex</code> is the unique reference slot index used for the encode
or decode operation.</p>
</li>
<li>
<p><code>pPictureResource</code> is a pointer to a
<a href="chap41.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> structure describing the picture
resource bound to this slot index.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoReferenceSlotInfoKHR-sType-sType" href="chap41.html#VUID-VkVideoReferenceSlotInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoReferenceSlotInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_REFERENCE_SLOT_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoReferenceSlotInfoKHR-pNext-pNext" href="chap41.html#VUID-VkVideoReferenceSlotInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoReferenceSlotInfoKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap41.html#VkVideoDecodeH264DpbSlotInfoEXT">VkVideoDecodeH264DpbSlotInfoEXT</a> or <a href="chap41.html#VkVideoDecodeH265DpbSlotInfoEXT">VkVideoDecodeH265DpbSlotInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkVideoReferenceSlotInfoKHR-sType-unique" href="chap41.html#VUID-VkVideoReferenceSlotInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoReferenceSlotInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkVideoReferenceSlotInfoKHR-pPictureResource-parameter" href="chap41.html#VUID-VkVideoReferenceSlotInfoKHR-pPictureResource-parameter"></a> <span class="vuid">VUID-VkVideoReferenceSlotInfoKHR-pPictureResource-parameter</span><br>
 If <code>pPictureResource</code> is not <code>NULL</code>, <code>pPictureResource</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoPictureResourceInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoPictureResourceInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkOffset2D</span>         <span class="n">codedOffset</span><span class="p">;</span>
    <span class="n">VkExtent2D</span>         <span class="n">codedExtent</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">baseArrayLayer</span><span class="p">;</span>
    <span class="n">VkImageView</span>        <span class="n">imageViewBinding</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoPictureResourceInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>codedOffset</code> is the offset to be used for the picture resource.</p>
</li>
<li>
<p><code>codedExtent</code> is the extent to be used for the picture resource.</p>
</li>
<li>
<p><code>baseArrayLayer</code> is the first array layer to be accessed for the
Decode or Encode Operations.</p>
</li>
<li>
<p><code>imageViewBinding</code> is a <a href="chap12.html#VkImageView">VkImageView</a> image view representing
this picture resource.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoPictureResourceInfoKHR-sType-sType" href="chap41.html#VUID-VkVideoPictureResourceInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoPictureResourceInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_PICTURE_RESOURCE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoPictureResourceInfoKHR-pNext-pNext" href="chap41.html#VUID-VkVideoPictureResourceInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoPictureResourceInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoPictureResourceInfoKHR-imageViewBinding-parameter" href="chap41.html#VUID-VkVideoPictureResourceInfoKHR-imageViewBinding-parameter"></a> <span class="vuid">VUID-VkVideoPictureResourceInfoKHR-imageViewBinding-parameter</span><br>
 <code>imageViewBinding</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageView">VkImageView</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_end_video_coding_scope"><a class="anchor" href="chap41.html#_end_video_coding_scope"></a>41.4.9. End Video Coding Scope</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To end a video coding scope, call:</p>
</div>
<div id="vkCmdEndVideoCodingKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="kt">void</span> <span class="nf">vkCmdEndVideoCodingKHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkVideoEndCodingInfoKHR</span><span class="o">*</span>              <span class="n">pEndCodingInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer to be filled by this function.</p>
</li>
<li>
<p><code>pEndCodingInfo</code> is a pointer to a <a href="chap41.html#VkVideoEndCodingInfoKHR">VkVideoEndCodingInfoKHR</a>
structure.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After ending a video coding scope, the session object previously bound by
the corresponding <a href="chap41.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command is <em>unbound</em>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdEndVideoCodingKHR-commandBuffer-parameter" href="chap41.html#VUID-vkCmdEndVideoCodingKHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdEndVideoCodingKHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdEndVideoCodingKHR-pEndCodingInfo-parameter" href="chap41.html#VUID-vkCmdEndVideoCodingKHR-pEndCodingInfo-parameter"></a> <span class="vuid">VUID-vkCmdEndVideoCodingKHR-pEndCodingInfo-parameter</span><br>
 <code>pEndCodingInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkVideoEndCodingInfoKHR">VkVideoEndCodingInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdEndVideoCodingKHR-commandBuffer-recording" href="chap41.html#VUID-vkCmdEndVideoCodingKHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdEndVideoCodingKHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdEndVideoCodingKHR-commandBuffer-cmdpool" href="chap41.html#VUID-vkCmdEndVideoCodingKHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdEndVideoCodingKHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support decode, or encode operations</p>
</li>
<li>
<p><a id="VUID-vkCmdEndVideoCodingKHR-renderpass" href="chap41.html#VUID-vkCmdEndVideoCodingKHR-renderpass"></a> <span class="vuid">VUID-vkCmdEndVideoCodingKHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdEndVideoCodingKHR-videocoding" href="chap41.html#VUID-vkCmdEndVideoCodingKHR-videocoding"></a> <span class="vuid">VUID-vkCmdEndVideoCodingKHR-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called inside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdEndVideoCodingKHR-bufferlevel" href="chap41.html#VUID-vkCmdEndVideoCodingKHR-bufferlevel"></a> <span class="vuid">VUID-vkCmdEndVideoCodingKHR-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap41.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decode<br>
Encode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action<br>
State</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoEndCodingInfoKHR">VkVideoEndCodingInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoEndCodingInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEndCodingInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                 <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoEndCodingFlagsKHR</span>    <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEndCodingInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEndCodingInfoKHR-sType-sType" href="chap41.html#VUID-VkVideoEndCodingInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoEndCodingInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_END_CODING_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEndCodingInfoKHR-pNext-pNext" href="chap41.html#VUID-VkVideoEndCodingInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoEndCodingInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEndCodingInfoKHR-flags-zerobitmask" href="chap41.html#VUID-VkVideoEndCodingInfoKHR-flags-zerobitmask"></a> <span class="vuid">VUID-VkVideoEndCodingInfoKHR-flags-zerobitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEndCodingFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEndCodingFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEndCodingFlagsKHR</code> is a bitmask type for setting a mask, but is
currently reserved for future use.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="video-session-control"><a class="anchor" href="chap41.html#video-session-control"></a>41.4.10. Video Session Control</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To apply dynamic controls to the currently bound video session object, call:</p>
</div>
<div id="vkCmdControlVideoCodingKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="kt">void</span> <span class="nf">vkCmdControlVideoCodingKHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkVideoCodingControlInfoKHR</span><span class="o">*</span>          <span class="n">pCodingControlInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer to be filled by this function.</p>
</li>
<li>
<p><code>pCodingControlInfo</code> is a pointer to a
<a href="chap41.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a> structure.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdControlVideoCodingKHR-commandBuffer-parameter" href="chap41.html#VUID-vkCmdControlVideoCodingKHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdControlVideoCodingKHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdControlVideoCodingKHR-pCodingControlInfo-parameter" href="chap41.html#VUID-vkCmdControlVideoCodingKHR-pCodingControlInfo-parameter"></a> <span class="vuid">VUID-vkCmdControlVideoCodingKHR-pCodingControlInfo-parameter</span><br>
 <code>pCodingControlInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdControlVideoCodingKHR-commandBuffer-recording" href="chap41.html#VUID-vkCmdControlVideoCodingKHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdControlVideoCodingKHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdControlVideoCodingKHR-commandBuffer-cmdpool" href="chap41.html#VUID-vkCmdControlVideoCodingKHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdControlVideoCodingKHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support decode, or encode operations</p>
</li>
<li>
<p><a id="VUID-vkCmdControlVideoCodingKHR-renderpass" href="chap41.html#VUID-vkCmdControlVideoCodingKHR-renderpass"></a> <span class="vuid">VUID-vkCmdControlVideoCodingKHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdControlVideoCodingKHR-videocoding" href="chap41.html#VUID-vkCmdControlVideoCodingKHR-videocoding"></a> <span class="vuid">VUID-vkCmdControlVideoCodingKHR-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called inside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdControlVideoCodingKHR-bufferlevel" href="chap41.html#VUID-vkCmdControlVideoCodingKHR-bufferlevel"></a> <span class="vuid">VUID-vkCmdControlVideoCodingKHR-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap41.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decode<br>
Encode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The control parameters provided in this call are applied to the video
session at the time the command executes on the device and are in effect
until a subsequent <code>vkCmdControlVideoCodingKHR</code> command changes the
corresponding control parameters.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoCodingControlInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoCodingControlInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                 <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                     <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoCodingControlFlagsKHR</span>    <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoCodingControlInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap41.html#VkVideoCodingControlFlagsKHR">VkVideoCodingControlFlagsKHR</a>
specifying control flags.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A newly created video session <strong class="purple">must</strong> be reset before use for video decode or
encode operations by including <code>VK_VIDEO_CODING_CONTROL_RESET_BIT_KHR</code>
in <code>flags</code>.
The reset operation returns all session DPB slots to the unused state (see
<a href="chap41.html#video-session-dpb-slot-states">DPB Slot States</a>).</p>
</div>
<div class="paragraph">
<p>For encode sessions, the reset operation returns rate control configuration
to implementation default settings.</p>
</div>
<div class="paragraph">
<p>After decode or encode operations are performed on a session, the reset
operation <strong class="purple">may</strong> be used to return the video session object to the same
<em>initial</em> state as after the reset of a newly created video session.
This <strong class="purple">may</strong> be used when different video sequences are processed with the same
video session object.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-flags-07016" href="chap41.html#VUID-VkVideoCodingControlInfoKHR-flags-07016"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-flags-07016</span><br>

<code>flags</code> <strong class="purple">must</strong> include at least one bit</p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-flags-07017" href="chap41.html#VUID-VkVideoCodingControlInfoKHR-flags-07017"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-flags-07017</span><br>

If the bound video session object is in <em>uninitialized</em> state, then
<code>flags</code> <strong class="purple">must</strong> include <code>VK_VIDEO_CODING_CONTROL_RESET_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-flags-07018" href="chap41.html#VUID-VkVideoCodingControlInfoKHR-flags-07018"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-flags-07018</span><br>

If <code>flags</code> includes
<code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_BIT_KHR</code>, then the
<code>pNext</code> chain <strong class="purple">must</strong> include a valid
<a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-flags-07019" href="chap41.html#VUID-VkVideoCodingControlInfoKHR-flags-07019"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-flags-07019</span><br>

If <code>flags</code> includes
<code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_LAYER_BIT_KHR</code>, then
the <code>pNext</code> chain <strong class="purple">must</strong> include a valid
<a href="chap41.html#VkVideoEncodeRateControlLayerInfoKHR">VkVideoEncodeRateControlLayerInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-flags-07020" href="chap41.html#VUID-VkVideoCodingControlInfoKHR-flags-07020"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-flags-07020</span><br>

If <code>flags</code> includes
<code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_BIT_KHR</code>, then it <strong class="purple">must</strong>
not also include
<code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_LAYER_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-flags-07021" href="chap41.html#VUID-VkVideoCodingControlInfoKHR-flags-07021"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-flags-07021</span><br>

If <code>flags</code> includes
<code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_BIT_KHR</code>, the
<code>rateControlMode</code> member of <a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>
included in the <code>pNext</code> chain is not
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</code>, and the bound
video session was created with
<a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>::<code>videoCodecOperation</code> set to
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code>, then the <code>pNext</code>
chain <strong class="purple">must</strong> include a <a href="chap41.html#VkVideoEncodeH264RateControlInfoEXT">VkVideoEncodeH264RateControlInfoEXT</a>
structure</p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-pNext-07022" href="chap41.html#VUID-VkVideoCodingControlInfoKHR-pNext-07022"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-pNext-07022</span><br>

If the <code>pNext</code> chain includes a
<a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>, and
<a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>::<code>layerCount</code> is greater than
<code>1</code>, then
<a href="chap41.html#VkVideoEncodeH264RateControlInfoEXT">VkVideoEncodeH264RateControlInfoEXT</a>::<code>temporalLayerCount</code>
<strong class="purple">must</strong> be equal to <code>layerCount</code></p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-flags-07023" href="chap41.html#VUID-VkVideoCodingControlInfoKHR-flags-07023"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-flags-07023</span><br>

If <code>flags</code> includes
<code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_LAYER_BIT_KHR</code> and the
bound video session was created with
<a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>::<code>videoCodecOperation</code> set to
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code>, then the <code>pNext</code>
chain <strong class="purple">must</strong> include a <a href="chap41.html#VkVideoEncodeH264RateControlLayerInfoEXT">VkVideoEncodeH264RateControlLayerInfoEXT</a>
structure</p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-flags-07024" href="chap41.html#VUID-VkVideoCodingControlInfoKHR-flags-07024"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-flags-07024</span><br>

If <code>flags</code> includes
<code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_BIT_KHR</code>, the
<code>rateControlMode</code> member of <a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>
included in the <code>pNext</code> chain is not
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</code>, and the bound
video session was created with
<a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>::<code>videoCodecOperation</code> set to
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H265_BIT_EXT</code>, then the <code>pNext</code>
chain <strong class="purple">must</strong> include a <a href="chap41.html#VkVideoEncodeH265RateControlInfoEXT">VkVideoEncodeH265RateControlInfoEXT</a>
structure</p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-pNext-07025" href="chap41.html#VUID-VkVideoCodingControlInfoKHR-pNext-07025"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-pNext-07025</span><br>

If the <code>pNext</code> chain includes a
<a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>, and
<a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>::<code>layerCount</code> is greater than
<code>1</code>, then <a href="chap41.html#VkVideoEncodeH265RateControlInfoEXT">VkVideoEncodeH265RateControlInfoEXT</a>::<code>subLayerCount</code>
<strong class="purple">must</strong> be equal to <code>layerCount</code></p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-flags-07026" href="chap41.html#VUID-VkVideoCodingControlInfoKHR-flags-07026"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-flags-07026</span><br>

If <code>flags</code> includes
<code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_LAYER_BIT_KHR</code> and the
bound video session was created with
<a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>::<code>videoCodecOperation</code> set to
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H265_BIT_EXT</code>, then the <code>pNext</code>
chain <strong class="purple">must</strong> include a <a href="chap41.html#VkVideoEncodeH265RateControlLayerInfoEXT">VkVideoEncodeH265RateControlLayerInfoEXT</a>
structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-sType-sType" href="chap41.html#VUID-VkVideoCodingControlInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_CODING_CONTROL_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-pNext-pNext" href="chap41.html#VUID-VkVideoCodingControlInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap41.html#VkVideoEncodeH264RateControlInfoEXT">VkVideoEncodeH264RateControlInfoEXT</a>, <a href="chap41.html#VkVideoEncodeH264RateControlLayerInfoEXT">VkVideoEncodeH264RateControlLayerInfoEXT</a>, <a href="chap41.html#VkVideoEncodeH265RateControlInfoEXT">VkVideoEncodeH265RateControlInfoEXT</a>, <a href="chap41.html#VkVideoEncodeH265RateControlLayerInfoEXT">VkVideoEncodeH265RateControlLayerInfoEXT</a>, <a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>, or <a href="chap41.html#VkVideoEncodeRateControlLayerInfoKHR">VkVideoEncodeRateControlLayerInfoKHR</a></p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-sType-unique" href="chap41.html#VUID-VkVideoCodingControlInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-flags-parameter" href="chap41.html#VUID-VkVideoCodingControlInfoKHR-flags-parameter"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap41.html#VkVideoCodingControlFlagBitsKHR">VkVideoCodingControlFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-flags-requiredbitmask" href="chap41.html#VUID-VkVideoCodingControlInfoKHR-flags-requiredbitmask"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-flags-requiredbitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoCodingControlFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoCodingControlFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap41.html#VkVideoCodingControlFlagsKHR">VkVideoCodingControlFlagsKHR</a> is a bitmask type for setting a mask of
zero or more <a href="chap41.html#VkVideoCodingControlFlagBitsKHR">VkVideoCodingControlFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in <a href="chap41.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a>::<code>flags</code>,
specifying the video coding control parameters to be modified, are:</p>
</div>
<div id="VkVideoCodingControlFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoCodingControlFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_CODING_CONTROL_RESET_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
<span class="cp">#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_KHR_video_encode_queue</span>
    <span class="n">VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
<span class="cp">#endif
#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_KHR_video_encode_queue</span>
    <span class="n">VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_LAYER_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
<span class="cp">#endif
</span><span class="p">}</span> <span class="n">VkVideoCodingControlFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_CODING_CONTROL_RESET_BIT_KHR</code> indicates a request for the
bound video session to be reset before other coding control parameters
are applied.</p>
</li>
<li>
<p><code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_BIT_KHR</code> indicates that
the coding control parameters include video encode rate control
parameters (see <a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>).</p>
</li>
<li>
<p><code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_LAYER_BIT_KHR</code>
indicates that the coding control parameters include video encode rate
control layer parameters (see
<a href="chap41.html#VkVideoEncodeRateControlLayerInfoKHR">VkVideoEncodeRateControlLayerInfoKHR</a>).</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="video-decode-operations"><a class="anchor" href="chap41.html#video-decode-operations"></a>41.5. Video Decode Operations</h3>
<div class="paragraph">
<p>Before the application can start recording Vulkan command buffers for the
Video Decode Operations, it <strong class="purple">must</strong> do the following, beforehand:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that the implementation can decode the Video Content by querying
the supported codec operations and profiles using
<a href="chap5.html#vkGetPhysicalDeviceQueueFamilyProperties2">vkGetPhysicalDeviceQueueFamilyProperties2</a>.</p>
</li>
<li>
<p>By using <a href="chap41.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> and providing
one or more video profiles, choose the Vulkan formats supported by the
implementation.
The formats for <a href="chap41.html#decoded-output-picture">output</a> and
<a href="chap41.html#reference-picture">reference</a> pictures <strong class="purple">must</strong> be queried and chosen
separately.
Refer to the section on
<a href="chap41.html#supported-video-input-output-dpb-formats-enumeration">enumeration of
supported video formats</a>.</p>
</li>
<li>
<p>Before creating an image to be used as a video picture resource, obtain
the supported image creation parameters by querying with
<a href="chap46.html#vkGetPhysicalDeviceFormatProperties2">vkGetPhysicalDeviceFormatProperties2</a> and
<a href="chap47.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a> using one of the
reported formats and adding <a href="chap41.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a> to the
<code>pNext</code> chain of <a href="chap46.html#VkFormatProperties2">VkFormatProperties2</a>.
When querying the parameters with
<a href="chap47.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a> for images targeting
decoded <a href="chap41.html#decoded-output-picture">output</a> and
<a href="chap41.html#reference-picture">reference (DPB)</a> pictures, the
<a href="chap47.html#VkPhysicalDeviceImageFormatInfo2">VkPhysicalDeviceImageFormatInfo2</a>::<code>usage</code> field should contain
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code> and
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code>, respectively.</p>
</li>
<li>
<p>Create none, some, or all of the required <a href="chap12.html#VkImage">images</a> for the
<a href="chap41.html#decoded-output-picture">decoded output</a> and
<a href="chap41.html#reference-picture">reference</a> pictures.
More Video Picture Resources <strong class="purple">can</strong> be created at some later point if
needed while processing the decoded content.
Also, if the decoded picture size is expected to change, the images <strong class="purple">can</strong>
be created based on the maximum decoded content size required.</p>
</li>
<li>
<p>Create the <a href="chap41.html#video-session">video session</a> to be used for video decode
operations.
Before creating the Decode Video Session, the decode capabilities
<strong class="purple">should</strong> be queried with <a href="chap41.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> to
obtain the limits of the parameters allowed by the implementation for a
particular codec profile.</p>
</li>
<li>
<p>Bind memory resources with the decode video session by calling
<a href="chap41.html#vkBindVideoSessionMemoryKHR">vkBindVideoSessionMemoryKHR</a>.
The video session <strong class="purple">cannot</strong> be used until memory resources are allocated
and bound to it.
In order to determine the required memory sizes and heap types of the
device memory allocations, <a href="chap41.html#vkGetVideoSessionMemoryRequirementsKHR">vkGetVideoSessionMemoryRequirementsKHR</a>
<strong class="purple">should</strong> be called.</p>
</li>
<li>
<p>Create one or more <a href="chap41.html#video-session-parameters-introduction">Session
Parameter objects</a> for use across command buffer recording operations,
if required by the codec extension in use.
These objects <strong class="purple">must</strong> be created against a <a href="chap41.html#video-session">video session</a>
with the parameters required by the codec.
Each <a href="chap41.html#video-session-parameters-introduction">Session Parameter object</a>
created is a child object of the associated <a href="chap41.html#video-session">Session
object</a> and <strong class="purple">cannot</strong> be bound in the command buffer with any other
<a href="chap41.html#video-session">Session Object</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The recording of Video Decode Commands against a Vulkan command buffer
consists of the following sequence:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="chap41.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> starts the recording of one or more Video
Decode operations in the command buffer.
For each Video Decode Command operation, a Video Session <strong class="purple">must</strong> be bound
to the command buffer within this command.
This command establishes a Vulkan Video Decode Context that consists of
the bound Video Session Object, Session Parameters Object, and the
required Video Picture Resources.
The established Video Decode Context is in effect until the
<a href="chap41.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> command is recorded.
If more Video Decode operations are to be required after the
<a href="chap41.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> command, another Video Decode Context <strong class="purple">can</strong>
be started with the <a href="chap41.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command.</p>
</li>
<li>
<p><a href="chap41.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a> specifies one or more compressed data buffers
to be decoded.
The <a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a> parameters, and the codec extension
structures chained to this, specify the details of the decode operation.</p>
</li>
<li>
<p><a href="chap41.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a> records operations against the decoded
data, decoding device, or the Video Session state.</p>
</li>
<li>
<p><a href="chap41.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> signals the end of the recording of the
Vulkan Video Decode Context, as established by
<a href="chap41.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In addition to the above, the following commands <strong class="purple">can</strong> be recorded between
<a href="chap41.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> and <a href="chap41.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Query operations</p>
</li>
<li>
<p>Global Memory Barriers</p>
</li>
<li>
<p>Buffer Memory Barriers</p>
</li>
<li>
<p>Image Memory Barriers (these <strong class="purple">must</strong> be used to transition the Video
Picture Resources to the proper
<code>VK_IMAGE_LAYOUT_VIDEO_DECODE_DPB_KHR</code> and
<code>VK_IMAGE_LAYOUT_VIDEO_DECODE_DST_KHR</code> layouts).</p>
</li>
<li>
<p>Pipeline Barriers</p>
</li>
<li>
<p>Events</p>
</li>
<li>
<p>Timestamps</p>
</li>
<li>
<p>Device Groups (device mask)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following Video Decode related commands <strong class="purple">must</strong> be recorded <strong>outside</strong> the
Vulkan Video Decode Context established with the
<a href="chap41.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> and <a href="chap41.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> commands:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sparse Memory Binding</p>
</li>
<li>
<p>Copy Commands</p>
</li>
<li>
<p>Clear Commands</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="video-picture-decode-modes"><a class="anchor" href="chap41.html#video-picture-decode-modes"></a>41.5.1. Video Picture Decode Modes</h4>
<div class="paragraph">
<p>There are a few ways that the <a href="chap41.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a> can be configured
for the Video Picture Decode Operations, based on:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if the <a href="chap41.html#decoded-output-picture">output resource</a> would need to be used
as <a href="chap41.html#reference-picture">Reference Picture</a> for subsequent decode
operations and;</p>
</li>
<li>
<p>if <a href="chap41.html#dpb-slot">DPB Slots</a> are required for use as
<a href="chap41.html#reference-picture">Reference Pictures</a> indexes.</p>
</li>
</ul>
</div>
<div id="video-picture-decode-no-reference-picture-no-slot-update" class="paragraph">
<p>The most basic Video Picture Decode operation with the
<a href="chap41.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a> command is to output the decoded pixel data
without using any DPB <a href="chap41.html#reference-picture">Reference Pictures</a> and without
updating any <a href="chap41.html#dpb-slot">DPB Slot’s</a> indexes.</p>
</div>
<div class="paragraph">
<p>In this case, the following <a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a> parameters <strong class="purple">must</strong> be
set:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot-&gt;pPictureResource-&gt;imageViewBinding</code>
<strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageView">VkImageView</a>.
This <a href="chap12.html#VkImageView">VkImageView</a> represents the <a href="chap41.html#decoded-output-picture">output
resource</a> where the decoded pixels will be populated after a successful
decode operation.</p>
</li>
<li>
<p><a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot-&gt;slotIndex</code> <strong class="purple">must</strong>
be an invalid <a href="chap41.html#dpb-slot">DPB Slot</a> index (-1) since the decoded picture
is not intended to be used as a reference picture with subsequent video
decode operations.</p>
</li>
<li>
<p>The value of the <a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>referenceSlotCount</code>
<strong class="purple">can</strong> be <code>0</code> and <a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code> <strong class="purple">can</strong>
be <code>NULL</code>.</p>
</li>
<li>
<p>If <a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code> is not <code>NULL</code>, it
<strong class="purple">can</strong> still have entries representing <a href="chap41.html#dpb-slot">DPB Slot</a> indexes with
a <a href="chap41.html#video-session-dpb-slot-states">Valid Picture Reference</a>.
The codec extension selects the actual use of the
<a href="chap41.html#reference-picture">Reference Pictures</a> by referring to a
<a href="chap41.html#dpb-slot">DPB Slot</a> index with a <a href="chap41.html#video-session-dpb-slot-states">Valid Picture Reference</a>.</p>
</li>
</ul>
</div>
<div id="video-picture-decode-with-references-no-slot-update" class="paragraph">
<p>Video Picture Decode operations with the <a href="chap41.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a> command,
requiring one or more <a href="chap41.html#reference-picture">Reference Pictures</a> for the
predictions of the values of samples for the <a href="chap41.html#decoded-output-picture">decoded output picture</a> would require <a href="chap41.html#dpb-slot">DPB Slots</a> with
<a href="chap41.html#video-session-dpb-slot-states">Valid Picture Reference</a>.</p>
</div>
<div class="paragraph">
<p>In this case, the following <a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a> parameters <strong class="purple">must</strong> be
set:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot-&gt;pPictureResource-&gt;imageViewBinding</code>
<strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageView">VkImageView</a>.
This <a href="chap12.html#VkImageView">VkImageView</a> represents the <a href="chap41.html#decoded-output-picture">output
resource</a> where the decoded pixels will be populated after a successful
decode operation.</p>
</li>
<li>
<p><a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot-&gt;slotIndex</code> <strong class="purple">must</strong>
be an invalid <a href="chap41.html#dpb-slot">DPB Slot</a> index (-1) since the decoded picture
is not intended to be used as a reference picture with subsequent video
decode operations.</p>
</li>
<li>
<p>The value of the <a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>referenceSlotCount</code>
<strong class="purple">must</strong> not be <code>0</code> and <a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code>
should represent at least the number of the reference slots required for
the decode operation.
The codec extension selects the actual use of the
<a href="chap41.html#reference-picture">Reference Pictures</a> by referring to a
<a href="chap41.html#dpb-slot">DPB Slot</a> index with a <a href="chap41.html#video-session-dpb-slot-states">Valid Picture Reference</a>.
If the implementation does not use an opaque DPB, each <a href="chap41.html#dpb-slot">DPB
slot</a> representing a <a href="chap41.html#reference-picture">reference picture</a> <strong class="purple">must</strong>
refer to a valid <a href="chap12.html#VkImageView">image view</a>.
The <a href="chap12.html#VkImageView">image views</a> <strong class="purple">must</strong> represent the same
<a href="chap12.html#resources-images">image resources</a> that were used to create the
<a href="chap41.html#reference-picture">reference picture</a> for the corresponding
<a href="chap41.html#dpb-slot">DPB Slot</a> index.</p>
</li>
<li>
<p><a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code> <strong class="purple">can</strong> still have
entries representing <a href="chap41.html#dpb-slot">DPB Slot</a> indexes with a
<a href="chap41.html#video-session-dpb-slot-states">Valid Picture Reference</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After the <a href="chap41.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a> operation is completed successfully, the
<a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot-&gt;pPictureResource-&gt;imageViewBinding</code>
pixel data will be updated with the decoded content.
The operation will not update any <a href="chap41.html#dpb-slot">DPB Slot</a> with
<a href="chap41.html#reference-picture">Reference Pictures</a> data.
However, any <a href="chap41.html#dpb-slot">DPB Slot</a> activation, invalidation, or deactivation
operations requested via <a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code>
are still going to be performed.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="32 80 690 400" height="400" width="690" xml:space="preserve" id="svg2" version="1.1"><metadata id="metadata8"><rdf:rdf><cc:work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc:type><dc:title></dc:title></cc:work></rdf:rdf></metadata><defs id="defs6"><linearGradient id="linearGradient14225"><stop id="stop14227" offset="0" style="stop-color:#000000;stop-opacity:1;"></stop><stop id="stop14229" offset="1" style="stop-color:#000000;stop-opacity:0;"></stop></linearGradient><marker orient="auto" refY="0" refX="0" id="marker10521" style="overflow:visible"><path id="path10523" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.2,0,0,-0.2,-1.2,0)"></path></marker><marker style="overflow:visible" id="marker10431" refX="0" refY="0" orient="auto"><path transform="matrix(-0.2,0,0,-0.2,-1.2,0)" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" id="path10433"></path></marker><marker orient="auto" refY="0" refX="0" id="marker9980" style="overflow:visible"><path id="path9982" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.2,0,0,-0.2,-1.2,0)"></path></marker><marker style="overflow:visible" id="marker9848" refX="0" refY="0" orient="auto"><path transform="matrix(-0.2,0,0,-0.2,-1.2,0)" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" id="path9850"></path></marker><marker orient="auto" refY="0" refX="0" id="marker9520" style="overflow:visible"><path id="path9522" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.2,0,0,-0.2,-1.2,0)"></path></marker><marker style="overflow:visible" id="marker9422" refX="0" refY="0" orient="auto"><path transform="matrix(-0.2,0,0,-0.2,-1.2,0)" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" id="path9424"></path></marker><marker style="overflow:visible" id="marker9412" refX="0" refY="0" orient="auto"><path transform="matrix(-0.2,0,0,-0.2,-1.2,0)" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" id="path9414"></path></marker><marker orient="auto" refY="0" refX="0" id="Arrow1Send" style="overflow:visible"><path id="path8951" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.2,0,0,-0.2,-1.2,0)"></path></marker><clipPath id="clipPath404" clipPathUnits="userSpaceOnUse"><path style="clip-rule:evenodd" id="path402" d="M 1.4305e-5,0 960.00001,0 l 0,540 L 1.4305e-5,540 Z"></path></clipPath><linearGradient gradientTransform="translate(-50,-70.000014)" gradientUnits="userSpaceOnUse" y2="350" x2="592" y1="350" x1="532" id="linearGradient14233" xlink:href="#linearGradient14225"></linearGradient><marker orient="auto" refY="0" refX="0" id="marker9980-1" style="overflow:visible"><path id="path9982-1" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.2,0,0,-0.2,-1.2,0)"></path></marker></defs><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#b3b3b3;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect10661" width="520" height="160" x="42" y="199.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect10415" width="140" height="79.900002" x="572" y="100.1"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8500-7" width="30" height="110" x="332" y="229.99998"></rect><path id="path14627" d="m 562,145 0,5 10,-10 -10,-10 0,5 -250,0 0,10 z" style="fill:#cccccc;fill-rule:evenodd;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"></path><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect9622" width="120" height="100" x="192" y="90"></rect><path style="fill:#ffffff;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" d="m 312,140 -50,-50 0,30 -70,0 0,40 70,0 0,30 50,-50" id="path9624"></path><path id="path14625" d="m 72,230 0,-60 110,0 0,-5 10,10 -10,10 0,-5 -10,0 0,50 -10,0 0,-50 -50,0 0,50 -10,0 0,-50 -20,0 0,50 -10,0" style="fill:#cccccc;fill-rule:evenodd;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"></path><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8498" width="30" height="110" x="62" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8500" width="30" height="110" x="92" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8502" width="30" height="110" x="122" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8504" width="30" height="110" x="152" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8506" width="30" height="110" x="182" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8508" width="30" height="110" x="212" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8510" width="30" height="110" x="242" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8512" width="30" height="110" x="272" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8498-2" width="30" height="110" x="302" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8502-0" width="30" height="110" x="362" y="229.99998" ry="0"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8504-9" width="30" height="110" x="392" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8506-3" width="30" height="110" x="422" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8508-6" width="30" height="110" x="452" y="229.99998"></rect><path id="rect8510-0" d="m 480,227.99999 0,2 0,112 30,0 4,0 30,0 0,-114 -30,0 -4,0 -30,0 z m 4,4 26,0 0,106 -26,0 0,-106 z m 30,0 26,0 0,106 -26,0 0,-106 z" style="color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;baseline-shift:baseline;text-anchor:start;white-space:normal;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:url(#linearGradient14233);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></path><text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="77.007317" y="329.9996" id="text8569"><tspan id="tspan8571" x="76.907318" y="329.9996">0</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="106.87183" y="329.9996" id="text8577"><tspan id="tspan8579" x="106.77182" y="329.9996">1</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="137.20508" y="329.9996" id="text8581"><tspan id="tspan8583" x="137.10507" y="329.9996">2</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="167.03296" y="329.9996" id="text8585"><tspan id="tspan8587" x="166.93295" y="329.9996">3</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="197.05859" y="329.9996" id="text8589"><tspan id="tspan8591" x="196.95859" y="329.9996">4</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="227.08057" y="329.9996" id="text8593"><tspan id="tspan8595" x="226.98056" y="329.9996">5</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="256.95239" y="329.9996" id="text8597"><tspan id="tspan8599" x="256.85239" y="329.9996">6</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="287.0293" y="329.9996" id="text8601"><tspan id="tspan8603" x="286.92929" y="329.9996">7</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="317.00732" y="329.9996" id="text8605"><tspan id="tspan8607" x="316.90732" y="329.9996">8</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="347.05859" y="329.9996" id="text8609"><tspan id="tspan8611" x="346.95859" y="329.9996">9</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="376.67773" y="329.9996" id="text8613"><tspan id="tspan8615" x="376.57773" y="329.9996">.</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="406.87183" y="329.9996" id="text8617"><tspan id="tspan8619" x="406.77182" y="329.9996">.</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="436.93042" y="329.9996" id="text8621"><tspan id="tspan8623" x="436.83041" y="329.9996" style="letter-spacing:0px">.</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="466.78027" y="329.9996" id="text8625"><tspan id="tspan8627" x="466.6803" y="329.9996" style="letter-spacing:0px">.</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="496.60083" y="329.9996" id="text8629"><tspan id="tspan8631" x="496.50085" y="329.9996" style="letter-spacing:0px">.</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="526.83521" y="329.9996" id="text8633"><tspan id="tspan8635" x="526.73523" y="329.9996" style="letter-spacing:0px">.</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="247.57275" y="219.99998" id="text8871"><tspan id="tspan8873" x="247.47275" y="219.99998" style="font-size:17.5px;letter-spacing:0px">Dpb slots</tspan></text>
<text id="text14174-3" y="270" x="167.56763" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:start;letter-spacing:-0.2px;word-spacing:0px;text-anchor:start;fill:#000000;fill-opacity:1;stroke:#b3b3b3;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;" xml:space="preserve"><tspan style="text-align:center;text-anchor:middle;stroke:#b3b3b3;stroke-width:4;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;stroke-linejoin:round;" y="270" x="167.46762" id="tspan14176-4">Valid picture</tspan><tspan style="text-align:center;text-anchor:middle;stroke:#b3b3b3;stroke-width:4;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;stroke-linejoin:round;" id="tspan14178-0" y="301.25" x="167.46762">references</tspan></text>
<text id="text14174" y="270" x="167.56763" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:start;letter-spacing:-0.2px;word-spacing:0px;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="text-align:center;text-anchor:middle" y="270" x="167.46762" id="tspan14176">Valid picture</tspan><tspan style="text-align:center;text-anchor:middle" id="tspan14178" y="301.25" x="167.46762">references</tspan></text>
<text id="text14180-3" y="269.7695" x="406.57883" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:#ffffff;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;" xml:space="preserve"><tspan y="269.7695" x="406.47882" id="tspan14182-9">Unused picture</tspan><tspan id="tspan14184-1" y="301.0195" x="406.47882">references</tspan></text>
<text id="text14180" y="269.7695" x="406.57886" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="269.7695" x="406.47885" id="tspan14182">Unused picture</tspan><tspan id="tspan14184" y="301.0195" x="406.47885">references</tspan></text>
<g id="g398" transform="matrix(1.3333333,0,0,-1.3333333,-212.33581,674.35391)"><g id="g400" clip-path="url(#clipPath404)"></g></g><text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="142" y="460" id="text8573"><tspan id="tspan8575" x="142" y="460"></tspan></text>
<rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8920" width="30" height="30" x="62" y="380"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8922" width="30" height="30" x="92" y="380"></rect><path style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9422)" d="m 77,379.99999 0,-32" id="path8926"></path><path style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#Arrow1Send)" d="m 107,379.99999 0,-32" id="path8928"></path><path style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9412)" d="m 137,379.99999 0,-10 30,0 0,-22" id="path8930"></path><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8924" width="30" height="30" x="122" y="380"></rect><text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="295.31128" y="401.5242" id="text9614"><tspan id="tspan9616" x="295.31128" y="401.5242" style="font-size:17.5px;letter-spacing:0px">VkVideoReferenceSlotsKHRs</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="247.53848" y="149.32007" id="text9626"><tspan id="tspan9628" x="247.43848" y="149.32007" style="letter-spacing:0px">Decode</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="222" y="260" id="text9968"><tspan id="tspan9970" x="222" y="260"></tspan></text>
<path style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9980)" d="m 192,434.99998 -115,0 0,-16" id="path9972"></path><text xml:space="preserve" style="color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:17.5px;line-height:125%;font-family:sans-serif;text-indent:0;text-align:center;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:0px;word-spacing:0px;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;baseline-shift:baseline;text-anchor:middle;white-space:normal;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" x="117.51691" y="452.32742" id="text10056"><tspan id="tspan10058" x="117.4169" y="452.32742" style="color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:17.5px;line-height:125%;font-family:sans-serif;text-indent:0;text-align:center;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:0px;word-spacing:0px;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;baseline-shift:baseline;text-anchor:middle;white-space:normal;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate">pReferenceSlots</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="519.72882" y="452.32742" id="text10411"><tspan id="tspan10413" x="519.62885" y="452.32742" style="font-size:17.5px;letter-spacing:0px">dstPictureResource</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="642.00842" y="131.32198" id="text10417"><tspan id="tspan10419" x="641.90845" y="131.32198" style="letter-spacing:0px">Decoded</tspan><tspan x="641.90845" y="162.57198" id="tspan10421" style="letter-spacing:0px">image</tspan></text>
<rect y="420" x="192" height="30" width="240" id="rect14235" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><text id="text14237" y="441.52405" x="312.18799" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="font-size:17.5px;text-align:center;text-anchor:middle" y="441.52405" x="312.08798" id="tspan14239">VkVideoDecodeInfoKHR</tspan></text>
<path id="path14623" d="m 432,435 210,0 0,-247" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker10521)"></path><path id="path14629" d="m 182,100 0,-5 10,10 -10,10 0,-5 -20,0 0,-10 z" style="fill:#cccccc;fill-rule:evenodd;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"></path><g id="g10096" transform="translate(-1.3165542,0)"><path id="path392" style="fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:none" d="m 39.766092,94.146902 c 0,-5.92 27.68666,-10.72 61.839998,-10.72 34.14666,0 61.84,4.8 61.84,10.72 l 0,42.879988 c 0,5.92 -27.69334,10.72 -61.84,10.72 -34.153338,0 -61.839998,-4.8 -61.839998,-10.72 z"></path><path id="path394" style="fill:none;stroke:#000000;stroke-width:1.27999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:8;stroke-dasharray:none;stroke-opacity:1" d="m 163.44609,94.146902 c 0,5.919998 -27.69334,10.719988 -61.84,10.719988 -34.153338,0 -61.839998,-4.79999 -61.839998,-10.719988"></path><path id="path396" style="fill:none;stroke:#000000;stroke-width:1.27999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:8;stroke-dasharray:none;stroke-opacity:1" d="m 39.766092,94.146902 c 0,-5.92 27.68666,-10.72 61.839998,-10.72 34.14666,0 61.84,4.8 61.84,10.72 l 0,42.879988 c 0,5.92 -27.69334,10.72 -61.84,10.72 -34.153338,0 -61.839998,-4.8 -61.839998,-10.72 z"></path><text id="text10060" y="130.51297" x="101.2219" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="130.51297" x="101.1219" id="tspan10062" style="letter-spacing:0px">Bitstream</tspan></text>
</g></svg>
</div>
<div class="title">Figure 32. Decoding a Frame to VkImageView without a slot update for a <strong>Reference Picture</strong></div>
</div>
<div class="sect4">
<h5 id="video-picture-decode-with-reference-picture-and-slot-update"><a class="anchor" href="chap41.html#video-picture-decode-with-reference-picture-and-slot-update"></a>Video Picture Decode with a <a href="chap41.html#reference-picture">Reference Picture</a> slot update and using optional <a href="chap41.html#reference-picture">Reference Pictures</a></h5>
<div class="paragraph">
<p>When it is known that the picture to be decoded will be used as a
<a href="chap41.html#reference-picture">reference picture</a> for subsequent decode operations,
one of the available <a href="chap41.html#dpb-slot">DPB Slots</a> needs to be selected for
<a href="chap41.html#video-session-activating-dpb-slot">activation and update</a> operations as
part of the <a href="chap41.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a> command.</p>
</div>
<div class="paragraph">
<p>Based on whether a decode operation
<a href="chap41.html#video-picture-decode-with-references-no-slot-update">with reference
pictures</a> or <a href="chap41.html#video-picture-decode-no-reference-picture-no-slot-update">without reference pictures</a> is required, the <a href="chap41.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a>
should be configured with parameters as described in the previous sections.
In addition, one of the available <a href="chap41.html#dpb-slot">DPB Slots</a> <strong class="purple">must</strong> be selected
by the application, activated with resources and then set-up for an update
with the decode operation.</p>
</div>
<div class="paragraph">
<p>In this case, the following <a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a> parameters <strong class="purple">must</strong> be
set:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot-&gt;pPictureResource-&gt;imageViewBinding</code>
<strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageView">VkImageView</a>.
This <a href="chap12.html#VkImageView">VkImageView</a> represents the <a href="chap41.html#decoded-output-picture">output
resource</a> where the decoded pixels will be populated after a successful
decode operation.
If the implementation does not use an opaque DPB, both the
<a href="chap41.html#decoded-output-picture">output</a> and <a href="chap41.html#reference-picture">reference
picture</a> resource coincide.</p>
</li>
<li>
<p><a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot-&gt;slotIndex</code> <strong class="purple">must</strong>
be a valid <a href="chap41.html#dpb-slot">DPB Slot</a> index selected by the application,
based on the currently available slots.</p>
</li>
<li>
<p><a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code> <strong class="purple">can</strong> still have
entries representing <a href="chap41.html#dpb-slot">DPB Slot</a> indexes with a
<a href="chap41.html#video-session-dpb-slot-states">Valid Picture Reference</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After the <a href="chap41.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a> operation has completed successfully,
the decoded content will be available in the resource provided for
<a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot-&gt;pPictureResource-&gt;imageViewBinding</code>.
In addition, this operation will update the selected <a href="chap41.html#dpb-slot">DPB Slot</a>
with <a href="chap41.html#reference-picture">Reference Pictures</a> data.
Any other <a href="chap41.html#dpb-slot">DPB Slot</a> activation,invalidation, or deactivation
operation requested via the
<a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code> are going to be performed
as well.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="svg2" xml:space="preserve" width="690" height="400" viewBox="32 80 690 400"><metadata id="metadata8"><rdf:rdf><cc:work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc:type><dc:title></dc:title></cc:work></rdf:rdf></metadata><defs id="defs6"><linearGradient id="linearGradient14225"><stop style="stop-color:#000000;stop-opacity:1;" offset="0" id="stop14227"></stop><stop style="stop-color:#000000;stop-opacity:0;" offset="1" id="stop14229"></stop></linearGradient><marker style="overflow:visible" id="marker10521" refX="0" refY="0" orient="auto"><path transform="matrix(-0.2,0,0,-0.2,-1.2,0)" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" id="path10523"></path></marker><marker orient="auto" refY="0" refX="0" id="marker10431" style="overflow:visible"><path id="path10433" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.2,0,0,-0.2,-1.2,0)"></path></marker><marker style="overflow:visible" id="marker9980" refX="0" refY="0" orient="auto"><path transform="matrix(-0.2,0,0,-0.2,-1.2,0)" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" id="path9982"></path></marker><marker orient="auto" refY="0" refX="0" id="marker9848" style="overflow:visible"><path id="path9850" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.2,0,0,-0.2,-1.2,0)"></path></marker><marker style="overflow:visible" id="marker9520" refX="0" refY="0" orient="auto"><path transform="matrix(-0.2,0,0,-0.2,-1.2,0)" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" id="path9522"></path></marker><marker orient="auto" refY="0" refX="0" id="marker9422" style="overflow:visible"><path id="path9424" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.2,0,0,-0.2,-1.2,0)"></path></marker><marker orient="auto" refY="0" refX="0" id="marker9412" style="overflow:visible"><path id="path9414" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.2,0,0,-0.2,-1.2,0)"></path></marker><marker style="overflow:visible" id="Arrow1Send" refX="0" refY="0" orient="auto"><path transform="matrix(-0.2,0,0,-0.2,-1.2,0)" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" id="path8951"></path></marker><clipPath clipPathUnits="userSpaceOnUse" id="clipPath404"><path d="M 1.4305e-5,0 960.00001,0 l 0,540 L 1.4305e-5,540 Z" id="path402" style="clip-rule:evenodd"></path></clipPath><linearGradient xlink:href="#linearGradient14225" id="linearGradient14233" x1="532" y1="350" x2="592" y2="350" gradientUnits="userSpaceOnUse" gradientTransform="translate(-50,-70.000014)"></linearGradient><marker style="overflow:visible" id="marker9980-1" refX="0" refY="0" orient="auto"><path transform="matrix(-0.2,0,0,-0.2,-1.2,0)" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" id="path9982-1"></path></marker></defs><rect y="199.99998" x="42" height="160" width="520" id="rect10661" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#b3b3b3;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="100.1" x="572" height="79.900002" width="140" id="rect10415" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="332" height="110" width="30" id="rect8500-7" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><path style="fill:#cccccc;fill-rule:evenodd;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 342,145 0,75 -5,0 10,10 10,-10 -5,0 0,-75 210,0 0,5 10,-10 -10,-10 0,5 -250,0 0,10 z" id="path14627"></path><rect y="90" x="192" height="100" width="120" id="rect9622" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><path id="path9624" d="m 312,140 -50,-50 0,30 -70,0 0,40 70,0 0,30 50,-50" style="fill:#ffffff;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"></path><path style="fill:#cccccc;fill-rule:evenodd;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 72,230 0,-60 110,0 0,-5 10,10 -10,10 0,-5 -10,0 0,50 -10,0 0,-50 -50,0 0,50 -10,0 0,-50 -20,0 0,50 -10,0" id="path14625"></path><rect y="229.99998" x="62" height="110" width="30" id="rect8498" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="92" height="110" width="30" id="rect8500" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="122" height="110" width="30" id="rect8502" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="152" height="110" width="30" id="rect8504" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="182" height="110" width="30" id="rect8506" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="212" height="110" width="30" id="rect8508" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="242" height="110" width="30" id="rect8510" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="272" height="110" width="30" id="rect8512" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="302" height="110" width="30" id="rect8498-2" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect ry="0" y="229.99998" x="362" height="110" width="30" id="rect8502-0" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="392" height="110" width="30" id="rect8504-9" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="422" height="110" width="30" id="rect8506-3" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="452" height="110" width="30" id="rect8508-6" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><path style="color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;baseline-shift:baseline;text-anchor:start;white-space:normal;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:url(#linearGradient14233);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" d="m 480,227.99999 0,2 0,112 30,0 4,0 30,0 0,-114 -30,0 -4,0 -30,0 z m 4,4 26,0 0,106 -26,0 0,-106 z m 30,0 26,0 0,106 -26,0 0,-106 z" id="rect8510-0"></path><text id="text8569" y="329.9996" x="77.007317" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="76.907318" id="tspan8571">0</tspan></text>
<text id="text8577" y="329.9996" x="106.87183" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="106.77182" id="tspan8579">1</tspan></text>
<text id="text8581" y="329.9996" x="137.20508" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="137.10507" id="tspan8583">2</tspan></text>
<text id="text8585" y="329.9996" x="167.03296" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="166.93295" id="tspan8587">3</tspan></text>
<text id="text8589" y="329.9996" x="197.05859" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="196.95859" id="tspan8591">4</tspan></text>
<text id="text8593" y="329.9996" x="227.08057" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="226.98056" id="tspan8595">5</tspan></text>
<text id="text8597" y="329.9996" x="256.95239" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="256.85239" id="tspan8599">6</tspan></text>
<text id="text8601" y="329.9996" x="287.0293" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="286.92929" id="tspan8603">7</tspan></text>
<text id="text8605" y="329.9996" x="317.00732" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="316.90732" id="tspan8607">8</tspan></text>
<text id="text8609" y="329.9996" x="347.05859" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="346.95859" id="tspan8611">9</tspan></text>
<text id="text8613" y="329.9996" x="376.67773" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="376.57773" id="tspan8615">.</tspan></text>
<text id="text8617" y="329.9996" x="406.87183" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="406.77182" id="tspan8619">.</tspan></text>
<text id="text8621" y="329.9996" x="436.93042" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="letter-spacing:0px" y="329.9996" x="436.83041" id="tspan8623">.</tspan></text>
<text id="text8625" y="329.9996" x="466.78027" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="letter-spacing:0px" y="329.9996" x="466.6803" id="tspan8627">.</tspan></text>
<text id="text8629" y="329.9996" x="496.60083" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="letter-spacing:0px" y="329.9996" x="496.50085" id="tspan8631">.</tspan></text>
<text id="text8633" y="329.9996" x="526.83521" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="letter-spacing:0px" y="329.9996" x="526.73523" id="tspan8635">.</tspan></text>
<text id="text8871" y="219.99998" x="247.57275" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="font-size:17.5px;letter-spacing:0px" y="219.99998" x="247.47275" id="tspan8873">Dpb slots</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:start;letter-spacing:-0.2px;word-spacing:0px;text-anchor:start;fill:#000000;fill-opacity:1;stroke:#b3b3b3;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;" x="167.56763" y="270" id="text14174-3"><tspan id="tspan14176-4" x="167.46762" y="270" style="text-align:center;text-anchor:middle;stroke:#b3b3b3;stroke-width:4;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;stroke-linejoin:round;">Valid picture</tspan><tspan x="167.46762" y="301.25" id="tspan14178-0" style="text-align:center;text-anchor:middle;stroke:#b3b3b3;stroke-width:4;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;stroke-linejoin:round;">references</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:start;letter-spacing:-0.2px;word-spacing:0px;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="167.56763" y="270" id="text14174"><tspan id="tspan14176" x="167.46762" y="270" style="text-align:center;text-anchor:middle">Valid picture</tspan><tspan x="167.46762" y="301.25" id="tspan14178" style="text-align:center;text-anchor:middle">references</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:#ffffff;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;" x="406.57883" y="269.7695" id="text14180-3"><tspan id="tspan14182-9" x="406.47882" y="269.7695">Unused picture</tspan><tspan x="406.47882" y="301.0195" id="tspan14184-1">references</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="406.57886" y="269.7695" id="text14180"><tspan id="tspan14182" x="406.47885" y="269.7695">Unused picture</tspan><tspan x="406.47885" y="301.0195" id="tspan14184">references</tspan></text>
<g transform="matrix(1.3333333,0,0,-1.3333333,-212.33581,674.35391)" id="g398"><g clip-path="url(#clipPath404)" id="g400"></g></g><text id="text8573" y="460" x="142" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="460" x="142" id="tspan8575"></tspan></text>
<rect y="380" x="62" height="30" width="30" id="rect8920" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="380" x="92" height="30" width="30" id="rect8922" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><path id="path8926" d="m 77,379.99999 0,-32" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9422)"></path><path id="path8928" d="m 107,379.99999 0,-32" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#Arrow1Send)"></path><path id="path8930" d="m 137,379.99999 0,-10 30,0 0,-22" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9412)"></path><rect y="380" x="122" height="30" width="30" id="rect8924" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="380" x="532.00012" height="30" width="30" id="rect9510" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><path id="path9512" d="m 547,379.99999 0,-10 -200,0 0,-22" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9520)"></path><text id="text9614" y="401.5242" x="295.31128" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="font-size:17.5px;letter-spacing:0px" y="401.5242" x="295.31128" id="tspan9616">VkVideoReferenceSlotsKHRs</tspan></text>
<text id="text9626" y="149.32007" x="247.53848" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="letter-spacing:0px" y="149.32007" x="247.43848" id="tspan9628">Decode</tspan></text>
<text id="text9964" y="388" x="486.00012" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="font-size:17.5px;letter-spacing:0px" y="388" x="485.90012" id="tspan9966">slotIndex</tspan></text>
<text id="text9968" y="260" x="222" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="260" x="222" id="tspan9970"></tspan></text>
<path id="path9972" d="m 192,434.99998 -115,0 0,-16" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9980)"></path><text id="text10056" y="452.80588" x="117.51691" style="color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:17.5px;line-height:125%;font-family:sans-serif;text-indent:0;text-align:center;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:0px;word-spacing:0px;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;baseline-shift:baseline;text-anchor:middle;white-space:normal;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" xml:space="preserve"><tspan style="color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:17.5px;line-height:125%;font-family:sans-serif;text-indent:0;text-align:center;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:0px;word-spacing:0px;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;baseline-shift:baseline;text-anchor:middle;white-space:normal;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" y="452.80588" x="117.4169" id="tspan10058">pReferenceSlots</tspan></text>
<text id="text10411" y="710.146" x="-323.39304" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve" transform="matrix(0,-1,1,0,0,0)"><tspan style="font-size:17.5px;letter-spacing:0px" y="710.146" x="-323.49304" id="tspan10413">dstPictureResource</tspan></text>
<text id="text10417" y="131.32198" x="642.00842" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="letter-spacing:0px" y="131.32198" x="641.90845" id="tspan10419">Decoded</tspan><tspan style="letter-spacing:0px" id="tspan10421" y="162.57198" x="641.90845">image</tspan></text>
<path id="path10513" d="m 562,395 30,0 0,-206" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:12, 4;stroke-dashoffset:0;stroke-opacity:1;marker-end:url(#marker10521)"></path><text id="text10657" y="583.05688" x="-289.40112" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve" transform="matrix(0,-1,1,0,0,0)"><tspan style="font-size:17.5px;letter-spacing:0px" y="583.05688" x="-289.5011" id="tspan10659">pPictureResource</tspan></text>
<text id="text10706" y="245.99998" x="606" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:start;letter-spacing:0px;word-spacing:0px;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="font-style:italic;font-size:15px;letter-spacing:0px" y="245.99998" x="606" id="tspan10708">Only if</tspan><tspan id="tspan10756" style="font-style:italic;font-size:15px;letter-spacing:0px" y="264.75" x="606">the same</tspan><tspan style="font-style:italic;font-size:15px;letter-spacing:0px" id="tspan10710" y="283.5" x="606">picture</tspan><tspan style="font-style:italic;font-size:15px;letter-spacing:0px" id="tspan10712" y="302.25" x="606">resource</tspan><tspan style="font-style:italic;font-size:15px;letter-spacing:0px" id="tspan10714" y="321" x="606">is used</tspan><tspan id="tspan10762" style="font-style:italic;font-size:15px;letter-spacing:0px" y="339.75" x="606">for the</tspan><tspan style="font-style:italic;font-size:15px;letter-spacing:0px" id="tspan10716" y="358.5" x="606">decode</tspan><tspan id="tspan10760" style="font-style:italic;font-size:15px;letter-spacing:0px" y="377.25" x="606">Dpb and</tspan><tspan style="font-style:italic;font-size:15px;letter-spacing:0px" id="tspan10718" y="396" x="606">output</tspan><tspan style="font-style:italic;font-size:15px;letter-spacing:0px" id="tspan10720" y="414.75" x="606">image</tspan></text>
<path id="path10722" d="m 592,210 20,19.99999" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:4,4;stroke-dashoffset:0"></path><rect ry="0" y="229.99998" x="602" height="192" width="79" id="rect10758" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:4,4;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect14235" width="240" height="30" x="192" y="420"></rect><text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="312.18799" y="441.52405" id="text14237"><tspan id="tspan14239" x="312.08798" y="441.52405" style="font-size:17.5px;text-align:center;text-anchor:middle">VkVideoDecodeInfoKHR</tspan></text>
<text id="text10056-1" y="452.80588" x="527.51691" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="font-size:17.5px;letter-spacing:0px" y="452.80588" x="527.41687" id="tspan10058-3">pSetupReferenceSlot</tspan></text>
<path id="path9972-0" d="m 432,434.99998 115,0 0,-16" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9980-1)"></path><path style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker10521)" d="m 312,450 0,20 380,0 0,-282" id="path14623"></path><path style="fill:#cccccc;fill-rule:evenodd;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 182,100 0,-5 10,10 -10,10 0,-5 -20,0 0,-10 z" id="path14629"></path><g transform="translate(-1.3165542,0)" id="g10096"><path d="m 39.766092,94.146902 c 0,-5.92 27.68666,-10.72 61.839998,-10.72 34.14666,0 61.84,4.8 61.84,10.72 l 0,42.879988 c 0,5.92 -27.69334,10.72 -61.84,10.72 -34.153338,0 -61.839998,-4.8 -61.839998,-10.72 z" style="fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:none" id="path392"></path><path d="m 163.44609,94.146902 c 0,5.919998 -27.69334,10.719988 -61.84,10.719988 -34.153338,0 -61.839998,-4.79999 -61.839998,-10.719988" style="fill:none;stroke:#000000;stroke-width:1.27999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:8;stroke-dasharray:none;stroke-opacity:1" id="path394"></path><path d="m 39.766092,94.146902 c 0,-5.92 27.68666,-10.72 61.839998,-10.72 34.14666,0 61.84,4.8 61.84,10.72 l 0,42.879988 c 0,5.92 -27.69334,10.72 -61.84,10.72 -34.153338,0 -61.839998,-4.8 -61.839998,-10.72 z" style="fill:none;stroke:#000000;stroke-width:1.27999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:8;stroke-dasharray:none;stroke-opacity:1" id="path396"></path><text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="101.2219" y="130.51297" id="text10060"><tspan style="letter-spacing:0px" id="tspan10062" x="101.1219" y="130.51297">Bitstream</tspan></text>
</g></svg>
</div>
<div class="title">Figure 33. Decoding a Frame to VkImageView with an update to a <a href="chap41.html#reference-picture">Reference Pictures</a> DPB Slot</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_capabilities"><a class="anchor" href="chap41.html#_capabilities"></a>41.5.2. Capabilities</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>When calling <a href="chap41.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> with
<code>pVideoProfile-&gt;videoCodecOperation</code> specified as one of the decode
operation bits, the <a href="chap41.html#VkVideoDecodeCapabilitiesKHR">VkVideoDecodeCapabilitiesKHR</a> structure <strong class="purple">must</strong> be
included in the <code>pNext</code> chain of the <a href="chap41.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>
structure to retrieve capabilities specific to video decoding.</p>
</div>
<div class="paragraph">
<p>The <code>VkVideoDecodeCapabilitiesKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoDecodeCapabilitiesKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeCapabilitiesKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                    <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                              <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoDecodeCapabilityFlagsKHR</span>    <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeCapabilitiesKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap41.html#VkVideoDecodeCapabilityFlagBitsKHR">VkVideoDecodeCapabilityFlagBitsKHR</a>
describing supported decoding features.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeCapabilitiesKHR-sType-sType" href="chap41.html#VUID-VkVideoDecodeCapabilitiesKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeCapabilitiesKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_CAPABILITIES_KHR</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoDecodeCapabilityFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoDecodeCapabilityFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoDecodeCapabilityFlagsKHR</code> is a bitmask type for setting a mask
of zero or more <a href="chap41.html#VkVideoDecodeCapabilityFlagBitsKHR">VkVideoDecodeCapabilityFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">may</strong> be set in <a href="chap41.html#VkVideoDecodeCapabilitiesKHR">VkVideoDecodeCapabilitiesKHR</a>::<code>flags</code>,
indicating the decoding features supported, are:</p>
</div>
<div id="VkVideoDecodeCapabilityFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoDecodeCapabilityFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_COINCIDE_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_DISTINCT_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoDecodeCapabilityFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_COINCIDE_BIT_KHR</code> -
reports the implementation supports using the same
<a href="chap41.html#video-picture-resources">Video Picture Resource</a> for decode DPB and
decode output.</p>
</li>
<li>
<p><code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_DISTINCT_BIT_KHR</code> -
reports the implementation supports using distinct
<a href="chap41.html#video-picture-resources">Video Picture Resources</a> for decode DPB and
decode output.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An implementation <strong class="purple">must</strong> report at least one of
<code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_COINCIDE_BIT_KHR</code> or
<code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_DISTINCT_BIT_KHR</code> as
supported.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note:</div>
<div class="paragraph">
<p>If both <code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_COINCIDE_BIT_KHR</code> and
<code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_DISTINCT_BIT_KHR</code> are
supported, an application <strong class="purple">may</strong> choose to create separate images for decode
DPB and decode output in the case where linear tiling is required for output
but optimal tiling <strong class="purple">must</strong> still be used for DPB.
This avoids scheduling layout transitions at the expense of extra overhead
during decoding to write both images and the additional memory requirements.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_video_decode_command_buffer_commands"><a class="anchor" href="chap41.html#_video_decode_command_buffer_commands"></a>41.5.3. Video Decode Command Buffer Commands</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To decode a frame, call:</p>
</div>
<div id="vkCmdDecodeVideoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_queue</span>
<span class="kt">void</span> <span class="nf">vkCmdDecodeVideoKHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkVideoDecodeInfoKHR</span><span class="o">*</span>                 <span class="n">pDecodeInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer to be filled with this
function for decode frame command.</p>
</li>
<li>
<p><code>pDecodeInfo</code> is a pointer to a <a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>
structure.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-None-07011" href="chap41.html#VUID-vkCmdDecodeVideoKHR-None-07011"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-None-07011</span><br>

The bound video session object <strong class="purple">must</strong> not be in <em>uninitialized</em> state</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-commandBuffer-parameter" href="chap41.html#VUID-vkCmdDecodeVideoKHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-parameter" href="chap41.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-parameter"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-parameter</span><br>
 <code>pDecodeInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-commandBuffer-recording" href="chap41.html#VUID-vkCmdDecodeVideoKHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-commandBuffer-cmdpool" href="chap41.html#VUID-vkCmdDecodeVideoKHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support decode operations</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-renderpass" href="chap41.html#VUID-vkCmdDecodeVideoKHR-renderpass"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-videocoding" href="chap41.html#VUID-vkCmdDecodeVideoKHR-videocoding"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called inside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-bufferlevel" href="chap41.html#VUID-vkCmdDecodeVideoKHR-bufferlevel"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap41.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoDecodeInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                       <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                           <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoDecodeFlagsKHR</span>                 <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkBuffer</span>                              <span class="n">srcBuffer</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>                          <span class="n">srcBufferOffset</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>                          <span class="n">srcBufferRange</span><span class="p">;</span>
    <span class="n">VkVideoPictureResourceInfoKHR</span>         <span class="n">dstPictureResource</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoReferenceSlotInfoKHR</span><span class="o">*</span>    <span class="n">pSetupReferenceSlot</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                              <span class="n">referenceSlotCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoReferenceSlotInfoKHR</span><span class="o">*</span>    <span class="n">pReferenceSlots</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.
All the codec specific structures related to each frame(picture
parameters, quantization matrix, etc.) <strong class="purple">must</strong> be chained here and pass to
decode session with the function call <a href="chap41.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a>.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
<li>
<p><code>srcBuffer</code> is the source buffer that holds the encoded bitstream.</p>
</li>
<li>
<p><code>srcBufferOffset</code> is the buffer offset where the valid encoded
bitstream starts in srcBuffer.
It <strong class="purple">must</strong> meet the alignment requirement
<code>minBitstreamBufferOffsetAlignment</code> within
<a href="chap41.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> queried with the
<a href="chap41.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> function.</p>
</li>
<li>
<p><code>srcBufferRange</code> is the size of the srcBuffer with valid encoded
bitstream, starting from <code>srcBufferOffset</code>.
It <strong class="purple">must</strong> meet the alignment requirement
<code>minBitstreamBufferSizeAlignment</code> within
<a href="chap41.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> queried with the
<a href="chap41.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> function.</p>
</li>
<li>
<p><code>dstPictureResource</code> is the destination
<a href="chap41.html#decoded-output-picture">Decoded Output Picture</a> Resource.</p>
</li>
<li>
<p><code>pSetupReferenceSlot</code> is <code>NULL</code> or a pointer to a
<a href="chap41.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structure used for generating a DPB
reference slot and Picture Resource.
<code>pSetupReferenceSlot-&gt;slotIndex</code> specifies the slot index number to
use as a target for producing the DPB data.
<code>slotIndex</code> <strong class="purple">must</strong> reference a valid entry as specified in
<a href="chap41.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a> via the <code>pReferenceSlots</code> within the
<a href="chap41.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command that established the Vulkan Video
Decode Context for this command.</p>
</li>
<li>
<p><code>referenceSlotCount</code> is the number of the DPB Reference Pictures
that will be used when this decoding operation is executing.</p>
</li>
<li>
<p><code>pReferenceSlots</code> is a pointer to an array of
<a href="chap41.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structures specifying the DPB
Reference pictures that will be used when this decoding operation is
executing.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The coded size of the decode operation is specified in <code>codedExtent</code> of
<code>dstPictureResource</code>.</p>
</div>
<div class="paragraph">
<p>The coded offset of the decode operation is specified in <code>codedOffset</code>
of <code>dstPictureResource</code>.
The purpose of this field is interpreted based on the codec extension.
When decoding content in H.264 field mode, <code>codedOffset</code> specifies the
line or picture field’s offset within the image.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-sType-sType" href="chap41.html#VUID-VkVideoDecodeInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-pNext-pNext" href="chap41.html#VUID-VkVideoDecodeInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap41.html#VkVideoDecodeH264PictureInfoEXT">VkVideoDecodeH264PictureInfoEXT</a> or <a href="chap41.html#VkVideoDecodeH265PictureInfoEXT">VkVideoDecodeH265PictureInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-sType-unique" href="chap41.html#VUID-VkVideoDecodeInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-flags-zerobitmask" href="chap41.html#VUID-VkVideoDecodeInfoKHR-flags-zerobitmask"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-flags-zerobitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-srcBuffer-parameter" href="chap41.html#VUID-VkVideoDecodeInfoKHR-srcBuffer-parameter"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-srcBuffer-parameter</span><br>
 <code>srcBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-dstPictureResource-parameter" href="chap41.html#VUID-VkVideoDecodeInfoKHR-dstPictureResource-parameter"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-dstPictureResource-parameter</span><br>
 <code>dstPictureResource</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-pSetupReferenceSlot-parameter" href="chap41.html#VUID-VkVideoDecodeInfoKHR-pSetupReferenceSlot-parameter"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-pSetupReferenceSlot-parameter</span><br>
 If <code>pSetupReferenceSlot</code> is not <code>NULL</code>, <code>pSetupReferenceSlot</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-pReferenceSlots-parameter" href="chap41.html#VUID-VkVideoDecodeInfoKHR-pReferenceSlots-parameter"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-pReferenceSlots-parameter</span><br>
 If <code>referenceSlotCount</code> is not <code>0</code>, <code>pReferenceSlots</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>referenceSlotCount</code> valid <a href="chap41.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoDecodeFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoDecodeFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap41.html#VkVideoDecodeFlagsKHR">VkVideoDecodeFlagsKHR</a> is a bitmask type for setting a mask, but is
currently reserved for future use.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="decode-h264"><a class="anchor" href="chap41.html#decode-h264"></a>41.6. Video Decode of AVC (ITU-T H.264)</h3>
<div class="paragraph">
<p>The <code><a href="chap53.html#VK_EXT_video_decode_h264">VK_EXT_video_decode_h264</a></code> extension adds H.264 codec specific
structures needed for decode session to execute decode jobs which include
H.264 sequence header, picture parameter header and quantization matrix etc.
Unless otherwise noted, all references to the H.264 specification are to the
2010 edition published by the ITU-T, dated March 2010.
This specification is available at <a href="https://www.itu.int/rec/T-REC-H.264" class="bare">https://www.itu.int/rec/T-REC-H.264</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Refer to the <a href="chap1.html">Preamble</a> for information on how the Khronos
Intellectual Property Rights Policy relates to normative references to
external materials not created by Khronos.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="_h_264_decode_profile"><a class="anchor" href="chap41.html#_h_264_decode_profile"></a>41.6.1. H.264 decode profile</h4>
<div class="paragraph">
<p>A H.264 decode profile is specified using
<a href="chap41.html#VkVideoDecodeH264ProfileInfoEXT">VkVideoDecodeH264ProfileInfoEXT</a> chained to <a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>
when the codec-operation in <a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> is
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_EXT</code>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoDecodeH264ProfileInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH264ProfileInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_decode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH264ProfileInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                              <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                  <span class="n">pNext</span><span class="p">;</span>
    <span class="n">StdVideoH264ProfileIdc</span>                       <span class="n">stdProfileIdc</span><span class="p">;</span>
    <span class="n">VkVideoDecodeH264PictureLayoutFlagBitsEXT</span>    <span class="n">pictureLayout</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH264ProfileInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stdProfileIdc</code> is a <code>StdVideoH264ProfileIdc</code> value specifying
the H.264 codec profile IDC</p>
</li>
<li>
<p><code>pictureLayout</code> is a <a href="chap41.html#VkVideoDecodeH264PictureLayoutFlagBitsEXT">VkVideoDecodeH264PictureLayoutFlagBitsEXT</a>
value specifying the layout of the decoded picture’s contents depending
on the nature (progressive vs. interlaced) of the input content.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>When passing <code>VkVideoDecodeH264ProfileInfoEXT</code> to
<a href="chap41.html#vkCreateVideoSessionKHR">vkCreateVideoSessionKHR</a> in the <code>pNext</code> chain of
<a href="chap41.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>, requests for a <code>pictureLayout</code> not
supported by the implementation will result in failure of the command.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264ProfileInfoEXT-pNext-06259" href="chap41.html#VUID-VkVideoDecodeH264ProfileInfoEXT-pNext-06259"></a> <span class="vuid">VUID-VkVideoDecodeH264ProfileInfoEXT-pNext-06259</span><br>

If the <a href="chap41.html#VkVideoDecodeH264ProfileInfoEXT">VkVideoDecodeH264ProfileInfoEXT</a> structure is included in
the <code>pNext</code> chain of the <a href="chap41.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> structure
passed to <a href="chap41.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a>, the value in
<code>pictureLayout</code> is treated as a bitmask of requested picture
layouts.
It is always valid to use the value
<code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_PROGRESSIVE_EXT</code> as the
implementation is guaranteed to support decoding of progressive content.</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264ProfileInfoEXT-pNext-06260" href="chap41.html#VUID-VkVideoDecodeH264ProfileInfoEXT-pNext-06260"></a> <span class="vuid">VUID-VkVideoDecodeH264ProfileInfoEXT-pNext-06260</span><br>

If the <a href="chap41.html#VkVideoDecodeH264ProfileInfoEXT">VkVideoDecodeH264ProfileInfoEXT</a> structure is included in
the <code>pNext</code> chain of the <a href="chap41.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a> structure
passed to <a href="chap41.html#vkCreateVideoSessionKHR">vkCreateVideoSessionKHR</a>, the value in
<code>pictureLayout</code> <strong class="purple">must</strong> be exactly one of
<code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_PROGRESSIVE_EXT</code>,
<code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_INTERLEAVED_LINES_BIT_EXT</code>
or
<code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_SEPARATE_PLANES_BIT_EXT</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264ProfileInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoDecodeH264ProfileInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH264ProfileInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H264_PROFILE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264ProfileInfoEXT-pictureLayout-parameter" href="chap41.html#VUID-VkVideoDecodeH264ProfileInfoEXT-pictureLayout-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264ProfileInfoEXT-pictureLayout-parameter</span><br>
 If <code>pictureLayout</code> is not <code>0</code>, <code>pictureLayout</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoDecodeH264PictureLayoutFlagBitsEXT">VkVideoDecodeH264PictureLayoutFlagBitsEXT</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoDecodeH264PictureLayoutFlagsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_decode_h264</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoDecodeH264PictureLayoutFlagsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoDecodeH264PictureLayoutFlagsEXT</code> is a bitmask type for setting a
mask of zero or more <a href="chap41.html#VkVideoDecodeH264PictureLayoutFlagBitsEXT">VkVideoDecodeH264PictureLayoutFlagBitsEXT</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The H.264 video decode picture layout flags are defined with the following
enum:</p>
</div>
<div id="VkVideoDecodeH264PictureLayoutFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_decode_h264</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoDecodeH264PictureLayoutFlagBitsEXT</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_PROGRESSIVE_EXT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_INTERLEAVED_LINES_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_SEPARATE_PLANES_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH264PictureLayoutFlagBitsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_PROGRESSIVE_EXT</code> specifies
support for progressive content.
This flag has the value <code>0</code>.</p>
</li>
<li>
<p><code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_INTERLEAVED_LINES_BIT_EXT</code>
specifies support for or use of a picture layout for interlaced content
where all lines belonging to the first field are decoded to the
even-numbered lines within the picture resource, and all lines belonging
to the second field are decoded to the odd-numbered lines within the
picture resource.</p>
</li>
<li>
<p><code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_SEPARATE_PLANES_BIT_EXT</code>
specifies support for or use of a picture layout for interlaced content
where all lines belonging to the first field are grouped together in a
single plane, followed by another plane containing all lines belonging
to the second field.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_selecting_a_h_264_decode_profile"><a class="anchor" href="chap41.html#_selecting_a_h_264_decode_profile"></a>41.6.2. Selecting a H.264 decode profile</h4>
<div class="paragraph">
<p>When using <a href="chap41.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> to query the
capabilities for the input <code>pVideoProfile</code> with
<code>videoCodecOperation</code> specified as
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_EXT</code>, a
<a href="chap41.html#VkVideoDecodeH264ProfileInfoEXT">VkVideoDecodeH264ProfileInfoEXT</a> structure <strong class="purple">must</strong> be chained to
<a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> to select a H.264 decode profile.
If supported, the implementation returns the capabilities associated with
the specified H.264 decode profile.
The requirement is similar when querying supported image formats using
<a href="chap41.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a>.</p>
</div>
<div class="paragraph">
<p>A supported H.264 decode profile <strong class="purple">must</strong> be selected when creating a video
session by chaining <a href="chap41.html#VkVideoDecodeH264ProfileInfoEXT">VkVideoDecodeH264ProfileInfoEXT</a> to the
<a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> field of <a href="chap41.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_capabilities_2"><a class="anchor" href="chap41.html#_capabilities_2"></a>41.6.3. Capabilities</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoDecodeH264CapabilitiesEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH264CapabilitiesEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_decode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH264CapabilitiesEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>         <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                   <span class="n">pNext</span><span class="p">;</span>
    <span class="n">StdVideoH264LevelIdc</span>    <span class="n">maxLevelIdc</span><span class="p">;</span>
    <span class="n">VkOffset2D</span>              <span class="n">fieldOffsetGranularity</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH264CapabilitiesEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When using <a href="chap41.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> to query the
capabilities for the input <code>pVideoProfile</code> with
<code>videoCodecOperation</code> specified as
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_EXT</code>, a
<a href="chap41.html#VkVideoDecodeH264CapabilitiesEXT">VkVideoDecodeH264CapabilitiesEXT</a> structure <strong class="purple">must</strong> be chained to
<a href="chap41.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> to get this H.264 decode profile specific
capabilities.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>maxLevel</code> is the maximum H.264 level supported by the device.</p>
</li>
<li>
<p><code>fieldOffsetGranularity</code> - if Interlaced Video Content is supported,
the maximum field offset granularity supported for the picture resource.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264CapabilitiesEXT-sType-sType" href="chap41.html#VUID-VkVideoDecodeH264CapabilitiesEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH264CapabilitiesEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H264_CAPABILITIES_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_decoder_parameter_sets"><a class="anchor" href="chap41.html#_decoder_parameter_sets"></a>41.6.4. Decoder Parameter Sets</h4>
<div class="paragraph">
<p>To reduce parameter traffic during decoding, the decoder parameter set
object supports storing H.264 SPS/PPS parameter sets that <strong class="purple">may</strong> be later
referenced during decoding.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoDecodeH264SessionParametersCreateInfoEXT</code> structure is
defined as:</p>
</div>
<div id="VkVideoDecodeH264SessionParametersCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_decode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH264SessionParametersCreateInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                        <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                            <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                               <span class="n">maxStdSPSCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                               <span class="n">maxStdPPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoDecodeH264SessionParametersAddInfoEXT</span><span class="o">*</span>    <span class="n">pParametersAddInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH264SessionParametersCreateInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A <a href="chap41.html#VkVideoDecodeH264SessionParametersCreateInfoEXT">VkVideoDecodeH264SessionParametersCreateInfoEXT</a> structure holding
one H.264 SPS and at least one H.264 PPS parameter set <strong class="purple">must</strong> be chained to
<a href="chap41.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a> when calling
<a href="chap41.html#vkCreateVideoSessionParametersKHR">vkCreateVideoSessionParametersKHR</a> to store these parameter set(s) with
the decoder parameter set object for later reference.
The provided H.264 SPS/PPS parameters <strong class="purple">must</strong> be within the limits specified
during decoder creation for the decoder specified in
<a href="chap41.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>maxStdSPSCount</code> is the maximum number of SPS parameters that the
<code>VkVideoSessionParametersKHR</code> can contain.</p>
</li>
<li>
<p><code>maxStdPPSCount</code> is the maximum number of PPS parameters that the
<code>VkVideoSessionParametersKHR</code> can contain.</p>
</li>
<li>
<p><code>pParametersAddInfo</code> is <code>NULL</code> or a pointer to a
<a href="chap41.html#VkVideoDecodeH264SessionParametersAddInfoEXT">VkVideoDecodeH264SessionParametersAddInfoEXT</a> structure specifying
H.264 parameters to add upon object creation.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersCreateInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoDecodeH264SessionParametersCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H264_SESSION_PARAMETERS_CREATE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersCreateInfoEXT-pParametersAddInfo-parameter" href="chap41.html#VUID-VkVideoDecodeH264SessionParametersCreateInfoEXT-pParametersAddInfo-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersCreateInfoEXT-pParametersAddInfo-parameter</span><br>
 If <code>pParametersAddInfo</code> is not <code>NULL</code>, <code>pParametersAddInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkVideoDecodeH264SessionParametersAddInfoEXT">VkVideoDecodeH264SessionParametersAddInfoEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoDecodeH264SessionParametersAddInfoEXT</code> structure is defined
as:</p>
</div>
<div id="VkVideoDecodeH264SessionParametersAddInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_decode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH264SessionParametersAddInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                            <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                   <span class="n">stdSPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoH264SequenceParameterSet</span><span class="o">*</span>    <span class="n">pStdSPSs</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                   <span class="n">stdPPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoH264PictureParameterSet</span><span class="o">*</span>     <span class="n">pStdPPSs</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH264SessionParametersAddInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stdSPSCount</code> is the number of SPS elements in <code>pStdSPSs</code>.
Its value <strong class="purple">must</strong> be less than or equal to the value of
<code>maxStdSPSCount</code>.</p>
</li>
<li>
<p><code>pStdSPSs</code> is a pointer to an array of
<code>StdVideoH264SequenceParameterSet</code> structures representing H.264
sequence parameter sets.
Each element of the array <strong class="purple">must</strong> have a unique H.264 SPS ID.</p>
</li>
<li>
<p><code>stdPPSCount</code> is the number of PPS provided in <code>pStdPPSs</code>.
Its value <strong class="purple">must</strong> be less than or equal to the value of
<code>maxStdPPSCount</code>.</p>
</li>
<li>
<p><code>pStdPPSs</code> is a pointer to an array of
<code>StdVideoH264PictureParameterSet</code> structures representing H.264
picture parameter sets.
Each element of the array <strong class="purple">must</strong> have a unique H.264 SPS-PPS ID pair.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-stdSPSCount-04822" href="chap41.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-stdSPSCount-04822"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-stdSPSCount-04822</span><br>

The values of <code>stdSPSCount</code> and <code>stdPPSCount</code> <strong class="purple">must</strong> be less than
or equal to the values of <code>maxStdSPSCount</code> and <code>maxStdPPSCount</code>,
respectively</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-maxStdSPSCount-04823" href="chap41.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-maxStdSPSCount-04823"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-maxStdSPSCount-04823</span><br>

When the <code>maxStdSPSCount</code> number of parameters of type
StdVideoH264SequenceParameterSet in the Video Session Parameters object
is reached, no additional parameters of that type can be added to this
object.
<code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add additional data to this object at this point</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-maxStdPPSCount-04824" href="chap41.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-maxStdPPSCount-04824"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-maxStdPPSCount-04824</span><br>

When the <code>maxStdPPSCount</code> number of parameters of type
StdVideoH264PictureParameterSet in the Video Session Parameters object
is reached, no additional parameters of that type can be added to this
object.
<code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add additional data to this object at this point</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04825" href="chap41.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04825"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04825</span><br>

Each entry to be added <strong class="purple">must</strong> have a unique, to the rest of the parameter
array entries and the existing parameters in the Video Session
Parameters Object that is being updated, SPS-PPS IDs</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04826" href="chap41.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04826"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04826</span><br>

Parameter entries that already exist in Video Session Parameters object
with a particular SPS-PPS IDs <strong class="purple">cannot</strong> be replaced nor updated</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04827" href="chap41.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04827"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04827</span><br>

When creating a new object using a Video Session Parameters as a
template, the array’s parameters with the same SPS-PPS IDs as the ones
from the template take precedence</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04828" href="chap41.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04828"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04828</span><br>

SPS/PPS parameters <strong class="purple">must</strong> comply with the limits specified in
<a href="chap41.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a> during Video Session creation</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H264_SESSION_PARAMETERS_ADD_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-pStdSPSs-parameter" href="chap41.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-pStdSPSs-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-pStdSPSs-parameter</span><br>
 If <code>stdSPSCount</code> is not <code>0</code>, <code>pStdSPSs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>stdSPSCount</code> <code>StdVideoH264SequenceParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-pStdPPSs-parameter" href="chap41.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-pStdPPSs-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-pStdPPSs-parameter</span><br>
 If <code>stdPPSCount</code> is not <code>0</code>, <code>pStdPPSs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>stdPPSCount</code> <code>StdVideoH264PictureParameterSet</code> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_picture_decoding"><a class="anchor" href="chap41.html#_picture_decoding"></a>41.6.5. Picture Decoding</h4>
<div class="paragraph">
<p>To decode a picture, the structure <a href="chap41.html#VkVideoDecodeH264PictureInfoEXT">VkVideoDecodeH264PictureInfoEXT</a>
<strong class="purple">may</strong> be chained to <a href="chap41.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a> when calling
<a href="chap41.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoDecodeH264PictureInfoEXT">VkVideoDecodeH264PictureInfoEXT</a> structure represents a picture
decode operation and is defined as:</p>
</div>
<div id="VkVideoDecodeH264PictureInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_decode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH264PictureInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                         <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                             <span class="n">pNext</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoDecodeH264PictureInfo</span><span class="o">*</span>    <span class="n">pStdPictureInfo</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                <span class="n">sliceCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint32_t</span><span class="o">*</span>                         <span class="n">pSliceOffsets</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH264PictureInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pStdPictureInfo</code> is a pointer to a
<code>StdVideoDecodeH264PictureInfo</code> structure specifying the codec
standard specific picture information from the H.264 specification.</p>
</li>
<li>
<p><code>sliceCount</code> is the number of slices in this picture.</p>
</li>
<li>
<p><code>pSliceOffsets</code> is a pointer to an array of <code>sliceCount</code> offsets
indicating the start offset of each slice within the bitstream buffer.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264PictureInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoDecodeH264PictureInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH264PictureInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H264_PICTURE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264PictureInfoEXT-pStdPictureInfo-parameter" href="chap41.html#VUID-VkVideoDecodeH264PictureInfoEXT-pStdPictureInfo-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264PictureInfoEXT-pStdPictureInfo-parameter</span><br>
 <code>pStdPictureInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoDecodeH264PictureInfo</code> value</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264PictureInfoEXT-pSliceOffsets-parameter" href="chap41.html#VUID-VkVideoDecodeH264PictureInfoEXT-pSliceOffsets-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264PictureInfoEXT-pSliceOffsets-parameter</span><br>
 <code>pSliceOffsets</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>sliceCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264PictureInfoEXT-sliceCount-arraylength" href="chap41.html#VUID-VkVideoDecodeH264PictureInfoEXT-sliceCount-arraylength"></a> <span class="vuid">VUID-VkVideoDecodeH264PictureInfoEXT-sliceCount-arraylength</span><br>
 <code>sliceCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoDecodeH264DpbSlotInfoEXT">VkVideoDecodeH264DpbSlotInfoEXT</a> structure correlates a DPB Slot
index with codec-specific information and is defined as:</p>
</div>
<div id="VkVideoDecodeH264DpbSlotInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_decode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH264DpbSlotInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                           <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                               <span class="n">pNext</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoDecodeH264ReferenceInfo</span><span class="o">*</span>    <span class="n">pStdReferenceInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH264DpbSlotInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pStdReferenceInfo</code> is a pointer to a
<code>StdVideoDecodeH264ReferenceInfo</code> structure specifying the codec
standard specific picture reference information from the H.264
specification.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264DpbSlotInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoDecodeH264DpbSlotInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH264DpbSlotInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H264_DPB_SLOT_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264DpbSlotInfoEXT-pStdReferenceInfo-parameter" href="chap41.html#VUID-VkVideoDecodeH264DpbSlotInfoEXT-pStdReferenceInfo-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264DpbSlotInfoEXT-pStdReferenceInfo-parameter</span><br>
 <code>pStdReferenceInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoDecodeH264ReferenceInfo</code> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="decode-h265"><a class="anchor" href="chap41.html#decode-h265"></a>41.7. Video Decode of HEVC (ITU-T H.265)</h3>
<div class="paragraph">
<p>The <code><a href="chap53.html#VK_EXT_video_decode_h265">VK_EXT_video_decode_h265</a></code> extension adds H.265 codec specific
structures needed for decode session to execute decode jobs which include
H.265 sequence header, picture parameter header and quantization matrix etc.
Unless otherwise noted, all references to the H.265 specification are to the
2013 edition published by the ITU-T, dated April 2013.
This specification is available at <a href="https://www.itu.int/rec/T-REC-H.265" class="bare">https://www.itu.int/rec/T-REC-H.265</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Refer to the <a href="chap1.html">Preamble</a> for information on how the Khronos
Intellectual Property Rights Policy relates to normative references to
external materials not created by Khronos.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="_h_265_decode_profile"><a class="anchor" href="chap41.html#_h_265_decode_profile"></a>41.7.1. H.265 decode profile</h4>
<div class="paragraph">
<p>A H.265 decode profile is specified using
<a href="chap41.html#VkVideoDecodeH265ProfileInfoEXT">VkVideoDecodeH265ProfileInfoEXT</a> chained to <a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>
when the codec-operation in <a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> is
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_EXT</code>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoDecodeH265ProfileInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH265ProfileInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_decode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH265ProfileInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>           <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>               <span class="n">pNext</span><span class="p">;</span>
    <span class="n">StdVideoH265ProfileIdc</span>    <span class="n">stdProfileIdc</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH265ProfileInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stdProfileIdc</code> is a <code>StdVideoH265ProfileIdc</code> value specifying
the H.265 codec profile IDC.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265ProfileInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoDecodeH265ProfileInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH265ProfileInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H265_PROFILE_INFO_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_selecting_an_h_265_profile"><a class="anchor" href="chap41.html#_selecting_an_h_265_profile"></a>41.7.2. Selecting an H.265 Profile</h4>
<div class="paragraph">
<p>When using <a href="chap41.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> to query the
capabilities for the input <code>pVideoProfile</code> with
<code>videoCodecOperation</code> specified as
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_EXT</code>, a
<a href="chap41.html#VkVideoDecodeH265ProfileInfoEXT">VkVideoDecodeH265ProfileInfoEXT</a> structure <strong class="purple">must</strong> be chained to
<a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> to select a H.265 decode profile.
If supported, the implementation returns the capabilities associated with
the specified H.265 decode profile.
The requirement is similar when querying supported image formats using
<a href="chap41.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a>.</p>
</div>
<div class="paragraph">
<p>A supported H.265 decode profile <strong class="purple">must</strong> be selected when creating a video
session by chaining <a href="chap41.html#VkVideoDecodeH265ProfileInfoEXT">VkVideoDecodeH265ProfileInfoEXT</a> to the
<a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> field of <a href="chap41.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_capabilities_3"><a class="anchor" href="chap41.html#_capabilities_3"></a>41.7.3. Capabilities</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoDecodeH265CapabilitiesEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH265CapabilitiesEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_decode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH265CapabilitiesEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>         <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                   <span class="n">pNext</span><span class="p">;</span>
    <span class="n">StdVideoH265LevelIdc</span>    <span class="n">maxLevelIdc</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH265CapabilitiesEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When using <a href="chap41.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> to query the
capabilities for the parameter <code>videoCodecOperation</code> specified as
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_EXT</code>, a
<a href="chap41.html#VkVideoDecodeH265CapabilitiesEXT">VkVideoDecodeH265CapabilitiesEXT</a> structure <strong class="purple">can</strong> be chained to
<a href="chap41.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> to return this H.265 extension specific
capabilities.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>maxLevel</code> is the maximum H.265 level supported by the device.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265CapabilitiesEXT-sType-sType" href="chap41.html#VUID-VkVideoDecodeH265CapabilitiesEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH265CapabilitiesEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H265_CAPABILITIES_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_decoder_parameter_sets_2"><a class="anchor" href="chap41.html#_decoder_parameter_sets_2"></a>41.7.4. Decoder Parameter Sets</h4>
<div class="paragraph">
<p>To reduce parameter traffic during decoding, the decoder parameter set
object supports storing H.265 VPS/SPS/PPS parameter sets that may be later
referenced during decoding.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoDecodeH265SessionParametersCreateInfoEXT</code> structure is
defined as:</p>
</div>
<div id="VkVideoDecodeH265SessionParametersCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_decode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH265SessionParametersCreateInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                        <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                            <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                               <span class="n">maxStdVPSCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                               <span class="n">maxStdSPSCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                               <span class="n">maxStdPPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoDecodeH265SessionParametersAddInfoEXT</span><span class="o">*</span>    <span class="n">pParametersAddInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH265SessionParametersCreateInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>maxStdVPSCount</code> is the maximum number of entries of type
<code>StdVideoH265VideoParameterSet</code> within
<code>VkVideoSessionParametersKHR</code>.</p>
</li>
<li>
<p><code>maxStdSPSCount</code> is the maximum number of SPS parameters that the
<code>VkVideoSessionParametersKHR</code> can contain.</p>
</li>
<li>
<p><code>maxStdPPSCount</code> is the maximum number of PPS parameters that the
<code>VkVideoSessionParametersKHR</code> can contain.</p>
</li>
<li>
<p><code>pParametersAddInfo</code> is <code>NULL</code> or a pointer to a
<a href="chap41.html#VkVideoDecodeH265SessionParametersAddInfoEXT">VkVideoDecodeH265SessionParametersAddInfoEXT</a> structure specifying
H.265 parameters to add upon object creation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When a <a href="chap41.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object contains
<code>maxStdVPSCount</code> <code>StdVideoH265VideoParameterSet</code> entries, no
additional <code>StdVideoH265VideoParameterSet</code> entries can be added to it,
and <code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add these entries.
When a <a href="chap41.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object contains
<code>maxStdSPSCount</code> <code>StdVideoH265SequenceParameterSet</code> entries, no
additional <code>StdVideoH265SequenceParameterSet</code> entries can be added to it,
and <code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add these entries.
When a <a href="chap41.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object contains
<code>maxStdPPSCount</code> <code>StdVideoH265PictureParameterSet</code> entries, no
additional <code>StdVideoH265PictureParameterSet</code> entries can be added to it,
and <code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add these entries.</p>
</div>
<div class="paragraph">
<p>The provided H.265 VPS/SPS/PPS parameters <strong class="purple">must</strong> be within the limits
specified during decoder creation for the decoder specified in
<code>VkVideoSessionParametersCreateInfoKHR</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersCreateInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoDecodeH265SessionParametersCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H265_SESSION_PARAMETERS_CREATE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersCreateInfoEXT-pParametersAddInfo-parameter" href="chap41.html#VUID-VkVideoDecodeH265SessionParametersCreateInfoEXT-pParametersAddInfo-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersCreateInfoEXT-pParametersAddInfo-parameter</span><br>
 If <code>pParametersAddInfo</code> is not <code>NULL</code>, <code>pParametersAddInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkVideoDecodeH265SessionParametersAddInfoEXT">VkVideoDecodeH265SessionParametersAddInfoEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoDecodeH265SessionParametersAddInfoEXT</code> structure is defined
as:</p>
</div>
<div id="VkVideoDecodeH265SessionParametersAddInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_decode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH265SessionParametersAddInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                            <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                   <span class="n">stdVPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoH265VideoParameterSet</span><span class="o">*</span>       <span class="n">pStdVPSs</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                   <span class="n">stdSPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoH265SequenceParameterSet</span><span class="o">*</span>    <span class="n">pStdSPSs</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                   <span class="n">stdPPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoH265PictureParameterSet</span><span class="o">*</span>     <span class="n">pStdPPSs</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH265SessionParametersAddInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stdVPSCount</code> is the number of VPS elements in <code>pStdVPSs</code>.</p>
</li>
<li>
<p><code>pStdVPSs</code> is a pointer to an array of <code>stdVPSCount</code>
<code>StdVideoH265VideoParameterSet</code> structures representing H.265 video
parameter sets.</p>
</li>
<li>
<p><code>stdSPSCount</code> is the number of SPS elements in the <code>pStdSPSs</code>.
Its value <strong class="purple">must</strong> be less than or equal to the value of
<code>maxStdSPSCount</code>.</p>
</li>
<li>
<p><code>pStdSPSs</code> is a pointer to an array of
<code>StdVideoH265SequenceParameterSet</code> structures representing H.265
sequence parameter sets.
Each element of the array <strong class="purple">must</strong> have a unique H.265 VPS-SPS ID pair.</p>
</li>
<li>
<p><code>stdPPSCount</code> is the number of PPS provided in <code>pStdPPSs</code>.
Its value <strong class="purple">must</strong> be less than or equal to the value of
<code>maxStdPPSCount</code>.</p>
</li>
<li>
<p><code>pStdPPSs</code> is a pointer to an array of
<code>StdVideoH265PictureParameterSet</code> structures representing H.265
picture parameter sets.
Each element of the array entry <strong class="purple">must</strong> have a unique H.265 VPS-SPS-PPS ID
tuple.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-stdVPSCount-04829" href="chap41.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-stdVPSCount-04829"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-stdVPSCount-04829</span><br>

The values of <code>stdVPSCount</code>, <code>stdSPSCount</code> and <code>stdPPSCount</code>
<strong class="purple">must</strong> be less than or equal to the values of <code>maxStdVPSCount</code>,
<code>maxStdSPSCount</code> and <code>maxStdPPSCount</code>, respectively</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-maxStdVPSCount-04830" href="chap41.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-maxStdVPSCount-04830"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-maxStdVPSCount-04830</span><br>

When the <code>maxStdVPSCount</code> number of parameters of type
StdVideoH265VideoParameterSet in the Video Session Parameters object is
reached, no additional parameters of that type can be added to the
object.
<code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add additional data to this object at this point</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-maxStdSPSCount-04831" href="chap41.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-maxStdSPSCount-04831"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-maxStdSPSCount-04831</span><br>

When the <code>maxStdSPSCount</code> number of parameters of type
StdVideoH265SequenceParameterSet in the Video Session Parameters object
is reached, no additional parameters of that type can be added to the
object.
<code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add additional data to this object at this point</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-maxStdPPSCount-04832" href="chap41.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-maxStdPPSCount-04832"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-maxStdPPSCount-04832</span><br>

When the <code>maxStdPPSCount</code> number of parameters of type
StdVideoH265PictureParameterSet in the Video Session Parameters object
is reached, no additional parameters of that type can be added to the
object.
<code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add additional data to this object at this point</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04833" href="chap41.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04833"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04833</span><br>

Each entry to be added <strong class="purple">must</strong> have a unique, to the rest of the parameter
array entries and the existing parameters in the Video Session
Parameters Object that is being updated, VPS-SPS-PPS IDs</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04834" href="chap41.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04834"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04834</span><br>

Parameter entries that already exist in Video Session Parameters object
with a particular VPS-SPS-PPS IDs <strong class="purple">cannot</strong> be replaced nor updated</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04835" href="chap41.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04835"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04835</span><br>

When creating a new object using a Video Session Parameters as a
template, the array’s parameters with the same VPS-SPS-PPS IDs as the
ones from the template take precedence</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04836" href="chap41.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04836"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04836</span><br>

VPS/SPS/PPS parameters <strong class="purple">must</strong> comply with the limits specified in
<a href="chap41.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a> during Video Session creation</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H265_SESSION_PARAMETERS_ADD_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-pStdVPSs-parameter" href="chap41.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-pStdVPSs-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-pStdVPSs-parameter</span><br>
 If <code>stdVPSCount</code> is not <code>0</code>, <code>pStdVPSs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>stdVPSCount</code> <code>StdVideoH265VideoParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-pStdSPSs-parameter" href="chap41.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-pStdSPSs-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-pStdSPSs-parameter</span><br>
 If <code>stdSPSCount</code> is not <code>0</code>, <code>pStdSPSs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>stdSPSCount</code> <code>StdVideoH265SequenceParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-pStdPPSs-parameter" href="chap41.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-pStdPPSs-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-pStdPPSs-parameter</span><br>
 If <code>stdPPSCount</code> is not <code>0</code>, <code>pStdPPSs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>stdPPSCount</code> <code>StdVideoH265PictureParameterSet</code> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_picture_parameters"><a class="anchor" href="chap41.html#_picture_parameters"></a>41.7.5. Picture Parameters</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoDecodeH265PictureInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH265PictureInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_decode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH265PictureInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                   <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                       <span class="n">pNext</span><span class="p">;</span>
    <span class="n">StdVideoDecodeH265PictureInfo</span><span class="o">*</span>    <span class="n">pStdPictureInfo</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                          <span class="n">sliceCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint32_t</span><span class="o">*</span>                   <span class="n">pSliceOffsets</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH265PictureInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pStdPictureInfo</code> is a pointer to a
<code>StdVideoDecodeH265PictureInfo</code> structure specifying codec standard
specific picture information from the H.265 specification.</p>
</li>
<li>
<p><code>sliceCount</code> is the number of slices in this picture.</p>
</li>
<li>
<p><code>pSliceOffsets</code> is a pointer to an array of <code>sliceCount</code> offsets
indicating the start offset of each slice within the bitstream buffer.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265PictureInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoDecodeH265PictureInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH265PictureInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H265_PICTURE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265PictureInfoEXT-pStdPictureInfo-parameter" href="chap41.html#VUID-VkVideoDecodeH265PictureInfoEXT-pStdPictureInfo-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH265PictureInfoEXT-pStdPictureInfo-parameter</span><br>
 <code>pStdPictureInfo</code> <strong class="purple">must</strong> be a valid pointer to a <code>StdVideoDecodeH265PictureInfo</code> value</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265PictureInfoEXT-pSliceOffsets-parameter" href="chap41.html#VUID-VkVideoDecodeH265PictureInfoEXT-pSliceOffsets-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH265PictureInfoEXT-pSliceOffsets-parameter</span><br>
 <code>pSliceOffsets</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>sliceCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265PictureInfoEXT-sliceCount-arraylength" href="chap41.html#VUID-VkVideoDecodeH265PictureInfoEXT-sliceCount-arraylength"></a> <span class="vuid">VUID-VkVideoDecodeH265PictureInfoEXT-sliceCount-arraylength</span><br>
 <code>sliceCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoDecodeH265DpbSlotInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH265DpbSlotInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_decode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH265DpbSlotInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                           <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                               <span class="n">pNext</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoDecodeH265ReferenceInfo</span><span class="o">*</span>    <span class="n">pStdReferenceInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH265DpbSlotInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pStdReferenceInfo</code> is a pointer to a
<code>StdVideoDecodeH265ReferenceInfo</code> structure specifying the codec
standard specific picture reference information from the H.264
specification.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265DpbSlotInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoDecodeH265DpbSlotInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH265DpbSlotInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H265_DPB_SLOT_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265DpbSlotInfoEXT-pStdReferenceInfo-parameter" href="chap41.html#VUID-VkVideoDecodeH265DpbSlotInfoEXT-pStdReferenceInfo-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH265DpbSlotInfoEXT-pStdReferenceInfo-parameter</span><br>
 <code>pStdReferenceInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoDecodeH265ReferenceInfo</code> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="video-encode-operations"><a class="anchor" href="chap41.html#video-encode-operations"></a>41.8. Video Encode Operations</h3>
<div class="paragraph">
<p>Before the application can start recording Vulkan command buffers for the
Video Encode Operations, it <strong class="purple">must</strong> do the following, beforehand:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that the implementation can encode the Video Content by querying
the supported codec operations and profiles using
<a href="chap5.html#vkGetPhysicalDeviceQueueFamilyProperties2">vkGetPhysicalDeviceQueueFamilyProperties2</a>.</p>
</li>
<li>
<p>By using <a href="chap41.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> and providing
one or more video profiles, choose the Vulkan formats supported by the
implementation.
The formats for <a href="chap41.html#encode-input-picture">input</a> and
<a href="chap41.html#reference-picture">reference</a> pictures <strong class="purple">must</strong> be queried and chosen
separately.
Refer to the section on
<a href="chap41.html#supported-video-input-output-dpb-formats-enumeration">enumeration of
supported video formats</a>.</p>
</li>
<li>
<p>Before creating an image to be used as a video picture resource, obtain
the supported image creation parameters by querying with
<a href="chap46.html#vkGetPhysicalDeviceFormatProperties2">vkGetPhysicalDeviceFormatProperties2</a> and
<a href="chap47.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a> using one of the
reported formats and adding <a href="chap41.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a> to the
<code>pNext</code> chain of <a href="chap46.html#VkFormatProperties2">VkFormatProperties2</a>.
When querying the parameters with
<a href="chap47.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a> for images targeting
<a href="chap41.html#encode-input-picture">input</a> and <a href="chap41.html#reference-picture">reference (DPB)</a>
pictures, the <a href="chap47.html#VkPhysicalDeviceImageFormatInfo2">VkPhysicalDeviceImageFormatInfo2</a>::<code>usage</code> field
should contain <code>VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code> and
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code>, respectively.</p>
</li>
<li>
<p>Create none, some, or all of the required <a href="chap12.html#VkImage">images</a> for the
<a href="chap41.html#encode-input-picture">input</a> and <a href="chap41.html#reference-picture">reference</a>
pictures.
More Video Picture Resources <strong class="purple">can</strong> be created at some later point if
needed while processing the content to be encoded.
Also, if the size of the picture to be encoded is expected to change,
the images <strong class="purple">can</strong> be created based on the maximum expected content size.</p>
</li>
<li>
<p>Create the <a href="chap41.html#video-session">video session</a> to be used for video encode
operations.
Before creating the Encode Video Session, the encode capabilities
<strong class="purple">should</strong> be queried with <a href="chap41.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> to
obtain the limits of the parameters allowed by the implementation for a
particular codec profile.</p>
</li>
<li>
<p>Bind memory resources with the encode video session by calling
<a href="chap41.html#vkBindVideoSessionMemoryKHR">vkBindVideoSessionMemoryKHR</a>.
The video session <strong class="purple">cannot</strong> be used until memory resources are allocated
and bound to it.
In order to determine the required memory sizes and heap types of the
device memory allocations, <a href="chap41.html#vkGetVideoSessionMemoryRequirementsKHR">vkGetVideoSessionMemoryRequirementsKHR</a>
<strong class="purple">should</strong> be called.</p>
</li>
<li>
<p>Create one or more <a href="chap41.html#video-session-parameters-introduction">Session
Parameter objects</a> for use across command buffer recording operations,
if required by the codec extension in use.
These objects <strong class="purple">must</strong> be created against a <a href="chap41.html#video-session">video session</a>
with the parameters required by the codec.
Each <a href="chap41.html#video-session-parameters-introduction">Session Parameter object</a>
created is a child object of the associated <a href="chap41.html#video-session">Session
object</a> and <strong class="purple">cannot</strong> be bound in the command buffer with any other
<a href="chap41.html#video-session">Session Object</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The recording of Video Encode Commands against a Vulkan Command Buffer
consists of the following sequence:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="chap41.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> starts the recording of one or more Video
Encode operations in the command buffer.
For each Video Encode Command operation, a Video Session <strong class="purple">must</strong> be bound
to the command buffer within this command.
This command establishes a Vulkan Video Encode Context that consists of
the bound Video Session Object, Session Parameters Object, and the
required Video Picture Resources.
The established Video Encode Context is in effect until the
<a href="chap41.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> command is recorded.
If more Video Encode operations are to be required after the
<a href="chap41.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> command, another Video Encode Context <strong class="purple">can</strong>
be started with the <a href="chap41.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command.</p>
</li>
<li>
<p><a href="chap41.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a> specifies one or more frames to be encoded.
The <a href="chap41.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a> parameters, and the codec extension
structures chained to this, specify the details of the encode operation.</p>
</li>
<li>
<p><a href="chap41.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a> records operations against the encoded
data, encoding device, or the Video Session state.</p>
</li>
<li>
<p><a href="chap41.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> signals the end of the recording of the
Vulkan Video Encode Context, as established by
<a href="chap41.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In addition to the above, the following commands <strong class="purple">can</strong> be recorded between
<a href="chap41.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> and <a href="chap41.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Query operations</p>
</li>
<li>
<p>Global Memory Barriers</p>
</li>
<li>
<p>Buffer Memory Barriers</p>
</li>
<li>
<p>Image Memory Barriers (these <strong class="purple">must</strong> be used to transition the Video
Picture Resources to the proper
<code>VK_IMAGE_LAYOUT_VIDEO_ENCODE_SRC_KHR</code> and
<code>VK_IMAGE_LAYOUT_VIDEO_ENCODE_DPB_KHR</code> layouts).</p>
</li>
<li>
<p>Pipeline Barriers</p>
</li>
<li>
<p>Events</p>
</li>
<li>
<p>Timestamps</p>
</li>
<li>
<p>Device Groups (device mask)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following Video Encode related commands <strong class="purple">must</strong> be recorded <strong>outside</strong> the
Vulkan Video Encode Context established with the
<a href="chap41.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> and <a href="chap41.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> commands:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sparse Memory Binding</p>
</li>
<li>
<p>Copy Commands</p>
</li>
<li>
<p>Clear Commands</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_capabilities_4"><a class="anchor" href="chap41.html#_capabilities_4"></a>41.8.1. Capabilities</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>When calling <a href="chap41.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> with
<code>pVideoProfile-&gt;videoCodecOperation</code> specified as one of the encode
operation bits, the <a href="chap41.html#VkVideoEncodeCapabilitiesKHR">VkVideoEncodeCapabilitiesKHR</a> structure <strong class="purple">must</strong> be
included in the <code>pNext</code> chain of the <a href="chap41.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>
structure to retrieve capabilities specific to video encoding.</p>
</div>
<div class="paragraph">
<p>The <code>VkVideoEncodeCapabilitiesKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeCapabilitiesKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeCapabilitiesKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                         <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                                   <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoEncodeCapabilityFlagsKHR</span>         <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkVideoEncodeRateControlModeFlagsKHR</span>    <span class="n">rateControlModes</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                 <span class="n">rateControlLayerCount</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                 <span class="n">qualityLevelCount</span><span class="p">;</span>
    <span class="n">VkExtent2D</span>                              <span class="n">inputImageDataFillAlignment</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeCapabilitiesKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap41.html#VkVideoEncodeCapabilityFlagBitsKHR">VkVideoEncodeCapabilityFlagBitsKHR</a>
describing supported encoding features.</p>
</li>
<li>
<p><code>rateControlModes</code> is a bitmask of
<a href="chap41.html#VkVideoEncodeRateControlModeFlagBitsKHR">VkVideoEncodeRateControlModeFlagBitsKHR</a> describing supported rate
control modes.
All implementations <strong class="purple">must</strong> support
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</code>.</p>
</li>
<li>
<p><code>rateControlLayerCount</code> reports the maximum number of rate control
layers supported.
Implementations <strong class="purple">must</strong> report at least 1.</p>
</li>
<li>
<p><code>qualityLevelCount</code> is the number of discrete quality levels
supported.
Implementations <strong class="purple">must</strong> report at least 1.</p>
</li>
<li>
<p><code>inputImageDataFillAlignment</code> reports alignment of data that should
be filled in the input image horizontally and vertically in pixels
before encode operations are performed on the input image.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The input content and encode resolution (specified in
<a href="chap41.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>::<code>codedExtent</code>) may not be aligned with the
codec-specific coding block size.
For example, the input content may be 1920x1080 and the coding block size
may be 16x16 pixel blocks.
In this example, the content is horizontally aligned with the coding block
size, but not vertically aligned with the coding block size.
Encoding of the last row of blocks may be impacted by contents of the input
image in pixel rows 1081 to 1088 (the next vertical alignment with the
coding block size).
In general, to ensure efficient encoding for the last row/column of blocks,
and/or to ensure consistent encoding results between repeated encoding of
the same input content, these extra pixel rows/columns should be filled to
known values up to the coding block size alignment before encoding
operations are performed.
Some implementations support performing auto-fill of unaligned pixels beyond
a specific alignment, which is reported in
<code>inputImageDataFillAlignment</code>.
For example, if an implementation reports 1x1 in
<code>inputImageDataFillAlignment</code>, then the implementation will perform
auto-fill for any unaligned pixels beyond the encode resolution up to the
next coding block size.
For a coding block size of 16x16, if the implementation reports 16x16 in
<code>inputImageDataFillAlignment</code>, then it is the application’s
responsibility to fill any unaligned pixels, if desired.
If not, it may impact the encoding efficiency, but it will not affect the
validity of the generated bitstream.
If the implementation reports 8x8 in <code>inputImageDataFillAlignment</code>, then
for the 1920x1080 example, since the content is aligned to 8 pixels
vertically, the implementation will auto-fill pixel rows 1081 to 1088 (up to
the 16x16 coding block size in the example).
The auto-fill value(s) are implementation-specific.
The auto-fill value(s) are not written to the input image memory, but are
used as part of the encoding operation on the input image.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeCapabilitiesKHR-sType-sType" href="chap41.html#VUID-VkVideoEncodeCapabilitiesKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeCapabilitiesKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_CAPABILITIES_KHR</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeCapabilityFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeCapabilityFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEncodeCapabilityFlagsKHR</code> is a bitmask type for setting a mask
of zero or more <a href="chap41.html#VkVideoEncodeCapabilityFlagBitsKHR">VkVideoEncodeCapabilityFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">may</strong> be set in <a href="chap41.html#VkVideoEncodeCapabilitiesKHR">VkVideoEncodeCapabilitiesKHR</a>::<code>flags</code>,
indicating the encoding tools supported, are:</p>
</div>
<div id="VkVideoEncodeCapabilityFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeCapabilityFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_CAPABILITY_PRECEDING_EXTERNALLY_ENCODED_BYTES_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeCapabilityFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_CAPABILITY_PRECEDING_EXTERNALLY_ENCODED_BYTES_BIT_KHR</code>
reports that the implementation supports use of
<a href="chap41.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>::<code>precedingExternallyEncodedBytes</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_video_encode_vulkan_command_buffer_commands"><a class="anchor" href="chap41.html#_video_encode_vulkan_command_buffer_commands"></a>41.8.2. Video Encode Vulkan Command Buffer Commands</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To launch an encode operation that results in bitstream generation, call:</p>
</div>
<div id="vkCmdEncodeVideoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="kt">void</span> <span class="nf">vkCmdEncodeVideoKHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkVideoEncodeInfoKHR</span><span class="o">*</span>                 <span class="n">pEncodeInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer to be filled with this
function for encoding to generate a bitstream.</p>
</li>
<li>
<p><code>pEncodeInfo</code> is a pointer to a <a href="chap41.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>
structure.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdEncodeVideoKHR-commandBuffer-parameter" href="chap41.html#VUID-vkCmdEncodeVideoKHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdEncodeVideoKHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdEncodeVideoKHR-pEncodeInfo-parameter" href="chap41.html#VUID-vkCmdEncodeVideoKHR-pEncodeInfo-parameter"></a> <span class="vuid">VUID-vkCmdEncodeVideoKHR-pEncodeInfo-parameter</span><br>
 <code>pEncodeInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdEncodeVideoKHR-commandBuffer-recording" href="chap41.html#VUID-vkCmdEncodeVideoKHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdEncodeVideoKHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdEncodeVideoKHR-commandBuffer-cmdpool" href="chap41.html#VUID-vkCmdEncodeVideoKHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdEncodeVideoKHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support encode operations</p>
</li>
<li>
<p><a id="VUID-vkCmdEncodeVideoKHR-renderpass" href="chap41.html#VUID-vkCmdEncodeVideoKHR-renderpass"></a> <span class="vuid">VUID-vkCmdEncodeVideoKHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdEncodeVideoKHR-videocoding" href="chap41.html#VUID-vkCmdEncodeVideoKHR-videocoding"></a> <span class="vuid">VUID-vkCmdEncodeVideoKHR-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called inside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdEncodeVideoKHR-bufferlevel" href="chap41.html#VUID-vkCmdEncodeVideoKHR-bufferlevel"></a> <span class="vuid">VUID-vkCmdEncodeVideoKHR-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap41.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                       <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                           <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoEncodeFlagsKHR</span>                 <span class="n">flags</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                              <span class="n">qualityLevel</span><span class="p">;</span>
    <span class="n">VkBuffer</span>                              <span class="n">dstBitstreamBuffer</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>                          <span class="n">dstBitstreamBufferOffset</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>                          <span class="n">dstBitstreamBufferMaxRange</span><span class="p">;</span>
    <span class="n">VkVideoPictureResourceInfoKHR</span>         <span class="n">srcPictureResource</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoReferenceSlotInfoKHR</span><span class="o">*</span>    <span class="n">pSetupReferenceSlot</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                              <span class="n">referenceSlotCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoReferenceSlotInfoKHR</span><span class="o">*</span>    <span class="n">pReferenceSlots</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                              <span class="n">precedingExternallyEncodedBytes</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is a pointer to a structure extending this structure.
A codec-specific extension structure <strong class="purple">must</strong> be chained to specify what
bitstream unit to generate with this encode operation.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
<li>
<p><code>qualityLevel</code> is the coding quality level of the encoding.
It is defined by the codec-specific extensions.</p>
</li>
<li>
<p><code>dstBitstreamBuffer</code> is the buffer where the encoded bitstream
output will be produced.</p>
</li>
<li>
<p><code>dstBitstreamBufferOffset</code> is the offset in the
<code>dstBitstreamBuffer</code> where the encoded bitstream output will start.
<code>dstBitstreamBufferOffset</code>’s value <strong class="purple">must</strong> be aligned to
<a href="chap41.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>minBitstreamBufferOffsetAlignment</code>,
as reported by the implementation.</p>
</li>
<li>
<p><code>dstBitstreamBufferMaxRange</code> is the maximum size of the
<code>dstBitstreamBuffer</code> that can be used while the encoded bitstream
output is produced.
<code>dstBitstreamBufferMaxRange</code>’s value <strong class="purple">must</strong> be aligned to
<a href="chap41.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>minBitstreamBufferSizeAlignment</code>, as
reported by the implementation.</p>
</li>
<li>
<p><code>srcPictureResource</code> is the Picture Resource of the
<a href="chap41.html#encode-input-picture">Input Picture</a> to be encoded by the operation.</p>
</li>
<li>
<p><code>pSetupReferenceSlot</code> is a pointer to a
<a href="chap41.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structure used for generating a
reconstructed reference slot and Picture Resource.
<code>pSetupReferenceSlot-&gt;slotIndex</code> specifies the slot index number to
use as a target for producing the Reconstructed (DPB) data.
<code>pSetupReferenceSlot</code> <strong class="purple">must</strong> be one of the entries provided in
<a href="chap41.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a> via the <code>pReferenceSlots</code> within the
<a href="chap41.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command that established the Vulkan Video
Encode Context for this command.</p>
</li>
<li>
<p><code>referenceSlotCount</code> is the number of Reconstructed Reference
Pictures that will be used when this encoding operation is executing.</p>
</li>
<li>
<p><code>pReferenceSlots</code> is <code>NULL</code> or a pointer to an array of
<a href="chap41.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structures that will be used when this
encoding operation is executing.
Each entry in <code>pReferenceSlots</code> <strong class="purple">must</strong> be one of the entries provided
in <a href="chap41.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a> via the <code>pReferenceSlots</code> within
the <a href="chap41.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command that established the Vulkan
Video Encode Context for this command.</p>
</li>
<li>
<p><code>precedingExternallyEncodedBytes</code> is the number of bytes externally
encoded for insertion in the active video encode session overall
bitstream prior to the bitstream that will be generated by the
implementation for this instance of <code>VkVideoEncodeInfoKHR</code>.
Valid when <a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>::<code>rateControlMode</code>
is not <code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</code>.
The value provided is used to update the implementation’s rate control
algorithm for the rate control layer this instance of
<code>VkVideoEncodeInfoKHR</code> belongs to, by accounting for the bitrate
budget consumed by these externally encoded bytes.
See <a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a> for additional information
about encode rate control.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The coded size of the encode operation is specified in <code>codedExtent</code> of
<code>srcPictureResource</code>.</p>
</div>
<div class="paragraph">
<p>Multiple <a href="chap41.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a> commands <strong class="purple">may</strong> be recorded within a Vulkan
Video Encode Context.
The execution of each <a href="chap41.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a> command will result in
generating codec-specific bitstream units.
These bitstream units are generated consecutively into the bitstream buffer
specified in <code>dstBitstreamBuffer</code> of a <code>VkVideoEncodeInfoKHR</code>
structure within the <a href="chap41.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command.
The produced bitstream is the sum of all these bitstream units, including
any padding between the bitstream units.
Any bitstream padding <strong class="purple">must</strong> be filled with data compliant to the codec
standard so as not to cause any syntax errors during decoding of the
bitstream units with the padding included.
The range of the bitstream buffer written <strong class="purple">can</strong> be queried via
<a href="chap18.html#queries-video-encode-bitstream-buffer-range">video encode bitstream buffer
range queries</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-None-07012" href="chap41.html#VUID-VkVideoEncodeInfoKHR-None-07012"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-None-07012</span><br>

The bound video session object <strong class="purple">must</strong> not be in <em>uninitialized</em> state</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-sType-sType" href="chap41.html#VUID-VkVideoEncodeInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-pNext-pNext" href="chap41.html#VUID-VkVideoEncodeInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap41.html#VkVideoEncodeH264EmitPictureParametersInfoEXT">VkVideoEncodeH264EmitPictureParametersInfoEXT</a>, <a href="chap41.html#VkVideoEncodeH264VclFrameInfoEXT">VkVideoEncodeH264VclFrameInfoEXT</a>, <a href="chap41.html#VkVideoEncodeH265EmitPictureParametersInfoEXT">VkVideoEncodeH265EmitPictureParametersInfoEXT</a>, or <a href="chap41.html#VkVideoEncodeH265VclFrameInfoEXT">VkVideoEncodeH265VclFrameInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-sType-unique" href="chap41.html#VUID-VkVideoEncodeInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-flags-zerobitmask" href="chap41.html#VUID-VkVideoEncodeInfoKHR-flags-zerobitmask"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-flags-zerobitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-dstBitstreamBuffer-parameter" href="chap41.html#VUID-VkVideoEncodeInfoKHR-dstBitstreamBuffer-parameter"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-dstBitstreamBuffer-parameter</span><br>
 <code>dstBitstreamBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-srcPictureResource-parameter" href="chap41.html#VUID-VkVideoEncodeInfoKHR-srcPictureResource-parameter"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-srcPictureResource-parameter</span><br>
 <code>srcPictureResource</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-pSetupReferenceSlot-parameter" href="chap41.html#VUID-VkVideoEncodeInfoKHR-pSetupReferenceSlot-parameter"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-pSetupReferenceSlot-parameter</span><br>
 If <code>pSetupReferenceSlot</code> is not <code>NULL</code>, <code>pSetupReferenceSlot</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-pReferenceSlots-parameter" href="chap41.html#VUID-VkVideoEncodeInfoKHR-pReferenceSlots-parameter"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-pReferenceSlots-parameter</span><br>
 If <code>referenceSlotCount</code> is not <code>0</code>, <code>pReferenceSlots</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>referenceSlotCount</code> valid <a href="chap41.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap41.html#VkVideoEncodeFlagsKHR">VkVideoEncodeFlagsKHR</a> is a bitmask type for setting a mask, but is
currently reserved for future use.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeRateControlInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeRateControlInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeRateControlInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                    <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoEncodeRateControlFlagsKHR</span>               <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkVideoEncodeRateControlModeFlagBitsKHR</span>        <span class="n">rateControlMode</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                        <span class="n">layerCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoEncodeRateControlLayerInfoKHR</span><span class="o">*</span>    <span class="n">pLayerConfigs</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeRateControlInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
<li>
<p><code>rateControlMode</code> is a <a href="chap41.html#VkVideoEncodeRateControlModeFlagBitsKHR">VkVideoEncodeRateControlModeFlagBitsKHR</a>
value specifying the encode stream rate control mode.</p>
</li>
<li>
<p><code>layerCount</code> specifies the number of rate control layers in the
video encode stream.</p>
</li>
<li>
<p><code>pLayerConfigs</code> is a pointer to an array of
<a href="chap41.html#VkVideoEncodeRateControlLayerInfoKHR">VkVideoEncodeRateControlLayerInfoKHR</a> structures specifying the
rate control configurations of <code>layerCount</code> rate control layers.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Including this structure in the <code>pNext</code> chain of
<a href="chap41.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a> and including
<code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_BIT_KHR</code> in
<a href="chap41.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a>::<code>flags</code> will define stream rate
control settings for video encoding.</p>
</div>
<div class="paragraph">
<p>Additional structures providing codec-specific rate control parameters <strong class="purple">may</strong>
need to be included in the <code>pNext</code> chain of
<code>VkVideoCodingControlInfoKHR</code> depending on the codec profile the bound
video session was created with and the parameters specified in
<code>VkVideoEncodeRateControlInfoKHR</code> (see <a href="chap41.html#video-session-control">Video
Session Control</a>).</p>
</div>
<div class="paragraph">
<p>To ensure that the video session is properly initialized with stream-level
rate control settings, the application <strong class="purple">must</strong> call
<a href="chap41.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a> with stream-level rate control settings at
least once in execution order before the first <a href="chap41.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a>
command that is executed after video session reset.
If not provided, default implementation-specific stream rate control
settings will be used.</p>
</div>
<div class="paragraph">
<p>Stream rate control settings <strong class="purple">can</strong> also be re-initialized during an active
video encoding session.
The re-initialization takes effect whenever the
<code>VkVideoEncodeRateControlInfoKHR</code> structure is included in the
<code>pNext</code> chain of the <a href="chap41.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a> structure in the
call to <a href="chap41.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a>, and only impacts
<a href="chap41.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a> operations that follow in execution order.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeRateControlInfoKHR-sType-sType" href="chap41.html#VUID-VkVideoEncodeRateControlInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeRateControlInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_RATE_CONTROL_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeRateControlInfoKHR-flags-zerobitmask" href="chap41.html#VUID-VkVideoEncodeRateControlInfoKHR-flags-zerobitmask"></a> <span class="vuid">VUID-VkVideoEncodeRateControlInfoKHR-flags-zerobitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeRateControlInfoKHR-rateControlMode-parameter" href="chap41.html#VUID-VkVideoEncodeRateControlInfoKHR-rateControlMode-parameter"></a> <span class="vuid">VUID-VkVideoEncodeRateControlInfoKHR-rateControlMode-parameter</span><br>
 <code>rateControlMode</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoEncodeRateControlModeFlagBitsKHR">VkVideoEncodeRateControlModeFlagBitsKHR</a> value</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeRateControlInfoKHR-pLayerConfigs-parameter" href="chap41.html#VUID-VkVideoEncodeRateControlInfoKHR-pLayerConfigs-parameter"></a> <span class="vuid">VUID-VkVideoEncodeRateControlInfoKHR-pLayerConfigs-parameter</span><br>
 <code>pLayerConfigs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>layerCount</code> valid <a href="chap41.html#VkVideoEncodeRateControlLayerInfoKHR">VkVideoEncodeRateControlLayerInfoKHR</a> structures</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeRateControlInfoKHR-layerCount-arraylength" href="chap41.html#VUID-VkVideoEncodeRateControlInfoKHR-layerCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeRateControlInfoKHR-layerCount-arraylength</span><br>
 <code>layerCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeRateControlFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeRateControlFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEncodeRateControlFlagsKHR</code> is a bitmask type for setting a mask,
but currently reserved for future use.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The rate control modes are defined with the following enums:</p>
</div>
<div id="VkVideoEncodeRateControlModeFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeRateControlModeFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_RATE_CONTROL_MODE_CBR_BIT_KHR</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_RATE_CONTROL_MODE_VBR_BIT_KHR</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeRateControlModeFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</code> for disabling rate
control.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_CBR_BIT_KHR</code> for constant bitrate
rate control mode.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_VBR_BIT_KHR</code> for variable bitrate
rate control mode.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeRateControlModeFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeRateControlModeFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEncodeRateControlModeFlagsKHR</code> is a bitmask type for setting a
mask of zero or more <a href="chap41.html#VkVideoEncodeRateControlModeFlagBitsKHR">VkVideoEncodeRateControlModeFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeRateControlLayerInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeRateControlLayerInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeRateControlLayerInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">averageBitrate</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">maxBitrate</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">frameRateNumerator</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">frameRateDenominator</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">virtualBufferSizeInMs</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">initialVirtualBufferSizeInMs</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeRateControlLayerInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is a pointer to a structure extending this structure.</p>
</li>
<li>
<p><code>averageBitrate</code> is the average bitrate in bits/second.
Valid when rate control mode is not
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</code>.</p>
</li>
<li>
<p><code>maxBitrate</code> is the peak bitrate in bits/second.
Valid when rate control mode is
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_VBR_BIT_KHR</code>.</p>
</li>
<li>
<p><code>frameRateNumerator</code> is the numerator of the frame rate.
Valid when rate control mode is not
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</code>.</p>
</li>
<li>
<p><code>frameRateDenominator</code> is the denominator of the frame rate.
Valid when rate control mode is not
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</code>.</p>
</li>
<li>
<p><code>virtualBufferSizeInMs</code> is the leaky bucket model virtual buffer
size in milliseconds, with respect to peak bitrate.
Valid when rate control mode is not
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</code>.
For example, virtual buffer size is (<code>virtualBufferSizeInMs</code> ×
<code>maxBitrate</code> / 1000).</p>
</li>
<li>
<p><code>initialVirtualBufferSizeInMs</code> is the initial occupancy in
milliseconds of the virtual buffer in the leaky bucket model.
Valid when the rate control mode is not
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A codec-specific structure specifying additional per-layer rate control
settings <strong class="purple">must</strong> be chained to <code>VkVideoEncodeRateControlLayerInfoKHR</code>.
If multiple rate control layers are enabled
(<a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>::<code>layerCount</code> is greater than 1),
then the chained codec-specific extension structure also identifies the
specific video coding layer its parent
<code>VkVideoEncodeRateControlLayerInfoKHR</code> applies to.
If multiple rate control layers are enabled, the number of rate control
layers <strong class="purple">must</strong> match the number of video coding layers.
The specification for an encode codec-specific extension would describe how
multiple video coding layers are enabled for the corresponding codec.</p>
</div>
<div class="paragraph">
<p>Per-layer rate control settings for all enabled rate control layers <strong class="purple">must</strong> be
initialized or re-initialized whenever stream rate control settings are
provided via <a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>.
This is done by specifying settings for all enabled rate control layers in
<a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>::<code>pLayerConfigs</code>.</p>
</div>
<div class="paragraph">
<p>Including this structure in the <code>pNext</code> chain of
<a href="chap41.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a> and including
<code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_LAYER_BIT_KHR</code> in
<a href="chap41.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a>::<code>flags</code> will define stream rate
control settings for individual layers during video encoding.
This adjustment only impacts the specified layer without impacting the rate
control settings or implementation rate control algorithm behavior for any
other enabled rate control layers.
The adjustment takes effect whenever the corresponding
<a href="chap41.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a> is executed, and only impacts
<a href="chap41.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a> operations pertaining to the corresponding video
coding layer that follow in execution order.</p>
</div>
<div class="paragraph">
<p>It is possible for an application to enable multiple video coding layers
(via codec-specific extensions to encoding operations) while only enabling a
single layer of rate control for the entire video stream.
To achieve this, <code>layerCount</code> in <a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>
<strong class="purple">must</strong> be set to 1, and the single <code>VkVideoEncodeRateControlLayerInfoKHR</code>
provided in <code>pLayerConfigs</code> would apply to all encoded segments of the
video stream, regardless of which codec-defined video coding layer they
belong to.
In this case, the implementation decides bitrate distribution across video
coding layers (if applicable to the specified stream rate control mode).</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeRateControlLayerInfoKHR-sType-sType" href="chap41.html#VUID-VkVideoEncodeRateControlLayerInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeRateControlLayerInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_RATE_CONTROL_LAYER_INFO_KHR</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="encode-h264"><a class="anchor" href="chap41.html#encode-h264"></a>41.9. Encode H.264</h3>
<div class="paragraph">
<p>The <code><a href="chap53.html#VK_EXT_video_encode_h264">VK_EXT_video_encode_h264</a></code> extension adds H.264 codec specific
structures/types needed to support H.264 encoding.
Unless otherwise noted, all references to the H.264 specification are to the
2010 edition published by the ITU-T, dated March 2010.
This specification is available at <a href="https://www.itu.int/rec/T-REC-H.264" class="bare">https://www.itu.int/rec/T-REC-H.264</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Refer to the <a href="chap1.html">Preamble</a> for information on how the Khronos
Intellectual Property Rights Policy relates to normative references to
external materials not created by Khronos.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="_h_264_encode_profile"><a class="anchor" href="chap41.html#_h_264_encode_profile"></a>41.9.1. H.264 encode profile</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH264ProfileInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH264ProfileInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264ProfileInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>           <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>               <span class="n">pNext</span><span class="p">;</span>
    <span class="n">StdVideoH264ProfileIdc</span>    <span class="n">stdProfileIdc</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264ProfileInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stdProfileIdc</code> is a <code>StdVideoH264ProfileIdc</code> value specifying
the H.264 codec profile IDC.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An H.264 encode profile is specified by including a
<code>VkVideoEncodeH264ProfileInfoEXT</code> structure in the <code>pNext</code> chain of
the <a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> structure when
<a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>::<code>videoCodecOperation</code> is
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264ProfileInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH264ProfileInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264ProfileInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_PROFILE_INFO_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_capabilities_5"><a class="anchor" href="chap41.html#_capabilities_5"></a>41.9.2. Capabilities</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>When calling <a href="chap41.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> with
<code>pVideoProfile-&gt;videoCodecOperation</code> specified as
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code>, the
<a href="chap41.html#VkVideoEncodeH264CapabilitiesEXT">VkVideoEncodeH264CapabilitiesEXT</a> structure <strong class="purple">must</strong> be included in the
<code>pNext</code> chain of the <a href="chap41.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> structure to retrieve
more capabilities specific to H.264 video encoding.</p>
</div>
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoEncodeH264CapabilitiesEXT">VkVideoEncodeH264CapabilitiesEXT</a> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH264CapabilitiesEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264CapabilitiesEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                        <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                                  <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH264CapabilityFlagsEXT</span>    <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH264InputModeFlagsEXT</span>     <span class="n">inputModeFlags</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH264OutputModeFlagsEXT</span>    <span class="n">outputModeFlags</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                <span class="n">maxPPictureL0ReferenceCount</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                <span class="n">maxBPictureL0ReferenceCount</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                <span class="n">maxL1ReferenceCount</span><span class="p">;</span>
    <span class="n">VkBool32</span>                               <span class="n">motionVectorsOverPicBoundariesFlag</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                               <span class="n">maxBytesPerPicDenom</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                               <span class="n">maxBitsPerMbDenom</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                               <span class="n">log2MaxMvLengthHorizontal</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                               <span class="n">log2MaxMvLengthVertical</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264CapabilitiesEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap41.html#VkVideoEncodeH264CapabilityFlagBitsEXT">VkVideoEncodeH264CapabilityFlagBitsEXT</a>
describing supported encoding tools.</p>
</li>
<li>
<p><code>inputModeFlags</code> is a bitmask of
<a href="chap41.html#VkVideoEncodeH264InputModeFlagBitsEXT">VkVideoEncodeH264InputModeFlagBitsEXT</a> describing supported command
buffer input granularities/modes.</p>
</li>
<li>
<p><code>outputModeFlags</code> is a bitmask of
<a href="chap41.html#VkVideoEncodeH264OutputModeFlagBitsEXT">VkVideoEncodeH264OutputModeFlagBitsEXT</a> describing supported output
(bitstream size reporting) granularities/modes.</p>
</li>
<li>
<p><code>maxPPictureL0ReferenceCount</code> reports the maximum number of
reference pictures the implementation supports in the reference list L0
for P pictures.</p>
</li>
<li>
<p><code>maxBPictureL0ReferenceCount</code> reports the maximum number of
reference pictures the implementation supports in the reference list L0
for B pictures.
The reported value is <code>0</code> if encoding of B pictures is not supported.</p>
</li>
<li>
<p><code>maxL1ReferenceCount</code> reports the maximum number of reference
pictures the implementation supports in the reference list L1 if
encoding of B pictures is supported.
The reported value is <code>0</code> if encoding of B pictures is not supported.</p>
</li>
<li>
<p><code>motionVectorsOverPicBoundariesFlag</code> if <code>VK_TRUE</code>, indicates
motion_vectors_over_pic_boundaries_flag will be enabled if
bitstream_restriction_flag is enabled in StdVideoH264SpsVuiFlags.</p>
</li>
<li>
<p><code>maxBytesPerPicDenom</code> reports the value that will be used for
max_bytes_per_pic_denom if bitstream_restriction_flag is enabled in
StdVideoH264SpsVuiFlags.</p>
</li>
<li>
<p><code>maxBitsPerMbDenom</code> reports the value that will be used for
max_bits_per_mb_denom if bitstream_restriction_flag is enabled in
StdVideoH264SpsVuiFlags.</p>
</li>
<li>
<p><code>log2MaxMvLengthHorizontal</code> reports the value that will be used for
log2_max_mv_length_horizontal if bitstream_restriction_flag is enabled
in StdVideoH264SpsVuiFlags.</p>
</li>
<li>
<p><code>log2MaxMvLengthVertical</code> reports the value that will be used for
log2_max_mv_length_vertical if bitstream_restriction_flag is enabled in
StdVideoH264SpsVuiFlags.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When <a href="chap41.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> is called to query the
capabilities with parameter <code>videoCodecOperation</code> specified as
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code>, a
<code>VkVideoEncodeH264CapabilitiesEXT</code> structure <strong class="purple">can</strong> be chained to
<a href="chap41.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> to retrieve H.264 extension specific
capabilities.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264CapabilitiesEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH264CapabilitiesEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264CapabilitiesEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_CAPABILITIES_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeH264CapabilityFlagsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeH264CapabilityFlagsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEncodeH264CapabilityFlagsEXT</code> is a bitmask type for setting a
mask of zero or more <a href="chap41.html#VkVideoEncodeH264CapabilityFlagBitsEXT">VkVideoEncodeH264CapabilityFlagBitsEXT</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">may</strong> be set in
<a href="chap41.html#VkVideoEncodeH264CapabilitiesEXT">VkVideoEncodeH264CapabilitiesEXT</a>::<code>flags</code>, indicating the encoding
tools supported, are:</p>
</div>
<div id="VkVideoEncodeH264CapabilityFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeH264CapabilityFlagBitsEXT</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_DIRECT_8X8_INFERENCE_ENABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_DIRECT_8X8_INFERENCE_DISABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_SEPARATE_COLOUR_PLANE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_QPPRIME_Y_ZERO_TRANSFORM_BYPASS_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_SCALING_LISTS_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000010</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_HRD_COMPLIANCE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000020</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_CHROMA_QP_OFFSET_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000040</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_SECOND_CHROMA_QP_OFFSET_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000080</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_PIC_INIT_QP_MINUS26_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000100</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_WEIGHTED_PRED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000200</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_WEIGHTED_BIPRED_EXPLICIT_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000400</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_WEIGHTED_BIPRED_IMPLICIT_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000800</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_WEIGHTED_PRED_NO_TABLE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00001000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_TRANSFORM_8X8_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00002000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_CABAC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00004000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_CAVLC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00008000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_DEBLOCKING_FILTER_DISABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00010000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_DEBLOCKING_FILTER_ENABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00020000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_DEBLOCKING_FILTER_PARTIAL_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00040000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_DISABLE_DIRECT_SPATIAL_MV_PRED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00080000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_MULTIPLE_SLICE_PER_FRAME_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00100000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_SLICE_MB_COUNT_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00200000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_ROW_UNALIGNED_SLICE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00400000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_DIFFERENT_SLICE_TYPE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00800000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_B_FRAME_IN_L1_LIST_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x01000000</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264CapabilityFlagBitsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_DIRECT_8X8_INFERENCE_ENABLED_BIT_EXT</code>
reports if enabling direct_8x8_inference_flag in StdVideoH264SpsFlags is
supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_DIRECT_8X8_INFERENCE_DISABLED_BIT_EXT</code>
reports if disabling direct_8x8_inference_flag in StdVideoH264SpsFlags
is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_SEPARATE_COLOUR_PLANE_BIT_EXT</code>
reports if enabling separate_colour_plane_flag in StdVideoH264SpsFlags
is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_QPPRIME_Y_ZERO_TRANSFORM_BYPASS_BIT_EXT</code>
reports if enabling qpprime_y_zero_transform_bypass_flag in
StdVideoH264SpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_SCALING_LISTS_BIT_EXT</code> reports if
enabling seq_scaling_matrix_present_flag in StdVideoH264SpsFlags or
pic_scaling_matrix_present_flag in StdVideoH264PpsFlags are supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_HRD_COMPLIANCE_BIT_EXT</code> reports if
the implementation guarantees generating a HRD compliant bitstream if
nal_hrd_parameters_present_flag or vcl_hrd_parameters_present_flag are
enabled in StdVideoH264SpsVuiFlags.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_CHROMA_QP_OFFSET_BIT_EXT</code> reports
if setting non-zero chroma_qp_index_offset in
StdVideoH264PictureParameterSet is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_SECOND_CHROMA_QP_OFFSET_BIT_EXT</code>
reports if setting non-zero second_chroma_qp_index_offset in
StdVideoH264PictureParameterSet is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_PIC_INIT_QP_MINUS26_BIT_EXT</code>
reports if setting non-zero pic_init_qp_minus26 in
StdVideoH264PictureParameterSet is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_WEIGHTED_PRED_BIT_EXT</code> reports if
enabling weighted_pred_flag in StdVideoH264PpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_WEIGHTED_BIPRED_EXPLICIT_BIT_EXT</code>
reports if using STD_VIDEO_H264_WEIGHTED_BIPRED_IDC_EXPLICIT from
StdVideoH264WeightedBipredIdc is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_WEIGHTED_BIPRED_IMPLICIT_BIT_EXT</code>
reports if using STD_VIDEO_H264_WEIGHTED_BIPRED_IDC_IMPLICIT from
StdVideoH264WeightedBipredIdc is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_WEIGHTED_PRED_NO_TABLE_BIT_EXT</code>
reports that when weighted_pred_flag is enabled or
STD_VIDEO_H264_WEIGHTED_BIPRED_IDC_EXPLICIT from
StdVideoH264WeightedBipredIdc is used, the implementation is able to
internally decide syntax for pred_weight_table.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_TRANSFORM_8X8_BIT_EXT</code> reports if
enabling transform_8x8_mode_flag in StdVideoH264PpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_CABAC_BIT_EXT</code> reports if CABAC
entropy coding is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_CAVLC_BIT_EXT</code> reports if CAVLC
entropy coding is supported.
An implementation <strong class="purple">must</strong> support at least one entropy coding mode.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_DEBLOCKING_FILTER_DISABLED_BIT_EXT</code>
reports if using STD_VIDEO_H264_DISABLE_DEBLOCKING_FILTER_IDC_DISABLED
from StdVideoH264DisableDeblockingFilterIdc is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_DEBLOCKING_FILTER_ENABLED_BIT_EXT</code>
reports if using STD_VIDEO_H264_DISABLE_DEBLOCKING_FILTER_IDC_ENABLED
from StdVideoH264DisableDeblockingFilterIdc is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_DEBLOCKING_FILTER_PARTIAL_BIT_EXT</code>
reports if using STD_VIDEO_H264_DISABLE_DEBLOCKING_FILTER_IDC_PARTIAL
from StdVideoH264DisableDeblockingFilterIdc is supported.
An implementation <strong class="purple">must</strong> support at least one deblocking filter mode.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_DISABLE_DIRECT_SPATIAL_MV_PRED_BIT_EXT</code>
reports if disabling
<code>StdVideoEncodeH264SliceHeaderFlags</code>::direct_spatial_mv_pred_flag is
supported when it is present in the slice header.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_MULTIPLE_SLICE_PER_FRAME_BIT_EXT</code>
reports if encoding multiple slices per frame is supported.
If not set, the implementation is only able to encode a single slice for
the entire frame.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_SLICE_MB_COUNT_BIT_EXT</code> reports
support for configuring
<a href="chap41.html#VkVideoEncodeH264NaluSliceInfoEXT">VkVideoEncodeH264NaluSliceInfoEXT</a>::<code>mbCount</code> and
first_mb_in_slice in StdVideoEncodeH264SliceHeader for each slice in a
frame with multiple slices.
If not supported, the implementation decides the number of macroblocks
in each slice based on
<a href="chap41.html#VkVideoEncodeH264VclFrameInfoEXT">VkVideoEncodeH264VclFrameInfoEXT</a>::<code>naluSliceEntryCount</code>.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_ROW_UNALIGNED_SLICE_BIT_EXT</code>
reports that each slice in a frame with multiple slices may begin or
finish at any offset in a macroblock row.
If not supported, all slices in the frame <strong class="purple">must</strong> begin at the start of a
macroblock row (and hence each slice <strong class="purple">must</strong> finish at the end of a
macroblock row).</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_DIFFERENT_SLICE_TYPE_BIT_EXT</code>
reports that when
<code>VK_VIDEO_ENCODE_H264_CAPABILITY_MULTIPLE_SLICE_PER_FRAME_BIT_EXT</code>
is supported and a frame is encoded with multiple slices, the
implementation allows encoding each slice with a different
<code>StdVideoEncodeH264SliceHeader</code>::slice_type.
If not supported, all slices of the frame <strong class="purple">must</strong> be encoded with the same
<code>slice_type</code> which corresponds to the picture type of the frame.
For example, all slices of a P-frame would be encoded as P-slices.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_B_FRAME_IN_L1_LIST_BIT_EXT</code> reports
support for using a B frame as L1 reference.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeH264InputModeFlagsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeH264InputModeFlagsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEncodeH264InputModeFlagsEXT</code> is a bitmask type for setting a
mask of zero or more <a href="chap41.html#VkVideoEncodeH264InputModeFlagBitsEXT">VkVideoEncodeH264InputModeFlagBitsEXT</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>inputModeFlags</code> field reports the various command buffer input
granularities supported by the implementation as follows:</p>
</div>
<div id="VkVideoEncodeH264InputModeFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeH264InputModeFlagBitsEXT</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_H264_INPUT_MODE_FRAME_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_INPUT_MODE_SLICE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_INPUT_MODE_NON_VCL_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264InputModeFlagBitsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_H264_INPUT_MODE_FRAME_BIT_EXT</code> indicates that a
single command buffer <strong class="purple">must</strong> at least encode an entire frame.
Any non-VCL NALUs <strong class="purple">must</strong> be encoded using the same command buffer as the
frame if <code>VK_VIDEO_ENCODE_H264_INPUT_MODE_NON_VCL_BIT_EXT</code> is not
supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_INPUT_MODE_SLICE_BIT_EXT</code> indicates that a
single command buffer <strong class="purple">must</strong> at least encode a single slice.
Any non-VCL NALUs <strong class="purple">must</strong> be encoded using the same command buffer as the
first slice of the frame if
<code>VK_VIDEO_ENCODE_H264_INPUT_MODE_NON_VCL_BIT_EXT</code> is not supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_INPUT_MODE_NON_VCL_BIT_EXT</code> indicates that a
single command buffer <strong class="purple">may</strong> encode a non-VCL NALU by itself.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An implementation <strong class="purple">must</strong> support at least one of
<code>VK_VIDEO_ENCODE_H264_INPUT_MODE_FRAME_BIT_EXT</code> or
<code>VK_VIDEO_ENCODE_H264_INPUT_MODE_SLICE_BIT_EXT</code>.</p>
</div>
<div class="paragraph">
<p>If <code>VK_VIDEO_ENCODE_H264_INPUT_MODE_SLICE_BIT_EXT</code> is not supported, the
following two additional restrictions apply for frames encoded with multiple
slices.
First, all frame slices <strong class="purple">must</strong> have the same pRefList0ModOperations and the
same pRefList1ModOperations.
Second, the order in which slices appear in
<a href="chap41.html#VkVideoEncodeH264VclFrameInfoEXT">VkVideoEncodeH264VclFrameInfoEXT</a>::<code>pNaluSliceEntries</code> or in the
command buffer <strong class="purple">must</strong> match the placement order of the slices in the frame.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeH264OutputModeFlagsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeH264OutputModeFlagsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEncodeH264OutputModeFlagsEXT</code> is a bitmask type for setting a
mask of zero or more <a href="chap41.html#VkVideoEncodeH264InputModeFlagBitsEXT">VkVideoEncodeH264InputModeFlagBitsEXT</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">may</strong> be set in
<a href="chap41.html#VkVideoEncodeH264CapabilitiesEXT">VkVideoEncodeH264CapabilitiesEXT</a>::<code>outputModeFlags</code>, indicating
the minimum bitstream generation commands that <strong class="purple">must</strong> be included between
each <a href="chap41.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> and <a href="chap41.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> pair
(henceforth simply begin/end pair), are:</p>
</div>
<div id="VkVideoEncodeH264OutputModeFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeH264OutputModeFlagBitsEXT</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_H264_OUTPUT_MODE_FRAME_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_OUTPUT_MODE_SLICE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_OUTPUT_MODE_NON_VCL_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264OutputModeFlagBitsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_H264_OUTPUT_MODE_FRAME_BIT_EXT</code> indicates that
calls to generate all NALUs of a frame <strong class="purple">must</strong> be included within a single
begin/end pair.
Any non-VCL NALUs <strong class="purple">must</strong> be encoded within the same begin/end pair if
<code>VK_VIDEO_ENCODE_H264_OUTPUT_MODE_NON_VCL_BIT_EXT</code> is not supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_OUTPUT_MODE_SLICE_BIT_EXT</code> indicates that each
begin/end pair <strong class="purple">must</strong> encode at least one slice.
Any non-VCL NALUs <strong class="purple">must</strong> be encoded within the same begin/end pair as the
first slice of the frame if
<code>VK_VIDEO_ENCODE_H264_OUTPUT_MODE_NON_VCL_BIT_EXT</code> is not supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_OUTPUT_MODE_NON_VCL_BIT_EXT</code> indicates that
each begin/end pair <strong class="purple">may</strong> encode only a non-VCL NALU by itself.
An implementation <strong class="purple">must</strong> support at least one of
<code>VK_VIDEO_ENCODE_H264_OUTPUT_MODE_FRAME_BIT_EXT</code> or
<code>VK_VIDEO_ENCODE_H264_OUTPUT_MODE_SLICE_BIT_EXT</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A single begin/end pair <strong class="purple">must</strong> not encode more than a single frame.</p>
</div>
<div class="paragraph">
<p>The bitstreams of NALUs generated within a single begin/end pair are written
continuously into the same bitstream buffer (any padding between the NALUs
<strong class="purple">must</strong> be compliant to the H.264 standard).</p>
</div>
<div class="paragraph">
<p>The supported input modes <strong class="purple">must</strong> be coarser or equal to the supported output
modes.
For example, it is illegal to report slice input is supported but only frame
output is supported.</p>
</div>
<div class="paragraph">
<p>An implementation <strong class="purple">must</strong> report one of the following combinations of
input/output modes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Input: Frame, Output: Frame</p>
</li>
<li>
<p>Input: Frame, Output: Frame and Non-VCL</p>
</li>
<li>
<p>Input: Frame, Output: Slice</p>
</li>
<li>
<p>Input: Frame, Output: Slice and Non-VCL</p>
</li>
<li>
<p>Input: Slice, Output: Slice</p>
</li>
<li>
<p>Input: Slice, Output: Slice and Non-VCL</p>
</li>
<li>
<p>Input: Frame and Non-VCL, Output: Frame and Non-VCL</p>
</li>
<li>
<p>Input: Frame and Non-VCL, Output: Slice and Non-VCL</p>
</li>
<li>
<p>Input: Slice and Non-VCL, Output: Slice and Non-VCL</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_encoder_parameter_sets"><a class="anchor" href="chap41.html#_encoder_parameter_sets"></a>41.9.3. Encoder Parameter Sets</h4>
<div class="paragraph">
<p>To reduce parameter traffic during encoding, the encoder parameter set
object supports storing H.264 SPS/PPS parameter sets that <strong class="purple">may</strong> be later
referenced during encoding.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoEncodeH264SessionParametersCreateInfoEXT">VkVideoEncodeH264SessionParametersCreateInfoEXT</a> structure is
defined as:</p>
</div>
<div id="VkVideoEncodeH264SessionParametersCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264SessionParametersCreateInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                        <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                            <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                               <span class="n">maxStdSPSCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                               <span class="n">maxStdPPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoEncodeH264SessionParametersAddInfoEXT</span><span class="o">*</span>    <span class="n">pParametersAddInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264SessionParametersCreateInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>maxStdSPSCount</code> is the maximum number of SPS parameters that the
<code>VkVideoSessionParametersKHR</code> can contain.</p>
</li>
<li>
<p><code>maxStdPPSCount</code> is the maximum number of PPS parameters that the
<code>VkVideoSessionParametersKHR</code> can contain.</p>
</li>
<li>
<p><code>pParametersAddInfo</code> is <code>NULL</code> or a pointer to a
<code>VkVideoEncodeH264SessionParametersAddInfoEXT</code> structure specifying
H.264 parameters to add upon object creation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A <code>VkVideoEncodeH264SessionParametersCreateInfoEXT</code> structure holding
one H.264 SPS and at least one H.264 PPS parameter set <strong class="purple">must</strong> be chained to
<a href="chap41.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a> when calling
<a href="chap41.html#vkCreateVideoSessionParametersKHR">vkCreateVideoSessionParametersKHR</a> to store these parameter set(s) with
the encoder parameter set object for later reference.
The provided H.264 SPS/PPS parameters <strong class="purple">must</strong> be within the limits specified
during encoder creation for the encoder specified in
<a href="chap41.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersCreateInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH264SessionParametersCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_SESSION_PARAMETERS_CREATE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersCreateInfoEXT-pParametersAddInfo-parameter" href="chap41.html#VUID-VkVideoEncodeH264SessionParametersCreateInfoEXT-pParametersAddInfo-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersCreateInfoEXT-pParametersAddInfo-parameter</span><br>
 If <code>pParametersAddInfo</code> is not <code>NULL</code>, <code>pParametersAddInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkVideoEncodeH264SessionParametersAddInfoEXT">VkVideoEncodeH264SessionParametersAddInfoEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH264SessionParametersAddInfoEXT</code> structure is defined
as:</p>
</div>
<div id="VkVideoEncodeH264SessionParametersAddInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264SessionParametersAddInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                            <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                   <span class="n">stdSPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoH264SequenceParameterSet</span><span class="o">*</span>    <span class="n">pStdSPSs</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                   <span class="n">stdPPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoH264PictureParameterSet</span><span class="o">*</span>     <span class="n">pStdPPSs</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264SessionParametersAddInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stdSPSCount</code> is the number of SPS elements in the <code>pStdSPSs</code>.
Its value <strong class="purple">must</strong> be less than or equal to the value of
<code>maxStdSPSCount</code>.</p>
</li>
<li>
<p><code>pStdSPSs</code> is a pointer to an array of
<code>StdVideoH264SequenceParameterSet</code> structures representing H.264
sequence parameter sets.
Each element of the array <strong class="purple">must</strong> have a unique H.264 SPS ID.</p>
</li>
<li>
<p><code>stdPPSCount</code> is the number of PPS provided in <code>pStdPPSs</code>.
Its value <strong class="purple">must</strong> be less than or equal to the value of
<code>maxStdPPSCount</code>.</p>
</li>
<li>
<p><code>pStdPPSs</code> is a pointer to an array of
<code>StdVideoH264PictureParameterSet</code> structures representing H.264
picture parameter sets.
Each element of the array <strong class="purple">must</strong> have a unique H.264 SPS-PPS ID pair.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-stdSPSCount-04837" href="chap41.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-stdSPSCount-04837"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-stdSPSCount-04837</span><br>

The values of <code>stdSPSCount</code> and <code>stdPPSCount</code> <strong class="purple">must</strong> be less than
or equal to the values of <code>maxStdSPSCount</code> and <code>maxStdPPSCount</code>,
respectively</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-maxStdSPSCount-04838" href="chap41.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-maxStdSPSCount-04838"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-maxStdSPSCount-04838</span><br>

When the <code>maxStdSPSCount</code> number of parameters of type
StdVideoH264SequenceParameterSet in the Video Session Parameters object
is reached, no additional parameters of that type can be added to the
object.
<code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add additional data to this object at this point</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-maxStdPPSCount-04839" href="chap41.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-maxStdPPSCount-04839"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-maxStdPPSCount-04839</span><br>

When the <code>maxStdPPSCount</code> number of parameters of type
StdVideoH264PictureParameterSet in the Video Session Parameters object
is reached, no additional parameters of that type can be added to the
object.
<code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add additional data to this object at this point</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04840" href="chap41.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04840"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04840</span><br>

Each entry to be added <strong class="purple">must</strong> have a unique, to the rest of the parameter
array entries and the existing parameters in the Video Session
Parameters Object that is being updated, SPS-PPS IDs</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04841" href="chap41.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04841"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04841</span><br>

Parameter entries that already exist in Video Session Parameters object
with a particular SPS-PPS IDs <strong class="purple">cannot</strong> be replaced nor updated</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04842" href="chap41.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04842"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04842</span><br>

When creating a new object using a Video Session Parameters as a
template, the array’s parameters with the same SPS-PPS IDs as the ones
from the template take precedence</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04843" href="chap41.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04843"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04843</span><br>

SPS/PPS parameters <strong class="purple">must</strong> comply with the limits specified in
<a href="chap41.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a> during Video Session creation</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_SESSION_PARAMETERS_ADD_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-pStdSPSs-parameter" href="chap41.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-pStdSPSs-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-pStdSPSs-parameter</span><br>
 If <code>pStdSPSs</code> is not <code>NULL</code>, <code>pStdSPSs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>stdSPSCount</code> <code>StdVideoH264SequenceParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-pStdPPSs-parameter" href="chap41.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-pStdPPSs-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-pStdPPSs-parameter</span><br>
 If <code>pStdPPSs</code> is not <code>NULL</code>, <code>pStdPPSs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>stdPPSCount</code> <code>StdVideoH264PictureParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-stdSPSCount-arraylength" href="chap41.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-stdSPSCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-stdSPSCount-arraylength</span><br>
 <code>stdSPSCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-stdPPSCount-arraylength" href="chap41.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-stdPPSCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-stdPPSCount-arraylength</span><br>
 <code>stdPPSCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_frame_encoding"><a class="anchor" href="chap41.html#_frame_encoding"></a>41.9.4. Frame Encoding</h4>
<div class="paragraph">
<p>In order to encode a frame, add a <a href="chap41.html#VkVideoEncodeH264VclFrameInfoEXT">VkVideoEncodeH264VclFrameInfoEXT</a>
structure to the <code>pNext</code> chain of the <a href="chap41.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>
structure passed to the <a href="chap41.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a> command.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoEncodeH264VclFrameInfoEXT">VkVideoEncodeH264VclFrameInfoEXT</a> structure representing a frame
encode operation is defined as:</p>
</div>
<div id="VkVideoEncodeH264VclFrameInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264VclFrameInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                  <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                      <span class="n">pNext</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoEncodeH264ReferenceListsInfoEXT</span><span class="o">*</span>    <span class="n">pReferenceFinalLists</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                         <span class="n">naluSliceEntryCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoEncodeH264NaluSliceInfoEXT</span><span class="o">*</span>         <span class="n">pNaluSliceEntries</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoEncodeH264PictureInfo</span><span class="o">*</span>             <span class="n">pCurrentPictureInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264VclFrameInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pReferenceFinalLists</code> is <code>NULL</code> or a pointer to a
<a href="chap41.html#VkVideoEncodeH264ReferenceListsInfoEXT">VkVideoEncodeH264ReferenceListsInfoEXT</a> structure specifying the
reference lists to be used for the current picture.</p>
</li>
<li>
<p><code>naluSliceEntryCount</code> is the number of slice NALUs in the frame.</p>
</li>
<li>
<p><code>pNaluSliceEntries</code> is a pointer to an array of
<code>naluSliceEntryCount</code> <a href="chap41.html#VkVideoEncodeH264NaluSliceInfoEXT">VkVideoEncodeH264NaluSliceInfoEXT</a>
structures specifying the division of the current picture into slices
and the properties of these slices.
This is an ordered sequence; the NALUs are generated consecutively in
<a href="chap41.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>::<code>dstBitstreamBuffer</code> in the same order
as in this array.</p>
</li>
<li>
<p><code>pCurrentPictureInfo</code> is a pointer to a
<code>StdVideoEncodeH264PictureInfo</code> structure specifying the syntax and
other codec-specific information from the H.264 specification associated
with this picture.
The information provided <strong class="purple">must</strong> reflect the decoded picture marking
operations that are applicable to this frame.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264VclFrameInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH264VclFrameInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264VclFrameInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_VCL_FRAME_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264VclFrameInfoEXT-pReferenceFinalLists-parameter" href="chap41.html#VUID-VkVideoEncodeH264VclFrameInfoEXT-pReferenceFinalLists-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264VclFrameInfoEXT-pReferenceFinalLists-parameter</span><br>
 If <code>pReferenceFinalLists</code> is not <code>NULL</code>, <code>pReferenceFinalLists</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkVideoEncodeH264ReferenceListsInfoEXT">VkVideoEncodeH264ReferenceListsInfoEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264VclFrameInfoEXT-pNaluSliceEntries-parameter" href="chap41.html#VUID-VkVideoEncodeH264VclFrameInfoEXT-pNaluSliceEntries-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264VclFrameInfoEXT-pNaluSliceEntries-parameter</span><br>
 <code>pNaluSliceEntries</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>naluSliceEntryCount</code> valid <a href="chap41.html#VkVideoEncodeH264NaluSliceInfoEXT">VkVideoEncodeH264NaluSliceInfoEXT</a> structures</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264VclFrameInfoEXT-pCurrentPictureInfo-parameter" href="chap41.html#VUID-VkVideoEncodeH264VclFrameInfoEXT-pCurrentPictureInfo-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264VclFrameInfoEXT-pCurrentPictureInfo-parameter</span><br>
 <code>pCurrentPictureInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoEncodeH264PictureInfo</code> value</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264VclFrameInfoEXT-naluSliceEntryCount-arraylength" href="chap41.html#VUID-VkVideoEncodeH264VclFrameInfoEXT-naluSliceEntryCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH264VclFrameInfoEXT-naluSliceEntryCount-arraylength</span><br>
 <code>naluSliceEntryCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoEncodeH264NaluSliceInfoEXT">VkVideoEncodeH264NaluSliceInfoEXT</a> structure representing a slice
is defined as:</p>
</div>
<div id="VkVideoEncodeH264NaluSliceInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264NaluSliceInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                  <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                      <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                         <span class="n">mbCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoEncodeH264ReferenceListsInfoEXT</span><span class="o">*</span>    <span class="n">pReferenceFinalLists</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoEncodeH264SliceHeader</span><span class="o">*</span>             <span class="n">pSliceHeaderStd</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264NaluSliceInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>mbCount</code> is the number of macroblocks in this slice.</p>
</li>
<li>
<p><code>pReferenceFinalLists</code> is <code>NULL</code> or a pointer to a
<a href="chap41.html#VkVideoEncodeH264ReferenceListsInfoEXT">VkVideoEncodeH264ReferenceListsInfoEXT</a> structure specifying the
reference lists to be used for the current slice.
If <code>pReferenceFinalLists</code> is not <code>NULL</code>, these reference lists
override the reference lists provided in
<a href="chap41.html#VkVideoEncodeH264VclFrameInfoEXT">VkVideoEncodeH264VclFrameInfoEXT</a>::<code>pReferenceFinalLists</code>.</p>
</li>
<li>
<p><code>pSliceHeaderStd</code> is a pointer to a
<code>StdVideoEncodeH264SliceHeader</code> structure specifying the slice header
for the current slice.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264NaluSliceInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH264NaluSliceInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264NaluSliceInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_NALU_SLICE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264NaluSliceInfoEXT-pNext-pNext" href="chap41.html#VUID-VkVideoEncodeH264NaluSliceInfoEXT-pNext-pNext"></a> <span class="vuid">VUID-VkVideoEncodeH264NaluSliceInfoEXT-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264NaluSliceInfoEXT-pReferenceFinalLists-parameter" href="chap41.html#VUID-VkVideoEncodeH264NaluSliceInfoEXT-pReferenceFinalLists-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264NaluSliceInfoEXT-pReferenceFinalLists-parameter</span><br>
 If <code>pReferenceFinalLists</code> is not <code>NULL</code>, <code>pReferenceFinalLists</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkVideoEncodeH264ReferenceListsInfoEXT">VkVideoEncodeH264ReferenceListsInfoEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264NaluSliceInfoEXT-pSliceHeaderStd-parameter" href="chap41.html#VUID-VkVideoEncodeH264NaluSliceInfoEXT-pSliceHeaderStd-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264NaluSliceInfoEXT-pSliceHeaderStd-parameter</span><br>
 <code>pSliceHeaderStd</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoEncodeH264SliceHeader</code> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoEncodeH264DpbSlotInfoEXT">VkVideoEncodeH264DpbSlotInfoEXT</a> structure, representing a
reconstructed picture that is being used as a reference picture, is defined
as:</p>
</div>
<div id="VkVideoEncodeH264DpbSlotInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264DpbSlotInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                           <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                               <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">int8_t</span>                                    <span class="n">slotIndex</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoEncodeH264ReferenceInfo</span><span class="o">*</span>    <span class="n">pStdReferenceInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264DpbSlotInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>slotIndex</code> is the <a href="chap41.html#dpb-slot">DPB Slot</a> index for this picture.
<code>slotIndex</code> <strong class="purple">must</strong> match the <code>slotIndex</code> in
<code>pSetupReferenceSlot</code> of <a href="chap41.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a> in the command
used to encode the corresponding picture.</p>
</li>
<li>
<p><code>pStdReferenceInfo</code> is a pointer to a
<code>StdVideoEncodeH264ReferenceInfo</code> structure specifying the syntax and
other codec-specific information from the H.264 specification associated
with this reference picture.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264DpbSlotInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH264DpbSlotInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264DpbSlotInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_DPB_SLOT_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264DpbSlotInfoEXT-pNext-pNext" href="chap41.html#VUID-VkVideoEncodeH264DpbSlotInfoEXT-pNext-pNext"></a> <span class="vuid">VUID-VkVideoEncodeH264DpbSlotInfoEXT-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264DpbSlotInfoEXT-pStdReferenceInfo-parameter" href="chap41.html#VUID-VkVideoEncodeH264DpbSlotInfoEXT-pStdReferenceInfo-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264DpbSlotInfoEXT-pStdReferenceInfo-parameter</span><br>
 <code>pStdReferenceInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoEncodeH264ReferenceInfo</code> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoEncodeH264ReferenceListsInfoEXT">VkVideoEncodeH264ReferenceListsInfoEXT</a> structure representing
reference lists is defined as:</p>
</div>
<div id="VkVideoEncodeH264ReferenceListsInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264ReferenceListsInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                      <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                          <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                              <span class="n">referenceList0EntryCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoEncodeH264DpbSlotInfoEXT</span><span class="o">*</span>               <span class="n">pReferenceList0Entries</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                              <span class="n">referenceList1EntryCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoEncodeH264DpbSlotInfoEXT</span><span class="o">*</span>               <span class="n">pReferenceList1Entries</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoEncodeH264RefMemMgmtCtrlOperations</span><span class="o">*</span>    <span class="n">pMemMgmtCtrlOperations</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264ReferenceListsInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>referenceList0EntryCount</code> is the number of reference pictures in
reference list L0 and is identical to
<code>StdVideoEncodeH264SliceHeader</code>::<code>num_ref_idx_l0_active_minus1</code> + 1.</p>
</li>
<li>
<p><code>pReferenceList0Entries</code> is a pointer to an array of
<code>referenceList0EntryCount</code> <a href="chap41.html#VkVideoEncodeH264DpbSlotInfoEXT">VkVideoEncodeH264DpbSlotInfoEXT</a>
structures specifying the reference list L0 entries for the current
picture.
The entries provided <strong class="purple">must</strong> be ordered after all reference list L0
modification operations are applied (i.e. final list order).
The entries provided <strong class="purple">must</strong> not reflect decoded picture marking
operations in this frame that are applicable to references; the impact
of such operations <strong class="purple">must</strong> be reflected in future frame encode commands.
The slot index in each entry <strong class="purple">must</strong> match one of the slot indexes
provided in the <code>pReferenceSlots</code> of the parent
<a href="chap41.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a> structure.</p>
</li>
<li>
<p><code>referenceList1EntryCount</code> is the number of reference pictures in
reference list L1 and is identical to
<code>StdVideoEncodeH264SliceHeader</code>::<code>num_ref_idx_l1_active_minus1</code> + 1.</p>
</li>
<li>
<p><code>pReferenceList1Entries</code> is a pointer to an array of
<code>referenceList1EntryCount</code> <a href="chap41.html#VkVideoEncodeH264DpbSlotInfoEXT">VkVideoEncodeH264DpbSlotInfoEXT</a>
structures specifying the reference list L1 entries for the current
picture.
The entries provided <strong class="purple">must</strong> be ordered after all reference list L1
modification operations are applied (i.e. final list order).
The entries provided <strong class="purple">must</strong> not reflect decoded picture marking
operations in this frame that are applicable to references; the impact
of such operations <strong class="purple">must</strong> be reflected in future frame encode commands.
The slot index in each entry <strong class="purple">must</strong> match one of the slot indexes
provided in the <code>pReferenceSlots</code> of the parent
<a href="chap41.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a> structure.</p>
</li>
<li>
<p><code>pMemMgmtCtrlOperations</code> is a pointer to a
<code>StdVideoEncodeH264RefMemMgmtCtrlOperations</code> structure specifying
reference lists modifications and decoded picture marking operations.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264ReferenceListsInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH264ReferenceListsInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264ReferenceListsInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_REFERENCE_LISTS_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264ReferenceListsInfoEXT-pNext-pNext" href="chap41.html#VUID-VkVideoEncodeH264ReferenceListsInfoEXT-pNext-pNext"></a> <span class="vuid">VUID-VkVideoEncodeH264ReferenceListsInfoEXT-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264ReferenceListsInfoEXT-pReferenceList0Entries-parameter" href="chap41.html#VUID-VkVideoEncodeH264ReferenceListsInfoEXT-pReferenceList0Entries-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264ReferenceListsInfoEXT-pReferenceList0Entries-parameter</span><br>
 If <code>referenceList0EntryCount</code> is not <code>0</code>, <code>pReferenceList0Entries</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>referenceList0EntryCount</code> valid <a href="chap41.html#VkVideoEncodeH264DpbSlotInfoEXT">VkVideoEncodeH264DpbSlotInfoEXT</a> structures</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264ReferenceListsInfoEXT-pReferenceList1Entries-parameter" href="chap41.html#VUID-VkVideoEncodeH264ReferenceListsInfoEXT-pReferenceList1Entries-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264ReferenceListsInfoEXT-pReferenceList1Entries-parameter</span><br>
 If <code>referenceList1EntryCount</code> is not <code>0</code>, <code>pReferenceList1Entries</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>referenceList1EntryCount</code> valid <a href="chap41.html#VkVideoEncodeH264DpbSlotInfoEXT">VkVideoEncodeH264DpbSlotInfoEXT</a> structures</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264ReferenceListsInfoEXT-pMemMgmtCtrlOperations-parameter" href="chap41.html#VUID-VkVideoEncodeH264ReferenceListsInfoEXT-pMemMgmtCtrlOperations-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264ReferenceListsInfoEXT-pMemMgmtCtrlOperations-parameter</span><br>
 <code>pMemMgmtCtrlOperations</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoEncodeH264RefMemMgmtCtrlOperations</code> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH264EmitPictureParametersInfoEXT</code> structure is defined
as:</p>
</div>
<div id="VkVideoEncodeH264EmitPictureParametersInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264EmitPictureParametersInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint8_t</span>            <span class="n">spsId</span><span class="p">;</span>
    <span class="n">VkBool32</span>           <span class="n">emitSpsEnable</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">ppsIdEntryCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span>     <span class="n">ppsIdEntries</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264EmitPictureParametersInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>spsId</code> is the H.264 SPS ID for the H.264 SPS to insert in the
bitstream.
The SPS ID <strong class="purple">must</strong> match the SPS provided in <code>spsStd</code> of
<a href="chap41.html#VkVideoEncodeH264SessionParametersCreateInfoEXT">VkVideoEncodeH264SessionParametersCreateInfoEXT</a>.
This is retrieved from the <a href="chap41.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object
provided in <a href="chap41.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>.</p>
</li>
<li>
<p><code>emitSpsEnable</code> enables the emitting of the SPS structure with id of
<code>spsId</code>.</p>
</li>
<li>
<p><code>ppsIdEntryCount</code> is the number of entries in the
<code>ppsIdEntries</code>.
If this parameter is <code>0</code> then no pps entries are going to be emitted in
the bitstream.</p>
</li>
<li>
<p><code>ppsIdEntries</code> is a pointer to an array of H.264 PPS IDs for the
H.264 PPS to insert in the bitstream.
The PPS IDs <strong class="purple">must</strong> match one of the IDs of the PPS(s) provided in
<code>pStdPPSs</code> of <a href="chap41.html#VkVideoEncodeH264SessionParametersCreateInfoEXT">VkVideoEncodeH264SessionParametersCreateInfoEXT</a>
to identify the PPS parameter set to insert in the bitstream.
This is retrieved from the <a href="chap41.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object
provided in <a href="chap41.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264EmitPictureParametersInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH264EmitPictureParametersInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264EmitPictureParametersInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_EMIT_PICTURE_PARAMETERS_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264EmitPictureParametersInfoEXT-ppsIdEntries-parameter" href="chap41.html#VUID-VkVideoEncodeH264EmitPictureParametersInfoEXT-ppsIdEntries-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264EmitPictureParametersInfoEXT-ppsIdEntries-parameter</span><br>
 <code>ppsIdEntries</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>ppsIdEntryCount</code> <code>uint8_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264EmitPictureParametersInfoEXT-ppsIdEntryCount-arraylength" href="chap41.html#VUID-VkVideoEncodeH264EmitPictureParametersInfoEXT-ppsIdEntryCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH264EmitPictureParametersInfoEXT-ppsIdEntryCount-arraylength</span><br>
 <code>ppsIdEntryCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_rate_control"><a class="anchor" href="chap41.html#_rate_control"></a>41.9.5. Rate control</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH264RateControlInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH264RateControlInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264RateControlInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                 <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                    <span class="n">gopFrameCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                    <span class="n">idrPeriod</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                    <span class="n">consecutiveBFrameCount</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH264RateControlStructureEXT</span>    <span class="n">rateControlStructure</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                     <span class="n">temporalLayerCount</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264RateControlInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>gopFrameCount</code> is the number of frames contained within the group
of pictures (GOP), starting from an intra frame and until the next intra
frame.
If it is set to 0, the implementation chooses a suitable value.
If it is set to <code>UINT32_MAX</code>, the GOP length is treated as infinite.</p>
</li>
<li>
<p><code>idrPeriod</code> is the interval, in terms of number of frames, between
two IDR frames.
If it is set to 0, the implementation chooses a suitable value.
If it is set to <code>UINT32_MAX</code>, the IDR period is treated as infinite.</p>
</li>
<li>
<p><code>consecutiveBFrameCount</code> is the number of consecutive B-frames
between I- and/or P-frames within the GOP.</p>
</li>
<li>
<p><code>rateControlStructure</code> is a
<a href="chap41.html#VkVideoEncodeH264RateControlStructureEXT">VkVideoEncodeH264RateControlStructureEXT</a> value specifying the
expected encode stream reference structure, to aid in rate control
calculations.</p>
</li>
<li>
<p><code>temporalLayerCount</code> specifies the number of temporal layers enabled
in the stream.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In order to provide H.264-specific stream rate control parameters, add a
<code>VkVideoEncodeH264RateControlInfoEXT</code> structure to the <code>pNext</code> chain
of the <a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a> structure in the <code>pNext</code>
chain of the <a href="chap41.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a> structure passed to the
<a href="chap41.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a> command.</p>
</div>
<div class="paragraph">
<p>The parameters from this structure act as a guidance for implementations to
apply various rate control heuristics.</p>
</div>
<div class="paragraph">
<p>It is possible to infer the picture type to be used when encoding a frame,
on the basis of the values provided for <code>consecutiveBFrameCount</code>,
<code>idrPeriod</code>, and <code>gopFrameCount</code>, but this inferred picture type
will not be used by implementations to override the picture type provided in
<a href="chap41.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a>.
Additionally, it is not required for the video session to be reset if the
inferred picture type does not match the actual picture type.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264RateControlInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH264RateControlInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264RateControlInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_RATE_CONTROL_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264RateControlInfoEXT-rateControlStructure-parameter" href="chap41.html#VUID-VkVideoEncodeH264RateControlInfoEXT-rateControlStructure-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264RateControlInfoEXT-rateControlStructure-parameter</span><br>
 <code>rateControlStructure</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoEncodeH264RateControlStructureEXT">VkVideoEncodeH264RateControlStructureEXT</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>rateControlStructure</code> in <a href="chap41.html#VkVideoEncodeH264RateControlInfoEXT">VkVideoEncodeH264RateControlInfoEXT</a>
specifies one of the following video stream reference structures as a hint
for the rate control implementation:</p>
</div>
<div id="VkVideoEncodeH264RateControlStructureEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeH264RateControlStructureEXT</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_H264_RATE_CONTROL_STRUCTURE_UNKNOWN_EXT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_RATE_CONTROL_STRUCTURE_FLAT_EXT</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_RATE_CONTROL_STRUCTURE_DYADIC_EXT</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264RateControlStructureEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_H264_RATE_CONTROL_STRUCTURE_UNKNOWN_EXT</code> specifies
a reference structure unknown at the time of stream rate control
configuration.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_RATE_CONTROL_STRUCTURE_FLAT_EXT</code> specifies a
flat reference structure.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_RATE_CONTROL_STRUCTURE_DYADIC_EXT</code> specifies a
dyadic reference structure.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH264RateControlLayerInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH264RateControlLayerInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264RateControlLayerInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                  <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                      <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                          <span class="n">temporalLayerId</span><span class="p">;</span>
    <span class="n">VkBool32</span>                         <span class="n">useInitialRcQp</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH264QpEXT</span>           <span class="n">initialRcQp</span><span class="p">;</span>
    <span class="n">VkBool32</span>                         <span class="n">useMinQp</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH264QpEXT</span>           <span class="n">minQp</span><span class="p">;</span>
    <span class="n">VkBool32</span>                         <span class="n">useMaxQp</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH264QpEXT</span>           <span class="n">maxQp</span><span class="p">;</span>
    <span class="n">VkBool32</span>                         <span class="n">useMaxFrameSize</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH264FrameSizeEXT</span>    <span class="n">maxFrameSize</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264RateControlLayerInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>temporalLayerId</code> specifies the H.264 temporal layer ID of the video
coding layer that settings provided in this structure and its parent
<a href="chap41.html#VkVideoEncodeRateControlLayerInfoKHR">VkVideoEncodeRateControlLayerInfoKHR</a> structure apply to.</p>
</li>
<li>
<p><code>useInitialRcQp</code> indicates whether the values within
<code>initialRcQp</code> should be used by the implementation.</p>
</li>
<li>
<p><code>initialRcQp</code> provides the QP values for each picture type, to be
used in rate control calculations at the start of video encode
operations on a newly-created video session, or immediately after a
session reset.
These values are ignored when
<a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>::<code>rateControlMode</code> is
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</code>.</p>
</li>
<li>
<p><code>useMinQp</code> indicates whether the values within <code>minQp</code> should be
used by the implementation.
When it is set to <code>VK_FALSE</code>, the implementation ignores the values
in <code>minQp</code> and chooses suitable values.</p>
</li>
<li>
<p><code>minQp</code> provides the lower bound on the QP values for each picture
type, to be used in rate control calculations.</p>
</li>
<li>
<p><code>useMaxQp</code> indicates whether the values within <code>maxQp</code> should be
used by the implementation.
When it is set to <code>VK_FALSE</code>, the implementation ignores the values
in <code>maxQp</code> and chooses suitable values.</p>
</li>
<li>
<p><code>maxQp</code> provides the upper bound on the QP values for each picture
type, to be used in rate control calculations.</p>
</li>
<li>
<p><code>useMaxFrameSize</code> indicates whether the values within
<code>maxFrameSize</code> should be used by the implementation.</p>
</li>
<li>
<p><code>maxFrameSize</code> provides the upper bound on the encoded frame size
for each picture type.
The implementation does not guarantee the encoded frame sizes will be
within the specified limits, however these limits <strong class="purple">may</strong> be used as a
guide in rate control calculations.
If enabled and not set properly, the <code>maxQp</code> limit may prevent the
implementation from respecting the <code>maxFrameSize</code> limit.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>H.264-specific per-layer rate control parameters <strong class="purple">must</strong> be specified by
adding a <code>VkVideoEncodeH264RateControlLayerInfoEXT</code> structure to the
<code>pNext</code> chain of each <a href="chap41.html#VkVideoEncodeRateControlLayerInfoKHR">VkVideoEncodeRateControlLayerInfoKHR</a>
structure in a call to <a href="chap41.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a> command, when the
command buffer context has an active video encode H.264 session.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264RateControlLayerInfoEXT-rateControlMode-06474" href="chap41.html#VUID-VkVideoEncodeH264RateControlLayerInfoEXT-rateControlMode-06474"></a> <span class="vuid">VUID-VkVideoEncodeH264RateControlLayerInfoEXT-rateControlMode-06474</span><br>

When <a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>::<code>rateControlMode</code> is
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</code>, both
<code>useMinQp</code> and <code>useMaxQp</code> must be set to <code>VK_TRUE</code>.</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264RateControlLayerInfoEXT-rateControlMode-06475" href="chap41.html#VUID-VkVideoEncodeH264RateControlLayerInfoEXT-rateControlMode-06475"></a> <span class="vuid">VUID-VkVideoEncodeH264RateControlLayerInfoEXT-rateControlMode-06475</span><br>

When <a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>::<code>rateControlMode</code> is
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</code>, the values
provided in <code>minQP</code> must be identical to those provided in
<code>maxQp</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264RateControlLayerInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH264RateControlLayerInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264RateControlLayerInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_RATE_CONTROL_LAYER_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264RateControlLayerInfoEXT-initialRcQp-parameter" href="chap41.html#VUID-VkVideoEncodeH264RateControlLayerInfoEXT-initialRcQp-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264RateControlLayerInfoEXT-initialRcQp-parameter</span><br>
 <code>initialRcQp</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoEncodeH264QpEXT">VkVideoEncodeH264QpEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264RateControlLayerInfoEXT-minQp-parameter" href="chap41.html#VUID-VkVideoEncodeH264RateControlLayerInfoEXT-minQp-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264RateControlLayerInfoEXT-minQp-parameter</span><br>
 <code>minQp</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoEncodeH264QpEXT">VkVideoEncodeH264QpEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264RateControlLayerInfoEXT-maxQp-parameter" href="chap41.html#VUID-VkVideoEncodeH264RateControlLayerInfoEXT-maxQp-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264RateControlLayerInfoEXT-maxQp-parameter</span><br>
 <code>maxQp</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoEncodeH264QpEXT">VkVideoEncodeH264QpEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264RateControlLayerInfoEXT-maxFrameSize-parameter" href="chap41.html#VUID-VkVideoEncodeH264RateControlLayerInfoEXT-maxFrameSize-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264RateControlLayerInfoEXT-maxFrameSize-parameter</span><br>
 <code>maxFrameSize</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoEncodeH264FrameSizeEXT">VkVideoEncodeH264FrameSizeEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH264QpEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH264QpEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264QpEXT</span> <span class="p">{</span>
    <span class="kt">int32_t</span>    <span class="n">qpI</span><span class="p">;</span>
    <span class="kt">int32_t</span>    <span class="n">qpP</span><span class="p">;</span>
    <span class="kt">int32_t</span>    <span class="n">qpB</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264QpEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>qpI</code> is the QP to be used for I-frames.</p>
</li>
<li>
<p><code>qpP</code> is the QP to be used for P-frames.</p>
</li>
<li>
<p><code>qpB</code> is the QP to be used for B-frames.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH264FrameSizeEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH264FrameSizeEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264FrameSizeEXT</span> <span class="p">{</span>
    <span class="kt">uint32_t</span>    <span class="n">frameISize</span><span class="p">;</span>
    <span class="kt">uint32_t</span>    <span class="n">framePSize</span><span class="p">;</span>
    <span class="kt">uint32_t</span>    <span class="n">frameBSize</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264FrameSizeEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>frameISize</code> is the size in bytes to be used for I-frames.</p>
</li>
<li>
<p><code>framePSize</code> is the size in bytes to be used for P-frames.</p>
</li>
<li>
<p><code>frameBSize</code> is the size in bytes to be used for B-frames.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="encode-h265"><a class="anchor" href="chap41.html#encode-h265"></a>41.10. Encode H.265</h3>
<div class="paragraph">
<p>The <code><a href="chap53.html#VK_EXT_video_encode_h265">VK_EXT_video_encode_h265</a></code> extension adds H.265 codec-specific
structures/types needed to support H.265 video encoding.
Unless otherwise noted, all references to the H.265 specification are to the
2013 edition published by the ITU-T, dated April 2013.
This specification is available at <a href="https://www.itu.int/rec/T-REC-H.265" class="bare">https://www.itu.int/rec/T-REC-H.265</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Refer to the <a href="chap1.html">Preamble</a> for information on how the Khronos
Intellectual Property Rights Policy relates to normative references to
external materials not created by Khronos.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="_h_265_encode_profile"><a class="anchor" href="chap41.html#_h_265_encode_profile"></a>41.10.1. H.265 encode profile</h4>
<div class="paragraph">
<p>An H.265 encode profile is specified by including the
<a href="chap41.html#VkVideoEncodeH265ProfileInfoEXT">VkVideoEncodeH265ProfileInfoEXT</a> structure in the <code>pNext</code> chain of
the <a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> structure when
<a href="chap41.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>::<code>videoCodecOperation</code> is
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H265_BIT_EXT</code>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH265ProfileInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH265ProfileInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265ProfileInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>           <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>               <span class="n">pNext</span><span class="p">;</span>
    <span class="n">StdVideoH265ProfileIdc</span>    <span class="n">stdProfileIdc</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265ProfileInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stdProfileIdc</code> is a <code>StdVideoH265ProfileIdc</code> value specifying
the H.265 codec profile IDC.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265ProfileInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH265ProfileInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH265ProfileInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H265_PROFILE_INFO_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_capabilities_6"><a class="anchor" href="chap41.html#_capabilities_6"></a>41.10.2. Capabilities</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>When calling <a href="chap41.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> with
<code>pVideoProfile-&gt;videoCodecOperation</code> specified as
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H265_BIT_EXT</code>, the
<a href="chap41.html#VkVideoEncodeH265CapabilitiesEXT">VkVideoEncodeH265CapabilitiesEXT</a> structure <strong class="purple">must</strong> be included in the
<code>pNext</code> chain of the <a href="chap41.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> structure to retrieve
more capabilities specific to H.265 video encoding.</p>
</div>
<div class="paragraph">
<p>The <code>VkVideoEncodeH265CapabilitiesEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH265CapabilitiesEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265CapabilitiesEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                                          <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH265CapabilityFlagsEXT</span>            <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH265InputModeFlagsEXT</span>             <span class="n">inputModeFlags</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH265OutputModeFlagsEXT</span>            <span class="n">outputModeFlags</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH265CtbSizeFlagsEXT</span>               <span class="n">ctbSizes</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH265TransformBlockSizeFlagsEXT</span>    <span class="n">transformBlockSizes</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                        <span class="n">maxPPictureL0ReferenceCount</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                        <span class="n">maxBPictureL0ReferenceCount</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                        <span class="n">maxL1ReferenceCount</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                        <span class="n">maxSubLayersCount</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                        <span class="n">minLog2MinLumaCodingBlockSizeMinus3</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                        <span class="n">maxLog2MinLumaCodingBlockSizeMinus3</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                        <span class="n">minLog2MinLumaTransformBlockSizeMinus2</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                        <span class="n">maxLog2MinLumaTransformBlockSizeMinus2</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                        <span class="n">minMaxTransformHierarchyDepthInter</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                        <span class="n">maxMaxTransformHierarchyDepthInter</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                        <span class="n">minMaxTransformHierarchyDepthIntra</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                        <span class="n">maxMaxTransformHierarchyDepthIntra</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                        <span class="n">maxDiffCuQpDeltaDepth</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                        <span class="n">minMaxNumMergeCand</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                        <span class="n">maxMaxNumMergeCand</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265CapabilitiesEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap41.html#VkVideoEncodeH265CapabilityFlagBitsEXT">VkVideoEncodeH265CapabilityFlagBitsEXT</a>
describing supported encoding tools.</p>
</li>
<li>
<p><code>inputModeFlags</code> is a bitmask of
<a href="chap41.html#VkVideoEncodeH265InputModeFlagBitsEXT">VkVideoEncodeH265InputModeFlagBitsEXT</a> describing the command
buffer input granularities/modes supported by the implementation.</p>
</li>
<li>
<p><code>outputModeFlags</code> is a bitmask of
<a href="chap41.html#VkVideoEncodeH265OutputModeFlagBitsEXT">VkVideoEncodeH265OutputModeFlagBitsEXT</a> describing the output
(bitstream size reporting) granularities/modes supported by the
implementation.</p>
</li>
<li>
<p><code>ctbSizes</code> is a bitmask of <a href="chap41.html#VkVideoEncodeH265CtbSizeFlagBitsEXT">VkVideoEncodeH265CtbSizeFlagBitsEXT</a>
describing the supported CTB sizes.</p>
</li>
<li>
<p><code>transformBlockSizes</code> is a bitmask of
<a href="chap41.html#VkVideoEncodeH265TransformBlockSizeFlagBitsEXT">VkVideoEncodeH265TransformBlockSizeFlagBitsEXT</a> describing the
supported transform block sizes.</p>
</li>
<li>
<p><code>maxPPictureL0ReferenceCount</code> reports the maximum number of
reference pictures the implementation supports in the reference list L0
for P pictures.</p>
</li>
<li>
<p><code>maxBPictureL0ReferenceCount</code> reports the maximum number of
reference pictures the implementation supports in the reference list L0
for B pictures.
The reported value is <code>0</code> if encoding of B pictures is not supported.</p>
</li>
<li>
<p><code>maxL1ReferenceCount</code> reports the maximum number of reference
pictures the implementation supports in the reference list L1 if
encoding of B pictures is supported.
The reported value is <code>0</code> if encoding of B pictures is not supported.</p>
</li>
<li>
<p><code>maxSubLayersCount</code> reports the maximum number of sublayers.</p>
</li>
<li>
<p><code>minLog2MinLumaCodingBlockSizeMinus3</code> reports the minimum value that
may be set for log2_min_luma_coding_block_size_minus3 in
StdVideoH265SequenceParameterSet.</p>
</li>
<li>
<p><code>maxLog2MinLumaCodingBlockSizeMinus3</code> reports the maximum value that
may be set for log2_min_luma_coding_block_size_minus3 in
StdVideoH265SequenceParameterSet.</p>
</li>
<li>
<p><code>minLog2MinLumaTransformBlockSizeMinus2</code> reports the minimum value
that may be set for log2_min_luma_transform_block_size_minus2 in
StdVideoH265SequenceParameterSet.</p>
</li>
<li>
<p><code>maxLog2MinLumaTransformBlockSizeMinus2</code> reports the maximum value
that may be set for log2_min_luma_transform_block_size_minus2 in
StdVideoH265SequenceParameterSet.</p>
</li>
<li>
<p><code>minMaxTransformHierarchyDepthInter</code> reports the minimum value that
may be set for max_transform_hierarchy_depth_inter in
StdVideoH265SequenceParameterSet.</p>
</li>
<li>
<p><code>maxMaxTransformHierarchyDepthInter</code> reports the maximum value that
may be set for max_transform_hierarchy_depth_inter in
StdVideoH265SequenceParameterSet.</p>
</li>
<li>
<p><code>minMaxTransformHierarchyDepthIntra</code> reports the minimum value that
may be set for max_transform_hierarchy_depth_intra in
StdVideoH265SequenceParameterSet.</p>
</li>
<li>
<p><code>maxMaxTransformHierarchyDepthIntra</code> reports the maximum value that
may be set for max_transform_hierarchy_depth_intra in
StdVideoH265SequenceParameterSet.</p>
</li>
<li>
<p><code>maxDiffCuQpDeltaDepth</code> reports the maximum value that may be set
for diff_cu_qp_delta_depth in StdVideoH265PictureParameterSet.</p>
</li>
<li>
<p><code>minMaxNumMergeCand</code> reports the minimum value that may be set for
MaxNumMergeCand in StdVideoEncodeH265SliceHeader.</p>
</li>
<li>
<p><code>maxMaxNumMergeCand</code> reports the maximum value that may be set for
MaxNumMergeCand in StdVideoEncodeH265SliceHeader.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265CapabilitiesEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH265CapabilitiesEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH265CapabilitiesEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H265_CAPABILITIES_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeH265CapabilityFlagsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeH265CapabilityFlagsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEncodeH265CapabilityFlagsEXT</code> is a bitmask type for setting a
mask of zero or more <a href="chap41.html#VkVideoEncodeH265CapabilityFlagBitsEXT">VkVideoEncodeH265CapabilityFlagBitsEXT</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">may</strong> be set in
<a href="chap41.html#VkVideoEncodeH265CapabilitiesEXT">VkVideoEncodeH265CapabilitiesEXT</a>::<code>flags</code>, indicating the encoding
tools supported, are:</p>
</div>
<div id="VkVideoEncodeH265CapabilityFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeH265CapabilityFlagBitsEXT</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_SEPARATE_COLOUR_PLANE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_SCALING_LISTS_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_SAMPLE_ADAPTIVE_OFFSET_ENABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_PCM_ENABLE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_SPS_TEMPORAL_MVP_ENABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000010</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_HRD_COMPLIANCE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000020</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_INIT_QP_MINUS26_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000040</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_LOG2_PARALLEL_MERGE_LEVEL_MINUS2_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000080</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_SIGN_DATA_HIDING_ENABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000100</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_TRANSFORM_SKIP_ENABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000200</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_TRANSFORM_SKIP_DISABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000400</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_PPS_SLICE_CHROMA_QP_OFFSETS_PRESENT_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000800</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_WEIGHTED_PRED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00001000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_WEIGHTED_BIPRED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00002000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_WEIGHTED_PRED_NO_TABLE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00004000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_TRANSQUANT_BYPASS_ENABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00008000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_ENTROPY_CODING_SYNC_ENABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00010000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_DEBLOCKING_FILTER_OVERRIDE_ENABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00020000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_MULTIPLE_TILE_PER_FRAME_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00040000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_MULTIPLE_SLICE_PER_TILE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00080000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_MULTIPLE_TILE_PER_SLICE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00100000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_SLICE_SEGMENT_CTB_COUNT_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00200000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_ROW_UNALIGNED_SLICE_SEGMENT_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00400000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_DEPENDENT_SLICE_SEGMENT_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00800000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_DIFFERENT_SLICE_TYPE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x01000000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_B_FRAME_IN_L1_LIST_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x02000000</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265CapabilityFlagBitsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_SEPARATE_COLOUR_PLANE_BIT_EXT</code>
reports if enabling separate_colour_plane_flag in StdVideoH265SpsFlags
is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_SCALING_LISTS_BIT_EXT</code> reports if
enabling scaling_list_enabled_flag and
sps_scaling_list_data_present_flag in StdVideoH265SpsFlags, or enabling
pps_scaling_list_data_present_flag in StdVideoH265PpsFlags are
supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_SAMPLE_ADAPTIVE_OFFSET_ENABLED_BIT_EXT</code>
reports if enabling sample_adaptive_offset_enabled_flag in
StdVideoH265SpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_PCM_ENABLE_BIT_EXT</code> reports if
enabling pcm_enable_flag in StdVideoH265SpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_SPS_TEMPORAL_MVP_ENABLED_BIT_EXT</code>
reports if enabling sps_temporal_mvp_enabled_flag in
StdVideoH265SpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_HRD_COMPLIANCE_BIT_EXT</code> reports if
the implementation guarantees generating a HRD compliant bitstream if
nal_hrd_parameters_present_flag, vcl_hrd_parameters_present_flag, or
sub_pic_hrd_params_present_flag are enabled in StdVideoH265HrdFlags, or
vui_hrd_parameters_present_flag is enabled in StdVideoH265SpsVuiFlags.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_INIT_QP_MINUS26_BIT_EXT</code> reports if
setting non-zero init_qp_minus26 in StdVideoH265PictureParameterSet is
supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_LOG2_PARALLEL_MERGE_LEVEL_MINUS2_BIT_EXT</code>
reports if setting non-zero value for log2_parallel_merge_level_minus2
in StdVideoH265PictureParameterSet is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_SIGN_DATA_HIDING_ENABLED_BIT_EXT</code>
reports if enabling sign_data_hiding_enabled_flag in
StdVideoH265PpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_TRANSFORM_SKIP_ENABLED_BIT_EXT</code>
reports if enabling transform_skip_enabled_flag in StdVideoH265PpsFlags
is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_TRANSFORM_SKIP_DISABLED_BIT_EXT</code>
reports if disabling transform_skip_enabled_flag in StdVideoH265PpsFlags
is supported.
Implementations <strong class="purple">must</strong> report at least one of
<code>VK_VIDEO_ENCODE_H265_CAPABILITY_TRANSFORM_SKIP_ENABLED_BIT_EXT</code> and
<code>VK_VIDEO_ENCODE_H265_CAPABILITY_TRANSFORM_SKIP_DISABLED_BIT_EXT</code> as
supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_PPS_SLICE_CHROMA_QP_OFFSETS_PRESENT_BIT_EXT</code>
reports if enabling pps_slice_chroma_qp_offsets_present_flag in
StdVideoH265PpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_WEIGHTED_PRED_BIT_EXT</code> reports if
enabling weighted_pred_flag in StdVideoH265PpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_WEIGHTED_BIPRED_BIT_EXT</code> reports if
enabling weighted_bipred_flag in StdVideoH265PpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_WEIGHTED_PRED_NO_TABLE_BIT_EXT</code>
reports that when weighted_pred_flag or weighted_bipred_flag in
StdVideoH265PpsFlags are enabled, the implementation is able to
internally decide syntax for pred_weight_table.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_TRANSQUANT_BYPASS_ENABLED_BIT_EXT</code>
reports if enabling transquant_bypass_enabled_flag in
StdVideoH265PpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_ENTROPY_CODING_SYNC_ENABLED_BIT_EXT</code>
reports if enabling entropy_coding_sync_enabled_flag in
StdVideoH265PpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_DEBLOCKING_FILTER_OVERRIDE_ENABLED_BIT_EXT</code>
reports if enabling deblocking_filter_override_enabled_flag in
StdVideoH265PpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_MULTIPLE_TILE_PER_FRAME_BIT_EXT</code>
reports if encoding multiple tiles per frame is supported.
If not set, the implementation is only able to encode a single tile for
each frame.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_MULTIPLE_SLICE_PER_TILE_BIT_EXT</code>
reports if encoding multiple slices per tile is supported.
If not set, the implementation is only able to encode a single slice for
each tile.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_MULTIPLE_TILE_PER_SLICE_BIT_EXT</code>
reports if encoding multiple tiles per slice is supported.
If not set, the implementation is only able to encode a single tile for
each slice.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_SLICE_SEGMENT_CTB_COUNT_BIT_EXT</code>
reports support for configuring
<a href="chap41.html#VkVideoEncodeH265NaluSliceSegmentInfoEXT">VkVideoEncodeH265NaluSliceSegmentInfoEXT</a>::<code>ctbCount</code> and
slice_segment_address in StdVideoEncodeH265SliceSegmentHeader for each
slice segment in a frame with multiple slice segments.
If not supported, the implementation decides the number of CTBs in each
slice segment based on
<a href="chap41.html#VkVideoEncodeH265VclFrameInfoEXT">VkVideoEncodeH265VclFrameInfoEXT</a>::<code>naluSliceSegmentEntryCount</code>.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_ROW_UNALIGNED_SLICE_SEGMENT_BIT_EXT</code>
reports that each slice segment in a frame with a single or multiple
tiles per slice may begin or finish at any offset in a CTB row.
If not supported, all slice segments in such a frame <strong class="purple">must</strong> begin at the
start of a CTB row (and hence each slice segment <strong class="purple">must</strong> finish at the end
of a CTB row).
Also reports that each slice segment in a frame with multiple slices per
tile may begin or finish at any offset within the enclosing tile’s CTB
row.
If not supported, slice segments in such a frame <strong class="purple">must</strong> begin at the
start of the enclosing tile’s CTB row (and hence each slice segment
<strong class="purple">must</strong> finish at the end of the enclosing tile’s CTB row).</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_DEPENDENT_SLICE_SEGMENT_BIT_EXT</code>
reports if enabling dependent_slice_segment_flag in
StdVideoEncodeH265SliceHeaderFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_DIFFERENT_SLICE_TYPE_BIT_EXT</code>
reports that when
<code>VK_VIDEO_ENCODE_H265_CAPABILITY_MULTIPLE_SLICE_PER_TILE_BIT_EXT</code> is
supported and a frame is encoded with multiple slices, the
implementation allows encoding each slice segment with a different
<code>StdVideoEncodeH265SliceSegmentHeader</code>::slice_type.
If not supported, all slice segments of the frame <strong class="purple">must</strong> be encoded with
the same <code>slice_type</code> which corresponds to the picture type of the
frame.
For example, all slice segments of a P-frame would be encoded as
P-slices.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_B_FRAME_IN_L1_LIST_BIT_EXT</code> reports
support for using a B frame as L1 reference.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeH265InputModeFlagsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeH265InputModeFlagsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEncodeH265InputModeFlagsEXT</code> is a bitmask type for setting a
mask of zero or more <a href="chap41.html#VkVideoEncodeH265InputModeFlagBitsEXT">VkVideoEncodeH265InputModeFlagBitsEXT</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">may</strong> be set in
<a href="chap41.html#VkVideoEncodeH265CapabilitiesEXT">VkVideoEncodeH265CapabilitiesEXT</a>::<code>inputModeFlags</code>, indicating the
command buffer input granularities supported by the implementation, are:</p>
</div>
<div id="VkVideoEncodeH265InputModeFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeH265InputModeFlagBitsEXT</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_H265_INPUT_MODE_FRAME_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_INPUT_MODE_SLICE_SEGMENT_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_INPUT_MODE_NON_VCL_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265InputModeFlagBitsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_H265_INPUT_MODE_FRAME_BIT_EXT</code> indicates that a
single command buffer <strong class="purple">must</strong> at least encode an entire frame.
Any non-VCL NALUs <strong class="purple">must</strong> be encoded using the same command buffer as the
frame if <code>VK_VIDEO_ENCODE_H265_INPUT_MODE_NON_VCL_BIT_EXT</code> is not
supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_INPUT_MODE_SLICE_SEGMENT_BIT_EXT</code> indicates
that a single command buffer <strong class="purple">must</strong> at least encode a single slice
segment.
Any non-VCL NALUs <strong class="purple">must</strong> be encoded using the same command buffer as the
first slice segment of the frame if
<code>VK_VIDEO_ENCODE_H265_INPUT_MODE_NON_VCL_BIT_EXT</code> is not supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_INPUT_MODE_NON_VCL_BIT_EXT</code> indicates that a
single command buffer <strong class="purple">may</strong> encode a non-VCL NALU by itself.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An implementation <strong class="purple">must</strong> support at least one of
<code>VK_VIDEO_ENCODE_H265_INPUT_MODE_FRAME_BIT_EXT</code> or
<code>VK_VIDEO_ENCODE_H265_INPUT_MODE_SLICE_SEGMENT_BIT_EXT</code>.</p>
</div>
<div class="paragraph">
<p>If <code>VK_VIDEO_ENCODE_H265_INPUT_MODE_SLICE_SEGMENT_BIT_EXT</code> is not
supported, the following two additional restrictions apply for frames
encoded with multiple slice segments.
First, all frame slice segments <strong class="purple">must</strong> have the same pReferenceFinalLists.
Second, the order in which slice segments appear in
<a href="chap41.html#VkVideoEncodeH265VclFrameInfoEXT">VkVideoEncodeH265VclFrameInfoEXT</a>::<code>pNaluSliceSegmentEntries</code> or in
the command buffer <strong class="purple">must</strong> match the placement order of the slice segments in
the frame.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeH265OutputModeFlagsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeH265OutputModeFlagsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEncodeH265OutputModeFlagsEXT</code> is a bitmask type for setting a
mask of zero or more <a href="chap41.html#VkVideoEncodeH265OutputModeFlagBitsEXT">VkVideoEncodeH265OutputModeFlagBitsEXT</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">may</strong> be set in
<a href="chap41.html#VkVideoEncodeH265CapabilitiesEXT">VkVideoEncodeH265CapabilitiesEXT</a>::<code>outputModeFlags</code>, indicating
the minimum bitstream generation commands that <strong class="purple">must</strong> be included between
each <a href="chap41.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> and <a href="chap41.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> pair
(henceforth simply begin/end pair), are:</p>
</div>
<div id="VkVideoEncodeH265OutputModeFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeH265OutputModeFlagBitsEXT</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_H265_OUTPUT_MODE_FRAME_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_OUTPUT_MODE_SLICE_SEGMENT_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_OUTPUT_MODE_NON_VCL_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265OutputModeFlagBitsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_H265_OUTPUT_MODE_FRAME_BIT_EXT</code> indicates that
calls to generate all NALUs of a frame <strong class="purple">must</strong> be included within a single
begin/end pair.
Any non-VCL NALUs <strong class="purple">must</strong> be encoded within the same begin/end pair if
<code>VK_VIDEO_ENCODE_H265_OUTPUT_MODE_NON_VCL_BIT_EXT</code> is not supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_OUTPUT_MODE_SLICE_SEGMENT_BIT_EXT</code> indicates
that each begin/end pair <strong class="purple">must</strong> encode at least one slice segment.
Any non-VCL NALUs <strong class="purple">must</strong> be encoded within the same begin/end pair as the
first slice segment of the frame if
<code>VK_VIDEO_ENCODE_H265_OUTPUT_MODE_NON_VCL_BIT_EXT</code> is not supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_OUTPUT_MODE_NON_VCL_BIT_EXT</code> indicates that
each begin/end pair <strong class="purple">may</strong> encode only a non-VCL NALU by itself.
An implementation <strong class="purple">must</strong> support at least one of
<code>VK_VIDEO_ENCODE_H265_OUTPUT_MODE_FRAME_BIT_EXT</code> or
<code>VK_VIDEO_ENCODE_H265_OUTPUT_MODE_SLICE_SEGMENT_BIT_EXT</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A single begin/end pair <strong class="purple">must</strong> not encode more than a single frame.</p>
</div>
<div class="paragraph">
<p>The bitstreams of NALUs generated within a single begin/end pair are written
continuously into the same bitstream buffer (any padding between the NALUs
<strong class="purple">must</strong> be compliant to the H.265 standard).</p>
</div>
<div class="paragraph">
<p>The supported input modes <strong class="purple">must</strong> be coarser or equal to the supported output
modes.
For example, it is illegal to report slice segment input is supported but
only frame output is supported.</p>
</div>
<div class="paragraph">
<p>An implementation <strong class="purple">must</strong> report one of the following combinations of
input/output modes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Input: Frame, Output: Frame</p>
</li>
<li>
<p>Input: Frame, Output: Frame and Non-VCL</p>
</li>
<li>
<p>Input: Frame, Output: Slice Segment</p>
</li>
<li>
<p>Input: Frame, Output: Slice Segment and Non-VCL</p>
</li>
<li>
<p>Input: Slice Segment, Output: Slice Segment</p>
</li>
<li>
<p>Input: Slice Segment, Output: Slice Segment and Non-VCL</p>
</li>
<li>
<p>Input: Frame and Non-VCL, Output: Frame and Non-VCL</p>
</li>
<li>
<p>Input: Frame and Non-VCL, Output: Slice Segment and Non-VCL</p>
</li>
<li>
<p>Input: Slice Segment and Non-VCL, Output: Slice Segment and Non-VCL</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeH265CtbSizeFlagsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeH265CtbSizeFlagsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEncodeH265CtbSizeFlagsEXT</code> is a bitmask type for setting a mask
of zero or more <a href="chap41.html#VkVideoEncodeH265CtbSizeFlagBitsEXT">VkVideoEncodeH265CtbSizeFlagBitsEXT</a>.
Implementations <strong class="purple">must</strong> set at least one of
<code>VkVideoEncodeH265CtbSizeFlagBitsEXT</code>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">may</strong> be set in
<a href="chap41.html#VkVideoEncodeH265CapabilitiesEXT">VkVideoEncodeH265CapabilitiesEXT</a>::<code>ctbSizes</code>, indicating the CTB
sizes supported by the implementation, are:</p>
</div>
<div id="VkVideoEncodeH265CtbSizeFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeH265CtbSizeFlagBitsEXT</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CTB_SIZE_16_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CTB_SIZE_32_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CTB_SIZE_64_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265CtbSizeFlagBitsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CTB_SIZE_16_BIT_EXT</code> specifies that a CTB size
of 16x16 is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CTB_SIZE_32_BIT_EXT</code> specifies that a CTB size
of 32x32 is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CTB_SIZE_64_BIT_EXT</code> specifies that a CTB size
of 64x64 is supported.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeH265TransformBlockSizeFlagsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeH265TransformBlockSizeFlagsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEncodeH265TransformBlockSizeFlagsEXT</code> is a bitmask type for
setting a mask of zero or more
<a href="chap41.html#VkVideoEncodeH265TransformBlockSizeFlagBitsEXT">VkVideoEncodeH265TransformBlockSizeFlagBitsEXT</a>.
Implementations <strong class="purple">must</strong> set at least one of
<code>VkVideoEncodeH265TransformBlockSizeFlagBitsEXT</code>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">may</strong> be set in
<a href="chap41.html#VkVideoEncodeH265CapabilitiesEXT">VkVideoEncodeH265CapabilitiesEXT</a>::<code>transformBlockSizes</code>,
indicating the transform block sizes supported by the implementation, are:</p>
</div>
<div id="VkVideoEncodeH265TransformBlockSizeFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeH265TransformBlockSizeFlagBitsEXT</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_H265_TRANSFORM_BLOCK_SIZE_4_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_TRANSFORM_BLOCK_SIZE_8_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_TRANSFORM_BLOCK_SIZE_16_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_TRANSFORM_BLOCK_SIZE_32_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265TransformBlockSizeFlagBitsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_H265_TRANSFORM_BLOCK_SIZE_4_BIT_EXT</code> specifies that
a transform block size of 4x4 is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_TRANSFORM_BLOCK_SIZE_8_BIT_EXT</code> specifies that
a transform block size of 8x8 is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_TRANSFORM_BLOCK_SIZE_16_BIT_EXT</code> specifies
that a transform block size of 16x16 is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_TRANSFORM_BLOCK_SIZE_32_BIT_EXT</code> specifies
that a transform block size of 32x32 is supported.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_encoder_h_265_video_session_parameters_object"><a class="anchor" href="chap41.html#_encoder_h_265_video_session_parameters_object"></a>41.10.3. Encoder H.265 Video Session Parameters Object</h4>
<div class="paragraph">
<p>When creating a Video Session Parameters object, add a
<a href="chap41.html#VkVideoEncodeH265SessionParametersCreateInfoEXT">VkVideoEncodeH265SessionParametersCreateInfoEXT</a> structure to the
<code>pNext</code> chain of the <a href="chap41.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a>
structure passed to <a href="chap41.html#vkCreateVideoSessionParametersKHR">vkCreateVideoSessionParametersKHR</a> in order to
specify the H.265-specific video encoder session parameters.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH265SessionParametersCreateInfoEXT</code> structure is
defined as:</p>
</div>
<div id="VkVideoEncodeH265SessionParametersCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265SessionParametersCreateInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                        <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                            <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                               <span class="n">maxStdVPSCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                               <span class="n">maxStdSPSCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                               <span class="n">maxStdPPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoEncodeH265SessionParametersAddInfoEXT</span><span class="o">*</span>    <span class="n">pParametersAddInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265SessionParametersCreateInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>maxStdVPSCount</code> is the maximum number of entries of type
<code>StdVideoH265VideoParameterSet</code> within
<code>VkVideoSessionParametersKHR</code>.</p>
</li>
<li>
<p><code>maxStdSPSCount</code> is the maximum number of entries of type
<code>StdVideoH265SequenceParameterSet</code> within
<code>VkVideoSessionParametersKHR</code>.</p>
</li>
<li>
<p><code>maxStdPPSCount</code> is the maximum number of entries of type
<code>StdVideoH265PictureParameterSet</code> within
<code>VkVideoSessionParametersKHR</code>.</p>
</li>
<li>
<p><code>pParametersAddInfo</code> is <code>NULL</code> or a pointer to a
<a href="chap41.html#VkVideoEncodeH265SessionParametersAddInfoEXT">VkVideoEncodeH265SessionParametersAddInfoEXT</a> structure specifying
the video session parameters to add upon creation of this object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When a <a href="chap41.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object contains
<code>maxStdVPSCount</code> <code>StdVideoH265VideoParameterSet</code> entries, no
additional <code>StdVideoH265VideoParameterSet</code> entries can be added to it,
and <code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add these entries.
When a <a href="chap41.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object contains
<code>maxStdSPSCount</code> <code>StdVideoH265SequenceParameterSet</code> entries, no
additional <code>StdVideoH265SequenceParameterSet</code> entries can be added to it,
and <code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add these entries.
When a <a href="chap41.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object contains
<code>maxStdPPSCount</code> <code>StdVideoH265PictureParameterSet</code> entries, no
additional <code>StdVideoH265PictureParameterSet</code> entries can be added to it,
and <code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add these entries.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersCreateInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH265SessionParametersCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H265_SESSION_PARAMETERS_CREATE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersCreateInfoEXT-pParametersAddInfo-parameter" href="chap41.html#VUID-VkVideoEncodeH265SessionParametersCreateInfoEXT-pParametersAddInfo-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersCreateInfoEXT-pParametersAddInfo-parameter</span><br>
 If <code>pParametersAddInfo</code> is not <code>NULL</code>, <code>pParametersAddInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkVideoEncodeH265SessionParametersAddInfoEXT">VkVideoEncodeH265SessionParametersAddInfoEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH265SessionParametersAddInfoEXT</code> structure is defined
as:</p>
</div>
<div id="VkVideoEncodeH265SessionParametersAddInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265SessionParametersAddInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                            <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                   <span class="n">stdVPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoH265VideoParameterSet</span><span class="o">*</span>       <span class="n">pStdVPSs</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                   <span class="n">stdSPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoH265SequenceParameterSet</span><span class="o">*</span>    <span class="n">pStdSPSs</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                   <span class="n">stdPPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoH265PictureParameterSet</span><span class="o">*</span>     <span class="n">pStdPPSs</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265SessionParametersAddInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stdVPSCount</code> is the number of VPS elements in <code>pStdVPSs</code>.</p>
</li>
<li>
<p><code>pStdVPSs</code> is a pointer to an array of <code>stdVPSCount</code>
<code>StdVideoH265VideoParameterSet</code> structures representing H.265 video
parameter sets.</p>
</li>
<li>
<p><code>stdSPSCount</code> is the number of SPS elements in <code>pStdSPSs</code>.</p>
</li>
<li>
<p><code>pStdSPSs</code> is a pointer to an array of <code>stdSPSCount</code>
<code>StdVideoH265SequenceParameterSet</code> structures representing H.265
sequence parameter sets.</p>
</li>
<li>
<p><code>stdPPSCount</code> is the number of PPS elements in <code>pStdPPSs</code>.</p>
</li>
<li>
<p><code>pStdPPSs</code> is a pointer to an array of <code>stdPPSCount</code>
<code>StdVideoH265PictureParameterSet</code> structures representing H.265
picture parameter sets.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H265_SESSION_PARAMETERS_ADD_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdVPSs-parameter" href="chap41.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdVPSs-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdVPSs-parameter</span><br>
 If <code>pStdVPSs</code> is not <code>NULL</code>, <code>pStdVPSs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>stdVPSCount</code> <code>StdVideoH265VideoParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdSPSs-parameter" href="chap41.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdSPSs-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdSPSs-parameter</span><br>
 If <code>pStdSPSs</code> is not <code>NULL</code>, <code>pStdSPSs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>stdSPSCount</code> <code>StdVideoH265SequenceParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdPPSs-parameter" href="chap41.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdPPSs-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdPPSs-parameter</span><br>
 If <code>pStdPPSs</code> is not <code>NULL</code>, <code>pStdPPSs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>stdPPSCount</code> <code>StdVideoH265PictureParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdVPSCount-arraylength" href="chap41.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdVPSCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdVPSCount-arraylength</span><br>
 <code>stdVPSCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdSPSCount-arraylength" href="chap41.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdSPSCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdSPSCount-arraylength</span><br>
 <code>stdSPSCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdPPSCount-arraylength" href="chap41.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdPPSCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdPPSCount-arraylength</span><br>
 <code>stdPPSCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdVPSCount-06438" href="chap41.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdVPSCount-06438"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdVPSCount-06438</span><br>

The values of <code>stdVPSCount</code>, <code>stdSPSCount</code> and <code>stdPPSCount</code>
<strong class="purple">must</strong> be less than or equal to the values of
<a href="chap41.html#VkVideoEncodeH265SessionParametersCreateInfoEXT">VkVideoEncodeH265SessionParametersCreateInfoEXT</a>::<code>maxStdVPSCount</code>,
<a href="chap41.html#VkVideoEncodeH265SessionParametersCreateInfoEXT">VkVideoEncodeH265SessionParametersCreateInfoEXT</a>:<code>maxStdSPSCount</code>,
and
<a href="chap41.html#VkVideoEncodeH265SessionParametersCreateInfoEXT">VkVideoEncodeH265SessionParametersCreateInfoEXT</a>:<code>maxStdPPSCount</code>,
respectively</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdVPSs-06439" href="chap41.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdVPSs-06439"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdVPSs-06439</span><br>

Each <code>StdVideoH265VideoParameterSet</code> entry in <code>pStdVPSs</code> <strong class="purple">must</strong>
have a unique H.265 VPS ID</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdSPSs-06440" href="chap41.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdSPSs-06440"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdSPSs-06440</span><br>

Each <code>StdVideoH265SequenceParameterSet</code> entry in <code>pStdSPSs</code> <strong class="purple">must</strong>
have a unique H.265 VPS-SPS ID pair</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdPPSs-06441" href="chap41.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdPPSs-06441"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdPPSs-06441</span><br>

Each <code>StdVideoH265PictureParameterSet</code> entry in <code>pStdPPSs</code> <strong class="purple">must</strong>
have a unique H.265 VPS-SPS-PPS ID tuple</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06442" href="chap41.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06442"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06442</span><br>

Each entry to be added <strong class="purple">must</strong> have a unique, to the rest of the parameter
array entries and the existing parameters in the Video Session
Parameters Object that is being updated, VPS-SPS-PPS IDs</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06443" href="chap41.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06443"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06443</span><br>

Parameter entries that already exist in Video Session Parameters object
with a particular VPS-SPS-PPS IDs <strong class="purple">must</strong> not be replaced nor updated</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06444" href="chap41.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06444"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06444</span><br>

When creating a new object using a Video Session Parameters as a
template, the array’s parameters with the same VPS-SPS-PPS IDs as the
ones from the template take precedence</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06445" href="chap41.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06445"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06445</span><br>

VPS/SPS/PPS parameters <strong class="purple">must</strong> comply with the limits specified in
<a href="chap41.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a> during Video Session creation</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_frame_encoding_2"><a class="anchor" href="chap41.html#_frame_encoding_2"></a>41.10.4. Frame Encoding</h4>
<div class="paragraph">
<p>In order to encode a frame, add a <a href="chap41.html#VkVideoEncodeH265VclFrameInfoEXT">VkVideoEncodeH265VclFrameInfoEXT</a>
structure to the <code>pNext</code> chain of the <a href="chap41.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>
structure passed to the <a href="chap41.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a> command.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoEncodeH265VclFrameInfoEXT">VkVideoEncodeH265VclFrameInfoEXT</a> structure representing a frame
encode operation is defined as:</p>
</div>
<div id="VkVideoEncodeH265VclFrameInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265VclFrameInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                        <span class="n">pNext</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoEncodeH265ReferenceListsInfoEXT</span><span class="o">*</span>      <span class="n">pReferenceFinalLists</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                           <span class="n">naluSliceSegmentEntryCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoEncodeH265NaluSliceSegmentInfoEXT</span><span class="o">*</span>    <span class="n">pNaluSliceSegmentEntries</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoEncodeH265PictureInfo</span><span class="o">*</span>               <span class="n">pCurrentPictureInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265VclFrameInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pReferenceFinalLists</code> is <code>NULL</code> or a pointer to a
<a href="chap41.html#VkVideoEncodeH265ReferenceListsInfoEXT">VkVideoEncodeH265ReferenceListsInfoEXT</a> structure specifying the
reference lists to be used for the current picture.</p>
</li>
<li>
<p><code>naluSliceSegmentEntryCount</code> is the number of slice segment NALUs in
the frame.</p>
</li>
<li>
<p><code>pNaluSliceSegmentEntries</code> is a pointer to an array of
<a href="chap41.html#VkVideoEncodeH265NaluSliceSegmentInfoEXT">VkVideoEncodeH265NaluSliceSegmentInfoEXT</a> structures specifying the
division of the current picture into slice segments and the properties
of these slice segments.</p>
</li>
<li>
<p><code>pCurrentPictureInfo</code> is a pointer to a
<code>StdVideoEncodeH265PictureInfo</code> structure specifying the syntax and
other codec-specific information from the H.265 specification,
associated with this picture.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265VclFrameInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH265VclFrameInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH265VclFrameInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H265_VCL_FRAME_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265VclFrameInfoEXT-pReferenceFinalLists-parameter" href="chap41.html#VUID-VkVideoEncodeH265VclFrameInfoEXT-pReferenceFinalLists-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265VclFrameInfoEXT-pReferenceFinalLists-parameter</span><br>
 If <code>pReferenceFinalLists</code> is not <code>NULL</code>, <code>pReferenceFinalLists</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkVideoEncodeH265ReferenceListsInfoEXT">VkVideoEncodeH265ReferenceListsInfoEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265VclFrameInfoEXT-pNaluSliceSegmentEntries-parameter" href="chap41.html#VUID-VkVideoEncodeH265VclFrameInfoEXT-pNaluSliceSegmentEntries-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265VclFrameInfoEXT-pNaluSliceSegmentEntries-parameter</span><br>
 <code>pNaluSliceSegmentEntries</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>naluSliceSegmentEntryCount</code> valid <a href="chap41.html#VkVideoEncodeH265NaluSliceSegmentInfoEXT">VkVideoEncodeH265NaluSliceSegmentInfoEXT</a> structures</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265VclFrameInfoEXT-pCurrentPictureInfo-parameter" href="chap41.html#VUID-VkVideoEncodeH265VclFrameInfoEXT-pCurrentPictureInfo-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265VclFrameInfoEXT-pCurrentPictureInfo-parameter</span><br>
 <code>pCurrentPictureInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoEncodeH265PictureInfo</code> value</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265VclFrameInfoEXT-naluSliceSegmentEntryCount-arraylength" href="chap41.html#VUID-VkVideoEncodeH265VclFrameInfoEXT-naluSliceSegmentEntryCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH265VclFrameInfoEXT-naluSliceSegmentEntryCount-arraylength</span><br>
 <code>naluSliceSegmentEntryCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoEncodeH265NaluSliceSegmentInfoEXT">VkVideoEncodeH265NaluSliceSegmentInfoEXT</a> structure representing a
slice segment is defined as:</p>
</div>
<div id="VkVideoEncodeH265NaluSliceSegmentInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265NaluSliceSegmentInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                  <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                      <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                         <span class="n">ctbCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoEncodeH265ReferenceListsInfoEXT</span><span class="o">*</span>    <span class="n">pReferenceFinalLists</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoEncodeH265SliceSegmentHeader</span><span class="o">*</span>      <span class="n">pSliceSegmentHeaderStd</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265NaluSliceSegmentInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>ctbCount</code> is the number of CTBs in this slice segment.</p>
</li>
<li>
<p><code>pReferenceFinalLists</code> is <code>NULL</code> or a pointer to a
<a href="chap41.html#VkVideoEncodeH265ReferenceListsInfoEXT">VkVideoEncodeH265ReferenceListsInfoEXT</a> structure specifying the
reference lists to be used for the current slice segment.
If <code>pReferenceFinalLists</code> is not <code>NULL</code>, these reference lists
override the reference lists provided in
<a href="chap41.html#VkVideoEncodeH265VclFrameInfoEXT">VkVideoEncodeH265VclFrameInfoEXT</a>::<code>pReferenceFinalLists</code>.</p>
</li>
<li>
<p><code>pSliceSegmentHeaderStd</code> is a pointer to a
<code>StdVideoEncodeH265SliceSegmentHeader</code> structure specifying the slice
segment header for the current slice segment.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H265_NALU_SLICE_SEGMENT_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-pNext-pNext" href="chap41.html#VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-pNext-pNext"></a> <span class="vuid">VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-pReferenceFinalLists-parameter" href="chap41.html#VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-pReferenceFinalLists-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-pReferenceFinalLists-parameter</span><br>
 If <code>pReferenceFinalLists</code> is not <code>NULL</code>, <code>pReferenceFinalLists</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap41.html#VkVideoEncodeH265ReferenceListsInfoEXT">VkVideoEncodeH265ReferenceListsInfoEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-pSliceSegmentHeaderStd-parameter" href="chap41.html#VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-pSliceSegmentHeaderStd-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-pSliceSegmentHeaderStd-parameter</span><br>
 <code>pSliceSegmentHeaderStd</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoEncodeH265SliceSegmentHeader</code> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoEncodeH265DpbSlotInfoEXT">VkVideoEncodeH265DpbSlotInfoEXT</a> structure, representing a
reconstructed picture that is being used as a reference picture, is defined
as:</p>
</div>
<div id="VkVideoEncodeH265DpbSlotInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265DpbSlotInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                           <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                               <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">int8_t</span>                                    <span class="n">slotIndex</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoEncodeH265ReferenceInfo</span><span class="o">*</span>    <span class="n">pStdReferenceInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265DpbSlotInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>slotIndex</code> is the <a href="chap41.html#dpb-slot">DPB Slot</a> index for this picture.</p>
</li>
<li>
<p><code>pStdReferenceInfo</code> is a pointer to a
<code>StdVideoEncodeH265ReferenceInfo</code> structure specifying the syntax and
other codec-specific information from the H.265 specification,
associated with this reference picture.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265DpbSlotInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH265DpbSlotInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH265DpbSlotInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H265_DPB_SLOT_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265DpbSlotInfoEXT-pNext-pNext" href="chap41.html#VUID-VkVideoEncodeH265DpbSlotInfoEXT-pNext-pNext"></a> <span class="vuid">VUID-VkVideoEncodeH265DpbSlotInfoEXT-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265DpbSlotInfoEXT-pStdReferenceInfo-parameter" href="chap41.html#VUID-VkVideoEncodeH265DpbSlotInfoEXT-pStdReferenceInfo-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265DpbSlotInfoEXT-pStdReferenceInfo-parameter</span><br>
 <code>pStdReferenceInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoEncodeH265ReferenceInfo</code> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoEncodeH265ReferenceListsInfoEXT">VkVideoEncodeH265ReferenceListsInfoEXT</a> structure representing
reference lists is defined as:</p>
</div>
<div id="VkVideoEncodeH265ReferenceListsInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265ReferenceListsInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                            <span class="n">referenceList0EntryCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoEncodeH265DpbSlotInfoEXT</span><span class="o">*</span>             <span class="n">pReferenceList0Entries</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                            <span class="n">referenceList1EntryCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoEncodeH265DpbSlotInfoEXT</span><span class="o">*</span>             <span class="n">pReferenceList1Entries</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoEncodeH265ReferenceModifications</span><span class="o">*</span>    <span class="n">pReferenceModifications</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265ReferenceListsInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>referenceList0EntryCount</code> is the number of reference pictures in
reference list L0 and is identical to
<code>StdVideoEncodeH265SliceSegmentHeader</code>::<code>num_ref_idx_l0_active_minus1</code>
+ 1.</p>
</li>
<li>
<p><code>pReferenceList0Entries</code> is a pointer to an array of
<code>referenceList0EntryCount</code> <a href="chap41.html#VkVideoEncodeH265DpbSlotInfoEXT">VkVideoEncodeH265DpbSlotInfoEXT</a>
structures specifying the reference list L0 entries for the current
picture.</p>
</li>
<li>
<p><code>referenceList1EntryCount</code> is the number of reference pictures in
reference list L1 and is identical to
<code>StdVideoEncodeH265SliceSegmentHeader</code>::<code>num_ref_idx_l1_active_minus1</code>
+ 1.</p>
</li>
<li>
<p><code>pReferenceList1Entries</code> is a pointer to an array of
<code>referenceList1EntryCount</code> <a href="chap41.html#VkVideoEncodeH265DpbSlotInfoEXT">VkVideoEncodeH265DpbSlotInfoEXT</a>
structures specifying the reference list L1 entries for the current
picture.</p>
</li>
<li>
<p><code>pReferenceModifications</code> is a pointer to a
<code>StdVideoEncodeH265ReferenceModifications</code> structure specifying
reference list modifications.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265ReferenceListsInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH265ReferenceListsInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH265ReferenceListsInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H265_REFERENCE_LISTS_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265ReferenceListsInfoEXT-pNext-pNext" href="chap41.html#VUID-VkVideoEncodeH265ReferenceListsInfoEXT-pNext-pNext"></a> <span class="vuid">VUID-VkVideoEncodeH265ReferenceListsInfoEXT-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265ReferenceListsInfoEXT-pReferenceList0Entries-parameter" href="chap41.html#VUID-VkVideoEncodeH265ReferenceListsInfoEXT-pReferenceList0Entries-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265ReferenceListsInfoEXT-pReferenceList0Entries-parameter</span><br>
 If <code>referenceList0EntryCount</code> is not <code>0</code>, <code>pReferenceList0Entries</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>referenceList0EntryCount</code> valid <a href="chap41.html#VkVideoEncodeH265DpbSlotInfoEXT">VkVideoEncodeH265DpbSlotInfoEXT</a> structures</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265ReferenceListsInfoEXT-pReferenceList1Entries-parameter" href="chap41.html#VUID-VkVideoEncodeH265ReferenceListsInfoEXT-pReferenceList1Entries-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265ReferenceListsInfoEXT-pReferenceList1Entries-parameter</span><br>
 If <code>referenceList1EntryCount</code> is not <code>0</code>, <code>pReferenceList1Entries</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>referenceList1EntryCount</code> valid <a href="chap41.html#VkVideoEncodeH265DpbSlotInfoEXT">VkVideoEncodeH265DpbSlotInfoEXT</a> structures</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265ReferenceListsInfoEXT-pReferenceModifications-parameter" href="chap41.html#VUID-VkVideoEncodeH265ReferenceListsInfoEXT-pReferenceModifications-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265ReferenceListsInfoEXT-pReferenceModifications-parameter</span><br>
 <code>pReferenceModifications</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoEncodeH265ReferenceModifications</code> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap41.html#VkVideoEncodeH265EmitPictureParametersInfoEXT">VkVideoEncodeH265EmitPictureParametersInfoEXT</a> structure is defined
as:</p>
</div>
<div id="VkVideoEncodeH265EmitPictureParametersInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265EmitPictureParametersInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint8_t</span>            <span class="n">vpsId</span><span class="p">;</span>
    <span class="kt">uint8_t</span>            <span class="n">spsId</span><span class="p">;</span>
    <span class="n">VkBool32</span>           <span class="n">emitVpsEnable</span><span class="p">;</span>
    <span class="n">VkBool32</span>           <span class="n">emitSpsEnable</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">ppsIdEntryCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint8_t</span><span class="o">*</span>     <span class="n">ppsIdEntries</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265EmitPictureParametersInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>vpsId</code> is the H.265 VPS ID for the H.265 VPS to insert in the
bitstream.
The VPS ID <strong class="purple">must</strong> match the VPS provided in <code>vpsStd</code> of
<a href="chap41.html#VkVideoEncodeH265SessionParametersCreateInfoEXT">VkVideoEncodeH265SessionParametersCreateInfoEXT</a>.
This is retrieved from the <a href="chap41.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object
provided in <a href="chap41.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>.</p>
</li>
<li>
<p><code>spsId</code> is the H.265 SPS ID for the H.265 SPS to insert in the
bitstream.
The SPS ID <strong class="purple">must</strong> match one of the IDs of the SPS(s) provided in
<code>pStdSPSs</code> of <a href="chap41.html#VkVideoEncodeH265SessionParametersCreateInfoEXT">VkVideoEncodeH265SessionParametersCreateInfoEXT</a>
to identify the SPS parameter set to insert in the bitstream.
This is retrieved from the <a href="chap41.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object
provided in <a href="chap41.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>.</p>
</li>
<li>
<p><code>emitVpsEnable</code> enables the emitting of the VPS structure with id of
<code>vpsId</code>.</p>
</li>
<li>
<p><code>emitSpsEnable</code> enables the emitting of the SPS structure with id of
<code>spsId</code>.</p>
</li>
<li>
<p><code>ppsIdEntryCount</code> is the number of entries in the
<code>ppsIdEntries</code>.
If this parameter is <code>0</code> then no pps entries are going to be emitted in
the bitstream.</p>
</li>
<li>
<p><code>ppsIdEntries</code> is the H.265 PPS IDs for the H.265 PPS to insert in
the bitstream.
The PPS IDs <strong class="purple">must</strong> match one of the IDs of the PPS(s) provided in
<code>pStdPPSs</code> of <a href="chap41.html#VkVideoEncodeH265SessionParametersCreateInfoEXT">VkVideoEncodeH265SessionParametersCreateInfoEXT</a>
to identify the PPS parameter set to insert in the bitstream.
This is retrieved from the <a href="chap41.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object
provided in <a href="chap41.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265EmitPictureParametersInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH265EmitPictureParametersInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH265EmitPictureParametersInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H265_EMIT_PICTURE_PARAMETERS_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265EmitPictureParametersInfoEXT-ppsIdEntries-parameter" href="chap41.html#VUID-VkVideoEncodeH265EmitPictureParametersInfoEXT-ppsIdEntries-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265EmitPictureParametersInfoEXT-ppsIdEntries-parameter</span><br>
 If <code>ppsIdEntryCount</code> is not <code>0</code>, <code>ppsIdEntries</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>ppsIdEntryCount</code> <code>uint8_t</code> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_rate_control_2"><a class="anchor" href="chap41.html#_rate_control_2"></a>41.10.5. Rate control</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH265RateControlInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH265RateControlInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265RateControlInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                 <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                    <span class="n">gopFrameCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                    <span class="n">idrPeriod</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                    <span class="n">consecutiveBFrameCount</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH265RateControlStructureEXT</span>    <span class="n">rateControlStructure</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                                     <span class="n">subLayerCount</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265RateControlInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>gopFrameCount</code> is the number of frames contained within the group
of pictures (GOP), starting from an intra frame and until the next intra
frame.
If it is set to 0, the implementation chooses a suitable value.
If it is set to <code>UINT32_MAX</code>, the GOP length is treated as infinite.</p>
</li>
<li>
<p><code>idrPeriod</code> is the interval, in terms of number of frames, between
two IDR frames.
If it is set to 0, the implementation chooses a suitable value.
If it is set to <code>UINT32_MAX</code>, the IDR period is treated as infinite.</p>
</li>
<li>
<p><code>consecutiveBFrameCount</code> is the number of consecutive B-frames
between I- and/or P-frames within the GOP.</p>
</li>
<li>
<p><code>rateControlStructure</code> is a
<a href="chap41.html#VkVideoEncodeH265RateControlStructureEXT">VkVideoEncodeH265RateControlStructureEXT</a> value specifying the
expected encode stream reference structure, to aid in rate control
calculations.</p>
</li>
<li>
<p><code>subLayerCount</code> specifies the number of sub layers enabled in the
stream.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In order to provide H.265-specific stream rate control parameters, add a
<code>VkVideoEncodeH265RateControlInfoEXT</code> structure to the <code>pNext</code> chain
of the <a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a> structure in the <code>pNext</code>
chain of the <a href="chap41.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a> structure passed to the
<a href="chap41.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a> command.</p>
</div>
<div class="paragraph">
<p>The parameters from this structure act as a guidance for implementations to
apply various rate control heuristics.</p>
</div>
<div class="paragraph">
<p>It is possible to infer the picture type to be used when encoding a frame,
on the basis of the values provided for <code>consecutiveBFrameCount</code>,
<code>idrPeriod</code>, and <code>gopFrameCount</code>, but this inferred picture type
will not be used by implementations to override the picture type provided in
<a href="chap41.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a>.
Additionally, it is not required for the video session to be reset if the
inferred picture type does not match the actual picture type.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265RateControlInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH265RateControlInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH265RateControlInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H265_RATE_CONTROL_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265RateControlInfoEXT-rateControlStructure-parameter" href="chap41.html#VUID-VkVideoEncodeH265RateControlInfoEXT-rateControlStructure-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265RateControlInfoEXT-rateControlStructure-parameter</span><br>
 <code>rateControlStructure</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoEncodeH265RateControlStructureEXT">VkVideoEncodeH265RateControlStructureEXT</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of
<a href="chap41.html#VkVideoEncodeH265RateControlInfoEXT">VkVideoEncodeH265RateControlInfoEXT</a>::<code>rateControlStructure</code>,
specifying a video stream reference structure as a hint for the rate control
implementation, are:</p>
</div>
<div id="VkVideoEncodeH265RateControlStructureEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeH265RateControlStructureEXT</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_H265_RATE_CONTROL_STRUCTURE_UNKNOWN_EXT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_RATE_CONTROL_STRUCTURE_FLAT_EXT</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_RATE_CONTROL_STRUCTURE_DYADIC_EXT</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265RateControlStructureEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_H265_RATE_CONTROL_STRUCTURE_UNKNOWN_EXT</code> specifies
a reference structure unknown at the time of stream rate control
configuration.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_RATE_CONTROL_STRUCTURE_FLAT_EXT</code> specifies a
flat reference structure.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_RATE_CONTROL_STRUCTURE_DYADIC_EXT</code> specifies a
dyadic reference structure.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH265RateControlLayerInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH265RateControlLayerInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265RateControlLayerInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                  <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                      <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint8_t</span>                          <span class="n">temporalId</span><span class="p">;</span>
    <span class="n">VkBool32</span>                         <span class="n">useInitialRcQp</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH265QpEXT</span>           <span class="n">initialRcQp</span><span class="p">;</span>
    <span class="n">VkBool32</span>                         <span class="n">useMinQp</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH265QpEXT</span>           <span class="n">minQp</span><span class="p">;</span>
    <span class="n">VkBool32</span>                         <span class="n">useMaxQp</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH265QpEXT</span>           <span class="n">maxQp</span><span class="p">;</span>
    <span class="n">VkBool32</span>                         <span class="n">useMaxFrameSize</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH265FrameSizeEXT</span>    <span class="n">maxFrameSize</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265RateControlLayerInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>temporalId</code> specifies the H.265 temporal ID of the video coding
layer that settings provided in this structure and its parent
<a href="chap41.html#VkVideoEncodeRateControlLayerInfoKHR">VkVideoEncodeRateControlLayerInfoKHR</a> structure apply to.</p>
</li>
<li>
<p><code>useInitialRcQp</code> indicates whether the values within
<code>initialRcQp</code> should be used by the implementation.</p>
</li>
<li>
<p><code>initialRcQp</code> provides the QP values for each picture type, to be
used in rate control calculations at the start of video encode
operations on a newly-created video session, or immediately after a
session reset.
These values are ignored when
<a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>::<code>rateControlMode</code> is
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</code>.</p>
</li>
<li>
<p><code>useMinQp</code> indicates whether the values within <code>minQp</code> should be
used by the implementation.
When it is set to <code>VK_FALSE</code>, the implementation ignores the values
in <code>minQp</code> and chooses suitable values.</p>
</li>
<li>
<p><code>minQp</code> provides the lower bound on the QP values for each picture
type, to be used in rate control calculations.</p>
</li>
<li>
<p><code>useMaxQp</code> indicates whether the values within <code>maxQp</code> should be
used by the implementation.
When it is set to <code>VK_FALSE</code>, the implementation ignores the values
in <code>maxQp</code> and chooses suitable values.</p>
</li>
<li>
<p><code>maxQp</code> provides the upper bound on the QP values for each picture
type, to be used in rate control calculations.</p>
</li>
<li>
<p><code>useMaxFrameSize</code> indicates whether the values within
<code>maxFrameSize</code> should be used by the implementation.</p>
</li>
<li>
<p><code>maxFrameSize</code> provides the upper bound on the encoded frame size
for each picture type.
The implementation does not guarantee the encoded frame sizes will be
within the specified limits, however these limits <strong class="purple">may</strong> be used as a
guide in rate control calculations.
If enabled and not set properly, the <code>maxQp</code> limit may prevent the
implementation from respecting the <code>maxFrameSize</code> limit.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>H.265-specific per-layer rate control parameters <strong class="purple">must</strong> be specified by
adding a <code>VkVideoEncodeH265RateControlLayerInfoEXT</code> structure to the
<code>pNext</code> chain of each <a href="chap41.html#VkVideoEncodeRateControlLayerInfoKHR">VkVideoEncodeRateControlLayerInfoKHR</a>
structure in a call to <a href="chap41.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a> command, when the
command buffer context has an active video encode H.265 session.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265RateControlLayerInfoEXT-rateControlMode-06476" href="chap41.html#VUID-VkVideoEncodeH265RateControlLayerInfoEXT-rateControlMode-06476"></a> <span class="vuid">VUID-VkVideoEncodeH265RateControlLayerInfoEXT-rateControlMode-06476</span><br>

When <a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>::<code>rateControlMode</code> is
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</code>, both
<code>useMinQp</code> and <code>useMaxQp</code> must be set to <code>VK_TRUE</code>.</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265RateControlLayerInfoEXT-rateControlMode-06477" href="chap41.html#VUID-VkVideoEncodeH265RateControlLayerInfoEXT-rateControlMode-06477"></a> <span class="vuid">VUID-VkVideoEncodeH265RateControlLayerInfoEXT-rateControlMode-06477</span><br>

When <a href="chap41.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>::<code>rateControlMode</code> is
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</code>, the values
provided in <code>minQP</code> must be identical to those provided in
<code>maxQp</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265RateControlLayerInfoEXT-sType-sType" href="chap41.html#VUID-VkVideoEncodeH265RateControlLayerInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH265RateControlLayerInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H265_RATE_CONTROL_LAYER_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265RateControlLayerInfoEXT-initialRcQp-parameter" href="chap41.html#VUID-VkVideoEncodeH265RateControlLayerInfoEXT-initialRcQp-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265RateControlLayerInfoEXT-initialRcQp-parameter</span><br>
 <code>initialRcQp</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoEncodeH265QpEXT">VkVideoEncodeH265QpEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265RateControlLayerInfoEXT-minQp-parameter" href="chap41.html#VUID-VkVideoEncodeH265RateControlLayerInfoEXT-minQp-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265RateControlLayerInfoEXT-minQp-parameter</span><br>
 <code>minQp</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoEncodeH265QpEXT">VkVideoEncodeH265QpEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265RateControlLayerInfoEXT-maxQp-parameter" href="chap41.html#VUID-VkVideoEncodeH265RateControlLayerInfoEXT-maxQp-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265RateControlLayerInfoEXT-maxQp-parameter</span><br>
 <code>maxQp</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoEncodeH265QpEXT">VkVideoEncodeH265QpEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265RateControlLayerInfoEXT-maxFrameSize-parameter" href="chap41.html#VUID-VkVideoEncodeH265RateControlLayerInfoEXT-maxFrameSize-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265RateControlLayerInfoEXT-maxFrameSize-parameter</span><br>
 <code>maxFrameSize</code> <strong class="purple">must</strong> be a valid <a href="chap41.html#VkVideoEncodeH265FrameSizeEXT">VkVideoEncodeH265FrameSizeEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH265QpEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH265QpEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265QpEXT</span> <span class="p">{</span>
    <span class="kt">int32_t</span>    <span class="n">qpI</span><span class="p">;</span>
    <span class="kt">int32_t</span>    <span class="n">qpP</span><span class="p">;</span>
    <span class="kt">int32_t</span>    <span class="n">qpB</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265QpEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>qpI</code> is the QP to be used for I-frames.</p>
</li>
<li>
<p><code>qpP</code> is the QP to be used for P-frames.</p>
</li>
<li>
<p><code>qpB</code> is the QP to be used for B-frames.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH265FrameSizeEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH265FrameSizeEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265FrameSizeEXT</span> <span class="p">{</span>
    <span class="kt">uint32_t</span>    <span class="n">frameISize</span><span class="p">;</span>
    <span class="kt">uint32_t</span>    <span class="n">framePSize</span><span class="p">;</span>
    <span class="kt">uint32_t</span>    <span class="n">frameBSize</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265FrameSizeEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>frameISize</code> is the size in bytes to be used for I-frames.</p>
</li>
<li>
<p><code>framePSize</code> is the size in bytes to be used for P-frames.</p>
</li>
<li>
<p><code>frameBSize</code> is the size in bytes to be used for B-frames.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div></div>

<nav>
  <a rel="prev" href="chap40.html" class="nav nav-prev" title="Previous page" aria-label="Previous page" aria-keyshortcuts="Left">
        <i class="fa fa-angle-left"></i>
     </a>
  <a rel="next" href="chap42.html" class="nav nav-next" title="Next page" aria-label="Next page" aria-keyshortcuts="Right">
        <i class="fa fa-angle-right"></i>
     </a>
  <div style="clear: both"></div>
</nav>
<div id="footer">
<div id="footer-text">
Version 1.3.235<br>
Last updated 2022-11-03 01:43:08 -0700
</div>
</div>



</body>
  <script>
  function isInViewport(ele) {
    const rect = ele.getBoundingClientRect();
    return (
        rect.top >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight)
    );
  }
  function yPosition (ele) {
    const rect = ele.getBoundingClientRect();
    return (rect.top - 20); // 20px above
  }
  let curr = document.getElementsByClassName('current');
  if (!isInViewport(curr[curr.length - 1])) {
    document.getElementById('toc').scrollTo({
      top: yPosition(curr[0]),
      left: 0,
      behavior: 'smooth'
    });
  }

  /* For page navigation */
  function gotoPage(selector) {
    const button = document.querySelector(selector);
    if (button)
      window.location.href = button.href;
  }
  document.addEventListener('keydown', e => {
    switch (e.key) {
      case 'ArrowRight':
        e.preventDefault();
        gotoPage('.nav-next');
        break;
      case 'ArrowLeft':
        e.preventDefault();
        gotoPage('.nav-prev');
        break;
    }
  });
  </script>
  </html>