<!DOCTYPE html><html lang="en"><head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<meta name="author" content="The Khronos® Vulkan  Working Group">
<title>Vulkan® 1.3.248 - A Specification (with all registered Vulkan extensions)</title>
<link rel="stylesheet" href="style0.css" type="text/css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="style1.css" type="text/css">
<link rel="stylesheet" href="style2.css" type="text/css">

<!-- dragged in by font-awesome css included by asciidoctor, but preloaded in this extension for convenience -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0" as="font" type="font/woff2" crossorigin="">

<!-- Note: Chrome needs crossorigin="" even for same-origin fonts -->
<link rel="preload" href="../katex/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Typewriter-Regular.woff2" as="font" type="font/woff2" crossorigin=""><link rel="stylesheet" href="../katex/katex.min.css">
<!--ChunkedSearchJSMarker-->
<link href="chunked.css?4" rel="stylesheet">
<script>var searchindexurl = 'search.index.js?4' + (document.title.replace(/[^0-9.]/g, ''));</script>
<script src="chunked.js?4"></script>
<link rel="stylesheet" href="style3.css" type="text/css">
<script>
    function hideElement(e){
        e.setAttribute("hidden", "");
        e.classList.add("hidden");
    }

    function unhideElement(e){
        e.classList.remove("hidden");
        e.removeAttribute("hidden");
    }

    function hideLoadableContent(){
        unhideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) hideElement(loadable);
    }

    function unhideLoadableContent(){
        hideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) unhideElement(loadable);
    }

    window.addEventListener("load", unhideLoadableContent);
</script>
<link rel="stylesheet" href="asciidoctor-chunker.css" type="text/css"></head>
<body class="book toc2 toc-left">
<div style="text-align: center;">
    <span class="image"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+Cjxzdmcgdmlld0JveD0iMCAwIDExNTAgMzI2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHN0eWxlPSJmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MS40MTQyMTsiPgogICAgPGcgaWQ9IkFydGJvYXJkMSIgdHJhbnNmb3JtPSJtYXRyaXgoMC45NTUxNSwwLDAsMC44ODgyODMsLTQwLjExNjMsLTMwLjIwMTYpIj4KICAgICAgICA8cmVjdCB4PSI0MiIgeT0iMzQiIHdpZHRoPSIxMjA0IiBoZWlnaHQ9IjM2NyIgc3R5bGU9ImZpbGw6bm9uZTsiLz4KICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxLjA0Njk2LDAsMCwxLjEyNTc3LC00Ni45OTEzLC01MC40MzI1KSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik03MjQuMSwzODUuMDZMNjgzLjUzLDM4NS4wNkM2ODMuNTMsMzg1LjA2IDY4My41MywyODYuMDkgNjgzLjUzLDI1NS40QzY5Ni40OSwyNjIuNjIgNzEzLjYyLDI3NS45NCA3MjQuMSwyODguNzJMNzI0LjEsMzg1LjA2WiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxnPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTM4MS43NSwzODUuMDZMMzMxLjE3LDM4NS4wNkwyNjUuMTYsMTgxLjAzTDMxMS4xNywxODEuMDNMMzU2LjYxLDMyNC40OEwzNTcuMTgsMzI0LjQ4TDQwMy4xOCwxODEuMDNMNDQ5LjQ3LDE4MS4wM0wzODEuNzUsMzg1LjA2WiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNTg1LjUxLDM4NS4wNkw1NDYuOTMsMzg1LjA2TDU0Ni45MywzNjQuNDlMNTQ2LjA4LDM2NC40OUM1NDAuOTMsMzczLjA3IDUzNC4yNywzNzkuMjYgNTI2LjA3LDM4My4wN0M1MTcuODgsMzg2Ljg4IDUwOS41LDM4OC43OCA1MDAuOTIsMzg4Ljc4QzQ5MC4wNiwzODguNzggNDgxLjE2LDM4Ny4zNSA0NzQuMiwzODQuNUM0NjcuMjUsMzgxLjY1IDQ2MS43NywzNzcuNTkgNDU3Ljc3LDM3Mi4zNkM0NTMuNzYsMzY3LjEyIDQ1MC45NSwzNjAuNzQgNDQ5LjMzLDM1My4yMUM0NDcuNzIsMzQ1LjY5IDQ0Ni45MSwzMzcuMzUgNDQ2LjkxLDMyOC4yMUw0NDYuOTEsMjM3LjMzTDQ4Ny40OSwyMzcuMzNMNDg3LjQ5LDMyMC43N0M0ODcuNDksMzMyLjk2IDQ4OS40LDM0Mi4wNiA0OTMuMjEsMzQ4LjA2QzQ5Ny4wMiwzNTQuMDcgNTAzLjc4LDM1Ny4wNiA1MTMuNSwzNTcuMDZDNTI0LjU1LDM1Ny4wNiA1MzIuNTUsMzUzLjc4IDUzNy41LDM0Ny4yQzU0Mi40NiwzNDAuNjIgNTQ0LjkzLDMyOS44MSA1NDQuOTMsMzE0Ljc2TDU0NC45MywyMzcuMzJMNTg1LjUyLDIzNy4zMkw1ODUuNTIsMzg1LjA2TDU4NS41MSwzODUuMDZaIiBzdHlsZT0iZmlsbDpyZ2IoMTcyLDIyLDQ0KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8cGF0aCBkPSJNNzMwLjg0LDI5Ni4xOUw3MzAuNzQsMjkwLjQ3TDc4MS44OSwyMzcuMzNMODI5LjkxLDIzNy4zM0w3NzQuMTgsMjkxLjYyTDgzNi4xOSwzODUuMDZMNzg3LjA0LDM4NS4wNkw3MzAuODQsMjk2LjE5WiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik04NDMuNjIsMjgyLjc2Qzg0NC4xOSwyNzMuMjQgODQ2LjU4LDI2NS4zMyA4NTAuNzcsMjU5LjA0Qzg1NC45NiwyNTIuNzUgODYwLjI5LDI0Ny43MSA4NjYuNzcsMjQzLjlDODczLjI1LDI0MC4wOSA4ODAuNTQsMjM3LjM3IDg4OC42NCwyMzUuNzZDODk2LjczLDIzNC4xNCA5MDQuODgsMjMzLjMzIDkxMy4wNywyMzMuMzNDOTIwLjUsMjMzLjMzIDkyOC4wMiwyMzMuODUgOTM1LjY0LDIzNC45Qzk0My4yNywyMzUuOTUgOTUwLjIxLDIzOCA5NTYuNSwyNDEuMDVDOTYyLjc4LDI0NC4xIDk2Ny45MywyNDguMzQgOTcxLjk0LDI1My43NkM5NzUuOTQsMjU5LjE5IDk3Ny45NCwyNjYuMzggOTc3Ljk0LDI3NS4zNEw5NzcuOTQsMzUyLjIxQzk3Ny45NCwzNTguODggOTc4LjMyLDM2NS4yNyA5NzkuMDgsMzcxLjM2Qzk3OS44NCwzNzcuNDYgOTgxLjE4LDM4Mi4wMyA5ODMuMDksMzg1LjA4TDk0MS45NCwzODUuMDhDOTQxLjE4LDM4Mi44IDk0MC41NiwzODAuNDYgOTQwLjA4LDM3OC4wOEM5MzkuNjEsMzc1LjcgOTM5LjI3LDM3My4yOCA5MzkuMDgsMzcwLjc5QzkzMi42LDM3Ny40NyA5MjQuOTcsMzgyLjEzIDkxNi4yMSwzODQuOEM5MDcuNDUsMzg3LjQ2IDg5OC40OSwzODguOCA4ODkuMzUsMzg4LjhDODgyLjMsMzg4LjggODc1LjcyLDM4Ny45NCA4NjkuNjQsMzg2LjIzQzg2My41NCwzODQuNTIgODU4LjIsMzgxLjg1IDg1My42NCwzNzguMjNDODQ5LjA2LDM3NC42MSA4NDUuNDgsMzcwLjA0IDg0Mi45MiwzNjQuNTFDODQwLjM1LDM1OC45OSA4MzkuMDYsMzUyLjQyIDgzOS4wNiwzNDQuOEM4MzkuMDYsMzM2LjQyIDg0MC41NCwzMjkuNTEgODQzLjQ5LDMyNC4wOEM4NDYuNDUsMzE4LjY1IDg1MC4yNSwzMTQuMzIgODU0LjkzLDMxMS4wOEM4NTkuNiwzMDcuODQgODY0LjkzLDMwNS40MSA4NzAuOTMsMzAzLjc5Qzg3Ni45MywzMDIuMTcgODgyLjk4LDMwMC44OCA4ODkuMDcsMjk5LjkzQzg5NS4xNywyOTguOTkgOTAxLjE3LDI5OC4yMiA5MDcuMDgsMjk3LjY1QzkxMi45OSwyOTcuMDggOTE4LjIyLDI5Ni4yMiA5MjIuNzksMjk1LjA4QzkyNy4zNywyOTMuOTMgOTMwLjk4LDI5Mi4yNyA5MzMuNjUsMjkwLjA3QzkzNi4zMiwyODcuODggOTM3LjU2LDI4NC42OSA5MzcuMzcsMjgwLjVDOTM3LjM3LDI3Ni4xMiA5MzYuNjUsMjcyLjY0IDkzNS4yMiwyNzAuMDdDOTMzLjc5LDI2Ny41IDkzMS44OSwyNjUuNSA5MjkuNTEsMjY0LjA3QzkyNy4xMywyNjIuNjQgOTI0LjM3LDI2MS42OSA5MjEuMjIsMjYxLjIxQzkxOC4wNywyNjAuNzMgOTE0LjcsMjYwLjQ5IDkxMS4wOCwyNjAuNDlDOTAzLjA4LDI2MC40OSA4OTYuNzksMjYyLjIgODkyLjIyLDI2NS42NEM4ODcuNjUsMjY5LjA3IDg4NC45OCwyNzQuNzggODg0LjIyLDI4Mi43OUw4NDMuNjIsMjgyLjc5TDg0My42MiwyODIuNzZaTTkzNy4zNSwzMTIuNzdDOTM1LjYzLDMxNC4zIDkzMy40OSwzMTUuNDggOTMwLjkyLDMxNi4zNEM5MjguMzUsMzE3LjIxIDkyNS41OSwzMTcuOTIgOTIyLjYzLDMxOC40OUM5MTkuNjgsMzE5LjA2IDkxNi41OCwzMTkuNTQgOTEzLjM1LDMxOS45MkM5MTAuMTEsMzIwLjMgOTA2Ljg3LDMyMC43NyA5MDMuNjMsMzIxLjM1QzkwMC41OCwzMjEuOTIgODk3LjU4LDMyMi42OSA4OTQuNjMsMzIzLjYzQzg5MS42OCwzMjQuNTkgODg5LjEsMzI1Ljg3IDg4Ni45MSwzMjcuNDlDODg0LjcyLDMyOS4xMSA4ODIuOTYsMzMxLjE2IDg4MS42MiwzMzMuNjNDODgwLjI5LDMzNi4xMSA4NzkuNjIsMzM5LjI1IDg3OS42MiwzNDMuMDZDODc5LjYyLDM0Ni42OCA4ODAuMjksMzQ5LjczIDg4MS42MiwzNTIuMkM4ODIuOTYsMzU0LjY4IDg4NC43NywzNTYuNjMgODg3LjA1LDM1OC4wNkM4ODkuMzQsMzU5LjQ5IDg5MiwzNjAuNDkgODk1LjA1LDM2MS4wNkM4OTguMSwzNjEuNjMgOTAxLjI0LDM2MS45MSA5MDQuNDgsMzYxLjkxQzkxMi40OCwzNjEuOTEgOTE4LjY4LDM2MC41OCA5MjMuMDYsMzU3LjkyQzkyNy40NCwzNTUuMjUgOTMwLjY5LDM1Mi4wNiA5MzIuNzcsMzQ4LjM0QzkzNC44NiwzNDQuNjMgOTM2LjE2LDM0MC44NyA5MzYuNjIsMzM3LjA2QzkzNy4xLDMzMy4yNSA5MzcuMzMsMzMwLjIgOTM3LjM0LDMyNy45Mkw5MzcuMzQsMzEyLjc3TDkzNy4zNSwzMTIuNzdaIiBzdHlsZT0iZmlsbDpyZ2IoMTcyLDIyLDQ0KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTEwMDQuMjEsMjM3LjMzTDEwNDIuOCwyMzcuMzNMMTA0Mi44LDI1Ny45TDEwNDMuNjUsMjU3LjlDMTA0OC43OSwyNDkuMzMgMTA1NS40NiwyNDMuMDkgMTA2My42NSwyMzkuMTlDMTA3MS44NCwyMzUuMjggMTA4MC4yMywyMzMuMzMgMTA4OC43OSwyMzMuMzNDMTA5OS42NiwyMzMuMzMgMTEwOC41NiwyMzQuODEgMTExNS41MiwyMzcuNzZDMTEyMi40NywyNDAuNzIgMTEyNy45NCwyNDQuODEgMTEzMS45NSwyNTAuMDVDMTEzNS45NSwyNTUuMjkgMTEzOC43NiwyNjEuNjcgMTE0MC4zOCwyNjkuMTlDMTE0MiwyNzYuNzIgMTE0Mi44MSwyODUuMDUgMTE0Mi44MSwyOTQuMkwxMTQyLjgxLDM4NS4wN0wxMTAyLjI0LDM4NS4wN0wxMTAyLjI0LDMwMS42M0MxMTAyLjI0LDI4OS40MyAxMTAwLjMzLDI4MC4zNCAxMDk2LjUzLDI3NC4zNEMxMDkyLjcxLDI2OC4zNCAxMDg1Ljk1LDI2NS4zNCAxMDc2LjIzLDI2NS4zNEMxMDY1LjE4LDI2NS4zNCAxMDU3LjE5LDI2OC42MyAxMDUyLjIzLDI3NS4yQzEwNDcuMjcsMjgxLjc2IDEwNDQuOCwyOTIuNTggMTA0NC44LDMwNy42M0wxMDQ0LjgsMzg1LjA3TDEwMDQuMjIsMzg1LjA3TDEwMDQuMjIsMjM3LjMzTDEwMDQuMjEsMjM3LjMzWiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik02MTIuMzcsMjExLjg0TDYxMi4zNywzODUuMDdMNjUyLjk1LDM4NS4wN0w2NTIuOTUsMjM0LjIxQzYzOS45MywyMjYuMjMgNjI2LjM2LDIxOC43NCA2MTIuMzcsMjExLjg0WiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xOTguNDMsMjE5LjIxQzIyMS45NSwxNTAuMzIgMzYyLjU4LDEyNS4wNSA1MTIuNTgsMTYyLjc4QzYwMi41NSwxODUuNCA2NzYuMDcsMjI5LjI4IDcyNC4wOSwyNzIuNjdDNzAyLjMsMjE1LjEyIDU5Ni42NSwxMzMuMDggNDUxLjE4LDEwNC45NkMyODYuNyw3My4xNiAxMjQuNDcsMTAxLjExIDEwNC4zOSwxNzQuMUM4OS44OSwyMjYuODMgMTUzLjU3LDI4OC42IDI1Mi4wNSwzMzAuODRDMjA3LjgxLDI5NS4wMiAxODYuMjksMjU0Ljc4IDE5OC40MywyMTkuMjFaIiBzdHlsZT0iZmlsbDpyZ2IoMTcyLDIyLDQ0KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTcyNC4xNiwyNDcuNjJMNzI0LjE2LDE4MS4wM0w2ODMuNTcsMTgxLjAzTDY4My41NywyMDEuMjVDNzAwLjg4LDIxNi43MSA3MTQuNjEsMjMyLjQ1IDcyNC4xNiwyNDcuNjJaIiBzdHlsZT0iZmlsbDpyZ2IoMTcyLDIyLDQ0KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICA8L2c+CiAgICAgICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMS4wNDY5NiwwLDAsMS4xMjU3NywtNDYuOTkxMywtNTAuNDMyNSkiPgogICAgICAgICAgICA8cGF0aCBkPSJNMTIxNC45OCwzNjMuNDNDMTIxNC45OCwzNzUuNjkgMTIwNS4zNSwzODUuMzIgMTE5Mi44MywzODUuMzJDMTE4MC40MywzODUuMzIgMTE3MC41NCwzNzUuNjkgMTE3MC41NCwzNjMuNDNDMTE3MC41NCwzNTEuNDMgMTE4MC40MywzNDEuOCAxMTkyLjgzLDM0MS44QzEyMDUuMzUsMzQxLjggMTIxNC45OCwzNTEuNDMgMTIxNC45OCwzNjMuNDNaTTExNzYuMDgsMzYzLjQzQzExNzYuMDgsMzczLjA2IDExODMuMiwzODAuNyAxMTkyLjk2LDM4MC43QzEyMDIuNDUsMzgwLjcgMTIwOS40NCwzNzMuMDUgMTIwOS40NCwzNjMuNTZDMTIwOS40NCwzNTMuOTMgMTIwMi40NSwzNDYuMTUgMTE5Mi44MiwzNDYuMTVDMTE4My4yLDM0Ni4xNiAxMTc2LjA4LDM1My45NCAxMTc2LjA4LDM2My40M1pNMTE4OS4zOSwzNzQuNzdMMTE4NC4zOCwzNzQuNzdMMTE4NC4zOCwzNTMuMTRDMTE4Ni4zNiwzNTIuNzQgMTE4OS4xMywzNTIuNDggMTE5Mi42OSwzNTIuNDhDMTE5Ni43OCwzNTIuNDggMTE5OC42MiwzNTMuMTQgMTIwMC4yMSwzNTQuMDZDMTIwMS40LDM1NC45OCAxMjAyLjMyLDM1Ni43IDEyMDIuMzIsMzU4LjgxQzEyMDIuMzIsMzYxLjE4IDEyMDAuNDcsMzYzLjAzIDExOTcuODQsMzYzLjgyTDExOTcuODQsMzY0LjA4QzExOTkuOTUsMzY0Ljg3IDEyMDEuMTQsMzY2LjQ1IDEyMDEuOCwzNjkuMzVDMTIwMi40NiwzNzIuNjUgMTIwMi44NSwzNzMuOTcgMTIwMy4zOCwzNzQuNzZMMTE5Ny45NywzNzQuNzZDMTE5Ny4zMSwzNzMuOTcgMTE5Ni45MiwzNzEuOTkgMTE5Ni4yNiwzNjkuNDlDMTE5NS44NiwzNjcuMTIgMTE5NC41NSwzNjYuMDYgMTE5MS43OCwzNjYuMDZMMTE4OS40MSwzNjYuMDZMMTE4OS40MSwzNzQuNzdMMTE4OS4zOSwzNzQuNzdaTTExODkuNTMsMzYyLjUxTDExOTEuOSwzNjIuNTFDMTE5NC42NywzNjIuNTEgMTE5Ni45MSwzNjEuNTkgMTE5Ni45MSwzNTkuMzRDMTE5Ni45MSwzNTcuMzYgMTE5NS40NiwzNTYuMDQgMTE5Mi4yOSwzNTYuMDRDMTE5MC45NywzNTYuMDQgMTE5MC4wNSwzNTYuMTcgMTE4OS41MiwzNTYuM0wxMTg5LjUyLDM2Mi41MUwxMTg5LjUzLDM2Mi41MVoiIHN0eWxlPSJmaWxsOnJnYigxNzIsMjIsNDQpO2ZpbGwtcnVsZTpub256ZXJvOyIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+Cg==" alt="Vulkan Logo" width="50%">
    </span>
</div>
<div id="header">
<h1>Vulkan<sup>®</sup> 1.3.248 - A Specification (with all registered Vulkan extensions)</h1>
<div class="details">
<span id="author" class="author">The Khronos<sup>®</sup> Vulkan  Working Group</span><br>
<span id="revnumber">version 1.3.248,</span>
<span id="revdate">2023-04-20 06:40:22Z</span>
<br><span id="revremark">from git branch: github-main commit: 9fff8b252a3688c0231fa78709084bbe677d3bf7</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="index.html">Titlepage</a></li><li><a href="chap1.html">1. Preamble</a></li>
<li><a href="chap2.html">2. Introduction</a>
<ul class="sectlevel2">
<li><a href="chap2.html#introduction-conventions">2.1. Document Conventions</a></li>
</ul>
</li>
<li><a href="chap3.html">3. Fundamentals</a>
<ul class="sectlevel2">
<li><a href="chap3.html#fundamentals-host-environment">3.1. Host and Device Environment</a></li>
<li><a href="chap3.html#fundamentals-execmodel">3.2. Execution Model</a></li>
<li><a href="chap3.html#fundamentals-objectmodel-overview">3.3. Object Model</a></li>
<li><a href="chap3.html#fundamentals-abi">3.4. Application Binary Interface</a></li>
<li><a href="chap3.html#fundamentals-commandsyntax">3.5. Command Syntax and Duration</a></li>
<li><a href="chap3.html#fundamentals-threadingbehavior">3.6. Threading Behavior</a></li>
<li><a href="chap3.html#fundamentals-validusage">3.7. Valid Usage</a></li>
<li><a href="chap3.html#fundamentals-returncodes">3.8. <code>VkResult</code> Return Codes</a></li>
<li><a href="chap3.html#fundamentals-numerics">3.9. Numeric Representation and Computation</a></li>
<li><a href="chap3.html#fundamentals-fixedconv">3.10. Fixed-Point Data Conversions</a></li>
<li><a href="chap3.html#fundamentals-common-objects">3.11. Common Object Types</a></li>
<li><a href="chap3.html#fundamentals-api-name-aliases">3.12. API Name Aliases</a></li>
</ul>
</li>
<li><a href="chap4.html">4. Initialization</a>
<ul class="sectlevel2">
<li><a href="chap4.html#initialization-functionpointers">4.1. Command Function Pointers</a></li>
<li><a href="chap4.html#initialization-instances">4.2. Instances</a></li>
</ul>
</li>
<li><a href="chap5.html">5. Devices and Queues</a>
<ul class="sectlevel2">
<li><a href="chap5.html#devsandqueues-physical-device-enumeration">5.1. Physical Devices</a></li>
<li><a href="chap5.html#devsandqueues-devices">5.2. Devices</a></li>
<li><a href="chap5.html#devsandqueues-queues">5.3. Queues</a></li>
</ul>
</li>
<li><a href="chap6.html">6. Command Buffers</a>
<ul class="sectlevel2">
<li><a href="chap6.html#commandbuffers-lifecycle">6.1. Command Buffer Lifecycle</a></li>
<li><a href="chap6.html#commandbuffers-pools">6.2. Command Pools</a></li>
<li><a href="chap6.html#commandbuffer-allocation">6.3. Command Buffer Allocation and Management</a></li>
<li><a href="chap6.html#commandbuffers-recording">6.4. Command Buffer Recording</a></li>
<li><a href="chap6.html#commandbuffers-submission">6.5. Command Buffer Submission</a></li>
<li><a href="chap6.html#commandbuffers-submission-progress">6.6. Queue Forward Progress</a></li>
<li><a href="chap6.html#commandbuffers-secondary">6.7. Secondary Command Buffer Execution</a></li>
<li><a href="chap6.html#commandbuffers-devicemask">6.8. Command Buffer Device Mask</a></li>
</ul>
</li>
<li><a href="chap7.html">7. Synchronization and Cache Control</a>
<ul class="sectlevel2">
<li><a href="chap7.html#synchronization-dependencies">7.1. Execution and Memory Dependencies</a></li>
<li><a href="chap7.html#synchronization-implicit">7.2. Implicit Synchronization Guarantees</a></li>
<li><a href="chap7.html#synchronization-fences">7.3. Fences</a></li>
<li><a href="chap7.html#synchronization-semaphores">7.4. Semaphores</a></li>
<li><a href="chap7.html#synchronization-events">7.5. Events</a></li>
<li><a href="chap7.html#synchronization-pipeline-barriers">7.6. Pipeline Barriers</a></li>
<li><a href="chap7.html#synchronization-memory-barriers">7.7. Memory Barriers</a></li>
<li><a href="chap7.html#synchronization-wait-idle">7.8. Wait Idle Operations</a></li>
<li><a href="chap7.html#synchronization-submission-host-writes">7.9. Host Write Ordering Guarantees</a></li>
<li><a href="chap7.html#synchronization-device-group">7.10. Synchronization and Multiple Physical Devices</a></li>
<li><a href="chap7.html#calibrated-timestamps">7.11. Calibrated timestamps</a></li>
</ul>
</li>
<li><a href="chap8.html">8. Render Pass</a>
<ul class="sectlevel2">
<li><a href="chap8.html#renderpass-creation">8.1. Render Pass Creation</a></li>
<li><a href="chap8.html#renderpass-compatibility">8.2. Render Pass Compatibility</a></li>
<li><a href="chap8.html#_framebuffers">8.3. Framebuffers</a></li>
<li><a href="chap8.html#renderpass-commands">8.4. Render Pass Commands</a></li>
<li><a href="chap8.html#renderpass-creation-feedback">8.5. Render Pass Creation Feedback</a></li>
</ul>
</li>
<li><a href="chap9.html">9. Shaders</a>
<ul class="sectlevel2">
<li><a href="chap9.html#shaders-objects">9.1. Shader Objects</a></li>
<li><a href="chap9.html#shader-modules">9.2. Shader Modules</a></li>
<li><a href="chap9.html#shaders-identifiers">9.3. Shader Module Identifiers</a></li>
<li><a href="chap9.html#shaders-execution">9.4. Shader Execution</a></li>
<li><a href="chap9.html#shaders-execution-memory-ordering">9.5. Shader Memory Access Ordering</a></li>
<li><a href="chap9.html#shaders-inputs">9.6. Shader Inputs and Outputs</a></li>
<li><a href="chap9.html#shaders-task">9.7. Task Shaders</a></li>
<li><a href="chap9.html#shaders-mesh">9.8. Mesh Shaders</a></li>
<li><a href="chap9.html#shaders-cluster-culling">9.9. Cluster Culling Shaders</a></li>
<li><a href="chap9.html#shaders-vertex">9.10. Vertex Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-control">9.11. Tessellation Control Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-evaluation">9.12. Tessellation Evaluation Shaders</a></li>
<li><a href="chap9.html#shaders-geometry">9.13. Geometry Shaders</a></li>
<li><a href="chap9.html#shaders-fragment">9.14. Fragment Shaders</a></li>
<li><a href="chap9.html#shaders-compute">9.15. Compute Shaders</a></li>
<li><a href="chap9.html#shaders-ray-generation">9.16. Ray Generation Shaders</a></li>
<li><a href="chap9.html#shaders-intersection">9.17. Intersection Shaders</a></li>
<li><a href="chap9.html#shaders-any-hit">9.18. Any-Hit Shaders</a></li>
<li><a href="chap9.html#shaders-closest-hit">9.19. Closest Hit Shaders</a></li>
<li><a href="chap9.html#shaders-miss">9.20. Miss Shaders</a></li>
<li><a href="chap9.html#shaders-callable">9.21. Callable Shaders</a></li>
<li><a href="chap9.html#shaders-interpolation-decorations">9.22. Interpolation decorations</a></li>
<li><a href="chap9.html#shaders-staticuse">9.23. Static Use</a></li>
<li><a href="chap9.html#shaders-scope">9.24. Scope</a></li>
<li><a href="chap9.html#shaders-group-operations">9.25. Group Operations</a></li>
<li><a href="chap9.html#shaders-quad-operations">9.26. Quad Group Operations</a></li>
<li><a href="chap9.html#shaders-derivative-operations">9.27. Derivative Operations</a></li>
<li><a href="chap9.html#shaders-helper-invocations">9.28. Helper Invocations</a></li>
<li><a href="chap9.html#_cooperative_matrices">9.29. Cooperative Matrices</a></li>
<li><a href="chap9.html#shaders-validation-cache">9.30. Validation Cache</a></li>
</ul>
</li>
<li><a href="chap10.html">10. Pipelines</a>
<ul class="sectlevel2">
<li><a href="chap10.html#pipelines-compute">10.1. Compute Pipelines</a></li>
<li><a href="chap10.html#pipelines-graphics">10.2. Graphics Pipelines</a></li>
<li><a href="chap10.html#pipelines-ray-tracing">10.3. Ray Tracing Pipelines</a></li>
<li><a href="chap10.html#pipelines-destruction">10.4. Pipeline Destruction</a></li>
<li><a href="chap10.html#pipelines-multiple">10.5. Multiple Pipeline Creation</a></li>
<li><a href="chap10.html#pipelines-pipeline-derivatives">10.6. Pipeline Derivatives</a></li>
<li><a href="chap10.html#pipelines-cache">10.7. Pipeline Cache</a></li>
<li><a href="chap10.html#pipelines-specialization-constants">10.8. Specialization Constants</a></li>
<li><a href="chap10.html#pipelines-library">10.9. Pipeline Libraries</a></li>
<li><a href="chap10.html#pipelines-binding">10.10. Pipeline Binding</a></li>
<li><a href="chap10.html#pipelines-dynamic-state">10.11. Dynamic State</a></li>
<li><a href="chap10.html#pipelines-shader-information">10.12. Pipeline Properties and Shader Information</a></li>
<li><a href="chap10.html#pipelines-compiler-control">10.13. Pipeline Compiler Control</a></li>
<li><a href="chap10.html#pipelines-creation-feedback">10.14. Pipeline Creation Feedback</a></li>
</ul>
</li>
<li><a href="chap11.html">11. Memory Allocation</a>
<ul class="sectlevel2">
<li><a href="chap11.html#memory-host">11.1. Host Memory</a></li>
<li><a href="chap11.html#memory-device">11.2. Device Memory</a></li>
</ul>
</li>
<li><a href="chap12.html">12. Resource Creation</a>
<ul class="sectlevel2">
<li><a href="chap12.html#resources-buffers">12.1. Buffers</a></li>
<li><a href="chap12.html#resources-buffer-views">12.2. Buffer Views</a></li>
<li><a href="chap12.html#resources-images">12.3. Images</a></li>
<li><a href="chap12.html#resources-image-layouts">12.4. Image Layouts</a></li>
<li><a href="chap12.html#resources-image-views">12.5. Image Views</a></li>
<li><a href="chap12.html#resources-acceleration-structures">12.6. Acceleration Structures</a></li>
<li><a href="chap12.html#resources-micromaps">12.7. Micromaps</a></li>
<li><a href="chap12.html#resources-association">12.8. Resource Memory Association</a></li>
<li><a href="chap12.html#resources-sharing">12.9. Resource Sharing Mode</a></li>
<li><a href="chap12.html#resources-memory-aliasing">12.10. Memory Aliasing</a></li>
<li><a href="chap12.html#resources-buffer-collection-fuchsia">12.11. Buffer Collections</a></li>
</ul>
</li>
<li><a href="chap13.html">13. Samplers</a>
<ul class="sectlevel2">
<li><a href="chap13.html#samplers-YCbCr-conversion">13.1. Sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></li>
</ul>
</li>
<li><a href="chap14.html">14. Resource Descriptors</a>
<ul class="sectlevel2">
<li><a href="chap14.html#descriptorsets-types">14.1. Descriptor Types</a></li>
<li><a href="chap14.html#descriptorsets-sets">14.2. Descriptor Sets</a></li>
<li><a href="chap14.html#descriptorsets-physical-storage-buffer">14.3. Physical Storage Buffer Access</a></li>
<li><a href="chap14.html#descriptorbuffers">14.4. Descriptor Buffers</a></li>
</ul>
</li>
<li><a href="chap15.html">15. Shader Interfaces</a>
<ul class="sectlevel2">
<li><a href="chap15.html#interfaces-iointerfaces">15.1. Shader Input and Output Interfaces</a></li>
<li><a href="chap15.html#interfaces-vertexinput">15.2. Vertex Input Interface</a></li>
<li><a href="chap15.html#interfaces-fragmentoutput">15.3. Fragment Output Interface</a></li>
<li><a href="chap15.html#interfaces-legacy-dithering">15.4. Legacy Dithering</a></li>
<li><a href="chap15.html#interfaces-fragmenttileimage">15.5. Fragment Tile Image Interface</a></li>
<li><a href="chap15.html#interfaces-inputattachment">15.6. Fragment Input Attachment Interface</a></li>
<li><a href="chap15.html#interfaces-raypipeline">15.7. Ray Tracing Pipeline Interface</a></li>
<li><a href="chap15.html#interfaces-resources">15.8. Shader Resource Interface</a></li>
<li><a href="chap15.html#interfaces-builtin-variables">15.9. Built-In Variables</a></li>
</ul>
</li>
<li><a href="chap16.html">16. Image Operations</a>
<ul class="sectlevel2">
<li><a href="chap16.html#_image_operations_overview">16.1. Image Operations Overview</a></li>
<li><a href="chap16.html#_conversion_formulas">16.2. Conversion Formulas</a></li>
<li><a href="chap16.html#_texel_input_operations">16.3. Texel Input Operations</a></li>
<li><a href="chap16.html#_texel_output_operations">16.4. Texel Output Operations</a></li>
<li><a href="chap16.html#textures-normalized-operations">16.5. Normalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#_unnormalized_texel_coordinate_operations">16.6. Unnormalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-integer-coordinate-operations">16.7. Integer Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-sample-operations">16.8. Image Sample Operations</a></li>
<li><a href="chap16.html#textures-footprint">16.9. Texel Footprint Evaluation</a></li>
<li><a href="chap16.html#textures-weightimage">16.10. Weight Image Sampling</a></li>
<li><a href="chap16.html#textures-blockmatch">16.11. Block Matching</a></li>
<li><a href="chap16.html#textures-boxfilter">16.12. Box Filter Sampling</a></li>
<li><a href="chap16.html#textures-instructions">16.13. Image Operation Steps</a></li>
<li><a href="chap16.html#textures-queries">16.14. Image Query Instructions</a></li>
</ul>
</li>
<li><a href="chap17.html">17. Fragment Density Map Operations</a>
<ul class="sectlevel2">
<li><a href="chap17.html#_fragment_density_map_operations_overview">17.1. Fragment Density Map Operations Overview</a></li>
<li><a href="chap17.html#fragmentdensitymap-fetch-density-value">17.2. Fetch Density Value</a></li>
<li><a href="chap17.html#fragmentdensitymap-conversion-to-fragment-area">17.3. Fragment Area Conversion</a></li>
</ul>
</li>
<li><a href="chap18.html">18. Queries</a>
<ul class="sectlevel2">
<li><a href="chap18.html#queries-pools">18.1. Query Pools</a></li>
<li><a href="chap18.html#queries-operation">18.2. Query Operation</a></li>
<li><a href="chap18.html#queries-occlusion">18.3. Occlusion Queries</a></li>
<li><a href="chap18.html#queries-pipestats">18.4. Pipeline Statistics Queries</a></li>
<li><a href="chap18.html#queries-timestamps">18.5. Timestamp Queries</a></li>
<li><a href="chap18.html#queries-performance">18.6. Performance Queries</a></li>
<li><a href="chap18.html#queries-transform-feedback">18.7. Transform Feedback Queries</a></li>
<li><a href="chap18.html#queries-primitives-generated">18.8. Primitives Generated Queries</a></li>
<li><a href="chap18.html#queries-mesh-shader">18.9. Mesh Shader Queries</a></li>
<li><a href="chap18.html#queries-performance-intel">18.10. Intel performance queries</a></li>
<li><a href="chap18.html#queries-result-status-only">18.11. Result Status Queries</a></li>
<li><a href="chap18.html#queries-video-encode-feedback">18.12. Video Encode Feedback Queries</a></li>
</ul>
</li>
<li><a href="chap19.html">19. Clear Commands</a>
<ul class="sectlevel2">
<li><a href="chap19.html#clears-outside">19.1. Clearing Images Outside A Render Pass Instance</a></li>
<li><a href="chap19.html#clears-inside">19.2. Clearing Images Inside A Render Pass Instance</a></li>
<li><a href="chap19.html#clears-values">19.3. Clear Values</a></li>
<li><a href="chap19.html#clears-filling-buffers">19.4. Filling Buffers</a></li>
<li><a href="chap19.html#clears-updating-buffers">19.5. Updating Buffers</a></li>
</ul>
</li>
<li><a href="chap20.html">20. Copy Commands</a>
<ul class="sectlevel2">
<li><a href="chap20.html#copies-buffers">20.1. Copying Data Between Buffers</a></li>
<li><a href="chap20.html#copies-images">20.2. Copying Data Between Images</a></li>
<li><a href="chap20.html#copies-buffers-images">20.3. Copying Data Between Buffers and Images</a></li>
<li><a href="chap20.html#indirect-copies">20.4. Indirect Copies</a></li>
<li><a href="chap20.html#copies-imagescaling">20.5. Image Copies with Scaling</a></li>
<li><a href="chap20.html#copies-resolve">20.6. Resolving Multisample Images</a></li>
<li><a href="chap20.html#copies-buffer-markers">20.7. Buffer Markers</a></li>
</ul>
</li>
<li><a href="chap21.html">21. Drawing Commands</a>
<ul class="sectlevel2">
<li><a href="chap21.html#drawing-primitive-topologies">21.1. Primitive Topologies</a></li>
<li><a href="chap21.html#drawing-primitive-order">21.2. Primitive Order</a></li>
<li><a href="chap21.html#drawing-primitive-shading">21.3. Programmable Primitive Shading</a></li>
<li><a href="chap21.html#drawing-conditional-rendering">21.4. Conditional Rendering</a></li>
<li><a href="chap21.html#drawing-mesh-shading">21.5. Programmable Mesh Shading</a></li>
<li><a href="chap21.html#drawing-cluster-culling-shading">21.6. Programmable Cluster Culling Shading</a></li>
</ul>
</li>
<li><a href="chap22.html">22. Fixed-Function Vertex Processing</a>
<ul class="sectlevel2">
<li><a href="chap22.html#fxvertex-attrib">22.1. Vertex Attributes</a></li>
<li><a href="chap22.html#fxvertex-input">22.2. Vertex Input Description</a></li>
<li><a href="chap22.html#fxvertex-attribute_divisor">22.3. Vertex Attribute Divisor in Instanced Rendering</a></li>
<li><a href="chap22.html#fxvertex-input-address-calculation">22.4. Vertex Input Address Calculation</a></li>
</ul>
</li>
<li><a href="chap23.html">23. Tessellation</a>
<ul class="sectlevel2">
<li><a href="chap23.html#_tessellator">23.1. Tessellator</a></li>
<li><a href="chap23.html#_tessellator_patch_discard">23.2. Tessellator Patch Discard</a></li>
<li><a href="chap23.html#tessellation-tessellator-spacing">23.3. Tessellator Spacing</a></li>
<li><a href="chap23.html#tessellation-primitive-order">23.4. Tessellation Primitive Ordering</a></li>
<li><a href="chap23.html#tessellation-vertex-winding-order">23.5. Tessellator Vertex Winding Order</a></li>
<li><a href="chap23.html#tessellation-triangle-tessellation">23.6. Triangle Tessellation</a></li>
<li><a href="chap23.html#tessellation-quad-tessellation">23.7. Quad Tessellation</a></li>
<li><a href="chap23.html#tessellation-isoline-tessellation">23.8. Isoline Tessellation</a></li>
<li><a href="chap23.html#tessellation-point-mode">23.9. Tessellation Point Mode</a></li>
<li><a href="chap23.html#_tessellation_pipeline_state">23.10. Tessellation Pipeline State</a></li>
</ul>
</li>
<li><a href="chap24.html">24. Geometry Shading</a>
<ul class="sectlevel2">
<li><a href="chap24.html#geometry-input">24.1. Geometry Shader Input Primitives</a></li>
<li><a href="chap24.html#geometry-output">24.2. Geometry Shader Output Primitives</a></li>
<li><a href="chap24.html#geometry-invocations">24.3. Multiple Invocations of Geometry Shaders</a></li>
<li><a href="chap24.html#geometry-ordering">24.4. Geometry Shader Primitive Ordering</a></li>
<li><a href="chap24.html#geometry-passthrough">24.5. Geometry Shader Passthrough</a></li>
</ul>
</li>
<li><a href="chap25.html">25. Mesh Shading</a>
<ul class="sectlevel2">
<li><a href="chap25.html#mesh-task-input">25.1. Task Shader Input</a></li>
<li><a href="chap25.html#mesh-task-output">25.2. Task Shader Output</a></li>
<li><a href="chap25.html#mesh-generation">25.3. Mesh Generation</a></li>
<li><a href="chap25.html#mesh-input">25.4. Mesh Shader Input</a></li>
<li><a href="chap25.html#mesh-output">25.5. Mesh Shader Output</a></li>
<li><a href="chap25.html#mesh-output-perview">25.6. Mesh Shader Per-View Outputs</a></li>
<li><a href="chap25.html#mesh-ordering">25.7. Mesh Shader Primitive Ordering</a></li>
</ul>
</li>
<li><a href="chap26.html">26. Cluster Culling Shading</a>
<ul class="sectlevel2">
<li><a href="chap26.html#cluster-culling-input">26.1. Cluster Culling Shader Input</a></li>
<li><a href="chap26.html#cluster-culling-output">26.2. Cluster Culling Shader Output</a></li>
<li><a href="chap26.html#cluster-culling-cluster-ordering">26.3. Cluster Culling Shader Cluster Ordering</a></li>
<li><a href="chap26.html#cluster-culling-primitive-ordering">26.4. Cluster Culling Shader Primitive Ordering</a></li>
</ul>
</li>
<li><a href="chap27.html">27. Fixed-Function Vertex Post-Processing</a>
<ul class="sectlevel2">
<li><a href="chap27.html#vertexpostproc-transform-feedback">27.1. Transform Feedback</a></li>
<li><a href="chap27.html#vertexpostproc-viewport-swizzle">27.2. Viewport Swizzle</a></li>
<li><a href="chap27.html#vertexpostproc-flatshading">27.3. Flat Shading</a></li>
<li><a href="chap27.html#vertexpostproc-clipping">27.4. Primitive Clipping</a></li>
<li><a href="chap27.html#vertexpostproc-clipping-shader-outputs">27.5. Clipping Shader Outputs</a></li>
<li><a href="chap27.html#vertexpostproc-viewportwscaling">27.6. Controlling Viewport W Scaling</a></li>
<li><a href="chap27.html#vertexpostproc-coord-transform">27.7. Coordinate Transformations</a></li>
<li><a href="chap27.html#vertexpostproc-renderpass-transform">27.8. Render Pass Transform</a></li>
<li><a href="chap27.html#vertexpostproc-viewport">27.9. Controlling the Viewport</a></li>
</ul>
</li>
<li><a href="chap28.html">28. Rasterization</a>
<ul class="sectlevel2">
<li><a href="chap28.html#primsrast-discard">28.1. Discarding Primitives Before Rasterization</a></li>
<li><a href="chap28.html#primsrast-stream">28.2. Controlling the Vertex Stream Used for Rasterization</a></li>
<li><a href="chap28.html#primsrast-order">28.3. Rasterization Order</a></li>
<li><a href="chap28.html#primsrast-multisampling">28.4. Multisampling</a></li>
<li><a href="chap28.html#primsrast-samplelocations">28.5. Custom Sample Locations</a></li>
<li><a href="chap28.html#primsrast-fragment-shading-rate">28.6. Fragment Shading Rates</a></li>
<li><a href="chap28.html#primsrast-shading-rate-image">28.7. Shading Rate Image</a></li>
<li><a href="chap28.html#primsrast-sampleshading">28.8. Sample Shading</a></li>
<li><a href="chap28.html#primsrast-barycentric">28.9. Barycentric Interpolation</a></li>
<li><a href="chap28.html#primsrast-points">28.10. Points</a></li>
<li><a href="chap28.html#primsrast-lines">28.11. Line Segments</a></li>
<li><a href="chap28.html#primsrast-polygons">28.12. Polygons</a></li>
</ul>
</li>
<li><a href="chap29.html">29. Fragment Operations</a>
<ul class="sectlevel2">
<li><a href="chap29.html#fragops-discard-rectangles">29.1. Discard Rectangles Test</a></li>
<li><a href="chap29.html#fragops-scissor">29.2. Scissor Test</a></li>
<li><a href="chap29.html#fragops-exclusive-scissor">29.3. Exclusive Scissor Test</a></li>
<li><a href="chap29.html#fragops-samplemask">29.4. Sample Mask Test</a></li>
<li><a href="chap29.html#fragops-shader">29.5. Fragment Shading</a></li>
<li><a href="chap29.html#fragops-covg">29.6. Multisample Coverage</a></li>
<li><a href="chap29.html#fragops-ds-state">29.7. Depth and Stencil Operations</a></li>
<li><a href="chap29.html#fragops-dbt">29.8. Depth Bounds Test</a></li>
<li><a href="chap29.html#fragops-stencil">29.9. Stencil Test</a></li>
<li><a href="chap29.html#fragops-depth">29.10. Depth Test</a></li>
<li><a href="chap29.html#fragops-rep-frag-test">29.11. Representative Fragment Test</a></li>
<li><a href="chap29.html#fragops-samplecount">29.12. Sample Counting</a></li>
<li><a href="chap29.html#fragops-coverage-to-color">29.13. Fragment Coverage To Color</a></li>
<li><a href="chap29.html#fragops-coverage-reduction">29.14. Coverage Reduction</a></li>
</ul>
</li>
<li><a href="chap30.html">30. The Framebuffer</a>
<ul class="sectlevel2">
<li><a href="chap30.html#framebuffer-blending">30.1. Blending</a></li>
<li><a href="chap30.html#framebuffer-logicop">30.2. Logical Operations</a></li>
<li><a href="chap30.html#framebuffer-color-write-mask">30.3. Color Write Mask</a></li>
<li><a href="chap30.html#framebuffer-color-write-enable">30.4. Color Write Enable</a></li>
<li><a href="chap30.html#framebuffer-queries">30.5. Framebuffer Query Instructions</a></li>
</ul>
</li>
<li><a href="chap31.html">31. Dispatching Commands</a></li>
<li><a href="chap32.html">32. Device-Generated Commands</a>
<ul class="sectlevel2">
<li><a href="chap32.html#indirectmdslayout">32.1. Indirect Commands Layout</a></li>
<li><a href="chap32.html#_indirect_commands_generation_and_execution">32.2. Indirect Commands Generation And Execution</a></li>
</ul>
</li>
<li><a href="chap33.html">33. Sparse Resources</a>
<ul class="sectlevel2">
<li><a href="chap33.html#sparsememory-sparseresourcefeatures">33.1. Sparse Resource Features</a></li>
<li><a href="chap33.html#sparsememory-fully-resident">33.2. Sparse Buffers and Fully-Resident Images</a></li>
<li><a href="chap33.html#sparsememory-partially-resident-buffers">33.3. Sparse Partially-Resident Buffers</a></li>
<li><a href="chap33.html#sparsememory-partially-resident-images">33.4. Sparse Partially-Resident Images</a></li>
<li><a href="chap33.html#sparsememory-sparse-memory-aliasing">33.5. Sparse Memory Aliasing</a></li>
<li><a href="chap33.html#_sparse_resource_implementation_guidelines_informative">33.6. Sparse Resource Implementation Guidelines (Informative)</a></li>
<li><a href="chap33.html#sparsememory-resourceapi">33.7. Sparse Resource API</a></li>
</ul>
</li>
<li><a href="chap34.html">34. Window System Integration (WSI)</a>
<ul class="sectlevel2">
<li><a href="chap34.html#_wsi_platform">34.1. WSI Platform</a></li>
<li><a href="chap34.html#_wsi_surface">34.2. WSI Surface</a></li>
<li><a href="chap34.html#display">34.3. Presenting Directly to Display Devices</a></li>
<li><a href="chap34.html#_querying_for_wsi_support">34.4. Querying for WSI Support</a></li>
<li><a href="chap34.html#_surface_queries">34.5. Surface Queries</a></li>
<li><a href="chap34.html#_full_screen_exclusive_control">34.6. Full Screen Exclusive Control</a></li>
<li><a href="chap34.html#_device_group_queries">34.7. Device Group Queries</a></li>
<li><a href="chap34.html#_display_timing_queries">34.8. Display Timing Queries</a></li>
<li><a href="chap34.html#present-wait">34.9. Present Wait</a></li>
<li><a href="chap34.html#_wsi_swapchain">34.10. WSI Swapchain</a></li>
<li><a href="chap34.html#_hdr_metadata">34.11. Hdr Metadata</a></li>
<li><a href="chap34.html#present-barrier">34.12. Present Barrier</a></li>
</ul>
</li>
<li><a href="chap35.html">35. Deferred Host Operations</a>
<ul class="sectlevel2">
<li><a href="chap35.html#deferred-host-operations-requesting">35.1. Requesting Deferral</a></li>
<li><a href="chap35.html#_deferred_host_operations_api">35.2. Deferred Host Operations API</a></li>
</ul>
</li>
<li><a href="chap36.html">36. Private Data</a></li>
<li><a href="chap37.html">37. Acceleration Structures</a>
<ul class="sectlevel2">
<li><a href="chap37.html#acceleration-structure-def">37.1. Acceleration Structures</a></li>
<li><a href="chap37.html#host-acceleration-structure">37.2. Host Acceleration Structure Operations</a></li>
</ul>
</li>
<li><a href="chap38.html">38. Micromap</a>
<ul class="sectlevel2">
<li><a href="chap38.html#micromap-def">38.1. Micromaps</a></li>
<li><a href="chap38.html#host-micromap">38.2. Host Micromap Operations</a></li>
</ul>
</li>
<li><a href="chap39.html">39. Ray Traversal</a>
<ul class="sectlevel2">
<li><a href="chap39.html#ray-intersection-candidate-determination">39.1. Ray Intersection Candidate Determination</a></li>
<li><a href="chap39.html#ray-intersection-culling">39.2. Ray Intersection Culling</a></li>
<li><a href="chap39.html#ray-intersection-confirmation">39.3. Ray Intersection Confirmation</a></li>
<li><a href="chap39.html#ray-closest-hit-determination">39.4. Ray Closest Hit Determination</a></li>
<li><a href="chap39.html#ray-result-determination">39.5. Ray Result Determination</a></li>
</ul>
</li>
<li><a href="chap40.html">40. Ray Tracing</a>
<ul class="sectlevel2">
<li><a href="chap40.html#ray-tracing-shader-call">40.1. Shader Call Instructions</a></li>
<li><a href="chap40.html#ray-tracing-commands">40.2. Ray Tracing Commands</a></li>
<li><a href="chap40.html#shader-binding-table">40.3. Shader Binding Table</a></li>
<li><a href="chap40.html#ray-tracing-pipeline-stack">40.4. Ray Tracing Pipeline Stack</a></li>
<li><a href="chap40.html#ray-tracing-capture-replay">40.5. Ray Tracing Capture Replay</a></li>
</ul>
</li>
<li><a href="chap41.html">41. Memory Decompression</a></li>
<li class="current"><a href="chap42.html">42. Video Coding</a>
<ul class="sectlevel2">
<li class="current"><a href="chap42.html#video-picture-resources">42.1. Video Picture Resources</a></li>
<li class="current"><a href="chap42.html#dpb">42.2. Decoded Picture Buffer</a></li>
<li class="current"><a href="chap42.html#video-profiles">42.3. Video Profiles</a></li>
<li class="current"><a href="chap42.html#video-capabilities">42.4. Video Capabilities</a></li>
<li class="current"><a href="chap42.html#video-session">42.5. Video Sessions</a></li>
<li class="current"><a href="chap42.html#video-profile-compatibility">42.6. Video Profile Compatibility</a></li>
<li class="current"><a href="chap42.html#video-session-parameters">42.7. Video Session Parameters</a></li>
<li class="current"><a href="chap42.html#video-coding-scope">42.8. Video Coding Scope</a></li>
<li class="current"><a href="chap42.html#video-coding-control">42.9. Video Coding Control</a></li>
<li class="current"><a href="chap42.html#video-decode-operations">42.10. Video Decode Operations</a></li>
<li class="current"><a href="chap42.html#decode-h264">42.11. H.264 Decode Operations</a></li>
<li class="current"><a href="chap42.html#decode-h265">42.12. H.265 Decode Operations</a></li>
<li class="current"><a href="chap42.html#video-encode-operations">42.13. Video Encode Operations</a></li>
<li class="current"><a href="chap42.html#encode-h264">42.14. Encode H.264</a></li>
<li class="current"><a href="chap42.html#encode-h265">42.15. Encode H.265</a></li>
</ul>
</li>
<li><a href="chap43.html">43. Optical Flow</a>
<ul class="sectlevel2">
<li><a href="chap43.html#_optical_flow_queues">43.1. Optical Flow Queues</a></li>
<li><a href="chap43.html#opticalflow-formats">43.2. Optical Flow Image Formats</a></li>
<li><a href="chap43.html#opticalflow-session">43.3. Optical Flow Session</a></li>
</ul>
</li>
<li><a href="chap44.html">44. Extending Vulkan</a>
<ul class="sectlevel2">
<li><a href="chap44.html#extendingvulkan-instanceanddevicefunctionality">44.1. Instance and Device Functionality</a></li>
<li><a href="chap44.html#extendingvulkan-coreversions">44.2. Core Versions</a></li>
<li><a href="chap44.html#extendingvulkan-layers">44.3. Layers</a></li>
<li><a href="chap44.html#extendingvulkan-extensions">44.4. Extensions</a></li>
<li><a href="chap44.html#extendingvulkan-extensions-extensiondependencies">44.5. Extension Dependencies</a></li>
<li><a href="chap44.html#_compatibility_guarantees_informative">44.6. Compatibility Guarantees (Informative)</a></li>
</ul>
</li>
<li><a href="chap45.html">45. Features</a>
<ul class="sectlevel2">
<li><a href="chap45.html#features-requirements">45.1. Feature Requirements</a></li>
<li><a href="chap45.html#profile-features">45.2. Profile Features</a></li>
</ul>
</li>
<li><a href="chap46.html">46. Limits</a>
<ul class="sectlevel2">
<li><a href="chap46.html#limits-minmax">46.1. Limit Requirements</a></li>
<li><a href="chap46.html#limits-multisample">46.2. Additional Multisampling Capabilities</a></li>
<li><a href="chap46.html#profile-limits">46.3. Profile Limits</a></li>
</ul>
</li>
<li><a href="chap47.html">47. Formats</a>
<ul class="sectlevel2">
<li><a href="chap47.html#formats-definition">47.1. Format Definition</a></li>
<li><a href="chap47.html#formats-properties">47.2. Format Properties</a></li>
<li><a href="chap47.html#features-required-format-support">47.3. Required Format Support</a></li>
</ul>
</li>
<li><a href="chap48.html">48. Additional Capabilities</a>
<ul class="sectlevel2">
<li><a href="chap48.html#capabilities-image">48.1. Additional Image Capabilities</a></li>
<li><a href="chap48.html#capabilities-buffer">48.2. Additional Buffer Capabilities</a></li>
<li><a href="chap48.html#capabilities-semaphore">48.3. Optional Semaphore Capabilities</a></li>
<li><a href="chap48.html#capabilities-fence">48.4. Optional Fence Capabilities</a></li>
<li><a href="chap48.html#features-timestamp-calibration">48.5. Timestamp Calibration Capabilities</a></li>
</ul>
</li>
<li><a href="chap49.html">49. Debugging</a>
<ul class="sectlevel2">
<li><a href="chap49.html#debugging-debug-utils">49.1. Debug Utilities</a></li>
<li><a href="chap49.html#debugging-debug-markers">49.2. Debug Markers</a></li>
<li><a href="chap49.html#debugging-debug-report-callbacks">49.3. Debug Report Callbacks</a></li>
<li><a href="chap49.html#_device_loss_debugging">49.4. Device Loss Debugging</a></li>
<li><a href="chap49.html#debugging-tooling-info">49.5. Active Tooling Information</a></li>
</ul>
</li>
<li><a href="chap50.html">Appendix A: Vulkan Environment for SPIR-V</a>
<ul class="sectlevel2">
<li><a href="chap50.html#_versions_and_formats">Versions and Formats</a></li>
<li><a href="chap50.html#spirvenv-capabilities">Capabilities</a></li>
<li><a href="chap50.html#spirvenv-module-validation">Validation Rules within a Module</a></li>
<li><a href="chap50.html#spirvenv-precision-operation">Precision and Operation of SPIR-V Instructions</a></li>
<li><a href="chap50.html#spirvenv-image-signedness">Signedness of SPIR-V Image Accesses</a></li>
<li><a href="chap50.html#spirvenv-format-type-matching">Image Format and Type Matching</a></li>
<li><a href="chap50.html#spirvenv-image-formats">Compatibility Between SPIR-V Image Formats And Vulkan Formats</a></li>
</ul>
</li>
<li><a href="chap51.html">Appendix B: Memory Model</a>
<ul class="sectlevel2">
<li><a href="chap51.html#memory-model-agent">Agent</a></li>
<li><a href="chap51.html#memory-model-memory-location">Memory Location</a></li>
<li><a href="chap51.html#memory-model-allocation">Allocation</a></li>
<li><a href="chap51.html#memory-model-memory-operation">Memory Operation</a></li>
<li><a href="chap51.html#memory-model-references">Reference</a></li>
<li><a href="chap51.html#memory-model-program-order">Program-Order</a></li>
<li><a href="chap51.html#shader-call-related">Shader Call Related</a></li>
<li><a href="chap51.html#shader-call-order">Shader Call Order</a></li>
<li><a href="chap51.html#memory-model-scope">Scope</a></li>
<li><a href="chap51.html#memory-model-atomic-operation">Atomic Operation</a></li>
<li><a href="chap51.html#memory-model-scoped-modification-order">Scoped Modification Order</a></li>
<li><a href="chap51.html#memory-model-memory-semantics">Memory Semantics</a></li>
<li><a href="chap51.html#memory-model-release-sequence">Release Sequence</a></li>
<li><a href="chap51.html#memory-model-synchronizes-with">Synchronizes-With</a></li>
<li><a href="chap51.html#memory-model-system-synchronizes-with">System-Synchronizes-With</a></li>
<li><a href="chap51.html#memory-model-non-private">Private vs. Non-Private</a></li>
<li><a href="chap51.html#memory-model-inter-thread-happens-before">Inter-Thread-Happens-Before</a></li>
<li><a href="chap51.html#memory-model-happens-before">Happens-Before</a></li>
<li><a href="chap51.html#memory-model-availability-visibility">Availability and Visibility</a></li>
<li><a href="chap51.html#memory-model-vulkan-availability-visibility">Availability, Visibility, and Domain Operations</a></li>
<li><a href="chap51.html#memory-model-availability-visibility-semantics">Availability and Visibility Semantics</a></li>
<li><a href="chap51.html#memory-model-instruction-av-vis">Per-Instruction Availability and Visibility Semantics</a></li>
<li><a href="chap51.html#memory-model-location-ordered">Location-Ordered</a></li>
<li><a href="chap51.html#memory-model-access-data-race">Data Race</a></li>
<li><a href="chap51.html#memory-model-visible-to">Visible-To</a></li>
<li><a href="chap51.html#memory-model-acyclicity">Acyclicity</a></li>
<li><a href="chap51.html#memory-model-shader-io">Shader I/O</a></li>
<li><a href="chap51.html#memory-model-deallocation">Deallocation</a></li>
<li><a href="chap51.html#memory-model-informative-descriptions">Descriptions (Informative)</a></li>
<li><a href="chap51.html#memory-model-tessellation-output-ordering">Tessellation Output Ordering</a></li>
<li><a href="chap51.html#memory-model-cooperative-matrix">Cooperative Matrix Memory Access</a></li>
</ul>
</li>
<li><a href="chap52.html">Appendix C: Compressed Image Formats</a>
<ul class="sectlevel2">
<li><a href="chap52.html#appendix-compressedtex-bc">Block-Compressed Image Formats</a></li>
<li><a href="chap52.html#appendix-compressedtex-etc2">ETC Compressed Image Formats</a></li>
<li><a href="chap52.html#appendix-compressedtex-astc">ASTC Compressed Image Formats</a></li>
<li><a href="chap52.html#appendix-compressedtex-pvrtc">PVRTC Compressed Image Formats</a></li>
</ul>
</li>
<li><a href="chap53.html">Appendix D: Core Revisions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap53.html#versions-1.3">Version 1.3</a></li>
<li><a href="chap53.html#versions-1.2">Version 1.2</a></li>
<li><a href="chap53.html#versions-1.1">Version 1.1</a></li>
<li><a href="chap53.html#versions-1.0">Version 1.0</a></li>
</ul>
</li>
<li><a href="chap54.html">Appendix E: Layers &amp; Extensions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap54.html#_extension_dependencies">Extension Dependencies</a></li>
<li><a href="chap54.html#extension-appendices-list">List of Current Extensions</a></li>
<li><a href="chap54.html#provisional-extension-appendices-list">List of Provisional Extensions</a></li>
<li><a href="chap54.html#deprecated-extension-appendices-list">List of Deprecated Extensions</a></li>
</ul>
</li>
<li><a href="chap55.html">Appendix F: Vulkan Roadmap Milestones</a>
<ul class="sectlevel2">
<li><a href="chap55.html#roadmap-2022">Roadmap 2022</a></li>
</ul>
</li>
<li><a href="chap56.html">Appendix G: API Boilerplate</a>
<ul class="sectlevel2">
<li><a href="chap56.html#boilerplate-headers">Vulkan Header Files</a></li>
<li><a href="chap56.html#boilerplate-wsi-header">Window System-Specific Header Control (Informative)</a></li>
<li><a href="chap56.html#boilerplate-provisional-header">Provisional Extension Header Control (Informative)</a></li>
<li><a href="chap56.html#boilerplate-video-std-headers">Video Std Headers</a></li>
</ul>
</li>
<li><a href="chap57.html">Appendix H: Invariance</a>
<ul class="sectlevel2">
<li><a href="chap57.html#_repeatability">Repeatability</a></li>
<li><a href="chap57.html#_multi_pass_algorithms">Multi-pass Algorithms</a></li>
<li><a href="chap57.html#_invariance_rules">Invariance Rules</a></li>
<li><a href="chap57.html#_tessellation_invariance">Tessellation Invariance</a></li>
</ul>
</li>
<li><a href="chap58.html">Appendix I: Lexicon</a>
<ul class="sectlevel2">
<li><a href="chap58.html#glossary">Glossary</a></li>
<li><a href="chap58.html#lexicon-common-abbreviations">Common Abbreviations</a></li>
<li><a href="chap58.html#lexicon-video-abbreviations">Video-Specific Abbreviations</a></li>
<li><a href="chap58.html#lexicon-prefixes">Prefixes</a></li>
</ul>
</li>
<li><a href="chap59.html">Appendix J: Credits (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap59.html#_working_group_contributors_to_vulkan">Working Group Contributors to Vulkan</a></li>
<li><a href="chap59.html#_other_credits">Other Credits</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="loading_msg" class="hidden" hidden=""><p>Loading… please wait.</p></div>
<!--ChunkedSearchboxMarker-->
<div class="searchbox"><label for="searchbox">Search: </label><input id="searchbox" type="text" disabled="disabled" value="Loading Search Data"><div id="resultsdiv"><ol id="results"></ol></div></div>
<div id="content" class="loadable"><div class="sect1">
<h2 id="video-coding"><a class="anchor" href="chap42.html"></a>42. Video Coding</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vulkan implementations <strong class="purple">may</strong> expose one or more queue families supporting
video coding operations.
These operations are performed by recording them into a command buffer
within a <a href="chap42.html#video-coding-scope">video coding scope</a>, and submitting them to
queues with compatible video coding capabilities.</p>
</div>
<div class="paragraph">
<p>The Vulkan video functionalities are designed to be made available through a
set of APIs built on top of each other, consisting of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A core API providing common video coding functionalities,</p>
</li>
<li>
<p>APIs providing codec-independent video decode and video encode related
functionalities, respectively,</p>
</li>
<li>
<p>Additional codec-specific APIs built on top of those.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This chapter details the fundamental components and operations of these.</p>
</div>
<div class="sect2">
<h3 id="video-picture-resources"><a class="anchor" href="chap42.html#video-picture-resources"></a>42.1. Video Picture Resources</h3>
<div class="paragraph">
<p>In the context of video coding, multidimensional arrays of image data that
<strong class="purple">can</strong> be used as the source or target of video coding operations are referred
to as <em>video picture resources</em>.
They <strong class="purple">may</strong> store additional metadata that includes implementation-private
information used during the execution of video coding operations, as
discussed later.</p>
</div>
<div class="paragraph">
<p>Video picture resources are backed by <a href="chap12.html#VkImage">VkImage</a> objects.
Individual subregions of <a href="chap12.html#VkImageView">VkImageView</a> objects created from such
resources <strong class="purple">can</strong> be used as
<a href="chap42.html#decode-output-picture">decode output pictures</a>,
<a href="chap42.html#encode-input-picture">encode input pictures</a>,
<a href="chap42.html#reconstructed-picture">reconstructed pictures</a>, and/or
<a href="chap42.html#reference-picture">reference pictures</a>.</p>
</div>
<div class="paragraph">
<p>The parameters of a video picture resource are specified using a
<code>VkVideoPictureResourceInfoKHR</code> structure.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoPictureResourceInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoPictureResourceInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoPictureResourceInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkOffset2D</span>         <span class="n">codedOffset</span><span class="p">;</span>
    <span class="n">VkExtent2D</span>         <span class="n">codedExtent</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">baseArrayLayer</span><span class="p">;</span>
    <span class="n">VkImageView</span>        <span class="n">imageViewBinding</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoPictureResourceInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>codedOffset</code> is the offset in texels of the image subregion to use.</p>
</li>
<li>
<p><code>codedExtent</code> is the size in pixels of the coded image data.</p>
</li>
<li>
<p><code>baseArrayLayer</code> is the array layer of the image view specified in
<code>imageViewBinding</code> to use as the video picture resource.</p>
</li>
<li>
<p><code>imageViewBinding</code> is an image view representing the video picture
resource.</p>
</li>
</ul>
</div>
<div id="video-image-subresource-reference" class="paragraph">
<p>The image subresource referred to by such a structure is defined as the
image array layer index specified in <code>baseArrayLayer</code> relative to the
image subresource range the image view specified in <code>imageViewBinding</code>
was created with.</p>
</div>
<div class="paragraph">
<p>The meaning of the <code>codedOffset</code> and <code>codedExtent</code> depends on the
command and context the video picture resource is used in, as well as on the
used <a href="chap42.html#video-profiles">video profile</a> and corresponding codec-specific
semantics, as described later.</p>
</div>
<div id="video-picture-resource-uniqueness" class="paragraph">
<p>A video picture resource is uniquely defined by the image subresource
referred to by an instance of this structure, together with the
<code>codedOffset</code> and <code>codedExtent</code> members that identify the image
subregion within the image subresource referenced corresponding to the video
picture resource according to the particular codec-specific semantics.</p>
</div>
<div class="paragraph">
<p>Accesses to image data within a video picture resource happen at the
granularity indicated by
<a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>pictureAccessGranularity</code>, as returned by
<a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> for the used <a href="chap42.html#video-profiles">video profile</a>.
As a result, given an effective image subregion corresponding to a video
picture resource, the actual image subregion accessed <strong class="purple">may</strong> be larger than
that as it <strong class="purple">may</strong> include additional padding texels due to the picture access
granularity.
Any writes performed by video coding operations to such padding texels will
result in undefined texel values.</p>
</div>
<div id="video-picture-resource-matching" class="paragraph">
<p>Two video picture resources match if they refer to the same image
subresource and they specify identical <code>codedOffset</code> and
<code>codedExtent</code> values.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoPictureResourceInfoKHR-baseArrayLayer-07175" href="chap42.html#VUID-VkVideoPictureResourceInfoKHR-baseArrayLayer-07175"></a> <span class="vuid">VUID-VkVideoPictureResourceInfoKHR-baseArrayLayer-07175</span><br>

<code>baseArrayLayer</code> <strong class="purple">must</strong> be less than the
<a href="chap12.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>subresourceRange.layerCount</code> specified
when the image view <code>imageViewBinding</code> was created</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoPictureResourceInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoPictureResourceInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoPictureResourceInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_PICTURE_RESOURCE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoPictureResourceInfoKHR-pNext-pNext" href="chap42.html#VUID-VkVideoPictureResourceInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoPictureResourceInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoPictureResourceInfoKHR-imageViewBinding-parameter" href="chap42.html#VUID-VkVideoPictureResourceInfoKHR-imageViewBinding-parameter"></a> <span class="vuid">VUID-VkVideoPictureResourceInfoKHR-imageViewBinding-parameter</span><br>
 <code>imageViewBinding</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageView">VkImageView</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dpb"><a class="anchor" href="chap42.html#dpb"></a>42.2. Decoded Picture Buffer</h3>
<div id="reconstructed-picture" class="paragraph">
<p>An integral part of video coding pipelines is the reconstruction of pictures
from a compressed video bitstream.
A <em>reconstructed picture</em> is a <a href="chap42.html#video-picture-resources">video picture
resource</a> resulting from this process.</p>
</div>
<div id="reference-picture" class="paragraph">
<p>Such reconstructed pictures <strong class="purple">can</strong> be used as <em>reference pictures</em> in
subsequent video coding operations to provide predictions of the values of
samples of subsequently decoded or encoded pictures.
The correct use of such reconstructed pictures as reference pictures is
driven by the video compression standard, the implementation, and the
application-specific use cases.</p>
</div>
<div id="active-reference-pictures" class="paragraph">
<p>The list of reference pictures used to provide such predictions within a
single video coding operation is referred to as the list of <em>active
reference pictures</em>.</p>
</div>
<div class="paragraph">
<p>The <em>decoded picture buffer (DPB)</em> is an indexed data structure that
maintains the set of reference pictures available to be used in video coding
operations.
<a id="dpb-slot"></a> Individual indexed entries of the DPB are referred to as the
<em>decoded picture buffer (DPB) slots</em>.
<a id="dpb-capacity"></a> The range of valid DPB slot indices is between zero and
<code>N-1</code>, where <code>N</code> is the capacity of the DPB.
Each DPB slot <strong class="purple">can</strong> refer to a reference picture containing a <em>video frame</em>
or <strong class="purple">can</strong> refer to up to two reference pictures containing the top and/or
bottom <em>fields</em> that, when both present, together represent a full <em>video
frame</em>
.</p>
</div>
<div id="dpb-state-and-backing-store" class="paragraph">
<p>In Vulkan, the state and the backing store of the DPB is separated as
follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The state of individual DPB slots is maintained by <a href="chap42.html#video-session">video
session</a> objects.</p>
</li>
<li>
<p>The backing store of DPB slots is provided by subregions of
<a href="chap12.html#VkImage">VkImage</a> objects used as <a href="chap42.html#video-picture-resources">video picture
resources</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, the implementation <strong class="purple">may</strong> also maintain opaque metadata
associated with DPB slots, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="reference-metadata"></a> <em>Reference picture metadata</em> corresponding to the
video picture resource associated with the DPB slot.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Such metadata <strong class="purple">may</strong> be stored by the implementation as part of the DPB slot
state maintained by the video session, or as part of the video picture
resource backing the DPB slot.</p>
</div>
<div class="paragraph">
<p>Any metadata stored in the video picture resources backing DPB slots are
independent of the video session used to store it, hence such video picture
resources <strong class="purple">can</strong> be shared with other video sessions.
Correspondingly, any metadata that is dependent on the video session will
always be stored as part of the DPB slot state maintained by that video
session.</p>
</div>
<div class="paragraph">
<p>The responsibility of managing the DPB is split between the application and
the implementation as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The application maintains the association between <a href="chap42.html#dpb-slot">DPB slot</a>
indices and corresponding <a href="chap42.html#video-picture-resources">video picture
resources</a>.</p>
</li>
<li>
<p>The implementation maintains global and per-slot opaque
<a href="chap42.html#reference-metadata">reference picture metadata</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, the application is also responsible for managing the mapping
between the codec-specific picture IDs and DPB slots, and any other
codec-specific states unless otherwise specified.</p>
</div>
<div class="sect3">
<h4 id="dpb-slot-states"><a class="anchor" href="chap42.html#dpb-slot-states"></a>42.2.1. DPB Slot States</h4>
<div class="paragraph">
<p>At a given time, each DPB slot is either in <em>active</em> or <em>inactive</em> state.
Initially, all DPB slots managed by a <a href="chap42.html#video-session">video session</a> are in
<em>inactive</em> state.</p>
</div>
<div class="paragraph">
<p>A DPB slot <strong class="purple">can</strong> be <em>activated</em> by using it as the target of picture
reconstruction within a video coding operation, changing its state to
<em>active</em>.</p>
</div>
<div class="paragraph">
<p>As part of the picture reconstruction, the implementation <strong class="purple">may</strong> also generate
<a href="chap42.html#reference-metadata">reference picture metadata</a>.</p>
</div>
<div class="paragraph">
<p>If such a video coding operation completes successfully, the activated DPB
slot will have a <em>valid picture reference</em> and the <a href="chap42.html#reconstructed-picture">reconstructed picture</a> is associated with the DPB slot.
This is true even if the DPB slot is used as the target of a picture
reconstruction that only sets up a top field or bottom field reference
picture and thus does not yet refer to a complete frame.
However, if any data provided as input to such a video coding operation is
not compliant to the video compression standard used, that video coding
operation <strong class="purple">may</strong> complete unsuccessfully, in which case the activated DPB slot
will have an <em>invalid picture reference</em>.
This is true even if the DPB slot previously had a valid picture reference
to a top field or bottom field reference picture, but the reconstruction of
the other field corresponding to the DPB slot failed.</p>
</div>
<div class="paragraph">
<p>The application <strong class="purple">can</strong> use <a href="chap18.html">queries</a> to get feedback about the
outcome of video coding operations and use the resulting
<a href="chap18.html#VkQueryResultStatusKHR">VkQueryResultStatusKHR</a> value to determine whether the video coding
operation completed successfully (result status is positive) or
unsuccessfully (result status is negative).</p>
</div>
<div class="paragraph">
<p>Using a <a href="chap42.html#reference-picture">reference picture</a> associated with a DPB slot
that has an <em>invalid picture reference</em> as an <a href="chap42.html#active-reference-pictures">active reference picture</a> in subsequent video coding operations is legal,
however, the contents of the outputs of such operations are undefined, and
any DPB slots activated by such video coding operations will also have an
<em>invalid picture reference</em>.
This is true even if such video coding operations <strong class="purple">may</strong> otherwise complete
successfully.</p>
</div>
<div class="paragraph">
<p>A DPB slot <strong class="purple">can</strong> also be <em>deactivated</em> by the application, changing its state
to <em>inactive</em> and invalidating any picture references and
<a href="chap42.html#reference-metadata">reference picture metadata</a> associated with the DPB
slot.</p>
</div>
<div class="paragraph">
<p>A DPB slot <strong class="purple">can</strong> be activated with a new frame even if it is already active.
In this case all previous associations of the DPB slots with
<a href="chap42.html#reference-picture">reference pictures</a> are replaced with an association
with the <a href="chap42.html#reconstructed-picture">reconstructed picture</a> used to activate
it.
If an already active DPB slot is activated with a reconstructed field
picture, then the behavior is as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the DPB slot is currently associated with a frame, then that
association is replaced with an association with the reconstructed field
picture used to activate it.</p>
</li>
<li>
<p>If the DPB slot is not currently associated with a top field picture and
the DPB slot is activated with a top field picture, or if the DPB slot
is not currently associated with a bottom field picture and the DPB slot
is activated with a bottom field picture, then the DPB slot is
associated with the reconstructed field picture used to activate it,
without disturbing the other field picture association, if any.</p>
</li>
<li>
<p>If the DPB slot is currently associated with a top field picture and the
DPB slot is activated with a new top field picture, or if the DPB slot
is currently associated with a bottom field picture and the DPB slot is
activated with a new bottom field picture, then that association is
replaced with an association with the reconstructed field picture used
to activate it, without disturbing the other field picture association,
if any.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="video-profiles"><a class="anchor" href="chap42.html#video-profiles"></a>42.3. Video Profiles</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoProfileInfoKHR</code> structure is defined as follows:</p>
</div>
<div id="VkVideoProfileInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoProfileInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                     <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                         <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoCodecOperationFlagBitsKHR</span>    <span class="n">videoCodecOperation</span><span class="p">;</span>
    <span class="n">VkVideoChromaSubsamplingFlagsKHR</span>    <span class="n">chromaSubsampling</span><span class="p">;</span>
    <span class="n">VkVideoComponentBitDepthFlagsKHR</span>    <span class="n">lumaBitDepth</span><span class="p">;</span>
    <span class="n">VkVideoComponentBitDepthFlagsKHR</span>    <span class="n">chromaBitDepth</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoProfileInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>videoCodecOperation</code> is a <a href="chap42.html#VkVideoCodecOperationFlagBitsKHR">VkVideoCodecOperationFlagBitsKHR</a>
value specifying a video codec operation.</p>
</li>
<li>
<p><code>chromaSubsampling</code> is a bitmask of
<a href="chap42.html#VkVideoChromaSubsamplingFlagBitsKHR">VkVideoChromaSubsamplingFlagBitsKHR</a> specifying video chroma
subsampling information.</p>
</li>
<li>
<p><code>lumaBitDepth</code> is a bitmask of
<a href="chap42.html#VkVideoComponentBitDepthFlagBitsKHR">VkVideoComponentBitDepthFlagBitsKHR</a> specifying video luma bit
depth information.</p>
</li>
<li>
<p><code>chromaBitDepth</code> is a bitmask of
<a href="chap42.html#VkVideoComponentBitDepthFlagBitsKHR">VkVideoComponentBitDepthFlagBitsKHR</a> specifying video chroma bit
depth information.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Video profiles are provided as input to video capability queries such as
<a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> or
<a href="chap42.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a>, as well as when creating
resources to be used by video coding operations such as images, buffers,
query pools, and video sessions.</p>
</div>
<div class="paragraph">
<p>The full description of a video profile is specified by an instance of this
structure, and the codec-specific and auxiliary structures provided in its
<code>pNext</code> chain.</p>
</div>
<div id="video-profile-error-codes" class="paragraph">
<p>When this structure is specified as an input parameter to
<a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a>, or through the
<code>pProfiles</code> member of an <a href="chap42.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a> structure in
the <code>pNext</code> chain of the input parameter of a query command such as
<a href="chap42.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> or
<a href="chap48.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a>, the following error codes
indicate specific causes of the failure of the query operation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_VIDEO_PICTURE_LAYOUT_NOT_SUPPORTED_KHR</code> indicates that the
requested video picture layout
(e.g. through the <code>pictureLayout</code> member of a
<a href="chap42.html#VkVideoDecodeH264ProfileInfoKHR">VkVideoDecodeH264ProfileInfoKHR</a> structure included in the
<code>pNext</code> chain of <code>VkVideoProfileInfoKHR</code>)
is not supported.</p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PROFILE_OPERATION_NOT_SUPPORTED_KHR</code> indicates that
a video profile operation specified by <code>videoCodecOperation</code> is not
supported.</p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PROFILE_FORMAT_NOT_SUPPORTED_KHR</code> indicates that
video format parameters specified by <code>chromaSubsampling</code>,
<code>lumaBitDepth</code>, or <code>chromaBitDepth</code> are not supported.</p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PROFILE_CODEC_NOT_SUPPORTED_KHR</code> indicates that the
codec-specific parameters corresponding to the video codec operation are
not supported.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-chromaSubsampling-07013" href="chap42.html#VUID-VkVideoProfileInfoKHR-chromaSubsampling-07013"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-chromaSubsampling-07013</span><br>

<code>chromaSubsampling</code> <strong class="purple">must</strong> have a single bit set</p>
</li>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-lumaBitDepth-07014" href="chap42.html#VUID-VkVideoProfileInfoKHR-lumaBitDepth-07014"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-lumaBitDepth-07014</span><br>

<code>lumaBitDepth</code> <strong class="purple">must</strong> have a single bit set</p>
</li>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-chromaSubsampling-07015" href="chap42.html#VUID-VkVideoProfileInfoKHR-chromaSubsampling-07015"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-chromaSubsampling-07015</span><br>

If <code>chromaSubsampling</code> is not
<code>VK_VIDEO_CHROMA_SUBSAMPLING_MONOCHROME_BIT_KHR</code>, then
<code>chromaBitDepth</code> <strong class="purple">must</strong> have a single bit set</p>
</li>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-videoCodecOperation-07179" href="chap42.html#VUID-VkVideoProfileInfoKHR-videoCodecOperation-07179"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-videoCodecOperation-07179</span><br>

If <code>videoCodecOperation</code> is
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>, then the <code>pNext</code>
chain <strong class="purple">must</strong> include a <a href="chap42.html#VkVideoDecodeH264ProfileInfoKHR">VkVideoDecodeH264ProfileInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-videoCodecOperation-07180" href="chap42.html#VUID-VkVideoProfileInfoKHR-videoCodecOperation-07180"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-videoCodecOperation-07180</span><br>

If <code>videoCodecOperation</code> is
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then the <code>pNext</code>
chain <strong class="purple">must</strong> include a <a href="chap42.html#VkVideoDecodeH265ProfileInfoKHR">VkVideoDecodeH265ProfileInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-videoCodecOperation-07181" href="chap42.html#VUID-VkVideoProfileInfoKHR-videoCodecOperation-07181"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-videoCodecOperation-07181</span><br>

If <code>videoCodecOperation</code> is
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code>, then the <code>pNext</code>
chain <strong class="purple">must</strong> include a <a href="chap42.html#VkVideoEncodeH264ProfileInfoEXT">VkVideoEncodeH264ProfileInfoEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-videoCodecOperation-07182" href="chap42.html#VUID-VkVideoProfileInfoKHR-videoCodecOperation-07182"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-videoCodecOperation-07182</span><br>

If <code>videoCodecOperation</code> is
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H265_BIT_EXT</code>, then the <code>pNext</code>
chain <strong class="purple">must</strong> include a <a href="chap42.html#VkVideoEncodeH265ProfileInfoEXT">VkVideoEncodeH265ProfileInfoEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoProfileInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_PROFILE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-videoCodecOperation-parameter" href="chap42.html#VUID-VkVideoProfileInfoKHR-videoCodecOperation-parameter"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-videoCodecOperation-parameter</span><br>
 <code>videoCodecOperation</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoCodecOperationFlagBitsKHR">VkVideoCodecOperationFlagBitsKHR</a> value</p>
</li>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-chromaSubsampling-parameter" href="chap42.html#VUID-VkVideoProfileInfoKHR-chromaSubsampling-parameter"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-chromaSubsampling-parameter</span><br>
 <code>chromaSubsampling</code> <strong class="purple">must</strong> be a valid combination of <a href="chap42.html#VkVideoChromaSubsamplingFlagBitsKHR">VkVideoChromaSubsamplingFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-chromaSubsampling-requiredbitmask" href="chap42.html#VUID-VkVideoProfileInfoKHR-chromaSubsampling-requiredbitmask"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-chromaSubsampling-requiredbitmask</span><br>
 <code>chromaSubsampling</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-lumaBitDepth-parameter" href="chap42.html#VUID-VkVideoProfileInfoKHR-lumaBitDepth-parameter"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-lumaBitDepth-parameter</span><br>
 <code>lumaBitDepth</code> <strong class="purple">must</strong> be a valid combination of <a href="chap42.html#VkVideoComponentBitDepthFlagBitsKHR">VkVideoComponentBitDepthFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-lumaBitDepth-requiredbitmask" href="chap42.html#VUID-VkVideoProfileInfoKHR-lumaBitDepth-requiredbitmask"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-lumaBitDepth-requiredbitmask</span><br>
 <code>lumaBitDepth</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoProfileInfoKHR-chromaBitDepth-parameter" href="chap42.html#VUID-VkVideoProfileInfoKHR-chromaBitDepth-parameter"></a> <span class="vuid">VUID-VkVideoProfileInfoKHR-chromaBitDepth-parameter</span><br>
 <code>chromaBitDepth</code> <strong class="purple">must</strong> be a valid combination of <a href="chap42.html#VkVideoComponentBitDepthFlagBitsKHR">VkVideoComponentBitDepthFlagBitsKHR</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of <a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>::<code>videoCodecOperation</code>,
specifying the type of video coding operation and video compression standard
used by a video profile, are:</p>
</div>
<div id="VkVideoCodecOperationFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoCodecOperationFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_CODEC_OPERATION_NONE_KHR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="cp">#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_EXT_video_encode_h264</span>
    <span class="n">VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00010000</span><span class="p">,</span>
<span class="cp">#endif
#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_EXT_video_encode_h265</span>
    <span class="n">VK_VIDEO_CODEC_OPERATION_ENCODE_H265_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00020000</span><span class="p">,</span>
<span class="cp">#endif
</span>  <span class="c1">// Provided by VK_KHR_video_decode_h264</span>
    <span class="n">VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_video_decode_h265</span>
    <span class="n">VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoCodecOperationFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_CODEC_OPERATION_NONE_KHR</code> indicates no support for any
video codec operations.</p>
</li>
<li>
<p><code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code> specifies support for
H.264 video decode operations.</p>
</li>
<li>
<p><code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code> specifies support for
H.265 video decode operations.</p>
</li>
<li>
<p><code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code> specifies support for
H.264 video encode operations.</p>
</li>
<li>
<p><code>VK_VIDEO_CODEC_OPERATION_ENCODE_H265_BIT_EXT</code> specifies support for
H.265 video encode operations.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoCodecOperationFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoCodecOperationFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoCodecOperationFlagsKHR</code> is a bitmask type for setting a mask of
zero or more <a href="chap42.html#VkVideoCodecOperationFlagBitsKHR">VkVideoCodecOperationFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The video format chroma subsampling is defined with the following enums:</p>
</div>
<div id="VkVideoChromaSubsamplingFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoChromaSubsamplingFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_CHROMA_SUBSAMPLING_INVALID_KHR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_VIDEO_CHROMA_SUBSAMPLING_MONOCHROME_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_CHROMA_SUBSAMPLING_420_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_VIDEO_CHROMA_SUBSAMPLING_422_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
    <span class="n">VK_VIDEO_CHROMA_SUBSAMPLING_444_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoChromaSubsamplingFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_CHROMA_SUBSAMPLING_MONOCHROME_BIT_KHR</code> specifies that the
format is monochrome.</p>
</li>
<li>
<p><code>VK_VIDEO_CHROMA_SUBSAMPLING_420_BIT_KHR</code> specified that the format
is 4:2:0 chroma subsampled, i.e. the two chroma components are sampled
horizontally and vertically at half the sample rate of the luma
component.</p>
</li>
<li>
<p><code>VK_VIDEO_CHROMA_SUBSAMPLING_422_BIT_KHR</code> - the format is 4:2:2
chroma subsampled, i.e. the two chroma components are sampled
horizontally at half the sample rate of luma component.</p>
</li>
<li>
<p><code>VK_VIDEO_CHROMA_SUBSAMPLING_444_BIT_KHR</code> - the format is 4:4:4
chroma sampled, i.e. all three components of the Y′C<sub>B</sub>C<sub>R</sub> format are
sampled at the same rate, thus there is no chroma subsampling.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Chroma subsampling is described in more detail in the
<a href="chap16.html#textures-chroma-reconstruction">Chroma Reconstruction</a> section.</p>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoChromaSubsamplingFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoChromaSubsamplingFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoChromaSubsamplingFlagsKHR</code> is a bitmask type for setting a mask
of zero or more <a href="chap42.html#VkVideoChromaSubsamplingFlagBitsKHR">VkVideoChromaSubsamplingFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values for the video format component bit depth are:</p>
</div>
<div id="VkVideoComponentBitDepthFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoComponentBitDepthFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_COMPONENT_BIT_DEPTH_INVALID_KHR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_VIDEO_COMPONENT_BIT_DEPTH_8_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_COMPONENT_BIT_DEPTH_10_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
    <span class="n">VK_VIDEO_COMPONENT_BIT_DEPTH_12_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000010</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoComponentBitDepthFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_COMPONENT_BIT_DEPTH_8_BIT_KHR</code> specifies a component bit
depth of 8 bits.</p>
</li>
<li>
<p><code>VK_VIDEO_COMPONENT_BIT_DEPTH_10_BIT_KHR</code> specifies a component bit
depth of 10 bits.</p>
</li>
<li>
<p><code>VK_VIDEO_COMPONENT_BIT_DEPTH_12_BIT_KHR</code> specifies a component bit
depth of 12 bits.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoComponentBitDepthFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoComponentBitDepthFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoComponentBitDepthFlagsKHR</code> is a bitmask type for setting a mask
of zero or more <a href="chap42.html#VkVideoComponentBitDepthFlagBitsKHR">VkVideoComponentBitDepthFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Additional information about the video decode use case <strong class="purple">can</strong> be provided by
adding a <code>VkVideoDecodeUsageInfoKHR</code> structure to the <code>pNext</code> chain
of <a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>.</p>
</div>
<div class="paragraph">
<p>The <code>VkVideoDecodeUsageInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoDecodeUsageInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeUsageInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>               <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                   <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoDecodeUsageFlagsKHR</span>    <span class="n">videoUsageHints</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeUsageInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>videoUsageHints</code> is a bitmask of
<a href="chap42.html#VkVideoDecodeUsageFlagBitsKHR">VkVideoDecodeUsageFlagBitsKHR</a> specifying hints about the intended
use of the video decode profile.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeUsageInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoDecodeUsageInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeUsageInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_USAGE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeUsageInfoKHR-videoUsageHints-parameter" href="chap42.html#VUID-VkVideoDecodeUsageInfoKHR-videoUsageHints-parameter"></a> <span class="vuid">VUID-VkVideoDecodeUsageInfoKHR-videoUsageHints-parameter</span><br>
 <code>videoUsageHints</code> <strong class="purple">must</strong> be a valid combination of <a href="chap42.html#VkVideoDecodeUsageFlagBitsKHR">VkVideoDecodeUsageFlagBitsKHR</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The following bits <strong class="purple">can</strong> be specified in
<a href="chap42.html#VkVideoDecodeUsageInfoKHR">VkVideoDecodeUsageInfoKHR</a>::<code>videoUsageHints</code> as a hint about the
video decode use case:</p>
</div>
<div id="VkVideoDecodeUsageFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoDecodeUsageFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_DECODE_USAGE_DEFAULT_KHR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_VIDEO_DECODE_USAGE_TRANSCODING_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_DECODE_USAGE_OFFLINE_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_VIDEO_DECODE_USAGE_STREAMING_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoDecodeUsageFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_DECODE_USAGE_TRANSCODING_BIT_KHR</code> specifies that video
decoding is intended to be used in conjunction with video encoding to
transcode a video bitstream with the same and/or different codecs.</p>
</li>
<li>
<p><code>VK_VIDEO_DECODE_USAGE_OFFLINE_BIT_KHR</code> specifies that video
decoding is intended to be used to consume a local video bitstream.</p>
</li>
<li>
<p><code>VK_VIDEO_DECODE_USAGE_STREAMING_BIT_KHR</code> specifies that video
decoding is intended to be used to consume a video bitstream received as
a continuous flow over network.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>There are no restrictions on the combination of bits that <strong class="purple">can</strong> be specified
by the application.
However, applications <strong class="purple">should</strong> use reasonable combinations in order for the
implementation to be able to select the most appropriate mode of operation
for the particular use case.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoDecodeUsageFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoDecodeUsageFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoDecodeUsageFlagsKHR</code> is a bitmask type for setting a mask of
zero or more <a href="chap42.html#VkVideoDecodeUsageFlagBitsKHR">VkVideoDecodeUsageFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Additional information about the video encode use case <strong class="purple">can</strong> be provided by
adding a <code>VkVideoEncodeUsageInfoKHR</code> structure to the <code>pNext</code> chain
of <a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>.</p>
</div>
<div class="paragraph">
<p>The <code>VkVideoEncodeUsageInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeUsageInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeUsageInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                 <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                     <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoEncodeUsageFlagsKHR</span>      <span class="n">videoUsageHints</span><span class="p">;</span>
    <span class="n">VkVideoEncodeContentFlagsKHR</span>    <span class="n">videoContentHints</span><span class="p">;</span>
    <span class="n">VkVideoEncodeTuningModeKHR</span>      <span class="n">tuningMode</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeUsageInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>videoUsageHints</code> is a bitmask of
<a href="chap42.html#VkVideoEncodeUsageFlagBitsKHR">VkVideoEncodeUsageFlagBitsKHR</a> specifying hints about the intended
use of the video encode profile.</p>
</li>
<li>
<p><code>videoContentHints</code> is a bitmask of
<a href="chap42.html#VkVideoEncodeContentFlagBitsKHR">VkVideoEncodeContentFlagBitsKHR</a> specifying hints about the content
to be encoded using the video encode profile.</p>
</li>
<li>
<p><code>tuningMode</code> is a <a href="chap42.html#VkVideoEncodeTuningModeKHR">VkVideoEncodeTuningModeKHR</a> value specifying
the tuning mode to use when encoding with the video profile.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeUsageInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoEncodeUsageInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeUsageInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_USAGE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeUsageInfoKHR-videoUsageHints-parameter" href="chap42.html#VUID-VkVideoEncodeUsageInfoKHR-videoUsageHints-parameter"></a> <span class="vuid">VUID-VkVideoEncodeUsageInfoKHR-videoUsageHints-parameter</span><br>
 <code>videoUsageHints</code> <strong class="purple">must</strong> be a valid combination of <a href="chap42.html#VkVideoEncodeUsageFlagBitsKHR">VkVideoEncodeUsageFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeUsageInfoKHR-videoContentHints-parameter" href="chap42.html#VUID-VkVideoEncodeUsageInfoKHR-videoContentHints-parameter"></a> <span class="vuid">VUID-VkVideoEncodeUsageInfoKHR-videoContentHints-parameter</span><br>
 <code>videoContentHints</code> <strong class="purple">must</strong> be a valid combination of <a href="chap42.html#VkVideoEncodeContentFlagBitsKHR">VkVideoEncodeContentFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeUsageInfoKHR-tuningMode-parameter" href="chap42.html#VUID-VkVideoEncodeUsageInfoKHR-tuningMode-parameter"></a> <span class="vuid">VUID-VkVideoEncodeUsageInfoKHR-tuningMode-parameter</span><br>
 If <code>tuningMode</code> is not <code>0</code>, <code>tuningMode</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoEncodeTuningModeKHR">VkVideoEncodeTuningModeKHR</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The following bits <strong class="purple">can</strong> be specified in
<a href="chap42.html#VkVideoEncodeUsageInfoKHR">VkVideoEncodeUsageInfoKHR</a>::<code>videoUsageHints</code> as a hint about the
video encode use case:</p>
</div>
<div id="VkVideoEncodeUsageFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeUsageFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_USAGE_DEFAULT_KHR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_USAGE_TRANSCODING_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_USAGE_STREAMING_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_USAGE_RECORDING_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_USAGE_CONFERENCING_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeUsageFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_USAGE_TRANSCODING_BIT_KHR</code> specifies that video
encoding is intended to be used in conjunction with video decoding to
transcode a video bitstream with the same and/or different codecs.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_USAGE_STREAMING_BIT_KHR</code> specifies that video
encoding is intended to be used to produce a video bitstream that is
expected to be sent as a continuous flow over network.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_USAGE_RECORDING_BIT_KHR</code> specifies that video
encoding is intended to be used for real-time recording for offline
consumption.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_USAGE_CONFERENCING_BIT_KHR</code> specifies that video
encoding is intended to be used in a video conferencing scenario.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>There are no restrictions on the combination of bits that <strong class="purple">can</strong> be specified
by the application.
However, applications <strong class="purple">should</strong> use reasonable combinations in order for the
implementation to be able to select the most appropriate mode of operation
for the particular use case.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeUsageFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeUsageFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEncodeUsageFlagsKHR</code> is a bitmask type for setting a mask of
zero or more <a href="chap42.html#VkVideoEncodeUsageFlagBitsKHR">VkVideoEncodeUsageFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The following bits <strong class="purple">can</strong> be specified in
<a href="chap42.html#VkVideoEncodeUsageInfoKHR">VkVideoEncodeUsageInfoKHR</a>::<code>videoContentHints</code> as a hint about the
encoded video content:</p>
</div>
<div id="VkVideoEncodeContentFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeContentFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_CONTENT_DEFAULT_KHR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_CONTENT_CAMERA_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_CONTENT_DESKTOP_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_CONTENT_RENDERED_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeContentFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_CONTENT_CAMERA_BIT_KHR</code> specifies that video
encoding is intended to be used to encode camera content.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_CONTENT_DESKTOP_BIT_KHR</code> specifies that video
encoding is intended to be used to encode desktop content.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_CONTENT_RENDERED_BIT_KHR</code> specified that video
encoding is intended to be used to encode rendered (e.g. game) content.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>There are no restrictions on the combination of bits that <strong class="purple">can</strong> be specified
by the application.
However, applications <strong class="purple">should</strong> use reasonable combinations in order for the
implementation to be able to select the most appropriate mode of operation
for the particular content type.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeContentFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeContentFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEncodeContentFlagsKHR</code> is a bitmask type for setting a mask of
zero or more <a href="chap42.html#VkVideoEncodeContentFlagBitsKHR">VkVideoEncodeContentFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible video encode tuning mode values are as follows:</p>
</div>
<div id="VkVideoEncodeTuningModeKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeTuningModeKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_TUNING_MODE_DEFAULT_KHR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_TUNING_MODE_HIGH_QUALITY_KHR</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_TUNING_MODE_LOW_LATENCY_KHR</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_TUNING_MODE_ULTRA_LOW_LATENCY_KHR</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_TUNING_MODE_LOSSLESS_KHR</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeTuningModeKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_TUNING_MODE_DEFAULT_KHR</code> specifies the default
tuning mode.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_TUNING_MODE_HIGH_QUALITY_KHR</code> specifies that video
encoding is tuned for high quality.
When using this tuning mode, the implementation <strong class="purple">may</strong> compromise the
latency of video encoding operations to improve quality.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_TUNING_MODE_LOW_LATENCY_KHR</code> specifies that video
encoding is tuned for low latency.
When using this tuning mode, the implementation <strong class="purple">may</strong> compromise quality
to increase the performance and lower the latency of video encode
operations.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_TUNING_MODE_ULTRA_LOW_LATENCY_KHR</code> specifies that
video encoding is tuned for ultra-low latency.
When using this tuning mode, the implementation <strong class="purple">may</strong> compromise quality
to maximize the performance and minimize the latency of video encoding
operations.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_TUNING_MODE_LOSSLESS_KHR</code> specifies that video
encoding is tuned for lossless encoding.
When using this tuning mode, video encode operations produce lossless
output.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoProfileListInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoProfileListInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoProfileListInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                 <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                     <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                        <span class="n">profileCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoProfileInfoKHR</span><span class="o">*</span>    <span class="n">pProfiles</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoProfileListInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>profileCount</code> is the number of elements in the <code>pProfiles</code>
array.</p>
</li>
<li>
<p><code>pProfiles</code> is a pointer to an array of <a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>
structures.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note:</div>
<div class="paragraph">
<p>Video transcoding is an example of a use case that necessitates the
specification of multiple profiles in various contexts.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>When the application provides a video decode profile and one or more video
encode profiles in the profile list, the implementation ensures that any
capabilitities returned or resources created are suitable for the video
transcoding use cases without the need for manual data transformations.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoProfileListInfoKHR-pProfiles-06813" href="chap42.html#VUID-VkVideoProfileListInfoKHR-pProfiles-06813"></a> <span class="vuid">VUID-VkVideoProfileListInfoKHR-pProfiles-06813</span><br>

<code>pProfiles</code> <strong class="purple">must</strong> not contain more than one element whose
<code>videoCodecOperation</code> member specifies a decode operation</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoProfileListInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoProfileListInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoProfileListInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_PROFILE_LIST_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoProfileListInfoKHR-pProfiles-parameter" href="chap42.html#VUID-VkVideoProfileListInfoKHR-pProfiles-parameter"></a> <span class="vuid">VUID-VkVideoProfileListInfoKHR-pProfiles-parameter</span><br>
 If <code>profileCount</code> is not <code>0</code>, <code>pProfiles</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>profileCount</code> valid <a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="video-capabilities"><a class="anchor" href="chap42.html#video-capabilities"></a>42.4. Video Capabilities</h3>
<div class="sect3">
<h4 id="video-coding-capabilities"><a class="anchor" href="chap42.html#video-coding-capabilities"></a>42.4.1. Video Coding Capabilities</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To query video coding capabilities for a specific video profile, call:</p>
</div>
<div id="vkGetPhysicalDeviceVideoCapabilitiesKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="n">VkResult</span> <span class="nf">vkGetPhysicalDeviceVideoCapabilitiesKHR</span><span class="p">(</span>
    <span class="n">VkPhysicalDevice</span>                            <span class="n">physicalDevice</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkVideoProfileInfoKHR</span><span class="o">*</span>                <span class="n">pVideoProfile</span><span class="p">,</span>
    <span class="n">VkVideoCapabilitiesKHR</span><span class="o">*</span>                     <span class="n">pCapabilities</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>physicalDevice</code> is the physical device from which to query the
video decode or encode capabilities.</p>
</li>
<li>
<p><code>pVideoProfile</code> is a pointer to a <a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>
structure.</p>
</li>
<li>
<p><code>pCapabilities</code> is a pointer to a <a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>
structure in which the capabilities are returned.</p>
</li>
</ul>
</div>
<div id="video-profile-support" class="paragraph">
<p>If the <a href="chap42.html#video-profiles">video profile</a> described by <code>pVideoProfile</code> is
supported by the implementation, then this command returns <code>VK_SUCCESS</code>
and <code>pCapabilities</code> is filled with the capabilities supported with the
specified video profile.
Otherwise, one of the <a href="chap42.html#video-profile-error-codes">video-profile-specific
error codes</a> are returned.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-07183" href="chap42.html#VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-07183"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-07183</span><br>

If <code>pVideoProfile-&gt;videoCodecOperation</code> specifies a decode
operation, then the <code>pNext</code> chain of <code>pCapabilities</code> <strong class="purple">must</strong>
include a <a href="chap42.html#VkVideoDecodeCapabilitiesKHR">VkVideoDecodeCapabilitiesKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-07184" href="chap42.html#VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-07184"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-07184</span><br>

If <code>pVideoProfile-&gt;videoCodecOperation</code> is
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>, then the <code>pNext</code>
chain of <code>pCapabilities</code> <strong class="purple">must</strong> include a
<a href="chap42.html#VkVideoDecodeH264CapabilitiesKHR">VkVideoDecodeH264CapabilitiesKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-07185" href="chap42.html#VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-07185"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-07185</span><br>

If <code>pVideoProfile-&gt;videoCodecOperation</code> is
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then the <code>pNext</code>
chain of <code>pCapabilities</code> <strong class="purple">must</strong> include a
<a href="chap42.html#VkVideoDecodeH265CapabilitiesKHR">VkVideoDecodeH265CapabilitiesKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-07186" href="chap42.html#VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-07186"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-07186</span><br>

If <code>pVideoProfile-&gt;videoCodecOperation</code> specifies an encode
operation, then the <code>pNext</code> chain of <code>pCapabilities</code> <strong class="purple">must</strong>
include a <a href="chap42.html#VkVideoEncodeCapabilitiesKHR">VkVideoEncodeCapabilitiesKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-07187" href="chap42.html#VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-07187"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-07187</span><br>

If <code>pVideoProfile-&gt;videoCodecOperation</code> is
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code>, then the <code>pNext</code>
chain of <code>pCapabilities</code> <strong class="purple">must</strong> include a
<a href="chap42.html#VkVideoEncodeH264CapabilitiesEXT">VkVideoEncodeH264CapabilitiesEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-07188" href="chap42.html#VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-07188"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-07188</span><br>

If <code>pVideoProfile-&gt;videoCodecOperation</code> is
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H265_BIT_EXT</code>, then the <code>pNext</code>
chain of <code>pCapabilities</code> <strong class="purple">must</strong> include a
<a href="chap42.html#VkVideoEncodeH265CapabilitiesEXT">VkVideoEncodeH265CapabilitiesEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-physicalDevice-parameter" href="chap42.html#VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-physicalDevice-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-physicalDevice-parameter</span><br>
 <code>physicalDevice</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkPhysicalDevice">VkPhysicalDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-parameter" href="chap42.html#VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-parameter</span><br>
 <code>pVideoProfile</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pCapabilities-parameter" href="chap42.html#VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pCapabilities-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pCapabilities-parameter</span><br>
 <code>pCapabilities</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PROFILE_OPERATION_NOT_SUPPORTED_KHR</code></p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PROFILE_FORMAT_NOT_SUPPORTED_KHR</code></p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PICTURE_LAYOUT_NOT_SUPPORTED_KHR</code></p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PROFILE_CODEC_NOT_SUPPORTED_KHR</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoCapabilitiesKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoCapabilitiesKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoCapabilitiesKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>              <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoCapabilityFlagsKHR</span>    <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>                 <span class="n">minBitstreamBufferOffsetAlignment</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>                 <span class="n">minBitstreamBufferSizeAlignment</span><span class="p">;</span>
    <span class="n">VkExtent2D</span>                   <span class="n">pictureAccessGranularity</span><span class="p">;</span>
    <span class="n">VkExtent2D</span>                   <span class="n">minCodedExtent</span><span class="p">;</span>
    <span class="n">VkExtent2D</span>                   <span class="n">maxCodedExtent</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                     <span class="n">maxDpbSlots</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                     <span class="n">maxActiveReferencePictures</span><span class="p">;</span>
    <span class="n">VkExtensionProperties</span>        <span class="n">stdHeaderVersion</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoCapabilitiesKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap42.html#VkVideoCapabilityFlagBitsKHR">VkVideoCapabilityFlagBitsKHR</a>
specifying capability flags.</p>
</li>
<li>
<p><code>minBitstreamBufferOffsetAlignment</code> is the minimum alignment for
bitstream buffer offsets.</p>
</li>
<li>
<p><code>minBitstreamBufferSizeAlignment</code> is the minimum alignment for
bitstream buffer range sizes.</p>
</li>
<li>
<p><code>pictureAccessGranularity</code> is the granularity at which image access
to video picture resources happen.</p>
</li>
<li>
<p><code>minCodedExtent</code> is the minimum width and height of the coded
frames.</p>
</li>
<li>
<p><code>maxCodedExtent</code> is the maximum width and height of the coded
frames.</p>
</li>
<li>
<p><code>maxDpbSlots</code> is the maximum number of <a href="chap42.html#dpb-slot">DPB slots</a>
supported by a single video session.</p>
</li>
<li>
<p><code>maxActiveReferencePictures</code> is the maximum number of
<a href="chap42.html#active-reference-pictures">active reference pictures</a> a single video
coding operation <strong class="purple">can</strong> use.</p>
</li>
<li>
<p><a id="video-std-header-version"></a> <code>stdHeaderVersion</code> is a
<a href="chap44.html#VkExtensionProperties">VkExtensionProperties</a> structure reporting the Video Std header
name and version supported for the video profile.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note:</div>
<div class="paragraph">
<p>It is common for video compression standards to allow using all reference
pictures associated with active DPB slots as active reference pictures,
hence for video decode profiles the values returned in <code>maxDpbSlots</code> and
<code>maxActiveReferencePictures</code> are often equal.
Similarly, in case of video decode profiles supporting field pictures the
value of <code>maxActiveReferencePictures</code> often equals
<span class="eq"><code>maxDpbSlots</code> × 2</span>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoCapabilitiesKHR-sType-sType" href="chap42.html#VUID-VkVideoCapabilitiesKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoCapabilitiesKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_CAPABILITIES_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoCapabilitiesKHR-pNext-pNext" href="chap42.html#VUID-VkVideoCapabilitiesKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoCapabilitiesKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap42.html#VkVideoDecodeCapabilitiesKHR">VkVideoDecodeCapabilitiesKHR</a>, <a href="chap42.html#VkVideoDecodeH264CapabilitiesKHR">VkVideoDecodeH264CapabilitiesKHR</a>, <a href="chap42.html#VkVideoDecodeH265CapabilitiesKHR">VkVideoDecodeH265CapabilitiesKHR</a>, <a href="chap42.html#VkVideoEncodeCapabilitiesKHR">VkVideoEncodeCapabilitiesKHR</a>, <a href="chap42.html#VkVideoEncodeH264CapabilitiesEXT">VkVideoEncodeH264CapabilitiesEXT</a>, or <a href="chap42.html#VkVideoEncodeH265CapabilitiesEXT">VkVideoEncodeH265CapabilitiesEXT</a></p>
</li>
<li>
<p><a id="VUID-VkVideoCapabilitiesKHR-sType-unique" href="chap42.html#VUID-VkVideoCapabilitiesKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoCapabilitiesKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in <a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>flags</code> are:</p>
</div>
<div id="VkVideoCapabilityFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoCapabilityFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_CAPABILITY_PROTECTED_CONTENT_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_CAPABILITY_SEPARATE_REFERENCE_IMAGES_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoCapabilityFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_CAPABILITY_PROTECTED_CONTENT_BIT_KHR</code> specifies that video
sessions support producing and consuming protected content.</p>
</li>
<li>
<p><a id="separate-reference-images"></a>
<code>VK_VIDEO_CAPABILITY_SEPARATE_REFERENCE_IMAGES_BIT_KHR</code> specifies
that the <a href="chap42.html#video-picture-resources">video picture resources</a> associated
with the <a href="chap42.html#dpb-slot">DPB slots</a> of a video session <strong class="purple">can</strong> be backed by
separate <code>VkImage</code> objects.
If this capability flag is not present, then all DPB slots of a video
session <strong class="purple">must</strong> be associated with video picture resources backed by the
same <code>VkImage</code> object (e.g. using different layers of the same
image).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoCapabilityFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoCapabilityFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoCapabilityFlagsKHR</code> is a bitmask type for setting a mask of zero
or more <a href="chap42.html#VkVideoCapabilityFlagBitsKHR">VkVideoCapabilityFlagBitsKHR</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="video-format-capabilities"><a class="anchor" href="chap42.html#video-format-capabilities"></a>42.4.2. Video Format Capabilities</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To enumerate the supported output, input and DPB image formats and
corresponding capabilities for a specific video profile, call:</p>
</div>
<div id="vkGetPhysicalDeviceVideoFormatPropertiesKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="n">VkResult</span> <span class="nf">vkGetPhysicalDeviceVideoFormatPropertiesKHR</span><span class="p">(</span>
    <span class="n">VkPhysicalDevice</span>                            <span class="n">physicalDevice</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkPhysicalDeviceVideoFormatInfoKHR</span><span class="o">*</span>   <span class="n">pVideoFormatInfo</span><span class="p">,</span>
    <span class="kt">uint32_t</span><span class="o">*</span>                                   <span class="n">pVideoFormatPropertyCount</span><span class="p">,</span>
    <span class="n">VkVideoFormatPropertiesKHR</span><span class="o">*</span>                 <span class="n">pVideoFormatProperties</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>physicalDevice</code> is the physical device from which to query the
video format properties.</p>
</li>
<li>
<p><code>pVideoFormatInfo</code> is a pointer to a
<a href="chap42.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a> structure specifying the usage
and video profiles for which supported image formats and capabilities
are returned.</p>
</li>
<li>
<p><code>pVideoFormatPropertyCount</code> is a pointer to an integer related to
the number of video format properties available or queried, as described
below.</p>
</li>
<li>
<p><code>pVideoFormatProperties</code> is a pointer to an array of
<a href="chap42.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a> structures in which supported image
formats and capabilities are returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>pVideoFormatProperties</code> is <code>NULL</code>, then the number of video format
properties supported for the given <code>physicalDevice</code> is returned in
<code>pVideoFormatPropertyCount</code>.
Otherwise, <code>pVideoFormatPropertyCount</code> <strong class="purple">must</strong> point to a variable set by
the user to the number of elements in the <code>pVideoFormatProperties</code>
array, and on return the variable is overwritten with the number of values
actually written to <code>pVideoFormatProperties</code>.
If the value of <code>pVideoFormatPropertyCount</code> is less than the number of
video format properties supported, at most <code>pVideoFormatPropertyCount</code>
values will be written to <code>pVideoFormatProperties</code>, and
<code>VK_INCOMPLETE</code> will be returned instead of <code>VK_SUCCESS</code>, to
indicate that not all the available values were returned.</p>
</div>
<div class="paragraph">
<p>Video format properties are always queried with respect to a specific set of
video profiles.
These are specified by chaining the <a href="chap42.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a>
structure to <code>pVideoFormatInfo</code>.</p>
</div>
<div class="paragraph">
<p>For most use cases, the images are used by a single video session and a
single video profile is provided.
For a use case such as video transcoding, where a decode session output
image <strong class="purple">can</strong> be used as encode input in one or more encode sessions, multiple
video profiles corresponding to the video sessions that will share the image
<strong class="purple">must</strong> be provided.</p>
</div>
<div class="paragraph">
<p>If any of the <a href="chap42.html#video-profiles">video profiles</a> specified via
<a href="chap42.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a>::<code>pProfiles</code> are not supported, then
this command returns one of the <a href="chap42.html#video-profile-error-codes">video-profile-specific error codes</a>.
Furthermore, if <a href="chap42.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a>::<code>imageUsage</code>
includes any image usage flags not supported by the specified video
profiles, then this command returns
<code>VK_ERROR_IMAGE_USAGE_NOT_SUPPORTED_KHR</code>.</p>
</div>
<div class="paragraph">
<p>This command also returns <code>VK_ERROR_IMAGE_USAGE_NOT_SUPPORTED_KHR</code> if
<a href="chap42.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a>::<code>imageUsage</code> does not include
the appropriate flags as dictated by the decode capability flags returned in
<a href="chap42.html#VkVideoDecodeCapabilitiesKHR">VkVideoDecodeCapabilitiesKHR</a>::<code>flags</code> for any of the profiles
specified in the <a href="chap42.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a> structure provided in the
<code>pNext</code> chain of <code>pVideoFormatInfo</code>.</p>
</div>
<div class="paragraph">
<p>If the decode capability flags include
<code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_COINCIDE_BIT_KHR</code> but not
<code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_DISTINCT_BIT_KHR</code>, then in
order to query video format properties for decode DPB and output usage,
<a href="chap42.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a>::<code>imageUsage</code> <strong class="purple">must</strong> include
both <code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code> and
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code>.
Otherwise, the call will fail with
<code>VK_ERROR_IMAGE_USAGE_NOT_SUPPORTED_KHR</code>.</p>
</div>
<div class="paragraph">
<p>If the decode capability flags include
<code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_DISTINCT_BIT_KHR</code> but not
<code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_COINCIDE_BIT_KHR</code>, then in
order to query video format properties for decode DPB usage,
<a href="chap42.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a>::<code>imageUsage</code> <strong class="purple">must</strong> include
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code>, but not
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code>.
Otherwise, the call will fail with
<code>VK_ERROR_IMAGE_USAGE_NOT_SUPPORTED_KHR</code>.
Similarly, to query video format properties for decode output usage,
<a href="chap42.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a>::<code>imageUsage</code> <strong class="purple">must</strong> include
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code>, but not
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code>.
Otherwise, the call will fail with
<code>VK_ERROR_IMAGE_USAGE_NOT_SUPPORTED_KHR</code>.</p>
</div>
<div class="paragraph">
<p>The <code>imageUsage</code> member of the <a href="chap42.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a>
structure specifies the expected video usage flags that the returned video
formats <strong class="purple">must</strong> support.
Correspondingly, the <code>imageUsageFlags</code> member of each
<a href="chap42.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a> structure returned will contain at least
the same set of image usage flags.</p>
</div>
<div class="paragraph">
<p>If the implementation supports using video input, output, or DPB images of a
particular format in operations other than video decode/encode then the
<code>imageUsageFlags</code> member of the corresponding
<a href="chap42.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a> structure returned will include additional
image usage flags indicating that.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note:</div>
<div class="paragraph">
<p>For most use cases, only decode or encode related usage flags are going to
be specified.
For a use case such as transcode, if the image were to be shared between
decode and encode session(s), then both decode and encode related usage
flags <strong class="purple">can</strong> be set.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Multiple <code>VkVideoFormatPropertiesKHR</code> entries <strong class="purple">may</strong> be returned with the
same <code>format</code> member with different <code>componentMapping</code>,
<code>imageType</code>, or <code>imageTiling</code> values, as described later.</p>
</div>
<div class="paragraph">
<p>In addition, a different set of <code>VkVideoFormatPropertiesKHR</code> entries
<strong class="purple">may</strong> be returned depending on the <code>imageUsage</code> member of the
<code>VkPhysicalDeviceVideoFormatInfoKHR</code> structure, even for the same set of
video profiles, for example, based on whether encode input, encode DPB,
decode output, and/or decode DPB usage is requested.</p>
</div>
<div class="paragraph">
<p>The application <strong class="purple">can</strong> select the parameters returned in the
<code>VkVideoFormatPropertiesKHR</code> entries and use compatible parameters when
creating the input, output, and DPB images.
The implementation will report all image creation and usage flags that are
valid for images used with the requested video profiles but applications
<strong class="purple">should</strong> create images only with those that are necessary for the particular
use case.</p>
</div>
<div class="paragraph">
<p>Before creating an image, the application <strong class="purple">can</strong> obtain the complete set of
supported image format features by calling
<a href="chap48.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a> using parameters derived
from the members of one of the reported <code>VkVideoFormatPropertiesKHR</code>
entries and adding the same <a href="chap42.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a> structure to the
<code>pNext</code> chain of <a href="chap48.html#VkPhysicalDeviceImageFormatInfo2">VkPhysicalDeviceImageFormatInfo2</a>.</p>
</div>
<div class="paragraph">
<p>The <code>componentMapping</code> member of <code>VkVideoFormatPropertiesKHR</code>
defines the ordering of the Y′C<sub>B</sub>C<sub>R</sub> color channels from the perspective of
the video codec operations specified in <a href="chap42.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a>.
For example, if the implementation produces video decode output with the
format <code>VK_FORMAT_G8_B8R8_2PLANE_420_UNORM</code> where the blue and red
chrominance channels are swapped then the <code>componentMapping</code> member of
the corresponding <code>VkVideoFormatPropertiesKHR</code> structure will have the
following member values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="n">components</span><span class="p">.</span><span class="n">r</span> <span class="o">=</span> <span class="n">VK_COMPONENT_SWIZZLE_B</span><span class="p">;</span>        <span class="c1">// Cb component</span>
<span class="n">components</span><span class="p">.</span><span class="n">g</span> <span class="o">=</span> <span class="n">VK_COMPONENT_SWIZZLE_IDENTITY</span><span class="p">;</span> <span class="c1">// Y component</span>
<span class="n">components</span><span class="p">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">VK_COMPONENT_SWIZZLE_R</span><span class="p">;</span>        <span class="c1">// Cr component</span>
<span class="n">components</span><span class="p">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">VK_COMPONENT_SWIZZLE_IDENTITY</span><span class="p">;</span> <span class="c1">// unused, defaults to 1.0</span></code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pNext-06812" href="chap42.html#VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pNext-06812"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pNext-06812</span><br>

The <code>pNext</code> chain of <code>pVideoFormatInfo</code> <strong class="purple">must</strong> include a
<a href="chap42.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a> structure with <code>profileCount</code>
greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-physicalDevice-parameter" href="chap42.html#VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-physicalDevice-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-physicalDevice-parameter</span><br>
 <code>physicalDevice</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkPhysicalDevice">VkPhysicalDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatInfo-parameter" href="chap42.html#VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatInfo-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatInfo-parameter</span><br>
 <code>pVideoFormatInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap42.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatPropertyCount-parameter" href="chap42.html#VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatPropertyCount-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatPropertyCount-parameter</span><br>
 <code>pVideoFormatPropertyCount</code> <strong class="purple">must</strong> be a valid pointer to a <code>uint32_t</code> value</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatProperties-parameter" href="chap42.html#VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatProperties-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatProperties-parameter</span><br>
 If the value referenced by <code>pVideoFormatPropertyCount</code> is not <code>0</code>, and <code>pVideoFormatProperties</code> is not <code>NULL</code>, <code>pVideoFormatProperties</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>pVideoFormatPropertyCount</code> <a href="chap42.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
<li>
<p><code>VK_INCOMPLETE</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_IMAGE_USAGE_NOT_SUPPORTED_KHR</code></p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PROFILE_OPERATION_NOT_SUPPORTED_KHR</code></p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PROFILE_FORMAT_NOT_SUPPORTED_KHR</code></p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PICTURE_LAYOUT_NOT_SUPPORTED_KHR</code></p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_PROFILE_CODEC_NOT_SUPPORTED_KHR</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkPhysicalDeviceVideoFormatInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkPhysicalDeviceVideoFormatInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkPhysicalDeviceVideoFormatInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>      <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>          <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImageUsageFlags</span>    <span class="n">imageUsage</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkPhysicalDeviceVideoFormatInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>imageUsage</code> is a bitmask of <a href="chap12.html#VkImageUsageFlagBits">VkImageUsageFlagBits</a> specifying
the intended usage of the video images.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkPhysicalDeviceVideoFormatInfoKHR-sType-sType" href="chap42.html#VUID-VkPhysicalDeviceVideoFormatInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkPhysicalDeviceVideoFormatInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_PHYSICAL_DEVICE_VIDEO_FORMAT_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkPhysicalDeviceVideoFormatInfoKHR-pNext-pNext" href="chap42.html#VUID-VkPhysicalDeviceVideoFormatInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkPhysicalDeviceVideoFormatInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="chap42.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a></p>
</li>
<li>
<p><a id="VUID-VkPhysicalDeviceVideoFormatInfoKHR-sType-unique" href="chap42.html#VUID-VkPhysicalDeviceVideoFormatInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkPhysicalDeviceVideoFormatInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkPhysicalDeviceVideoFormatInfoKHR-imageUsage-parameter" href="chap42.html#VUID-VkPhysicalDeviceVideoFormatInfoKHR-imageUsage-parameter"></a> <span class="vuid">VUID-VkPhysicalDeviceVideoFormatInfoKHR-imageUsage-parameter</span><br>
 <code>imageUsage</code> <strong class="purple">must</strong> be a valid combination of <a href="chap12.html#VkImageUsageFlagBits">VkImageUsageFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkPhysicalDeviceVideoFormatInfoKHR-imageUsage-requiredbitmask" href="chap42.html#VUID-VkPhysicalDeviceVideoFormatInfoKHR-imageUsage-requiredbitmask"></a> <span class="vuid">VUID-VkPhysicalDeviceVideoFormatInfoKHR-imageUsage-requiredbitmask</span><br>
 <code>imageUsage</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoFormatPropertiesKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoFormatPropertiesKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoFormatPropertiesKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>       <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                 <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkFormat</span>              <span class="n">format</span><span class="p">;</span>
    <span class="n">VkComponentMapping</span>    <span class="n">componentMapping</span><span class="p">;</span>
    <span class="n">VkImageCreateFlags</span>    <span class="n">imageCreateFlags</span><span class="p">;</span>
    <span class="n">VkImageType</span>           <span class="n">imageType</span><span class="p">;</span>
    <span class="n">VkImageTiling</span>         <span class="n">imageTiling</span><span class="p">;</span>
    <span class="n">VkImageUsageFlags</span>     <span class="n">imageUsageFlags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoFormatPropertiesKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>format</code> is a <a href="chap47.html#VkFormat">VkFormat</a> that specifies the format that <strong class="purple">can</strong> be
used with the specified video profiles and image usages.</p>
</li>
<li>
<p><code>componentMapping</code> defines the color channel order used for the
format.
<code>format</code> along with <code>componentMapping</code> describe how the color
channels are ordered when producing video decoder output or are expected
to be ordered in video encoder input, when applicable.
If the <code>format</code> reported does not require component swizzling then
all members of <code>componentMapping</code> will be set to
<code>VK_COMPONENT_SWIZZLE_IDENTITY</code>.</p>
</li>
<li>
<p><code>imageCreateFlags</code> is a bitmask of <a href="chap12.html#VkImageCreateFlagBits">VkImageCreateFlagBits</a>
specifying the supported image creation flags for the format.</p>
</li>
<li>
<p><code>imageType</code> is a <a href="chap12.html#VkImageType">VkImageType</a> that specifies the image type the
format <strong class="purple">can</strong> be used with.</p>
</li>
<li>
<p><code>imageTiling</code> is a <a href="chap12.html#VkImageTiling">VkImageTiling</a> that specifies the image
tiling the format <strong class="purple">can</strong> be used with.</p>
</li>
<li>
<p><code>imageUsageFlags</code> is a bitmask of <a href="chap12.html#VkImageUsageFlagBits">VkImageUsageFlagBits</a>
specifying the supported image usage flags for the format.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoFormatPropertiesKHR-sType-sType" href="chap42.html#VUID-VkVideoFormatPropertiesKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoFormatPropertiesKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_FORMAT_PROPERTIES_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoFormatPropertiesKHR-pNext-pNext" href="chap42.html#VUID-VkVideoFormatPropertiesKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoFormatPropertiesKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="video-session"><a class="anchor" href="chap42.html#video-session"></a>42.5. Video Sessions</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Video sessions are objects that represent and maintain the state needed to
perform video decode or encode operations using a specific video profile.</p>
</div>
<div class="paragraph">
<p>Video sessions are represented by <code>VkVideoSessionKHR</code> handles:</p>
</div>
<div id="VkVideoSessionKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="n">VK_DEFINE_NON_DISPATCHABLE_HANDLE</span><span class="p">(</span><span class="n">VkVideoSessionKHR</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="video-session-creation"><a class="anchor" href="chap42.html#video-session-creation"></a>42.5.1. Creating a Video Session</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create a video session object, call:</p>
</div>
<div id="vkCreateVideoSessionKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="n">VkResult</span> <span class="nf">vkCreateVideoSessionKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkVideoSessionCreateInfoKHR</span><span class="o">*</span>          <span class="n">pCreateInfo</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">,</span>
    <span class="n">VkVideoSessionKHR</span><span class="o">*</span>                          <span class="n">pVideoSession</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the video session.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="chap42.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>
structure containing parameters to be used to create the video session.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pVideoSession</code> is a pointer to a <a href="chap42.html#VkVideoSessionKHR">VkVideoSessionKHR</a> handle in
which the resulting video session object is returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The resulting video session object is said to be created with the video
codec operation specified in
<code>pCreateInfo-&gt;pVideoProfile-&gt;videoCodecOperation</code>.</p>
</div>
<div class="paragraph">
<p>The name and version of the codec-specific Video Std header to be used with
the video session is specified by the <a href="chap44.html#VkExtensionProperties">VkExtensionProperties</a> structure
pointed to by <code>pCreateInfo-&gt;pStdHeaderVersion</code>.
If a non-existent or unsupported Video Std header version is specified in
<code>pCreateInfo-&gt;pStdHeaderVersion-&gt;specVersion</code>, then this command returns
<code>VK_ERROR_VIDEO_STD_VERSION_NOT_SUPPORTED_KHR</code>.</p>
</div>
<div id="video-session-uninitialized" class="paragraph">
<p>Video session objects are created in <em>uninitialized</em> state.
In order to transition the video session into <em>initial</em> state, the
application <strong class="purple">must</strong> issue a <a href="chap42.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a> command with
<a href="chap42.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a>::<code>flags</code> including
<code>VK_VIDEO_CODING_CONTROL_RESET_BIT_KHR</code>.</p>
</div>
<div class="paragraph">
<p>Video session objects also maintain the
<a href="chap42.html#dpb-state-and-backing-store">state</a> of the DPB.
The number of DPB slots usable with the created video session is specified
in <code>pCreateInfo-&gt;maxDpbSlots</code>, and each slot is initially in the
<a href="chap42.html#dpb-slot-states">inactive state</a>.</p>
</div>
<div class="paragraph">
<p>Each <a href="chap42.html#dpb-slot">DPB slot</a> maintained by the created video session <strong class="purple">can</strong>
refer to a <a href="chap42.html#reference-picture">reference picture</a> representing a video
frame.</p>
</div>
<div id="decode-h264-interlaced-support" class="paragraph">
<p>In addition, if the <code>videoCodecOperation</code> member of the
<a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> structure pointed to by
<code>pCreateInfo-&gt;pVideoProfile</code> is
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code> and the
<code>pictureLayout</code> member of the <a href="chap42.html#VkVideoDecodeH264ProfileInfoKHR">VkVideoDecodeH264ProfileInfoKHR</a>
structure provided in the <a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>::<code>pNext</code> chain is
not <code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_PROGRESSIVE_KHR</code>, then the
created video session supports <em>interlaced</em> frames and each <a href="chap42.html#dpb-slot">DPB
slot</a> maintained by the created video session <strong class="purple">can</strong> instead refer to
separate top field and bottom field <a href="chap42.html#reference-picture">reference pictures</a>
that together <strong class="purple">can</strong> represent a full video frame.
In this case, it is up to the application, driven by the video content,
whether it associates any individual DPB slot with separate top and/or
bottom field pictures or a single picture representing a full frame.</p>
</div>
<div class="paragraph">
<p>The created video session <strong class="purple">can</strong> be used to perform video coding operations
using video frames up to the maximum size specified in
<code>pCreateInfo-&gt;maxCodedExtent</code>.
The minimum frame size allowed is implicitly derived from
<a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>minCodedExtent</code>, as returned by
<a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> for the video profile
specified by <code>pCreateInfo-&gt;pVideoProfile</code>.
Accordingly, the created video session is said to be created with a
<code>minCodedExtent</code> equal to that.</p>
</div>
<div class="paragraph">
<p>In case of video session objects created with a video encode operation,
implementations <strong class="purple">may</strong> return the
<code>VK_ERROR_INVALID_VIDEO_STD_PARAMETERS_KHR</code> error if any of the
specified Video Std parameters do not adhere to the syntactic or semantic
requirements of the used video compression standard, or if values derived
from parameters according to the rules defined by the used video compression
standard do not adhere to the capabilities of the video compression standard
or the implementation.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Applications <strong class="purple">should</strong> not rely on the
<code>VK_ERROR_INVALID_VIDEO_STD_PARAMETERS_KHR</code> error being returned by any
command as a means to verify Video Std parameters, as implementations are
not required to report the error in any specific set of cases.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateVideoSessionKHR-device-parameter" href="chap42.html#VUID-vkCreateVideoSessionKHR-device-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateVideoSessionKHR-pCreateInfo-parameter" href="chap42.html#VUID-vkCreateVideoSessionKHR-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionKHR-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap42.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateVideoSessionKHR-pAllocator-parameter" href="chap42.html#VUID-vkCreateVideoSessionKHR-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionKHR-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateVideoSessionKHR-pVideoSession-parameter" href="chap42.html#VUID-vkCreateVideoSessionKHR-pVideoSession-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionKHR-pVideoSession-parameter</span><br>
 <code>pVideoSession</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap42.html#VkVideoSessionKHR">VkVideoSessionKHR</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_VIDEO_STD_VERSION_NOT_SUPPORTED_KHR</code></p>
</li>
<li>
<p><code>VK_ERROR_INVALID_VIDEO_STD_PARAMETERS_KHR</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap42.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoSessionCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoSessionCreateInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                 <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                     <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                        <span class="n">queueFamilyIndex</span><span class="p">;</span>
    <span class="n">VkVideoSessionCreateFlagsKHR</span>    <span class="n">flags</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoProfileInfoKHR</span><span class="o">*</span>    <span class="n">pVideoProfile</span><span class="p">;</span>
    <span class="n">VkFormat</span>                        <span class="n">pictureFormat</span><span class="p">;</span>
    <span class="n">VkExtent2D</span>                      <span class="n">maxCodedExtent</span><span class="p">;</span>
    <span class="n">VkFormat</span>                        <span class="n">referencePictureFormat</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                        <span class="n">maxDpbSlots</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                        <span class="n">maxActiveReferencePictures</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkExtensionProperties</span><span class="o">*</span>    <span class="n">pStdHeaderVersion</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoSessionCreateInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>queueFamilyIndex</code> is the index of the queue family the created
video session will be used with.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap42.html#VkVideoSessionCreateFlagBitsKHR">VkVideoSessionCreateFlagBitsKHR</a>
specifying creation flags.</p>
</li>
<li>
<p><code>pVideoProfile</code> is a pointer to a <a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>
structure specifying the video profile the created video session will be
used with.</p>
</li>
<li>
<p><code>pictureFormat</code> is the image format the created video session will
be used with.
If <code>pVideoProfile-&gt;videoCodecOperation</code> specifies a decode
operation, then <code>pictureFormat</code> is the image format of
<a href="chap42.html#decode-output-picture">decode output pictures</a> usable with the
created video session.
If <code>pVideoProfile-&gt;videoCodecOperation</code> specifies an encode
operation, then <code>pictureFormat</code> is the image format of
<a href="chap42.html#encode-input-picture">encode input pictures</a> usable with the created
video session.</p>
</li>
<li>
<p><code>maxCodedExtent</code> is the maximum width and height of the coded frames
the created video session will be used with.</p>
</li>
<li>
<p><code>referencePictureFormat</code> is the image format of
<a href="chap42.html#reference-picture">reference pictures</a> stored in the <a href="chap42.html#dpb">DPB</a> the
created video session will be used with.</p>
</li>
<li>
<p><code>maxDpbSlots</code> is the maximum number of <a href="chap42.html#dpb-slot">DPB Slots</a> that
<strong class="purple">can</strong> be used with the created video session.</p>
</li>
<li>
<p><code>maxActiveReferencePictures</code> is the maximum number of
<a href="chap42.html#active-reference-pictures">active reference pictures</a> that <strong class="purple">can</strong> be
used in a single video coding operation using the created video session.</p>
</li>
<li>
<p><code>pStdHeaderVersion</code> is a pointer to a <a href="chap44.html#VkExtensionProperties">VkExtensionProperties</a>
structure requesting the Video Std header version to use for the
<code>videoCodecOperation</code> specified in <code>pVideoProfile</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-protectedMemory-07189" href="chap42.html#VUID-VkVideoSessionCreateInfoKHR-protectedMemory-07189"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-protectedMemory-07189</span><br>

If the <a href="chap45.html#features-protectedMemory"><code>protectedMemory</code></a> feature is
not enabled or if <a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>flags</code> does not
include <code>VK_VIDEO_CAPABILITY_PROTECTED_CONTENT_BIT_KHR</code>, as returned
by <a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> for the video profile
specified by <code>pVideoProfile</code>, then <code>flags</code> <strong class="purple">must</strong> not include
<code>VK_VIDEO_SESSION_CREATE_PROTECTED_CONTENT_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pVideoProfile-04845" href="chap42.html#VUID-VkVideoSessionCreateInfoKHR-pVideoProfile-04845"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pVideoProfile-04845</span><br>

<code>pVideoProfile</code> <strong class="purple">must</strong> be a <a href="chap42.html#video-profile-support">supported video
profile</a></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-maxDpbSlots-04847" href="chap42.html#VUID-VkVideoSessionCreateInfoKHR-maxDpbSlots-04847"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-maxDpbSlots-04847</span><br>

<code>maxDpbSlots</code> <strong class="purple">must</strong> be less than or equal to
<a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>maxDpbSlots</code>, as returned by
<a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> for the video profile
specified by <code>pVideoProfile</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-maxActiveReferencePictures-04849" href="chap42.html#VUID-VkVideoSessionCreateInfoKHR-maxActiveReferencePictures-04849"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-maxActiveReferencePictures-04849</span><br>

<code>maxActiveReferencePictures</code> <strong class="purple">must</strong> be less than or equal to
<a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>maxActiveReferencePictures</code>, as
returned by <a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> for the video
profile specified by <code>pVideoProfile</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-maxDpbSlots-04850" href="chap42.html#VUID-VkVideoSessionCreateInfoKHR-maxDpbSlots-04850"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-maxDpbSlots-04850</span><br>

If either <code>maxDpbSlots</code> or <code>maxActiveReferencePictures</code> is <code>0</code>,
then both <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-maxCodedExtent-04851" href="chap42.html#VUID-VkVideoSessionCreateInfoKHR-maxCodedExtent-04851"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-maxCodedExtent-04851</span><br>

<code>maxCodedExtent</code> <strong class="purple">must</strong> be between
<a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>minCodedExtent</code> and
<a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>maxCodedExtent</code>, inclusive, as
returned by <a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> for the video
profile specified by <code>pVideoProfile</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-referencePictureFormat-04852" href="chap42.html#VUID-VkVideoSessionCreateInfoKHR-referencePictureFormat-04852"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-referencePictureFormat-04852</span><br>

If <code>pVideoProfile-&gt;videoCodecOperation</code> specifies a decode operation
and <code>maxActiveReferencePictures</code> is greater than <code>0</code>, then
<code>referencePictureFormat</code> <strong class="purple">must</strong> be one of the supported decode DPB
formats, as returned by
<a href="chap42.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> in
<a href="chap42.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a>::<code>format</code> when called with the
<code>imageUsage</code> member of its <code>pVideoFormatInfo</code> parameter
containing <code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code>, and with a
<a href="chap42.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a> structure specified in the <code>pNext</code>
chain of its <code>pVideoFormatInfo</code> parameter whose <code>pProfiles</code>
member contains an element matching <code>pVideoProfile</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-referencePictureFormat-06814" href="chap42.html#VUID-VkVideoSessionCreateInfoKHR-referencePictureFormat-06814"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-referencePictureFormat-06814</span><br>

If <code>pVideoProfile-&gt;videoCodecOperation</code> specifies an encode
operation and <code>maxActiveReferencePictures</code> is greater than <code>0</code>, then
<code>referencePictureFormat</code> <strong class="purple">must</strong> be one of the supported decode DPB
formats, as returned by then <code>referencePictureFormat</code> <strong class="purple">must</strong> be one
of the supported encode DPB formats, as returned by
<a href="chap42.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> in
<a href="chap42.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a>::<code>format</code> when called with the
<code>imageUsage</code> member of its <code>pVideoFormatInfo</code> parameter
containing <code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code>, and with a
<a href="chap42.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a> structure specified in the <code>pNext</code>
chain of its <code>pVideoFormatInfo</code> parameter whose <code>pProfiles</code>
member contains an element matching <code>pVideoProfile</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pictureFormat-04853" href="chap42.html#VUID-VkVideoSessionCreateInfoKHR-pictureFormat-04853"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pictureFormat-04853</span><br>

If <code>pVideoProfile-&gt;videoCodecOperation</code> specifies a decode
operation, then <code>pictureFormat</code> <strong class="purple">must</strong> be one of the supported decode
output formats, as returned by
<a href="chap42.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> in
<a href="chap42.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a>::<code>format</code> when called with the
<code>imageUsage</code> member of its <code>pVideoFormatInfo</code> parameter
containing <code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code>, and with a
<a href="chap42.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a> structure specified in the <code>pNext</code>
chain of its <code>pVideoFormatInfo</code> parameter whose <code>pProfiles</code>
member contains an element matching <code>pVideoProfile</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pictureFormat-04854" href="chap42.html#VUID-VkVideoSessionCreateInfoKHR-pictureFormat-04854"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pictureFormat-04854</span><br>

If <code>pVideoProfile-&gt;videoCodecOperation</code> specifies an encode
operation, then <code>pictureFormat</code> <strong class="purple">must</strong> be one of the supported encode
input formats, as returned by
<a href="chap42.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> in
<a href="chap42.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a>::<code>format</code> when called with the
<code>imageUsage</code> member of its <code>pVideoFormatInfo</code> parameter
containing <code>VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code>, and with a
<a href="chap42.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a> structure specified in the <code>pNext</code>
chain of its <code>pVideoFormatInfo</code> parameter whose <code>pProfiles</code>
member contains an element matching <code>pVideoProfile</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pStdHeaderVersion-07190" href="chap42.html#VUID-VkVideoSessionCreateInfoKHR-pStdHeaderVersion-07190"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pStdHeaderVersion-07190</span><br>

<code>pStdHeaderVersion-&gt;extensionName</code> <strong class="purple">must</strong> match
<a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>stdHeaderVersion.extensionName</code>, as
returned by <a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> for the video
profile specified by <code>pVideoProfile</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pStdHeaderVersion-07191" href="chap42.html#VUID-VkVideoSessionCreateInfoKHR-pStdHeaderVersion-07191"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pStdHeaderVersion-07191</span><br>

<code>pStdHeaderVersion-&gt;specVersion</code> <strong class="purple">must</strong> be less than or equal to
<a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>stdHeaderVersion.specVersion</code>, as
returned by <a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> for the video
profile specified by <code>pVideoProfile</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoSessionCreateInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_SESSION_CREATE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pNext-pNext" href="chap42.html#VUID-VkVideoSessionCreateInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-flags-parameter" href="chap42.html#VUID-VkVideoSessionCreateInfoKHR-flags-parameter"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap42.html#VkVideoSessionCreateFlagBitsKHR">VkVideoSessionCreateFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pVideoProfile-parameter" href="chap42.html#VUID-VkVideoSessionCreateInfoKHR-pVideoProfile-parameter"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pVideoProfile-parameter</span><br>
 <code>pVideoProfile</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pictureFormat-parameter" href="chap42.html#VUID-VkVideoSessionCreateInfoKHR-pictureFormat-parameter"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pictureFormat-parameter</span><br>
 <code>pictureFormat</code> <strong class="purple">must</strong> be a valid <a href="chap47.html#VkFormat">VkFormat</a> value</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-referencePictureFormat-parameter" href="chap42.html#VUID-VkVideoSessionCreateInfoKHR-referencePictureFormat-parameter"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-referencePictureFormat-parameter</span><br>
 <code>referencePictureFormat</code> <strong class="purple">must</strong> be a valid <a href="chap47.html#VkFormat">VkFormat</a> value</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pStdHeaderVersion-parameter" href="chap42.html#VUID-VkVideoSessionCreateInfoKHR-pStdHeaderVersion-parameter"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pStdHeaderVersion-parameter</span><br>
 <code>pStdHeaderVersion</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap44.html#VkExtensionProperties">VkExtensionProperties</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in <a href="chap42.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>::<code>flags</code>
are:</p>
</div>
<div id="VkVideoSessionCreateFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoSessionCreateFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_SESSION_CREATE_PROTECTED_CONTENT_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoSessionCreateFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_SESSION_CREATE_PROTECTED_CONTENT_BIT_KHR</code> specifies that
the video session uses protected video content.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoSessionCreateFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoSessionCreateFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoSessionCreateFlagsKHR</code> is a bitmask type for setting a mask of
zero or more <a href="chap42.html#VkVideoSessionCreateFlagBitsKHR">VkVideoSessionCreateFlagBitsKHR</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="video-session-destruction"><a class="anchor" href="chap42.html#video-session-destruction"></a>42.5.2. Destroying a Video Session</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy a video session, call:</p>
</div>
<div id="vkDestroyVideoSessionKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="kt">void</span> <span class="nf">vkDestroyVideoSessionKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkVideoSessionKHR</span>                           <span class="n">videoSession</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the video session.</p>
</li>
<li>
<p><code>videoSession</code> is the video session to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyVideoSessionKHR-videoSession-07192" href="chap42.html#VUID-vkDestroyVideoSessionKHR-videoSession-07192"></a> <span class="vuid">VUID-vkDestroyVideoSessionKHR-videoSession-07192</span><br>

All submitted commands that refer to <code>videoSession</code> <strong class="purple">must</strong> have
completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyVideoSessionKHR-videoSession-07193" href="chap42.html#VUID-vkDestroyVideoSessionKHR-videoSession-07193"></a> <span class="vuid">VUID-vkDestroyVideoSessionKHR-videoSession-07193</span><br>

If <code>VkAllocationCallbacks</code> were provided when <code>videoSession</code> was
created, a compatible set of callbacks <strong class="purple">must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyVideoSessionKHR-videoSession-07194" href="chap42.html#VUID-vkDestroyVideoSessionKHR-videoSession-07194"></a> <span class="vuid">VUID-vkDestroyVideoSessionKHR-videoSession-07194</span><br>

If no <code>VkAllocationCallbacks</code> were provided when <code>videoSession</code>
was created, <code>pAllocator</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyVideoSessionKHR-device-parameter" href="chap42.html#VUID-vkDestroyVideoSessionKHR-device-parameter"></a> <span class="vuid">VUID-vkDestroyVideoSessionKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyVideoSessionKHR-videoSession-parameter" href="chap42.html#VUID-vkDestroyVideoSessionKHR-videoSession-parameter"></a> <span class="vuid">VUID-vkDestroyVideoSessionKHR-videoSession-parameter</span><br>
 If <code>videoSession</code> is not <a href="chap56.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>videoSession</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoSessionKHR">VkVideoSessionKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyVideoSessionKHR-pAllocator-parameter" href="chap42.html#VUID-vkDestroyVideoSessionKHR-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyVideoSessionKHR-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyVideoSessionKHR-videoSession-parent" href="chap42.html#VUID-vkDestroyVideoSessionKHR-videoSession-parent"></a> <span class="vuid">VUID-vkDestroyVideoSessionKHR-videoSession-parent</span><br>
 If <code>videoSession</code> is a valid handle, it <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>videoSession</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="video-session-memory-association"><a class="anchor" href="chap42.html#video-session-memory-association"></a>42.5.3. Video Session Memory Association</h4>
<div class="paragraph">
<p>After creating a video session object, and before the object <strong class="purple">can</strong> be used to
record video coding operations into command buffers using it, the
application <strong class="purple">must</strong> allocate and bind device memory to the video session.
Device memory is allocated separately (see <a href="chap11.html#memory-device">Device Memory</a>) and then
associated with the video session.</p>
</div>
<div class="paragraph">
<p>Video sessions <strong class="purple">may</strong> have multiple memory bindings identified by unique
unsigned integer values.
Appropriate device memory <strong class="purple">must</strong> be bound to each such memory binding before
using the video session to record command buffer commands with it.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for a video session object, call:</p>
</div>
<div id="vkGetVideoSessionMemoryRequirementsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="n">VkResult</span> <span class="nf">vkGetVideoSessionMemoryRequirementsKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkVideoSessionKHR</span>                           <span class="n">videoSession</span><span class="p">,</span>
    <span class="kt">uint32_t</span><span class="o">*</span>                                   <span class="n">pMemoryRequirementsCount</span><span class="p">,</span>
    <span class="n">VkVideoSessionMemoryRequirementsKHR</span><span class="o">*</span>        <span class="n">pMemoryRequirements</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the video session.</p>
</li>
<li>
<p><code>videoSession</code> is the video session to query.</p>
</li>
<li>
<p><code>pMemoryRequirementsCount</code> is a pointer to an integer related to the
number of memory binding requirements available or queried, as described
below.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is <code>NULL</code> or a pointer to an array of
<a href="chap42.html#VkVideoSessionMemoryRequirementsKHR">VkVideoSessionMemoryRequirementsKHR</a> structures in which the memory
binding requirements of the video session are returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>pMemoryRequirements</code> is <code>NULL</code>, then the number of memory bindings
required for the video session is returned in
<code>pMemoryRequirementsCount</code>.
Otherwise, <code>pMemoryRequirementsCount</code> <strong class="purple">must</strong> point to a variable set by
the user with the number of elements in the <code>pMemoryRequirements</code> array,
and on return the variable is overwritten with the number of memory binding
requirements actually written to <code>pMemoryRequirements</code>.
If <code>pMemoryRequirementsCount</code> is less than the number of memory bindings
required for the video session, then at most <code>pMemoryRequirementsCount</code>
elements will be written to <code>pMemoryRequirements</code>, and
<code>VK_INCOMPLETE</code> will be returned, instead of <code>VK_SUCCESS</code>, to
indicate that not all required memory binding requirements were returned.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetVideoSessionMemoryRequirementsKHR-device-parameter" href="chap42.html#VUID-vkGetVideoSessionMemoryRequirementsKHR-device-parameter"></a> <span class="vuid">VUID-vkGetVideoSessionMemoryRequirementsKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetVideoSessionMemoryRequirementsKHR-videoSession-parameter" href="chap42.html#VUID-vkGetVideoSessionMemoryRequirementsKHR-videoSession-parameter"></a> <span class="vuid">VUID-vkGetVideoSessionMemoryRequirementsKHR-videoSession-parameter</span><br>
 <code>videoSession</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoSessionKHR">VkVideoSessionKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetVideoSessionMemoryRequirementsKHR-pMemoryRequirementsCount-parameter" href="chap42.html#VUID-vkGetVideoSessionMemoryRequirementsKHR-pMemoryRequirementsCount-parameter"></a> <span class="vuid">VUID-vkGetVideoSessionMemoryRequirementsKHR-pMemoryRequirementsCount-parameter</span><br>
 <code>pMemoryRequirementsCount</code> <strong class="purple">must</strong> be a valid pointer to a <code>uint32_t</code> value</p>
</li>
<li>
<p><a id="VUID-vkGetVideoSessionMemoryRequirementsKHR-pMemoryRequirements-parameter" href="chap42.html#VUID-vkGetVideoSessionMemoryRequirementsKHR-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetVideoSessionMemoryRequirementsKHR-pMemoryRequirements-parameter</span><br>
 If the value referenced by <code>pMemoryRequirementsCount</code> is not <code>0</code>, and <code>pMemoryRequirements</code> is not <code>NULL</code>, <code>pMemoryRequirements</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>pMemoryRequirementsCount</code> <a href="chap42.html#VkVideoSessionMemoryRequirementsKHR">VkVideoSessionMemoryRequirementsKHR</a> structures</p>
</li>
<li>
<p><a id="VUID-vkGetVideoSessionMemoryRequirementsKHR-videoSession-parent" href="chap42.html#VUID-vkGetVideoSessionMemoryRequirementsKHR-videoSession-parent"></a> <span class="vuid">VUID-vkGetVideoSessionMemoryRequirementsKHR-videoSession-parent</span><br>
 <code>videoSession</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
<li>
<p><code>VK_INCOMPLETE</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoSessionMemoryRequirementsKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoSessionMemoryRequirementsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoSessionMemoryRequirementsKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>         <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                   <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                <span class="n">memoryBindIndex</span><span class="p">;</span>
    <span class="n">VkMemoryRequirements</span>    <span class="n">memoryRequirements</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoSessionMemoryRequirementsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>memoryBindIndex</code> is the index of the memory binding.</p>
</li>
<li>
<p><code>memoryRequirements</code> is a <a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure in
which the requested memory binding requirements for the binding index
specified by <code>memoryBindIndex</code> are returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoSessionMemoryRequirementsKHR-sType-sType" href="chap42.html#VUID-VkVideoSessionMemoryRequirementsKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoSessionMemoryRequirementsKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_SESSION_MEMORY_REQUIREMENTS_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionMemoryRequirementsKHR-pNext-pNext" href="chap42.html#VUID-VkVideoSessionMemoryRequirementsKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoSessionMemoryRequirementsKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To attach memory to a video session object, call:</p>
</div>
<div id="vkBindVideoSessionMemoryKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="n">VkResult</span> <span class="nf">vkBindVideoSessionMemoryKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkVideoSessionKHR</span>                           <span class="n">videoSession</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">bindSessionMemoryInfoCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBindVideoSessionMemoryInfoKHR</span><span class="o">*</span>      <span class="n">pBindSessionMemoryInfos</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the video session.</p>
</li>
<li>
<p><code>videoSession</code> is the video session to be bound with device memory.</p>
</li>
<li>
<p><code>bindSessionMemoryInfoCount</code> is the number of elements in
<code>pBindSessionMemoryInfos</code>.</p>
</li>
<li>
<p><code>pBindSessionMemoryInfos</code> is a pointer to an array of
<code>bindSessionMemoryInfoCount</code> <a href="chap42.html#VkBindVideoSessionMemoryInfoKHR">VkBindVideoSessionMemoryInfoKHR</a>
structures specifying memory regions to be bound to specific memory
bindings of the video session.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The valid usage statements below refer to the <a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a>
structure corresponding to a specific element of
<code>pBindSessionMemoryInfos</code>, which is defined as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the <code>memoryBindIndex</code> member of the element of
<code>pBindSessionMemoryInfos</code> in question matches the
<code>memoryBindIndex</code> member of one of the elements returned in
<code>pMemoryRequirements</code> when
<a href="chap42.html#vkGetVideoSessionMemoryRequirementsKHR">vkGetVideoSessionMemoryRequirementsKHR</a> is called with the same
<code>videoSession</code> and with <code>pMemoryRequirementsCount</code> equal to
<code>bindSessionMemoryInfoCount</code>, then the <code>memoryRequirements</code>
member of that element of <code>pMemoryRequirements</code> is the
<a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure corresponding to the element of
<code>pBindSessionMemoryInfos</code> in question.</p>
</li>
<li>
<p>Otherwise the element of <code>pBindSessionMemoryInfos</code> in question is
said to not have a corresponding <a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindVideoSessionMemoryKHR-videoSession-07195" href="chap42.html#VUID-vkBindVideoSessionMemoryKHR-videoSession-07195"></a> <span class="vuid">VUID-vkBindVideoSessionMemoryKHR-videoSession-07195</span><br>

The memory binding of <code>videoSession</code> identified by the
<code>memoryBindIndex</code> member of any element of
<code>pBindSessionMemoryInfos</code> <strong class="purple">must</strong> not already be backed by a memory
object</p>
</li>
<li>
<p><a id="VUID-vkBindVideoSessionMemoryKHR-memoryBindIndex-07196" href="chap42.html#VUID-vkBindVideoSessionMemoryKHR-memoryBindIndex-07196"></a> <span class="vuid">VUID-vkBindVideoSessionMemoryKHR-memoryBindIndex-07196</span><br>

The <code>memoryBindIndex</code> member of each element of
<code>pBindSessionMemoryInfos</code> <strong class="purple">must</strong> be unique within
<code>pBindSessionMemoryInfos</code></p>
</li>
<li>
<p><a id="VUID-vkBindVideoSessionMemoryKHR-pBindSessionMemoryInfos-07197" href="chap42.html#VUID-vkBindVideoSessionMemoryKHR-pBindSessionMemoryInfos-07197"></a> <span class="vuid">VUID-vkBindVideoSessionMemoryKHR-pBindSessionMemoryInfos-07197</span><br>

Each element of <code>pBindSessionMemoryInfos</code> <strong class="purple">must</strong> have a corresponding
<a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure</p>
</li>
<li>
<p><a id="VUID-vkBindVideoSessionMemoryKHR-pBindSessionMemoryInfos-07198" href="chap42.html#VUID-vkBindVideoSessionMemoryKHR-pBindSessionMemoryInfos-07198"></a> <span class="vuid">VUID-vkBindVideoSessionMemoryKHR-pBindSessionMemoryInfos-07198</span><br>

If an element of <code>pBindSessionMemoryInfos</code> has a corresponding
<a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure, then the <code>memory</code> member of
that element of <code>pBindSessionMemoryInfos</code> <strong class="purple">must</strong> have been allocated
using one of the memory types allowed in the <code>memoryTypeBits</code> member
of the corresponding <a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure</p>
</li>
<li>
<p><a id="VUID-vkBindVideoSessionMemoryKHR-pBindSessionMemoryInfos-07199" href="chap42.html#VUID-vkBindVideoSessionMemoryKHR-pBindSessionMemoryInfos-07199"></a> <span class="vuid">VUID-vkBindVideoSessionMemoryKHR-pBindSessionMemoryInfos-07199</span><br>

If an element of <code>pBindSessionMemoryInfos</code> has a corresponding
<a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure, then the <code>memoryOffset</code> member
of that element of <code>pBindSessionMemoryInfos</code> <strong class="purple">must</strong> be an integer
multiple of the <code>alignment</code> member of the corresponding
<a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure</p>
</li>
<li>
<p><a id="VUID-vkBindVideoSessionMemoryKHR-pBindSessionMemoryInfos-07200" href="chap42.html#VUID-vkBindVideoSessionMemoryKHR-pBindSessionMemoryInfos-07200"></a> <span class="vuid">VUID-vkBindVideoSessionMemoryKHR-pBindSessionMemoryInfos-07200</span><br>

If an element of <code>pBindSessionMemoryInfos</code> has a corresponding
<a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure, then the <code>memorySize</code> member
of that element of <code>pBindSessionMemoryInfos</code> <strong class="purple">must</strong> equal the
<code>size</code> member of the corresponding <a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a>
structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindVideoSessionMemoryKHR-device-parameter" href="chap42.html#VUID-vkBindVideoSessionMemoryKHR-device-parameter"></a> <span class="vuid">VUID-vkBindVideoSessionMemoryKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindVideoSessionMemoryKHR-videoSession-parameter" href="chap42.html#VUID-vkBindVideoSessionMemoryKHR-videoSession-parameter"></a> <span class="vuid">VUID-vkBindVideoSessionMemoryKHR-videoSession-parameter</span><br>
 <code>videoSession</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoSessionKHR">VkVideoSessionKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindVideoSessionMemoryKHR-pBindSessionMemoryInfos-parameter" href="chap42.html#VUID-vkBindVideoSessionMemoryKHR-pBindSessionMemoryInfos-parameter"></a> <span class="vuid">VUID-vkBindVideoSessionMemoryKHR-pBindSessionMemoryInfos-parameter</span><br>
 <code>pBindSessionMemoryInfos</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>bindSessionMemoryInfoCount</code> valid <a href="chap42.html#VkBindVideoSessionMemoryInfoKHR">VkBindVideoSessionMemoryInfoKHR</a> structures</p>
</li>
<li>
<p><a id="VUID-vkBindVideoSessionMemoryKHR-bindSessionMemoryInfoCount-arraylength" href="chap42.html#VUID-vkBindVideoSessionMemoryKHR-bindSessionMemoryInfoCount-arraylength"></a> <span class="vuid">VUID-vkBindVideoSessionMemoryKHR-bindSessionMemoryInfoCount-arraylength</span><br>
 <code>bindSessionMemoryInfoCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkBindVideoSessionMemoryKHR-videoSession-parent" href="chap42.html#VUID-vkBindVideoSessionMemoryKHR-videoSession-parent"></a> <span class="vuid">VUID-vkBindVideoSessionMemoryKHR-videoSession-parent</span><br>
 <code>videoSession</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>videoSession</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBindVideoSessionMemoryInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkBindVideoSessionMemoryInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBindVideoSessionMemoryInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">memoryBindIndex</span><span class="p">;</span>
    <span class="n">VkDeviceMemory</span>     <span class="n">memory</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">memoryOffset</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">memorySize</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBindVideoSessionMemoryInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>memoryBindIndex</code> is the memory binding index to bind memory to.</p>
</li>
<li>
<p><code>memory</code> is the allocated device memory to be bound to the video
session’s memory binding with index <code>memoryBindIndex</code>.</p>
</li>
<li>
<p><code>memoryOffset</code> is the start offset of the region of <code>memory</code>
which is to be bound.</p>
</li>
<li>
<p><code>memorySize</code> is the size in bytes of the region of <code>memory</code>,
starting from <code>memoryOffset</code> bytes, to be bound.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindVideoSessionMemoryInfoKHR-memoryOffset-07201" href="chap42.html#VUID-VkBindVideoSessionMemoryInfoKHR-memoryOffset-07201"></a> <span class="vuid">VUID-VkBindVideoSessionMemoryInfoKHR-memoryOffset-07201</span><br>

<code>memoryOffset</code> <strong class="purple">must</strong> be less than the size of <code>memory</code></p>
</li>
<li>
<p><a id="VUID-VkBindVideoSessionMemoryInfoKHR-memorySize-07202" href="chap42.html#VUID-VkBindVideoSessionMemoryInfoKHR-memorySize-07202"></a> <span class="vuid">VUID-VkBindVideoSessionMemoryInfoKHR-memorySize-07202</span><br>

<code>memorySize</code> <strong class="purple">must</strong> be less than or equal to the size of <code>memory</code>
minus <code>memoryOffset</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindVideoSessionMemoryInfoKHR-sType-sType" href="chap42.html#VUID-VkBindVideoSessionMemoryInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkBindVideoSessionMemoryInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BIND_VIDEO_SESSION_MEMORY_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkBindVideoSessionMemoryInfoKHR-pNext-pNext" href="chap42.html#VUID-VkBindVideoSessionMemoryInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkBindVideoSessionMemoryInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkBindVideoSessionMemoryInfoKHR-memory-parameter" href="chap42.html#VUID-VkBindVideoSessionMemoryInfoKHR-memory-parameter"></a> <span class="vuid">VUID-VkBindVideoSessionMemoryInfoKHR-memory-parameter</span><br>
 <code>memory</code> <strong class="purple">must</strong> be a valid <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="video-profile-compatibility"><a class="anchor" href="chap42.html#video-profile-compatibility"></a>42.6. Video Profile Compatibility</h3>
<div class="paragraph">
<p>Resources and query pools used with a particular video session <strong class="purple">must</strong> be
compatible with the <a href="chap42.html#video-profiles">video profile</a> the video session was
created with.</p>
</div>
<div class="paragraph">
<p>A <a href="chap12.html#VkBuffer">VkBuffer</a> is compatible with a video profile if it was created with
the <a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>pNext</code> chain including a
<a href="chap42.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a> structure with its <code>pProfiles</code> member
containing an element matching the <a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> structure
chain describing the video profile, and
<a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>usage</code> including at least one bit specific to
video coding usage.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_BUFFER_USAGE_VIDEO_DECODE_SRC_BIT_KHR</code></p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_VIDEO_DECODE_DST_BIT_KHR</code></p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code></p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_VIDEO_ENCODE_DST_BIT_KHR</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A <a href="chap12.html#VkImage">VkImage</a> is compatible with a video profile if it was created with
the <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> chain including a
<a href="chap42.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a> structure with its <code>pProfiles</code> member
containing an element matching the <a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> structure
chain describing the video profile, and <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code>
including at least one bit specific to video coding usage.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_DECODE_SRC_BIT_KHR</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_ENCODE_DST_BIT_KHR</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A <a href="chap12.html#VkImageView">VkImageView</a> is compatible with a video profile if the <a href="chap12.html#VkImage">VkImage</a>
it was created from is also compatible with that video profile.</p>
</div>
<div class="paragraph">
<p>A <a href="chap18.html#VkQueryPool">VkQueryPool</a> is compatible with a video profile if it was created
with the <a href="chap18.html#VkQueryPoolCreateInfo">VkQueryPoolCreateInfo</a>::<code>pNext</code> chain including a
<a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> structure chain describing the same video
profile, and <a href="chap18.html#VkQueryPoolCreateInfo">VkQueryPoolCreateInfo</a>::<code>queryType</code> having one of the
following values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_QUERY_TYPE_RESULT_STATUS_ONLY_KHR</code></p>
</li>
<li>
<p><code>VK_QUERY_TYPE_VIDEO_ENCODE_FEEDBACK_KHR</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="video-session-parameters"><a class="anchor" href="chap42.html#video-session-parameters"></a>42.7. Video Session Parameters</h3>
<div class="paragraph">
<p>Video session parameters objects <strong class="purple">can</strong> store preprocessed codec-specific
parameters used with a compatible video session, and enable reducing the
number of parameters needed to be provided and processed by the
implementation while recording video coding operations into command buffers.</p>
</div>
<div class="paragraph">
<p>Parameters stored in such objects are <em>immutable</em> to facilitate the
concurrent use of the stored parameters in multiple threads.
At the same time, new parameters <strong class="purple">can</strong> be added to existing objects using the
<a href="chap42.html#vkUpdateVideoSessionParametersKHR">vkUpdateVideoSessionParametersKHR</a> command.</p>
</div>
<div class="paragraph">
<p>In order to support concurrent use of the stored immutable parameters while
also allowing the video session parameters object to be extended with new
parameters, each video session parameters object maintains an <em>update
sequence counter</em> that is set to <code>0</code> at object creation time and <strong class="purple">must</strong> be
incremented by each subsequent update operation.</p>
</div>
<div class="paragraph">
<p>Certain video sequences that adhere to particular video compression
standards permit updating previously supplied parameters.
If a parameter update is necessary, the application has the following
options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Cache the set of parameters on the application side and create a new
video session parameters object adding all the parameters with
appropriate changes, as necessary; or</p>
</li>
<li>
<p>Create a new video session parameters object providing only the updated
parameters and the previously used object as the template, which ensures
that parameters not specified at creation time will be copied unmodified
from the template object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The actual types of parameters that <strong class="purple">can</strong> be stored and the capacity for
individual parameter types, and the methods of initializing, updating, and
referring to individual parameters are specific to the video codec operation
the video session parameters object was created with.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For <code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code> these are defined
in the <a href="chap42.html#decode-h264-parameter-sets">H.264 Decode Parameter Sets</a>
section.</p>
</li>
<li>
<p>For <code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code> these are defined
in the <a href="chap42.html#decode-h265-parameter-sets">H.265 Decode Parameter Sets</a>
section.</p>
</li>
</ul>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Video session parameters are represented by
<code>VkVideoSessionParametersKHR</code> handles:</p>
</div>
<div id="VkVideoSessionParametersKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="n">VK_DEFINE_NON_DISPATCHABLE_HANDLE</span><span class="p">(</span><span class="n">VkVideoSessionParametersKHR</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="creating-video-session-parameters"><a class="anchor" href="chap42.html#creating-video-session-parameters"></a>42.7.1. Creating Video Session Parameters</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create a video session parameters object, call:</p>
</div>
<div id="vkCreateVideoSessionParametersKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="n">VkResult</span> <span class="nf">vkCreateVideoSessionParametersKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkVideoSessionParametersCreateInfoKHR</span><span class="o">*</span> <span class="n">pCreateInfo</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">,</span>
    <span class="n">VkVideoSessionParametersKHR</span><span class="o">*</span>                <span class="n">pVideoSessionParameters</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the video session
parameters object.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to
<a href="chap42.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a> structure containing
parameters to be used to create the video session parameters object.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pVideoSessionParameters</code> is a pointer to a
<a href="chap42.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> handle in which the resulting video
session parameters object is returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The resulting video session parameters object is said to be created with the
video codec operation <code>pCreateInfo-&gt;videoSession</code> was created with.</p>
</div>
<div class="paragraph">
<p>If <code>pCreateInfo-&gt;videoSessionParametersTemplate</code> is not
<code>VK_NULL_HANDLE</code>, then it will be used as a template for constructing
the new video session parameters object.
This happens by first adding any parameters according to the additional
creation parameters provided in the <code>pCreateInfo-&gt;pNext</code> chain, followed
by adding any parameters from the template object that have a key that does
not match the key of any of the already added parameters.</p>
</div>
<div class="paragraph">
<p>If <code>pCreateInfo-&gt;videoSession</code> was created with the video codec
operation <code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>, then the
created video session parameters object will initially contain the following
sets of parameter entries:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>StdVideoH264SequenceParameterSet</code> structures representing
<a href="chap42.html#decode-h264-sps">H.264 SPS</a> entries, as follows:</p>
<div class="ulist">
<ul>
<li>
<p>If the <code>pParametersAddInfo</code> member of the
<a href="chap42.html#VkVideoDecodeH264SessionParametersCreateInfoKHR">VkVideoDecodeH264SessionParametersCreateInfoKHR</a> structure
provided in the <code>pCreateInfo-&gt;pNext</code> chain is not <code>NULL</code>, then the
set of <code>StdVideoH264SequenceParameterSet</code> entries specified in
<code>pParametersAddInfo-&gt;pStdSPSs</code> are added first;</p>
</li>
<li>
<p>If <code>pCreateInfo-&gt;videoSessionParametersTemplate</code> is not
<code>VK_NULL_HANDLE</code>, then each <code>StdVideoH264SequenceParameterSet</code>
entry stored in it is copied to the created video session parameters
object if the created object does not already contain such an entry
with the same <code>seq_parameter_set_id</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>StdVideoH264PictureParameterSet</code> structures representing
<a href="chap42.html#decode-h264-pps">H.264 PPS</a> entries, as follows:</p>
<div class="ulist">
<ul>
<li>
<p>If the <code>pParametersAddInfo</code> member of the
<a href="chap42.html#VkVideoDecodeH264SessionParametersCreateInfoKHR">VkVideoDecodeH264SessionParametersCreateInfoKHR</a> structure
provided in the <code>pCreateInfo-&gt;pNext</code> chain is not <code>NULL</code>, then the
set of <code>StdVideoH264PictureParameterSet</code> entries specified in
<code>pParametersAddInfo-&gt;pStdPPSs</code> are added first;</p>
</li>
<li>
<p>If <code>pCreateInfo-&gt;videoSessionParametersTemplate</code> is not
<code>VK_NULL_HANDLE</code>, then each <code>StdVideoH264PictureParameterSet</code>
entry stored in it is copied to the created video session parameters
object if the created object does not already contain such an entry
with the same <code>seq_parameter_set_id</code> and
<code>pic_parameter_set_id</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>pCreateInfo-&gt;videoSession</code> was created with the video codec
operation <code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then the
created video session parameters object will initially contain the following
sets of parameter entries:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>StdVideoH265VideoParameterSet</code> structures representing
<a href="chap42.html#decode-h265-vps">H.264 VPS</a> entries, as follows:</p>
<div class="ulist">
<ul>
<li>
<p>If the <code>pParametersAddInfo</code> member of the
<a href="chap42.html#VkVideoDecodeH265SessionParametersCreateInfoKHR">VkVideoDecodeH265SessionParametersCreateInfoKHR</a> structure
provided in the <code>pCreateInfo-&gt;pNext</code> chain is not <code>NULL</code>, then the
set of <code>StdVideoH265VideoParameterSet</code> entries specified in
<code>pParametersAddInfo-&gt;pStdVPSs</code> are added first;</p>
</li>
<li>
<p>If <code>pCreateInfo-&gt;videoSessionParametersTemplate</code> is not
<code>VK_NULL_HANDLE</code>, then each <code>StdVideoH265VideoParameterSet</code>
entry stored in it is copied to the created video session parameters
object if the created object does not already contain such an entry
with the same <code>vps_video_parameter_set_id</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>StdVideoH265SequenceParameterSet</code> structures representing
<a href="chap42.html#decode-h265-sps">H.265 SPS</a> entries, as follows:</p>
<div class="ulist">
<ul>
<li>
<p>If the <code>pParametersAddInfo</code> member of the
<a href="chap42.html#VkVideoDecodeH265SessionParametersCreateInfoKHR">VkVideoDecodeH265SessionParametersCreateInfoKHR</a> structure
provided in the <code>pCreateInfo-&gt;pNext</code> chain is not <code>NULL</code>, then the
set of <code>StdVideoH265SequenceParameterSet</code> entries specified in
<code>pParametersAddInfo-&gt;pStdSPSs</code> are added first;</p>
</li>
<li>
<p>If <code>pCreateInfo-&gt;videoSessionParametersTemplate</code> is not
<code>VK_NULL_HANDLE</code>, then each <code>StdVideoH265SequenceParameterSet</code>
entry stored in it is copied to the created video session parameters
object if the created object does not already contain such an entry
with the same <code>sps_video_parameter_set_id</code> and
<code>sps_seq_parameter_set_id</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>StdVideoH265PictureParameterSet</code> structures representing
<a href="chap42.html#decode-h265-pps">H.265 PPS</a> entries, as follows:</p>
<div class="ulist">
<ul>
<li>
<p>If the <code>pParametersAddInfo</code> member of the
<a href="chap42.html#VkVideoDecodeH265SessionParametersCreateInfoKHR">VkVideoDecodeH265SessionParametersCreateInfoKHR</a> structure
provided in the <code>pCreateInfo-&gt;pNext</code> chain is not <code>NULL</code>, then the
set of <code>StdVideoH265PictureParameterSet</code> entries specified in
<code>pParametersAddInfo-&gt;pStdPPSs</code> are added first;</p>
</li>
<li>
<p>If <code>pCreateInfo-&gt;videoSessionParametersTemplate</code> is not
<code>VK_NULL_HANDLE</code>, then each <code>StdVideoH265PictureParameterSet</code>
entry stored in it is copied to the created video session parameters
object if the created object does not already contain such an entry
with the same <code>sps_video_parameter_set_id</code>,
<code>pps_seq_parameter_set_id</code>, and <code>pps_pic_parameter_set_id</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>In case of video session parameters objects created with a video encode
operation, implementations <strong class="purple">may</strong> return the
<code>VK_ERROR_INVALID_VIDEO_STD_PARAMETERS_KHR</code> error if any of the
specified Video Std parameters do not adhere to the syntactic or semantic
requirements of the used video compression standard, or if values derived
from parameters according to the rules defined by the used video compression
standard do not adhere to the capabilities of the video compression standard
or the implementation.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Applications <strong class="purple">should</strong> not rely on the
<code>VK_ERROR_INVALID_VIDEO_STD_PARAMETERS_KHR</code> error being returned by any
command as a means to verify Video Std parameters, as implementations are
not required to report the error in any specific set of cases.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateVideoSessionParametersKHR-device-parameter" href="chap42.html#VUID-vkCreateVideoSessionParametersKHR-device-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionParametersKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateVideoSessionParametersKHR-pCreateInfo-parameter" href="chap42.html#VUID-vkCreateVideoSessionParametersKHR-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionParametersKHR-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap42.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateVideoSessionParametersKHR-pAllocator-parameter" href="chap42.html#VUID-vkCreateVideoSessionParametersKHR-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionParametersKHR-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateVideoSessionParametersKHR-pVideoSessionParameters-parameter" href="chap42.html#VUID-vkCreateVideoSessionParametersKHR-pVideoSessionParameters-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionParametersKHR-pVideoSessionParameters-parameter</span><br>
 <code>pVideoSessionParameters</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap42.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_INVALID_VIDEO_STD_PARAMETERS_KHR</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoSessionParametersCreateInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoSessionParametersCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoSessionParametersCreateInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                           <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                               <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoSessionParametersCreateFlagsKHR</span>    <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkVideoSessionParametersKHR</span>               <span class="n">videoSessionParametersTemplate</span><span class="p">;</span>
    <span class="n">VkVideoSessionKHR</span>                         <span class="n">videoSession</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoSessionParametersCreateInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
<li>
<p><code>videoSessionParametersTemplate</code> is <code>VK_NULL_HANDLE</code> or a valid
handle to a <a href="chap42.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object used as a template
for constructing the new video session parameters object.</p>
</li>
<li>
<p><code>videoSession</code> is the video session object against which the video
session parameters object is going to be created.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Limiting values are defined below that are referenced by the relevant valid
usage statements of this structure.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <code>videoSession</code> was created with the codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>, then let
<code>StdVideoH264SequenceParameterSet spsAddList[]</code> be the list of
<a href="chap42.html#decode-h264-sps">H.264 SPS</a> entries to add to the created video
session parameters object, defined as follows:</p>
<div class="ulist">
<ul>
<li>
<p>If the <code>pParametersAddInfo</code> member of the
<a href="chap42.html#VkVideoDecodeH264SessionParametersCreateInfoKHR">VkVideoDecodeH264SessionParametersCreateInfoKHR</a> structure
provided in the <code>pNext</code> chain is not <code>NULL</code>, then the set of
<code>StdVideoH264SequenceParameterSet</code> entries specified in
<code>pParametersAddInfo-&gt;pStdSPSs</code> are added to <code>spsAddList</code>;</p>
</li>
<li>
<p>If <code>videoSessionParametersTemplate</code> is not <code>VK_NULL_HANDLE</code>,
then each <code>StdVideoH264SequenceParameterSet</code> entry stored in it with
<code>seq_parameter_set_id</code> not matching any of the entries already in
<code>spsAddList</code> is added to <code>spsAddList</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If <code>videoSession</code> was created with the codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>, then let
<code>StdVideoH264PictureParameterSet ppsAddList[]</code> be the list of
<a href="chap42.html#decode-h264-pps">H.264 PPS</a> entries to add to the created video
session parameters object, defined as follows:</p>
<div class="ulist">
<ul>
<li>
<p>If the <code>pParametersAddInfo</code> member of the
<a href="chap42.html#VkVideoDecodeH264SessionParametersCreateInfoKHR">VkVideoDecodeH264SessionParametersCreateInfoKHR</a> structure
provided in the <code>pNext</code> chain is not <code>NULL</code>, then the set of
<code>StdVideoH264PictureParameterSet</code> entries specified in
<code>pParametersAddInfo-&gt;pStdPPSs</code> are added to <code>ppsAddList</code>;</p>
</li>
<li>
<p>If <code>videoSessionParametersTemplate</code> is not <code>VK_NULL_HANDLE</code>,
then each <code>StdVideoH264PictureParameterSet</code> entry stored in it with
<code>seq_parameter_set_id</code> or <code>pic_parameter_set_id</code> not matching
any of the entries already in <code>ppsAddList</code> is added to
<code>ppsAddList</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If <code>videoSession</code> was created with the codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then let
<code>StdVideoH265VideoParameterSet vpsAddList[]</code> be the list of
<a href="chap42.html#decode-h265-vps">H.265 VPS</a> entries to add to the created video
session parameters object, defined as follows:</p>
<div class="ulist">
<ul>
<li>
<p>If the <code>pParametersAddInfo</code> member of the
<a href="chap42.html#VkVideoDecodeH265SessionParametersCreateInfoKHR">VkVideoDecodeH265SessionParametersCreateInfoKHR</a> structure
provided in the <code>pNext</code> chain is not <code>NULL</code>, then the set of
<code>StdVideoH265VideoParameterSet</code> entries specified in
<code>pParametersAddInfo-&gt;pStdVPSs</code> are added to <code>vpsAddList</code>;</p>
</li>
<li>
<p>If <code>videoSessionParametersTemplate</code> is not <code>VK_NULL_HANDLE</code>,
then each <code>StdVideoH265VideoParameterSet</code> entry stored in it with
<code>vps_video_parameter_set_id</code> not matching any of the entries
already in <code>vpsAddList</code> is added to <code>vpsAddList</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If <code>videoSession</code> was created with the codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then let
<code>StdVideoH265SequenceParameterSet spsAddList[]</code> be the list of
<a href="chap42.html#decode-h265-sps">H.265 SPS</a> entries to add to the created video
session parameters object, defined as follows:</p>
<div class="ulist">
<ul>
<li>
<p>If the <code>pParametersAddInfo</code> member of the
<a href="chap42.html#VkVideoDecodeH265SessionParametersCreateInfoKHR">VkVideoDecodeH265SessionParametersCreateInfoKHR</a> structure
provided in the <code>pNext</code> chain is not <code>NULL</code>, then the set of
<code>StdVideoH265SequenceParameterSet</code> entries specified in
<code>pParametersAddInfo-&gt;pStdSPSs</code> are added to <code>spsAddList</code>;</p>
</li>
<li>
<p>If <code>videoSessionParametersTemplate</code> is not <code>VK_NULL_HANDLE</code>,
then each <code>StdVideoH265SequenceParameterSet</code> entry stored in it with
<code>sps_video_parameter_set_id</code> or <code>sps_seq_parameter_set_id</code> not
matching any of the entries already in <code>spsAddList</code> is added to
<code>spsAddList</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If <code>videoSession</code> was created with the codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then let
<code>StdVideoH265PictureParameterSet ppsAddList[]</code> be the list of
<a href="chap42.html#decode-h265-pps">H.265 PPS</a> entries to add to the created video
session parameters object, defined as follows:</p>
<div class="ulist">
<ul>
<li>
<p>If the <code>pParametersAddInfo</code> member of the
<a href="chap42.html#VkVideoDecodeH265SessionParametersCreateInfoKHR">VkVideoDecodeH265SessionParametersCreateInfoKHR</a> structure
provided in the <code>pNext</code> chain is not <code>NULL</code>, then the set of
<code>StdVideoH265PictureParameterSet</code> entries specified in
<code>pParametersAddInfo-&gt;pStdPPSs</code> are added to <code>ppsAddList</code>;</p>
</li>
<li>
<p>If <code>videoSessionParametersTemplate</code> is not <code>VK_NULL_HANDLE</code>,
then each <code>StdVideoH265PictureParameterSet</code> entry stored in it with
<code>sps_video_parameter_set_id</code>, <code>pps_seq_parameter_set_id</code>, or
<code>pps_pic_parameter_set_id</code> not matching any of the entries already
in <code>ppsAddList</code> is added to <code>ppsAddList</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-04855" href="chap42.html#VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-04855"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-04855</span><br>

If <code>videoSessionParametersTemplate</code> represents a valid handle, it
<strong class="purple">must</strong> have been created against <code>videoSession</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07203" href="chap42.html#VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07203"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07203</span><br>

If <code>videoSession</code> was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>, then the <code>pNext</code>
chain <strong class="purple">must</strong> include a
<a href="chap42.html#VkVideoDecodeH264SessionParametersCreateInfoKHR">VkVideoDecodeH264SessionParametersCreateInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07204" href="chap42.html#VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07204"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07204</span><br>

If <code>videoSession</code> was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>, then the number of
elements of <code>spsAddList</code> <strong class="purple">must</strong> be less than or equal to the
<code>maxStdSPSCount</code> specified in the
<a href="chap42.html#VkVideoDecodeH264SessionParametersCreateInfoKHR">VkVideoDecodeH264SessionParametersCreateInfoKHR</a> structure included
in the <code>pNext</code> chain</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07205" href="chap42.html#VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07205"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07205</span><br>

If <code>videoSession</code> was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>, then the number of
elements of <code>ppsAddList</code> <strong class="purple">must</strong> be less than or equal to the
<code>maxStdPPSCount</code> specified in the
<a href="chap42.html#VkVideoDecodeH264SessionParametersCreateInfoKHR">VkVideoDecodeH264SessionParametersCreateInfoKHR</a> structure included
in the <code>pNext</code> chain</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07206" href="chap42.html#VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07206"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07206</span><br>

If <code>videoSession</code> was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then the <code>pNext</code>
chain <strong class="purple">must</strong> include a
<a href="chap42.html#VkVideoDecodeH265SessionParametersCreateInfoKHR">VkVideoDecodeH265SessionParametersCreateInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07207" href="chap42.html#VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07207"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07207</span><br>

If <code>videoSession</code> was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then the number of
elements of <code>vpsAddList</code> <strong class="purple">must</strong> be less than or equal to the
<code>maxStdVPSCount</code> specified in the
<a href="chap42.html#VkVideoDecodeH265SessionParametersCreateInfoKHR">VkVideoDecodeH265SessionParametersCreateInfoKHR</a> structure included
in the <code>pNext</code> chain</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07208" href="chap42.html#VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07208"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07208</span><br>

If <code>videoSession</code> was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then the number of
elements of <code>spsAddList</code> <strong class="purple">must</strong> be less than or equal to the
<code>maxStdSPSCount</code> specified in the
<a href="chap42.html#VkVideoDecodeH265SessionParametersCreateInfoKHR">VkVideoDecodeH265SessionParametersCreateInfoKHR</a> structure included
in the <code>pNext</code> chain</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07209" href="chap42.html#VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07209"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07209</span><br>

If <code>videoSession</code> was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then the number of
elements of <code>ppsAddList</code> <strong class="purple">must</strong> be less than or equal to the
<code>maxStdPPSCount</code> specified in the
<a href="chap42.html#VkVideoDecodeH265SessionParametersCreateInfoKHR">VkVideoDecodeH265SessionParametersCreateInfoKHR</a> structure included
in the <code>pNext</code> chain</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07210" href="chap42.html#VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07210"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07210</span><br>

If <code>videoSession</code> was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code>, then the <code>pNext</code>
chain <strong class="purple">must</strong> include a
<a href="chap42.html#VkVideoEncodeH264SessionParametersCreateInfoEXT">VkVideoEncodeH264SessionParametersCreateInfoEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07211" href="chap42.html#VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07211"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-07211</span><br>

If <code>videoSession</code> was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H265_BIT_EXT</code>, then the <code>pNext</code>
chain <strong class="purple">must</strong> include a
<a href="chap42.html#VkVideoEncodeH265SessionParametersCreateInfoEXT">VkVideoEncodeH265SessionParametersCreateInfoEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoSessionParametersCreateInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_SESSION_PARAMETERS_CREATE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-pNext-pNext" href="chap42.html#VUID-VkVideoSessionParametersCreateInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap42.html#VkVideoDecodeH264SessionParametersCreateInfoKHR">VkVideoDecodeH264SessionParametersCreateInfoKHR</a>, <a href="chap42.html#VkVideoDecodeH265SessionParametersCreateInfoKHR">VkVideoDecodeH265SessionParametersCreateInfoKHR</a>, <a href="chap42.html#VkVideoEncodeH264SessionParametersCreateInfoEXT">VkVideoEncodeH264SessionParametersCreateInfoEXT</a>, or <a href="chap42.html#VkVideoEncodeH265SessionParametersCreateInfoEXT">VkVideoEncodeH265SessionParametersCreateInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-sType-unique" href="chap42.html#VUID-VkVideoSessionParametersCreateInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-flags-zerobitmask" href="chap42.html#VUID-VkVideoSessionParametersCreateInfoKHR-flags-zerobitmask"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-flags-zerobitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-parameter" href="chap42.html#VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-parameter"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-parameter</span><br>
 If <code>videoSessionParametersTemplate</code> is not <a href="chap56.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>videoSessionParametersTemplate</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-parameter" href="chap42.html#VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-parameter"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-parameter</span><br>
 <code>videoSession</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoSessionKHR">VkVideoSessionKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-parent" href="chap42.html#VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-parent"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-parent</span><br>
 If <code>videoSessionParametersTemplate</code> is a valid handle, it <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>videoSession</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-commonparent" href="chap42.html#VUID-VkVideoSessionParametersCreateInfoKHR-commonparent"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-commonparent</span><br>
 Both of <code>videoSession</code>, and <code>videoSessionParametersTemplate</code> that are valid handles of non-ignored parameters <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoSessionParametersCreateFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoSessionParametersCreateFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoSessionParametersCreateFlagsKHR</code> is a bitmask type for setting a
mask, but is currently reserved for future use.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="destroying-video-session-parameters"><a class="anchor" href="chap42.html#destroying-video-session-parameters"></a>42.7.2. Destroying Video Session Parameters</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy a video session parameters object, call:</p>
</div>
<div id="vkDestroyVideoSessionParametersKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="kt">void</span> <span class="nf">vkDestroyVideoSessionParametersKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkVideoSessionParametersKHR</span>                 <span class="n">videoSessionParameters</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the video session
parameters object.</p>
</li>
<li>
<p><code>videoSessionParameters</code> is the video session parameters object to
destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyVideoSessionParametersKHR-videoSessionParameters-07212" href="chap42.html#VUID-vkDestroyVideoSessionParametersKHR-videoSessionParameters-07212"></a> <span class="vuid">VUID-vkDestroyVideoSessionParametersKHR-videoSessionParameters-07212</span><br>

All submitted commands that refer to <code>videoSessionParameters</code> <strong class="purple">must</strong>
have completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyVideoSessionParametersKHR-videoSessionParameters-07213" href="chap42.html#VUID-vkDestroyVideoSessionParametersKHR-videoSessionParameters-07213"></a> <span class="vuid">VUID-vkDestroyVideoSessionParametersKHR-videoSessionParameters-07213</span><br>

If <code>VkAllocationCallbacks</code> were provided when
<code>videoSessionParameters</code> was created, a compatible set of callbacks
<strong class="purple">must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyVideoSessionParametersKHR-videoSessionParameters-07214" href="chap42.html#VUID-vkDestroyVideoSessionParametersKHR-videoSessionParameters-07214"></a> <span class="vuid">VUID-vkDestroyVideoSessionParametersKHR-videoSessionParameters-07214</span><br>

If no <code>VkAllocationCallbacks</code> were provided when
<code>videoSessionParameters</code> was created, <code>pAllocator</code> <strong class="purple">must</strong> be
<code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyVideoSessionParametersKHR-device-parameter" href="chap42.html#VUID-vkDestroyVideoSessionParametersKHR-device-parameter"></a> <span class="vuid">VUID-vkDestroyVideoSessionParametersKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyVideoSessionParametersKHR-videoSessionParameters-parameter" href="chap42.html#VUID-vkDestroyVideoSessionParametersKHR-videoSessionParameters-parameter"></a> <span class="vuid">VUID-vkDestroyVideoSessionParametersKHR-videoSessionParameters-parameter</span><br>
 If <code>videoSessionParameters</code> is not <a href="chap56.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>videoSessionParameters</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyVideoSessionParametersKHR-pAllocator-parameter" href="chap42.html#VUID-vkDestroyVideoSessionParametersKHR-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyVideoSessionParametersKHR-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>videoSessionParameters</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="video-session-parameters-update"><a class="anchor" href="chap42.html#video-session-parameters-update"></a>42.7.3. Updating Video Session Parameters</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To update video session parameters object with new parameters, call:</p>
</div>
<div id="vkUpdateVideoSessionParametersKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="n">VkResult</span> <span class="nf">vkUpdateVideoSessionParametersKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkVideoSessionParametersKHR</span>                 <span class="n">videoSessionParameters</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkVideoSessionParametersUpdateInfoKHR</span><span class="o">*</span> <span class="n">pUpdateInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that updates the video session
parameters.</p>
</li>
<li>
<p><code>videoSessionParameters</code> is the video session parameters object to
update.</p>
</li>
<li>
<p><code>pUpdateInfo</code> is a pointer to a
<a href="chap42.html#VkVideoSessionParametersUpdateInfoKHR">VkVideoSessionParametersUpdateInfoKHR</a> structure specifying the
parameter update information.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After a successful call to this command, the
<a href="chap42.html#video-session-parameters">update sequence counter</a> of
<code>videoSessionParameters</code> is changed to the value specified in
<code>pUpdateInfo-&gt;updateSequenceCount</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note:</div>
<div class="paragraph">
<p>As each update issued to a video session parameters object needs to specify
the next available update sequence count value, concurrent updates of the
same video session parameters object are inherently disallowed.
However, recording video coding operations to command buffers referring to
parameters previously added to the video session parameters object is
allowed, even if there is a concurrent update in progress adding some new
entries to the object.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>If <code>videoSessionParameters</code> was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code> and the
<code>pUpdateInfo-&gt;pNext</code> chain includes a
<a href="chap42.html#VkVideoDecodeH264SessionParametersAddInfoKHR">VkVideoDecodeH264SessionParametersAddInfoKHR</a> structure, then this
command adds the following parameter entries to
<code>videoSessionParameters</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="chap42.html#decode-h264-sps">H.264 SPS</a> entries specified in
<a href="chap42.html#VkVideoDecodeH264SessionParametersAddInfoKHR">VkVideoDecodeH264SessionParametersAddInfoKHR</a>::<code>pStdSPSs</code>.</p>
</li>
<li>
<p>The <a href="chap42.html#decode-h264-pps">H.264 PPS</a> entries specified in
<a href="chap42.html#VkVideoDecodeH264SessionParametersAddInfoKHR">VkVideoDecodeH264SessionParametersAddInfoKHR</a>::<code>pStdPPSs</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>videoSessionParameters</code> was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code> and the
<code>pUpdateInfo-&gt;pNext</code> chain includes a
<a href="chap42.html#VkVideoDecodeH265SessionParametersAddInfoKHR">VkVideoDecodeH265SessionParametersAddInfoKHR</a> structure, then this
command adds the following parameter entries to
<code>videoSessionParameters</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="chap42.html#decode-h265-vps">H.265 VPS</a> entries specified in
<a href="chap42.html#VkVideoDecodeH265SessionParametersAddInfoKHR">VkVideoDecodeH265SessionParametersAddInfoKHR</a>::<code>pStdVPSs</code>.</p>
</li>
<li>
<p>The <a href="chap42.html#decode-h265-sps">H.265 SPS</a> entries specified in
<a href="chap42.html#VkVideoDecodeH265SessionParametersAddInfoKHR">VkVideoDecodeH265SessionParametersAddInfoKHR</a>::<code>pStdSPSs</code>.</p>
</li>
<li>
<p>The <a href="chap42.html#decode-h265-pps">H.265 PPS</a> entries specified in
<a href="chap42.html#VkVideoDecodeH265SessionParametersAddInfoKHR">VkVideoDecodeH265SessionParametersAddInfoKHR</a>::<code>pStdPPSs</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In case of video session parameters objects created with a video encode
operation, implementations <strong class="purple">may</strong> return the
<code>VK_ERROR_INVALID_VIDEO_STD_PARAMETERS_KHR</code> error if any of the
specified Video Std parameters do not adhere to the syntactic or semantic
requirements of the used video compression standard, or if values derived
from parameters according to the rules defined by the used video compression
standard do not adhere to the capabilities of the video compression standard
or the implementation.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Applications <strong class="purple">should</strong> not rely on the
<code>VK_ERROR_INVALID_VIDEO_STD_PARAMETERS_KHR</code> error being returned by any
command as a means to verify Video Std parameters, as implementations are
not required to report the error in any specific set of cases.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-pUpdateInfo-07215" href="chap42.html#VUID-vkUpdateVideoSessionParametersKHR-pUpdateInfo-07215"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-pUpdateInfo-07215</span><br>

<code>pUpdateInfo-&gt;updateSequenceCount</code> <strong class="purple">must</strong> equal the current
<a href="chap42.html#video-session-parameters">update sequence counter</a> of
<code>videoSessionParameters</code> plus one</p>
</li>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07216" href="chap42.html#VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07216"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07216</span><br>

If <code>videoSessionParameters</code> was created with the video codec
operation <code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code> and the
<code>pNext</code> chain of <code>pUpdateInfo</code> includes a
<a href="chap42.html#VkVideoDecodeH264SessionParametersAddInfoKHR">VkVideoDecodeH264SessionParametersAddInfoKHR</a> structure, then
<code>videoSessionParameters</code> <strong class="purple">must</strong> not already contain a
<code>StdVideoH264SequenceParameterSet</code> entry with
<code>seq_parameter_set_id</code> matching any of the elements of
<a href="chap42.html#VkVideoDecodeH264SessionParametersAddInfoKHR">VkVideoDecodeH264SessionParametersAddInfoKHR</a>::<code>pStdSPSs</code></p>
</li>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07217" href="chap42.html#VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07217"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07217</span><br>

If <code>videoSessionParameters</code> was created with the video codec
operation <code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>, then the
number of <code>StdVideoH264SequenceParameterSet</code> entries already stored
in it plus the value of the <code>stdSPSCount</code> member of the
<a href="chap42.html#VkVideoDecodeH264SessionParametersAddInfoKHR">VkVideoDecodeH264SessionParametersAddInfoKHR</a> structure included in
the <code>pUpdateInfo-&gt;pNext</code> chain <strong class="purple">must</strong> be less than or equal to the
<a href="chap42.html#VkVideoDecodeH264SessionParametersCreateInfoKHR">VkVideoDecodeH264SessionParametersCreateInfoKHR</a>::<code>maxStdSPSCount</code>
<code>videoSessionParameters</code> was created with</p>
</li>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07218" href="chap42.html#VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07218"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07218</span><br>

If <code>videoSessionParameters</code> was created with the video codec
operation <code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code> and the
<code>pNext</code> chain of <code>pUpdateInfo</code> includes a
<a href="chap42.html#VkVideoDecodeH264SessionParametersAddInfoKHR">VkVideoDecodeH264SessionParametersAddInfoKHR</a> structure, then
<code>videoSessionParameters</code> <strong class="purple">must</strong> not already contain a
<code>StdVideoH264PictureParameterSet</code> entry with both
<code>seq_parameter_set_id</code> and <code>pic_parameter_set_id</code> matching any
of the elements of
<a href="chap42.html#VkVideoDecodeH264SessionParametersAddInfoKHR">VkVideoDecodeH264SessionParametersAddInfoKHR</a>::<code>pStdPPSs</code></p>
</li>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07219" href="chap42.html#VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07219"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07219</span><br>

If <code>videoSessionParameters</code> was created with the video codec
operation <code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>, then the
number of <code>StdVideoH264PictureParameterSet</code> entries already stored in
it plus the value of the <code>stdPPSCount</code> member of the
<a href="chap42.html#VkVideoDecodeH264SessionParametersAddInfoKHR">VkVideoDecodeH264SessionParametersAddInfoKHR</a> structure included in
the <code>pUpdateInfo-&gt;pNext</code> chain <strong class="purple">must</strong> be less than or equal to the
<a href="chap42.html#VkVideoDecodeH264SessionParametersCreateInfoKHR">VkVideoDecodeH264SessionParametersCreateInfoKHR</a>::<code>maxStdPPSCount</code>
<code>videoSessionParameters</code> was created with</p>
</li>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07220" href="chap42.html#VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07220"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07220</span><br>

If <code>videoSessionParameters</code> was created with the video codec
operation <code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code> and the
<code>pNext</code> chain of <code>pUpdateInfo</code> includes a
<a href="chap42.html#VkVideoDecodeH265SessionParametersAddInfoKHR">VkVideoDecodeH265SessionParametersAddInfoKHR</a> structure, then
<code>videoSessionParameters</code> <strong class="purple">must</strong> not already contain a
<code>StdVideoH265VideoParameterSet</code> entry with
<code>vps_video_parameter_set_id</code> matching any of the elements of
<a href="chap42.html#VkVideoDecodeH265SessionParametersAddInfoKHR">VkVideoDecodeH265SessionParametersAddInfoKHR</a>::<code>pStdVPSs</code></p>
</li>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07221" href="chap42.html#VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07221"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07221</span><br>

If <code>videoSessionParameters</code> was created with the video codec
operation <code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then the
number of <code>StdVideoH265VideoParameterSet</code> entries already stored in
it plus the value of the <code>stdVPSCount</code> member of the
<a href="chap42.html#VkVideoDecodeH265SessionParametersAddInfoKHR">VkVideoDecodeH265SessionParametersAddInfoKHR</a> structure included in
the <code>pUpdateInfo-&gt;pNext</code> chain <strong class="purple">must</strong> be less than or equal to the
<a href="chap42.html#VkVideoDecodeH265SessionParametersCreateInfoKHR">VkVideoDecodeH265SessionParametersCreateInfoKHR</a>::<code>maxStdVPSCount</code>
<code>videoSessionParameters</code> was created with</p>
</li>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07222" href="chap42.html#VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07222"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07222</span><br>

If <code>videoSessionParameters</code> was created with the video codec
operation <code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code> and the
<code>pNext</code> chain of <code>pUpdateInfo</code> includes a
<a href="chap42.html#VkVideoDecodeH265SessionParametersAddInfoKHR">VkVideoDecodeH265SessionParametersAddInfoKHR</a> structure, then
<code>videoSessionParameters</code> <strong class="purple">must</strong> not already contain a
<code>StdVideoH265SequenceParameterSet</code> entry with both
<code>sps_video_parameter_set_id</code> and <code>sps_seq_parameter_set_id</code>
matching any of the elements of
<a href="chap42.html#VkVideoDecodeH265SessionParametersAddInfoKHR">VkVideoDecodeH265SessionParametersAddInfoKHR</a>::<code>pStdSPSs</code></p>
</li>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07223" href="chap42.html#VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07223"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07223</span><br>

If <code>videoSessionParameters</code> was created with the video codec
operation <code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then the
number of <code>StdVideoH265SequenceParameterSet</code> entries already stored
in it plus the value of the <code>stdSPSCount</code> member of the
<a href="chap42.html#VkVideoDecodeH265SessionParametersAddInfoKHR">VkVideoDecodeH265SessionParametersAddInfoKHR</a> structure included in
the <code>pUpdateInfo-&gt;pNext</code> chain <strong class="purple">must</strong> be less than or equal to the
<a href="chap42.html#VkVideoDecodeH265SessionParametersCreateInfoKHR">VkVideoDecodeH265SessionParametersCreateInfoKHR</a>::<code>maxStdSPSCount</code>
<code>videoSessionParameters</code> was created with</p>
</li>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07224" href="chap42.html#VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07224"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07224</span><br>

If <code>videoSessionParameters</code> was created with the video codec
operation <code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code> and the
<code>pNext</code> chain of <code>pUpdateInfo</code> includes a
<a href="chap42.html#VkVideoDecodeH265SessionParametersAddInfoKHR">VkVideoDecodeH265SessionParametersAddInfoKHR</a> structure, then
<code>videoSessionParameters</code> <strong class="purple">must</strong> not already contain a
<code>StdVideoH265PictureParameterSet</code> entry with
<code>sps_video_parameter_set_id</code>, <code>pps_seq_parameter_set_id</code>, and
<code>pps_pic_parameter_set_id</code> all matching any of the elements of
<a href="chap42.html#VkVideoDecodeH265SessionParametersAddInfoKHR">VkVideoDecodeH265SessionParametersAddInfoKHR</a>::<code>pStdPPSs</code></p>
</li>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07225" href="chap42.html#VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07225"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07225</span><br>

If <code>videoSessionParameters</code> was created with the video codec
operation <code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then the
number of <code>StdVideoH265PictureParameterSet</code> entries already stored in
it plus the value of the <code>stdPPSCount</code> member of the
<a href="chap42.html#VkVideoDecodeH265SessionParametersAddInfoKHR">VkVideoDecodeH265SessionParametersAddInfoKHR</a> structure included in
the <code>pUpdateInfo-&gt;pNext</code> chain <strong class="purple">must</strong> be less than or equal to the
<a href="chap42.html#VkVideoDecodeH265SessionParametersCreateInfoKHR">VkVideoDecodeH265SessionParametersCreateInfoKHR</a>::<code>maxStdPPSCount</code>
<code>videoSessionParameters</code> was created with</p>
</li>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07226" href="chap42.html#VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07226"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07226</span><br>

If <code>videoSessionParameters</code> was created with the video codec
operation <code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code> and the
<code>pNext</code> chain of <code>pUpdateInfo</code> includes a
<a href="chap42.html#VkVideoEncodeH264SessionParametersAddInfoEXT">VkVideoEncodeH264SessionParametersAddInfoEXT</a> structure, then
<code>videoSessionParameters</code> <strong class="purple">must</strong> not already contain a
<code>StdVideoH264SequenceParameterSet</code> entry with
<code>seq_parameter_set_id</code> matching any of the elements of
<a href="chap42.html#VkVideoEncodeH264SessionParametersAddInfoEXT">VkVideoEncodeH264SessionParametersAddInfoEXT</a>::<code>pStdSPSs</code></p>
</li>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07227" href="chap42.html#VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07227"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07227</span><br>

If <code>videoSessionParameters</code> was created with the video codec
operation <code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code> and the
<code>pNext</code> chain of <code>pUpdateInfo</code> includes a
<a href="chap42.html#VkVideoEncodeH264SessionParametersAddInfoEXT">VkVideoEncodeH264SessionParametersAddInfoEXT</a> structure, then
<code>videoSessionParameters</code> <strong class="purple">must</strong> not already contain a
<code>StdVideoH264PictureParameterSet</code> entry with both
<code>seq_parameter_set_id</code> and <code>pic_parameter_set_id</code> matching any
of the elements of
<a href="chap42.html#VkVideoEncodeH264SessionParametersAddInfoEXT">VkVideoEncodeH264SessionParametersAddInfoEXT</a>::<code>pStdPPSs</code></p>
</li>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07228" href="chap42.html#VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07228"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07228</span><br>

If <code>videoSessionParameters</code> was created with the video codec
operation <code>VK_VIDEO_CODEC_OPERATION_ENCODE_H265_BIT_EXT</code> and the
<code>pNext</code> chain of <code>pUpdateInfo</code> includes a
<a href="chap42.html#VkVideoEncodeH265SessionParametersAddInfoEXT">VkVideoEncodeH265SessionParametersAddInfoEXT</a> structure, then
<code>videoSessionParameters</code> <strong class="purple">must</strong> not already contain a
<code>StdVideoH265VideoParameterSet</code> entry with
<code>vps_video_parameter_set_id</code> matching any of the elements of
<a href="chap42.html#VkVideoEncodeH265SessionParametersAddInfoEXT">VkVideoEncodeH265SessionParametersAddInfoEXT</a>::<code>pStdVPSs</code></p>
</li>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07229" href="chap42.html#VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07229"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07229</span><br>

If <code>videoSessionParameters</code> was created with the video codec
operation <code>VK_VIDEO_CODEC_OPERATION_ENCODE_H265_BIT_EXT</code> and the
<code>pNext</code> chain of <code>pUpdateInfo</code> includes a
<a href="chap42.html#VkVideoEncodeH265SessionParametersAddInfoEXT">VkVideoEncodeH265SessionParametersAddInfoEXT</a> structure, then
<code>videoSessionParameters</code> <strong class="purple">must</strong> not already contain a
<code>StdVideoH265SequenceParameterSet</code> entry with both
<code>sps_video_parameter_set_id</code> and <code>sps_seq_parameter_set_id</code>
matching any of the elements of
<a href="chap42.html#VkVideoEncodeH265SessionParametersAddInfoEXT">VkVideoEncodeH265SessionParametersAddInfoEXT</a>::<code>pStdSPSs</code></p>
</li>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07230" href="chap42.html#VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07230"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-07230</span><br>

If <code>videoSessionParameters</code> was created with the video codec
operation <code>VK_VIDEO_CODEC_OPERATION_ENCODE_H265_BIT_EXT</code> and the
<code>pNext</code> chain of <code>pUpdateInfo</code> includes a
<a href="chap42.html#VkVideoEncodeH265SessionParametersAddInfoEXT">VkVideoEncodeH265SessionParametersAddInfoEXT</a> structure, then
<code>videoSessionParameters</code> <strong class="purple">must</strong> not already contain a
<code>StdVideoH265PictureParameterSet</code> entry with
<code>sps_video_parameter_set_id</code>, <code>pps_seq_parameter_set_id</code>, and
<code>pps_pic_parameter_set_id</code> all matching any of the elements of
<a href="chap42.html#VkVideoEncodeH265SessionParametersAddInfoEXT">VkVideoEncodeH265SessionParametersAddInfoEXT</a>::<code>pStdPPSs</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-device-parameter" href="chap42.html#VUID-vkUpdateVideoSessionParametersKHR-device-parameter"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-parameter" href="chap42.html#VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-parameter"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-parameter</span><br>
 <code>videoSessionParameters</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-pUpdateInfo-parameter" href="chap42.html#VUID-vkUpdateVideoSessionParametersKHR-pUpdateInfo-parameter"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-pUpdateInfo-parameter</span><br>
 <code>pUpdateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap42.html#VkVideoSessionParametersUpdateInfoKHR">VkVideoSessionParametersUpdateInfoKHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INVALID_VIDEO_STD_PARAMETERS_KHR</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoSessionParametersUpdateInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoSessionParametersUpdateInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoSessionParametersUpdateInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">updateSequenceCount</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoSessionParametersUpdateInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>updateSequenceCount</code> is the new <a href="chap42.html#video-session-parameters">update
sequence count</a> to set for the video session parameters object.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoSessionParametersUpdateInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoSessionParametersUpdateInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoSessionParametersUpdateInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_SESSION_PARAMETERS_UPDATE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersUpdateInfoKHR-pNext-pNext" href="chap42.html#VUID-VkVideoSessionParametersUpdateInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoSessionParametersUpdateInfoKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap42.html#VkVideoDecodeH264SessionParametersAddInfoKHR">VkVideoDecodeH264SessionParametersAddInfoKHR</a>, <a href="chap42.html#VkVideoDecodeH265SessionParametersAddInfoKHR">VkVideoDecodeH265SessionParametersAddInfoKHR</a>, <a href="chap42.html#VkVideoEncodeH264SessionParametersAddInfoEXT">VkVideoEncodeH264SessionParametersAddInfoEXT</a>, or <a href="chap42.html#VkVideoEncodeH265SessionParametersAddInfoEXT">VkVideoEncodeH265SessionParametersAddInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersUpdateInfoKHR-sType-unique" href="chap42.html#VUID-VkVideoSessionParametersUpdateInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoSessionParametersUpdateInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="video-coding-scope"><a class="anchor" href="chap42.html#video-coding-scope"></a>42.8. Video Coding Scope</h3>
<div class="paragraph">
<p>Applications <strong class="purple">can</strong> record video coding commands for a video session only
within a video coding scope.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To begin a video coding scope, call:</p>
</div>
<div id="vkCmdBeginVideoCodingKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="kt">void</span> <span class="nf">vkCmdBeginVideoCodingKHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkVideoBeginCodingInfoKHR</span><span class="o">*</span>            <span class="n">pBeginInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer in which to record the
command.</p>
</li>
<li>
<p><code>pBeginInfo</code> is a pointer to a <a href="chap42.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>
structure specifying the parameters of the video coding scope, including
the video session and video session parameters object to use.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After beginning a video coding scope, the video session object specified in
<code>pBeginInfo-&gt;videoSession</code> is <em>bound</em> to the command buffer, and the
command buffer is ready to record video coding operations.
Similarly, if <code>pBeginInfo-&gt;videoSessionParameters</code> is not
<code>VK_NULL_HANDLE</code>, it is also <em>bound</em> to the command buffer, and video
coding operations <strong class="purple">can</strong> refer to the codec-specific parameters stored in it.</p>
</div>
<div id="bound-reference-picture-resources" class="paragraph">
<p>This command also establishes the set of <em>bound reference picture resources</em>
that <strong class="purple">can</strong> be used as <a href="chap42.html#reconstructed-picture">reconstructed pictures</a> or
<a href="chap42.html#reference-picture">reference pictures</a> within the video coding scope.
Each element of this set consists of a <a href="chap42.html#video-picture-resources">video
picture resource</a> and the <a href="chap42.html#dpb-slot">DPB slot</a> index associated with it,
if there is one.</p>
</div>
<div class="paragraph">
<p>The set of bound reference picture resources is immutable within a video
coding scope, however, the DPB slot index associated with any of the bound
reference picture resources <strong class="purple">can</strong> change during the video coding scope in
response to video coding operations.</p>
</div>
<div class="paragraph">
<p>The <a href="chap42.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structures provided as the elements of
<code>pBeginInfo-&gt;pReferenceSlots</code> are interpreted by this command as
follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <code>slotIndex</code> is non-negative and <code>pPictureResource</code> is not
<code>NULL</code>, then the <a href="chap42.html#video-picture-resources">video picture resource</a>
defined by the <a href="chap42.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> structure pointed to
by <code>pPictureResource</code> is added to the set of bound reference picture
resources and is associated with the DPB slot index specified in
<code>slotIndex</code>.</p>
</li>
<li>
<p>If <code>slotIndex</code> is non-negative and <code>pPictureResource</code> is <code>NULL</code>,
then the DPB slot with index <code>slotIndex</code> is <a href="chap42.html#dpb-slot-states">deactivated</a> by this command.</p>
</li>
<li>
<p>If <code>slotIndex</code> is negative and <code>pPictureResource</code> is not <code>NULL</code>,
then the <a href="chap42.html#video-picture-resources">video picture resource</a> defined by
the <a href="chap42.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> structure pointed to by
<code>pPictureResource</code> is added to the set of bound reference picture
resources without an associated DPB slot.
Such a picture resource <strong class="purple">can</strong> be subsequently used as a
<a href="chap42.html#reconstructed-picture">reconstructed picture</a> to associate it with a
DPB slot.</p>
</li>
<li>
<p>If <code>slotIndex</code> is negative and <code>pPictureResource</code> is <code>NULL</code>,
then the element is ignored.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note:</div>
<div class="paragraph">
<p>It is possible for multiple bound reference picture resources to be
associated with the same DPB slot index, or for a single bound reference
picture to refer to multiple separate reference pictures.
For example, in case of an <a href="chap42.html#decode-h264-profile">H.264 decode profile</a> with
<a href="chap42.html#decode-h264-interlaced-support">interlaced frame support</a> a single DPB
slot can refer to two separate pictures for the top and bottom fields.
Depending on the picture layout used by the <a href="chap42.html#decode-h264-profile">H.264
decode profile</a>, the following special cases <strong class="purple">may</strong> arise:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the picture layout is
<code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_INTERLEAVED_LINES_BIT_KHR</code>,
then the top and bottom field pictures are physically co-located in the
same video picture resource with even scanlines corresponding to the top
field and odd scanlines corresponding to the bottom field, respectively.</p>
</li>
<li>
<p>If the picture layout is
<code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_SEPARATE_PLANES_BIT_KHR</code>,
then the top and bottom field pictures are stored in separate video
picture resources (in separate subregions of the same image layer, in
separate layers of the same image, or in entirely separate images),
hence two elements of
<a href="chap42.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>::<code>pReferenceSlots</code> <strong class="purple">can</strong> contain the
same <code>slotIndex</code> but specify different video picture resources in
their <code>pPictureResource</code> members.</p>
</li>
</ul>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>All non-negative <code>slotIndex</code> values specified in the elements of
<code>pBeginInfo-&gt;pReferenceSlots</code> <strong class="purple">must</strong> identify DPB slots of the video
session that are in the <a href="chap42.html#dpb-slot-states">active state</a> at the time this
command is executed on the device.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note:</div>
<div class="paragraph">
<p>The application does not have to specify an entry in
<code>pBeginInfo-&gt;pReferenceSlots</code> corresponding to all active DPB slots of
the video session, but only for those which are intended to be used in the
video coding scope.
This way the application can avoid any potential runtime cost associated
with binding the corresponding picture resources to the command buffer.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-commandBuffer-07231" href="chap42.html#VUID-vkCmdBeginVideoCodingKHR-commandBuffer-07231"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-commandBuffer-07231</span><br>

The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from
<strong class="purple">must</strong> support the video codec operation <code>pBeginInfo-&gt;videoSession</code>
was created with, as returned by
<a href="chap5.html#vkGetPhysicalDeviceQueueFamilyProperties2">vkGetPhysicalDeviceQueueFamilyProperties2</a> in
<a href="chap5.html#VkQueueFamilyVideoPropertiesKHR">VkQueueFamilyVideoPropertiesKHR</a>::<code>videoCodecOperations</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-None-07232" href="chap42.html#VUID-vkCmdBeginVideoCodingKHR-None-07232"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-None-07232</span><br>

There <strong class="purple">must</strong> be no <a href="chap18.html#queries-operation-active">active</a> queries</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-commandBuffer-07233" href="chap42.html#VUID-vkCmdBeginVideoCodingKHR-commandBuffer-07233"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-commandBuffer-07233</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
then <code>pBeginInfo-&gt;videoSession</code> <strong class="purple">must</strong> not have been created with
<code>VK_VIDEO_SESSION_CREATE_PROTECTED_CONTENT_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-commandBuffer-07234" href="chap42.html#VUID-vkCmdBeginVideoCodingKHR-commandBuffer-07234"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-commandBuffer-07234</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
then <code>pBeginInfo-&gt;videoSession</code> <strong class="purple">must</strong> have been created with
<code>VK_VIDEO_SESSION_CREATE_PROTECTED_CONTENT_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-commandBuffer-07235" href="chap42.html#VUID-vkCmdBeginVideoCodingKHR-commandBuffer-07235"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-commandBuffer-07235</span><br>

If <code>commandBuffer</code> is an unprotected command buffer,
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
and the <code>pPictureResource</code> member of any element of
<code>pBeginInfo-&gt;pReferenceSlots</code> is not <code>NULL</code>, then
<code>pPictureResource-&gt;imageViewBinding</code> for that element <strong class="purple">must</strong> not
specify an image view created from a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-commandBuffer-07236" href="chap42.html#VUID-vkCmdBeginVideoCodingKHR-commandBuffer-07236"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-commandBuffer-07236</span><br>

If <code>commandBuffer</code> is a protected command buffer
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
and the <code>pPictureResource</code> member of any element of
<code>pBeginInfo-&gt;pReferenceSlots</code> is not <code>NULL</code>, then
<code>pPictureResource-&gt;imageViewBinding</code> for that element <strong class="purple">must</strong> specify
an image view created from a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-slotIndex-07239" href="chap42.html#VUID-vkCmdBeginVideoCodingKHR-slotIndex-07239"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-slotIndex-07239</span><br>

If the <code>slotIndex</code> member of any element of
<code>pBeginInfo-&gt;pReferenceSlots</code> is not negative, then it <strong class="purple">must</strong> specify
the index of a DPB slot that is in the <a href="chap42.html#dpb-slot-states">active state</a>
in <code>pBeginInfo-&gt;videoSession</code> at the time the command is executed on
the device</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-pPictureResource-07265" href="chap42.html#VUID-vkCmdBeginVideoCodingKHR-pPictureResource-07265"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-pPictureResource-07265</span><br>

Each video picture resource specified by any non-<code>NULL</code>
<code>pPictureResource</code> member specified in the elements of
<code>pBeginInfo-&gt;pReferenceSlots</code> for which <code>slotIndex</code> is not
negative <strong class="purple">must</strong> <a href="chap42.html#video-picture-resource-matching">match</a> one of the
video picture resources currently associated with the DPB slot index of
<code>pBeginInfo-&gt;videoSession</code> specified by <code>slotIndex</code> at the time
the command is executed on the device</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-commandBuffer-parameter" href="chap42.html#VUID-vkCmdBeginVideoCodingKHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-pBeginInfo-parameter" href="chap42.html#VUID-vkCmdBeginVideoCodingKHR-pBeginInfo-parameter"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-pBeginInfo-parameter</span><br>
 <code>pBeginInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap42.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-commandBuffer-recording" href="chap42.html#VUID-vkCmdBeginVideoCodingKHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-commandBuffer-cmdpool" href="chap42.html#VUID-vkCmdBeginVideoCodingKHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support decode, or encode operations</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-renderpass" href="chap42.html#VUID-vkCmdBeginVideoCodingKHR-renderpass"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-videocoding" href="chap42.html#VUID-vkCmdBeginVideoCodingKHR-videocoding"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-bufferlevel" href="chap42.html#VUID-vkCmdBeginVideoCodingKHR-bufferlevel"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap42.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decode<br>
Encode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action<br>
State</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap42.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoBeginCodingInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoBeginCodingInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                       <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                           <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoBeginCodingFlagsKHR</span>            <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkVideoSessionKHR</span>                     <span class="n">videoSession</span><span class="p">;</span>
    <span class="n">VkVideoSessionParametersKHR</span>           <span class="n">videoSessionParameters</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                              <span class="n">referenceSlotCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoReferenceSlotInfoKHR</span><span class="o">*</span>    <span class="n">pReferenceSlots</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoBeginCodingInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
<li>
<p><code>videoSession</code> is the video session object to be bound for the
processing of the video commands.</p>
</li>
<li>
<p><code>videoSessionParameters</code> is <code>VK_NULL_HANDLE</code> or a handle of a
<a href="chap42.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object to be used for the processing
of the video commands.
If <code>VK_NULL_HANDLE</code>, then no video session parameters object is
bound for the duration of the video coding scope.</p>
</li>
<li>
<p><code>referenceSlotCount</code> is the number of elements in the
<code>pReferenceSlots</code> array.</p>
</li>
<li>
<p><code>pReferenceSlots</code> is a pointer to an array of
<a href="chap42.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structures specifying the information
used to determine the set of <a href="chap42.html#bound-reference-picture-resources">bound
reference picture resources</a> for the video coding scope and their
initial association with <a href="chap42.html#dpb-slot">DPB slot</a> indices.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Limiting values are defined below that are referenced by the relevant valid
usage statements of this structure.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Let <code>VkOffset2D codedOffsetGranularity</code> be the minimum alignment
requirement for the coded offset of video picture resources.
Unless otherwise defined, the value of the <code>x</code> and <code>y</code> members
of <code>codedOffsetGranularity</code> are <code>0</code>.</p>
<div class="ulist">
<ul>
<li>
<p>If <code>videoSession</code> was created with an <a href="chap42.html#decode-h264-profile">H.264
decode profile</a> with a
<a href="chap42.html#VkVideoDecodeH264ProfileInfoKHR">VkVideoDecodeH264ProfileInfoKHR</a>::<code>pictureLayout</code> of
<code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_SEPARATE_PLANES_BIT_KHR</code>,
then <code>codedOffsetGranularity</code> is equal to
<a href="chap42.html#VkVideoDecodeH264CapabilitiesKHR">VkVideoDecodeH264CapabilitiesKHR</a>::<code>fieldOffsetGranularity</code>,
as returned by <a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> for that
video profile.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-videoSession-07237" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-videoSession-07237"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-videoSession-07237</span><br>

<code>videoSession</code> <strong class="purple">must</strong> have memory bound to all of its memory bindings
returned by <a href="chap42.html#vkGetVideoSessionMemoryRequirementsKHR">vkGetVideoSessionMemoryRequirementsKHR</a> for
<code>videoSession</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-slotIndex-04856" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-slotIndex-04856"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-slotIndex-04856</span><br>

Each non-negative <a href="chap42.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a>::<code>slotIndex</code>
specified in the elements of <code>pReferenceSlots</code> <strong class="purple">must</strong> be less than
the <a href="chap42.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>::<code>maxDpbSlots</code> specified when
<code>videoSession</code> was created</p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-pPictureResource-07238" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-pPictureResource-07238"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-pPictureResource-07238</span><br>

Each video picture resource corresponding to any non-<code>NULL</code>
<code>pPictureResource</code> member specified in the elements of
<code>pReferenceSlots</code> <strong class="purple">must</strong> be <a href="chap42.html#video-picture-resource-uniqueness">unique</a> within <code>pReferenceSlots</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-pPictureResource-07240" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-pPictureResource-07240"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-pPictureResource-07240</span><br>

If the <code>pPictureResource</code> member of any element of
<code>pReferenceSlots</code> is not <code>NULL</code>, then the image view specified in
<code>pPictureResource-&gt;imageViewBinding</code> for that element <strong class="purple">must</strong> be
<a href="chap42.html#video-profile-compatibility">compatible</a> with the video profile
<code>videoSession</code> was created with</p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-pPictureResource-07241" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-pPictureResource-07241"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-pPictureResource-07241</span><br>

If the <code>pPictureResource</code> member of any element of
<code>pReferenceSlots</code> is not <code>NULL</code>, then the format of the image view
specified in <code>pPictureResource-&gt;imageViewBinding</code> for that element
<strong class="purple">must</strong> match the
<a href="chap42.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>::referencePictureFormat
<code>videoSession</code> was created with</p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-pPictureResource-07242" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-pPictureResource-07242"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-pPictureResource-07242</span><br>

If the <code>pPictureResource</code> member of any element of
<code>pReferenceSlots</code> is not <code>NULL</code>, then its <code>codedOffset</code> member
<strong class="purple">must</strong> be an integer multiple of <code>codedOffsetGranularity</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-pPictureResource-07243" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-pPictureResource-07243"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-pPictureResource-07243</span><br>

If the <code>pPictureResource</code> member of any element of
<code>pReferenceSlots</code> is not <code>NULL</code>, then its <code>codedExtent</code> member
<strong class="purple">must</strong> be between <code>minCodedExtent</code> and <code>maxCodedExtent</code>,
inclusive, <code>videoSession</code> was created with</p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-flags-07244" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-flags-07244"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-flags-07244</span><br>

If <a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>flags</code> does not include
<code>VK_VIDEO_CAPABILITY_SEPARATE_REFERENCE_IMAGES_BIT_KHR</code>, as returned
by <a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> for the video profile
<code>videoSession</code> was created with, then
<code>pPictureResource-&gt;imageViewBinding</code> of all elements of
<code>pReferenceSlots</code> with a non-<code>NULL</code> <code>pPictureResource</code> member
<strong class="purple">must</strong> specify image views created from the same image</p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-slotIndex-07245" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-slotIndex-07245"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-slotIndex-07245</span><br>

If <code>videoSession</code> was created with a decode operation and the
<code>slotIndex</code> member of any element of <code>pReferenceSlots</code> is not
negative, then the image view specified in
<code>pPictureResource-&gt;imageViewBinding</code> for that element <strong class="purple">must</strong> have
been created with <code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-slotIndex-07246" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-slotIndex-07246"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-slotIndex-07246</span><br>

If <code>videoSession</code> was created with an encode operation and the
<code>slotIndex</code> member of any element of <code>pReferenceSlots</code> is not
negative, then the image view specified in
<code>pPictureResource-&gt;imageViewBinding</code> for that element <strong class="purple">must</strong> have
been created with <code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-videoSession-07247" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-videoSession-07247"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-videoSession-07247</span><br>

If <code>videoSession</code> was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>, then
<code>videoSessionParameters</code> <strong class="purple">must</strong> not be <code>VK_NULL_HANDLE</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-videoSession-07248" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-videoSession-07248"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-videoSession-07248</span><br>

If <code>videoSession</code> was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then
<code>videoSessionParameters</code> <strong class="purple">must</strong> not be <code>VK_NULL_HANDLE</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-videoSession-07249" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-videoSession-07249"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-videoSession-07249</span><br>

If <code>videoSession</code> was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code>, then
<code>videoSessionParameters</code> <strong class="purple">must</strong> not be <code>VK_NULL_HANDLE</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-videoSession-07250" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-videoSession-07250"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-videoSession-07250</span><br>

If <code>videoSession</code> was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H265_BIT_EXT</code>, then
<code>videoSessionParameters</code> <strong class="purple">must</strong> not be <code>VK_NULL_HANDLE</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-04857" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-04857"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-04857</span><br>

If <code>videoSessionParameters</code> is not <code>VK_NULL_HANDLE</code>, it <strong class="purple">must</strong>
have been created with <code>videoSession</code> specified in
<a href="chap42.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a>::<code>videoSession</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_BEGIN_CODING_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-pNext-pNext" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-flags-zerobitmask" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-flags-zerobitmask"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-flags-zerobitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-videoSession-parameter" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-videoSession-parameter"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-videoSession-parameter</span><br>
 <code>videoSession</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoSessionKHR">VkVideoSessionKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-parameter" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-parameter"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-parameter</span><br>
 If <code>videoSessionParameters</code> is not <a href="chap56.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>videoSessionParameters</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-pReferenceSlots-parameter" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-pReferenceSlots-parameter"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-pReferenceSlots-parameter</span><br>
 If <code>referenceSlotCount</code> is not <code>0</code>, <code>pReferenceSlots</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>referenceSlotCount</code> valid <a href="chap42.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structures</p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-parent" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-parent"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-parent</span><br>
 If <code>videoSessionParameters</code> is a valid handle, it <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>videoSession</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-commonparent" href="chap42.html#VUID-VkVideoBeginCodingInfoKHR-commonparent"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-commonparent</span><br>
 Both of <code>videoSession</code>, and <code>videoSessionParameters</code> that are valid handles of non-ignored parameters <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoBeginCodingFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoBeginCodingFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoBeginCodingFlagsKHR</code> is a bitmask type for setting a mask, but
is currently reserved for future use.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoReferenceSlotInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoReferenceSlotInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoReferenceSlotInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                         <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                             <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">int32_t</span>                                 <span class="n">slotIndex</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoPictureResourceInfoKHR</span><span class="o">*</span>    <span class="n">pPictureResource</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoReferenceSlotInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>slotIndex</code> is the index of the <a href="chap42.html#dpb-slot">DPB slot</a> or a negative
integer value.</p>
</li>
<li>
<p><code>pPictureResource</code> is <code>NULL</code> or a pointer to a
<a href="chap42.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> structure describing the
<a href="chap42.html#video-picture-resources">video picture resource</a> associated with the
DPB slot index specified by <code>slotIndex</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoReferenceSlotInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoReferenceSlotInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoReferenceSlotInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_REFERENCE_SLOT_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoReferenceSlotInfoKHR-pNext-pNext" href="chap42.html#VUID-VkVideoReferenceSlotInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoReferenceSlotInfoKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap42.html#VkVideoDecodeH264DpbSlotInfoKHR">VkVideoDecodeH264DpbSlotInfoKHR</a>, <a href="chap42.html#VkVideoDecodeH265DpbSlotInfoKHR">VkVideoDecodeH265DpbSlotInfoKHR</a>, <a href="chap42.html#VkVideoEncodeH264DpbSlotInfoEXT">VkVideoEncodeH264DpbSlotInfoEXT</a>, or <a href="chap42.html#VkVideoEncodeH265DpbSlotInfoEXT">VkVideoEncodeH265DpbSlotInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkVideoReferenceSlotInfoKHR-sType-unique" href="chap42.html#VUID-VkVideoReferenceSlotInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoReferenceSlotInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkVideoReferenceSlotInfoKHR-pPictureResource-parameter" href="chap42.html#VUID-VkVideoReferenceSlotInfoKHR-pPictureResource-parameter"></a> <span class="vuid">VUID-VkVideoReferenceSlotInfoKHR-pPictureResource-parameter</span><br>
 If <code>pPictureResource</code> is not <code>NULL</code>, <code>pPictureResource</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap42.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To end a video coding scope, call:</p>
</div>
<div id="vkCmdEndVideoCodingKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="kt">void</span> <span class="nf">vkCmdEndVideoCodingKHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkVideoEndCodingInfoKHR</span><span class="o">*</span>              <span class="n">pEndCodingInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer in which to record the
command.</p>
</li>
<li>
<p><code>pEndCodingInfo</code> is a pointer to a <a href="chap42.html#VkVideoEndCodingInfoKHR">VkVideoEndCodingInfoKHR</a>
structure specifying the parameters for ending the video coding scope.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After ending a video coding scope, the video session object, the optional
video session parameters object, and all
<a href="chap42.html#bound-reference-picture-resources">reference picture resources</a>
previously bound by the corresponding <a href="chap42.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command
are <em>unbound</em>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdEndVideoCodingKHR-None-07251" href="chap42.html#VUID-vkCmdEndVideoCodingKHR-None-07251"></a> <span class="vuid">VUID-vkCmdEndVideoCodingKHR-None-07251</span><br>

There <strong class="purple">must</strong> be no <a href="chap18.html#queries-operation-active">active</a> queries</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdEndVideoCodingKHR-commandBuffer-parameter" href="chap42.html#VUID-vkCmdEndVideoCodingKHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdEndVideoCodingKHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdEndVideoCodingKHR-pEndCodingInfo-parameter" href="chap42.html#VUID-vkCmdEndVideoCodingKHR-pEndCodingInfo-parameter"></a> <span class="vuid">VUID-vkCmdEndVideoCodingKHR-pEndCodingInfo-parameter</span><br>
 <code>pEndCodingInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap42.html#VkVideoEndCodingInfoKHR">VkVideoEndCodingInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdEndVideoCodingKHR-commandBuffer-recording" href="chap42.html#VUID-vkCmdEndVideoCodingKHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdEndVideoCodingKHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdEndVideoCodingKHR-commandBuffer-cmdpool" href="chap42.html#VUID-vkCmdEndVideoCodingKHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdEndVideoCodingKHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support decode, or encode operations</p>
</li>
<li>
<p><a id="VUID-vkCmdEndVideoCodingKHR-renderpass" href="chap42.html#VUID-vkCmdEndVideoCodingKHR-renderpass"></a> <span class="vuid">VUID-vkCmdEndVideoCodingKHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdEndVideoCodingKHR-videocoding" href="chap42.html#VUID-vkCmdEndVideoCodingKHR-videocoding"></a> <span class="vuid">VUID-vkCmdEndVideoCodingKHR-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called inside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdEndVideoCodingKHR-bufferlevel" href="chap42.html#VUID-vkCmdEndVideoCodingKHR-bufferlevel"></a> <span class="vuid">VUID-vkCmdEndVideoCodingKHR-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap42.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decode<br>
Encode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action<br>
State</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEndCodingInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoEndCodingInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEndCodingInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                 <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoEndCodingFlagsKHR</span>    <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEndCodingInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEndCodingInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoEndCodingInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoEndCodingInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_END_CODING_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEndCodingInfoKHR-pNext-pNext" href="chap42.html#VUID-VkVideoEndCodingInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoEndCodingInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEndCodingInfoKHR-flags-zerobitmask" href="chap42.html#VUID-VkVideoEndCodingInfoKHR-flags-zerobitmask"></a> <span class="vuid">VUID-VkVideoEndCodingInfoKHR-flags-zerobitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEndCodingFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEndCodingFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEndCodingFlagsKHR</code> is a bitmask type for setting a mask, but is
currently reserved for future use.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="video-coding-control"><a class="anchor" href="chap42.html#video-coding-control"></a>42.9. Video Coding Control</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To apply dynamic controls to the currently bound video session object, call:</p>
</div>
<div id="vkCmdControlVideoCodingKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="kt">void</span> <span class="nf">vkCmdControlVideoCodingKHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkVideoCodingControlInfoKHR</span><span class="o">*</span>          <span class="n">pCodingControlInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer in which to record the
command.</p>
</li>
<li>
<p><code>pCodingControlInfo</code> is a pointer to a
<a href="chap42.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a> structure specifying the control
parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The control parameters provided in this call are applied to the video
session at the time the command executes on the device and are in effect
until a subsequent call to this command with the same video session bound
changes the corresponding control parameters.</p>
</div>
<div class="paragraph">
<p>A newly created video session <strong class="purple">must</strong> be reset before performing video coding
operations using it by including <code>VK_VIDEO_CODING_CONTROL_RESET_BIT_KHR</code>
in <code>pCodingControlInfo-&gt;flags</code>.
The reset operation also returns all DPB slots of the video session to the
<a href="chap42.html#dpb-slot-states">inactive state</a>.
Correspondingly, any DPB slot index associated with the
<a href="chap42.html#bound-reference-picture-resources">bound reference picture resources</a> is
removed.</p>
</div>
<div class="paragraph">
<p>For encode sessions, the reset operation returns rate control configuration
to implementation default settings.</p>
</div>
<div class="paragraph">
<p>After video coding operations are performed using a video session, the reset
operation <strong class="purple">can</strong> be used to return the video session to the same <em>initial</em>
state as after the reset of a newly created video session.
This <strong class="purple">can</strong> be used, for example, when different video sequences are needed to
be processed with the same video session object.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdControlVideoCodingKHR-flags-07017" href="chap42.html#VUID-vkCmdControlVideoCodingKHR-flags-07017"></a> <span class="vuid">VUID-vkCmdControlVideoCodingKHR-flags-07017</span><br>

If <code>pCodingControlInfo-&gt;flags</code> does not include
<code>VK_VIDEO_CODING_CONTROL_RESET_BIT_KHR</code>, then the bound video
session <strong class="purple">must</strong> not be in <a href="chap42.html#video-session-uninitialized">uninitialized</a>
state at the time the command is executed on the device</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdControlVideoCodingKHR-commandBuffer-parameter" href="chap42.html#VUID-vkCmdControlVideoCodingKHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdControlVideoCodingKHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdControlVideoCodingKHR-pCodingControlInfo-parameter" href="chap42.html#VUID-vkCmdControlVideoCodingKHR-pCodingControlInfo-parameter"></a> <span class="vuid">VUID-vkCmdControlVideoCodingKHR-pCodingControlInfo-parameter</span><br>
 <code>pCodingControlInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap42.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdControlVideoCodingKHR-commandBuffer-recording" href="chap42.html#VUID-vkCmdControlVideoCodingKHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdControlVideoCodingKHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdControlVideoCodingKHR-commandBuffer-cmdpool" href="chap42.html#VUID-vkCmdControlVideoCodingKHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdControlVideoCodingKHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support decode, or encode operations</p>
</li>
<li>
<p><a id="VUID-vkCmdControlVideoCodingKHR-renderpass" href="chap42.html#VUID-vkCmdControlVideoCodingKHR-renderpass"></a> <span class="vuid">VUID-vkCmdControlVideoCodingKHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdControlVideoCodingKHR-videocoding" href="chap42.html#VUID-vkCmdControlVideoCodingKHR-videocoding"></a> <span class="vuid">VUID-vkCmdControlVideoCodingKHR-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called inside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdControlVideoCodingKHR-bufferlevel" href="chap42.html#VUID-vkCmdControlVideoCodingKHR-bufferlevel"></a> <span class="vuid">VUID-vkCmdControlVideoCodingKHR-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap42.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decode<br>
Encode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoCodingControlInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoCodingControlInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoCodingControlInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                 <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                     <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoCodingControlFlagsKHR</span>    <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoCodingControlInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap42.html#VkVideoCodingControlFlagsKHR">VkVideoCodingControlFlagsKHR</a>
specifying control flags.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-flags-07018" href="chap42.html#VUID-VkVideoCodingControlInfoKHR-flags-07018"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-flags-07018</span><br>

If <code>flags</code> includes
<code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_BIT_KHR</code>, then the
<code>pNext</code> chain <strong class="purple">must</strong> include a <a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>
structure</p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-flags-07019" href="chap42.html#VUID-VkVideoCodingControlInfoKHR-flags-07019"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-flags-07019</span><br>

If <code>flags</code> includes
<code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_LAYER_BIT_KHR</code>, then
the <code>pNext</code> chain <strong class="purple">must</strong> include a
<a href="chap42.html#VkVideoEncodeRateControlLayerInfoKHR">VkVideoEncodeRateControlLayerInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-flags-07020" href="chap42.html#VUID-VkVideoCodingControlInfoKHR-flags-07020"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-flags-07020</span><br>

If <code>flags</code> includes
<code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_BIT_KHR</code>, then it <strong class="purple">must</strong>
not also include
<code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_LAYER_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-flags-07021" href="chap42.html#VUID-VkVideoCodingControlInfoKHR-flags-07021"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-flags-07021</span><br>

If <code>flags</code> includes
<code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_BIT_KHR</code>, the
<code>rateControlMode</code> member of <a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>
included in the <code>pNext</code> chain is not
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_DEFAULT_KHR</code> or
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_DISABLED_BIT_KHR</code>, and the bound
video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code>, then the <code>pNext</code>
chain <strong class="purple">must</strong> include a <a href="chap42.html#VkVideoEncodeH264RateControlInfoEXT">VkVideoEncodeH264RateControlInfoEXT</a>
structure</p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-pNext-07022" href="chap42.html#VUID-VkVideoCodingControlInfoKHR-pNext-07022"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-pNext-07022</span><br>

If the <code>pNext</code> chain includes a
<a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>, and
<a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>::<code>layerCount</code> is greater than
<code>1</code>, then
<a href="chap42.html#VkVideoEncodeH264RateControlInfoEXT">VkVideoEncodeH264RateControlInfoEXT</a>::<code>temporalLayerCount</code>
<strong class="purple">must</strong> be equal to <code>layerCount</code></p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-flags-07023" href="chap42.html#VUID-VkVideoCodingControlInfoKHR-flags-07023"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-flags-07023</span><br>

If <code>flags</code> includes
<code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_LAYER_BIT_KHR</code> and the
bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code>, then the <code>pNext</code>
chain <strong class="purple">must</strong> include a <a href="chap42.html#VkVideoEncodeH264RateControlLayerInfoEXT">VkVideoEncodeH264RateControlLayerInfoEXT</a>
structure</p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-flags-07024" href="chap42.html#VUID-VkVideoCodingControlInfoKHR-flags-07024"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-flags-07024</span><br>

If <code>flags</code> includes
<code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_BIT_KHR</code>, the
<code>rateControlMode</code> member of <a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>
included in the <code>pNext</code> chain is not
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_DEFAULT_KHR</code> or
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_DISABLED_BIT_KHR</code>, and the bound
video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H265_BIT_EXT</code>, then the <code>pNext</code>
chain <strong class="purple">must</strong> include a <a href="chap42.html#VkVideoEncodeH265RateControlInfoEXT">VkVideoEncodeH265RateControlInfoEXT</a>
structure</p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-pNext-07025" href="chap42.html#VUID-VkVideoCodingControlInfoKHR-pNext-07025"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-pNext-07025</span><br>

If the <code>pNext</code> chain includes a
<a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>, and
<a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>::<code>layerCount</code> is greater than
<code>1</code>, then <a href="chap42.html#VkVideoEncodeH265RateControlInfoEXT">VkVideoEncodeH265RateControlInfoEXT</a>::<code>subLayerCount</code>
<strong class="purple">must</strong> be equal to <code>layerCount</code></p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-flags-07026" href="chap42.html#VUID-VkVideoCodingControlInfoKHR-flags-07026"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-flags-07026</span><br>

If <code>flags</code> includes
<code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_LAYER_BIT_KHR</code> and the
bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H265_BIT_EXT</code>, then the <code>pNext</code>
chain <strong class="purple">must</strong> include a <a href="chap42.html#VkVideoEncodeH265RateControlLayerInfoEXT">VkVideoEncodeH265RateControlLayerInfoEXT</a>
structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoCodingControlInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_CODING_CONTROL_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-pNext-pNext" href="chap42.html#VUID-VkVideoCodingControlInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap42.html#VkVideoEncodeH264RateControlInfoEXT">VkVideoEncodeH264RateControlInfoEXT</a>, <a href="chap42.html#VkVideoEncodeH264RateControlLayerInfoEXT">VkVideoEncodeH264RateControlLayerInfoEXT</a>, <a href="chap42.html#VkVideoEncodeH265RateControlInfoEXT">VkVideoEncodeH265RateControlInfoEXT</a>, <a href="chap42.html#VkVideoEncodeH265RateControlLayerInfoEXT">VkVideoEncodeH265RateControlLayerInfoEXT</a>, <a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>, or <a href="chap42.html#VkVideoEncodeRateControlLayerInfoKHR">VkVideoEncodeRateControlLayerInfoKHR</a></p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-sType-unique" href="chap42.html#VUID-VkVideoCodingControlInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-flags-parameter" href="chap42.html#VUID-VkVideoCodingControlInfoKHR-flags-parameter"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap42.html#VkVideoCodingControlFlagBitsKHR">VkVideoCodingControlFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-flags-requiredbitmask" href="chap42.html#VUID-VkVideoCodingControlInfoKHR-flags-requiredbitmask"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-flags-requiredbitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in <a href="chap42.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a>::<code>flags</code>,
specifying the video coding control parameters to be modified, are:</p>
</div>
<div id="VkVideoCodingControlFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoCodingControlFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_CODING_CONTROL_RESET_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
<span class="cp">#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_KHR_video_encode_queue</span>
    <span class="n">VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
<span class="cp">#endif
#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_KHR_video_encode_queue</span>
    <span class="n">VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_LAYER_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
<span class="cp">#endif
</span><span class="p">}</span> <span class="n">VkVideoCodingControlFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_CODING_CONTROL_RESET_BIT_KHR</code> indicates a request for the
bound video session to be reset before other coding control parameters
are applied.</p>
</li>
<li>
<p><code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_BIT_KHR</code> indicates that
the coding control parameters include video encode rate control
parameters (see <a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>).</p>
</li>
<li>
<p><code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_LAYER_BIT_KHR</code>
indicates that the coding control parameters include video encode rate
control layer parameters (see
<a href="chap42.html#VkVideoEncodeRateControlLayerInfoKHR">VkVideoEncodeRateControlLayerInfoKHR</a>).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoCodingControlFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoCodingControlFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoCodingControlFlagsKHR</code> is a bitmask type for setting a mask of
zero or more <a href="chap42.html#VkVideoCodingControlFlagBitsKHR">VkVideoCodingControlFlagBitsKHR</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="video-decode-operations"><a class="anchor" href="chap42.html#video-decode-operations"></a>42.10. Video Decode Operations</h3>
<div id="decode-output-picture" class="paragraph">
<p>Video decode operations consume compressed video data from a video bitstream
buffer and zero or more reference pictures, and produce a <em>decode output
picture</em> and an optional <a href="chap42.html#reconstructed-picture">reconstructed picture</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note:</div>
<div class="paragraph">
<p>Such decode output pictures can be shared with the <a href="chap42.html#dpb">Decoded Picture
Buffer</a>, and can also be used
as the <a href="chap42.html#encode-input-picture">input</a> of video encode operations,
with graphics or compute operations,
or with <a href="chap34.html">Window System Integration</a> APIs,
depending on the capabilities of the implementation.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Video decode operations <strong class="purple">may</strong> access the following resources in the
<code>VK_PIPELINE_STAGE_2_VIDEO_DECODE_BIT_KHR</code> stage:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The source video bitstream buffer range and the image subregions
corresponding to the list of <a href="chap42.html#decode-active-reference-picture-info">active reference pictures</a> with access
<code>VK_ACCESS_2_VIDEO_DECODE_READ_BIT_KHR</code>.</p>
</li>
<li>
<p>The image subregions corresponding to the target
<a href="chap42.html#decode-output-picture-info">decode output picture</a> and
<a href="chap42.html#decode-reconstructed-picture-info">reconstructed picture</a> with access
<code>VK_ACCESS_2_VIDEO_DECODE_WRITE_BIT_KHR</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The image subresource of each <a href="chap42.html#video-picture-resources">video picture
resource</a> accessed by the video coding operation is specified using a
corresponding <a href="chap42.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> structure.
Each such image subresource <strong class="purple">must</strong> be in the appropriate image layout as
follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the image subresource is used in the video decode operation only as
<a href="chap42.html#decode-output-picture">decode output picture</a>, then it <strong class="purple">must</strong> be in the
<code>VK_IMAGE_LAYOUT_VIDEO_DECODE_DST_KHR</code> layout.</p>
</li>
<li>
<p>If the image subresource is used in the video decode operation both as
<a href="chap42.html#decode-output-picture">decode output picture</a> and
<a href="chap42.html#reconstructed-picture">reconstructed picture</a>, then it <strong class="purple">must</strong> be in the
<code>VK_IMAGE_LAYOUT_VIDEO_DECODE_DPB_KHR</code> layout.</p>
</li>
<li>
<p>If the image subresource is used in the video decode operation only as
<a href="chap42.html#reconstructed-picture">reconstructed picture</a>, then it <strong class="purple">must</strong> be in the
<code>VK_IMAGE_LAYOUT_VIDEO_DECODE_DPB_KHR</code> layout.</p>
</li>
<li>
<p>If the image subresource is used in the video decode operation as a
<a href="chap42.html#reference-picture">reference picture</a>, then it <strong class="purple">must</strong> be in the
<code>VK_IMAGE_LAYOUT_VIDEO_DECODE_DPB_KHR</code> layout.</p>
</li>
</ul>
</div>
<div id="decode-unsuccessful" class="paragraph">
<p>A video decode operation <strong class="purple">may</strong> complete unsuccessfully.
In this case the <a href="chap42.html#decode-output-picture">decode output picture</a> will have
undefined contents.
Similarly, if a <a href="chap42.html#reconstructed-picture">reconstructed picture</a> is
specified, it will also have undefined contents, and the activated DPB slot
will have an <a href="chap42.html#dpb-slot-states">invalid picture reference</a>.</p>
</div>
<div class="sect3">
<h4 id="decode-codec-specific-semantics"><a class="anchor" href="chap42.html#decode-codec-specific-semantics"></a>42.10.1. Codec-Specific Semantics</h4>
<div class="paragraph">
<p>The following aspects of video decode operations are codec-specific:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The interpretation of the contents of the source video bitstream buffer
range.</p>
</li>
<li>
<p>The construction and interpretation of the list of
<a href="chap42.html#decode-active-reference-picture-info">active reference pictures</a> and
the interpretation of the picture data referred to by the corresponding
image subregions.</p>
</li>
<li>
<p>The construction and interpretation of information related to the
<a href="chap42.html#decode-output-picture-info">decode output picture</a> and the generation
of picture data to the corresponding image subregion.</p>
</li>
<li>
<p>The construction and interpretation of information related to the
optional <a href="chap42.html#decode-reconstructed-picture-info">reconstructed picture</a> and
the generation of picture data to the corresponding image subregion.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These codec-specific behaviors are defined for each video codec operation
separately.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the used video codec operation is
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>, then the
codec-specific aspects of the video decoding process are performed as
defined in the <a href="chap42.html#decode-h264">H.264 Decode Operations</a> section.</p>
</li>
<li>
<p>If the used video codec operation is
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then the
codec-specific aspects of the video decoding process are performed as
defined in the <a href="chap42.html#decode-h265">H.265 Decode Operations</a> section.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="decode-operation-steps"><a class="anchor" href="chap42.html#decode-operation-steps"></a>42.10.2. Video Decode Operation Steps</h4>
<div class="paragraph">
<p>Each video decode operation performs the following steps in the
<code>VK_PIPELINE_STAGE_2_VIDEO_DECODE_BIT_KHR</code> stage:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Reads the encoded video data from the source video bitstream buffer
range.</p>
</li>
<li>
<p>Performs picture reconstruction of the encoded video data according to
the <a href="chap42.html#decode-codec-specific-semantics">codec-specific semantics</a>,
applying any prediction data read from the <a href="chap42.html#active-reference-pictures">active reference pictures</a> in the process;</p>
</li>
<li>
<p>Writes the decoded picture data to the <a href="chap42.html#decode-output-picture">decode
output picture</a>, and to the <a href="chap42.html#reconstructed-picture">reconstructed
picture</a>, if one is specified and is different from the decode output
picture, according to the <a href="chap42.html#decode-codec-specific-semantics">codec-specific semantics</a>;</p>
</li>
<li>
<p>When <a href="chap42.html#decode-reconstructed-picture-info">reconstructed picture
information</a> is provided, the requested <a href="chap42.html#dpb-slot">DPB slot</a> is
<a href="chap42.html#dpb-slot-states">activated</a> with the specified picture and the DPB
slot index is associated with the corresponding
<a href="chap42.html#bound-reference-picture-resources">bound reference picture resource</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_capabilities"><a class="anchor" href="chap42.html#_capabilities"></a>42.10.3. Capabilities</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>When calling <a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> with
<code>pVideoProfile-&gt;videoCodecOperation</code> specifying a decode operation, the
<code>VkVideoDecodeCapabilitiesKHR</code> structure <strong class="purple">must</strong> be included in the
<code>pNext</code> chain of the <a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> structure to retrieve
capabilities specific to video decoding.</p>
</div>
<div class="paragraph">
<p>The <code>VkVideoDecodeCapabilitiesKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoDecodeCapabilitiesKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeCapabilitiesKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                    <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                              <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoDecodeCapabilityFlagsKHR</span>    <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeCapabilitiesKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap42.html#VkVideoDecodeCapabilityFlagBitsKHR">VkVideoDecodeCapabilityFlagBitsKHR</a>
describing the supported video decoding capabilities.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeCapabilitiesKHR-sType-sType" href="chap42.html#VUID-VkVideoDecodeCapabilitiesKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeCapabilitiesKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_CAPABILITIES_KHR</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">may</strong> be set in <a href="chap42.html#VkVideoDecodeCapabilitiesKHR">VkVideoDecodeCapabilitiesKHR</a>::<code>flags</code>,
indicating the decoding capabilities supported, are:</p>
</div>
<div id="VkVideoDecodeCapabilityFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoDecodeCapabilityFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_COINCIDE_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_DISTINCT_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoDecodeCapabilityFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_COINCIDE_BIT_KHR</code>
indicates support for using the same video picture resource as the
<a href="chap42.html#reconstructed-picture">reconstructed picture</a> and
<a href="chap42.html#decode-output-picture">decode output picture</a> in a video decode
operation.</p>
</li>
<li>
<p><code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_DISTINCT_BIT_KHR</code>
indicates support for using distinct video picture resources as the
<a href="chap42.html#reconstructed-picture">reconstructed picture</a> and
<a href="chap42.html#decode-output-picture">decode output picture</a> in a video decode
operation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Implementations are only <strong class="purple">required</strong> to support one of
<code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_COINCIDE_BIT_KHR</code> and
<code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_DISTINCT_BIT_KHR</code>.
Accordingly, applications <strong class="purple">should</strong> handle both cases to maximize portability.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note:</div>
<div class="paragraph">
<p>If both <code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_COINCIDE_BIT_KHR</code> and
<code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_DISTINCT_BIT_KHR</code> are
supported, an application can choose to create separate images for decode
DPB and decode output.
E.g. in cases when linear tiling is preferred (and supported) for the decode
output picture and the DPB requires optimal tiling, this avoids the need for
a separate copy at the expense of additional memory bandwidth requirements
during decoding.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoDecodeCapabilityFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoDecodeCapabilityFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoDecodeCapabilityFlagsKHR</code> is a bitmask type for setting a mask
of zero or more <a href="chap42.html#VkVideoDecodeCapabilityFlagBitsKHR">VkVideoDecodeCapabilityFlagBitsKHR</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_video_decode_commands"><a class="anchor" href="chap42.html#_video_decode_commands"></a>42.10.4. Video Decode Commands</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To launch video decode operations, call:</p>
</div>
<div id="vkCmdDecodeVideoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_queue</span>
<span class="kt">void</span> <span class="nf">vkCmdDecodeVideoKHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkVideoDecodeInfoKHR</span><span class="o">*</span>                 <span class="n">pDecodeInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer in which to record the
command.</p>
</li>
<li>
<p><code>pDecodeInfo</code> is a pointer to a <a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a> structure
specifying the parameters of the video decode operations.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each call issues one or more video decode operations.
The implicit parameter <code>opCount</code> corresponds to the number of video
decode operations issued by the command.
After calling this command, the
<a href="chap18.html#queries-operation-active-query-index">active query index</a> of each
<a href="chap18.html#queries-operation-active">active</a> query is incremented by <code>opCount</code>.</p>
</div>
<div class="paragraph">
<p>Currently each call to this command results in the issue of a single video
decode operation.</p>
</div>
<div id="decode-active-reference-picture-info" class="dlist">
<dl>
<dt class="hdlist1">Active Reference Picture Information</dt>
<dd>
<p>The list of <a href="chap42.html#active-reference-pictures">active reference pictures</a> used by
a video decode operation is a list of image subregions used as the source of
<a href="chap42.html#reference-picture">reference picture</a> data and related parameters, and is
derived from the <a href="chap42.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structures provided as
the elements of the <code>pDecodeInfo-&gt;pReferenceSlots</code> array.
For each element of <code>pDecodeInfo-&gt;pReferenceSlots</code>, one or more elements
are added to the active reference picture list, as defined by the
<a href="chap42.html#decode-codec-specific-semantics">codec-specific semantics</a>.
Each element of this list contains the following information:</p>
<div class="ulist">
<ul>
<li>
<p>The image subregion within the image subresource
<a href="chap42.html#video-image-subresource-reference">referred</a> to by the
<a href="chap42.html#video-picture-resources">video picture resource</a> used as the reference
picture.</p>
</li>
<li>
<p>The <a href="chap42.html#dpb-slot">DPB slot</a> index the reference picture is associated
with.</p>
</li>
<li>
<p>The codec-specific reference information related to the reference
picture.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div id="decode-reconstructed-picture-info" class="dlist">
<dl>
<dt class="hdlist1">Reconstructed Picture Information</dt>
<dd>
<p>Information related to the optional <a href="chap42.html#reconstructed-picture">reconstructed
picture</a> used by a video decode operation is derived from the
<a href="chap42.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structure pointed to by
<code>pDecodeInfo-&gt;pSetupReferenceSlot</code>, if not <code>NULL</code>, as defined by the
<a href="chap42.html#decode-codec-specific-semantics">codec-specific semantics</a>, and consists
of the following:</p>
<div class="ulist">
<ul>
<li>
<p>The image subregion within the image subresource
<a href="chap42.html#video-image-subresource-reference">referred</a> to by the
<a href="chap42.html#video-picture-resources">video picture resource</a> used as the
reconstructed picture.</p>
</li>
<li>
<p>The <a href="chap42.html#dpb-slot">DPB slot</a> index to <a href="chap42.html#dpb-slot-states">activate</a> with the
reconstructed picture.</p>
</li>
<li>
<p>The codec-specific reference information related to the reconstructed
picture.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div id="decode-output-picture-info" class="dlist">
<dl>
<dt class="hdlist1">Decode Output Picture Information</dt>
<dd>
<p>Information related to the <a href="chap42.html#decode-output-picture">decode output picture</a>
used by a video decode operation is derived from
<code>pDecodeInfo-&gt;dstPictureResource</code> and any codec-specific parameters
provided in the <code>pDecodeInfo-&gt;pNext</code> chain, as defined by the
<a href="chap42.html#decode-codec-specific-semantics">codec-specific semantics</a>, and consists
of the following:</p>
<div class="ulist">
<ul>
<li>
<p>The image subregion within the image subresource
<a href="chap42.html#video-image-subresource-reference">referred</a> to by the
<a href="chap42.html#video-picture-resources">video picture resource</a> used as the decode
output picture.</p>
</li>
<li>
<p>The codec-specific picture information related to the decode output
picture.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Several limiting values are defined below that are referenced by the
relevant valid usage statements of this command.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Let <code>uint32_t activeReferencePictureCount</code> be the size of the list of
active reference pictures used by the video decode operation.
Unless otherwise defined, <code>activeReferencePictureCount</code> is set to
the value of <code>pDecodeInfo-&gt;referenceSlotCount</code>.</p>
<div class="ulist">
<ul>
<li>
<p>If the bound video session was created with an <a href="chap42.html#decode-h264-profile">H.264 decode profile</a>, then let <code>activeReferencePictureCount</code> be
the value of <code>pDecodeInfo-&gt;referenceSlotCount</code> plus the number of
elements of the <code>pDecodeInfo-&gt;pReferenceSlots</code> array that have a
<a href="chap42.html#VkVideoDecodeH264DpbSlotInfoKHR">VkVideoDecodeH264DpbSlotInfoKHR</a> structure included in their
<code>pNext</code> chain with both
<code>pStdReferenceInfo-&gt;flags.top_field_flag</code> and
<code>pStdReferenceInfo-&gt;flags.bottom_field_flag</code> set.</p>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>This means that the elements of <code>pDecodeInfo-&gt;pReferenceSlots</code> that
include both a top and bottom field reference are counted as two separate
active reference pictures, as described in the
<a href="chap42.html#decode-h264-active-reference-picture-info">active reference picture list
construction rules for H.264 decode operations</a>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Let <code>VkOffset2D codedOffsetGranularity</code> be the minimum alignment
requirement for the coded offset of video picture resources.
Unless otherwise defined, the value of the <code>x</code> and <code>y</code> members
of <code>codedOffsetGranularity</code> are <code>0</code>.</p>
<div class="ulist">
<ul>
<li>
<p>If the bound video session was created with an <a href="chap42.html#decode-h264-profile">H.264 decode profile</a> with a
<a href="chap42.html#VkVideoDecodeH264ProfileInfoKHR">VkVideoDecodeH264ProfileInfoKHR</a>::<code>pictureLayout</code> of
<code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_SEPARATE_PLANES_BIT_KHR</code>,
then <code>codedOffsetGranularity</code> is equal to
<a href="chap42.html#VkVideoDecodeH264CapabilitiesKHR">VkVideoDecodeH264CapabilitiesKHR</a>::<code>fieldOffsetGranularity</code>,
as returned by <a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> for that
video profile.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Let <code>uint32_t dpbFrameUseCount[]</code> be an array of size <code>maxDpbSlots</code>,
where <code>maxDpbSlots</code> is the
<a href="chap42.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>::<code>maxDpbSlots</code> the bound video
session was created with, with each element indicating the number of
times a frame associated with the corresponding DPB slot index is
referred to by the video coding operation.
Let the initial value of each element of the array be <code>0</code>.</p>
<div class="ulist">
<ul>
<li>
<p>If <code>pDecodeInfo-&gt;pSetupReferenceSlot</code> is not <code>NULL</code>, then
<code>dpbFrameUseCount[i]</code> is incremented by one, where <code>i</code> equals
<code>pDecodeInfo-&gt;pSetupReferenceSlot-&gt;slotIndex</code>.
If the bound video session object was created with an
<a href="chap42.html#decode-h264-profile">H.264 decode profile</a>, then
<code>dpbFrameUseCount[i]</code> is decremented by one if either
<code>pStdReferenceInfo-&gt;flags.top_field_flag</code> or
<code>pStdReferenceInfo-&gt;flags.bottom_field_flag</code> is set in the
<a href="chap42.html#VkVideoDecodeH264DpbSlotInfoKHR">VkVideoDecodeH264DpbSlotInfoKHR</a> structure in the
<code>pDecodeInfo-&gt;pSetupReferenceSlot-&gt;pNext</code> chain.</p>
</li>
<li>
<p>For each element of <code>pDecodeInfo-&gt;pReferenceSlots</code>,
<code>dpbFrameUseCount[i]</code> is incremented by one, where <code>i</code> equals the
<code>slotIndex</code> member of the corresponding element.
If the bound video session object was created with an
<a href="chap42.html#decode-h264-profile">H.264 decode profile</a>, then
<code>dpbFrameUseCount[i]</code> is decremented by one if either
<code>pStdReferenceInfo-&gt;flags.top_field_flag</code> or
<code>pStdReferenceInfo-&gt;flags.bottom_field_flag</code> is set in the
<a href="chap42.html#VkVideoDecodeH264DpbSlotInfoKHR">VkVideoDecodeH264DpbSlotInfoKHR</a> structure in the <code>pNext</code>
chain of the corresponding element of
<code>pDecodeInfo-&gt;pReferenceSlots</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Let <code>uint32_t dpbTopFieldUseCount[]</code> and <code>uint32_t
dpbBottomFieldUseCount[]</code> be arrays of size <code>maxDpbSlots</code>, where
<code>maxDpbSlots</code> is the
<a href="chap42.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>::<code>maxDpbSlots</code> the bound video
session was created with, with each element indicating the number of
times the top field or the bottom field, respectively, associated with
the corresponding DPB slot index is referred to by the video coding
operation.
Let the initial value of each element of the arrays be <code>0</code>.</p>
<div class="ulist">
<ul>
<li>
<p>If the bound video session object was created with an
<a href="chap42.html#decode-h264-profile">H.264 decode profile</a> and
<code>pDecodeInfo-&gt;pSetupReferenceSlot</code> is not <code>NULL</code>, then perform the
following:</p>
<div class="ulist">
<ul>
<li>
<p>If <code>pStdReferenceInfo-&gt;flags.top_field_flag</code> is set in the
<a href="chap42.html#VkVideoDecodeH264DpbSlotInfoKHR">VkVideoDecodeH264DpbSlotInfoKHR</a> structure in the
<code>pDecodeInfo-&gt;pSetupReferenceSlot-&gt;pNext</code> chain, then
<code>dpbTopFieldUseCount[i]</code> is incremented by one, where <code>i</code> equals
<code>pDecodeInfo-&gt;pSetupReferenceSlot-&gt;slotIndex</code>.</p>
</li>
<li>
<p>If <code>pStdReferenceInfo-&gt;flags.bottom_field_flag</code> is set in the
<a href="chap42.html#VkVideoDecodeH264DpbSlotInfoKHR">VkVideoDecodeH264DpbSlotInfoKHR</a> structure in the
<code>pDecodeInfo-&gt;pSetupReferenceSlot-&gt;pNext</code> chain, then
<code>dpbBottomFieldUseCount[i]</code> is incremented by one, where <code>i</code>
equals <code>pDecodeInfo-&gt;pSetupReferenceSlot-&gt;slotIndex</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If the bound video session object was created with an
<a href="chap42.html#decode-h264-profile">H.264 decode profile</a>, then perform the
following for each element of <code>pDecodeInfo-&gt;pReferenceSlots</code>:</p>
<div class="ulist">
<ul>
<li>
<p>If <code>pStdReferenceInfo-&gt;flags.top_field_flag</code> is set in the
<a href="chap42.html#VkVideoDecodeH264DpbSlotInfoKHR">VkVideoDecodeH264DpbSlotInfoKHR</a> structure in the <code>pNext</code>
chain of the element, then <code>dpbTopFieldUseCount[i]</code> is incremented by
one, where <code>i</code> equals the <code>slotIndex</code> member of the element.</p>
</li>
<li>
<p>If <code>pStdReferenceInfo-&gt;flags.bottom_field_flag</code> is set in the
<a href="chap42.html#VkVideoDecodeH264DpbSlotInfoKHR">VkVideoDecodeH264DpbSlotInfoKHR</a> structure in the <code>pNext</code>
chain of the element, then <code>dpbBottomFieldUseCount[i]</code> is incremented
by one, where <code>i</code> equals the <code>slotIndex</code> member of the
element.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-None-07011" href="chap42.html#VUID-vkCmdDecodeVideoKHR-None-07011"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-None-07011</span><br>

The bound video session <strong class="purple">must</strong> not be in <a href="chap42.html#video-session-uninitialized">uninitialized</a> state at the time the command is executed on the device</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-opCount-07134" href="chap42.html#VUID-vkCmdDecodeVideoKHR-opCount-07134"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-opCount-07134</span><br>

For each <a href="chap18.html#queries-operation-active">active</a> query, the
<a href="chap18.html#queries-operation-active-query-index">active query index</a>
corresponding to the query type of that query plus <code>opCount</code> <strong class="purple">must</strong>
be less than or equal to the
<a href="chap18.html#queries-operation-last-activatable-query-index">last activatable query
index</a> corresponding to the query type of that query plus one</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07135" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07135"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07135</span><br>

<code>pDecodeInfo-&gt;srcBuffer</code> <strong class="purple">must</strong> be <a href="chap42.html#video-profile-compatibility">compatible</a> with the video profile the bound video session was created
with</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-commandBuffer-07136" href="chap42.html#VUID-vkCmdDecodeVideoKHR-commandBuffer-07136"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-commandBuffer-07136</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
then <code>pDecodeInfo-&gt;srcBuffer</code> <strong class="purple">must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-commandBuffer-07137" href="chap42.html#VUID-vkCmdDecodeVideoKHR-commandBuffer-07137"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-commandBuffer-07137</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
then <code>pDecodeInfo-&gt;srcBuffer</code> <strong class="purple">must</strong> be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07138" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07138"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07138</span><br>

<code>pDecodeInfo-&gt;srcBufferOffset</code> <strong class="purple">must</strong> be an integer multiple of
<a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>minBitstreamBufferOffsetAlignment</code>,
as returned by <a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> for the
video profile the bound video session was created with</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07139" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07139"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07139</span><br>

<code>pDecodeInfo-&gt;srcBufferRange</code> <strong class="purple">must</strong> be an integer multiple of
<a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>minBitstreamBufferSizeAlignment</code>, as
returned by <a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> for the video
profile the bound video session was created with</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07140" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07140"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07140</span><br>

If <code>pDecodeInfo-&gt;pSetupReferenceSlot</code> is not <code>NULL</code> and
<a href="chap42.html#VkVideoDecodeCapabilitiesKHR">VkVideoDecodeCapabilitiesKHR</a>::<code>flags</code> does not include
<code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_COINCIDE_BIT_KHR</code>, as
returned by <a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> for the video
profile the bound video session was created with, then the video picture
resources specified by <code>pDecodeInfo-&gt;dstPictureResource</code> and
<code>pDecodeInfo-&gt;pSetupReferenceSlot-&gt;pPictureResource</code> <strong class="purple">must</strong> not
<a href="chap42.html#video-picture-resource-matching">match</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07141" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07141"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07141</span><br>

If <code>pDecodeInfo-&gt;pSetupReferenceSlot</code> is not <code>NULL</code> and
<a href="chap42.html#VkVideoDecodeCapabilitiesKHR">VkVideoDecodeCapabilitiesKHR</a>::<code>flags</code> does not include
<code>VK_VIDEO_DECODE_CAPABILITY_DPB_AND_OUTPUT_DISTINCT_BIT_KHR</code>, as
returned by <a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> for the video
profile the bound video session was created with, then the video picture
resources specified by <code>pDecodeInfo-&gt;dstPictureResource</code> and
<code>pDecodeInfo-&gt;pSetupReferenceSlot-&gt;pPictureResource</code> <strong class="purple">must</strong>
<a href="chap42.html#video-picture-resource-matching">match</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07142" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07142"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07142</span><br>

<code>pDecodeInfo-&gt;dstPictureResource.imageViewBinding</code> <strong class="purple">must</strong> be
<a href="chap42.html#video-profile-compatibility">compatible</a> with the video profile the
bound video session was created with</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07143" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07143"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07143</span><br>

The format of <code>pDecodeInfo-&gt;dstPictureResource.imageViewBinding</code>
<strong class="purple">must</strong> match the <a href="chap42.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>::<code>pictureFormat</code>
the bound video session was created with</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07144" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07144"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07144</span><br>

<code>pDecodeInfo-&gt;dstPictureResource.codedOffset</code> <strong class="purple">must</strong> be an integer
multiple of <code>codedOffsetGranularity</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07145" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07145"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07145</span><br>

<code>pDecodeInfo-&gt;dstPictureResource.codedExtent</code> <strong class="purple">must</strong> be between
<code>minCodedExtent</code> and <code>maxCodedExtent</code>, inclusive, the bound
video session was created with</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07146" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07146"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07146</span><br>

<code>pDecodeInfo-&gt;dstPictureResource.imageViewBinding</code> <strong class="purple">must</strong> have been
created with <code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-commandBuffer-07147" href="chap42.html#VUID-vkCmdDecodeVideoKHR-commandBuffer-07147"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-commandBuffer-07147</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
then <code>pDecodeInfo-&gt;dstPictureResource.imageViewBinding</code> <strong class="purple">must</strong> not
have been created from a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-commandBuffer-07148" href="chap42.html#VUID-vkCmdDecodeVideoKHR-commandBuffer-07148"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-commandBuffer-07148</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
then <code>pDecodeInfo-&gt;dstPictureResource.imageViewBinding</code> <strong class="purple">must</strong> have
been created from a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07170" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07170"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07170</span><br>

If <code>pDecodeInfo-&gt;pSetupReferenceSlot</code> is not <code>NULL</code>, then
<code>pDecodeInfo-&gt;pSetupReferenceSlot-&gt;slotIndex</code> <strong class="purple">must</strong> be less than the
<a href="chap42.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>::<code>maxDpbSlots</code> specified when the
bound video session was created</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07173" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07173"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07173</span><br>

If <code>pDecodeInfo-&gt;pSetupReferenceSlot</code> is not <code>NULL</code>, then
<code>pDecodeInfo-&gt;pSetupReferenceSlot-&gt;pPictureResource-&gt;codedOffset</code>
<strong class="purple">must</strong> be an integer multiple of <code>codedOffsetGranularity</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07149" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07149"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07149</span><br>

If <code>pDecodeInfo-&gt;pSetupReferenceSlot</code> is not <code>NULL</code>, then
<code>pDecodeInfo-&gt;pSetupReferenceSlot-&gt;pPictureResource</code> <strong class="purple">must</strong>
<a href="chap42.html#video-picture-resource-matching">match</a> one of the
<a href="chap42.html#bound-reference-picture-resources">bound reference picture resource</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-activeReferencePictureCount-07150" href="chap42.html#VUID-vkCmdDecodeVideoKHR-activeReferencePictureCount-07150"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-activeReferencePictureCount-07150</span><br>

<code>activeReferencePictureCount</code> <strong class="purple">must</strong> be less than or equal to the
<a href="chap42.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>::<code>maxActiveReferencePictures</code>
specified when the bound video session was created</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-slotIndex-07256" href="chap42.html#VUID-vkCmdDecodeVideoKHR-slotIndex-07256"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-slotIndex-07256</span><br>

The <code>slotIndex</code> member of each element of
<code>pDecodeInfo-&gt;pReferenceSlots</code> <strong class="purple">must</strong> be less than the
<a href="chap42.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>::<code>maxDpbSlots</code> specified when the
bound video session was created</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-codedOffset-07257" href="chap42.html#VUID-vkCmdDecodeVideoKHR-codedOffset-07257"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-codedOffset-07257</span><br>

The <code>codedOffset</code> member of the <a href="chap42.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a>
structure pointed to by the <code>pPictureResource</code> member of each
element of <code>pDecodeInfo-&gt;pReferenceSlots</code> <strong class="purple">must</strong> be an integer
multiple of <code>codedOffsetGranularity</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07151" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07151"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07151</span><br>

The <code>pPictureResource</code> member of each element of
<code>pDecodeInfo-&gt;pReferenceSlots</code> <strong class="purple">must</strong>
<a href="chap42.html#video-picture-resource-matching">match</a> one of the
<a href="chap42.html#bound-reference-picture-resources">bound reference picture resource</a>
associated with the DPB slot index specified in the <code>slotIndex</code>
member of that element</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07264" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07264"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07264</span><br>

Each video picture resource corresponding to the <code>pPictureResource</code>
member specified in the elements of <code>pDecodeInfo-&gt;pReferenceSlots</code>
<strong class="purple">must</strong> be <a href="chap42.html#video-picture-resource-uniqueness">unique</a> within
<code>pDecodeInfo-&gt;pReferenceSlots</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-dpbFrameUseCount-07176" href="chap42.html#VUID-vkCmdDecodeVideoKHR-dpbFrameUseCount-07176"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-dpbFrameUseCount-07176</span><br>

All elements of <code>dpbFrameUseCount</code> <strong class="purple">must</strong> be less than or equal to
<code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-dpbTopFieldUseCount-07177" href="chap42.html#VUID-vkCmdDecodeVideoKHR-dpbTopFieldUseCount-07177"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-dpbTopFieldUseCount-07177</span><br>

All elements of <code>dpbTopFieldUseCount</code> <strong class="purple">must</strong> be less than or equal to
<code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-dpbBottomFieldUseCount-07178" href="chap42.html#VUID-vkCmdDecodeVideoKHR-dpbBottomFieldUseCount-07178"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-dpbBottomFieldUseCount-07178</span><br>

All elements of <code>dpbBottomFieldUseCount</code> <strong class="purple">must</strong> be less than or equal
to <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07252" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07252"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07252</span><br>

If <code>pDecodeInfo-&gt;pSetupReferenceSlot</code> is <code>NULL</code> or
<code>pDecodeInfo-&gt;pSetupReferenceSlot-&gt;pPictureResource</code> does not
<a href="chap42.html#video-image-subresource-reference">refer</a> to the same image
subresource as <code>pDecodeInfo-&gt;dstPictureResource</code>, then the image
subresource <a href="chap42.html#video-image-subresource-reference">referred</a> to by
<code>pDecodeInfo-&gt;dstPictureResource</code> <strong class="purple">must</strong> be in the
<code>VK_IMAGE_LAYOUT_VIDEO_DECODE_DST_KHR</code> layout at the time the video
decode operation is executed on the device</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07253" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07253"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07253</span><br>

If <code>pDecodeInfo-&gt;pSetupReferenceSlot</code> is not <code>NULL</code> and
<code>pDecodeInfo-&gt;pSetupReferenceSlot-&gt;pPictureResource</code>
<a href="chap42.html#video-image-subresource-reference">refers</a> to the same image
subresource as <code>pDecodeInfo-&gt;dstPictureResource</code>, then the image
subresource <a href="chap42.html#video-image-subresource-reference">referred</a> to by
<code>pDecodeInfo-&gt;dstPictureResource</code> <strong class="purple">must</strong> be in the
<code>VK_IMAGE_LAYOUT_VIDEO_DECODE_DPB_KHR</code> layout at the time the video
decode operation is executed on the device</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07254" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07254"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07254</span><br>

If <code>pDecodeInfo-&gt;pSetupReferenceSlot</code> is not <code>NULL</code>, then the image
subresource <a href="chap42.html#video-image-subresource-reference">referred</a> to by
<code>pDecodeInfo-&gt;pSetupReferenceSlot-&gt;pPictureResource</code> <strong class="purple">must</strong> be in the
<code>VK_IMAGE_LAYOUT_VIDEO_DECODE_DPB_KHR</code> layout at the time the video
decode operation is executed on the device</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pPictureResource-07255" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pPictureResource-07255"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pPictureResource-07255</span><br>

The image subresource <a href="chap42.html#video-image-subresource-reference">referred</a> to
by the <code>pPictureResource</code> member of each element of
<code>pDecodeInfo-&gt;pReferenceSlots</code> <strong class="purple">must</strong> be in the
<code>VK_IMAGE_LAYOUT_VIDEO_DECODE_DPB_KHR</code> layout at the time the video
decode operation is executed on the device</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pNext-07152" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pNext-07152"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pNext-07152</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>, then the <code>pNext</code>
chain of <code>pDecodeInfo</code> <strong class="purple">must</strong> include a
<a href="chap42.html#VkVideoDecodeH264PictureInfoKHR">VkVideoDecodeH264PictureInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-None-07258" href="chap42.html#VUID-vkCmdDecodeVideoKHR-None-07258"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-None-07258</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code> but was not created
with <a href="chap42.html#decode-h264-interlaced-support">interlaced frame support</a>, then
the <a href="chap42.html#decode-h264-output-picture-info">decode output picture</a> <strong class="purple">must</strong>
represent a frame</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pSliceOffsets-07153" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pSliceOffsets-07153"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pSliceOffsets-07153</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>, then all elements of
the <code>pSliceOffsets</code> member of the
<a href="chap42.html#VkVideoDecodeH264PictureInfoKHR">VkVideoDecodeH264PictureInfoKHR</a> structure included in the
<code>pNext</code> chain of <code>pDecodeInfo</code> <strong class="purple">must</strong> be less than
<code>pDecodeInfo-&gt;srcBufferRange</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-StdVideoH264SequenceParameterSet-07154" href="chap42.html#VUID-vkCmdDecodeVideoKHR-StdVideoH264SequenceParameterSet-07154"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-StdVideoH264SequenceParameterSet-07154</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>, then the bound video
session parameters object <strong class="purple">must</strong> contain a
<code>StdVideoH264SequenceParameterSet</code> entry with
<code>seq_parameter_set_id</code> matching
<code>StdVideoDecodeH264PictureInfo</code>::<code>seq_parameter_set_id</code> that is
provided in the <code>pStdPictureInfo</code> member of the
<a href="chap42.html#VkVideoDecodeH264PictureInfoKHR">VkVideoDecodeH264PictureInfoKHR</a> structure included in the
<code>pNext</code> chain of <code>pDecodeInfo</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-StdVideoH264PictureParameterSet-07155" href="chap42.html#VUID-vkCmdDecodeVideoKHR-StdVideoH264PictureParameterSet-07155"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-StdVideoH264PictureParameterSet-07155</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>, then the bound video
session parameters object <strong class="purple">must</strong> contain a
<code>StdVideoH264PictureParameterSet</code> entry with
<code>seq_parameter_set_id</code> and <code>pic_parameter_set_id</code> matching
<code>StdVideoDecodeH264PictureInfo</code>::<code>seq_parameter_set_id</code> and
<code>StdVideoDecodeH264PictureInfo</code>::<code>pic_parameter_set_id</code>,
respectively, that are provided in the <code>pStdPictureInfo</code> member of
the <a href="chap42.html#VkVideoDecodeH264PictureInfoKHR">VkVideoDecodeH264PictureInfoKHR</a> structure included in the
<code>pNext</code> chain of <code>pDecodeInfo</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07156" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07156"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07156</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code> and
<code>pDecodeInfo-&gt;pSetupReferenceSlot</code> is not <code>NULL</code>, then the
<code>pNext</code> chain of <code>pDecodeInfo-&gt;pSetupReferenceSlot</code> <strong class="purple">must</strong>
include a <a href="chap42.html#VkVideoDecodeH264DpbSlotInfoKHR">VkVideoDecodeH264DpbSlotInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07259" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07259"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07259</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code> but was not created
with <a href="chap42.html#decode-h264-interlaced-support">interlaced frame support</a>, and
<code>pDecodeInfo-&gt;pSetupReferenceSlot</code> is not <code>NULL</code>, then the
<a href="chap42.html#decode-h264-reconstructed-picture-info">reconstructed picture</a> <strong class="purple">must</strong>
represent a frame</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pNext-07157" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pNext-07157"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pNext-07157</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>, then the <code>pNext</code>
chain of each element of <code>pDecodeInfo-&gt;pReferenceSlots</code> <strong class="purple">must</strong>
include a <a href="chap42.html#VkVideoDecodeH264DpbSlotInfoKHR">VkVideoDecodeH264DpbSlotInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07260" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07260"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07260</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code> but was not created
with <a href="chap42.html#decode-h264-interlaced-support">interlaced frame support</a>, then
each <a href="chap42.html#decode-h264-active-reference-picture-info">active reference
picture</a> corresponding to the elements of
<code>pDecodeInfo-&gt;pReferenceSlots</code> <strong class="purple">must</strong> represent a frame</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07261" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07261"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07261</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>,
<code>pDecodeInfo-&gt;pSetupReferenceSlot</code> is not <code>NULL</code>, and the
<a href="chap42.html#decode-h264-output-picture-info">decode output picture</a> represents a
frame, then the <a href="chap42.html#decode-h264-reconstructed-picture-info">reconstructed
picture</a> <strong class="purple">must</strong> also represent a frame</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07262" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07262"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07262</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>,
<code>pDecodeInfo-&gt;pSetupReferenceSlot</code> is not <code>NULL</code>, and the
<a href="chap42.html#decode-h264-output-picture-info">decode output picture</a> represents a
top field, then the
<a href="chap42.html#decode-h264-reconstructed-picture-info">reconstructed picture</a> <strong class="purple">must</strong>
also represent a top field</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07263" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07263"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07263</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>,
<code>pDecodeInfo-&gt;pSetupReferenceSlot</code> is not <code>NULL</code>, and the
<a href="chap42.html#decode-h264-output-picture-info">decode output picture</a> represents a
bottom field, then the <a href="chap42.html#decode-h264-reconstructed-picture-info">reconstructed picture</a> <strong class="purple">must</strong> also represent a bottom field</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07266" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07266"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07266</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code> and an
<a href="chap42.html#decode-h264-active-reference-picture-info">active reference picture</a>
corresponding to any element of <code>pDecodeInfo-&gt;pReferenceSlots</code>
represents a frame, then the DPB slot index of the bound video session
specified by the <code>slotIndex</code> member of that element <strong class="purple">must</strong> be
currently associated with a frame picture
<a href="chap42.html#video-picture-resource-matching">matching</a> the video picture resource
specified by the <code>pPictureResource</code> member of the same element at
the time the command is executed on the device</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07267" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07267"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07267</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code> and an
<a href="chap42.html#decode-h264-active-reference-picture-info">active reference picture</a>
corresponding to any element of <code>pDecodeInfo-&gt;pReferenceSlots</code>
represents a top field, then the DPB slot index of the bound video
session specified by the <code>slotIndex</code> member of that element <strong class="purple">must</strong> be
currently associated with a top field picture
<a href="chap42.html#video-picture-resource-matching">matching</a> the video picture resource
specified by the <code>pPictureResource</code> member of the same element at
the time the command is executed on the device</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07268" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07268"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07268</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code> and an
<a href="chap42.html#decode-h264-active-reference-picture-info">active reference picture</a>
corresponding to any element of <code>pDecodeInfo-&gt;pReferenceSlots</code>
represents a bottom field, then the DPB slot index of the bound video
session specified by the <code>slotIndex</code> member of that element <strong class="purple">must</strong> be
currently associated with a bottom field picture
<a href="chap42.html#video-picture-resource-matching">matching</a> the video picture resource
specified by the <code>pPictureResource</code> member of the same element at
the time the command is executed on the device</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pNext-07158" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pNext-07158"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pNext-07158</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then the <code>pNext</code>
chain of <code>pDecodeInfo</code> <strong class="purple">must</strong> include a
<a href="chap42.html#VkVideoDecodeH265PictureInfoKHR">VkVideoDecodeH265PictureInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pSliceSegmentOffsets-07159" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pSliceSegmentOffsets-07159"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pSliceSegmentOffsets-07159</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then all elements of
the <code>pSliceSegmentOffsets</code> member of the
<a href="chap42.html#VkVideoDecodeH265PictureInfoKHR">VkVideoDecodeH265PictureInfoKHR</a> structure included in the
<code>pNext</code> chain of <code>pDecodeInfo</code> <strong class="purple">must</strong> be less than
<code>pDecodeInfo-&gt;srcBufferRange</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-StdVideoH265VideoParameterSet-07160" href="chap42.html#VUID-vkCmdDecodeVideoKHR-StdVideoH265VideoParameterSet-07160"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-StdVideoH265VideoParameterSet-07160</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then the bound video
session parameters object <strong class="purple">must</strong> contain a
<code>StdVideoH265VideoParameterSet</code> entry with
<code>vps_video_parameter_set_id</code> matching
<code>StdVideoDecodeH265PictureInfo</code>::<code>sps_video_parameter_set_id</code>
that is provided in the <code>pStdPictureInfo</code> member of the
<a href="chap42.html#VkVideoDecodeH265PictureInfoKHR">VkVideoDecodeH265PictureInfoKHR</a> structure included in the
<code>pNext</code> chain of <code>pDecodeInfo</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-StdVideoH265SequenceParameterSet-07161" href="chap42.html#VUID-vkCmdDecodeVideoKHR-StdVideoH265SequenceParameterSet-07161"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-StdVideoH265SequenceParameterSet-07161</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then the bound video
session parameters object <strong class="purple">must</strong> contain a
<code>StdVideoH265SequenceParameterSet</code> entry with
<code>sps_video_parameter_set_id</code> and <code>sps_seq_parameter_set_id</code>
matching
<code>StdVideoDecodeH265PictureInfo</code>::<code>sps_video_parameter_set_id</code> and
<code>StdVideoDecodeH265PictureInfo</code>::<code>pps_seq_parameter_set_id</code>,
respectively, that are provided in the <code>pStdPictureInfo</code> member of
the <a href="chap42.html#VkVideoDecodeH265PictureInfoKHR">VkVideoDecodeH265PictureInfoKHR</a> structure included in the
<code>pNext</code> chain of <code>pDecodeInfo</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-StdVideoH265PictureParameterSet-07162" href="chap42.html#VUID-vkCmdDecodeVideoKHR-StdVideoH265PictureParameterSet-07162"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-StdVideoH265PictureParameterSet-07162</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then the bound video
session parameters object <strong class="purple">must</strong> contain a
<code>StdVideoH265PictureParameterSet</code> entry with
<code>sps_video_parameter_set_id</code>, <code>pps_seq_parameter_set_id</code>, and
<code>pps_pic_parameter_set_id</code> matching
<code>StdVideoDecodeH265PictureInfo</code>::<code>sps_video_parameter_set_id</code>,
<code>StdVideoDecodeH265PictureInfo</code>::<code>pps_seq_parameter_set_id</code>, and
<code>StdVideoDecodeH265PictureInfo</code>::<code>pps_pic_parameter_set_id</code>,
respectively, that are provided in the <code>pStdPictureInfo</code> member of
the <a href="chap42.html#VkVideoDecodeH265PictureInfoKHR">VkVideoDecodeH265PictureInfoKHR</a> structure included in the
<code>pNext</code> chain of <code>pDecodeInfo</code></p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07163" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07163"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-07163</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code> and
<code>pDecodeInfo-&gt;pSetupReferenceSlot</code> is not <code>NULL</code>, then the
<code>pNext</code> chain of <code>pDecodeInfo-&gt;pSetupReferenceSlot</code> <strong class="purple">must</strong>
include a <a href="chap42.html#VkVideoDecodeH265DpbSlotInfoKHR">VkVideoDecodeH265DpbSlotInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pNext-07164" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pNext-07164"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pNext-07164</span><br>

If the bound video session was created with the video codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then the <code>pNext</code>
chain of each element of <code>pDecodeInfo-&gt;pReferenceSlots</code> <strong class="purple">must</strong>
include a <a href="chap42.html#VkVideoDecodeH265DpbSlotInfoKHR">VkVideoDecodeH265DpbSlotInfoKHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-commandBuffer-parameter" href="chap42.html#VUID-vkCmdDecodeVideoKHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pDecodeInfo-parameter" href="chap42.html#VUID-vkCmdDecodeVideoKHR-pDecodeInfo-parameter"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pDecodeInfo-parameter</span><br>
 <code>pDecodeInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-commandBuffer-recording" href="chap42.html#VUID-vkCmdDecodeVideoKHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-commandBuffer-cmdpool" href="chap42.html#VUID-vkCmdDecodeVideoKHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support decode operations</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-renderpass" href="chap42.html#VUID-vkCmdDecodeVideoKHR-renderpass"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-videocoding" href="chap42.html#VUID-vkCmdDecodeVideoKHR-videocoding"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called inside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-bufferlevel" href="chap42.html#VUID-vkCmdDecodeVideoKHR-bufferlevel"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap42.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoDecodeInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoDecodeInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                       <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                           <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoDecodeFlagsKHR</span>                 <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkBuffer</span>                              <span class="n">srcBuffer</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>                          <span class="n">srcBufferOffset</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>                          <span class="n">srcBufferRange</span><span class="p">;</span>
    <span class="n">VkVideoPictureResourceInfoKHR</span>         <span class="n">dstPictureResource</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoReferenceSlotInfoKHR</span><span class="o">*</span>    <span class="n">pSetupReferenceSlot</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                              <span class="n">referenceSlotCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoReferenceSlotInfoKHR</span><span class="o">*</span>    <span class="n">pReferenceSlots</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
<li>
<p><code>srcBuffer</code> is the source video bitstream buffer to read the encoded
bitstream from.</p>
</li>
<li>
<p><code>srcBufferOffset</code> is the starting offset in bytes from the start of
<code>srcBuffer</code> to read the encoded bitstream from.</p>
</li>
<li>
<p><code>srcBufferRange</code> is the size in bytes of the encoded bitstream to
decode from <code>srcBuffer</code>, starting from <code>srcBufferOffset</code>.</p>
</li>
<li>
<p><code>dstPictureResource</code> is the video picture resource to use as the
<a href="chap42.html#decode-output-picture">decode output picture</a>.</p>
</li>
<li>
<p><code>pSetupReferenceSlot</code> is <code>NULL</code> or a pointer to a
<a href="chap42.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structure describing the DPB slot to
<a href="chap42.html#dpb-slot-states">activate</a> and the video picture resource to use as
the <a href="chap42.html#reconstructed-picture">reconstructed picture</a> to activate the DPB
slot with.</p>
</li>
<li>
<p><code>referenceSlotCount</code> is the number of elements in the
<code>pReferenceSlots</code> array.</p>
</li>
<li>
<p><code>pReferenceSlots</code> is a pointer to an array of
<a href="chap42.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structures describing the DPB slots
and corresponding <a href="chap42.html#reference-picture">reference picture</a> resources to
use in this video decode operation (the set of
<a href="chap42.html#active-reference-pictures">active reference pictures</a>).</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-srcBuffer-07165" href="chap42.html#VUID-VkVideoDecodeInfoKHR-srcBuffer-07165"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-srcBuffer-07165</span><br>

<code>srcBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_VIDEO_DECODE_SRC_BIT_KHR</code> set</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-srcBufferOffset-07166" href="chap42.html#VUID-VkVideoDecodeInfoKHR-srcBufferOffset-07166"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-srcBufferOffset-07166</span><br>

<code>srcBufferOffset</code> <strong class="purple">must</strong> be less than the size of <code>srcBuffer</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-srcBufferRange-07167" href="chap42.html#VUID-VkVideoDecodeInfoKHR-srcBufferRange-07167"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-srcBufferRange-07167</span><br>

<code>srcBufferRange</code> <strong class="purple">must</strong> be less than or equal to the size of
<code>srcBuffer</code> minus <code>srcBufferOffset</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-pSetupReferenceSlot-07168" href="chap42.html#VUID-VkVideoDecodeInfoKHR-pSetupReferenceSlot-07168"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-pSetupReferenceSlot-07168</span><br>

If <code>pSetupReferenceSlot</code> is not <code>NULL</code>, then its <code>slotIndex</code>
member <strong class="purple">must</strong> not be negative</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-pSetupReferenceSlot-07169" href="chap42.html#VUID-VkVideoDecodeInfoKHR-pSetupReferenceSlot-07169"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-pSetupReferenceSlot-07169</span><br>

If <code>pSetupReferenceSlot</code> is not <code>NULL</code>, then its
<code>pPictureResource</code> <strong class="purple">must</strong> not be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-slotIndex-07171" href="chap42.html#VUID-VkVideoDecodeInfoKHR-slotIndex-07171"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-slotIndex-07171</span><br>

The <code>slotIndex</code> member of each element of <code>pReferenceSlots</code>
<strong class="purple">must</strong> not be negative</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-pPictureResource-07172" href="chap42.html#VUID-VkVideoDecodeInfoKHR-pPictureResource-07172"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-pPictureResource-07172</span><br>

The <code>pPictureResource</code> member of each element of
<code>pReferenceSlots</code> <strong class="purple">must</strong> not be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoDecodeInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-pNext-pNext" href="chap42.html#VUID-VkVideoDecodeInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap42.html#VkVideoDecodeH264PictureInfoKHR">VkVideoDecodeH264PictureInfoKHR</a> or <a href="chap42.html#VkVideoDecodeH265PictureInfoKHR">VkVideoDecodeH265PictureInfoKHR</a></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-sType-unique" href="chap42.html#VUID-VkVideoDecodeInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-flags-zerobitmask" href="chap42.html#VUID-VkVideoDecodeInfoKHR-flags-zerobitmask"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-flags-zerobitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-srcBuffer-parameter" href="chap42.html#VUID-VkVideoDecodeInfoKHR-srcBuffer-parameter"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-srcBuffer-parameter</span><br>
 <code>srcBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-dstPictureResource-parameter" href="chap42.html#VUID-VkVideoDecodeInfoKHR-dstPictureResource-parameter"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-dstPictureResource-parameter</span><br>
 <code>dstPictureResource</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-pSetupReferenceSlot-parameter" href="chap42.html#VUID-VkVideoDecodeInfoKHR-pSetupReferenceSlot-parameter"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-pSetupReferenceSlot-parameter</span><br>
 If <code>pSetupReferenceSlot</code> is not <code>NULL</code>, <code>pSetupReferenceSlot</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap42.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-pReferenceSlots-parameter" href="chap42.html#VUID-VkVideoDecodeInfoKHR-pReferenceSlots-parameter"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-pReferenceSlots-parameter</span><br>
 If <code>referenceSlotCount</code> is not <code>0</code>, <code>pReferenceSlots</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>referenceSlotCount</code> valid <a href="chap42.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoDecodeFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoDecodeFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoDecodeFlagsKHR</code> is a bitmask type for setting a mask, but is
currently reserved for future use.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="decode-h264"><a class="anchor" href="chap42.html#decode-h264"></a>42.11. H.264 Decode Operations</h3>
<div class="paragraph">
<p>Video decode operations using an <a href="chap42.html#decode-h264-profile">H.264 decode
profile</a> <strong class="purple">can</strong> be used to decode elementary video stream sequences compliant
to the <a href="chap2.html#itu-t-h264">ITU-T H.264 Specification</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Refer to the <a href="chap1.html">Preamble</a> for information on how the Khronos
Intellectual Property Rights Policy relates to normative references to
external materials not created by Khronos.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>This process is performed according to the <a href="chap42.html#decode-operation-steps">video
decode operation steps</a> with the codec-specific semantics defined in
section 8 of the <a href="chap2.html#itu-t-h264">ITU-T H.264 Specification</a> as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Syntax elements, derived values, and other parameters are applied from
the following structures:</p>
<div class="ulist">
<ul>
<li>
<p>The <code>StdVideoH264SequenceParameterSet</code> structure corresponding to
the <a href="chap42.html#decode-h264-active-sps">active SPS</a> specifying the
<a href="chap42.html#decode-h264-sps">H.264 sequence parameter set</a>.</p>
</li>
<li>
<p>The <code>StdVideoH264PictureParameterSet</code> structure corresponding to the
<a href="chap42.html#decode-h264-active-pps">active PPS</a> specifying the <a href="chap42.html#decode-h264-pps">H.264 picture parameter set</a>.</p>
</li>
<li>
<p>The <code>StdVideoDecodeH264PictureInfo</code> structure specifying the
<a href="chap42.html#decode-h264-picture-info">H.264 picture information</a>.</p>
</li>
<li>
<p>The <code>StdVideoDecodeH264ReferenceInfo</code> structures specifying the
<a href="chap42.html#decode-h264-reference-info">H.264 reference information</a>
corresponding to the optional <a href="chap42.html#reconstructed-picture">reconstructed
picture</a> and any <a href="chap42.html#active-reference-pictures">active reference
pictures</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The contents of the provided video bitstream buffer range are
interpreted as defined in the <a href="chap42.html#decode-h264-bitstream-data-access">H.264
Decode Bitstream Data Access</a> section.</p>
</li>
<li>
<p>Picture data in the <a href="chap42.html#video-picture-resources">video picture resources</a>
corresponding to the used <a href="chap42.html#decode-h264-active-reference-picture-info">active reference pictures</a>, <a href="chap42.html#decode-h264-output-picture-info">decode
output picture</a>, and optional <a href="chap42.html#decode-h264-reconstructed-picture-info">reconstructed picture</a> is accessed as defined in the
<a href="chap42.html#decode-h264-picture-data-access">H.264 Decode Picture Data Access</a>
section.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the parameters and the bitstream adhere to the syntactic and semantic
requirements defined in the corresponding sections of the <a href="chap2.html#itu-t-h264">ITU-T
H.264 Specification</a>, as described above, and the <a href="chap42.html#dpb-slot">DPB slots</a>
associated with the <a href="chap42.html#active-reference-pictures">active reference pictures</a>
all refer to <a href="chap42.html#dpb-slot-states">valid picture references</a>, then the video
decode operation will complete successfully.
Otherwise, the video decode operation <strong class="purple">may</strong> complete
<a href="chap42.html#decode-unsuccessful">unsuccessfully</a>.</p>
</div>
<div class="sect3">
<h4 id="decode-h264-bitstream-data-access"><a class="anchor" href="chap42.html#decode-h264-bitstream-data-access"></a>42.11.1. H.264 Decode Bitstream Data Access</h4>
<div class="paragraph">
<p>If the target <a href="chap42.html#decode-h264-output-picture-info">decode output picture</a> is a
frame, then the video bitstream buffer range <strong class="purple">should</strong> contain a VCL NAL unit
comprised of the slice headers and data of a picture representing an entire
frame, as defined in sections 7.3.3 and 7.3.4, and this data is interpreted
as defined in sections 7.4.3 and 7.4.4 of the <a href="chap2.html#itu-t-h264">ITU-T H.264
Specification</a>, respectively.</p>
</div>
<div class="paragraph">
<p>If the target <a href="chap42.html#decode-h264-output-picture-info">decode output picture</a> is a
field, then the video bitstream buffer range should contain a VCL NAL unit
comprised of the slice headers and data of a picture representing a field,
as defined in sections 7.3.3 and 7.3.4, and this data is interpreted as
defined in sections 7.4.3 and 7.4.4 of the <a href="chap2.html#itu-t-h264">ITU-T H.264
Specification</a>, respectively.</p>
</div>
<div class="paragraph">
<p>The offsets provided in
<a href="chap42.html#VkVideoDecodeH264PictureInfoKHR">VkVideoDecodeH264PictureInfoKHR</a>::<code>pSliceOffsets</code> <strong class="purple">should</strong> specify
the starting offsets corresponding to each slice header within the video
bitstream buffer range.</p>
</div>
</div>
<div class="sect3">
<h4 id="decode-h264-picture-data-access"><a class="anchor" href="chap42.html#decode-h264-picture-data-access"></a>42.11.2. H.264 Decode Picture Data Access</h4>
<div class="paragraph">
<p>The effective <code>imageOffset</code> and <code>imageExtent</code> corresponding to a
<a href="chap42.html#decode-output-picture">decode output picture</a>,
<a href="chap42.html#reference-picture">reference picture</a>, or
<a href="chap42.html#reconstructed-picture">reconstructed picture</a> used in video decode
operations with an <a href="chap42.html#decode-h264-profile">H.264 decode profile</a> are defined
as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>imageOffset</code> is <span class="eq">(<code>codedOffset.x</code>,<code>codedOffset.y</code>)</span> and
<code>imageExtent</code> is <span class="eq">(<code>codedExtent.width</code>,
<code>codedExtent.height</code>)</span>, if the picture represents a frame.</p>
</li>
<li>
<p><code>imageOffset</code> is <span class="eq">(<code>codedOffset.x</code>,<code>codedOffset.y</code>)</span> and
<code>imageExtent</code> is <span class="eq">(<code>codedExtent.width</code>,
<code>codedExtent.height</code>)</span>, if the picture represents a field and the
picture layout of the used <a href="chap42.html#decode-h264-profile">H.264 decode profile</a>
is
<code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_INTERLEAVED_LINES_BIT_KHR</code>.</p>
</li>
<li>
<p><code>imageOffset</code> is <span class="eq">(<code>codedOffset.x</code>,<code>codedOffset.y</code>)</span> and
<code>imageExtent</code> is <span class="eq">(<code>codedExtent.width</code>,
<code>codedExtent.height</code> / 2)</span>, if the picture represents a field and
the picture layout of the used <a href="chap42.html#decode-h264-profile">H.264 decode
profile</a> is
<code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_SEPARATE_PLANES_BIT_KHR</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Where <code>codedOffset</code> and <code>codedExtent</code> are the members of the
<a href="chap42.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> structure corresponding to the picture.</p>
</div>
<div class="paragraph">
<p>However, accesses to image data within a video picture resource happen at
the granularity indicated by
<a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>pictureAccessGranularity</code>, as returned by
<a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> for the used <a href="chap42.html#video-profiles">video profile</a>.
This means that the complete image subregion accessed by video coding
operations using an <a href="chap42.html#decode-h264-profile">H.264 decode profile</a> for the
video picture resource is defined as the set of texels within the coordinate
range:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">([<code>startX</code>,<code>endX</code>),[<code>startY</code>,<code>endY</code>))</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><span class="eq"><code>startX</code></span> equals <code>imageOffset.x</code> rounded down to the
nearest integer multiple of <code>pictureAccessGranularity.width</code>;</p>
</li>
<li>
<p><span class="eq"><code>endX</code></span> equals <span class="eq"><code>imageOffset.x</code> + 
<code>imageExtent.width</code></span> rounded up to the nearest integer multiple of
<code>pictureAccessGranularity.width</code> and clamped to the width of the
image subresource <a href="chap42.html#video-image-subresource-reference">referred</a> to by
the corresponding <a href="chap42.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> structure;</p>
</li>
<li>
<p><span class="eq">startY</span> equals <code>imageOffset.y</code> rounded down to the nearest
integer multiple of <code>pictureAccessGranularity.height</code>;</p>
</li>
<li>
<p><span class="eq">endY</span> equals <span class="eq"><code>imageOffset.y</code> + 
<code>imageExtent.height</code></span> rounded up to the nearest integer multiple of
<code>pictureAccessGranularity.height</code> and clamped to the height of the
image subresource <a href="chap42.html#video-image-subresource-reference">referred</a> to by
the corresponding <a href="chap42.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> structure.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In case of video decode operations using an <a href="chap42.html#decode-h264-profile">H.264
decode profile</a>, any access to a picture at the coordinates
<span class="eq">(<code>x</code>,<code>y</code>)</span>, as defined by the <a href="chap2.html#itu-t-h264">ITU-T H.264
Specification</a>, is an access to the image subresource
<a href="chap42.html#video-image-subresource-reference">referred</a> to by the corresponding
<a href="chap42.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> structure at the texel coordinates
specified below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><span class="eq">(<code>x</code>,<code>y</code>)</span>, if the accessed picture represents a frame.</p>
</li>
<li>
<p><span class="eq">(<code>x</code>,<code>y</code> × 2)</span>, if the accessed picture represents a
top field and the picture layout of the used <a href="chap42.html#decode-h264-profile">H.264
decode profile</a> is
<code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_INTERLEAVED_LINES_BIT_KHR</code>.</p>
</li>
<li>
<p><span class="eq">(<code>x</code>,<code>y</code> × 2 +  1)</span>, if the accessed picture
represents a bottom field and the picture layout of the used
<a href="chap42.html#decode-h264-profile">H.264 decode profile</a> is
<code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_INTERLEAVED_LINES_BIT_KHR</code>.</p>
</li>
<li>
<p><span class="eq">(<code>x</code>,<code>y</code>)</span>, if the accessed picture represents a top field
and the picture layout of the used <a href="chap42.html#decode-h264-profile">H.264 decode
profile</a> is
<code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_SEPARATE_PLANES_BIT_KHR</code>.</p>
</li>
<li>
<p><span class="eq">(<code>codedOffset.x</code> +  <code>x</code>,<code>codedOffset.y</code> + 
<code>y</code>)</span>, if the accessed picture represents a bottom field and the
picture layout of the used <a href="chap42.html#decode-h264-profile">H.264 decode profile</a>
is
<code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_SEPARATE_PLANES_BIT_KHR</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Where <code>codedOffset</code> is the member of the corresponding
<a href="chap42.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> structure.</p>
</div>
</div>
<div class="sect3">
<h4 id="decode-h264-profile"><a class="anchor" href="chap42.html#decode-h264-profile"></a>42.11.3. H.264 Decode Profile</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>A video profile supporting H.264 video decode operations is specified by
setting <a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>::<code>videoCodecOperation</code> to
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code> and adding a
<code>VkVideoDecodeH264ProfileInfoKHR</code> structure to the
<a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>::<code>pNext</code> chain.</p>
</div>
<div class="paragraph">
<p>The <code>VkVideoDecodeH264ProfileInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH264ProfileInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH264ProfileInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                              <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                  <span class="n">pNext</span><span class="p">;</span>
    <span class="n">StdVideoH264ProfileIdc</span>                       <span class="n">stdProfileIdc</span><span class="p">;</span>
    <span class="n">VkVideoDecodeH264PictureLayoutFlagBitsKHR</span>    <span class="n">pictureLayout</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH264ProfileInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stdProfileIdc</code> is a <code>StdVideoH264ProfileIdc</code> value specifying
the H.264 codec profile IDC, as defined in section A.2 of the
<a href="chap2.html#itu-t-h264">ITU-T H.264 Specification</a>.</p>
</li>
<li>
<p><code>pictureLayout</code> is a <a href="chap42.html#VkVideoDecodeH264PictureLayoutFlagBitsKHR">VkVideoDecodeH264PictureLayoutFlagBitsKHR</a>
value specifying the picture layout used by the H.264 video sequence to
be decoded.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264ProfileInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoDecodeH264ProfileInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH264ProfileInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H264_PROFILE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264ProfileInfoKHR-pictureLayout-parameter" href="chap42.html#VUID-VkVideoDecodeH264ProfileInfoKHR-pictureLayout-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264ProfileInfoKHR-pictureLayout-parameter</span><br>
 If <code>pictureLayout</code> is not <code>0</code>, <code>pictureLayout</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoDecodeH264PictureLayoutFlagBitsKHR">VkVideoDecodeH264PictureLayoutFlagBitsKHR</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The H.264 video decode picture layout flags are defined as follows:</p>
</div>
<div id="VkVideoDecodeH264PictureLayoutFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_h264</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoDecodeH264PictureLayoutFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_PROGRESSIVE_KHR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_INTERLEAVED_LINES_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_SEPARATE_PLANES_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH264PictureLayoutFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_PROGRESSIVE_KHR</code> specifies
support for progressive content.
This flag has the value <code>0</code>.</p>
</li>
<li>
<p><code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_INTERLEAVED_LINES_BIT_KHR</code>
specifies support for or use of a picture layout for interlaced content
where all lines belonging to the top field are decoded to the
even-numbered lines within the picture resource, and all lines belonging
to the bottom field are decoded to the odd-numbered lines within the
picture resource.</p>
</li>
<li>
<p><code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_SEPARATE_PLANES_BIT_KHR</code>
specifies support for or use of a picture layout for interlaced content
where all lines belonging to a field are grouped together in a single
image subregion, and the two fields comprising the frame <strong class="purple">can</strong> be stored
in separate image subregions of the same image subresource or in
separate image subresources.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoDecodeH264PictureLayoutFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_h264</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoDecodeH264PictureLayoutFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoDecodeH264PictureLayoutFlagsKHR</code> is a bitmask type for setting a
mask of zero or more <a href="chap42.html#VkVideoDecodeH264PictureLayoutFlagBitsKHR">VkVideoDecodeH264PictureLayoutFlagBitsKHR</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_h_264_decode_capabilities"><a class="anchor" href="chap42.html#_h_264_decode_capabilities"></a>42.11.4. H.264 Decode Capabilities</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>When calling <a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> to query the
capabilities for an <a href="chap42.html#decode-h264-profile">H.264 decode profile</a>, the
<a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>pNext</code> chain <strong class="purple">must</strong> include a
<code>VkVideoDecodeH264CapabilitiesKHR</code> structure that will be filled with
the profile-specific capabilities.</p>
</div>
<div class="paragraph">
<p>The <code>VkVideoDecodeH264CapabilitiesKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH264CapabilitiesKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH264CapabilitiesKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>         <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                   <span class="n">pNext</span><span class="p">;</span>
    <span class="n">StdVideoH264LevelIdc</span>    <span class="n">maxLevelIdc</span><span class="p">;</span>
    <span class="n">VkOffset2D</span>              <span class="n">fieldOffsetGranularity</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH264CapabilitiesKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>maxLevelIdc</code> is a <code>StdVideoH264LevelIdc</code> value specifying the
maximum H.264 level supported by the profile, as defined in section A.3
of the <a href="chap2.html#itu-t-h264">ITU-T H.264 Specification</a>.</p>
</li>
<li>
<p><code>fieldOffsetGranularity</code> is the minimum alignment for
<a href="chap42.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a>::<code>codedOffset</code> specified for a
<a href="chap42.html#video-picture-resources">video picture resource</a> when using the
picture layout
<code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_SEPARATE_PLANES_BIT_KHR</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264CapabilitiesKHR-sType-sType" href="chap42.html#VUID-VkVideoDecodeH264CapabilitiesKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH264CapabilitiesKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H264_CAPABILITIES_KHR</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="decode-h264-parameter-sets"><a class="anchor" href="chap42.html#decode-h264-parameter-sets"></a>42.11.5. H.264 Decode Parameter Sets</h4>
<div class="paragraph">
<p><a href="chap42.html#video-session-parameters">Video session parameters</a> objects created with
the video codec operation <code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>
<strong class="purple">can</strong> contain the following types of parameters:</p>
</div>
<div id="decode-h264-sps" class="dlist">
<dl>
<dt class="hdlist1">H.264 Sequence Parameter Sets (SPS)</dt>
<dd>
<p>Represented by <code>StdVideoH264SequenceParameterSet</code> structures and
interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>reserved1</code> and <code>reserved2</code> are used only for padding purposes and
are otherwise ignored;</p>
</li>
<li>
<p><code>seq_parameter_set_id</code> is used as the key of the SPS entry;</p>
</li>
<li>
<p>if <code>flags.seq_scaling_matrix_present_flag</code> is set, then the
<code>StdVideoH264ScalingLists</code> structure pointed to by <code>pScalingLists</code>
is interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>scaling_list_present_mask</code> is a bitmask where bit index <span class="eq">i</span>
corresponds to <code>seq_scaling_list_present_flag[i]</code> as defined in section
7.4.2.1 of the <a href="chap2.html#itu-t-h264">ITU-T H.264 Specification</a>;</p>
</li>
<li>
<p><code>use_default_scaling_matrix_mask</code> is a bitmask where bit index
<span class="eq">i</span> corresponds to <code>UseDefaultScalingMatrix4x4Flag[i]</code>, when <span class="eq">i
&lt; 6</span>, or corresponds to <code>UseDefaultScalingMatrix8x8Flag[i-6]</code>,
otherwise, as defined in section 7.3.2.1 of the <a href="chap2.html#itu-t-h264">ITU-T
H.264 Specification</a>;</p>
</li>
<li>
<p><code>ScalingList4x4</code> and <code>ScalingList8x8</code> correspond to the
identically named syntax elements defined in section 7.3.2.1 of the
<a href="chap2.html#itu-t-h264">ITU-T H.264 Specification</a>;</p>
</li>
</ul>
</div>
</li>
<li>
<p>if <code>flags.vui_parameters_present_flag</code> is set, then
<code>pSequenceParameterSetVui</code> points to a
<code>StdVideoH264SequenceParameterSetVui</code> structure that is interpreted
as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>reserved1</code> is used only for padding purposes and is otherwise
ignored;</p>
</li>
<li>
<p>if <code>flags.nal_hrd_parameters_present_flag</code> or
<code>flags.vcl_hrd_parameters_present_flag</code> is set, then the
<code>StdVideoH264HrdParameters</code> structure pointed to by
<code>pHrdParameters</code> is interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>reserved1</code> is used only for padding purposes and is otherwise
ignored;</p>
</li>
<li>
<p>all other members of <code>StdVideoH264HrdParameters</code> are interpreted as
defined in section E.2.2 of the <a href="chap2.html#itu-t-h264">ITU-T H.264
Specification</a>;</p>
</li>
</ul>
</div>
</li>
<li>
<p>all other members of <code>StdVideoH264SequenceParameterSetVui</code> are
interpreted as defined in section E.2.1 of the <a href="chap2.html#itu-t-h264">ITU-T H.264
Specification</a>;</p>
</li>
</ul>
</div>
</li>
<li>
<p>all other members of <code>StdVideoH264SequenceParameterSet</code> are
interpreted as defined in section 7.4.2.1 of the <a href="chap2.html#itu-t-h264">ITU-T
H.264 Specification</a>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div id="decode-h264-pps" class="dlist">
<dl>
<dt class="hdlist1">H.264 Picture Parameter Sets (PPS)</dt>
<dd>
<p>Represented by <code>StdVideoH264PictureParameterSet</code> structures and
interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p>the pair constructed from <code>seq_parameter_set_id</code> and
<code>pic_parameter_set_id</code> is used as the key of the PPS entry;</p>
</li>
<li>
<p>if <code>flags.pic_scaling_matrix_present_flag</code> is set, then the
<code>StdVideoH264ScalingLists</code> structure pointed to by <code>pScalingLists</code>
is interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>scaling_list_present_mask</code> is a bitmask where bit index <span class="eq">i</span>
corresponds to <code>pic_scaling_list_present_flag[i]</code> as defined in section
7.4.2.2 of the <a href="chap2.html#itu-t-h264">ITU-T H.264 Specification</a>;</p>
</li>
<li>
<p><code>use_default_scaling_matrix_mask</code> is a bitmask where bit index
<span class="eq">i</span> corresponds to <code>UseDefaultScalingMatrix4x4Flag[i]</code>, when <span class="eq">i
&lt; 6</span>, or corresponds to <code>UseDefaultScalingMatrix8x8Flag[i-6]</code>,
otherwise, as defined in section 7.3.2.2 of the <a href="chap2.html#itu-t-h264">ITU-T
H.264 Specification</a>;</p>
</li>
<li>
<p><code>ScalingList4x4</code> and <code>ScalingList8x8</code> correspond to the
identically named syntax elements defined in section 7.3.2.2 of the
<a href="chap2.html#itu-t-h264">ITU-T H.264 Specification</a>;</p>
</li>
</ul>
</div>
</li>
<li>
<p>all other members of <code>StdVideoH264PictureParameterSet</code> are
interpreted as defined in section 7.4.2.2 of the <a href="chap2.html#itu-t-h264">ITU-T
H.264 Specification</a>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>When a <a href="chap42.html#video-session-parameters">video session parameters</a> object is
created with the codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>, the
<a href="chap42.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a>::<code>pNext</code> chain <strong class="purple">must</strong> include
a <code>VkVideoDecodeH264SessionParametersCreateInfoKHR</code> structure specifying
the capacity and initial contents of the object.</p>
</div>
<div class="paragraph">
<p>The <code>VkVideoDecodeH264SessionParametersCreateInfoKHR</code> structure is
defined as:</p>
</div>
<div id="VkVideoDecodeH264SessionParametersCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH264SessionParametersCreateInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                        <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                            <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                               <span class="n">maxStdSPSCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                               <span class="n">maxStdPPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoDecodeH264SessionParametersAddInfoKHR</span><span class="o">*</span>    <span class="n">pParametersAddInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH264SessionParametersCreateInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>maxStdSPSCount</code> is the maximum number of <a href="chap42.html#decode-h264-sps">H.264
SPS</a> entries the created <code>VkVideoSessionParametersKHR</code> <strong class="purple">can</strong>
contain.</p>
</li>
<li>
<p><code>maxStdPPSCount</code> is the maximum number of <a href="chap42.html#decode-h264-pps">H.264
PPS</a> entries the created <code>VkVideoSessionParametersKHR</code> <strong class="purple">can</strong>
contain.</p>
</li>
<li>
<p><code>pParametersAddInfo</code> is <code>NULL</code> or a pointer to a
<a href="chap42.html#VkVideoDecodeH264SessionParametersAddInfoKHR">VkVideoDecodeH264SessionParametersAddInfoKHR</a> structure specifying
H.264 parameters to add upon object creation.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersCreateInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoDecodeH264SessionParametersCreateInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersCreateInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H264_SESSION_PARAMETERS_CREATE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersCreateInfoKHR-pParametersAddInfo-parameter" href="chap42.html#VUID-VkVideoDecodeH264SessionParametersCreateInfoKHR-pParametersAddInfo-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersCreateInfoKHR-pParametersAddInfo-parameter</span><br>
 If <code>pParametersAddInfo</code> is not <code>NULL</code>, <code>pParametersAddInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap42.html#VkVideoDecodeH264SessionParametersAddInfoKHR">VkVideoDecodeH264SessionParametersAddInfoKHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoDecodeH264SessionParametersAddInfoKHR</code> structure is defined
as:</p>
</div>
<div id="VkVideoDecodeH264SessionParametersAddInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH264SessionParametersAddInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                            <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                   <span class="n">stdSPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoH264SequenceParameterSet</span><span class="o">*</span>    <span class="n">pStdSPSs</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                   <span class="n">stdPPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoH264PictureParameterSet</span><span class="o">*</span>     <span class="n">pStdPPSs</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH264SessionParametersAddInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stdSPSCount</code> is the number of elements in the <code>pStdSPSs</code> array.</p>
</li>
<li>
<p><code>pStdSPSs</code> is a pointer to an array of
<code>StdVideoH264SequenceParameterSet</code> structures describing the
<a href="chap42.html#decode-h264-sps">H.264 SPS</a> entries to add.</p>
</li>
<li>
<p><code>stdPPSCount</code> is the number of elements in the <code>pStdPPSs</code> array.</p>
</li>
<li>
<p><code>pStdPPSs</code> is a pointer to an array of
<code>StdVideoH264PictureParameterSet</code> structures describing the
<a href="chap42.html#decode-h264-pps">H.264 PPS</a> entries to add.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This structure <strong class="purple">can</strong> be specified in the following places:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <code>pParametersAddInfo</code> member of the
<a href="chap42.html#VkVideoDecodeH264SessionParametersCreateInfoKHR">VkVideoDecodeH264SessionParametersCreateInfoKHR</a> structure
specified in the <code>pNext</code> chain of
<a href="chap42.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a> used to create a
<a href="chap42.html#video-session-parameters">video session parameters</a> object.
In this case, if the video codec operation the video session parameters
object is created with is
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>, then it defines the
set of initial parameters to add to the created object (see
<a href="chap42.html#creating-video-session-parameters">Creating Video Session
Parameters</a>).</p>
</li>
<li>
<p>In the <code>pNext</code> chain of <a href="chap42.html#VkVideoSessionParametersUpdateInfoKHR">VkVideoSessionParametersUpdateInfoKHR</a>.
In this case, if the video codec operation the
<a href="chap42.html#video-session-parameters">video session parameters</a> object to be
updated was created with is
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>, then it defines the
set of parameters to add to it (see
<a href="chap42.html#video-session-parameters-update">Updating Video Session Parameters</a>).</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoKHR-None-04825" href="chap42.html#VUID-VkVideoDecodeH264SessionParametersAddInfoKHR-None-04825"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoKHR-None-04825</span><br>

The <code>seq_parameter_set_id</code> member of each
<code>StdVideoH264SequenceParameterSet</code> structure specified in the
elements of <code>pStdSPSs</code> <strong class="purple">must</strong> be unique within <code>pStdSPSs</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoKHR-None-04826" href="chap42.html#VUID-VkVideoDecodeH264SessionParametersAddInfoKHR-None-04826"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoKHR-None-04826</span><br>

The pair constructed from the <code>seq_parameter_set_id</code> and
<code>pic_parameter_set_id</code> members of each
<code>StdVideoH264PictureParameterSet</code> structure specified in the elements
of <code>pStdPPSs</code> <strong class="purple">must</strong> be unique within <code>pStdPPSs</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoDecodeH264SessionParametersAddInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H264_SESSION_PARAMETERS_ADD_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoKHR-pStdSPSs-parameter" href="chap42.html#VUID-VkVideoDecodeH264SessionParametersAddInfoKHR-pStdSPSs-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoKHR-pStdSPSs-parameter</span><br>
 If <code>stdSPSCount</code> is not <code>0</code>, <code>pStdSPSs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>stdSPSCount</code> <code>StdVideoH264SequenceParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoKHR-pStdPPSs-parameter" href="chap42.html#VUID-VkVideoDecodeH264SessionParametersAddInfoKHR-pStdPPSs-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoKHR-pStdPPSs-parameter</span><br>
 If <code>stdPPSCount</code> is not <code>0</code>, <code>pStdPPSs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>stdPPSCount</code> <code>StdVideoH264PictureParameterSet</code> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_h_264_decoding_parameters"><a class="anchor" href="chap42.html#_h_264_decoding_parameters"></a>42.11.6. H.264 Decoding Parameters</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoDecodeH264PictureInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH264PictureInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH264PictureInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                         <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                             <span class="n">pNext</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoDecodeH264PictureInfo</span><span class="o">*</span>    <span class="n">pStdPictureInfo</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                <span class="n">sliceCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint32_t</span><span class="o">*</span>                         <span class="n">pSliceOffsets</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH264PictureInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pStdPictureInfo</code> is a pointer to a
<code>StdVideoDecodeH264PictureInfo</code> structure specifying
<a href="chap42.html#decode-h264-picture-info">H.264 picture information</a>.</p>
</li>
<li>
<p><code>sliceCount</code> is the number of elements in <code>pSliceOffsets</code>.</p>
</li>
<li>
<p><code>pSliceOffsets</code> is a pointer to an array of <code>sliceCount</code> offsets
specifying the start offset of the slices of the picture within the
video bitstream buffer range specified in <a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This structure is specified in the <code>pNext</code> chain of the
<a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a> structure passed to <a href="chap42.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a> to
specify the codec-specific picture information for an <a href="chap42.html#decode-h264">H.264
decode operation</a>.</p>
</div>
<div id="decode-h264-output-picture-info" class="dlist">
<dl>
<dt class="hdlist1">Decode Output Picture Information</dt>
<dd>
<p>When this structure is specified in the <code>pNext</code> chain of the
<a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a> structure passed to <a href="chap42.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a>,
the information related to the <a href="chap42.html#decode-output-picture-info">decode output
picture</a> is defined as follows:</p>
<div class="ulist">
<ul>
<li>
<p>If <code>pStdPictureInfo-&gt;flags.field_pic_flag</code> is not set, then the
picture represents a frame.</p>
</li>
<li>
<p>If <code>pStdPictureInfo-&gt;flags.field_pic_flag</code> is set, then the picture
represents a field.
Specifically:</p>
<div class="ulist">
<ul>
<li>
<p>If <code>pStdPictureInfo-&gt;flags.bottom_field_flag</code> is not set, then the
picture represents the top field of the frame.</p>
</li>
<li>
<p>If <code>pStdPictureInfo-&gt;flags.bottom_field_flag</code> is set, then the
picture represents the bottom field of the frame.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The image subregion used is determined according to the
<a href="chap42.html#decode-h264-picture-data-access">H.264 Decode Picture Data Access</a>
section.</p>
</li>
<li>
<p>The decode output picture is associated with the
<a href="chap42.html#decode-h264-picture-info">H.264 picture information</a> provided in
<code>pStdPictureInfo</code>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div id="decode-h264-picture-info" class="dlist">
<dl>
<dt class="hdlist1">Std Picture Information</dt>
<dd>
<p>The members of the <code>StdVideoDecodeH264PictureInfo</code> structure pointed to
by <code>pStdPictureInfo</code> are interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>reserved1</code> and <code>reserved2</code> are used only for padding purposes and
are otherwise ignored;</p>
</li>
<li>
<p><code>flags.is_intra</code> as defined in section 3.73 of the <a href="chap2.html#itu-t-h264">ITU-T
H.264 Specification</a>;</p>
</li>
<li>
<p><code>flags.is_reference</code> as defined in section 3.136 of the <a href="chap2.html#itu-t-h264">ITU-T H.264 Specification</a>;</p>
</li>
<li>
<p><code>flags.complementary_field_pair</code> as defined in section 3.35 of the
<a href="chap2.html#itu-t-h264">ITU-T H.264 Specification</a>;</p>
</li>
<li>
<p><code>seq_parameter_set_id</code> and <code>pic_parameter_set_id</code> are used to
identify the active parameter sets, as described below;</p>
</li>
<li>
<p>all other members are interpreted as defined in section 7.4.3 of the
<a href="chap2.html#itu-t-h264">ITU-T H.264 Specification</a>.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Active Parameter Sets</dt>
<dd>
<p>The members of the <code>StdVideoDecodeH264PictureInfo</code> structure pointed to
by <code>pStdPictureInfo</code> are used to select the active parameter sets to use
from the bound video session parameters object, as follows:</p>
<div class="ulist">
<ul>
<li>
<p><a id="decode-h264-active-sps"></a> The <em>active SPS</em> is the
<a href="chap42.html#decode-h264-sps">SPS</a> identified by the key specified in
<code>StdVideoDecodeH264PictureInfo</code>::<code>seq_parameter_set_id</code>.</p>
</li>
<li>
<p><a id="decode-h264-active-pps"></a> The <em>active PPS</em> is the
<a href="chap42.html#decode-h264-pps">PPS</a> identified by the key specified by the pair
constructed from
<code>StdVideoDecodeH264PictureInfo</code>::<code>seq_parameter_set_id</code> and
<code>StdVideoDecodeH264PictureInfo</code>::<code>pic_parameter_set_id</code>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264PictureInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoDecodeH264PictureInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH264PictureInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H264_PICTURE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264PictureInfoKHR-pStdPictureInfo-parameter" href="chap42.html#VUID-VkVideoDecodeH264PictureInfoKHR-pStdPictureInfo-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264PictureInfoKHR-pStdPictureInfo-parameter</span><br>
 <code>pStdPictureInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoDecodeH264PictureInfo</code> value</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264PictureInfoKHR-pSliceOffsets-parameter" href="chap42.html#VUID-VkVideoDecodeH264PictureInfoKHR-pSliceOffsets-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264PictureInfoKHR-pSliceOffsets-parameter</span><br>
 <code>pSliceOffsets</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>sliceCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264PictureInfoKHR-sliceCount-arraylength" href="chap42.html#VUID-VkVideoDecodeH264PictureInfoKHR-sliceCount-arraylength"></a> <span class="vuid">VUID-VkVideoDecodeH264PictureInfoKHR-sliceCount-arraylength</span><br>
 <code>sliceCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoDecodeH264DpbSlotInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH264DpbSlotInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH264DpbSlotInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                           <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                               <span class="n">pNext</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoDecodeH264ReferenceInfo</span><span class="o">*</span>    <span class="n">pStdReferenceInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH264DpbSlotInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pStdReferenceInfo</code> is a pointer to a
<code>StdVideoDecodeH264ReferenceInfo</code> structure specifying
<a href="chap42.html#decode-h264-reference-info">H.264 reference information</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This structure is specified in the <code>pNext</code> chain of
<a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot</code>, if not <code>NULL</code>, and
the <code>pNext</code> chain of the elements of
<a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code> to specify the
codec-specific reference picture information for an <a href="chap42.html#decode-h264">H.264
decode operation</a>.</p>
</div>
<div id="decode-h264-active-reference-picture-info" class="dlist">
<dl>
<dt class="hdlist1">Active Reference Picture Information</dt>
<dd>
<p>When this structure is specified in the <code>pNext</code> chain of the elements of
<a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code>, one or two elements are
added to the list of <a href="chap42.html#decode-active-reference-picture-info">active reference
pictures</a> used by the video decode operation for each element of
<a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p>If neither <code>pStdReferenceInfo-&gt;flags.top_field_flag</code> nor
<code>pStdReferenceInfo-&gt;flags.bottom_field_flag</code> is set, then the
picture is added as a frame reference to the list of active reference
pictures.</p>
</li>
<li>
<p>If <code>pStdReferenceInfo-&gt;flags.top_field_flag</code> is set, then the
picture is added as a top field reference to the list of active
reference pictures.</p>
</li>
<li>
<p>If <code>pStdReferenceInfo-&gt;flags.bottom_field_flag</code> is set, then the
picture is added as a bottom field reference to the list of active
reference pictures.</p>
</li>
<li>
<p>For each added reference picture, the corresponding image subregion used
is determined according to the <a href="chap42.html#decode-h264-picture-data-access">H.264
Decode Picture Data Access</a> section.</p>
</li>
<li>
<p>Each added reference picture is associated with the <a href="chap42.html#dpb-slot">DPB
slot</a> index specified in the <code>slotIndex</code> member of the
corresponding element of
<a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code>.</p>
</li>
<li>
<p>Each added reference picture is associated with the
<a href="chap42.html#decode-h264-reference-info">H.264 reference information</a> provided in
<code>pStdReferenceInfo</code>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>When both the top and bottom field of an interlaced frame currently
associated with a DPB slot is intended to be used as an active reference
picture and both fields are stored in the same image subregion (which is the
case when using
<code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_INTERLEAVED_LINES_BIT_KHR</code>
which stores the two fields at even and odd scanlines of the same image
subregion), both references have to be provided through a single
<a href="chap42.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structure that has both
<code>flags.top_field_flag</code> and <code>flags.bottom_field_flag</code> set in the
<code>StdVideoDecodeH264ReferenceInfo</code> structure pointed to by the
<code>pStdReferenceInfo</code> member of the <a href="chap42.html#VkVideoDecodeH264DpbSlotInfoKHR">VkVideoDecodeH264DpbSlotInfoKHR</a>
structure included in the corresponding <a href="chap42.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a>
structure’s <code>pNext</code> chain.
However, this approach can only be used when both fields are stored in the
same image subregion.
If that is not the case (e.g. when using
<code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_SEPARATE_PLANES_BIT_KHR</code>
which requires separate <code>codedOffset</code> values for the two fields and also
allows storing the two fields of a frame in separate image layers or
entirely separate images), then a separate <a href="chap42.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a>
structure needs to be provided for referencing the two fields, each only
setting one of <code>flags.top_field_flag</code> or <code>flags.bottom_field_flag</code>,
and providing the appropriate video picture resource information in
<a href="chap42.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a>::<code>pPictureResource</code>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div id="decode-h264-reconstructed-picture-info" class="dlist">
<dl>
<dt class="hdlist1">Reconstructed Picture Information</dt>
<dd>
<p>When this structure is specified in the <code>pNext</code> chain of
<a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot</code>, the information
related to the <a href="chap42.html#decode-reconstructed-picture-info">reconstructed picture</a>
is defined as follows:</p>
<div class="ulist">
<ul>
<li>
<p>If neither <code>pStdReferenceInfo-&gt;flags.top_field_flag</code> nor
<code>pStdReferenceInfo-&gt;flags.bottom_field_flag</code> is set, then the
picture represents a frame.</p>
</li>
<li>
<p>If <code>pStdReferenceInfo-&gt;flags.top_field_flag</code> is set, then the
picture represents a field, specifically, the top field of the frame.</p>
</li>
<li>
<p>If <code>pStdReferenceInfo-&gt;flags.bottom_field_flag</code> is set, then the
picture represents a field, specifically, the bottom field of the frame.</p>
</li>
<li>
<p>The image subregion used is determined according to the
<a href="chap42.html#decode-h264-picture-data-access">H.264 Decode Picture Data Access</a>
section.</p>
</li>
<li>
<p>The reconstructed picture is used to <a href="chap42.html#dpb-slot-states">activate</a> the
<a href="chap42.html#dpb-slot">DPB slot</a> with the index specified in
<a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot-&gt;slotIndex</code>.</p>
</li>
<li>
<p>The reconstructed picture is associated with the
<a href="chap42.html#decode-h264-reference-info">H.264 reference information</a> provided in
<code>pStdReferenceInfo</code>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div id="decode-h264-reference-info" class="dlist">
<dl>
<dt class="hdlist1">Std Reference Information</dt>
<dd>
<p>The members of the <code>StdVideoDecodeH264ReferenceInfo</code> structure pointed to
by <code>pStdReferenceInfo</code> are interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>flags.top_field_flag</code> is used to indicate whether the reference is
used as top field reference;</p>
</li>
<li>
<p><code>flags.bottom_field_flag</code> is used to indicate whether the reference
is used as bottom field reference;</p>
</li>
<li>
<p><code>flags.used_for_long_term_reference</code> is used to indicate whether the
picture is marked as “used for long-term reference” as defined in
section 8.2.5.1 of the <a href="chap2.html#itu-t-h264">ITU-T H.264 Specification</a>;</p>
</li>
<li>
<p><code>flags.is_non_existing</code> is used to indicate whether the picture is
marked as “non-existing” as defined in section 8.2.5.2 of the
<a href="chap2.html#itu-t-h264">ITU-T H.264 Specification</a>;</p>
</li>
<li>
<p>all other members are interpreted as defined in section 8.2 of the
<a href="chap2.html#itu-t-h264">ITU-T H.264 Specification</a>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264DpbSlotInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoDecodeH264DpbSlotInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH264DpbSlotInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H264_DPB_SLOT_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264DpbSlotInfoKHR-pStdReferenceInfo-parameter" href="chap42.html#VUID-VkVideoDecodeH264DpbSlotInfoKHR-pStdReferenceInfo-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264DpbSlotInfoKHR-pStdReferenceInfo-parameter</span><br>
 <code>pStdReferenceInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoDecodeH264ReferenceInfo</code> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="decode-h264-requirements"><a class="anchor" href="chap42.html#decode-h264-requirements"></a>42.11.7. H.264 Decode Requirements</h4>
<div class="paragraph">
<p>This section describes the <strong class="purple">required</strong> H.264 decoding capabilities for
physical devices that have at least one queue family that supports the video
codec operation <code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_KHR</code>, as
returned by <a href="chap5.html#vkGetPhysicalDeviceQueueFamilyProperties2">vkGetPhysicalDeviceQueueFamilyProperties2</a> in
<a href="chap5.html#VkQueueFamilyVideoPropertiesKHR">VkQueueFamilyVideoPropertiesKHR</a>::<code>videoCodecOperations</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 50. Required <a href="chap42.html#video-std-header-version">Video Std Header Versions</a></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Video Std Header Name</th>
<th class="tableblock halign-left valign-top">Version</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vulkan_video_codec_h264std_decode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0.0</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="decode-h265"><a class="anchor" href="chap42.html#decode-h265"></a>42.12. H.265 Decode Operations</h3>
<div class="paragraph">
<p>Video decode operations using an <a href="chap42.html#decode-h265-profile">H.265 decode
profile</a> <strong class="purple">can</strong> be used to decode elementary video stream sequences compliant
to the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Refer to the <a href="chap1.html">Preamble</a> for information on how the Khronos
Intellectual Property Rights Policy relates to normative references to
external materials not created by Khronos.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>This process is performed according to the <a href="chap42.html#decode-operation-steps">video
decode operation steps</a> with the codec-specific semantics defined in
section 8 of <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Syntax elements, derived values, and other parameters are applied from
the following structures:</p>
<div class="ulist">
<ul>
<li>
<p>The <code>StdVideoH265VideoParameterSet</code> structure corresponding to the
<a href="chap42.html#decode-h265-active-vps">active VPS</a> specifying the <a href="chap42.html#decode-h265-vps">H.265 video parameter set</a>.</p>
</li>
<li>
<p>The <code>StdVideoH265SequenceParameterSet</code> structure corresponding to
the <a href="chap42.html#decode-h265-active-sps">active SPS</a> specifying the
<a href="chap42.html#decode-h265-sps">H.265 sequence parameter set</a>.</p>
</li>
<li>
<p>The <code>StdVideoH265PictureParameterSet</code> structure corresponding to the
<a href="chap42.html#decode-h265-active-pps">active PPS</a> specifying the <a href="chap42.html#decode-h265-pps">H.265 picture parameter set</a>.</p>
</li>
<li>
<p>The <code>StdVideoDecodeH265PictureInfo</code> structure specifying the
<a href="chap42.html#decode-h265-picture-info">H.265 picture information</a>.</p>
</li>
<li>
<p>The <code>StdVideoDecodeH265ReferenceInfo</code> structures specifying the
<a href="chap42.html#decode-h265-reference-info">H.265 reference information</a>
corresponding to the optional <a href="chap42.html#reconstructed-picture">reconstructed
picture</a> and any <a href="chap42.html#active-reference-pictures">active reference
pictures</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The contents of the provided video bitstream buffer range are
interpreted as defined in the <a href="chap42.html#decode-h265-bitstream-data-access">H.265
Decode Bitstream Data Access</a> section.</p>
</li>
<li>
<p>Picture data in the <a href="chap42.html#video-picture-resources">video picture resources</a>
corresponding to the used <a href="chap42.html#decode-h265-active-reference-picture-info">active reference pictures</a>, <a href="chap42.html#decode-h265-output-picture-info">decode
output picture</a>, and optional <a href="chap42.html#decode-h265-reconstructed-picture-info">reconstructed picture</a> is accessed as defined in the
<a href="chap42.html#decode-h265-picture-data-access">H.265 Decode Picture Data Access</a>
section.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the parameters and the bitstream adhere to the syntactic and semantic
requirements defined in the corresponding sections of the <a href="chap2.html#itu-t-h265">ITU-T
H.265 Specification</a>, as described above, and the <a href="chap42.html#dpb-slot">DPB slots</a>
associated with the <a href="chap42.html#active-reference-pictures">active reference pictures</a>
all refer to <a href="chap42.html#dpb-slot-states">valid picture references</a>, then the video
decode operation will complete successfully.
Otherwise, the video decode operation <strong class="purple">may</strong> complete
<a href="chap42.html#decode-unsuccessful">unsuccessfully</a>.</p>
</div>
<div class="sect3">
<h4 id="decode-h265-bitstream-data-access"><a class="anchor" href="chap42.html#decode-h265-bitstream-data-access"></a>42.12.1. H.265 Decode Bitstream Data Access</h4>
<div class="paragraph">
<p>The video bitstream buffer range <strong class="purple">should</strong> contain a VCL NAL unit comprised of
the slice segment headers and data of a picture representing a frame, as
defined in sections 7.3.6 and 7.3.8, and this data is interpreted as defined
in sections 7.4.7 and 7.4.9 of the <a href="chap2.html#itu-t-h265">ITU-T H.265
Specification</a>, respectively.</p>
</div>
<div class="paragraph">
<p>The offsets provided in
<a href="chap42.html#VkVideoDecodeH265PictureInfoKHR">VkVideoDecodeH265PictureInfoKHR</a>::<code>pSliceSegmentOffsets</code> <strong class="purple">should</strong>
specify the starting offsets corresponding to each slice segment header
within the video bitstream buffer range.</p>
</div>
</div>
<div class="sect3">
<h4 id="decode-h265-picture-data-access"><a class="anchor" href="chap42.html#decode-h265-picture-data-access"></a>42.12.2. H.265 Decode Picture Data Access</h4>
<div class="paragraph">
<p>Accesses to image data within a video picture resource happen at the
granularity indicated by
<a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>pictureAccessGranularity</code>, as returned by
<a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> for the used <a href="chap42.html#video-profiles">video profile</a>.
Accordingly, the complete image subregion of a
<a href="chap42.html#decode-output-picture">decode output picture</a>,
<a href="chap42.html#reference-picture">reference picture</a>, or
<a href="chap42.html#reconstructed-picture">reconstructed picture</a> accessed by video coding
operations using an <a href="chap42.html#decode-h265-profile">H.265 decode profile</a> is defined
as the set of texels within the coordinate range:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">([0,<code>endX</code>),[0,<code>endY</code>))</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><span class="eq"><code>endX</code></span> equals <span class="eq"><code>codedExtent.width</code></span> rounded up to the
nearest integer multiple of <code>pictureAccessGranularity.width</code> and
clamped to the width of the image subresource
<a href="chap42.html#video-image-subresource-reference">referred</a> to by the corresponding
<a href="chap42.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> structure;</p>
</li>
<li>
<p><span class="eq">endY</span> equals <span class="eq"><code>codedExtent.height</code></span> rounded up to the
nearest integer multiple of <code>pictureAccessGranularity.height</code> and
clamped to the height of the image subresource
<a href="chap42.html#video-image-subresource-reference">referred</a> to by the corresponding
<a href="chap42.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> structure;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Where <code>codedExtent</code> is the member of the
<a href="chap42.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> structure corresponding to the picture.</p>
</div>
<div class="paragraph">
<p>In case of video decode operations using an <a href="chap42.html#decode-h265-profile">H.265
decode profile</a>, any access to a picture at the coordinates
<span class="eq">(<code>x</code>,<code>y</code>)</span>, as defined by the <a href="chap2.html#itu-t-h265">ITU-T H.265
Specification</a>, is an access to the image subresource
<a href="chap42.html#video-image-subresource-reference">referred</a> to by the corresponding
<a href="chap42.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> structure at the texel coordinates
<span class="eq">(<code>x</code>,<code>y</code>)</span>.</p>
</div>
</div>
<div class="sect3">
<h4 id="decode-h265-profile"><a class="anchor" href="chap42.html#decode-h265-profile"></a>42.12.3. H.265 Decode Profile</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>A video profile supporting H.265 video decode operations is specified by
setting <a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>::<code>videoCodecOperation</code> to
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code> and adding a
<code>VkVideoDecodeH265ProfileInfoKHR</code> structure to the
<a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>::<code>pNext</code> chain.</p>
</div>
<div class="paragraph">
<p>The <code>VkVideoDecodeH265ProfileInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH265ProfileInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH265ProfileInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>           <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>               <span class="n">pNext</span><span class="p">;</span>
    <span class="n">StdVideoH265ProfileIdc</span>    <span class="n">stdProfileIdc</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH265ProfileInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stdProfileIdc</code> is a <code>StdVideoH265ProfileIdc</code> value specifying
the H.265 codec profile IDC, as defined in section A3 of the
<a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265ProfileInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoDecodeH265ProfileInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH265ProfileInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H265_PROFILE_INFO_KHR</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_h_265_decode_capabilities"><a class="anchor" href="chap42.html#_h_265_decode_capabilities"></a>42.12.4. H.265 Decode Capabilities</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>When calling <a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> to query the
capabilities for an <a href="chap42.html#decode-h265-profile">H.265 decode profile</a>, the
<a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>pNext</code> chain <strong class="purple">must</strong> include a
<code>VkVideoDecodeH265CapabilitiesKHR</code> structure that will be filled with
the profile-specific capabilities.</p>
</div>
<div class="paragraph">
<p>The <code>VkVideoDecodeH265CapabilitiesKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH265CapabilitiesKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH265CapabilitiesKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>         <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                   <span class="n">pNext</span><span class="p">;</span>
    <span class="n">StdVideoH265LevelIdc</span>    <span class="n">maxLevelIdc</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH265CapabilitiesKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>maxLevelIdc</code> is a <code>StdVideoH265LevelIdc</code> value specifying the
maximum H.265 level supported by the profile, as defined in section A.4
of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265CapabilitiesKHR-sType-sType" href="chap42.html#VUID-VkVideoDecodeH265CapabilitiesKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH265CapabilitiesKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H265_CAPABILITIES_KHR</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="decode-h265-parameter-sets"><a class="anchor" href="chap42.html#decode-h265-parameter-sets"></a>42.12.5. H.265 Decode Parameter Sets</h4>
<div class="paragraph">
<p><a href="chap42.html#video-session-parameters">Video session parameters</a> objects created with
the video codec operation <code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>
<strong class="purple">can</strong> contain the following types of parameters:</p>
</div>
<div id="decode-h265-vps" class="dlist">
<dl>
<dt class="hdlist1">H.265 Video Parameter Sets (VPS)</dt>
<dd>
<p>Represented by <code>StdVideoH265VideoParameterSet</code> structures and interpreted
as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>reserved1</code>, <code>reserved2</code>, and <code>reserved3</code> are used only for
padding purposes and are otherwise ignored;</p>
</li>
<li>
<p><code>vps_video_parameter_set_id</code> is used as the key of the VPS entry;</p>
</li>
<li>
<p>the <code>max_latency_increase_plus1</code>, <code>max_dec_pic_buffering_minus1</code>,
and <code>max_num_reorder_pics</code> members of the
<code>StdVideoH265DecPicBufMgr</code> structure pointed to by <code>pDecPicBufMgr</code>
correspond to <code>vps_max_latency_increase_plus1</code>,
<code>vps_max_dec_pic_buffering_minus1</code>, and <code>vps_max_num_reorder_pics</code>,
respectively, as defined in section 7.4.3.1 of the <a href="chap2.html#itu-t-h265">ITU-T
H.265 Specification</a>;</p>
</li>
<li>
<p>the <code>StdVideoH265HrdParameters</code> structure pointed to by
<code>pHrdParameters</code> is interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>reserved</code> is used only for padding purposes and is otherwise
ignored;</p>
</li>
<li>
<p><code>flags.fixed_pic_rate_general_flag</code> is a bitmask where bit index
<span class="eq">i</span> corresponds to <code>fixed_pic_rate_general_flag[i]</code> as defined in
section E.3.2 of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p><code>flags.fixed_pic_rate_within_cvs_flag</code> is a bitmask where bit index
<span class="eq">i</span> corresponds to <code>fixed_pic_rate_within_cvs_flag[i]</code> as defined
in section E.3.2 of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p><code>flags.low_delay_hrd_flag</code> is a bitmask where bit index <span class="eq">i</span>
corresponds to <code>low_delay_hrd_flag[i]</code> as defined in section E.3.2 of
the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p>if <code>flags.nal_hrd_parameters_present_flag</code> is set, then
<code>pSubLayerHrdParametersNal</code> points to an array of
<span class="eq"><code>vps_max_sub_layers_minus1</code> + 1</span> number of
<code>StdVideoH265SubLayerHrdParameters</code> structures where
<code>vps_max_sub_layers_minus1</code> is the corresponding member of the
encompassing <code>StdVideoH265VideoParameterSet</code> structure and each
element is interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>cbr_flag</code> is a bitmask where bit index <span class="eq">i</span> corresponds to
<code>cbr_flag[i]</code> as defined in section E.3.3 of the <a href="chap2.html#itu-t-h265">ITU-T
H.265 Specification</a>;</p>
</li>
<li>
<p>all other members of the <code>StdVideoH265SubLayerHrdParameters</code>
structure are interpreted as defined in section E.3.3 of the
<a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
</ul>
</div>
</li>
<li>
<p>if <code>flags.vcl_hrd_parameters_present_flag</code> is set, then
<code>pSubLayerHrdParametersVcl</code> points to an array of
<span class="eq"><code>vps_max_sub_layers_minus1</code> + 1</span> number of
<code>StdVideoH265SubLayerHrdParameters</code> structures where
<code>vps_max_sub_layers_minus1</code> is the corresponding member of the
encompassing <code>StdVideoH265VideoParameterSet</code> structure and each
element is interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>cbr_flag</code> is a bitmask where bit index <span class="eq">i</span> corresponds to
<code>cbr_flag[i]</code> as defined in section E.3.3 of the <a href="chap2.html#itu-t-h265">ITU-T
H.265 Specification</a>;</p>
</li>
<li>
<p>all other members of the <code>StdVideoH265SubLayerHrdParameters</code>
structure are interpreted as defined in section E.3.3 of the
<a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
</ul>
</div>
</li>
<li>
<p>all other members of <code>StdVideoH265HrdParameters</code> are interpreted as
defined in section E.3.2 of the <a href="chap2.html#itu-t-h265">ITU-T H.265
Specification</a>;</p>
</li>
</ul>
</div>
</li>
<li>
<p>the members of the <code>StdVideoH265ProfileTierLevel</code> structure pointed
to by <code>pProfileTierLevel</code> are interpreted as defined in section 7.4.4
of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p>all other members of <code>StdVideoH265VideoParameterSet</code> are interpreted
as defined in section 7.4.3.1 of the <a href="chap2.html#itu-t-h265">ITU-T H.265
Specification</a>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div id="decode-h265-sps" class="dlist">
<dl>
<dt class="hdlist1">H.265 Sequence Parameter Sets (SPS)</dt>
<dd>
<p>Represented by <code>StdVideoH265SequenceParameterSet</code> structures and
interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>reserved1</code> and <code>reserved2</code> are used only for padding purposes and
are otherwise ignored;</p>
</li>
<li>
<p>the pair constructed from <code>sps_video_parameter_set_id</code> and
<code>sps_seq_parameter_set_id</code> is used as the key of the SPS entry;</p>
</li>
<li>
<p>the members of the <code>StdVideoH265ProfileTierLevel</code> structure pointed
to by <code>pProfileTierLevel</code> are interpreted as defined in section 7.4.4
of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p>the <code>max_latency_increase_plus1</code>, <code>max_dec_pic_buffering_minus1</code>,
and <code>max_num_reorder_pics</code> members of the
<code>StdVideoH265DecPicBufMgr</code> structure pointed to by <code>pDecPicBufMgr</code>
correspond to <code>sps_max_latency_increase_plus1</code>,
<code>sps_max_dec_pic_buffering_minus1</code>, and <code>sps_max_num_reorder_pics</code>,
respectively, as defined in section 7.4.3.2 of the <a href="chap2.html#itu-t-h265">ITU-T
H.265 Specification</a>;</p>
</li>
<li>
<p>if <code>flags.sps_scaling_list_data_present_flag</code> is set, then the
<code>StdVideoH265ScalingLists</code> structure pointed to by <code>pScalingLists</code>
is interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>ScalingList4x4</code>, <code>ScalingList8x8</code>, <code>ScalingList16x16</code>, and
<code>ScalingList32x32</code> correspond to <code>ScalingList[0]</code>, <code>ScalingList[1]</code>,
<code>ScalingList[2]</code>, and <code>ScalingList[3]</code>, respectively, as defined in
section 7.3.4 of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p><code>ScalingListDCCoef16x16</code> and <code>ScalingListDCCoef32x32</code> correspond
to <code>scaling_list_dc_coef_minus8[0]</code> and
<code>scaling_list_dc_coef_minus8[1]</code>, respectively, as defined in section
7.3.4 of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>pShortTermRefPicSet</code> points to an array of
<code>num_short_term_ref_pic_sets</code> number of
<code>StdVideoH265ShortTermRefPicSet</code> structures where each element is
interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>reserved1</code>, <code>reserved2</code>, and <code>reserved3</code> are used only for
padding purposes and are otherwise ignored;</p>
</li>
<li>
<p><code>used_by_curr_pic_flag</code> is a bitmask where bit index <span class="eq">i</span>
corresponds to <code>used_by_curr_pic_flag[i]</code> as defined in section 7.4.8
of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p><code>use_delta_flag</code> is a bitmask where bit index <span class="eq">i</span> corresponds to
<code>use_delta_flag[i]</code> as defined in section 7.4.8 of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p><code>used_by_curr_pic_s0_flag</code> is a bitmask where bit index <span class="eq">i</span>
corresponds to <code>used_by_curr_pic_s0_flag[i]</code> as defined in section
7.4.8 of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p><code>used_by_curr_pic_s1_flag</code> is a bitmask where bit index <span class="eq">i</span>
corresponds to <code>used_by_curr_pic_s1_flag[i]</code> as defined in section
7.4.8 of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p>all other members of <code>StdVideoH265ShortTermRefPicSet</code> are
interpreted as defined in section 7.4.8 of the <a href="chap2.html#itu-t-h265">ITU-T H.265
Specification</a>;</p>
</li>
</ul>
</div>
</li>
<li>
<p>if <code>flags.long_term_ref_pics_present_flag</code> is set then the
<code>StdVideoH265LongTermRefPicsSps</code> structure pointed to by
<code>pLongTermRefPicsSps</code> is interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>used_by_curr_pic_lt_sps_flag</code> is a bitmask where bit index <span class="eq">i</span>
corresponds to <code>used_by_curr_pic_lt_sps_flag[i]</code> as defined in section
7.4.3.2 of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p>all other members of <code>StdVideoH265LongTermRefPicsSps</code> are
interpreted as defined in section 7.4.3.2 of the <a href="chap2.html#itu-t-h265">ITU-T
H.265 Specification</a>;</p>
</li>
</ul>
</div>
</li>
<li>
<p>if <code>flags.vui_parameters_present_flag</code> is set, then the
<code>StdVideoH265SequenceParameterSetVui</code> structure pointed to by
<code>pSequenceParameterSetVui</code> is interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>reserved1</code>, <code>reserved2</code>, and <code>reserved3</code> are used only for
padding purposes and are otherwise ignored;</p>
</li>
<li>
<p>the <code>StdVideoH265HrdParameters</code> structure pointed to by
<code>pHrdParameters</code> is interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>flags.fixed_pic_rate_general_flag</code> is a bitmask where bit index
<span class="eq">i</span> corresponds to <code>fixed_pic_rate_general_flag[i]</code> as defined in
section E.3.2 of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p><code>flags.fixed_pic_rate_within_cvs_flag</code> is a bitmask where bit index
<span class="eq">i</span> corresponds to <code>fixed_pic_rate_within_cvs_flag[i]</code> as defined
in section E.3.2 of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p><code>flags.low_delay_hrd_flag</code> is a bitmask where bit index <span class="eq">i</span>
corresponds to <code>low_delay_hrd_flag[i]</code> as defined in section E.3.2 of
the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p>if <code>flags.nal_hrd_parameters_present_flag</code> is set, then
<code>pSubLayerHrdParametersNal</code> points to an array of
<span class="eq"><code>sps_max_sub_layers_minus1</code> + 1</span> number of
<code>StdVideoH265SubLayerHrdParameters</code> structures where
<code>sps_max_sub_layers_minus1</code> is the corresponding member of the
encompassing <code>StdVideoH265SequenceParameterSet</code> structure and each
element is interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>cbr_flag</code> is a bitmask where bit index <span class="eq">i</span> corresponds to
<code>cbr_flag[i]</code> as defined in section E.3.3 of the <a href="chap2.html#itu-t-h265">ITU-T
H.265 Specification</a>;</p>
</li>
<li>
<p>all other members of the <code>StdVideoH265SubLayerHrdParameters</code>
structure are interpreted as defined in section E.3.3 of the
<a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
</ul>
</div>
</li>
<li>
<p>if <code>flags.vcl_hrd_parameters_present_flag</code> is set, then
<code>pSubLayerHrdParametersVcl</code> points to an array of
<span class="eq"><code>sps_max_sub_layers_minus1</code> + 1</span> number of
<code>StdVideoH265SubLayerHrdParameters</code> structures where
<code>sps_max_sub_layers_minus1</code> is the corresponding member of the
encompassing <code>StdVideoH265SequenceParameterSet</code> structure and each
element is interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>cbr_flag</code> is a bitmask where bit index <span class="eq">i</span> corresponds to
<code>cbr_flag[i]</code> as defined in section E.3.3 of the <a href="chap2.html#itu-t-h265">ITU-T
H.265 Specification</a>;</p>
</li>
<li>
<p>all other members of the <code>StdVideoH265SubLayerHrdParameters</code>
structure are interpreted as defined in section E.3.3 of the
<a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
</ul>
</div>
</li>
<li>
<p>all other members of <code>StdVideoH265HrdParameters</code> are interpreted as
defined in section E.3.2 of the <a href="chap2.html#itu-t-h265">ITU-T H.265
Specification</a>;</p>
</li>
</ul>
</div>
</li>
<li>
<p>all other members of <code>pSequenceParameterSetVui</code> are interpreted as
defined in section E.3.1 of the <a href="chap2.html#itu-t-h265">ITU-T H.265
Specification</a>;</p>
</li>
</ul>
</div>
</li>
<li>
<p>if <code>flags.sps_palette_predictor_initializer_present_flag</code> is set,
then the <code>PredictorPaletteEntries</code> member of the
<code>StdVideoH265PredictorPaletteEntries</code> structure pointed to by
<code>pPredictorPaletteEntries</code> is interpreted as defined in section
7.4.9.13 of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p>all other members of <code>StdVideoH265SequenceParameterSet</code> are
interpreted as defined in section 7.4.3.1 of the <a href="chap2.html#itu-t-h265">ITU-T
H.265 Specification</a>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div id="decode-h265-pps" class="dlist">
<dl>
<dt class="hdlist1">H.265 Picture Parameter Sets (PPS)</dt>
<dd>
<p>Represented by <code>StdVideoH265PictureParameterSet</code> structures and
interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>reserved1</code>, <code>reserved2</code>, and <code>reserved3</code> are used only for
padding purposes and are otherwise ignored;</p>
</li>
<li>
<p>the triplet constructed from <code>sps_video_parameter_set_id</code>,
<code>pps_seq_parameter_set_id</code>, and <code>pps_pic_parameter_set_id</code> is used
as the key of the PPS entry;</p>
</li>
<li>
<p>if <code>flags.pps_scaling_list_data_present_flag</code> is set, then the
<code>StdVideoH265ScalingLists</code> structure pointed to by <code>pScalingLists</code>
is interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>ScalingList4x4</code>, <code>ScalingList8x8</code>, <code>ScalingList16x16</code>, and
<code>ScalingList32x32</code> correspond to <code>ScalingList[0]</code>, <code>ScalingList[1]</code>,
<code>ScalingList[2]</code>, and <code>ScalingList[3]</code>, respectively, as defined in
section 7.3.4 of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p><code>ScalingListDCCoef16x16</code> and <code>ScalingListDCCoef32x32</code> correspond
to <code>scaling_list_dc_coef_minus8[0]</code> and
<code>scaling_list_dc_coef_minus8[1]</code>, respectively, as defined in section
7.3.4 of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
</ul>
</div>
</li>
<li>
<p>if <code>flags.pps_palette_predictor_initializer_present_flag</code> is set,
then the <code>PredictorPaletteEntries</code> member of the
<code>StdVideoH265PredictorPaletteEntries</code> structure pointed to by
<code>pPredictorPaletteEntries</code> is interpreted as defined in section
7.4.9.13 of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p>all other members of <code>StdVideoH265PictureParameterSet</code> are
interpreted as defined in section 7.4.3.3 of the <a href="chap2.html#itu-t-h265">ITU-T
H.265 Specification</a>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>When a <a href="chap42.html#video-session-parameters">video session parameters</a> object is
created with the codec operation
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, the
<a href="chap42.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a>::<code>pNext</code> chain <strong class="purple">must</strong> include
a <code>VkVideoDecodeH265SessionParametersCreateInfoKHR</code> structure specifying
the capacity and initial contents of the object.</p>
</div>
<div class="paragraph">
<p>The <code>VkVideoDecodeH265SessionParametersCreateInfoKHR</code> structure is
defined as:</p>
</div>
<div id="VkVideoDecodeH265SessionParametersCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH265SessionParametersCreateInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                        <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                            <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                               <span class="n">maxStdVPSCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                               <span class="n">maxStdSPSCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                               <span class="n">maxStdPPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoDecodeH265SessionParametersAddInfoKHR</span><span class="o">*</span>    <span class="n">pParametersAddInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH265SessionParametersCreateInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>maxStdVPSCount</code> is the maximum number of <a href="chap42.html#decode-h265-vps">H.265
VPS</a> entries the created <code>VkVideoSessionParametersKHR</code> <strong class="purple">can</strong>
contain.</p>
</li>
<li>
<p><code>maxStdSPSCount</code> is the maximum number of <a href="chap42.html#decode-h265-sps">H.265
SPS</a> entries the created <code>VkVideoSessionParametersKHR</code> <strong class="purple">can</strong>
contain.</p>
</li>
<li>
<p><code>maxStdPPSCount</code> is the maximum number of <a href="chap42.html#decode-h265-pps">H.265
PPS</a> entries the created <code>VkVideoSessionParametersKHR</code> <strong class="purple">can</strong>
contain.</p>
</li>
<li>
<p><code>pParametersAddInfo</code> is <code>NULL</code> or a pointer to a
<a href="chap42.html#VkVideoDecodeH265SessionParametersAddInfoKHR">VkVideoDecodeH265SessionParametersAddInfoKHR</a> structure specifying
H.265 parameters to add upon object creation.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersCreateInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoDecodeH265SessionParametersCreateInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersCreateInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H265_SESSION_PARAMETERS_CREATE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersCreateInfoKHR-pParametersAddInfo-parameter" href="chap42.html#VUID-VkVideoDecodeH265SessionParametersCreateInfoKHR-pParametersAddInfo-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersCreateInfoKHR-pParametersAddInfo-parameter</span><br>
 If <code>pParametersAddInfo</code> is not <code>NULL</code>, <code>pParametersAddInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap42.html#VkVideoDecodeH265SessionParametersAddInfoKHR">VkVideoDecodeH265SessionParametersAddInfoKHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoDecodeH265SessionParametersAddInfoKHR</code> structure is defined
as:</p>
</div>
<div id="VkVideoDecodeH265SessionParametersAddInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH265SessionParametersAddInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                            <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                   <span class="n">stdVPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoH265VideoParameterSet</span><span class="o">*</span>       <span class="n">pStdVPSs</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                   <span class="n">stdSPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoH265SequenceParameterSet</span><span class="o">*</span>    <span class="n">pStdSPSs</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                   <span class="n">stdPPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoH265PictureParameterSet</span><span class="o">*</span>     <span class="n">pStdPPSs</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH265SessionParametersAddInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stdVPSCount</code> is the number of elements in the <code>pStdVPSs</code> array.</p>
</li>
<li>
<p><code>pStdVPSs</code> is a pointer to an array of
<code>StdVideoH265VideoParameterSet</code> structures describing the
<a href="chap42.html#decode-h265-vps">H.265 VPS</a> entries to add.</p>
</li>
<li>
<p><code>stdSPSCount</code> is the number of elements in the <code>pStdSPSs</code> array.</p>
</li>
<li>
<p><code>pStdSPSs</code> is a pointer to an array of
<code>StdVideoH265SequenceParameterSet</code> structures describing the
<a href="chap42.html#decode-h265-sps">H.265 SPS</a> entries to add.</p>
</li>
<li>
<p><code>stdPPSCount</code> is the number of elements in the <code>pStdPPSs</code> array.</p>
</li>
<li>
<p><code>pStdPPSs</code> is a pointer to an array of
<code>StdVideoH265PictureParameterSet</code> structures describing the
<a href="chap42.html#decode-h265-pps">H.265 PPS</a> entries to add.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This structure <strong class="purple">can</strong> be specified in the following places:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <code>pParametersAddInfo</code> member of the
<a href="chap42.html#VkVideoDecodeH265SessionParametersCreateInfoKHR">VkVideoDecodeH265SessionParametersCreateInfoKHR</a> structure
specified in the <code>pNext</code> chain of
<a href="chap42.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a> used to create a
<a href="chap42.html#video-session-parameters">video session parameters</a> object.
In this case, if the video codec operation the video session parameters
object is created with is
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then it defines the
set of initial parameters to add to the created object (see
<a href="chap42.html#creating-video-session-parameters">Creating Video Session
Parameters</a>).</p>
</li>
<li>
<p>In the <code>pNext</code> chain of <a href="chap42.html#VkVideoSessionParametersUpdateInfoKHR">VkVideoSessionParametersUpdateInfoKHR</a>.
In this case, if the video codec operation the
<a href="chap42.html#video-session-parameters">video session parameters</a> object to be
updated was created with is
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, then it defines the
set of parameters to add to it (see
<a href="chap42.html#video-session-parameters-update">Updating Video Session Parameters</a>).</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoKHR-None-04833" href="chap42.html#VUID-VkVideoDecodeH265SessionParametersAddInfoKHR-None-04833"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoKHR-None-04833</span><br>

The <code>vps_video_parameter_set_id</code> member of each
<code>StdVideoH265VideoParameterSet</code> structure specified in the elements
of <code>pStdVPSs</code> <strong class="purple">must</strong> be unique within <code>pStdVPSs</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoKHR-None-04834" href="chap42.html#VUID-VkVideoDecodeH265SessionParametersAddInfoKHR-None-04834"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoKHR-None-04834</span><br>

The pair constructed from the <code>sps_video_parameter_set_id</code> and
<code>sps_seq_parameter_set_id</code> members of each
<code>StdVideoH265SequenceParameterSet</code> structure specified in the
elements of <code>pStdSPSs</code> <strong class="purple">must</strong> be unique within <code>pStdSPSs</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoKHR-None-04835" href="chap42.html#VUID-VkVideoDecodeH265SessionParametersAddInfoKHR-None-04835"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoKHR-None-04835</span><br>

The triplet constructed from the <code>sps_video_parameter_set_id</code>,
<code>pps_seq_parameter_set_id</code>, and <code>pps_pic_parameter_set_id</code>
members of each <code>StdVideoH265PictureParameterSet</code> structure specified
in the elements of <code>pStdPPSs</code> <strong class="purple">must</strong> be unique within <code>pStdPPSs</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoDecodeH265SessionParametersAddInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H265_SESSION_PARAMETERS_ADD_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoKHR-pStdVPSs-parameter" href="chap42.html#VUID-VkVideoDecodeH265SessionParametersAddInfoKHR-pStdVPSs-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoKHR-pStdVPSs-parameter</span><br>
 If <code>stdVPSCount</code> is not <code>0</code>, <code>pStdVPSs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>stdVPSCount</code> <code>StdVideoH265VideoParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoKHR-pStdSPSs-parameter" href="chap42.html#VUID-VkVideoDecodeH265SessionParametersAddInfoKHR-pStdSPSs-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoKHR-pStdSPSs-parameter</span><br>
 If <code>stdSPSCount</code> is not <code>0</code>, <code>pStdSPSs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>stdSPSCount</code> <code>StdVideoH265SequenceParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoKHR-pStdPPSs-parameter" href="chap42.html#VUID-VkVideoDecodeH265SessionParametersAddInfoKHR-pStdPPSs-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoKHR-pStdPPSs-parameter</span><br>
 If <code>stdPPSCount</code> is not <code>0</code>, <code>pStdPPSs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>stdPPSCount</code> <code>StdVideoH265PictureParameterSet</code> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_h_265_decoding_parameters"><a class="anchor" href="chap42.html#_h_265_decoding_parameters"></a>42.12.6. H.265 Decoding Parameters</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoDecodeH265PictureInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH265PictureInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH265PictureInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                   <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                       <span class="n">pNext</span><span class="p">;</span>
    <span class="n">StdVideoDecodeH265PictureInfo</span><span class="o">*</span>    <span class="n">pStdPictureInfo</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                          <span class="n">sliceSegmentCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint32_t</span><span class="o">*</span>                   <span class="n">pSliceSegmentOffsets</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH265PictureInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pStdPictureInfo</code> is a pointer to a
<code>StdVideoDecodeH265PictureInfo</code> structure specifying
<a href="chap42.html#decode-h265-picture-info">H.265 picture information</a>.</p>
</li>
<li>
<p><code>sliceSegmentCount</code> is the number of elements in
<code>pSliceSegmentOffsets</code>.</p>
</li>
<li>
<p><code>pSliceSegmentOffsets</code> is a pointer to an array of
<code>sliceSegmentCount</code> offsets specifying the start offset of the slice
segments of the picture within the video bitstream buffer range
specified in <a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This structure is specified in the <code>pNext</code> chain of the
<a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a> structure passed to <a href="chap42.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a> to
specify the codec-specific picture information for an <a href="chap42.html#decode-h265">H.265
decode operation</a>.</p>
</div>
<div id="decode-h265-output-picture-info" class="dlist">
<dl>
<dt class="hdlist1">Decode Output Picture Information</dt>
<dd>
<p>When this structure is specified in the <code>pNext</code> chain of the
<a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a> structure passed to <a href="chap42.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a>,
the information related to the <a href="chap42.html#decode-output-picture-info">decode output
picture</a> is defined as follows:</p>
<div class="ulist">
<ul>
<li>
<p>The image subregion used is determined according to the
<a href="chap42.html#decode-h265-picture-data-access">H.265 Decode Picture Data Access</a>
section.</p>
</li>
<li>
<p>The decode output picture is associated with the
<a href="chap42.html#decode-h265-picture-info">H.265 picture information</a> provided in
<code>pStdPictureInfo</code>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div id="decode-h265-picture-info" class="dlist">
<dl>
<dt class="hdlist1">Std Picture Information</dt>
<dd>
<p>The members of the <code>StdVideoDecodeH265PictureInfo</code> structure pointed to
by <code>pStdPictureInfo</code> are interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>reserved</code> is used only for padding purposes and is otherwise
ignored;</p>
</li>
<li>
<p><code>flags.IrapPicFlag</code> as defined in section 3.73 of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p><code>flags.IdrPicFlag</code> as defined in section 3.67 of the
<a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p><code>flags.IsReference</code> as defined in section 3.132 of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p><code>sps_video_parameter_set_id</code>, <code>pps_seq_parameter_set_id</code>, and
<code>pps_pic_parameter_set_id</code> are used to identify the active parameter
sets, as described below;</p>
</li>
<li>
<p><code>PicOrderCntVal</code> as defined in section 8.3.1 of the
<a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p><code>NumBitsForSTRefPicSetInSlice</code> is the number of bits used in
<code>st_ref_pic_set</code> when <code>short_term_ref_pic_set_sps_flag</code> is <code>0</code>, or <code>0</code>
otherwise, as defined in sections 7.4.7 and 7.4.8 of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p><code>NumDeltaPocsOfRefRpsIdx</code> is the value of <code>NumDeltaPocs[RefRpsIdx]</code>
when <code>short_term_ref_pic_set_sps_flag</code> is <code>1</code>, or <code>0</code> otherwise, as
defined in sections 7.4.7 and 7.4.8 of the <a href="chap2.html#itu-t-h265">ITU-T H.265
Specification</a>;</p>
</li>
<li>
<p><code>RefPicSetStCurrBefore</code>, <code>RefPicSetStCurrAfter</code>, and
<code>RefPicSetLtCurr</code> are interpreted as defined in section 8.3.2 of the
<a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a> where each element of these
arrays either identifies an
<a href="chap42.html#decode-active-reference-picture-info">active reference picture</a> using
its <a href="chap42.html#dpb-slot">DPB slot</a> index or contains the value 0xFF to indicate
"no reference picture";</p>
</li>
<li>
<p>all other members are interpreted as defined in section 8.3.2 of the
<a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Active Parameter Sets</dt>
<dd>
<p>The members of the <code>StdVideoDecodeH265PictureInfo</code> structure pointed to
by <code>pStdPictureInfo</code> are used to select the active parameter sets to use
from the bound video session parameters object, as follows:</p>
<div class="ulist">
<ul>
<li>
<p><a id="decode-h265-active-vps"></a> The <em>active VPS</em> is the
<a href="chap42.html#decode-h265-vps">VPS</a> identified by the key specified in
<code>StdVideoDecodeH265PictureInfo</code>::<code>sps_video_parameter_set_id</code>.</p>
</li>
<li>
<p><a id="decode-h265-active-sps"></a> The <em>active SPS</em> is the
<a href="chap42.html#decode-h265-sps">SPS</a> identified by the key specified by the pair
constructed from
<code>StdVideoDecodeH265PictureInfo</code>::<code>sps_video_parameter_set_id</code> and
<code>StdVideoDecodeH265PictureInfo</code>::<code>pps_seq_parameter_set_id</code>.</p>
</li>
<li>
<p><a id="decode-h265-active-pps"></a> The <em>active PPS</em> is the
<a href="chap42.html#decode-h265-pps">PPS</a> identified by the key specified by the triplet
constructed from
<code>StdVideoDecodeH265PictureInfo</code>::<code>sps_video_parameter_set_id</code>,
<code>StdVideoDecodeH265PictureInfo</code>::<code>pps_seq_parameter_set_id</code>, and
<code>StdVideoDecodeH265PictureInfo</code>::<code>pps_pic_parameter_set_id</code>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265PictureInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoDecodeH265PictureInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH265PictureInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H265_PICTURE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265PictureInfoKHR-pStdPictureInfo-parameter" href="chap42.html#VUID-VkVideoDecodeH265PictureInfoKHR-pStdPictureInfo-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH265PictureInfoKHR-pStdPictureInfo-parameter</span><br>
 <code>pStdPictureInfo</code> <strong class="purple">must</strong> be a valid pointer to a <code>StdVideoDecodeH265PictureInfo</code> value</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265PictureInfoKHR-pSliceSegmentOffsets-parameter" href="chap42.html#VUID-VkVideoDecodeH265PictureInfoKHR-pSliceSegmentOffsets-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH265PictureInfoKHR-pSliceSegmentOffsets-parameter</span><br>
 <code>pSliceSegmentOffsets</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>sliceSegmentCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265PictureInfoKHR-sliceSegmentCount-arraylength" href="chap42.html#VUID-VkVideoDecodeH265PictureInfoKHR-sliceSegmentCount-arraylength"></a> <span class="vuid">VUID-VkVideoDecodeH265PictureInfoKHR-sliceSegmentCount-arraylength</span><br>
 <code>sliceSegmentCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoDecodeH265DpbSlotInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH265DpbSlotInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_decode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoDecodeH265DpbSlotInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                           <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                               <span class="n">pNext</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoDecodeH265ReferenceInfo</span><span class="o">*</span>    <span class="n">pStdReferenceInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoDecodeH265DpbSlotInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pStdReferenceInfo</code> is a pointer to a
<code>StdVideoDecodeH265ReferenceInfo</code> structure specifying reference
picture information described in section 8.3 of the <a href="chap2.html#itu-t-h265">ITU-T
H.265 Specification</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This structure is specified in the <code>pNext</code> chain of
<a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot</code>, if not <code>NULL</code>, and
the <code>pNext</code> chain of the elements of
<a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code> to specify the
codec-specific reference picture information for an <a href="chap42.html#decode-h265">H.265
decode operation</a>.</p>
</div>
<div id="decode-h265-active-reference-picture-info" class="dlist">
<dl>
<dt class="hdlist1">Active Reference Picture Information</dt>
<dd>
<p>When this structure is specified in the <code>pNext</code> chain of the elements of
<a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code>, one element is added to
the list of <a href="chap42.html#decode-active-reference-picture-info">active reference
pictures</a> used by the video decode operation for each element of
<a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code> as follows:</p>
<div class="ulist">
<ul>
<li>
<p>The image subregion used is determined according to the
<a href="chap42.html#decode-h265-picture-data-access">H.265 Decode Picture Data Access</a>
section.</p>
</li>
<li>
<p>The reference picture is associated with the <a href="chap42.html#dpb-slot">DPB slot</a> index
specified in the <code>slotIndex</code> member of the corresponding element of
<a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code>.</p>
</li>
<li>
<p>The reference picture is associated with the
<a href="chap42.html#decode-h265-reference-info">H.265 reference information</a> provided in
<code>pStdReferenceInfo</code>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div id="decode-h265-reconstructed-picture-info" class="dlist">
<dl>
<dt class="hdlist1">Reconstructed Picture Information</dt>
<dd>
<p>When this structure is specified in the <code>pNext</code> chain of
<a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot</code>, the information
related to the <a href="chap42.html#decode-reconstructed-picture-info">reconstructed picture</a>
is defined as follows:</p>
<div class="ulist">
<ul>
<li>
<p>The image subregion used is determined according to the
<a href="chap42.html#decode-h265-picture-data-access">H.265 Decode Picture Data Access</a>
section.</p>
</li>
<li>
<p>The reconstructed picture is used to <a href="chap42.html#dpb-slot-states">activate</a> the
<a href="chap42.html#dpb-slot">DPB slot</a> with the index specified in
<a href="chap42.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot-&gt;slotIndex</code>.</p>
</li>
<li>
<p>The reconstructed picture is associated with the
<a href="chap42.html#decode-h265-reference-info">H.265 reference information</a> provided in
<code>pStdReferenceInfo</code>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div id="decode-h265-reference-info" class="dlist">
<dl>
<dt class="hdlist1">Std Reference Information</dt>
<dd>
<p>The members of the <code>StdVideoDecodeH265ReferenceInfo</code> structure pointed to
by <code>pStdReferenceInfo</code> are interpreted as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>flags.used_for_long_term_reference</code> is used to indicate whether the
picture is marked as “used for long-term reference” as defined in
section 8.3.2 of the <a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p><code>flags.unused_for_reference</code> is used to indicate whether the picture
is marked as “unused for reference” as defined in section 8.3.2 of the
<a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>;</p>
</li>
<li>
<p>all other members are interpreted as defined in section 8.3 of the
<a href="chap2.html#itu-t-h265">ITU-T H.265 Specification</a>.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265DpbSlotInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoDecodeH265DpbSlotInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH265DpbSlotInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H265_DPB_SLOT_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265DpbSlotInfoKHR-pStdReferenceInfo-parameter" href="chap42.html#VUID-VkVideoDecodeH265DpbSlotInfoKHR-pStdReferenceInfo-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH265DpbSlotInfoKHR-pStdReferenceInfo-parameter</span><br>
 <code>pStdReferenceInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoDecodeH265ReferenceInfo</code> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="decode-h265-requirements"><a class="anchor" href="chap42.html#decode-h265-requirements"></a>42.12.7. H.265 Decode Requirements</h4>
<div class="paragraph">
<p>This section describes the <strong class="purple">required</strong> H.265 decoding capabilities for
physical devices that have at least one queue family that supports the video
codec operation <code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_KHR</code>, as
returned by <a href="chap5.html#vkGetPhysicalDeviceQueueFamilyProperties2">vkGetPhysicalDeviceQueueFamilyProperties2</a> in
<a href="chap5.html#VkQueueFamilyVideoPropertiesKHR">VkQueueFamilyVideoPropertiesKHR</a>::<code>videoCodecOperations</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 51. Required <a href="chap42.html#video-std-header-version">Video Std Header Versions</a></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Video Std Header Name</th>
<th class="tableblock halign-left valign-top">Version</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vulkan_video_codec_h265std_decode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0.0</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="video-encode-operations"><a class="anchor" href="chap42.html#video-encode-operations"></a>42.13. Video Encode Operations</h3>
<div class="paragraph">
<p>Before the application can start recording Vulkan command buffers for the
Video Encode Operations, it <strong class="purple">must</strong> do the following, beforehand:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that the implementation can encode the Video Content by querying
the supported codec operations and profiles using
<a href="chap5.html#vkGetPhysicalDeviceQueueFamilyProperties2">vkGetPhysicalDeviceQueueFamilyProperties2</a>.</p>
</li>
<li>
<p>By using <a href="chap42.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> and providing
one or more video profiles, choose the Vulkan formats supported by the
implementation.
The formats for <a href="chap42.html#encode-input-picture">input</a> and
<a href="chap42.html#reference-picture">reference</a> pictures <strong class="purple">must</strong> be queried and chosen
separately.
Refer to the section on <a href="chap42.html#video-format-capabilities">Video Format
Capabilities</a>.</p>
</li>
<li>
<p>Before creating an image to be used as a video picture resource, obtain
the supported image creation parameters by querying with
<a href="chap47.html#vkGetPhysicalDeviceFormatProperties2">vkGetPhysicalDeviceFormatProperties2</a> and
<a href="chap48.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a> using one of the
reported formats and adding <a href="chap42.html#VkVideoProfileListInfoKHR">VkVideoProfileListInfoKHR</a> to the
<code>pNext</code> chain of <a href="chap47.html#VkFormatProperties2">VkFormatProperties2</a>.
When querying the parameters with
<a href="chap48.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a> for images targeting
<a href="chap42.html#encode-input-picture">input</a> and <a href="chap42.html#reference-picture">reference (DPB)</a>
pictures, the <a href="chap48.html#VkPhysicalDeviceImageFormatInfo2">VkPhysicalDeviceImageFormatInfo2</a>::<code>usage</code> field
should contain <code>VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code> and
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code>, respectively.</p>
</li>
<li>
<p>Create none, some, or all of the required <a href="chap12.html#VkImage">images</a> for the
<a href="chap42.html#encode-input-picture">input</a> and <a href="chap42.html#reference-picture">reference</a>
pictures.
More Video Picture Resources <strong class="purple">can</strong> be created at some later point if
needed while processing the content to be encoded.
Also, if the size of the picture to be encoded is expected to change,
the images <strong class="purple">can</strong> be created based on the maximum expected content size.</p>
</li>
<li>
<p>Create the <a href="chap42.html#video-session">video session</a> to be used for video encode
operations.
Before creating the Encode Video Session, the encode capabilities
<strong class="purple">should</strong> be queried with <a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> to
obtain the limits of the parameters allowed by the implementation for a
particular codec profile.</p>
</li>
<li>
<p>Bind memory resources with the encode video session by calling
<a href="chap42.html#vkBindVideoSessionMemoryKHR">vkBindVideoSessionMemoryKHR</a>.
The video session <strong class="purple">cannot</strong> be used until memory resources are allocated
and bound to it.
In order to determine the required memory sizes and heap types of the
device memory allocations, <a href="chap42.html#vkGetVideoSessionMemoryRequirementsKHR">vkGetVideoSessionMemoryRequirementsKHR</a>
<strong class="purple">should</strong> be called.</p>
</li>
<li>
<p>Create one or more <a href="chap42.html#video-session-parameters">Video Session Parameter
objects</a> for use across command buffer recording operations, if
required by the codec extension in use.
These objects <strong class="purple">must</strong> be created against a <a href="chap42.html#video-session">video session</a>
with the parameters required by the codec.
Each <a href="chap42.html#video-session-parameters">Video Session Parameter object</a> created
is a child object of the associated <a href="chap42.html#video-session">Session object</a>
and <strong class="purple">cannot</strong> be bound in the command buffer with any other
<a href="chap42.html#video-session">Session Object</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The recording of Video Encode Commands against a Vulkan Command Buffer
consists of the following sequence:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="chap42.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> starts the recording of one or more Video
Encode operations in the command buffer.
For each Video Encode Command operation, a Video Session <strong class="purple">must</strong> be bound
to the command buffer within this command.
This command establishes a Vulkan Video Encode Context that consists of
the bound Video Session Object, Session Parameters Object, and the
required Video Picture Resources.
The established Video Encode Context is in effect until the
<a href="chap42.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> command is recorded.
If more Video Encode operations are to be required after the
<a href="chap42.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> command, another Video Encode Context <strong class="purple">can</strong>
be started with the <a href="chap42.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command.</p>
</li>
<li>
<p><a href="chap42.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a> specifies one or more frames to be encoded.
The <a href="chap42.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a> parameters, and the codec extension
structures chained to this, specify the details of the encode operation.</p>
</li>
<li>
<p><a href="chap42.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a> records operations against the encoded
data, encoding device, or the Video Session state.</p>
</li>
<li>
<p><a href="chap42.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> signals the end of the recording of the
Vulkan Video Encode Context, as established by
<a href="chap42.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In addition to the above, the following commands <strong class="purple">can</strong> be recorded between
<a href="chap42.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> and <a href="chap42.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Query operations</p>
</li>
<li>
<p>Global Memory Barriers</p>
</li>
<li>
<p>Buffer Memory Barriers</p>
</li>
<li>
<p>Image Memory Barriers (these <strong class="purple">must</strong> be used to transition the Video
Picture Resources to the proper
<code>VK_IMAGE_LAYOUT_VIDEO_ENCODE_SRC_KHR</code> and
<code>VK_IMAGE_LAYOUT_VIDEO_ENCODE_DPB_KHR</code> layouts).</p>
</li>
<li>
<p>Pipeline Barriers</p>
</li>
<li>
<p>Events</p>
</li>
<li>
<p>Timestamps</p>
</li>
<li>
<p>Device Groups (device mask)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following Video Encode related commands <strong class="purple">must</strong> be recorded <strong>outside</strong> the
Vulkan Video Encode Context established with the
<a href="chap42.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> and <a href="chap42.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> commands:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sparse Memory Binding</p>
</li>
<li>
<p>Copy Commands</p>
</li>
<li>
<p>Clear Commands</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="encode-input-picture"><a class="anchor" href="chap42.html#encode-input-picture"></a>42.13.1. Encode Input Picture</h4>
<div class="paragraph">
<p>The primary source of input pixels for the video encoding process is the
<em>Encode Input Picture</em>, represented by a <a href="chap12.html#VkImageView">VkImageView</a>.
It <strong class="purple">may</strong> also be a direct target of
video decode,
graphics, or compute operations
, or with <a href="chap34.html">Window System Integration</a> APIs
.</p>
</div>
</div>
<div class="sect3">
<h4 id="_capabilities_2"><a class="anchor" href="chap42.html#_capabilities_2"></a>42.13.2. Capabilities</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>When calling <a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> with
<code>pVideoProfile-&gt;videoCodecOperation</code> specified as one of the encode
operation bits, the <a href="chap42.html#VkVideoEncodeCapabilitiesKHR">VkVideoEncodeCapabilitiesKHR</a> structure <strong class="purple">must</strong> be
included in the <code>pNext</code> chain of the <a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>
structure to retrieve capabilities specific to video encoding.</p>
</div>
<div class="paragraph">
<p>The <code>VkVideoEncodeCapabilitiesKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeCapabilitiesKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeCapabilitiesKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                         <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                                   <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoEncodeCapabilityFlagsKHR</span>         <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkVideoEncodeRateControlModeFlagsKHR</span>    <span class="n">rateControlModes</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                <span class="n">maxRateControlLayers</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                <span class="n">maxQualityLevels</span><span class="p">;</span>
    <span class="n">VkExtent2D</span>                              <span class="n">inputImageDataFillAlignment</span><span class="p">;</span>
    <span class="n">VkVideoEncodeFeedbackFlagsKHR</span>           <span class="n">supportedEncodeFeedbackFlags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeCapabilitiesKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap42.html#VkVideoEncodeCapabilityFlagBitsKHR">VkVideoEncodeCapabilityFlagBitsKHR</a>
describing supported encoding features.</p>
</li>
<li>
<p><code>rateControlModes</code> is a bitmask of
<a href="chap42.html#VkVideoEncodeRateControlModeFlagBitsKHR">VkVideoEncodeRateControlModeFlagBitsKHR</a> describing supported rate
control modes.</p>
</li>
<li>
<p><code>maxRateControlLayers</code> reports the maximum number of rate control
layers supported.
Implementations <strong class="purple">must</strong> report at least 1.</p>
</li>
<li>
<p><code>maxQualityLevels</code> is the number of discrete quality levels
supported.
Implementations <strong class="purple">must</strong> report at least 1.</p>
</li>
<li>
<p><code>inputImageDataFillAlignment</code> reports alignment of data that should
be filled in the input image horizontally and vertically in pixels
before encode operations are performed on the input image.</p>
</li>
<li>
<p><code>supportedEncodeFeedbackFlags</code> is a bitmask of
<a href="chap18.html#VkVideoEncodeFeedbackFlagBitsKHR">VkVideoEncodeFeedbackFlagBitsKHR</a> values specifying the supported
flags for <a href="chap18.html#queries-video-encode-feedback">video encode feedback
queries</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Implementations <strong class="purple">must</strong> include support for at least
<code>VK_VIDEO_ENCODE_FEEDBACK_BITSTREAM_BUFFER_OFFSET_BIT_KHR</code> and
<code>VK_VIDEO_ENCODE_FEEDBACK_BITSTREAM_BYTES_WRITTEN_BIT_KHR</code> in
<code>supportedEncodeFeedbackFlags</code>.</p>
</div>
<div class="paragraph">
<p>The input content and encode resolution (specified in
<a href="chap42.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>::<code>codedExtent</code>) may not be aligned with the
codec-specific coding block size.
For example, the input content may be 1920x1080 and the coding block size
may be 16x16 pixel blocks.
In this example, the content is horizontally aligned with the coding block
size, but not vertically aligned with the coding block size.
Encoding of the last row of blocks may be impacted by contents of the input
image in pixel rows 1081 to 1088 (the next vertical alignment with the
coding block size).
In general, to ensure efficient encoding for the last row/column of blocks,
and/or to ensure consistent encoding results between repeated encoding of
the same input content, these extra pixel rows/columns should be filled to
known values up to the coding block size alignment before encoding
operations are performed.
Some implementations support performing auto-fill of unaligned pixels beyond
a specific alignment, which is reported in
<code>inputImageDataFillAlignment</code>.
For example, if an implementation reports 1x1 in
<code>inputImageDataFillAlignment</code>, then the implementation will perform
auto-fill for any unaligned pixels beyond the encode resolution up to the
next coding block size.
For a coding block size of 16x16, if the implementation reports 16x16 in
<code>inputImageDataFillAlignment</code>, then it is the application’s
responsibility to fill any unaligned pixels, if desired.
If not, it may impact the encoding efficiency, but it will not affect the
validity of the generated bitstream.
If the implementation reports 8x8 in <code>inputImageDataFillAlignment</code>, then
for the 1920x1080 example, since the content is aligned to 8 pixels
vertically, the implementation will auto-fill pixel rows 1081 to 1088 (up to
the 16x16 coding block size in the example).
The auto-fill value(s) are implementation-specific.
The auto-fill value(s) are not written to the input image memory, but are
used as part of the encoding operation on the input image.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeCapabilitiesKHR-sType-sType" href="chap42.html#VUID-VkVideoEncodeCapabilitiesKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeCapabilitiesKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_CAPABILITIES_KHR</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeCapabilityFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeCapabilityFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEncodeCapabilityFlagsKHR</code> is a bitmask type for setting a mask
of zero or more <a href="chap42.html#VkVideoEncodeCapabilityFlagBitsKHR">VkVideoEncodeCapabilityFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">may</strong> be set in <a href="chap42.html#VkVideoEncodeCapabilitiesKHR">VkVideoEncodeCapabilitiesKHR</a>::<code>flags</code>,
indicating the encoding tools supported, are:</p>
</div>
<div id="VkVideoEncodeCapabilityFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeCapabilityFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_CAPABILITY_PRECEDING_EXTERNALLY_ENCODED_BYTES_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeCapabilityFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_CAPABILITY_PRECEDING_EXTERNALLY_ENCODED_BYTES_BIT_KHR</code>
reports that the implementation supports use of
<a href="chap42.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>::<code>precedingExternallyEncodedBytes</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_video_encode_commands"><a class="anchor" href="chap42.html#_video_encode_commands"></a>42.13.3. Video Encode Commands</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To launch video encode operations, call:</p>
</div>
<div id="vkCmdEncodeVideoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="kt">void</span> <span class="nf">vkCmdEncodeVideoKHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkVideoEncodeInfoKHR</span><span class="o">*</span>                 <span class="n">pEncodeInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer to be filled with this
function for encoding to generate a bitstream.</p>
</li>
<li>
<p><code>pEncodeInfo</code> is a pointer to a <a href="chap42.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>
structure.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each call issues one or more video encode operations.
The implicit parameter <code>opCount</code> corresponds to the number of video
encode operations issued by the command.
After calling this command, the
<a href="chap18.html#queries-operation-active-query-index">active query index</a> of each
<a href="chap18.html#queries-operation-active">active</a> query is incremented by <code>opCount</code>.</p>
</div>
<div class="paragraph">
<p>Currently each call to this command results in the issue of a single video
encode operation.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdEncodeVideoKHR-opCount-07174" href="chap42.html#VUID-vkCmdEncodeVideoKHR-opCount-07174"></a> <span class="vuid">VUID-vkCmdEncodeVideoKHR-opCount-07174</span><br>

For each <a href="chap18.html#queries-operation-active">active</a> query, the
<a href="chap18.html#queries-operation-active-query-index">active query index</a>
corresponding to the query type of that query plus <code>opCount</code> <strong class="purple">must</strong>
be less than or equal to the
<a href="chap18.html#queries-operation-last-activatable-query-index">last activatable query
index</a> corresponding to the query type of that query plus one</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdEncodeVideoKHR-commandBuffer-parameter" href="chap42.html#VUID-vkCmdEncodeVideoKHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdEncodeVideoKHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdEncodeVideoKHR-pEncodeInfo-parameter" href="chap42.html#VUID-vkCmdEncodeVideoKHR-pEncodeInfo-parameter"></a> <span class="vuid">VUID-vkCmdEncodeVideoKHR-pEncodeInfo-parameter</span><br>
 <code>pEncodeInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap42.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdEncodeVideoKHR-commandBuffer-recording" href="chap42.html#VUID-vkCmdEncodeVideoKHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdEncodeVideoKHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdEncodeVideoKHR-commandBuffer-cmdpool" href="chap42.html#VUID-vkCmdEncodeVideoKHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdEncodeVideoKHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support encode operations</p>
</li>
<li>
<p><a id="VUID-vkCmdEncodeVideoKHR-renderpass" href="chap42.html#VUID-vkCmdEncodeVideoKHR-renderpass"></a> <span class="vuid">VUID-vkCmdEncodeVideoKHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdEncodeVideoKHR-videocoding" href="chap42.html#VUID-vkCmdEncodeVideoKHR-videocoding"></a> <span class="vuid">VUID-vkCmdEncodeVideoKHR-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called inside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdEncodeVideoKHR-bufferlevel" href="chap42.html#VUID-vkCmdEncodeVideoKHR-bufferlevel"></a> <span class="vuid">VUID-vkCmdEncodeVideoKHR-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap42.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Action</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                       <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                           <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoEncodeFlagsKHR</span>                 <span class="n">flags</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                              <span class="n">qualityLevel</span><span class="p">;</span>
    <span class="n">VkBuffer</span>                              <span class="n">dstBuffer</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>                          <span class="n">dstBufferOffset</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>                          <span class="n">dstBufferRange</span><span class="p">;</span>
    <span class="n">VkVideoPictureResourceInfoKHR</span>         <span class="n">srcPictureResource</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoReferenceSlotInfoKHR</span><span class="o">*</span>    <span class="n">pSetupReferenceSlot</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                              <span class="n">referenceSlotCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoReferenceSlotInfoKHR</span><span class="o">*</span>    <span class="n">pReferenceSlots</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                              <span class="n">precedingExternallyEncodedBytes</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is a pointer to a structure extending this structure.
A codec-specific extension structure <strong class="purple">must</strong> be chained to specify what
bitstream unit to generate with this encode operation.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
<li>
<p><code>qualityLevel</code> is the coding quality level of the encoding.
It is defined by the codec-specific extensions.</p>
</li>
<li>
<p><code>dstBuffer</code> is the destination video bitstream buffer to write the
encoded bitstream to.</p>
</li>
<li>
<p><code>dstBufferOffset</code> is the starting offset in bytes from the start of
<code>dstBuffer</code> to write the encoded bitstream to.
<code>dstBufferOffset</code>’s value <strong class="purple">must</strong> be aligned to
<a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>minBitstreamBufferOffsetAlignment</code>,
as reported by the implementation.</p>
</li>
<li>
<p><code>dstBufferRange</code> is the maximum size in bytes of the encoded
bitstream written to <code>dstBuffer</code>, starting from
<code>dstBufferOffset</code>.
<code>dstBufferRange</code>’s value <strong class="purple">must</strong> be aligned to
<a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>minBitstreamBufferSizeAlignment</code>, as
reported by the implementation.</p>
</li>
<li>
<p><code>srcPictureResource</code> is the Picture Resource of the
<a href="chap42.html#encode-input-picture">Input Picture</a> to be encoded by the operation.</p>
</li>
<li>
<p><code>pSetupReferenceSlot</code> is a pointer to a
<a href="chap42.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structure used for generating a
reconstructed reference slot and Picture Resource.
<code>pSetupReferenceSlot-&gt;slotIndex</code> specifies the slot index number to
use as a target for producing the Reconstructed (DPB) data.
<code>pSetupReferenceSlot</code> <strong class="purple">must</strong> be one of the entries provided in
<a href="chap42.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a> via the <code>pReferenceSlots</code> within the
<a href="chap42.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command that established the Vulkan Video
Encode Context for this command.</p>
</li>
<li>
<p><code>referenceSlotCount</code> is the number of Reconstructed Reference
Pictures that will be used when this encoding operation is executing.</p>
</li>
<li>
<p><code>pReferenceSlots</code> is <code>NULL</code> or a pointer to an array of
<a href="chap42.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structures that will be used when this
encoding operation is executing.
Each entry in <code>pReferenceSlots</code> <strong class="purple">must</strong> be one of the entries provided
in <a href="chap42.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a> via the <code>pReferenceSlots</code> within
the <a href="chap42.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command that established the Vulkan
Video Encode Context for this command.</p>
</li>
<li>
<p><code>precedingExternallyEncodedBytes</code> is the number of bytes externally
encoded for insertion in the active video encode session overall
bitstream prior to the bitstream that will be generated by the
implementation for this instance of <code>VkVideoEncodeInfoKHR</code>.
The value provided is used to update the implementation’s rate control
algorithm for the rate control layer this instance of
<code>VkVideoEncodeInfoKHR</code> belongs to, by accounting for the bitrate
budget consumed by these externally encoded bytes.
See <a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a> for additional information
about encode rate control.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The coded size of the encode operation is specified in <code>codedExtent</code> of
<code>srcPictureResource</code>.</p>
</div>
<div class="paragraph">
<p>Multiple <a href="chap42.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a> commands <strong class="purple">may</strong> be recorded within a Vulkan
Video Encode Context.
The execution of each <a href="chap42.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a> command will result in
generating codec-specific bitstream units.
These bitstream units are generated consecutively into the bitstream buffer
specified in <code>dstBuffer</code> of a <code>VkVideoEncodeInfoKHR</code> structure
within the <a href="chap42.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command.
The produced bitstream is the sum of all these bitstream units, including
any padding between the bitstream units.
Any bitstream padding <strong class="purple">must</strong> be filled with data compliant to the codec
standard so as not to cause any syntax errors during decoding of the
bitstream units with the padding included.
The range of the bitstream buffer written <strong class="purple">can</strong> be queried via
<a href="chap18.html#queries-video-encode-feedback">video encode feedback queries</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-None-07012" href="chap42.html#VUID-VkVideoEncodeInfoKHR-None-07012"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-None-07012</span><br>

The bound video session <strong class="purple">must</strong> not be in <a href="chap42.html#video-session-uninitialized">uninitialized</a> state at the time the command is executed on the device</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoEncodeInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-pNext-pNext" href="chap42.html#VUID-VkVideoEncodeInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap42.html#VkVideoEncodeH264VclFrameInfoEXT">VkVideoEncodeH264VclFrameInfoEXT</a> or <a href="chap42.html#VkVideoEncodeH265VclFrameInfoEXT">VkVideoEncodeH265VclFrameInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-sType-unique" href="chap42.html#VUID-VkVideoEncodeInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-flags-zerobitmask" href="chap42.html#VUID-VkVideoEncodeInfoKHR-flags-zerobitmask"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-flags-zerobitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-dstBuffer-parameter" href="chap42.html#VUID-VkVideoEncodeInfoKHR-dstBuffer-parameter"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-srcPictureResource-parameter" href="chap42.html#VUID-VkVideoEncodeInfoKHR-srcPictureResource-parameter"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-srcPictureResource-parameter</span><br>
 <code>srcPictureResource</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoPictureResourceInfoKHR">VkVideoPictureResourceInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-pSetupReferenceSlot-parameter" href="chap42.html#VUID-VkVideoEncodeInfoKHR-pSetupReferenceSlot-parameter"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-pSetupReferenceSlot-parameter</span><br>
 If <code>pSetupReferenceSlot</code> is not <code>NULL</code>, <code>pSetupReferenceSlot</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap42.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-pReferenceSlots-parameter" href="chap42.html#VUID-VkVideoEncodeInfoKHR-pReferenceSlots-parameter"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-pReferenceSlots-parameter</span><br>
 If <code>referenceSlotCount</code> is not <code>0</code>, <code>pReferenceSlots</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>referenceSlotCount</code> valid <a href="chap42.html#VkVideoReferenceSlotInfoKHR">VkVideoReferenceSlotInfoKHR</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap42.html#VkVideoEncodeFlagsKHR">VkVideoEncodeFlagsKHR</a> is a bitmask type for setting a mask, but is
currently reserved for future use.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeRateControlInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeRateControlInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeRateControlInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                    <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoEncodeRateControlFlagsKHR</span>               <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkVideoEncodeRateControlModeFlagBitsKHR</span>        <span class="n">rateControlMode</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                       <span class="n">layerCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoEncodeRateControlLayerInfoKHR</span><span class="o">*</span>    <span class="n">pLayers</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeRateControlInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
<li>
<p><code>rateControlMode</code> is a <a href="chap42.html#VkVideoEncodeRateControlModeFlagBitsKHR">VkVideoEncodeRateControlModeFlagBitsKHR</a>
value specifying the encode stream rate control mode.</p>
</li>
<li>
<p><code>layerCount</code> specifies the number of rate control layers in the
video encode stream.</p>
</li>
<li>
<p><code>pLayers</code> is a pointer to an array of
<a href="chap42.html#VkVideoEncodeRateControlLayerInfoKHR">VkVideoEncodeRateControlLayerInfoKHR</a> structures specifying the
rate control configurations of <code>layerCount</code> rate control layers.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Including this structure in the <code>pNext</code> chain of
<a href="chap42.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a> and including
<code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_BIT_KHR</code> in
<a href="chap42.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a>::<code>flags</code> will define stream rate
control settings for video encoding.</p>
</div>
<div class="paragraph">
<p>Additional structures providing codec-specific rate control parameters <strong class="purple">may</strong>
need to be included in the <code>pNext</code> chain of
<code>VkVideoCodingControlInfoKHR</code> depending on the codec profile the bound
video session was created with and the parameters specified in
<code>VkVideoEncodeRateControlInfoKHR</code> (see <a href="chap42.html#video-coding-control">Video
Coding Control</a>).</p>
</div>
<div class="paragraph">
<p>To ensure that the video session is properly initialized with stream-level
rate control settings, the application <strong class="purple">must</strong> call
<a href="chap42.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a> with stream-level rate control settings at
least once in execution order before the first <a href="chap42.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a>
command that is executed after video session reset.
If not provided, default implementation-specific stream rate control
settings will be used.</p>
</div>
<div class="paragraph">
<p>Stream rate control settings <strong class="purple">can</strong> also be re-initialized during an active
video encoding session.
The re-initialization takes effect whenever the
<code>VkVideoEncodeRateControlInfoKHR</code> structure is included in the
<code>pNext</code> chain of the <a href="chap42.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a> structure in the
call to <a href="chap42.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a>, and only impacts
<a href="chap42.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a> operations that follow in execution order.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeRateControlInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoEncodeRateControlInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeRateControlInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_RATE_CONTROL_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeRateControlInfoKHR-flags-zerobitmask" href="chap42.html#VUID-VkVideoEncodeRateControlInfoKHR-flags-zerobitmask"></a> <span class="vuid">VUID-VkVideoEncodeRateControlInfoKHR-flags-zerobitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeRateControlInfoKHR-rateControlMode-parameter" href="chap42.html#VUID-VkVideoEncodeRateControlInfoKHR-rateControlMode-parameter"></a> <span class="vuid">VUID-VkVideoEncodeRateControlInfoKHR-rateControlMode-parameter</span><br>
 If <code>rateControlMode</code> is not <code>0</code>, <code>rateControlMode</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoEncodeRateControlModeFlagBitsKHR">VkVideoEncodeRateControlModeFlagBitsKHR</a> value</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeRateControlInfoKHR-pLayers-parameter" href="chap42.html#VUID-VkVideoEncodeRateControlInfoKHR-pLayers-parameter"></a> <span class="vuid">VUID-VkVideoEncodeRateControlInfoKHR-pLayers-parameter</span><br>
 If <code>layerCount</code> is not <code>0</code>, <code>pLayers</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>layerCount</code> valid <a href="chap42.html#VkVideoEncodeRateControlLayerInfoKHR">VkVideoEncodeRateControlLayerInfoKHR</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeRateControlFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeRateControlFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEncodeRateControlFlagsKHR</code> is a bitmask type for setting a mask,
but currently reserved for future use.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The rate control modes are defined with the following enums:</p>
</div>
<div id="VkVideoEncodeRateControlModeFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeRateControlModeFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_RATE_CONTROL_MODE_DEFAULT_KHR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_RATE_CONTROL_MODE_DISABLED_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_RATE_CONTROL_MODE_CBR_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_RATE_CONTROL_MODE_VBR_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeRateControlModeFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_DEFAULT_KHR</code> specifies the use of
implementation-specific rate control.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_DISABLED_BIT_KHR</code> specifies that
rate control is disabled and any quality control parameters for the
encoding are provided on a per-picture basis.
In this mode implementations will encode pictures independently of the
output bitrate of prior video encode operations.
When using an H.264 encode profile, implementations will use the QP
values specified in the <a href="chap42.html#VkVideoEncodeH264RateControlInfoEXT">VkVideoEncodeH264RateControlInfoEXT</a>
structure for the encoded picture.
When using an H.265 encode profile, implementations will use the QP
values specified in the <a href="chap42.html#VkVideoEncodeH265RateControlInfoEXT">VkVideoEncodeH265RateControlInfoEXT</a>
structure for the encoded picture.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_CBR_BIT_KHR</code> specifies the use of
constant bitrate rate control mode.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_VBR_BIT_KHR</code> specifies the use of
variable bitrate rate control mode.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeRateControlModeFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeRateControlModeFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEncodeRateControlModeFlagsKHR</code> is a bitmask type for setting a
mask of zero or more <a href="chap42.html#VkVideoEncodeRateControlModeFlagBitsKHR">VkVideoEncodeRateControlModeFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeRateControlLayerInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeRateControlLayerInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_video_encode_queue</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeRateControlLayerInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint64_t</span>           <span class="n">averageBitrate</span><span class="p">;</span>
    <span class="kt">uint64_t</span>           <span class="n">maxBitrate</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">frameRateNumerator</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">frameRateDenominator</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">virtualBufferSizeInMs</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">initialVirtualBufferSizeInMs</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeRateControlLayerInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is a pointer to a structure extending this structure.</p>
</li>
<li>
<p><code>averageBitrate</code> is the average bitrate in bits/second.
Valid when rate control mode is
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_CBR_BIT_KHR</code> or
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_VBR_BIT_KHR</code>.</p>
</li>
<li>
<p><code>maxBitrate</code> is the peak bitrate in bits/second.
Valid when rate control mode is
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_VBR_BIT_KHR</code>.</p>
</li>
<li>
<p><code>frameRateNumerator</code> is the numerator of the frame rate.
Valid when rate control mode is
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_CBR_BIT_KHR</code> or
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_VBR_BIT_KHR</code>.</p>
</li>
<li>
<p><code>frameRateDenominator</code> is the denominator of the frame rate.
Valid when rate control mode is
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_CBR_BIT_KHR</code> or
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_VBR_BIT_KHR</code>.</p>
</li>
<li>
<p><code>virtualBufferSizeInMs</code> is the leaky bucket model virtual buffer
size in milliseconds, with respect to peak bitrate.
Valid when rate control mode is
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_CBR_BIT_KHR</code> or
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_VBR_BIT_KHR</code>.
For example, virtual buffer size is (<code>virtualBufferSizeInMs</code> ×
<code>maxBitrate</code> / 1000).</p>
</li>
<li>
<p><code>initialVirtualBufferSizeInMs</code> is the initial occupancy in
milliseconds of the virtual buffer in the leaky bucket model.
Valid when rate control mode is
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_CBR_BIT_KHR</code> or
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_VBR_BIT_KHR</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A codec-specific structure specifying additional per-layer rate control
settings <strong class="purple">must</strong> be chained to <code>VkVideoEncodeRateControlLayerInfoKHR</code>.
If multiple rate control layers are enabled
(<a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>::<code>layerCount</code> is greater than 1),
then the chained codec-specific extension structure also identifies the
specific video coding layer its parent
<code>VkVideoEncodeRateControlLayerInfoKHR</code> applies to.
If multiple rate control layers are enabled, the number of rate control
layers <strong class="purple">must</strong> match the number of video coding layers.
The specification for an encode codec-specific extension would describe how
multiple video coding layers are enabled for the corresponding codec.</p>
</div>
<div class="paragraph">
<p>Per-layer rate control settings for all enabled rate control layers <strong class="purple">must</strong> be
initialized or re-initialized whenever stream rate control settings are
provided via <a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>.
This is done by specifying settings for all enabled rate control layers in
<a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>::<code>pLayers</code>.</p>
</div>
<div class="paragraph">
<p>Including this structure in the <code>pNext</code> chain of
<a href="chap42.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a> and including
<code>VK_VIDEO_CODING_CONTROL_ENCODE_RATE_CONTROL_LAYER_BIT_KHR</code> in
<a href="chap42.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a>::<code>flags</code> will define stream rate
control settings for individual layers during video encoding.
This adjustment only impacts the specified layer without impacting the rate
control settings or implementation rate control algorithm behavior for any
other enabled rate control layers.
The adjustment takes effect whenever the corresponding
<a href="chap42.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a> is executed, and only impacts
<a href="chap42.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a> operations pertaining to the corresponding video
coding layer that follow in execution order.</p>
</div>
<div class="paragraph">
<p>It is possible for an application to enable multiple video coding layers
(via codec-specific extensions to encoding operations) while only enabling a
single layer of rate control for the entire video stream.
To achieve this, <code>layerCount</code> in <a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>
<strong class="purple">must</strong> be set to 1, and the single <code>VkVideoEncodeRateControlLayerInfoKHR</code>
provided in <code>pLayers</code> would apply to all encoded segments of the video
stream, regardless of which codec-defined video coding layer they belong to.
In this case, the implementation decides bitrate distribution across video
coding layers (if applicable to the specified stream rate control mode).</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeRateControlLayerInfoKHR-sType-sType" href="chap42.html#VUID-VkVideoEncodeRateControlLayerInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeRateControlLayerInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_RATE_CONTROL_LAYER_INFO_KHR</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="encode-h264"><a class="anchor" href="chap42.html#encode-h264"></a>42.14. Encode H.264</h3>
<div class="paragraph">
<p>The <code><a href="chap54.html#VK_EXT_video_encode_h264">VK_EXT_video_encode_h264</a></code> extension adds H.264 codec specific
structures/types needed to support H.264 encoding.
Unless otherwise noted, all references to the H.264 specification are to the
2010 edition published by the ITU-T, dated March 2010.
This specification is available at <a href="https://www.itu.int/rec/T-REC-H.264" class="bare">https://www.itu.int/rec/T-REC-H.264</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Refer to the <a href="chap1.html">Preamble</a> for information on how the Khronos
Intellectual Property Rights Policy relates to normative references to
external materials not created by Khronos.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="_h_264_encode_profile"><a class="anchor" href="chap42.html#_h_264_encode_profile"></a>42.14.1. H.264 encode profile</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH264ProfileInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH264ProfileInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264ProfileInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>           <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>               <span class="n">pNext</span><span class="p">;</span>
    <span class="n">StdVideoH264ProfileIdc</span>    <span class="n">stdProfileIdc</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264ProfileInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stdProfileIdc</code> is a <code>StdVideoH264ProfileIdc</code> value specifying
the H.264 codec profile IDC.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An H.264 encode profile is specified by including a
<code>VkVideoEncodeH264ProfileInfoEXT</code> structure in the <code>pNext</code> chain of
the <a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> structure when
<a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>::<code>videoCodecOperation</code> is
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264ProfileInfoEXT-sType-sType" href="chap42.html#VUID-VkVideoEncodeH264ProfileInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264ProfileInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_PROFILE_INFO_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_capabilities_3"><a class="anchor" href="chap42.html#_capabilities_3"></a>42.14.2. Capabilities</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>When calling <a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> with
<code>pVideoProfile-&gt;videoCodecOperation</code> specified as
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code>, the
<a href="chap42.html#VkVideoEncodeH264CapabilitiesEXT">VkVideoEncodeH264CapabilitiesEXT</a> structure <strong class="purple">must</strong> be included in the
<code>pNext</code> chain of the <a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> structure to retrieve
more capabilities specific to H.264 video encoding.</p>
</div>
<div class="paragraph">
<p>The <a href="chap42.html#VkVideoEncodeH264CapabilitiesEXT">VkVideoEncodeH264CapabilitiesEXT</a> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH264CapabilitiesEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264CapabilitiesEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                        <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                                  <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH264CapabilityFlagsEXT</span>    <span class="n">flags</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                               <span class="n">maxPPictureL0ReferenceCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                               <span class="n">maxBPictureL0ReferenceCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                               <span class="n">maxL1ReferenceCount</span><span class="p">;</span>
    <span class="n">VkBool32</span>                               <span class="n">motionVectorsOverPicBoundariesFlag</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                               <span class="n">maxBytesPerPicDenom</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                               <span class="n">maxBitsPerMbDenom</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                               <span class="n">log2MaxMvLengthHorizontal</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                               <span class="n">log2MaxMvLengthVertical</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264CapabilitiesEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap42.html#VkVideoEncodeH264CapabilityFlagBitsEXT">VkVideoEncodeH264CapabilityFlagBitsEXT</a>
describing supported encoding tools.</p>
</li>
<li>
<p><code>maxPPictureL0ReferenceCount</code> reports the maximum number of
reference pictures the implementation supports in the reference list L0
for P pictures.</p>
</li>
<li>
<p><code>maxBPictureL0ReferenceCount</code> reports the maximum number of
reference pictures the implementation supports in the reference list L0
for B pictures.
The reported value is <code>0</code> if encoding of B pictures is not supported.</p>
</li>
<li>
<p><code>maxL1ReferenceCount</code> reports the maximum number of reference
pictures the implementation supports in the reference list L1 if
encoding of B pictures is supported.
The reported value is <code>0</code> if encoding of B pictures is not supported.</p>
</li>
<li>
<p><code>motionVectorsOverPicBoundariesFlag</code> if <code>VK_TRUE</code>, indicates
motion_vectors_over_pic_boundaries_flag will be enabled if
bitstream_restriction_flag is enabled in StdVideoH264SpsVuiFlags.</p>
</li>
<li>
<p><code>maxBytesPerPicDenom</code> reports the value that will be used for
max_bytes_per_pic_denom if bitstream_restriction_flag is enabled in
StdVideoH264SpsVuiFlags.</p>
</li>
<li>
<p><code>maxBitsPerMbDenom</code> reports the value that will be used for
max_bits_per_mb_denom if bitstream_restriction_flag is enabled in
StdVideoH264SpsVuiFlags.</p>
</li>
<li>
<p><code>log2MaxMvLengthHorizontal</code> reports the value that will be used for
log2_max_mv_length_horizontal if bitstream_restriction_flag is enabled
in StdVideoH264SpsVuiFlags.</p>
</li>
<li>
<p><code>log2MaxMvLengthVertical</code> reports the value that will be used for
log2_max_mv_length_vertical if bitstream_restriction_flag is enabled in
StdVideoH264SpsVuiFlags.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When <a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> is called to query the
capabilities with parameter <code>videoCodecOperation</code> specified as
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code>, a
<code>VkVideoEncodeH264CapabilitiesEXT</code> structure <strong class="purple">can</strong> be chained to
<a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> to retrieve H.264 extension specific
capabilities.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264CapabilitiesEXT-sType-sType" href="chap42.html#VUID-VkVideoEncodeH264CapabilitiesEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264CapabilitiesEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_CAPABILITIES_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeH264CapabilityFlagsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeH264CapabilityFlagsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEncodeH264CapabilityFlagsEXT</code> is a bitmask type for setting a
mask of zero or more <a href="chap42.html#VkVideoEncodeH264CapabilityFlagBitsEXT">VkVideoEncodeH264CapabilityFlagBitsEXT</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">may</strong> be set in
<a href="chap42.html#VkVideoEncodeH264CapabilitiesEXT">VkVideoEncodeH264CapabilitiesEXT</a>::<code>flags</code>, indicating the encoding
tools supported, are:</p>
</div>
<div id="VkVideoEncodeH264CapabilityFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeH264CapabilityFlagBitsEXT</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_DIRECT_8X8_INFERENCE_ENABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_DIRECT_8X8_INFERENCE_DISABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_SEPARATE_COLOUR_PLANE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_QPPRIME_Y_ZERO_TRANSFORM_BYPASS_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_SCALING_LISTS_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000010</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_HRD_COMPLIANCE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000020</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_CHROMA_QP_OFFSET_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000040</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_SECOND_CHROMA_QP_OFFSET_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000080</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_PIC_INIT_QP_MINUS26_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000100</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_WEIGHTED_PRED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000200</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_WEIGHTED_BIPRED_EXPLICIT_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000400</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_WEIGHTED_BIPRED_IMPLICIT_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000800</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_WEIGHTED_PRED_NO_TABLE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00001000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_TRANSFORM_8X8_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00002000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_CABAC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00004000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_CAVLC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00008000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_DEBLOCKING_FILTER_DISABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00010000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_DEBLOCKING_FILTER_ENABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00020000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_DEBLOCKING_FILTER_PARTIAL_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00040000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_DISABLE_DIRECT_SPATIAL_MV_PRED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00080000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_MULTIPLE_SLICE_PER_FRAME_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00100000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_SLICE_MB_COUNT_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00200000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_ROW_UNALIGNED_SLICE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00400000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_DIFFERENT_SLICE_TYPE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00800000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_B_FRAME_IN_L1_LIST_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x01000000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_CAPABILITY_DIFFERENT_REFERENCE_FINAL_LISTS_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x02000000</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264CapabilityFlagBitsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_DIRECT_8X8_INFERENCE_ENABLED_BIT_EXT</code>
reports if enabling direct_8x8_inference_flag in StdVideoH264SpsFlags is
supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_DIRECT_8X8_INFERENCE_DISABLED_BIT_EXT</code>
reports if disabling direct_8x8_inference_flag in StdVideoH264SpsFlags
is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_SEPARATE_COLOUR_PLANE_BIT_EXT</code>
reports if enabling separate_colour_plane_flag in StdVideoH264SpsFlags
is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_QPPRIME_Y_ZERO_TRANSFORM_BYPASS_BIT_EXT</code>
reports if enabling qpprime_y_zero_transform_bypass_flag in
StdVideoH264SpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_SCALING_LISTS_BIT_EXT</code> reports if
enabling seq_scaling_matrix_present_flag in StdVideoH264SpsFlags or
pic_scaling_matrix_present_flag in StdVideoH264PpsFlags are supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_HRD_COMPLIANCE_BIT_EXT</code> reports if
the implementation guarantees generating a HRD compliant bitstream if
nal_hrd_parameters_present_flag or vcl_hrd_parameters_present_flag are
enabled in StdVideoH264SpsVuiFlags.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_CHROMA_QP_OFFSET_BIT_EXT</code> reports
if setting non-zero chroma_qp_index_offset in
StdVideoH264PictureParameterSet is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_SECOND_CHROMA_QP_OFFSET_BIT_EXT</code>
reports if setting non-zero second_chroma_qp_index_offset in
StdVideoH264PictureParameterSet is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_PIC_INIT_QP_MINUS26_BIT_EXT</code>
reports if setting non-zero pic_init_qp_minus26 in
StdVideoH264PictureParameterSet is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_WEIGHTED_PRED_BIT_EXT</code> reports if
enabling weighted_pred_flag in StdVideoH264PpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_WEIGHTED_BIPRED_EXPLICIT_BIT_EXT</code>
reports if using STD_VIDEO_H264_WEIGHTED_BIPRED_IDC_EXPLICIT from
StdVideoH264WeightedBipredIdc is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_WEIGHTED_BIPRED_IMPLICIT_BIT_EXT</code>
reports if using STD_VIDEO_H264_WEIGHTED_BIPRED_IDC_IMPLICIT from
StdVideoH264WeightedBipredIdc is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_WEIGHTED_PRED_NO_TABLE_BIT_EXT</code>
reports that when weighted_pred_flag is enabled or
STD_VIDEO_H264_WEIGHTED_BIPRED_IDC_EXPLICIT from
StdVideoH264WeightedBipredIdc is used, the implementation is able to
internally decide syntax for pred_weight_table.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_TRANSFORM_8X8_BIT_EXT</code> reports if
enabling transform_8x8_mode_flag in StdVideoH264PpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_CABAC_BIT_EXT</code> reports if CABAC
entropy coding is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_CAVLC_BIT_EXT</code> reports if CAVLC
entropy coding is supported.
An implementation <strong class="purple">must</strong> support at least one entropy coding mode.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_DEBLOCKING_FILTER_DISABLED_BIT_EXT</code>
reports if using STD_VIDEO_H264_DISABLE_DEBLOCKING_FILTER_IDC_DISABLED
from StdVideoH264DisableDeblockingFilterIdc is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_DEBLOCKING_FILTER_ENABLED_BIT_EXT</code>
reports if using STD_VIDEO_H264_DISABLE_DEBLOCKING_FILTER_IDC_ENABLED
from StdVideoH264DisableDeblockingFilterIdc is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_DEBLOCKING_FILTER_PARTIAL_BIT_EXT</code>
reports if using STD_VIDEO_H264_DISABLE_DEBLOCKING_FILTER_IDC_PARTIAL
from StdVideoH264DisableDeblockingFilterIdc is supported.
An implementation <strong class="purple">must</strong> support at least one deblocking filter mode.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_DISABLE_DIRECT_SPATIAL_MV_PRED_BIT_EXT</code>
reports if disabling
<code>StdVideoEncodeH264SliceHeaderFlags</code>::direct_spatial_mv_pred_flag is
supported when it is present in the slice header.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_MULTIPLE_SLICE_PER_FRAME_BIT_EXT</code>
reports if encoding multiple slices per frame is supported.
If not set, the implementation is only able to encode a single slice for
the entire frame.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_SLICE_MB_COUNT_BIT_EXT</code> reports
support for configuring
<a href="chap42.html#VkVideoEncodeH264NaluSliceInfoEXT">VkVideoEncodeH264NaluSliceInfoEXT</a>::<code>mbCount</code> and
first_mb_in_slice in StdVideoEncodeH264SliceHeader for each slice in a
frame with multiple slices.
If not supported, the implementation decides the number of macroblocks
in each slice based on
<a href="chap42.html#VkVideoEncodeH264VclFrameInfoEXT">VkVideoEncodeH264VclFrameInfoEXT</a>::<code>naluSliceEntryCount</code>.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_ROW_UNALIGNED_SLICE_BIT_EXT</code>
reports that each slice in a frame with multiple slices may begin or
finish at any offset in a macroblock row.
If not supported, all slices in the frame <strong class="purple">must</strong> begin at the start of a
macroblock row (and hence each slice <strong class="purple">must</strong> finish at the end of a
macroblock row).</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_DIFFERENT_SLICE_TYPE_BIT_EXT</code>
reports that when
<code>VK_VIDEO_ENCODE_H264_CAPABILITY_MULTIPLE_SLICE_PER_FRAME_BIT_EXT</code>
is supported and a frame is encoded with multiple slices, the
implementation allows encoding each slice with a different
<code>StdVideoEncodeH264SliceHeader</code>::slice_type.
If not supported, all slices of the frame <strong class="purple">must</strong> be encoded with the same
<code>slice_type</code> which corresponds to the picture type of the frame.
For example, all slices of a P-frame would be encoded as P-slices.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_B_FRAME_IN_L1_LIST_BIT_EXT</code> reports
support for using a B frame as L1 reference.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_DIFFERENT_REFERENCE_FINAL_LISTS_BIT_EXT</code>
reports that the implementation allows encoding each slice with a
different <code>StdVideoEncodeH264ReferenceListsInfo</code>.
If not supported, all slices of the frame <strong class="purple">must</strong> be encoded with the same
<code>StdVideoEncodeH264ReferenceListsInfo</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_encoder_parameter_sets"><a class="anchor" href="chap42.html#_encoder_parameter_sets"></a>42.14.3. Encoder Parameter Sets</h4>
<div class="paragraph">
<p>To reduce parameter traffic during encoding, the encoder parameter set
object supports storing H.264 SPS/PPS parameter sets that <strong class="purple">may</strong> be later
referenced during encoding.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap42.html#VkVideoEncodeH264SessionParametersCreateInfoEXT">VkVideoEncodeH264SessionParametersCreateInfoEXT</a> structure is
defined as:</p>
</div>
<div id="VkVideoEncodeH264SessionParametersCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264SessionParametersCreateInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                        <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                            <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                               <span class="n">maxStdSPSCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                               <span class="n">maxStdPPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoEncodeH264SessionParametersAddInfoEXT</span><span class="o">*</span>    <span class="n">pParametersAddInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264SessionParametersCreateInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>maxStdSPSCount</code> is the maximum number of SPS parameters that the
<code>VkVideoSessionParametersKHR</code> can contain.</p>
</li>
<li>
<p><code>maxStdPPSCount</code> is the maximum number of PPS parameters that the
<code>VkVideoSessionParametersKHR</code> can contain.</p>
</li>
<li>
<p><code>pParametersAddInfo</code> is <code>NULL</code> or a pointer to a
<code>VkVideoEncodeH264SessionParametersAddInfoEXT</code> structure specifying
H.264 parameters to add upon object creation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A <code>VkVideoEncodeH264SessionParametersCreateInfoEXT</code> structure holding
one H.264 SPS and at least one H.264 PPS parameter set <strong class="purple">must</strong> be chained to
<a href="chap42.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a> when calling
<a href="chap42.html#vkCreateVideoSessionParametersKHR">vkCreateVideoSessionParametersKHR</a> to store these parameter set(s) with
the encoder parameter set object for later reference.
The provided H.264 SPS/PPS parameters <strong class="purple">must</strong> be within the limits specified
during encoder creation for the encoder specified in
<a href="chap42.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersCreateInfoEXT-sType-sType" href="chap42.html#VUID-VkVideoEncodeH264SessionParametersCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_SESSION_PARAMETERS_CREATE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersCreateInfoEXT-pParametersAddInfo-parameter" href="chap42.html#VUID-VkVideoEncodeH264SessionParametersCreateInfoEXT-pParametersAddInfo-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersCreateInfoEXT-pParametersAddInfo-parameter</span><br>
 If <code>pParametersAddInfo</code> is not <code>NULL</code>, <code>pParametersAddInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap42.html#VkVideoEncodeH264SessionParametersAddInfoEXT">VkVideoEncodeH264SessionParametersAddInfoEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH264SessionParametersAddInfoEXT</code> structure is defined
as:</p>
</div>
<div id="VkVideoEncodeH264SessionParametersAddInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264SessionParametersAddInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                            <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                   <span class="n">stdSPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoH264SequenceParameterSet</span><span class="o">*</span>    <span class="n">pStdSPSs</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                   <span class="n">stdPPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoH264PictureParameterSet</span><span class="o">*</span>     <span class="n">pStdPPSs</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264SessionParametersAddInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stdSPSCount</code> is the number of SPS elements in the <code>pStdSPSs</code>.
Its value <strong class="purple">must</strong> be less than or equal to the value of
<code>maxStdSPSCount</code>.</p>
</li>
<li>
<p><code>pStdSPSs</code> is a pointer to an array of
<code>StdVideoH264SequenceParameterSet</code> structures representing H.264
sequence parameter sets.
Each element of the array <strong class="purple">must</strong> have a unique H.264 SPS ID.</p>
</li>
<li>
<p><code>stdPPSCount</code> is the number of PPS provided in <code>pStdPPSs</code>.
Its value <strong class="purple">must</strong> be less than or equal to the value of
<code>maxStdPPSCount</code>.</p>
</li>
<li>
<p><code>pStdPPSs</code> is a pointer to an array of
<code>StdVideoH264PictureParameterSet</code> structures representing H.264
picture parameter sets.
Each element of the array <strong class="purple">must</strong> have a unique H.264 SPS-PPS ID pair.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-stdSPSCount-04837" href="chap42.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-stdSPSCount-04837"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-stdSPSCount-04837</span><br>

The values of <code>stdSPSCount</code> and <code>stdPPSCount</code> <strong class="purple">must</strong> be less than
or equal to the values of <code>maxStdSPSCount</code> and <code>maxStdPPSCount</code>,
respectively</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-maxStdSPSCount-04838" href="chap42.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-maxStdSPSCount-04838"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-maxStdSPSCount-04838</span><br>

When the <code>maxStdSPSCount</code> number of parameters of type
StdVideoH264SequenceParameterSet in the Video Session Parameters object
is reached, no additional parameters of that type can be added to the
object.
<code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add additional data to this object at this point</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-maxStdPPSCount-04839" href="chap42.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-maxStdPPSCount-04839"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-maxStdPPSCount-04839</span><br>

When the <code>maxStdPPSCount</code> number of parameters of type
StdVideoH264PictureParameterSet in the Video Session Parameters object
is reached, no additional parameters of that type can be added to the
object.
<code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add additional data to this object at this point</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04840" href="chap42.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04840"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04840</span><br>

Each entry to be added <strong class="purple">must</strong> have a unique, to the rest of the parameter
array entries and the existing parameters in the Video Session
Parameters Object that is being updated, SPS-PPS IDs</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04841" href="chap42.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04841"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04841</span><br>

Parameter entries that already exist in Video Session Parameters object
with a particular SPS-PPS IDs <strong class="purple">cannot</strong> be replaced nor updated</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04842" href="chap42.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04842"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04842</span><br>

When creating a new object using a Video Session Parameters as a
template, the array’s parameters with the same SPS-PPS IDs as the ones
from the template take precedence</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04843" href="chap42.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04843"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04843</span><br>

SPS/PPS parameters <strong class="purple">must</strong> comply with the limits specified in
<a href="chap42.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a> during Video Session creation</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-sType-sType" href="chap42.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_SESSION_PARAMETERS_ADD_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-pStdSPSs-parameter" href="chap42.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-pStdSPSs-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-pStdSPSs-parameter</span><br>
 If <code>pStdSPSs</code> is not <code>NULL</code>, <code>pStdSPSs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>stdSPSCount</code> <code>StdVideoH264SequenceParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-pStdPPSs-parameter" href="chap42.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-pStdPPSs-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-pStdPPSs-parameter</span><br>
 If <code>pStdPPSs</code> is not <code>NULL</code>, <code>pStdPPSs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>stdPPSCount</code> <code>StdVideoH264PictureParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-stdSPSCount-arraylength" href="chap42.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-stdSPSCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-stdSPSCount-arraylength</span><br>
 <code>stdSPSCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-stdPPSCount-arraylength" href="chap42.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-stdPPSCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-stdPPSCount-arraylength</span><br>
 <code>stdPPSCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_frame_encoding"><a class="anchor" href="chap42.html#_frame_encoding"></a>42.14.4. Frame Encoding</h4>
<div class="paragraph">
<p>In order to encode a frame, add a <a href="chap42.html#VkVideoEncodeH264VclFrameInfoEXT">VkVideoEncodeH264VclFrameInfoEXT</a>
structure to the <code>pNext</code> chain of the <a href="chap42.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>
structure passed to the <a href="chap42.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a> command.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap42.html#VkVideoEncodeH264VclFrameInfoEXT">VkVideoEncodeH264VclFrameInfoEXT</a> structure representing a frame
encode operation is defined as:</p>
</div>
<div id="VkVideoEncodeH264VclFrameInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264VclFrameInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                    <span class="n">pNext</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoEncodeH264ReferenceListsInfo</span><span class="o">*</span>    <span class="n">pStdReferenceFinalLists</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                       <span class="n">naluSliceEntryCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoEncodeH264NaluSliceInfoEXT</span><span class="o">*</span>       <span class="n">pNaluSliceEntries</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoEncodeH264PictureInfo</span><span class="o">*</span>           <span class="n">pStdPictureInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264VclFrameInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pStdReferenceFinalLists</code> is <code>NULL</code> or a pointer to a
<code>StdVideoEncodeH264ReferenceListsInfo</code> structure specifying the
reference lists to be used for the current picture.</p>
</li>
<li>
<p><code>naluSliceEntryCount</code> is the number of slice NALUs in the frame.</p>
</li>
<li>
<p><code>pNaluSliceEntries</code> is a pointer to an array of
<code>naluSliceEntryCount</code> <a href="chap42.html#VkVideoEncodeH264NaluSliceInfoEXT">VkVideoEncodeH264NaluSliceInfoEXT</a>
structures specifying the division of the current picture into slices
and the properties of these slices.
This is an ordered sequence; the NALUs are generated consecutively in
<a href="chap42.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>::<code>dstBuffer</code> in the same order as in this
array.</p>
</li>
<li>
<p><code>pStdPictureInfo</code> is a pointer to a
<code>StdVideoEncodeH264PictureInfo</code> structure specifying the syntax and
other codec-specific information from the H.264 specification associated
with this picture.
The information provided <strong class="purple">must</strong> reflect the decoded picture marking
operations that are applicable to this frame.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264VclFrameInfoEXT-sType-sType" href="chap42.html#VUID-VkVideoEncodeH264VclFrameInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264VclFrameInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_VCL_FRAME_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264VclFrameInfoEXT-pStdReferenceFinalLists-parameter" href="chap42.html#VUID-VkVideoEncodeH264VclFrameInfoEXT-pStdReferenceFinalLists-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264VclFrameInfoEXT-pStdReferenceFinalLists-parameter</span><br>
 If <code>pStdReferenceFinalLists</code> is not <code>NULL</code>, <code>pStdReferenceFinalLists</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoEncodeH264ReferenceListsInfo</code> value</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264VclFrameInfoEXT-pNaluSliceEntries-parameter" href="chap42.html#VUID-VkVideoEncodeH264VclFrameInfoEXT-pNaluSliceEntries-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264VclFrameInfoEXT-pNaluSliceEntries-parameter</span><br>
 <code>pNaluSliceEntries</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>naluSliceEntryCount</code> valid <a href="chap42.html#VkVideoEncodeH264NaluSliceInfoEXT">VkVideoEncodeH264NaluSliceInfoEXT</a> structures</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264VclFrameInfoEXT-pStdPictureInfo-parameter" href="chap42.html#VUID-VkVideoEncodeH264VclFrameInfoEXT-pStdPictureInfo-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264VclFrameInfoEXT-pStdPictureInfo-parameter</span><br>
 <code>pStdPictureInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoEncodeH264PictureInfo</code> value</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264VclFrameInfoEXT-naluSliceEntryCount-arraylength" href="chap42.html#VUID-VkVideoEncodeH264VclFrameInfoEXT-naluSliceEntryCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH264VclFrameInfoEXT-naluSliceEntryCount-arraylength</span><br>
 <code>naluSliceEntryCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap42.html#VkVideoEncodeH264NaluSliceInfoEXT">VkVideoEncodeH264NaluSliceInfoEXT</a> structure representing a slice
is defined as:</p>
</div>
<div id="VkVideoEncodeH264NaluSliceInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264NaluSliceInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                    <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                       <span class="n">mbCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoEncodeH264ReferenceListsInfo</span><span class="o">*</span>    <span class="n">pStdReferenceFinalLists</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoEncodeH264SliceHeader</span><span class="o">*</span>           <span class="n">pStdSliceHeader</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264NaluSliceInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>mbCount</code> is the number of macroblocks in this slice.</p>
</li>
<li>
<p><code>pStdReferenceFinalLists</code> is <code>NULL</code> or a pointer to a
<code>StdVideoEncodeH264ReferenceListsInfo</code> structure specifying the
reference lists to be used for the current slice.
If <code>pStdReferenceFinalLists</code> is not <code>NULL</code>, these reference lists
override the reference lists provided in
<a href="chap42.html#VkVideoEncodeH264VclFrameInfoEXT">VkVideoEncodeH264VclFrameInfoEXT</a>::<code>pStdReferenceFinalLists</code>.</p>
</li>
<li>
<p><code>pStdSliceHeader</code> is a pointer to a
<code>StdVideoEncodeH264SliceHeader</code> structure specifying the slice header
for the current slice.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264NaluSliceInfoEXT-sType-sType" href="chap42.html#VUID-VkVideoEncodeH264NaluSliceInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264NaluSliceInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_NALU_SLICE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264NaluSliceInfoEXT-pNext-pNext" href="chap42.html#VUID-VkVideoEncodeH264NaluSliceInfoEXT-pNext-pNext"></a> <span class="vuid">VUID-VkVideoEncodeH264NaluSliceInfoEXT-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264NaluSliceInfoEXT-pStdReferenceFinalLists-parameter" href="chap42.html#VUID-VkVideoEncodeH264NaluSliceInfoEXT-pStdReferenceFinalLists-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264NaluSliceInfoEXT-pStdReferenceFinalLists-parameter</span><br>
 If <code>pStdReferenceFinalLists</code> is not <code>NULL</code>, <code>pStdReferenceFinalLists</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoEncodeH264ReferenceListsInfo</code> value</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264NaluSliceInfoEXT-pStdSliceHeader-parameter" href="chap42.html#VUID-VkVideoEncodeH264NaluSliceInfoEXT-pStdSliceHeader-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264NaluSliceInfoEXT-pStdSliceHeader-parameter</span><br>
 <code>pStdSliceHeader</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoEncodeH264SliceHeader</code> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap42.html#VkVideoEncodeH264DpbSlotInfoEXT">VkVideoEncodeH264DpbSlotInfoEXT</a> structure, representing a
reconstructed picture that is being used as a reference picture, is defined
as:</p>
</div>
<div id="VkVideoEncodeH264DpbSlotInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264DpbSlotInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                           <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                               <span class="n">pNext</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoEncodeH264ReferenceInfo</span><span class="o">*</span>    <span class="n">pStdReferenceInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264DpbSlotInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pStdReferenceInfo</code> is a pointer to a
<code>StdVideoEncodeH264ReferenceInfo</code> structure specifying the syntax and
other codec-specific information from the H.264 specification associated
with this reference picture.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264DpbSlotInfoEXT-sType-sType" href="chap42.html#VUID-VkVideoEncodeH264DpbSlotInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264DpbSlotInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_DPB_SLOT_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264DpbSlotInfoEXT-pStdReferenceInfo-parameter" href="chap42.html#VUID-VkVideoEncodeH264DpbSlotInfoEXT-pStdReferenceInfo-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264DpbSlotInfoEXT-pStdReferenceInfo-parameter</span><br>
 <code>pStdReferenceInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoEncodeH264ReferenceInfo</code> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_rate_control"><a class="anchor" href="chap42.html#_rate_control"></a>42.14.5. Rate control</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH264RateControlInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH264RateControlInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264RateControlInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                 <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                    <span class="n">gopFrameCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                    <span class="n">idrPeriod</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                    <span class="n">consecutiveBFrameCount</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH264RateControlStructureEXT</span>    <span class="n">rateControlStructure</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                    <span class="n">temporalLayerCount</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264RateControlInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>gopFrameCount</code> is the number of frames contained within the group
of pictures (GOP), starting from an intra frame and until the next intra
frame.
If it is set to 0, the implementation chooses a suitable value.
If it is set to <code>UINT32_MAX</code>, the GOP length is treated as infinite.</p>
</li>
<li>
<p><code>idrPeriod</code> is the interval, in terms of number of frames, between
two IDR frames.
If it is set to 0, the implementation chooses a suitable value.
If it is set to <code>UINT32_MAX</code>, the IDR period is treated as infinite.</p>
</li>
<li>
<p><code>consecutiveBFrameCount</code> is the number of consecutive B-frames
between I- and/or P-frames within the GOP.</p>
</li>
<li>
<p><code>rateControlStructure</code> is a
<a href="chap42.html#VkVideoEncodeH264RateControlStructureEXT">VkVideoEncodeH264RateControlStructureEXT</a> value specifying the
expected encode stream reference structure, to aid in rate control
calculations.</p>
</li>
<li>
<p><code>temporalLayerCount</code> specifies the number of temporal layers enabled
in the stream.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In order to provide H.264-specific stream rate control parameters, add a
<code>VkVideoEncodeH264RateControlInfoEXT</code> structure to the <code>pNext</code> chain
of the <a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a> structure in the <code>pNext</code>
chain of the <a href="chap42.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a> structure passed to the
<a href="chap42.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a> command.</p>
</div>
<div class="paragraph">
<p>The parameters from this structure act as a guidance for implementations to
apply various rate control heuristics.</p>
</div>
<div class="paragraph">
<p>It is possible to infer the picture type to be used when encoding a frame,
on the basis of the values provided for <code>consecutiveBFrameCount</code>,
<code>idrPeriod</code>, and <code>gopFrameCount</code>, but this inferred picture type
will not be used by implementations to override the picture type provided in
<a href="chap42.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a>.
Additionally, it is not required for the video session to be reset if the
inferred picture type does not match the actual picture type.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264RateControlInfoEXT-sType-sType" href="chap42.html#VUID-VkVideoEncodeH264RateControlInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264RateControlInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_RATE_CONTROL_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264RateControlInfoEXT-rateControlStructure-parameter" href="chap42.html#VUID-VkVideoEncodeH264RateControlInfoEXT-rateControlStructure-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264RateControlInfoEXT-rateControlStructure-parameter</span><br>
 <code>rateControlStructure</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoEncodeH264RateControlStructureEXT">VkVideoEncodeH264RateControlStructureEXT</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>rateControlStructure</code> in <a href="chap42.html#VkVideoEncodeH264RateControlInfoEXT">VkVideoEncodeH264RateControlInfoEXT</a>
specifies one of the following video stream reference structures as a hint
for the rate control implementation:</p>
</div>
<div id="VkVideoEncodeH264RateControlStructureEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeH264RateControlStructureEXT</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_H264_RATE_CONTROL_STRUCTURE_UNKNOWN_EXT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_RATE_CONTROL_STRUCTURE_FLAT_EXT</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H264_RATE_CONTROL_STRUCTURE_DYADIC_EXT</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264RateControlStructureEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_H264_RATE_CONTROL_STRUCTURE_UNKNOWN_EXT</code> specifies
a reference structure unknown at the time of stream rate control
configuration.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_RATE_CONTROL_STRUCTURE_FLAT_EXT</code> specifies a
flat reference structure.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_RATE_CONTROL_STRUCTURE_DYADIC_EXT</code> specifies a
dyadic reference structure.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH264RateControlLayerInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH264RateControlLayerInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264RateControlLayerInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                  <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                      <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                         <span class="n">temporalLayerId</span><span class="p">;</span>
    <span class="n">VkBool32</span>                         <span class="n">useInitialRcQp</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH264QpEXT</span>           <span class="n">initialRcQp</span><span class="p">;</span>
    <span class="n">VkBool32</span>                         <span class="n">useMinQp</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH264QpEXT</span>           <span class="n">minQp</span><span class="p">;</span>
    <span class="n">VkBool32</span>                         <span class="n">useMaxQp</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH264QpEXT</span>           <span class="n">maxQp</span><span class="p">;</span>
    <span class="n">VkBool32</span>                         <span class="n">useMaxFrameSize</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH264FrameSizeEXT</span>    <span class="n">maxFrameSize</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264RateControlLayerInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>temporalLayerId</code> specifies the H.264 temporal layer ID of the video
coding layer that settings provided in this structure and its parent
<a href="chap42.html#VkVideoEncodeRateControlLayerInfoKHR">VkVideoEncodeRateControlLayerInfoKHR</a> structure apply to.</p>
</li>
<li>
<p><code>useInitialRcQp</code> indicates whether the values within
<code>initialRcQp</code> should be used by the implementation.</p>
</li>
<li>
<p><code>initialRcQp</code> provides the QP values for each picture type, to be
used in rate control calculations at the start of video encode
operations on a newly-created video session, or immediately after a
session reset.
These values are ignored when
<a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>::<code>rateControlMode</code> is not
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_CBR_BIT_KHR</code> or
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_VBR_BIT_KHR</code>.</p>
</li>
<li>
<p><code>useMinQp</code> indicates whether the values within <code>minQp</code> should be
used by the implementation.
When it is set to <code>VK_FALSE</code>, the implementation ignores the values
in <code>minQp</code> and chooses suitable values.</p>
</li>
<li>
<p><code>minQp</code> provides the lower bound on the QP values for each picture
type, to be used in rate control calculations.</p>
</li>
<li>
<p><code>useMaxQp</code> indicates whether the values within <code>maxQp</code> should be
used by the implementation.
When it is set to <code>VK_FALSE</code>, the implementation ignores the values
in <code>maxQp</code> and chooses suitable values.</p>
</li>
<li>
<p><code>maxQp</code> provides the upper bound on the QP values for each picture
type, to be used in rate control calculations.</p>
</li>
<li>
<p><code>useMaxFrameSize</code> indicates whether the values within
<code>maxFrameSize</code> should be used by the implementation.</p>
</li>
<li>
<p><code>maxFrameSize</code> provides the upper bound on the encoded frame size
for each picture type.
The implementation does not guarantee the encoded frame sizes will be
within the specified limits, however these limits <strong class="purple">may</strong> be used as a
guide in rate control calculations.
If enabled and not set properly, the <code>maxQp</code> limit may prevent the
implementation from respecting the <code>maxFrameSize</code> limit.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>H.264-specific per-layer rate control parameters <strong class="purple">must</strong> be specified by
adding a <code>VkVideoEncodeH264RateControlLayerInfoEXT</code> structure to the
<code>pNext</code> chain of each <a href="chap42.html#VkVideoEncodeRateControlLayerInfoKHR">VkVideoEncodeRateControlLayerInfoKHR</a>
structure in a call to <a href="chap42.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a> command, when the
command buffer context has an active video encode H.264 session.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264RateControlLayerInfoEXT-rateControlMode-06474" href="chap42.html#VUID-VkVideoEncodeH264RateControlLayerInfoEXT-rateControlMode-06474"></a> <span class="vuid">VUID-VkVideoEncodeH264RateControlLayerInfoEXT-rateControlMode-06474</span><br>

When <a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>::<code>rateControlMode</code> is
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_DISABLED_BIT_KHR</code>, both
<code>useMinQp</code> and <code>useMaxQp</code> must be set to <code>VK_TRUE</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264RateControlLayerInfoEXT-rateControlMode-06475" href="chap42.html#VUID-VkVideoEncodeH264RateControlLayerInfoEXT-rateControlMode-06475"></a> <span class="vuid">VUID-VkVideoEncodeH264RateControlLayerInfoEXT-rateControlMode-06475</span><br>

When <a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>::<code>rateControlMode</code> is
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_DISABLED_BIT_KHR</code>, the values
provided in <code>minQP</code> must be identical to those provided in
<code>maxQp</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264RateControlLayerInfoEXT-sType-sType" href="chap42.html#VUID-VkVideoEncodeH264RateControlLayerInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264RateControlLayerInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_RATE_CONTROL_LAYER_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264RateControlLayerInfoEXT-initialRcQp-parameter" href="chap42.html#VUID-VkVideoEncodeH264RateControlLayerInfoEXT-initialRcQp-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264RateControlLayerInfoEXT-initialRcQp-parameter</span><br>
 <code>initialRcQp</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoEncodeH264QpEXT">VkVideoEncodeH264QpEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264RateControlLayerInfoEXT-minQp-parameter" href="chap42.html#VUID-VkVideoEncodeH264RateControlLayerInfoEXT-minQp-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264RateControlLayerInfoEXT-minQp-parameter</span><br>
 <code>minQp</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoEncodeH264QpEXT">VkVideoEncodeH264QpEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264RateControlLayerInfoEXT-maxQp-parameter" href="chap42.html#VUID-VkVideoEncodeH264RateControlLayerInfoEXT-maxQp-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264RateControlLayerInfoEXT-maxQp-parameter</span><br>
 <code>maxQp</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoEncodeH264QpEXT">VkVideoEncodeH264QpEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264RateControlLayerInfoEXT-maxFrameSize-parameter" href="chap42.html#VUID-VkVideoEncodeH264RateControlLayerInfoEXT-maxFrameSize-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264RateControlLayerInfoEXT-maxFrameSize-parameter</span><br>
 <code>maxFrameSize</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoEncodeH264FrameSizeEXT">VkVideoEncodeH264FrameSizeEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH264QpEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH264QpEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264QpEXT</span> <span class="p">{</span>
    <span class="kt">int32_t</span>    <span class="n">qpI</span><span class="p">;</span>
    <span class="kt">int32_t</span>    <span class="n">qpP</span><span class="p">;</span>
    <span class="kt">int32_t</span>    <span class="n">qpB</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264QpEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>qpI</code> is the QP to be used for I-frames.</p>
</li>
<li>
<p><code>qpP</code> is the QP to be used for P-frames.</p>
</li>
<li>
<p><code>qpB</code> is the QP to be used for B-frames.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH264FrameSizeEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH264FrameSizeEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h264</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH264FrameSizeEXT</span> <span class="p">{</span>
    <span class="kt">uint32_t</span>    <span class="n">frameISize</span><span class="p">;</span>
    <span class="kt">uint32_t</span>    <span class="n">framePSize</span><span class="p">;</span>
    <span class="kt">uint32_t</span>    <span class="n">frameBSize</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH264FrameSizeEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>frameISize</code> is the size in bytes to be used for I-frames.</p>
</li>
<li>
<p><code>framePSize</code> is the size in bytes to be used for P-frames.</p>
</li>
<li>
<p><code>frameBSize</code> is the size in bytes to be used for B-frames.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="encode-h265"><a class="anchor" href="chap42.html#encode-h265"></a>42.15. Encode H.265</h3>
<div class="paragraph">
<p>The <code><a href="chap54.html#VK_EXT_video_encode_h265">VK_EXT_video_encode_h265</a></code> extension adds H.265 codec-specific
structures/types needed to support H.265 video encoding.
Unless otherwise noted, all references to the H.265 specification are to the
2013 edition published by the ITU-T, dated April 2013.
This specification is available at <a href="https://www.itu.int/rec/T-REC-H.265" class="bare">https://www.itu.int/rec/T-REC-H.265</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Refer to the <a href="chap1.html">Preamble</a> for information on how the Khronos
Intellectual Property Rights Policy relates to normative references to
external materials not created by Khronos.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="_h_265_encode_profile"><a class="anchor" href="chap42.html#_h_265_encode_profile"></a>42.15.1. H.265 encode profile</h4>
<div class="paragraph">
<p>An H.265 encode profile is specified by including the
<a href="chap42.html#VkVideoEncodeH265ProfileInfoEXT">VkVideoEncodeH265ProfileInfoEXT</a> structure in the <code>pNext</code> chain of
the <a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a> structure when
<a href="chap42.html#VkVideoProfileInfoKHR">VkVideoProfileInfoKHR</a>::<code>videoCodecOperation</code> is
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H265_BIT_EXT</code>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH265ProfileInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH265ProfileInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265ProfileInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>           <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>               <span class="n">pNext</span><span class="p">;</span>
    <span class="n">StdVideoH265ProfileIdc</span>    <span class="n">stdProfileIdc</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265ProfileInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stdProfileIdc</code> is a <code>StdVideoH265ProfileIdc</code> value specifying
the H.265 codec profile IDC.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265ProfileInfoEXT-sType-sType" href="chap42.html#VUID-VkVideoEncodeH265ProfileInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH265ProfileInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H265_PROFILE_INFO_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_capabilities_4"><a class="anchor" href="chap42.html#_capabilities_4"></a>42.15.2. Capabilities</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>When calling <a href="chap42.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> with
<code>pVideoProfile-&gt;videoCodecOperation</code> specified as
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H265_BIT_EXT</code>, the
<a href="chap42.html#VkVideoEncodeH265CapabilitiesEXT">VkVideoEncodeH265CapabilitiesEXT</a> structure <strong class="purple">must</strong> be included in the
<code>pNext</code> chain of the <a href="chap42.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> structure to retrieve
more capabilities specific to H.265 video encoding.</p>
</div>
<div class="paragraph">
<p>The <code>VkVideoEncodeH265CapabilitiesEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH265CapabilitiesEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265CapabilitiesEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                                          <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH265CapabilityFlagsEXT</span>            <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH265CtbSizeFlagsEXT</span>               <span class="n">ctbSizes</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH265TransformBlockSizeFlagsEXT</span>    <span class="n">transformBlockSizes</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                       <span class="n">maxPPictureL0ReferenceCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                       <span class="n">maxBPictureL0ReferenceCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                       <span class="n">maxL1ReferenceCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                       <span class="n">maxSubLayersCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                       <span class="n">minLog2MinLumaCodingBlockSizeMinus3</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                       <span class="n">maxLog2MinLumaCodingBlockSizeMinus3</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                       <span class="n">minLog2MinLumaTransformBlockSizeMinus2</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                       <span class="n">maxLog2MinLumaTransformBlockSizeMinus2</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                       <span class="n">minMaxTransformHierarchyDepthInter</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                       <span class="n">maxMaxTransformHierarchyDepthInter</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                       <span class="n">minMaxTransformHierarchyDepthIntra</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                       <span class="n">maxMaxTransformHierarchyDepthIntra</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                       <span class="n">maxDiffCuQpDeltaDepth</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                       <span class="n">minMaxNumMergeCand</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                       <span class="n">maxMaxNumMergeCand</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265CapabilitiesEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap42.html#VkVideoEncodeH265CapabilityFlagBitsEXT">VkVideoEncodeH265CapabilityFlagBitsEXT</a>
describing supported encoding tools.</p>
</li>
<li>
<p><code>ctbSizes</code> is a bitmask of <a href="chap42.html#VkVideoEncodeH265CtbSizeFlagBitsEXT">VkVideoEncodeH265CtbSizeFlagBitsEXT</a>
describing the supported CTB sizes.</p>
</li>
<li>
<p><code>transformBlockSizes</code> is a bitmask of
<a href="chap42.html#VkVideoEncodeH265TransformBlockSizeFlagBitsEXT">VkVideoEncodeH265TransformBlockSizeFlagBitsEXT</a> describing the
supported transform block sizes.</p>
</li>
<li>
<p><code>maxPPictureL0ReferenceCount</code> reports the maximum number of
reference pictures the implementation supports in the reference list L0
for P pictures.</p>
</li>
<li>
<p><code>maxBPictureL0ReferenceCount</code> reports the maximum number of
reference pictures the implementation supports in the reference list L0
for B pictures.
The reported value is <code>0</code> if encoding of B pictures is not supported.</p>
</li>
<li>
<p><code>maxL1ReferenceCount</code> reports the maximum number of reference
pictures the implementation supports in the reference list L1 if
encoding of B pictures is supported.
The reported value is <code>0</code> if encoding of B pictures is not supported.</p>
</li>
<li>
<p><code>maxSubLayersCount</code> reports the maximum number of sublayers.</p>
</li>
<li>
<p><code>minLog2MinLumaCodingBlockSizeMinus3</code> reports the minimum value that
may be set for log2_min_luma_coding_block_size_minus3 in
StdVideoH265SequenceParameterSet.</p>
</li>
<li>
<p><code>maxLog2MinLumaCodingBlockSizeMinus3</code> reports the maximum value that
may be set for log2_min_luma_coding_block_size_minus3 in
StdVideoH265SequenceParameterSet.</p>
</li>
<li>
<p><code>minLog2MinLumaTransformBlockSizeMinus2</code> reports the minimum value
that may be set for log2_min_luma_transform_block_size_minus2 in
StdVideoH265SequenceParameterSet.</p>
</li>
<li>
<p><code>maxLog2MinLumaTransformBlockSizeMinus2</code> reports the maximum value
that may be set for log2_min_luma_transform_block_size_minus2 in
StdVideoH265SequenceParameterSet.</p>
</li>
<li>
<p><code>minMaxTransformHierarchyDepthInter</code> reports the minimum value that
may be set for max_transform_hierarchy_depth_inter in
StdVideoH265SequenceParameterSet.</p>
</li>
<li>
<p><code>maxMaxTransformHierarchyDepthInter</code> reports the maximum value that
may be set for max_transform_hierarchy_depth_inter in
StdVideoH265SequenceParameterSet.</p>
</li>
<li>
<p><code>minMaxTransformHierarchyDepthIntra</code> reports the minimum value that
may be set for max_transform_hierarchy_depth_intra in
StdVideoH265SequenceParameterSet.</p>
</li>
<li>
<p><code>maxMaxTransformHierarchyDepthIntra</code> reports the maximum value that
may be set for max_transform_hierarchy_depth_intra in
StdVideoH265SequenceParameterSet.</p>
</li>
<li>
<p><code>maxDiffCuQpDeltaDepth</code> reports the maximum value that may be set
for diff_cu_qp_delta_depth in StdVideoH265PictureParameterSet.</p>
</li>
<li>
<p><code>minMaxNumMergeCand</code> reports the minimum value that may be set for
MaxNumMergeCand in StdVideoEncodeH265SliceHeader.</p>
</li>
<li>
<p><code>maxMaxNumMergeCand</code> reports the maximum value that may be set for
MaxNumMergeCand in StdVideoEncodeH265SliceHeader.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265CapabilitiesEXT-sType-sType" href="chap42.html#VUID-VkVideoEncodeH265CapabilitiesEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH265CapabilitiesEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H265_CAPABILITIES_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeH265CapabilityFlagsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeH265CapabilityFlagsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEncodeH265CapabilityFlagsEXT</code> is a bitmask type for setting a
mask of zero or more <a href="chap42.html#VkVideoEncodeH265CapabilityFlagBitsEXT">VkVideoEncodeH265CapabilityFlagBitsEXT</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">may</strong> be set in
<a href="chap42.html#VkVideoEncodeH265CapabilitiesEXT">VkVideoEncodeH265CapabilitiesEXT</a>::<code>flags</code>, indicating the encoding
tools supported, are:</p>
</div>
<div id="VkVideoEncodeH265CapabilityFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeH265CapabilityFlagBitsEXT</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_SEPARATE_COLOUR_PLANE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_SCALING_LISTS_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_SAMPLE_ADAPTIVE_OFFSET_ENABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_PCM_ENABLE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_SPS_TEMPORAL_MVP_ENABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000010</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_HRD_COMPLIANCE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000020</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_INIT_QP_MINUS26_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000040</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_LOG2_PARALLEL_MERGE_LEVEL_MINUS2_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000080</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_SIGN_DATA_HIDING_ENABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000100</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_TRANSFORM_SKIP_ENABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000200</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_TRANSFORM_SKIP_DISABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000400</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_PPS_SLICE_CHROMA_QP_OFFSETS_PRESENT_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000800</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_WEIGHTED_PRED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00001000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_WEIGHTED_BIPRED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00002000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_WEIGHTED_PRED_NO_TABLE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00004000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_TRANSQUANT_BYPASS_ENABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00008000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_ENTROPY_CODING_SYNC_ENABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00010000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_DEBLOCKING_FILTER_OVERRIDE_ENABLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00020000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_MULTIPLE_TILE_PER_FRAME_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00040000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_MULTIPLE_SLICE_PER_TILE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00080000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_MULTIPLE_TILE_PER_SLICE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00100000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_SLICE_SEGMENT_CTB_COUNT_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00200000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_ROW_UNALIGNED_SLICE_SEGMENT_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00400000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_DEPENDENT_SLICE_SEGMENT_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00800000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_DIFFERENT_SLICE_TYPE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x01000000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_B_FRAME_IN_L1_LIST_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x02000000</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CAPABILITY_DIFFERENT_REFERENCE_FINAL_LISTS_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x04000000</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265CapabilityFlagBitsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_SEPARATE_COLOUR_PLANE_BIT_EXT</code>
reports if enabling separate_colour_plane_flag in StdVideoH265SpsFlags
is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_SCALING_LISTS_BIT_EXT</code> reports if
enabling scaling_list_enabled_flag and
sps_scaling_list_data_present_flag in StdVideoH265SpsFlags, or enabling
pps_scaling_list_data_present_flag in StdVideoH265PpsFlags are
supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_SAMPLE_ADAPTIVE_OFFSET_ENABLED_BIT_EXT</code>
reports if enabling sample_adaptive_offset_enabled_flag in
StdVideoH265SpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_PCM_ENABLE_BIT_EXT</code> reports if
enabling pcm_enable_flag in StdVideoH265SpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_SPS_TEMPORAL_MVP_ENABLED_BIT_EXT</code>
reports if enabling sps_temporal_mvp_enabled_flag in
StdVideoH265SpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_HRD_COMPLIANCE_BIT_EXT</code> reports if
the implementation guarantees generating a HRD compliant bitstream if
nal_hrd_parameters_present_flag, vcl_hrd_parameters_present_flag, or
sub_pic_hrd_params_present_flag are enabled in StdVideoH265HrdFlags, or
vui_hrd_parameters_present_flag is enabled in StdVideoH265SpsVuiFlags.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_INIT_QP_MINUS26_BIT_EXT</code> reports if
setting non-zero init_qp_minus26 in StdVideoH265PictureParameterSet is
supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_LOG2_PARALLEL_MERGE_LEVEL_MINUS2_BIT_EXT</code>
reports if setting non-zero value for log2_parallel_merge_level_minus2
in StdVideoH265PictureParameterSet is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_SIGN_DATA_HIDING_ENABLED_BIT_EXT</code>
reports if enabling sign_data_hiding_enabled_flag in
StdVideoH265PpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_TRANSFORM_SKIP_ENABLED_BIT_EXT</code>
reports if enabling transform_skip_enabled_flag in StdVideoH265PpsFlags
is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_TRANSFORM_SKIP_DISABLED_BIT_EXT</code>
reports if disabling transform_skip_enabled_flag in StdVideoH265PpsFlags
is supported.
Implementations <strong class="purple">must</strong> report at least one of
<code>VK_VIDEO_ENCODE_H265_CAPABILITY_TRANSFORM_SKIP_ENABLED_BIT_EXT</code> and
<code>VK_VIDEO_ENCODE_H265_CAPABILITY_TRANSFORM_SKIP_DISABLED_BIT_EXT</code> as
supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_PPS_SLICE_CHROMA_QP_OFFSETS_PRESENT_BIT_EXT</code>
reports if enabling pps_slice_chroma_qp_offsets_present_flag in
StdVideoH265PpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_WEIGHTED_PRED_BIT_EXT</code> reports if
enabling weighted_pred_flag in StdVideoH265PpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_WEIGHTED_BIPRED_BIT_EXT</code> reports if
enabling weighted_bipred_flag in StdVideoH265PpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_WEIGHTED_PRED_NO_TABLE_BIT_EXT</code>
reports that when weighted_pred_flag or weighted_bipred_flag in
StdVideoH265PpsFlags are enabled, the implementation is able to
internally decide syntax for pred_weight_table.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_TRANSQUANT_BYPASS_ENABLED_BIT_EXT</code>
reports if enabling transquant_bypass_enabled_flag in
StdVideoH265PpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_ENTROPY_CODING_SYNC_ENABLED_BIT_EXT</code>
reports if enabling entropy_coding_sync_enabled_flag in
StdVideoH265PpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_DEBLOCKING_FILTER_OVERRIDE_ENABLED_BIT_EXT</code>
reports if enabling deblocking_filter_override_enabled_flag in
StdVideoH265PpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_MULTIPLE_TILE_PER_FRAME_BIT_EXT</code>
reports if encoding multiple tiles per frame is supported.
If not set, the implementation is only able to encode a single tile for
each frame.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_MULTIPLE_SLICE_PER_TILE_BIT_EXT</code>
reports if encoding multiple slices per tile is supported.
If not set, the implementation is only able to encode a single slice for
each tile.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_MULTIPLE_TILE_PER_SLICE_BIT_EXT</code>
reports if encoding multiple tiles per slice is supported.
If not set, the implementation is only able to encode a single tile for
each slice.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_SLICE_SEGMENT_CTB_COUNT_BIT_EXT</code>
reports support for configuring
<a href="chap42.html#VkVideoEncodeH265NaluSliceSegmentInfoEXT">VkVideoEncodeH265NaluSliceSegmentInfoEXT</a>::<code>ctbCount</code> and
slice_segment_address in StdVideoEncodeH265SliceSegmentHeader for each
slice segment in a frame with multiple slice segments.
If not supported, the implementation decides the number of CTBs in each
slice segment based on
<a href="chap42.html#VkVideoEncodeH265VclFrameInfoEXT">VkVideoEncodeH265VclFrameInfoEXT</a>::<code>naluSliceSegmentEntryCount</code>.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_ROW_UNALIGNED_SLICE_SEGMENT_BIT_EXT</code>
reports that each slice segment in a frame with a single or multiple
tiles per slice may begin or finish at any offset in a CTB row.
If not supported, all slice segments in such a frame <strong class="purple">must</strong> begin at the
start of a CTB row (and hence each slice segment <strong class="purple">must</strong> finish at the end
of a CTB row).
Also reports that each slice segment in a frame with multiple slices per
tile may begin or finish at any offset within the enclosing tile’s CTB
row.
If not supported, slice segments in such a frame <strong class="purple">must</strong> begin at the
start of the enclosing tile’s CTB row (and hence each slice segment
<strong class="purple">must</strong> finish at the end of the enclosing tile’s CTB row).</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_DEPENDENT_SLICE_SEGMENT_BIT_EXT</code>
reports if enabling dependent_slice_segment_flag in
StdVideoEncodeH265SliceHeaderFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_DIFFERENT_SLICE_TYPE_BIT_EXT</code>
reports that when
<code>VK_VIDEO_ENCODE_H265_CAPABILITY_MULTIPLE_SLICE_PER_TILE_BIT_EXT</code> is
supported and a frame is encoded with multiple slices, the
implementation allows encoding each slice segment with a different
<code>StdVideoEncodeH265SliceSegmentHeader</code>::slice_type.
If not supported, all slice segments of the frame <strong class="purple">must</strong> be encoded with
the same <code>slice_type</code> which corresponds to the picture type of the
frame.
For example, all slice segments of a P-frame would be encoded as
P-slices.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_B_FRAME_IN_L1_LIST_BIT_EXT</code> reports
support for using a B frame as L1 reference.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CAPABILITY_DIFFERENT_REFERENCE_FINAL_LISTS_BIT_EXT</code>
reports that the implementation allows encoding each slice segment with
a different <code>StdVideoEncodeH265ReferenceListsInfo</code>.
If not supported, all slice segments of the frame <strong class="purple">must</strong> be encoded with
the same <code>StdVideoEncodeH265ReferenceListsInfo</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeH265CtbSizeFlagsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeH265CtbSizeFlagsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEncodeH265CtbSizeFlagsEXT</code> is a bitmask type for setting a mask
of zero or more <a href="chap42.html#VkVideoEncodeH265CtbSizeFlagBitsEXT">VkVideoEncodeH265CtbSizeFlagBitsEXT</a>.
Implementations <strong class="purple">must</strong> set at least one of
<code>VkVideoEncodeH265CtbSizeFlagBitsEXT</code>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">may</strong> be set in
<a href="chap42.html#VkVideoEncodeH265CapabilitiesEXT">VkVideoEncodeH265CapabilitiesEXT</a>::<code>ctbSizes</code>, indicating the CTB
sizes supported by the implementation, are:</p>
</div>
<div id="VkVideoEncodeH265CtbSizeFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeH265CtbSizeFlagBitsEXT</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CTB_SIZE_16_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CTB_SIZE_32_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_CTB_SIZE_64_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265CtbSizeFlagBitsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CTB_SIZE_16_BIT_EXT</code> specifies that a CTB size
of 16x16 is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CTB_SIZE_32_BIT_EXT</code> specifies that a CTB size
of 32x32 is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_CTB_SIZE_64_BIT_EXT</code> specifies that a CTB size
of 64x64 is supported.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeH265TransformBlockSizeFlagsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkVideoEncodeH265TransformBlockSizeFlagsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkVideoEncodeH265TransformBlockSizeFlagsEXT</code> is a bitmask type for
setting a mask of zero or more
<a href="chap42.html#VkVideoEncodeH265TransformBlockSizeFlagBitsEXT">VkVideoEncodeH265TransformBlockSizeFlagBitsEXT</a>.
Implementations <strong class="purple">must</strong> set at least one of
<code>VkVideoEncodeH265TransformBlockSizeFlagBitsEXT</code>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">may</strong> be set in
<a href="chap42.html#VkVideoEncodeH265CapabilitiesEXT">VkVideoEncodeH265CapabilitiesEXT</a>::<code>transformBlockSizes</code>,
indicating the transform block sizes supported by the implementation, are:</p>
</div>
<div id="VkVideoEncodeH265TransformBlockSizeFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeH265TransformBlockSizeFlagBitsEXT</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_H265_TRANSFORM_BLOCK_SIZE_4_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_TRANSFORM_BLOCK_SIZE_8_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_TRANSFORM_BLOCK_SIZE_16_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_TRANSFORM_BLOCK_SIZE_32_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265TransformBlockSizeFlagBitsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_H265_TRANSFORM_BLOCK_SIZE_4_BIT_EXT</code> specifies that
a transform block size of 4x4 is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_TRANSFORM_BLOCK_SIZE_8_BIT_EXT</code> specifies that
a transform block size of 8x8 is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_TRANSFORM_BLOCK_SIZE_16_BIT_EXT</code> specifies
that a transform block size of 16x16 is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_TRANSFORM_BLOCK_SIZE_32_BIT_EXT</code> specifies
that a transform block size of 32x32 is supported.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_encoder_h_265_video_session_parameters_object"><a class="anchor" href="chap42.html#_encoder_h_265_video_session_parameters_object"></a>42.15.3. Encoder H.265 Video Session Parameters Object</h4>
<div class="paragraph">
<p>When creating a Video Session Parameters object, add a
<a href="chap42.html#VkVideoEncodeH265SessionParametersCreateInfoEXT">VkVideoEncodeH265SessionParametersCreateInfoEXT</a> structure to the
<code>pNext</code> chain of the <a href="chap42.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a>
structure passed to <a href="chap42.html#vkCreateVideoSessionParametersKHR">vkCreateVideoSessionParametersKHR</a> in order to
specify the H.265-specific video encoder session parameters.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH265SessionParametersCreateInfoEXT</code> structure is
defined as:</p>
</div>
<div id="VkVideoEncodeH265SessionParametersCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265SessionParametersCreateInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                        <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                            <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                               <span class="n">maxStdVPSCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                               <span class="n">maxStdSPSCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                               <span class="n">maxStdPPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoEncodeH265SessionParametersAddInfoEXT</span><span class="o">*</span>    <span class="n">pParametersAddInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265SessionParametersCreateInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>maxStdVPSCount</code> is the maximum number of entries of type
<code>StdVideoH265VideoParameterSet</code> within
<code>VkVideoSessionParametersKHR</code>.</p>
</li>
<li>
<p><code>maxStdSPSCount</code> is the maximum number of entries of type
<code>StdVideoH265SequenceParameterSet</code> within
<code>VkVideoSessionParametersKHR</code>.</p>
</li>
<li>
<p><code>maxStdPPSCount</code> is the maximum number of entries of type
<code>StdVideoH265PictureParameterSet</code> within
<code>VkVideoSessionParametersKHR</code>.</p>
</li>
<li>
<p><code>pParametersAddInfo</code> is <code>NULL</code> or a pointer to a
<a href="chap42.html#VkVideoEncodeH265SessionParametersAddInfoEXT">VkVideoEncodeH265SessionParametersAddInfoEXT</a> structure specifying
the video session parameters to add upon creation of this object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When a <a href="chap42.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object contains
<code>maxStdVPSCount</code> <code>StdVideoH265VideoParameterSet</code> entries, no
additional <code>StdVideoH265VideoParameterSet</code> entries can be added to it,
and <code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add these entries.
When a <a href="chap42.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object contains
<code>maxStdSPSCount</code> <code>StdVideoH265SequenceParameterSet</code> entries, no
additional <code>StdVideoH265SequenceParameterSet</code> entries can be added to it,
and <code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add these entries.
When a <a href="chap42.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object contains
<code>maxStdPPSCount</code> <code>StdVideoH265PictureParameterSet</code> entries, no
additional <code>StdVideoH265PictureParameterSet</code> entries can be added to it,
and <code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add these entries.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersCreateInfoEXT-sType-sType" href="chap42.html#VUID-VkVideoEncodeH265SessionParametersCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H265_SESSION_PARAMETERS_CREATE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersCreateInfoEXT-pParametersAddInfo-parameter" href="chap42.html#VUID-VkVideoEncodeH265SessionParametersCreateInfoEXT-pParametersAddInfo-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersCreateInfoEXT-pParametersAddInfo-parameter</span><br>
 If <code>pParametersAddInfo</code> is not <code>NULL</code>, <code>pParametersAddInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap42.html#VkVideoEncodeH265SessionParametersAddInfoEXT">VkVideoEncodeH265SessionParametersAddInfoEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH265SessionParametersAddInfoEXT</code> structure is defined
as:</p>
</div>
<div id="VkVideoEncodeH265SessionParametersAddInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265SessionParametersAddInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                            <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                   <span class="n">stdVPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoH265VideoParameterSet</span><span class="o">*</span>       <span class="n">pStdVPSs</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                   <span class="n">stdSPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoH265SequenceParameterSet</span><span class="o">*</span>    <span class="n">pStdSPSs</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                   <span class="n">stdPPSCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoH265PictureParameterSet</span><span class="o">*</span>     <span class="n">pStdPPSs</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265SessionParametersAddInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stdVPSCount</code> is the number of VPS elements in <code>pStdVPSs</code>.</p>
</li>
<li>
<p><code>pStdVPSs</code> is a pointer to an array of <code>stdVPSCount</code>
<code>StdVideoH265VideoParameterSet</code> structures representing H.265 video
parameter sets.</p>
</li>
<li>
<p><code>stdSPSCount</code> is the number of SPS elements in <code>pStdSPSs</code>.</p>
</li>
<li>
<p><code>pStdSPSs</code> is a pointer to an array of <code>stdSPSCount</code>
<code>StdVideoH265SequenceParameterSet</code> structures representing H.265
sequence parameter sets.</p>
</li>
<li>
<p><code>stdPPSCount</code> is the number of PPS elements in <code>pStdPPSs</code>.</p>
</li>
<li>
<p><code>pStdPPSs</code> is a pointer to an array of <code>stdPPSCount</code>
<code>StdVideoH265PictureParameterSet</code> structures representing H.265
picture parameter sets.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-sType-sType" href="chap42.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H265_SESSION_PARAMETERS_ADD_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdVPSs-parameter" href="chap42.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdVPSs-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdVPSs-parameter</span><br>
 If <code>pStdVPSs</code> is not <code>NULL</code>, <code>pStdVPSs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>stdVPSCount</code> <code>StdVideoH265VideoParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdSPSs-parameter" href="chap42.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdSPSs-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdSPSs-parameter</span><br>
 If <code>pStdSPSs</code> is not <code>NULL</code>, <code>pStdSPSs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>stdSPSCount</code> <code>StdVideoH265SequenceParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdPPSs-parameter" href="chap42.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdPPSs-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdPPSs-parameter</span><br>
 If <code>pStdPPSs</code> is not <code>NULL</code>, <code>pStdPPSs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>stdPPSCount</code> <code>StdVideoH265PictureParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdVPSCount-arraylength" href="chap42.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdVPSCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdVPSCount-arraylength</span><br>
 <code>stdVPSCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdSPSCount-arraylength" href="chap42.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdSPSCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdSPSCount-arraylength</span><br>
 <code>stdSPSCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdPPSCount-arraylength" href="chap42.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdPPSCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdPPSCount-arraylength</span><br>
 <code>stdPPSCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdVPSCount-06438" href="chap42.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdVPSCount-06438"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-stdVPSCount-06438</span><br>

The values of <code>stdVPSCount</code>, <code>stdSPSCount</code> and <code>stdPPSCount</code>
<strong class="purple">must</strong> be less than or equal to the values of
<a href="chap42.html#VkVideoEncodeH265SessionParametersCreateInfoEXT">VkVideoEncodeH265SessionParametersCreateInfoEXT</a>::<code>maxStdVPSCount</code>,
<a href="chap42.html#VkVideoEncodeH265SessionParametersCreateInfoEXT">VkVideoEncodeH265SessionParametersCreateInfoEXT</a>:<code>maxStdSPSCount</code>,
and
<a href="chap42.html#VkVideoEncodeH265SessionParametersCreateInfoEXT">VkVideoEncodeH265SessionParametersCreateInfoEXT</a>:<code>maxStdPPSCount</code>,
respectively</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdVPSs-06439" href="chap42.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdVPSs-06439"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdVPSs-06439</span><br>

Each <code>StdVideoH265VideoParameterSet</code> entry in <code>pStdVPSs</code> <strong class="purple">must</strong>
have a unique H.265 VPS ID</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdSPSs-06440" href="chap42.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdSPSs-06440"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdSPSs-06440</span><br>

Each <code>StdVideoH265SequenceParameterSet</code> entry in <code>pStdSPSs</code> <strong class="purple">must</strong>
have a unique H.265 VPS-SPS ID pair</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdPPSs-06441" href="chap42.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdPPSs-06441"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-pStdPPSs-06441</span><br>

Each <code>StdVideoH265PictureParameterSet</code> entry in <code>pStdPPSs</code> <strong class="purple">must</strong>
have a unique H.265 VPS-SPS-PPS ID tuple</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06442" href="chap42.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06442"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06442</span><br>

Each entry to be added <strong class="purple">must</strong> have a unique, to the rest of the parameter
array entries and the existing parameters in the Video Session
Parameters Object that is being updated, VPS-SPS-PPS IDs</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06443" href="chap42.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06443"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06443</span><br>

Parameter entries that already exist in Video Session Parameters object
with a particular VPS-SPS-PPS IDs <strong class="purple">must</strong> not be replaced nor updated</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06444" href="chap42.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06444"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06444</span><br>

When creating a new object using a Video Session Parameters as a
template, the array’s parameters with the same VPS-SPS-PPS IDs as the
ones from the template take precedence</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06445" href="chap42.html#VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06445"></a> <span class="vuid">VUID-VkVideoEncodeH265SessionParametersAddInfoEXT-None-06445</span><br>

VPS/SPS/PPS parameters <strong class="purple">must</strong> comply with the limits specified in
<a href="chap42.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a> during Video Session creation</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_frame_encoding_2"><a class="anchor" href="chap42.html#_frame_encoding_2"></a>42.15.4. Frame Encoding</h4>
<div class="paragraph">
<p>In order to encode a frame, add a <a href="chap42.html#VkVideoEncodeH265VclFrameInfoEXT">VkVideoEncodeH265VclFrameInfoEXT</a>
structure to the <code>pNext</code> chain of the <a href="chap42.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>
structure passed to the <a href="chap42.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a> command.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap42.html#VkVideoEncodeH265VclFrameInfoEXT">VkVideoEncodeH265VclFrameInfoEXT</a> structure representing a frame
encode operation is defined as:</p>
</div>
<div id="VkVideoEncodeH265VclFrameInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265VclFrameInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                        <span class="n">pNext</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoEncodeH265ReferenceListsInfo</span><span class="o">*</span>        <span class="n">pStdReferenceFinalLists</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                           <span class="n">naluSliceSegmentEntryCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkVideoEncodeH265NaluSliceSegmentInfoEXT</span><span class="o">*</span>    <span class="n">pNaluSliceSegmentEntries</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoEncodeH265PictureInfo</span><span class="o">*</span>               <span class="n">pStdPictureInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265VclFrameInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pStdReferenceFinalLists</code> is <code>NULL</code> or a pointer to a
<code>StdVideoEncodeH265ReferenceListsInfo</code> structure specifying the
reference lists to be used for the current picture.</p>
</li>
<li>
<p><code>naluSliceSegmentEntryCount</code> is the number of slice segment NALUs in
the frame.</p>
</li>
<li>
<p><code>pNaluSliceSegmentEntries</code> is a pointer to an array of
<a href="chap42.html#VkVideoEncodeH265NaluSliceSegmentInfoEXT">VkVideoEncodeH265NaluSliceSegmentInfoEXT</a> structures specifying the
division of the current picture into slice segments and the properties
of these slice segments.</p>
</li>
<li>
<p><code>pStdPictureInfo</code> is a pointer to a
<code>StdVideoEncodeH265PictureInfo</code> structure specifying the syntax and
other codec-specific information from the H.265 specification,
associated with this picture.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265VclFrameInfoEXT-sType-sType" href="chap42.html#VUID-VkVideoEncodeH265VclFrameInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH265VclFrameInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H265_VCL_FRAME_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265VclFrameInfoEXT-pStdReferenceFinalLists-parameter" href="chap42.html#VUID-VkVideoEncodeH265VclFrameInfoEXT-pStdReferenceFinalLists-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265VclFrameInfoEXT-pStdReferenceFinalLists-parameter</span><br>
 If <code>pStdReferenceFinalLists</code> is not <code>NULL</code>, <code>pStdReferenceFinalLists</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoEncodeH265ReferenceListsInfo</code> value</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265VclFrameInfoEXT-pNaluSliceSegmentEntries-parameter" href="chap42.html#VUID-VkVideoEncodeH265VclFrameInfoEXT-pNaluSliceSegmentEntries-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265VclFrameInfoEXT-pNaluSliceSegmentEntries-parameter</span><br>
 <code>pNaluSliceSegmentEntries</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>naluSliceSegmentEntryCount</code> valid <a href="chap42.html#VkVideoEncodeH265NaluSliceSegmentInfoEXT">VkVideoEncodeH265NaluSliceSegmentInfoEXT</a> structures</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265VclFrameInfoEXT-pStdPictureInfo-parameter" href="chap42.html#VUID-VkVideoEncodeH265VclFrameInfoEXT-pStdPictureInfo-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265VclFrameInfoEXT-pStdPictureInfo-parameter</span><br>
 <code>pStdPictureInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoEncodeH265PictureInfo</code> value</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265VclFrameInfoEXT-naluSliceSegmentEntryCount-arraylength" href="chap42.html#VUID-VkVideoEncodeH265VclFrameInfoEXT-naluSliceSegmentEntryCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH265VclFrameInfoEXT-naluSliceSegmentEntryCount-arraylength</span><br>
 <code>naluSliceSegmentEntryCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap42.html#VkVideoEncodeH265NaluSliceSegmentInfoEXT">VkVideoEncodeH265NaluSliceSegmentInfoEXT</a> structure representing a
slice segment is defined as:</p>
</div>
<div id="VkVideoEncodeH265NaluSliceSegmentInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265NaluSliceSegmentInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                    <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                       <span class="n">ctbCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoEncodeH265ReferenceListsInfo</span><span class="o">*</span>    <span class="n">pStdReferenceFinalLists</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoEncodeH265SliceSegmentHeader</span><span class="o">*</span>    <span class="n">pStdSliceSegmentHeader</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265NaluSliceSegmentInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>ctbCount</code> is the number of CTBs in this slice segment.</p>
</li>
<li>
<p><code>pStdReferenceFinalLists</code> is <code>NULL</code> or a pointer to a
<code>StdVideoEncodeH265ReferenceListsInfo</code> structure specifying the
reference lists to be used for the current slice segment.
If <code>pStdReferenceFinalLists</code> is not <code>NULL</code>, these reference lists
override the reference lists provided in
<a href="chap42.html#VkVideoEncodeH265VclFrameInfoEXT">VkVideoEncodeH265VclFrameInfoEXT</a>::<code>pStdReferenceFinalLists</code>.</p>
</li>
<li>
<p><code>pStdSliceSegmentHeader</code> is a pointer to a
<code>StdVideoEncodeH265SliceSegmentHeader</code> structure specifying the slice
segment header for the current slice segment.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-sType-sType" href="chap42.html#VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H265_NALU_SLICE_SEGMENT_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-pNext-pNext" href="chap42.html#VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-pNext-pNext"></a> <span class="vuid">VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-pStdReferenceFinalLists-parameter" href="chap42.html#VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-pStdReferenceFinalLists-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-pStdReferenceFinalLists-parameter</span><br>
 If <code>pStdReferenceFinalLists</code> is not <code>NULL</code>, <code>pStdReferenceFinalLists</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoEncodeH265ReferenceListsInfo</code> value</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-pStdSliceSegmentHeader-parameter" href="chap42.html#VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-pStdSliceSegmentHeader-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265NaluSliceSegmentInfoEXT-pStdSliceSegmentHeader-parameter</span><br>
 <code>pStdSliceSegmentHeader</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoEncodeH265SliceSegmentHeader</code> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap42.html#VkVideoEncodeH265DpbSlotInfoEXT">VkVideoEncodeH265DpbSlotInfoEXT</a> structure, representing a
reconstructed picture that is being used as a reference picture, is defined
as:</p>
</div>
<div id="VkVideoEncodeH265DpbSlotInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265DpbSlotInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                           <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                               <span class="n">pNext</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">StdVideoEncodeH265ReferenceInfo</span><span class="o">*</span>    <span class="n">pStdReferenceInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265DpbSlotInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pStdReferenceInfo</code> is a pointer to a
<code>StdVideoEncodeH265ReferenceInfo</code> structure specifying the syntax and
other codec-specific information from the H.265 specification,
associated with this reference picture.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265DpbSlotInfoEXT-sType-sType" href="chap42.html#VUID-VkVideoEncodeH265DpbSlotInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH265DpbSlotInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H265_DPB_SLOT_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265DpbSlotInfoEXT-pStdReferenceInfo-parameter" href="chap42.html#VUID-VkVideoEncodeH265DpbSlotInfoEXT-pStdReferenceInfo-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265DpbSlotInfoEXT-pStdReferenceInfo-parameter</span><br>
 <code>pStdReferenceInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoEncodeH265ReferenceInfo</code> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_rate_control_2"><a class="anchor" href="chap42.html#_rate_control_2"></a>42.15.5. Rate control</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH265RateControlInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH265RateControlInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265RateControlInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                 <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                    <span class="n">gopFrameCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                    <span class="n">idrPeriod</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                    <span class="n">consecutiveBFrameCount</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH265RateControlStructureEXT</span>    <span class="n">rateControlStructure</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                    <span class="n">subLayerCount</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265RateControlInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>gopFrameCount</code> is the number of frames contained within the group
of pictures (GOP), starting from an intra frame and until the next intra
frame.
If it is set to 0, the implementation chooses a suitable value.
If it is set to <code>UINT32_MAX</code>, the GOP length is treated as infinite.</p>
</li>
<li>
<p><code>idrPeriod</code> is the interval, in terms of number of frames, between
two IDR frames.
If it is set to 0, the implementation chooses a suitable value.
If it is set to <code>UINT32_MAX</code>, the IDR period is treated as infinite.</p>
</li>
<li>
<p><code>consecutiveBFrameCount</code> is the number of consecutive B-frames
between I- and/or P-frames within the GOP.</p>
</li>
<li>
<p><code>rateControlStructure</code> is a
<a href="chap42.html#VkVideoEncodeH265RateControlStructureEXT">VkVideoEncodeH265RateControlStructureEXT</a> value specifying the
expected encode stream reference structure, to aid in rate control
calculations.</p>
</li>
<li>
<p><code>subLayerCount</code> specifies the number of sub layers enabled in the
stream.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In order to provide H.265-specific stream rate control parameters, add a
<code>VkVideoEncodeH265RateControlInfoEXT</code> structure to the <code>pNext</code> chain
of the <a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a> structure in the <code>pNext</code>
chain of the <a href="chap42.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a> structure passed to the
<a href="chap42.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a> command.</p>
</div>
<div class="paragraph">
<p>The parameters from this structure act as a guidance for implementations to
apply various rate control heuristics.</p>
</div>
<div class="paragraph">
<p>It is possible to infer the picture type to be used when encoding a frame,
on the basis of the values provided for <code>consecutiveBFrameCount</code>,
<code>idrPeriod</code>, and <code>gopFrameCount</code>, but this inferred picture type
will not be used by implementations to override the picture type provided in
<a href="chap42.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a>.
Additionally, it is not required for the video session to be reset if the
inferred picture type does not match the actual picture type.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265RateControlInfoEXT-sType-sType" href="chap42.html#VUID-VkVideoEncodeH265RateControlInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH265RateControlInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H265_RATE_CONTROL_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265RateControlInfoEXT-rateControlStructure-parameter" href="chap42.html#VUID-VkVideoEncodeH265RateControlInfoEXT-rateControlStructure-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265RateControlInfoEXT-rateControlStructure-parameter</span><br>
 <code>rateControlStructure</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoEncodeH265RateControlStructureEXT">VkVideoEncodeH265RateControlStructureEXT</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of
<a href="chap42.html#VkVideoEncodeH265RateControlInfoEXT">VkVideoEncodeH265RateControlInfoEXT</a>::<code>rateControlStructure</code>,
specifying a video stream reference structure as a hint for the rate control
implementation, are:</p>
</div>
<div id="VkVideoEncodeH265RateControlStructureEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkVideoEncodeH265RateControlStructureEXT</span> <span class="p">{</span>
    <span class="n">VK_VIDEO_ENCODE_H265_RATE_CONTROL_STRUCTURE_UNKNOWN_EXT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_RATE_CONTROL_STRUCTURE_FLAT_EXT</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">VK_VIDEO_ENCODE_H265_RATE_CONTROL_STRUCTURE_DYADIC_EXT</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265RateControlStructureEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_H265_RATE_CONTROL_STRUCTURE_UNKNOWN_EXT</code> specifies
a reference structure unknown at the time of stream rate control
configuration.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_RATE_CONTROL_STRUCTURE_FLAT_EXT</code> specifies a
flat reference structure.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H265_RATE_CONTROL_STRUCTURE_DYADIC_EXT</code> specifies a
dyadic reference structure.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH265RateControlLayerInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH265RateControlLayerInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265RateControlLayerInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                  <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                      <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                         <span class="n">temporalId</span><span class="p">;</span>
    <span class="n">VkBool32</span>                         <span class="n">useInitialRcQp</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH265QpEXT</span>           <span class="n">initialRcQp</span><span class="p">;</span>
    <span class="n">VkBool32</span>                         <span class="n">useMinQp</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH265QpEXT</span>           <span class="n">minQp</span><span class="p">;</span>
    <span class="n">VkBool32</span>                         <span class="n">useMaxQp</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH265QpEXT</span>           <span class="n">maxQp</span><span class="p">;</span>
    <span class="n">VkBool32</span>                         <span class="n">useMaxFrameSize</span><span class="p">;</span>
    <span class="n">VkVideoEncodeH265FrameSizeEXT</span>    <span class="n">maxFrameSize</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265RateControlLayerInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>temporalId</code> specifies the H.265 temporal ID of the video coding
layer that settings provided in this structure and its parent
<a href="chap42.html#VkVideoEncodeRateControlLayerInfoKHR">VkVideoEncodeRateControlLayerInfoKHR</a> structure apply to.</p>
</li>
<li>
<p><code>useInitialRcQp</code> indicates whether the values within
<code>initialRcQp</code> should be used by the implementation.</p>
</li>
<li>
<p><code>initialRcQp</code> provides the QP values for each picture type, to be
used in rate control calculations at the start of video encode
operations on a newly-created video session, or immediately after a
session reset.
These values are ignored when
<a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>::<code>rateControlMode</code> is not
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_CBR_BIT_KHR</code> or
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_VBR_BIT_KHR</code>.</p>
</li>
<li>
<p><code>useMinQp</code> indicates whether the values within <code>minQp</code> should be
used by the implementation.
When it is set to <code>VK_FALSE</code>, the implementation ignores the values
in <code>minQp</code> and chooses suitable values.</p>
</li>
<li>
<p><code>minQp</code> provides the lower bound on the QP values for each picture
type, to be used in rate control calculations.</p>
</li>
<li>
<p><code>useMaxQp</code> indicates whether the values within <code>maxQp</code> should be
used by the implementation.
When it is set to <code>VK_FALSE</code>, the implementation ignores the values
in <code>maxQp</code> and chooses suitable values.</p>
</li>
<li>
<p><code>maxQp</code> provides the upper bound on the QP values for each picture
type, to be used in rate control calculations.</p>
</li>
<li>
<p><code>useMaxFrameSize</code> indicates whether the values within
<code>maxFrameSize</code> should be used by the implementation.</p>
</li>
<li>
<p><code>maxFrameSize</code> provides the upper bound on the encoded frame size
for each picture type.
The implementation does not guarantee the encoded frame sizes will be
within the specified limits, however these limits <strong class="purple">may</strong> be used as a
guide in rate control calculations.
If enabled and not set properly, the <code>maxQp</code> limit may prevent the
implementation from respecting the <code>maxFrameSize</code> limit.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>H.265-specific per-layer rate control parameters <strong class="purple">must</strong> be specified by
adding a <code>VkVideoEncodeH265RateControlLayerInfoEXT</code> structure to the
<code>pNext</code> chain of each <a href="chap42.html#VkVideoEncodeRateControlLayerInfoKHR">VkVideoEncodeRateControlLayerInfoKHR</a>
structure in a call to <a href="chap42.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a> command, when the
command buffer context has an active video encode H.265 session.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265RateControlLayerInfoEXT-rateControlMode-06476" href="chap42.html#VUID-VkVideoEncodeH265RateControlLayerInfoEXT-rateControlMode-06476"></a> <span class="vuid">VUID-VkVideoEncodeH265RateControlLayerInfoEXT-rateControlMode-06476</span><br>

When <a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>::<code>rateControlMode</code> is
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_DISABLED_BIT_KHR</code>, both
<code>useMinQp</code> and <code>useMaxQp</code> must be set to <code>VK_TRUE</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265RateControlLayerInfoEXT-rateControlMode-06477" href="chap42.html#VUID-VkVideoEncodeH265RateControlLayerInfoEXT-rateControlMode-06477"></a> <span class="vuid">VUID-VkVideoEncodeH265RateControlLayerInfoEXT-rateControlMode-06477</span><br>

When <a href="chap42.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>::<code>rateControlMode</code> is
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_DISABLED_BIT_KHR</code>, the values
provided in <code>minQP</code> must be identical to those provided in
<code>maxQp</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH265RateControlLayerInfoEXT-sType-sType" href="chap42.html#VUID-VkVideoEncodeH265RateControlLayerInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH265RateControlLayerInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H265_RATE_CONTROL_LAYER_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265RateControlLayerInfoEXT-initialRcQp-parameter" href="chap42.html#VUID-VkVideoEncodeH265RateControlLayerInfoEXT-initialRcQp-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265RateControlLayerInfoEXT-initialRcQp-parameter</span><br>
 <code>initialRcQp</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoEncodeH265QpEXT">VkVideoEncodeH265QpEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265RateControlLayerInfoEXT-minQp-parameter" href="chap42.html#VUID-VkVideoEncodeH265RateControlLayerInfoEXT-minQp-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265RateControlLayerInfoEXT-minQp-parameter</span><br>
 <code>minQp</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoEncodeH265QpEXT">VkVideoEncodeH265QpEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265RateControlLayerInfoEXT-maxQp-parameter" href="chap42.html#VUID-VkVideoEncodeH265RateControlLayerInfoEXT-maxQp-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265RateControlLayerInfoEXT-maxQp-parameter</span><br>
 <code>maxQp</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoEncodeH265QpEXT">VkVideoEncodeH265QpEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH265RateControlLayerInfoEXT-maxFrameSize-parameter" href="chap42.html#VUID-VkVideoEncodeH265RateControlLayerInfoEXT-maxFrameSize-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH265RateControlLayerInfoEXT-maxFrameSize-parameter</span><br>
 <code>maxFrameSize</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkVideoEncodeH265FrameSizeEXT">VkVideoEncodeH265FrameSizeEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH265QpEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH265QpEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265QpEXT</span> <span class="p">{</span>
    <span class="kt">int32_t</span>    <span class="n">qpI</span><span class="p">;</span>
    <span class="kt">int32_t</span>    <span class="n">qpP</span><span class="p">;</span>
    <span class="kt">int32_t</span>    <span class="n">qpB</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265QpEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>qpI</code> is the QP to be used for I-frames.</p>
</li>
<li>
<p><code>qpP</code> is the QP to be used for P-frames.</p>
</li>
<li>
<p><code>qpB</code> is the QP to be used for B-frames.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoEncodeH265FrameSizeEXT</code> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH265FrameSizeEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_video_encode_h265</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkVideoEncodeH265FrameSizeEXT</span> <span class="p">{</span>
    <span class="kt">uint32_t</span>    <span class="n">frameISize</span><span class="p">;</span>
    <span class="kt">uint32_t</span>    <span class="n">framePSize</span><span class="p">;</span>
    <span class="kt">uint32_t</span>    <span class="n">frameBSize</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkVideoEncodeH265FrameSizeEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>frameISize</code> is the size in bytes to be used for I-frames.</p>
</li>
<li>
<p><code>framePSize</code> is the size in bytes to be used for P-frames.</p>
</li>
<li>
<p><code>frameBSize</code> is the size in bytes to be used for B-frames.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div></div>

<nav>
  <a rel="prev" href="chap41.html" class="nav nav-prev" title="Previous page" aria-label="Previous page" aria-keyshortcuts="Left">
        <i class="fa fa-angle-left"></i>
     </a>
  <a rel="next" href="chap43.html" class="nav nav-next" title="Next page" aria-label="Next page" aria-keyshortcuts="Right">
        <i class="fa fa-angle-right"></i>
     </a>
  <div style="clear: both"></div>
</nav>
<div id="footer">
<div id="footer-text">
Version 1.3.248<br>
Last updated 2023-02-26 21:00:39 -0800
</div>
</div>



</body>
  <script>
  function isInViewport(ele) {
    const rect = ele.getBoundingClientRect();
    return (
        rect.top >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight)
    );
  }
  function yPosition (ele) {
    const rect = ele.getBoundingClientRect();
    return (rect.top - 20); // 20px above
  }
  let curr = document.getElementsByClassName('current');
  if (!isInViewport(curr[curr.length - 1])) {
    document.getElementById('toc').scrollTo({
      top: yPosition(curr[0]),
      left: 0,
      behavior: 'smooth'
    });
  }

  /* For page navigation */
  function gotoPage(selector) {
    const button = document.querySelector(selector);
    if (button)
      window.location.href = button.href;
  }
  document.addEventListener('keydown', e => {
    switch (e.key) {
      case 'ArrowRight':
        e.preventDefault();
        gotoPage('.nav-next');
        break;
      case 'ArrowLeft':
        e.preventDefault();
        gotoPage('.nav-prev');
        break;
    }
  });
  </script>
  </html>