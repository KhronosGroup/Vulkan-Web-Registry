<!DOCTYPE html><html lang="en"><head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="author" content="The Khronos® Vulkan Working Group">
<title>Vulkan® 1.3.205 - A Specification (with all registered Vulkan extensions)</title>
<link rel="stylesheet" href="style0.css" type="text/css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="style1.css" type="text/css">
<link rel="stylesheet" href="style2.css" type="text/css">

<!-- dragged in by font-awesome css included by asciidoctor, but preloaded in this extension for convenience -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0" as="font" type="font/woff2" crossorigin="">

<!-- Note: Chrome needs crossorigin="" even for same-origin fonts -->
<link rel="preload" href="../katex/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Typewriter-Regular.woff2" as="font" type="font/woff2" crossorigin=""><link rel="stylesheet" href="../katex/katex.min.css">
<!--ChunkedSearchJSMarker-->
<link href="chunked.css?4" rel="stylesheet">
<script>var searchindexurl = 'search.index.js?4' + (document.title.replace(/[^0-9.]/g, ''));</script>
<script src="chunked.js?4"></script>
<link rel="stylesheet" href="style3.css" type="text/css">
<script>
    function hideElement(e){
        e.setAttribute("hidden", "");
        e.classList.add("hidden");
    }

    function unhideElement(e){
        e.classList.remove("hidden");
        e.removeAttribute("hidden");
    }

    function hideLoadableContent(){
        unhideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) hideElement(loadable);
    }

    function unhideLoadableContent(){
        hideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) unhideElement(loadable);
    }

    window.addEventListener("load", unhideLoadableContent);
</script>
<link rel="stylesheet" href="asciidoctor-chunker.css" type="text/css"></head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Vulkan<sup>®</sup> 1.3.205 - A Specification (with all registered Vulkan extensions)</h1>
<div class="details">
<span id="author" class="author">The Khronos<sup>®</sup> Vulkan Working Group</span><br>
<span id="revnumber">version 1.3.205,</span>
<span id="revdate">2022-02-04 11:34:23Z</span>
<br><span id="revremark">from git branch: github-main commit: 9e4c847a9e93cccd5f46e173c3ccf752b89c35df</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="index.html">Titlepage</a></li><li><a href="chap1.html">1. Preamble</a></li>
<li><a href="chap2.html">2. Introduction</a>
<ul class="sectlevel2">
<li><a href="chap2.html#introduction-conventions">2.1. Document Conventions</a></li>
</ul>
</li>
<li><a href="chap3.html">3. Fundamentals</a>
<ul class="sectlevel2">
<li><a href="chap3.html#fundamentals-host-environment">3.1. Host and Device Environment</a></li>
<li><a href="chap3.html#fundamentals-execmodel">3.2. Execution Model</a></li>
<li><a href="chap3.html#fundamentals-objectmodel-overview">3.3. Object Model</a></li>
<li><a href="chap3.html#fundamentals-abi">3.4. Application Binary Interface</a></li>
<li><a href="chap3.html#fundamentals-commandsyntax">3.5. Command Syntax and Duration</a></li>
<li><a href="chap3.html#fundamentals-threadingbehavior">3.6. Threading Behavior</a></li>
<li><a href="chap3.html#fundamentals-validusage">3.7. Valid Usage</a></li>
<li><a href="chap3.html#fundamentals-returncodes">3.8. <code>VkResult</code> Return Codes</a></li>
<li><a href="chap3.html#fundamentals-numerics">3.9. Numeric Representation and Computation</a></li>
<li><a href="chap3.html#fundamentals-fixedconv">3.10. Fixed-Point Data Conversions</a></li>
<li><a href="chap3.html#fundamentals-common-objects">3.11. Common Object Types</a></li>
<li><a href="chap3.html#fundamentals-api-name-aliases">3.12. API Name Aliases</a></li>
</ul>
</li>
<li><a href="chap4.html">4. Initialization</a>
<ul class="sectlevel2">
<li><a href="chap4.html#initialization-functionpointers">4.1. Command Function Pointers</a></li>
<li><a href="chap4.html#initialization-instances">4.2. Instances</a></li>
</ul>
</li>
<li><a href="chap5.html">5. Devices and Queues</a>
<ul class="sectlevel2">
<li><a href="chap5.html#devsandqueues-physical-device-enumeration">5.1. Physical Devices</a></li>
<li><a href="chap5.html#devsandqueues-devices">5.2. Devices</a></li>
<li><a href="chap5.html#devsandqueues-queues">5.3. Queues</a></li>
</ul>
</li>
<li><a href="chap6.html">6. Command Buffers</a>
<ul class="sectlevel2">
<li><a href="chap6.html#commandbuffers-lifecycle">6.1. Command Buffer Lifecycle</a></li>
<li><a href="chap6.html#commandbuffers-pools">6.2. Command Pools</a></li>
<li><a href="chap6.html#commandbuffer-allocation">6.3. Command Buffer Allocation and Management</a></li>
<li><a href="chap6.html#commandbuffers-recording">6.4. Command Buffer Recording</a></li>
<li><a href="chap6.html#commandbuffers-submission">6.5. Command Buffer Submission</a></li>
<li><a href="chap6.html#commandbuffers-submission-progress">6.6. Queue Forward Progress</a></li>
<li><a href="chap6.html#commandbuffers-secondary">6.7. Secondary Command Buffer Execution</a></li>
<li><a href="chap6.html#commandbuffers-devicemask">6.8. Command Buffer Device Mask</a></li>
</ul>
</li>
<li><a href="chap7.html">7. Synchronization and Cache Control</a>
<ul class="sectlevel2">
<li><a href="chap7.html#synchronization-dependencies">7.1. Execution and Memory Dependencies</a></li>
<li><a href="chap7.html#synchronization-implicit">7.2. Implicit Synchronization Guarantees</a></li>
<li><a href="chap7.html#synchronization-fences">7.3. Fences</a></li>
<li><a href="chap7.html#synchronization-semaphores">7.4. Semaphores</a></li>
<li><a href="chap7.html#synchronization-events">7.5. Events</a></li>
<li><a href="chap7.html#synchronization-pipeline-barriers">7.6. Pipeline Barriers</a></li>
<li><a href="chap7.html#synchronization-memory-barriers">7.7. Memory Barriers</a></li>
<li><a href="chap7.html#synchronization-wait-idle">7.8. Wait Idle Operations</a></li>
<li><a href="chap7.html#synchronization-submission-host-writes">7.9. Host Write Ordering Guarantees</a></li>
<li><a href="chap7.html#synchronization-device-group">7.10. Synchronization and Multiple Physical Devices</a></li>
<li><a href="chap7.html#calibrated-timestamps">7.11. Calibrated timestamps</a></li>
</ul>
</li>
<li><a href="chap8.html">8. Render Pass</a>
<ul class="sectlevel2">
<li><a href="chap8.html#renderpass-creation">8.1. Render Pass Creation</a></li>
<li><a href="chap8.html#renderpass-compatibility">8.2. Render Pass Compatibility</a></li>
<li><a href="chap8.html#_framebuffers">8.3. Framebuffers</a></li>
<li><a href="chap8.html#renderpass-commands">8.4. Render Pass Commands</a></li>
</ul>
</li>
<li><a href="chap9.html">9. Shaders</a>
<ul class="sectlevel2">
<li><a href="chap9.html#shader-modules">9.1. Shader Modules</a></li>
<li><a href="chap9.html#shaders-execution">9.2. Shader Execution</a></li>
<li><a href="chap9.html#shaders-execution-memory-ordering">9.3. Shader Memory Access Ordering</a></li>
<li><a href="chap9.html#shaders-inputs">9.4. Shader Inputs and Outputs</a></li>
<li><a href="chap9.html#shaders-task">9.5. Task Shaders</a></li>
<li><a href="chap9.html#shaders-mesh">9.6. Mesh Shaders</a></li>
<li><a href="chap9.html#shaders-vertex">9.7. Vertex Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-control">9.8. Tessellation Control Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-evaluation">9.9. Tessellation Evaluation Shaders</a></li>
<li><a href="chap9.html#shaders-geometry">9.10. Geometry Shaders</a></li>
<li><a href="chap9.html#shaders-fragment">9.11. Fragment Shaders</a></li>
<li><a href="chap9.html#shaders-compute">9.12. Compute Shaders</a></li>
<li><a href="chap9.html#shaders-ray-generation">9.13. Ray Generation Shaders</a></li>
<li><a href="chap9.html#shaders-intersection">9.14. Intersection Shaders</a></li>
<li><a href="chap9.html#shaders-any-hit">9.15. Any-Hit Shaders</a></li>
<li><a href="chap9.html#shaders-closest-hit">9.16. Closest Hit Shaders</a></li>
<li><a href="chap9.html#shaders-miss">9.17. Miss Shaders</a></li>
<li><a href="chap9.html#shaders-callable">9.18. Callable Shaders</a></li>
<li><a href="chap9.html#shaders-interpolation-decorations">9.19. Interpolation Decorations</a></li>
<li><a href="chap9.html#shaders-staticuse">9.20. Static Use</a></li>
<li><a href="chap9.html#shaders-scope">9.21. Scope</a></li>
<li><a href="chap9.html#shaders-group-operations">9.22. Group Operations</a></li>
<li><a href="chap9.html#shaders-quad-operations">9.23. Quad Group Operations</a></li>
<li><a href="chap9.html#shaders-derivative-operations">9.24. Derivative Operations</a></li>
<li><a href="chap9.html#shaders-helper-invocations">9.25. Helper Invocations</a></li>
<li><a href="chap9.html#_cooperative_matrices">9.26. Cooperative Matrices</a></li>
<li><a href="chap9.html#shaders-validation-cache">9.27. Validation Cache</a></li>
</ul>
</li>
<li><a href="chap10.html">10. Pipelines</a>
<ul class="sectlevel2">
<li><a href="chap10.html#pipelines-compute">10.1. Compute Pipelines</a></li>
<li><a href="chap10.html#pipelines-graphics">10.2. Graphics Pipelines</a></li>
<li><a href="chap10.html#pipelines-ray-tracing">10.3. Ray Tracing Pipelines</a></li>
<li><a href="chap10.html#pipelines-destruction">10.4. Pipeline Destruction</a></li>
<li><a href="chap10.html#pipelines-multiple">10.5. Multiple Pipeline Creation</a></li>
<li><a href="chap10.html#pipelines-pipeline-derivatives">10.6. Pipeline Derivatives</a></li>
<li><a href="chap10.html#pipelines-cache">10.7. Pipeline Cache</a></li>
<li><a href="chap10.html#pipelines-specialization-constants">10.8. Specialization Constants</a></li>
<li><a href="chap10.html#pipeline-library">10.9. Pipeline Libraries</a></li>
<li><a href="chap10.html#pipelines-binding">10.10. Pipeline Binding</a></li>
<li><a href="chap10.html#pipelines-dynamic-state">10.11. Dynamic State</a></li>
<li><a href="chap10.html#pipelines-shader-information">10.12. Pipeline Shader Information</a></li>
<li><a href="chap10.html#pipelines-compiler-control">10.13. Pipeline Compiler Control</a></li>
<li><a href="chap10.html#pipelines-creation-feedback">10.14. Pipeline Creation Feedback</a></li>
</ul>
</li>
<li><a href="chap11.html">11. Memory Allocation</a>
<ul class="sectlevel2">
<li><a href="chap11.html#memory-host">11.1. Host Memory</a></li>
<li><a href="chap11.html#memory-device">11.2. Device Memory</a></li>
</ul>
</li>
<li><a href="chap12.html">12. Resource Creation</a>
<ul class="sectlevel2">
<li><a href="chap12.html#resources-buffers">12.1. Buffers</a></li>
<li><a href="chap12.html#resources-buffer-views">12.2. Buffer Views</a></li>
<li><a href="chap12.html#resources-images">12.3. Images</a></li>
<li><a href="chap12.html#resources-image-layouts">12.4. Image Layouts</a></li>
<li><a href="chap12.html#resources-image-views">12.5. Image Views</a></li>
<li><a href="chap12.html#resources-acceleration-structures">12.6. Acceleration Structures</a></li>
<li><a href="chap12.html#resources-association">12.7. Resource Memory Association</a></li>
<li><a href="chap12.html#resources-sharing">12.8. Resource Sharing Mode</a></li>
<li><a href="chap12.html#resources-memory-aliasing">12.9. Memory Aliasing</a></li>
<li><a href="chap12.html#resources-buffer-collection-fuchsia">12.10. Buffer Collections</a></li>
</ul>
</li>
<li><a href="chap13.html">13. Samplers</a>
<ul class="sectlevel2">
<li><a href="chap13.html#samplers-YCbCr-conversion">13.1. Sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></li>
</ul>
</li>
<li><a href="chap14.html">14. Resource Descriptors</a>
<ul class="sectlevel2">
<li><a href="chap14.html#descriptorsets-types">14.1. Descriptor Types</a></li>
<li><a href="chap14.html#descriptorsets-sets">14.2. Descriptor Sets</a></li>
<li><a href="chap14.html#descriptorsets-physical-storage-buffer">14.3. Physical Storage Buffer Access</a></li>
</ul>
</li>
<li><a href="chap15.html">15. Shader Interfaces</a>
<ul class="sectlevel2">
<li><a href="chap15.html#interfaces-iointerfaces">15.1. Shader Input and Output Interfaces</a></li>
<li><a href="chap15.html#interfaces-vertexinput">15.2. Vertex Input Interface</a></li>
<li><a href="chap15.html#interfaces-fragmentoutput">15.3. Fragment Output Interface</a></li>
<li><a href="chap15.html#interfaces-inputattachment">15.4. Fragment Input Attachment Interface</a></li>
<li><a href="chap15.html#interfaces-raypipeline">15.5. Ray Tracing Pipeline Interface</a></li>
<li><a href="chap15.html#interfaces-resources">15.6. Shader Resource Interface</a></li>
<li><a href="chap15.html#interfaces-builtin-variables">15.7. Built-In Variables</a></li>
</ul>
</li>
<li><a href="chap16.html">16. Image Operations</a>
<ul class="sectlevel2">
<li><a href="chap16.html#_image_operations_overview">16.1. Image Operations Overview</a></li>
<li><a href="chap16.html#_conversion_formulas">16.2. Conversion Formulas</a></li>
<li><a href="chap16.html#_texel_input_operations">16.3. Texel Input Operations</a></li>
<li><a href="chap16.html#_texel_output_operations">16.4. Texel Output Operations</a></li>
<li><a href="chap16.html#textures-normalized-operations">16.5. Normalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#_unnormalized_texel_coordinate_operations">16.6. Unnormalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-integer-coordinate-operations">16.7. Integer Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-sample-operations">16.8. Image Sample Operations</a></li>
<li><a href="chap16.html#textures-footprint">16.9. Texel Footprint Evaluation</a></li>
<li><a href="chap16.html#textures-instructions">16.10. Image Operation Steps</a></li>
<li><a href="chap16.html#textures-queries">16.11. Image Query Instructions</a></li>
</ul>
</li>
<li><a href="chap17.html">17. Fragment Density Map Operations</a>
<ul class="sectlevel2">
<li><a href="chap17.html#_fragment_density_map_operations_overview">17.1. Fragment Density Map Operations Overview</a></li>
<li><a href="chap17.html#fragmentdensitymap-fetch-density-value">17.2. Fetch Density Value</a></li>
<li><a href="chap17.html#fragmentdensitymap-conversion-to-fragment-area">17.3. Fragment Area Conversion</a></li>
</ul>
</li>
<li><a href="chap18.html">18. Queries</a>
<ul class="sectlevel2">
<li><a href="chap18.html#queries-pools">18.1. Query Pools</a></li>
<li><a href="chap18.html#queries-operation">18.2. Query Operation</a></li>
<li><a href="chap18.html#queries-occlusion">18.3. Occlusion Queries</a></li>
<li><a href="chap18.html#queries-pipestats">18.4. Pipeline Statistics Queries</a></li>
<li><a href="chap18.html#queries-timestamps">18.5. Timestamp Queries</a></li>
<li><a href="chap18.html#queries-performance">18.6. Performance Queries</a></li>
<li><a href="chap18.html#queries-transform-feedback">18.7. Transform Feedback Queries</a></li>
<li><a href="chap18.html#queries-performance-intel">18.8. Intel performance queries</a></li>
<li><a href="chap18.html#queries-result-status-only">18.9. Result Status Queries</a></li>
<li><a href="chap18.html#queries-video-encode-bitstream-buffer-range">18.10. Video Encode Bitstream Buffer Range</a></li>
</ul>
</li>
<li><a href="chap19.html">19. Clear Commands</a>
<ul class="sectlevel2">
<li><a href="chap19.html#clears-outside">19.1. Clearing Images Outside A Render Pass Instance</a></li>
<li><a href="chap19.html#clears-inside">19.2. Clearing Images Inside A Render Pass Instance</a></li>
<li><a href="chap19.html#clears-values">19.3. Clear Values</a></li>
<li><a href="chap19.html#clears-filling-buffers">19.4. Filling Buffers</a></li>
<li><a href="chap19.html#clears-updating-buffers">19.5. Updating Buffers</a></li>
</ul>
</li>
<li><a href="chap20.html">20. Copy Commands</a>
<ul class="sectlevel2">
<li><a href="chap20.html#_common_operation">20.1. Common Operation</a></li>
<li><a href="chap20.html#copies-buffers">20.2. Copying Data Between Buffers</a></li>
<li><a href="chap20.html#copies-images">20.3. Copying Data Between Images</a></li>
<li><a href="chap20.html#copies-buffers-images">20.4. Copying Data Between Buffers and Images</a></li>
<li><a href="chap20.html#copies-imagescaling">20.5. Image Copies with Scaling</a></li>
<li><a href="chap20.html#copies-resolve">20.6. Resolving Multisample Images</a></li>
<li><a href="chap20.html#copies-buffer-markers">20.7. Buffer Markers</a></li>
</ul>
</li>
<li><a href="chap21.html">21. Drawing Commands</a>
<ul class="sectlevel2">
<li><a href="chap21.html#drawing-primitive-topologies">21.1. Primitive Topologies</a></li>
<li><a href="chap21.html#drawing-primitive-order">21.2. Primitive Order</a></li>
<li><a href="chap21.html#drawing-primitive-shading">21.3. Programmable Primitive Shading</a></li>
<li><a href="chap21.html#drawing-conditional-rendering">21.4. Conditional Rendering</a></li>
<li><a href="chap21.html#drawing-mesh-shading">21.5. Programmable Mesh Shading</a></li>
</ul>
</li>
<li><a href="chap22.html">22. Fixed-Function Vertex Processing</a>
<ul class="sectlevel2">
<li><a href="chap22.html#fxvertex-attrib">22.1. Vertex Attributes</a></li>
<li><a href="chap22.html#fxvertex-input">22.2. Vertex Input Description</a></li>
<li><a href="chap22.html#fxvertex-attribute_divisor">22.3. Vertex Attribute Divisor in Instanced Rendering</a></li>
<li><a href="chap22.html#fxvertex-input-address-calculation">22.4. Vertex Input Address Calculation</a></li>
</ul>
</li>
<li><a href="chap23.html">23. Tessellation</a>
<ul class="sectlevel2">
<li><a href="chap23.html#_tessellator">23.1. Tessellator</a></li>
<li><a href="chap23.html#_tessellator_patch_discard">23.2. Tessellator Patch Discard</a></li>
<li><a href="chap23.html#tessellation-tessellator-spacing">23.3. Tessellator Spacing</a></li>
<li><a href="chap23.html#tessellation-primitive-order">23.4. Tessellation Primitive Ordering</a></li>
<li><a href="chap23.html#tessellation-vertex-winding-order">23.5. Tessellator Vertex Winding Order</a></li>
<li><a href="chap23.html#tessellation-triangle-tessellation">23.6. Triangle Tessellation</a></li>
<li><a href="chap23.html#tessellation-quad-tessellation">23.7. Quad Tessellation</a></li>
<li><a href="chap23.html#tessellation-isoline-tessellation">23.8. Isoline Tessellation</a></li>
<li><a href="chap23.html#tessellation-point-mode">23.9. Tessellation Point Mode</a></li>
<li><a href="chap23.html#_tessellation_pipeline_state">23.10. Tessellation Pipeline State</a></li>
</ul>
</li>
<li><a href="chap24.html">24. Geometry Shading</a>
<ul class="sectlevel2">
<li><a href="chap24.html#geometry-input">24.1. Geometry Shader Input Primitives</a></li>
<li><a href="chap24.html#geometry-output">24.2. Geometry Shader Output Primitives</a></li>
<li><a href="chap24.html#geometry-invocations">24.3. Multiple Invocations of Geometry Shaders</a></li>
<li><a href="chap24.html#geometry-ordering">24.4. Geometry Shader Primitive Ordering</a></li>
<li><a href="chap24.html#geometry-passthrough">24.5. Geometry Shader Passthrough</a></li>
</ul>
</li>
<li><a href="chap25.html">25. Mesh Shading</a>
<ul class="sectlevel2">
<li><a href="chap25.html#mesh-task-input">25.1. Task Shader Input</a></li>
<li><a href="chap25.html#mesh-task-output">25.2. Task Shader Output</a></li>
<li><a href="chap25.html#mesh-generation">25.3. Mesh Generation</a></li>
<li><a href="chap25.html#mesh-input">25.4. Mesh Shader Input</a></li>
<li><a href="chap25.html#mesh-output">25.5. Mesh Shader Output Primitives</a></li>
<li><a href="chap25.html#mesh-output-perview">25.6. Mesh Shader Per-View Outputs</a></li>
<li><a href="chap25.html#mesh-ordering">25.7. Mesh Shader Primitive Ordering</a></li>
</ul>
</li>
<li><a href="chap26.html">26. Fixed-Function Vertex Post-Processing</a>
<ul class="sectlevel2">
<li><a href="chap26.html#vertexpostproc-transform-feedback">26.1. Transform Feedback</a></li>
<li><a href="chap26.html#vertexpostproc-viewport-swizzle">26.2. Viewport Swizzle</a></li>
<li><a href="chap26.html#vertexpostproc-flatshading">26.3. Flat Shading</a></li>
<li><a href="chap26.html#vertexpostproc-clipping">26.4. Primitive Clipping</a></li>
<li><a href="chap26.html#vertexpostproc-clipping-shader-outputs">26.5. Clipping Shader Outputs</a></li>
<li><a href="chap26.html#vertexpostproc-viewportwscaling">26.6. Controlling Viewport W Scaling</a></li>
<li><a href="chap26.html#vertexpostproc-coord-transform">26.7. Coordinate Transformations</a></li>
<li><a href="chap26.html#vertexpostproc-renderpass-transform">26.8. Render Pass Transform</a></li>
<li><a href="chap26.html#vertexpostproc-viewport">26.9. Controlling the Viewport</a></li>
</ul>
</li>
<li><a href="chap27.html">27. Rasterization</a>
<ul class="sectlevel2">
<li><a href="chap27.html#primsrast-discard">27.1. Discarding Primitives Before Rasterization</a></li>
<li><a href="chap27.html#primsrast-stream">27.2. Controlling the Vertex Stream Used for Rasterization</a></li>
<li><a href="chap27.html#primsrast-order">27.3. Rasterization Order</a></li>
<li><a href="chap27.html#primsrast-multisampling">27.4. Multisampling</a></li>
<li><a href="chap27.html#primsrast-samplelocations">27.5. Custom Sample Locations</a></li>
<li><a href="chap27.html#primsrast-fragment-shading-rate">27.6. Fragment Shading Rates</a></li>
<li><a href="chap27.html#primsrast-shading-rate-image">27.7. Shading Rate Image</a></li>
<li><a href="chap27.html#primsrast-sampleshading">27.8. Sample Shading</a></li>
<li><a href="chap27.html#primsrast-barycentric">27.9. Barycentric Interpolation</a></li>
<li><a href="chap27.html#primsrast-points">27.10. Points</a></li>
<li><a href="chap27.html#primsrast-lines">27.11. Line Segments</a></li>
<li><a href="chap27.html#primsrast-polygons">27.12. Polygons</a></li>
</ul>
</li>
<li><a href="chap28.html">28. Fragment Operations</a>
<ul class="sectlevel2">
<li><a href="chap28.html#fragops-discard-rectangles">28.1. Discard Rectangles Test</a></li>
<li><a href="chap28.html#fragops-scissor">28.2. Scissor Test</a></li>
<li><a href="chap28.html#fragops-exclusive-scissor">28.3. Exclusive Scissor Test</a></li>
<li><a href="chap28.html#fragops-samplemask">28.4. Sample Mask Test</a></li>
<li><a href="chap28.html#fragops-shader">28.5. Fragment Shading</a></li>
<li><a href="chap28.html#fragops-covg">28.6. Multisample Coverage</a></li>
<li><a href="chap28.html#fragops-ds-state">28.7. Depth and Stencil Operations</a></li>
<li><a href="chap28.html#fragops-dbt">28.8. Depth Bounds Test</a></li>
<li><a href="chap28.html#fragops-stencil">28.9. Stencil Test</a></li>
<li><a href="chap28.html#fragops-depth">28.10. Depth Test</a></li>
<li><a href="chap28.html#fragops-rep-frag-test">28.11. Representative Fragment Test</a></li>
<li><a href="chap28.html#fragops-samplecount">28.12. Sample Counting</a></li>
<li><a href="chap28.html#fragops-coverage-to-color">28.13. Fragment Coverage To Color</a></li>
<li><a href="chap28.html#fragops-coverage-reduction">28.14. Coverage Reduction</a></li>
</ul>
</li>
<li><a href="chap29.html">29. The Framebuffer</a>
<ul class="sectlevel2">
<li><a href="chap29.html#framebuffer-blending">29.1. Blending</a></li>
<li><a href="chap29.html#framebuffer-logicop">29.2. Logical Operations</a></li>
<li><a href="chap29.html#framebuffer-color-write-mask">29.3. Color Write Mask</a></li>
<li><a href="chap29.html#framebuffer-color-write-enable">29.4. Color Write Enable</a></li>
</ul>
</li>
<li><a href="chap30.html">30. Dispatching Commands</a></li>
<li><a href="chap31.html">31. Device-Generated Commands</a>
<ul class="sectlevel2">
<li><a href="chap31.html#indirectmdslayout">31.1. Indirect Commands Layout</a></li>
<li><a href="chap31.html#_indirect_commands_generation_and_execution">31.2. Indirect Commands Generation And Execution</a></li>
</ul>
</li>
<li class="current"><a href="chap32.html">32. Sparse Resources</a>
<ul class="sectlevel2">
<li class="current"><a href="chap32.html#sparsememory-sparseresourcefeatures">32.1. Sparse Resource Features</a></li>
<li class="current"><a href="chap32.html#sparsememory-fully-resident">32.2. Sparse Buffers and Fully-Resident Images</a></li>
<li class="current"><a href="chap32.html#sparsememory-partially-resident-buffers">32.3. Sparse Partially-Resident Buffers</a></li>
<li class="current"><a href="chap32.html#sparsememory-partially-resident-images">32.4. Sparse Partially-Resident Images</a></li>
<li class="current"><a href="chap32.html#sparsememory-sparse-memory-aliasing">32.5. Sparse Memory Aliasing</a></li>
<li class="current"><a href="chap32.html#_sparse_resource_implementation_guidelines_informative">32.6. Sparse Resource Implementation Guidelines (Informative)</a></li>
<li class="current"><a href="chap32.html#sparsememory-resourceapi">32.7. Sparse Resource API</a></li>
</ul>
</li>
<li><a href="chap33.html">33. Window System Integration (WSI)</a>
<ul class="sectlevel2">
<li><a href="chap33.html#_wsi_platform">33.1. WSI Platform</a></li>
<li><a href="chap33.html#_wsi_surface">33.2. WSI Surface</a></li>
<li><a href="chap33.html#display">33.3. Presenting Directly to Display Devices</a></li>
<li><a href="chap33.html#_querying_for_wsi_support">33.4. Querying for WSI Support</a></li>
<li><a href="chap33.html#_surface_queries">33.5. Surface Queries</a></li>
<li><a href="chap33.html#_full_screen_exclusive_control">33.6. Full Screen Exclusive Control</a></li>
<li><a href="chap33.html#_device_group_queries">33.7. Device Group Queries</a></li>
<li><a href="chap33.html#_display_timing_queries">33.8. Display Timing Queries</a></li>
<li><a href="chap33.html#present-wait">33.9. Present Wait</a></li>
<li><a href="chap33.html#_wsi_swapchain">33.10. WSI Swapchain</a></li>
<li><a href="chap33.html#_hdr_metadata">33.11. Hdr Metadata</a></li>
</ul>
</li>
<li><a href="chap34.html">34. Deferred Host Operations</a>
<ul class="sectlevel2">
<li><a href="chap34.html#deferred-host-operations-requesting">34.1. Requesting Deferral</a></li>
<li><a href="chap34.html#_deferred_host_operations_api">34.2. Deferred Host Operations API</a></li>
</ul>
</li>
<li><a href="chap35.html">35. Private Data</a></li>
<li><a href="chap36.html">36. Acceleration Structures</a>
<ul class="sectlevel2">
<li><a href="chap36.html#acceleration-structure-def">36.1. Acceleration Structures</a></li>
<li><a href="chap36.html#host-acceleration-structure">36.2. Host Acceleration Structure Operations</a></li>
</ul>
</li>
<li><a href="chap37.html">37. Ray Traversal</a>
<ul class="sectlevel2">
<li><a href="chap37.html#ray-intersection-candidate-determination">37.1. Ray Intersection Candidate Determination</a></li>
<li><a href="chap37.html#ray-intersection-culling">37.2. Ray Intersection Culling</a></li>
<li><a href="chap37.html#ray-intersection-confirmation">37.3. Ray Intersection Confirmation</a></li>
<li><a href="chap37.html#ray-closest-hit-determination">37.4. Ray Closest Hit Determination</a></li>
<li><a href="chap37.html#ray-result-determination">37.5. Ray Result Determination</a></li>
</ul>
</li>
<li><a href="chap38.html">38. Ray Tracing</a>
<ul class="sectlevel2">
<li><a href="chap38.html#ray-tracing-shader-call">38.1. Shader Call Instructions</a></li>
<li><a href="chap38.html#ray-tracing-commands">38.2. Ray Tracing Commands</a></li>
<li><a href="chap38.html#shader-binding-table">38.3. Shader Binding Table</a></li>
<li><a href="chap38.html#ray-tracing-pipeline-stack">38.4. Ray Tracing Pipeline Stack</a></li>
</ul>
</li>
<li><a href="chap39.html">39. Video Decode and Encode Operations</a>
<ul class="sectlevel2">
<li><a href="chap39.html#_technical_terminology_and_semantics">39.1. Technical Terminology and Semantics</a></li>
<li><a href="chap39.html#_introduction">39.2. Introduction</a></li>
<li><a href="chap39.html#video-physical-device-capabilities">39.3. Video Physical Device Capabilities</a></li>
<li><a href="chap39.html#video-session-objects">39.4. Video Session Objects</a></li>
<li><a href="chap39.html#video-decode-operations">39.5. Video Decode Operations</a></li>
<li><a href="chap39.html#decode-h264">39.6. Video Decode of AVC (ITU-T H.264)</a></li>
<li><a href="chap39.html#decode-h265">39.7. Video Decode of HEVC (ITU-T H.265)</a></li>
<li><a href="chap39.html#video-encode-operations">39.8. Video Encode Operations</a></li>
<li><a href="chap39.html#encode-h264">39.9. Encode H.264</a></li>
<li><a href="chap39.html#encode-h265">39.10. Encode H.265</a></li>
</ul>
</li>
<li><a href="chap40.html">40. Extending Vulkan</a>
<ul class="sectlevel2">
<li><a href="chap40.html#extendingvulkan-instanceanddevicefunctionality">40.1. Instance and Device Functionality</a></li>
<li><a href="chap40.html#extendingvulkan-coreversions">40.2. Core Versions</a></li>
<li><a href="chap40.html#extendingvulkan-layers">40.3. Layers</a></li>
<li><a href="chap40.html#extendingvulkan-extensions">40.4. Extensions</a></li>
<li><a href="chap40.html#extendingvulkan-extensions-extensiondependencies">40.5. Extension Dependencies</a></li>
<li><a href="chap40.html#_compatibility_guarantees_informative">40.6. Compatibility Guarantees (Informative)</a></li>
</ul>
</li>
<li><a href="chap41.html">41. Features</a>
<ul class="sectlevel2">
<li><a href="chap41.html#features-requirements">41.1. Feature Requirements</a></li>
<li><a href="chap41.html#profile-features">41.2. Profile Features</a></li>
</ul>
</li>
<li><a href="chap42.html">42. Limits</a>
<ul class="sectlevel2">
<li><a href="chap42.html#limits-minmax">42.1. Limit Requirements</a></li>
<li><a href="chap42.html#limits-multisample">42.2. Additional Multisampling Capabilities</a></li>
<li><a href="chap42.html#profile-limits">42.3. Profile Limits</a></li>
</ul>
</li>
<li><a href="chap43.html">43. Formats</a>
<ul class="sectlevel2">
<li><a href="chap43.html#formats-definition">43.1. Format Definition</a></li>
<li><a href="chap43.html#formats-properties">43.2. Format Properties</a></li>
<li><a href="chap43.html#features-required-format-support">43.3. Required Format Support</a></li>
</ul>
</li>
<li><a href="chap44.html">44. Additional Capabilities</a>
<ul class="sectlevel2">
<li><a href="chap44.html#capabilities-image">44.1. Additional Image Capabilities</a></li>
<li><a href="chap44.html#capabilities-buffer">44.2. Additional Buffer Capabilities</a></li>
<li><a href="chap44.html#capabilities-semaphore">44.3. Optional Semaphore Capabilities</a></li>
<li><a href="chap44.html#capabilities-fence">44.4. Optional Fence Capabilities</a></li>
<li><a href="chap44.html#features-timestamp-calibration">44.5. Timestamp Calibration Capabilities</a></li>
</ul>
</li>
<li><a href="chap45.html">45. Debugging</a>
<ul class="sectlevel2">
<li><a href="chap45.html#debugging-debug-utils">45.1. Debug Utilities</a></li>
<li><a href="chap45.html#debugging-debug-markers">45.2. Debug Markers</a></li>
<li><a href="chap45.html#debugging-debug-report-callbacks">45.3. Debug Report Callbacks</a></li>
<li><a href="chap45.html#_device_loss_debugging">45.4. Device Loss Debugging</a></li>
<li><a href="chap45.html#debugging-tooling-info">45.5. Active Tooling Information</a></li>
</ul>
</li>
<li><a href="chap46.html">Appendix A: Vulkan Environment for SPIR-V</a>
<ul class="sectlevel2">
<li><a href="chap46.html#_versions_and_formats">Versions and Formats</a></li>
<li><a href="chap46.html#spirvenv-capabilities">Capabilities</a></li>
<li><a href="chap46.html#spirvenv-module-validation">Validation Rules within a Module</a></li>
<li><a href="chap46.html#spirvenv-precision-operation">Precision and Operation of SPIR-V Instructions</a></li>
<li><a href="chap46.html#spirvenv-image-signedness">Signedness of SPIR-V Image Accesses</a></li>
<li><a href="chap46.html#spirvenv-format-type-matching">Image Format and Type Matching</a></li>
<li><a href="chap46.html#spirvenv-image-formats">Compatibility Between SPIR-V Image Formats And Vulkan Formats</a></li>
</ul>
</li>
<li><a href="chap47.html">Appendix B: Memory Model</a>
<ul class="sectlevel2">
<li><a href="chap47.html#memory-model-agent">Agent</a></li>
<li><a href="chap47.html#memory-model-memory-location">Memory Location</a></li>
<li><a href="chap47.html#memory-model-allocation">Allocation</a></li>
<li><a href="chap47.html#memory-model-memory-operation">Memory Operation</a></li>
<li><a href="chap47.html#memory-model-references">Reference</a></li>
<li><a href="chap47.html#memory-model-program-order">Program-Order</a></li>
<li><a href="chap47.html#shader-call-related">Shader Call Related</a></li>
<li><a href="chap47.html#shader-call-order">Shader Call Order</a></li>
<li><a href="chap47.html#memory-model-scope">Scope</a></li>
<li><a href="chap47.html#memory-model-atomic-operation">Atomic Operation</a></li>
<li><a href="chap47.html#memory-model-scoped-modification-order">Scoped Modification Order</a></li>
<li><a href="chap47.html#memory-model-memory-semantics">Memory Semantics</a></li>
<li><a href="chap47.html#memory-model-release-sequence">Release Sequence</a></li>
<li><a href="chap47.html#memory-model-synchronizes-with">Synchronizes-With</a></li>
<li><a href="chap47.html#memory-model-system-synchronizes-with">System-Synchronizes-With</a></li>
<li><a href="chap47.html#memory-model-non-private">Private vs. Non-Private</a></li>
<li><a href="chap47.html#memory-model-inter-thread-happens-before">Inter-Thread-Happens-Before</a></li>
<li><a href="chap47.html#memory-model-happens-before">Happens-Before</a></li>
<li><a href="chap47.html#memory-model-availability-visibility">Availability and Visibility</a></li>
<li><a href="chap47.html#memory-model-vulkan-availability-visibility">Availability, Visibility, and Domain Operations</a></li>
<li><a href="chap47.html#memory-model-availability-visibility-semantics">Availability and Visibility Semantics</a></li>
<li><a href="chap47.html#memory-model-instruction-av-vis">Per-Instruction Availability and Visibility Semantics</a></li>
<li><a href="chap47.html#memory-model-location-ordered">Location-Ordered</a></li>
<li><a href="chap47.html#memory-model-access-data-race">Data Race</a></li>
<li><a href="chap47.html#memory-model-visible-to">Visible-To</a></li>
<li><a href="chap47.html#memory-model-acyclicity">Acyclicity</a></li>
<li><a href="chap47.html#memory-model-shader-io">Shader I/O</a></li>
<li><a href="chap47.html#memory-model-deallocation">Deallocation</a></li>
<li><a href="chap47.html#memory-model-informative-descriptions">Descriptions (Informative)</a></li>
<li><a href="chap47.html#memory-model-tessellation-output-ordering">Tessellation Output Ordering</a></li>
<li><a href="chap47.html#memory-model-cooperative-matrix">Cooperative Matrix Memory Access</a></li>
</ul>
</li>
<li><a href="chap48.html">Appendix C: Compressed Image Formats</a>
<ul class="sectlevel2">
<li><a href="chap48.html#appendix-compressedtex-bc">Block-Compressed Image Formats</a></li>
<li><a href="chap48.html#appendix-compressedtex-etc2">ETC Compressed Image Formats</a></li>
<li><a href="chap48.html#appendix-compressedtex-astc">ASTC Compressed Image Formats</a></li>
<li><a href="chap48.html#appendix-compressedtex-pvrtc">PVRTC Compressed Image Formats</a></li>
</ul>
</li>
<li><a href="chap49.html">Appendix D: Core Revisions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap49.html#versions-1.3">Version 1.3</a></li>
<li><a href="chap49.html#versions-1.2">Version 1.2</a></li>
<li><a href="chap49.html#versions-1.1">Version 1.1</a></li>
<li><a href="chap49.html#versions-1.0">Version 1.0</a></li>
</ul>
</li>
<li><a href="chap50.html">Appendix E: Layers &amp; Extensions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap50.html#extension-appendices-list">List of Current Extensions</a></li>
<li><a href="chap50.html#provisional-extension-appendices-list">List of Provisional Extensions</a></li>
<li><a href="chap50.html#deprecated-extension-appendices-list">List of Deprecated Extensions</a></li>
</ul>
</li>
<li><a href="chap51.html">Appendix F: Vulkan Roadmap Milestones</a>
<ul class="sectlevel2">
<li><a href="chap51.html#roadmap-2022">Roadmap 2022</a></li>
</ul>
</li>
<li><a href="chap52.html">Appendix G: API Boilerplate</a>
<ul class="sectlevel2">
<li><a href="chap52.html#boilerplate-headers">Vulkan Header Files</a></li>
<li><a href="chap52.html#boilerplate-wsi-header">Window System-Specific Header Control (Informative)</a></li>
<li><a href="chap52.html#boilerplate-provisional-header">Provisional Extension Header Control (Informative)</a></li>
</ul>
</li>
<li><a href="chap53.html">Appendix H: Invariance</a>
<ul class="sectlevel2">
<li><a href="chap53.html#_repeatability">Repeatability</a></li>
<li><a href="chap53.html#_multi_pass_algorithms">Multi-pass Algorithms</a></li>
<li><a href="chap53.html#_invariance_rules">Invariance Rules</a></li>
<li><a href="chap53.html#_tessellation_invariance">Tessellation Invariance</a></li>
</ul>
</li>
<li><a href="chap54.html">Appendix I: Lexicon</a>
<ul class="sectlevel2">
<li><a href="chap54.html#glossary">Glossary</a></li>
<li><a href="chap54.html#lexicon-common-abbreviations">Common Abbreviations</a></li>
<li><a href="chap54.html#lexicon-prefixes">Prefixes</a></li>
</ul>
</li>
<li><a href="chap55.html">Appendix J: Credits (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap55.html#_working_group_contributors_to_vulkan">Working Group Contributors to Vulkan</a></li>
<li><a href="chap55.html#_other_credits">Other Credits</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="loading_msg" class="hidden" hidden=""><p>Loading… please wait.</p></div>
<!--ChunkedSearchboxMarker-->
<div class="searchbox"><label for="searchbox">Search: </label><input id="searchbox" type="text" disabled="disabled" value="Loading Search Data"><div id="resultsdiv"><ol id="results"></ol></div></div>
<div id="content" class="loadable"><div class="sect1">
<h2 id="sparsememory"><a class="anchor" href="chap32.html"></a>32. Sparse Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As documented in <a href="chap12.html#resources-association">Resource Memory Association</a>,
<code>VkBuffer</code> and <code>VkImage</code> resources in Vulkan <strong class="purple">must</strong> be bound
completely and contiguously to a single <code>VkDeviceMemory</code> object.
This binding <strong class="purple">must</strong> be done before the resource is used, and the binding is
immutable for the lifetime of the resource.</p>
</div>
<div class="paragraph">
<p><em>Sparse resources</em> relax these restrictions and provide these additional
features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sparse resources <strong class="purple">can</strong> be bound non-contiguously to one or more
<code>VkDeviceMemory</code> allocations.</p>
</li>
<li>
<p>Sparse resources <strong class="purple">can</strong> be re-bound to different memory allocations over
the lifetime of the resource.</p>
</li>
<li>
<p>Sparse resources <strong class="purple">can</strong> have descriptors generated and used orthogonally
with memory binding commands.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="sparsememory-sparseresourcefeatures"><a class="anchor" href="chap32.html#sparsememory-sparseresourcefeatures"></a>32.1. Sparse Resource Features</h3>
<div class="paragraph">
<p>Sparse resources have several features that <strong class="purple">must</strong> be enabled explicitly at
resource creation time.
The features are enabled by including bits in the <code>flags</code> parameter of
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> or <a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a>.
Each feature also has one or more corresponding feature enables specified in
<a href="chap41.html#VkPhysicalDeviceFeatures">VkPhysicalDeviceFeatures</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="chap41.html#features-sparseBinding">Sparse binding</a> is the base feature, and
provides the following capabilities:</p>
<div class="ulist">
<ul>
<li>
<p>Resources <strong class="purple">can</strong> be bound at some defined (sparse block) granularity.</p>
</li>
<li>
<p>The entire resource <strong class="purple">must</strong> be bound to memory before use regardless of
regions actually accessed.</p>
</li>
<li>
<p>No specific mapping of image region to memory offset is defined, i.e.
the location that each texel corresponds to in memory is
implementation-dependent.</p>
</li>
<li>
<p>Sparse buffers have a well-defined mapping of buffer range to memory
range, where an offset into a range of the buffer that is bound to a
single contiguous range of memory corresponds to an identical offset
within that range of memory.</p>
</li>
<li>
<p>Requested via the <code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> and
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code> bits.</p>
</li>
<li>
<p>A sparse image created using <code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>
(but not <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>) supports all
formats that non-sparse usage supports, and supports both
<code>VK_IMAGE_TILING_OPTIMAL</code> and <code>VK_IMAGE_TILING_LINEAR</code> tiling.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Sparse Residency</em> builds on (and requires) the <code>sparseBinding</code>
feature.
It includes the following capabilities:</p>
<div class="ulist">
<ul>
<li>
<p>Resources do not have to be completely bound to memory before use on
the device.</p>
</li>
<li>
<p>Images have a prescribed sparse image block layout, allowing specific
rectangular regions of the image to be bound to specific offsets in
memory allocations.</p>
</li>
<li>
<p>Consistency of access to unbound regions of the resource is defined by
the absence or presence of
<code>VkPhysicalDeviceSparseProperties</code>::<code>residencyNonResidentStrict</code>.
If this property is present, accesses to unbound regions of the
resource are well defined and behave as if the data bound is populated
with all zeros; writes are discarded.
When this property is absent, accesses are considered safe, but reads
will return undefined values.</p>
</li>
<li>
<p>Requested via the <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> and
<code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code> bits.</p>
</li>
<li>
<p><a id="features-sparseResidency"></a> Sparse residency support is advertised on
a finer grain via the following features:</p>
<div class="ulist">
<ul>
<li>
<p><a href="chap41.html#features-sparseResidencyBuffer"><code>sparseResidencyBuffer</code></a>:
Support for creating <code>VkBuffer</code> objects with the
<code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code>.</p>
</li>
<li>
<p><a href="chap41.html#features-sparseResidencyImage2D"><code>sparseResidencyImage2D</code></a>:
Support for creating 2D single-sampled <code>VkImage</code> objects with
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>.</p>
</li>
<li>
<p><a href="chap41.html#features-sparseResidencyImage3D"><code>sparseResidencyImage3D</code></a>:
Support for creating 3D <code>VkImage</code> objects with
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>.</p>
</li>
<li>
<p><a href="chap41.html#features-sparseResidency2Samples"><code>sparseResidency2Samples</code></a>:
Support for creating 2D <code>VkImage</code> objects with 2 samples and
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>.</p>
</li>
<li>
<p><a href="chap41.html#features-sparseResidency4Samples"><code>sparseResidency4Samples</code></a>:
Support for creating 2D <code>VkImage</code> objects with 4 samples and
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>.</p>
</li>
<li>
<p><a href="chap41.html#features-sparseResidency8Samples"><code>sparseResidency8Samples</code></a>:
Support for creating 2D <code>VkImage</code> objects with 8 samples and
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>.</p>
</li>
<li>
<p><a href="chap41.html#features-sparseResidency16Samples"><code>sparseResidency16Samples</code></a>:
Support for creating 2D <code>VkImage</code> objects with 16 samples and
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Implementations supporting <code>sparseResidencyImage2D</code> are only <strong class="purple">required</strong>
to support sparse 2D, single-sampled images.
Support for sparse 3D and MSAA images is <strong class="purple">optional</strong> and <strong class="purple">can</strong> be enabled via
<code>sparseResidencyImage3D</code>, <code>sparseResidency2Samples</code>,
<code>sparseResidency4Samples</code>, <code>sparseResidency8Samples</code>, and
<code>sparseResidency16Samples</code>.</p>
</div>
</li>
<li>
<p>A sparse image created using <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>
supports all non-compressed color formats with power-of-two element
size that non-sparse usage supports.
Additional formats <strong class="purple">may</strong> also be supported and <strong class="purple">can</strong> be queried via
<a href="chap32.html#vkGetPhysicalDeviceSparseImageFormatProperties">vkGetPhysicalDeviceSparseImageFormatProperties</a>.
<code>VK_IMAGE_TILING_LINEAR</code> tiling is not supported.</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="chap41.html#features-sparseResidencyAliased">Sparse aliasing</a> provides the
following capability that <strong class="purple">can</strong> be enabled per resource:</p>
<div class="paragraph">
<p>Allows physical memory ranges to be shared between multiple locations in the
same sparse resource or between multiple sparse resources, with each binding
of a memory location observing a consistent interpretation of the memory
contents.</p>
</div>
<div class="paragraph">
<p>See <a href="chap32.html#sparsememory-sparse-memory-aliasing">Sparse Memory Aliasing</a> for more
information.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="sparsememory-fully-resident"><a class="anchor" href="chap32.html#sparsememory-fully-resident"></a>32.2. Sparse Buffers and Fully-Resident Images</h3>
<div class="paragraph">
<p>Both <code>VkBuffer</code> and <code>VkImage</code> objects created with the
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> or
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code> bits <strong class="purple">can</strong> be thought of as a
linear region of address space.
In the <code>VkImage</code> case if <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> is
not used, this linear region is entirely opaque, meaning that there is no
application-visible mapping between texel location and memory offset.</p>
</div>
<div class="paragraph">
<p>Unless <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> or
<code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code> are also used, the entire
resource <strong class="purple">must</strong> be bound to one or more <code>VkDeviceMemory</code> objects before
use.</p>
</div>
<div class="sect3">
<h4 id="_sparse_buffer_and_fully_resident_image_block_size"><a class="anchor" href="chap32.html#_sparse_buffer_and_fully_resident_image_block_size"></a>32.2.1. Sparse Buffer and Fully-Resident Image Block Size</h4>
<div class="paragraph">
<p>The sparse block size in bytes for sparse buffers and fully-resident images
is reported as <code>VkMemoryRequirements</code>::<code>alignment</code>.
<code>alignment</code> represents both the memory alignment requirement and the
binding granularity (in bytes) for sparse resources.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sparsememory-partially-resident-buffers"><a class="anchor" href="chap32.html#sparsememory-partially-resident-buffers"></a>32.3. Sparse Partially-Resident Buffers</h3>
<div class="paragraph">
<p><code>VkBuffer</code> objects created with the
<code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code> bit allow the buffer to be made
only partially resident.
Partially resident <code>VkBuffer</code> objects are allocated and bound
identically to <code>VkBuffer</code> objects using only the
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code> feature.
The only difference is the ability for some regions of the buffer to be
unbound during device use.</p>
</div>
</div>
<div class="sect2">
<h3 id="sparsememory-partially-resident-images"><a class="anchor" href="chap32.html#sparsememory-partially-resident-images"></a>32.4. Sparse Partially-Resident Images</h3>
<div class="paragraph">
<p><code>VkImage</code> objects created with the
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> bit allow specific rectangular
regions of the image called sparse image blocks to be bound to specific
ranges of memory.
This allows the application to manage residency at either image subresource
or sparse image block granularity.
Each image subresource (outside of the <a href="chap32.html#sparsememory-miptail">mip tail</a>)
starts on a sparse block boundary and has dimensions that are integer
multiples of the corresponding dimensions of the sparse image block.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Applications <strong class="purple">can</strong> use these types of images to control LOD based on total
memory consumption.
If memory pressure becomes an issue the application <strong class="purple">can</strong> unbind and disable
specific mipmap levels of images without having to recreate resources or
modify texel data of unaffected levels.</p>
</div>
<div class="paragraph">
<p>The application <strong class="purple">can</strong> also use this functionality to access subregions of the
image in a “megatexture” fashion.
The application <strong class="purple">can</strong> create a large image and only populate the region of
the image that is currently being used in the scene.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="sparsememory-accessing-unbound"><a class="anchor" href="chap32.html#sparsememory-accessing-unbound"></a>32.4.1. Accessing Unbound Regions</h4>
<div class="paragraph">
<p>The following member of <code>VkPhysicalDeviceSparseProperties</code> affects how
data in unbound regions of sparse resources are handled by the
implementation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>residencyNonResidentStrict</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If this property is not present, reads of unbound regions of the image will
return undefined values.
Both reads and writes are still considered <em>safe</em> and will not affect other
resources or populated regions of the image.</p>
</div>
<div class="paragraph">
<p>If this property is present, all reads of unbound regions of the image will
behave as if the region was bound to memory populated with all zeros; writes
will be discarded.</p>
</div>
<div class="paragraph">
<p>Formatted accesses to unbound memory <strong class="purple">may</strong> still alter some component values
in the natural way for those accesses, e.g. substituting a value of one for
alpha in formats that do not have an alpha component.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Example: Reading the alpha component of an unbacked <code>VK_FORMAT_R8_UNORM</code>
image will return a value of <span class="eq">1.0f</span>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>See <a href="chap5.html#devsandqueues-physical-device-enumeration">Physical Device
Enumeration</a> for instructions for retrieving physical device properties.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Implementor’s Note</div>
<div class="paragraph">
<p>For implementations that <strong class="purple">cannot</strong> natively handle access to unbound regions
of a resource, the implementation <strong class="purple">may</strong> allocate and bind memory to the
unbound regions.
Reads and writes to unbound regions will access the implementation-managed
memory instead.</p>
</div>
<div class="paragraph">
<p>Given that the values resulting from reads of unbound regions are undefined
in this scenario, implementations <strong class="purple">may</strong> use the same physical memory for all
unbound regions of multiple resources within the same process.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="sparsememory-miptail"><a class="anchor" href="chap32.html#sparsememory-miptail"></a>32.4.2. Mip Tail Regions</h4>
<div class="paragraph">
<p>Sparse images created using <code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>
(without also using <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>) have no
specific mapping of image region or image subresource to memory offset
defined, so the entire image <strong class="purple">can</strong> be thought of as a linear opaque address
region.
However, images created with <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> do
have a prescribed sparse image block layout, and hence each image
subresource <strong class="purple">must</strong> start on a sparse block boundary.
Within each array layer, the set of mip levels that have a smaller size than
the sparse block size in bytes are grouped together into a <em>mip tail
region</em>.</p>
</div>
<div class="paragraph">
<p>If the <code>VK_SPARSE_IMAGE_FORMAT_ALIGNED_MIP_SIZE_BIT</code> flag is present in
the <code>flags</code> member of <code>VkSparseImageFormatProperties</code>, for the
image’s <code>format</code>, then any mip level which has dimensions that are not
integer multiples of the corresponding dimensions of the sparse image block,
and all subsequent mip levels, are also included in the mip tail region.</p>
</div>
<div class="paragraph">
<p>The following member of <code>VkPhysicalDeviceSparseProperties</code> <strong class="purple">may</strong> affect
how the implementation places mip levels in the mip tail region:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>residencyAlignedMipSize</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each mip tail region is bound to memory as an opaque region (i.e. <strong class="purple">must</strong> be
bound using a <a href="chap32.html#VkSparseImageOpaqueMemoryBindInfo">VkSparseImageOpaqueMemoryBindInfo</a> structure) and <strong class="purple">may</strong> be
of a size greater than or equal to the sparse block size in bytes.
This size is guaranteed to be an integer multiple of the sparse block size
in bytes.</p>
</div>
<div class="paragraph">
<p>An implementation <strong class="purple">may</strong> choose to allow each array-layer’s mip tail region to
be bound to memory independently or require that all array-layer’s mip tail
regions be treated as one.
This is dictated by <code>VK_SPARSE_IMAGE_FORMAT_SINGLE_MIPTAIL_BIT</code> in
<code>VkSparseImageMemoryRequirements</code>::<code>flags</code>.</p>
</div>
<div class="paragraph">
<p>The following diagrams depict how
<code>VK_SPARSE_IMAGE_FORMAT_ALIGNED_MIP_SIZE_BIT</code> and
<code>VK_SPARSE_IMAGE_FORMAT_SINGLE_MIPTAIL_BIT</code> alter memory usage and
requirements.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="213.37727mm" height="140.93106mm" viewBox="0 0 213.37728 140.93106" version="1.1" id="svg5072" inkscape:version="0.92.2 (5c3e80d, 2017-08-06)" sodipodi:docname="sparseimage.svg">
  <defs id="defs5066"></defs>
  <sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1" inkscape:cx="312.27341" inkscape:cy="211.10847" inkscape:document-units="mm" inkscape:current-layer="g1301" showgrid="true" inkscape:measure-start="50,1040" inkscape:measure-end="50,900" inkscape:snap-object-midpoints="true" inkscape:snap-grids="true" inkscape:snap-text-baseline="true" fit-margin-left="1" fit-margin-top="1" fit-margin-right="1" fit-margin-bottom="1" inkscape:window-width="1680" inkscape:window-height="987" inkscape:window-x="1672" inkscape:window-y="-8" inkscape:window-maximized="0">
    <inkscape:grid type="xygrid" id="grid5617" originx="5.8699871" originy="-141.02337"></inkscape:grid>
  </sodipodi:namedview>
  <metadata id="metadata5069">
    <rdf:rdf>
      <cc:work rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc:type>
        <dc:title></dc:title>
      </cc:work>
    </rdf:rdf>
  </metadata>
  <g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(5.8699864,-15.045569)">
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="39.6875" y="19.1875" id="text7094"><tspan sodipodi:role="line" id="tspan7092" x="39.6875" y="19.1875" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332">Array Layer 0</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="97.895836" y="19.187496" id="text7094-5"><tspan sodipodi:role="line" id="tspan7092-3" x="97.895836" y="19.187496" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332">Array Layer 1</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="156.10417" y="19.187496" id="text7094-6"><tspan sodipodi:role="line" id="tspan7092-0" x="156.10417" y="19.187496" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332">Array Layer 2</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="2.6458335" y="48.291668" id="text7094-67"><tspan sodipodi:role="line" x="2.6458335" y="48.291668" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7152">Mip</tspan><tspan sodipodi:role="line" x="2.6458337" y="53.583336" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156">Level 0</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="2.6458335" y="93.270836" id="text7094-67-1"><tspan sodipodi:role="line" x="2.6458335" y="93.270836" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7152-2">Mip</tspan><tspan sodipodi:role="line" x="2.6458337" y="98.5625" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156-6">Level 1</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="2.6458335" y="138.25" id="text7094-67-2"><tspan sodipodi:role="line" x="2.6458335" y="138.25" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7152-4">Mip</tspan><tspan sodipodi:role="line" x="2.6458337" y="143.54167" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156-0">Level 3</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="2.6458335" y="119.72918" id="text7094-67-2-8"><tspan sodipodi:role="line" x="2.6458335" y="119.72918" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7152-4-0">Mip</tspan><tspan sodipodi:role="line" x="2.6458337" y="125.02084" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156-0-1">Level 2</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="2.6458335" y="154.125" id="text7094-67-2-1"><tspan sodipodi:role="line" x="2.6458333" y="154.125" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156-0-4">Mip Tail</tspan></text>
    <g id="g1301" transform="translate(1.3229072,-3.1985317e-5)">
      <rect y="147.51044" x="150.8125" height="5.2916665" width="5.2916665" id="rect6319-7-9-4" style="fill:#ff0000;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <rect y="139.57294" x="150.8125" height="5.2916675" width="5.2916675" id="rect5619-4-1-6-6-0-6-8" style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.26499999;stroke-miterlimit:4;stroke-dasharray:1.05999995,1.05999995;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <rect y="131.63542" x="150.8125" height="5.2916675" width="5.2916675" id="rect5619-6-8-6-5-2" style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <rect y="125.02087" x="149.48959" height="29.104164" width="55.5625" id="rect8983-1" style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:1.05833327,1.05833327;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687499" x="177.27084" y="128.98961" id="text823-4-2-9-4-7-9-85-3"><tspan sodipodi:role="line" x="177.27084" y="128.98961" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.39687499" id="tspan825-6-0-2-5-6-26-7-3">Legend</tspan></text>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687499" x="157.42709" y="135.6042" id="text823-4-2-9-4-7-9-85-3-6"><tspan sodipodi:role="line" x="157.42709" y="135.6042" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;writing-mode:lr-tb;text-anchor:start;stroke-width:0.39687499" id="tspan825-6-0-2-5-6-26-7-3-4">Image Pixel Data</tspan></text>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687499" x="157.42709" y="143.5417" id="text823-4-2-9-4-7-9-85-3-6-5"><tspan sodipodi:role="line" x="157.42709" y="143.5417" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;writing-mode:lr-tb;text-anchor:start;stroke-width:0.39687499" id="tspan825-6-0-2-5-6-26-7-3-4-2">Sparse Memory Block</tspan></text>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687499" x="157.42709" y="151.4792" id="text823-4-2-9-4-7-9-85-3-6-6"><tspan sodipodi:role="line" x="157.42709" y="151.4792" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;writing-mode:lr-tb;text-anchor:start;stroke-width:0.39687499" id="tspan825-6-0-2-5-6-26-7-3-4-1">Mip Tail Data</tspan></text>
      <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="M 11.90626,21.833365 H 64.822927 V 74.750031 H 11.90626 Z m 5.291667,0 V 74.750031 M 27.78126,21.833365 v 52.916666 m -5.291667,0 V 21.833365 m 10.583334,0 v 52.916666 m 5.291666,0 V 21.833365 m 5.291667,0 v 52.916666 m 5.291667,0 V 21.833365 m 5.291666,0 v 52.916666 m 5.291667,0 V 21.833365 m 5.291667,5.291666 H 11.90626 m 0,5.291667 h 52.916667 m 0,5.291667 H 11.90626 m 0,5.291666 h 52.916667 m 0,5.291667 H 11.90626 m 0,5.291667 h 52.916667 m 0,5.291666 H 11.90626 m 0,5.291667 h 52.916667 m 0,5.291667 H 11.90626" id="path1236" inkscape:connector-curvature="0"></path>
      <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="M 70.114593,21.833366 H 123.03125 V 74.750031 H 70.114593 Z m 5.29167,0 V 74.750031 M 85.989596,21.833366 v 52.916665 m -5.291669,0 V 21.833366 m 10.583336,0 v 52.916665 m 5.291661,0 V 21.833366 m 5.291666,0 v 52.916665 m 5.29167,0 V 21.833366 m 5.29166,0 v 52.916665 m 5.29167,0 V 21.833366 m 5.29166,5.291666 H 70.114593 m 0,5.291666 h 52.916657 m 0,5.291667 H 70.114593 m 0,5.291666 h 52.916657 m 0,5.291667 H 70.114593 m 0,5.291667 h 52.916657 m 0,5.291666 H 70.114593 m 0,5.291667 h 52.916657 m 0,5.291667 H 70.114593" id="path1236-3" inkscape:connector-curvature="0"></path>
      <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 128.32292,21.833365 h 52.91667 v 52.916666 h -52.91667 z m 5.29167,0 v 52.916666 m 10.58333,-52.916666 v 52.916666 m -5.29166,0 V 21.833365 m 10.58333,0 v 52.916666 m 5.29167,0 V 21.833365 m 5.29166,0 v 52.916666 m 5.29167,0 V 21.833365 m 5.29167,0 v 52.916666 m 5.29166,0 V 21.833365 m 5.29167,5.291666 h -52.91667 m 0,5.291667 h 52.91667 m 0,5.291667 h -52.91667 m 0,5.291666 h 52.91667 m 0,5.291667 h -52.91667 m 0,5.291667 h 52.91667 m 0,5.291666 h -52.91667 m 0,5.291667 h 52.91667 m 0,5.291667 h -52.91667" id="path1236-1" inkscape:connector-curvature="0"></path>
      <path id="path1299" d="M 11.90626,80.041698 H 38.364398 V 106.49984 H 11.90626 Z m 5.291628,0 V 106.49984 M 22.489515,80.041698 V 106.49984 M 27.781142,80.041698 V 106.49984 M 33.07277,80.041698 v 26.458142 m -21.16651,-5.29163 h 26.458138 m 0,-5.291628 H 11.90626 m 0,-5.291627 h 26.458138 m 0,-5.29163 H 11.90626" style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.25399813px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" inkscape:connector-curvature="0"></path>
      <path id="path1299-5" d="M 70.114593,80.041698 H 96.572734 V 106.49984 H 70.114593 Z m 5.29163,0 V 106.49984 M 80.69785,80.041698 v 26.458142 m 5.291627,-26.458142 v 26.458142 m 5.291627,-26.458142 v 26.458142 m -21.166511,-5.29163 h 26.458141 m 0,-5.291628 H 70.114593 m 0,-5.291627 h 26.458141 m 0,-5.29163 H 70.114593" style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.25399813px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" inkscape:connector-curvature="0"></path>
      <path id="path1299-7" d="m 128.32292,80.041698 h 26.45814 v 26.458142 h -26.45814 z m 5.29163,0 v 26.458142 m 5.29163,-26.458142 v 26.458142 m 5.29162,-26.458142 v 26.458142 m 5.29163,-26.458142 v 26.458142 m -21.16651,-5.29163 h 26.45814 m 0,-5.291628 h -26.45814 m 0,-5.291627 h 26.45814 m 0,-5.29163 h -26.45814" style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.25399813px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" inkscape:connector-curvature="0"></path>
      <path style="fill:#ff0000;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 11.90626,148.83337 h 10.583332 v 5.29167 H 11.90626 Z m 5.291667,0 v 5.29167" id="path1160" inkscape:connector-curvature="0"></path>
      <path style="fill:none;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.05833334, 1.05833334;stroke-dashoffset:0;stroke-opacity:1" d="m 18.52084,143.54172 h 3.96875 V 132.95838 H 11.90626 v 3.96875 m 5.29166,0 v -3.96875 m 1.32292,5.29167 h 3.96875" id="path1094-0" inkscape:connector-curvature="0"></path>
      <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" d="m 17.19792,143.54172 v -6.61459 m 1.32292,1.32292 h -6.61458 m 6.61458,5.29167 h -6.61458 v -6.61459 h 6.61458 v 6.61459" id="path1111-1" inkscape:connector-curvature="0"></path>
      <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" d="m 11.90626,114.43753 v 13.22916 H 25.13542 V 114.43753 H 11.90626 m 5.291659,0 v 13.22916 m 5.291671,0 v -13.22916 m -10.58333,2.64584 h 13.22916 m -13.22916,5.29166 h 13.22916" id="path1124-3" inkscape:connector-curvature="0"></path>
      <path style="fill:none;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.05833335, 1.05833335;stroke-dashoffset:0;stroke-opacity:1" d="m 25.13543,127.66669 h 2.645831 V 111.7917 H 11.90626 v 2.64584 m 5.29167,-2.64584 v 2.64584 m 5.29166,-2.64584 v 2.64584 m 5.291671,2.64583 H 25.13543 m 2.645831,5.29166 H 25.13543" id="path1141-9" inkscape:connector-curvature="0"></path>
      <path style="fill:#ff0000;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 70.114594,148.83338 h 10.583332 v 5.29167 H 70.114594 Z m 5.291666,0 v 5.29167" id="path1160-3" inkscape:connector-curvature="0"></path>
      <path style="fill:none;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.05833335, 1.05833335;stroke-dashoffset:0;stroke-opacity:1" d="m 76.729174,143.54171 h 3.96875 v -10.58334 h -10.58333 v 3.96875 m 5.29166,0 v -3.96875 m 1.32292,5.29167 h 3.96875" id="path1094-0-5" inkscape:connector-curvature="0"></path>
      <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" d="m 75.406254,143.54171 v -6.61459 m 1.32292,1.32292 h -6.61458 m 6.61458,5.29167 h -6.61458 v -6.61459 h 6.61458 v 6.61459" id="path1111-1-6" inkscape:connector-curvature="0"></path>
      <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" d="m 70.114594,114.43754 v 13.22916 h 13.22916 v -13.22916 h -13.22916 m 5.291659,0 v 13.22916 m 5.291671,0 v -13.22916 m -10.58333,2.64584 h 13.22916 m -13.22916,5.29166 h 13.22916" id="path1124-3-4" inkscape:connector-curvature="0"></path>
      <path style="fill:none;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.05833336, 1.05833336;stroke-dashoffset:0;stroke-opacity:1" d="m 83.343764,127.6667 h 2.645831 V 111.79171 H 70.114594 v 2.64584 m 5.29167,-2.64584 v 2.64584 m 5.29166,-2.64584 v 2.64584 m 5.291671,2.64583 h -2.645831 m 2.645831,5.29166 h -2.645831" id="path1141-9-1" inkscape:connector-curvature="0"></path>
      <path style="fill:#ff0000;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 128.32293,148.83338 h 10.58333 v 5.29167 h -10.58333 z m 5.29167,0 v 5.29167" id="path1160-0" inkscape:connector-curvature="0"></path>
      <path style="fill:none;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.05833335, 1.05833335;stroke-dashoffset:0;stroke-opacity:1" d="m 134.93751,143.54171 h 3.96875 v -10.58334 h -10.58333 v 3.96875 m 5.29166,0 v -3.96875 m 1.32292,5.29167 h 3.96875" id="path1094-0-9" inkscape:connector-curvature="0"></path>
      <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" d="m 133.61459,143.54171 v -6.61459 m 1.32292,1.32292 h -6.61458 m 6.61458,5.29167 h -6.61458 v -6.61459 h 6.61458 v 6.61459" id="path1111-1-1" inkscape:connector-curvature="0"></path>
      <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" d="m 128.32293,114.43754 v 13.22916 h 13.22916 v -13.22916 h -13.22916 m 5.29166,0 v 13.22916 m 5.29167,0 v -13.22916 m -10.58333,2.64584 h 13.22916 m -13.22916,5.29166 h 13.22916" id="path1124-3-5" inkscape:connector-curvature="0"></path>
      <path style="fill:none;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.05833336, 1.05833336;stroke-dashoffset:0;stroke-opacity:1" d="m 141.5521,127.6667 h 2.64583 v -15.87499 h -15.875 v 2.64584 m 5.29167,-2.64584 v 2.64584 m 5.29166,-2.64584 v 2.64584 m 5.29167,2.64583 h -2.64583 m 2.64583,5.29166 h -2.64583" id="path1141-9-5" inkscape:connector-curvature="0"></path>
    </g>
  </g>
</svg>
</div>
<div class="title">Figure 19. Sparse Image</div>
</div>
<div class="paragraph">
<p>In the absence of <code>VK_SPARSE_IMAGE_FORMAT_ALIGNED_MIP_SIZE_BIT</code> and
<code>VK_SPARSE_IMAGE_FORMAT_SINGLE_MIPTAIL_BIT</code>, each array layer contains a
mip tail region containing texel data for all mip levels smaller than the
sparse image block in any dimension.</p>
</div>
<div class="paragraph">
<p>Mip levels that are as large or larger than a sparse image block in all
dimensions <strong class="purple">can</strong> be bound individually.
Right-edges and bottom-edges of each level are allowed to have partially
used sparse blocks.
Any bound partially-used-sparse-blocks <strong class="purple">must</strong> still have their full sparse
block size in bytes allocated in memory.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="213.37727mm" height="140.93106mm" viewBox="0 0 213.37728 140.93106" version="1.1" id="svg5072" sodipodi:docname="sparseimage_singlemiptail.svg" inkscape:version="0.92.2 (5c3e80d, 2017-08-06)">
  <defs id="defs5066"></defs>
  <sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.4" inkscape:cx="395.52786" inkscape:cy="210.32605" inkscape:document-units="mm" inkscape:current-layer="layer1" showgrid="true" inkscape:measure-start="50,1040" inkscape:measure-end="50,900" inkscape:snap-object-midpoints="true" inkscape:snap-grids="true" inkscape:snap-text-baseline="true" fit-margin-left="1" fit-margin-top="1" fit-margin-right="1" fit-margin-bottom="1" inkscape:window-width="1680" inkscape:window-height="987" inkscape:window-x="1672" inkscape:window-y="-8" inkscape:window-maximized="0">
    <inkscape:grid type="xygrid" id="grid5617" originx="5.869987" originy="-141.02337"></inkscape:grid>
  </sodipodi:namedview>
  <metadata id="metadata5069">
    <rdf:rdf>
      <cc:work rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc:type>
        <dc:title></dc:title>
      </cc:work>
    </rdf:rdf>
  </metadata>
  <g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(5.8699864,-15.045569)">
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="39.6875" y="19.1875" id="text7094"><tspan sodipodi:role="line" id="tspan7092" x="39.6875" y="19.1875" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332">Array Layer 0</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="97.895836" y="19.187496" id="text7094-5"><tspan sodipodi:role="line" id="tspan7092-3" x="97.895836" y="19.187496" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332">Array Layer 1</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="156.10417" y="19.187496" id="text7094-6"><tspan sodipodi:role="line" id="tspan7092-0" x="156.10417" y="19.187496" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332">Array Layer 2</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="2.6458335" y="48.291668" id="text7094-67"><tspan sodipodi:role="line" x="2.6458335" y="48.291668" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7152">Mip</tspan><tspan sodipodi:role="line" x="2.6458337" y="53.583336" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156">Level 0</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="2.6458335" y="93.270836" id="text7094-67-1"><tspan sodipodi:role="line" x="2.6458335" y="93.270836" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7152-2">Mip</tspan><tspan sodipodi:role="line" x="2.6458337" y="98.5625" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156-6">Level 1</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="2.6458335" y="138.25" id="text7094-67-2"><tspan sodipodi:role="line" x="2.6458335" y="138.25" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7152-4">Mip</tspan><tspan sodipodi:role="line" x="2.6458337" y="143.54167" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156-0">Level 3</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="2.6458335" y="119.72918" id="text7094-67-2-8"><tspan sodipodi:role="line" x="2.6458335" y="119.72918" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7152-4-0">Mip</tspan><tspan sodipodi:role="line" x="2.6458337" y="125.02084" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156-0-1">Level 2</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="2.6458335" y="154.125" id="text7094-67-2-1"><tspan sodipodi:role="line" x="2.6458333" y="154.125" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156-0-4">Mip Tail</tspan></text>
    <g transform="translate(1.3229071,-3.1985317e-5)" id="g1301">
      <rect y="147.51044" x="150.8125" height="5.2916665" width="5.2916665" id="rect6319-7-9-4" style="fill:#ff0000;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <rect y="139.57294" x="150.8125" height="5.2916675" width="5.2916675" id="rect5619-4-1-6-6-0-6-8" style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.26499999;stroke-miterlimit:4;stroke-dasharray:1.05999995,1.05999995;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <rect y="131.63542" x="150.8125" height="5.2916675" width="5.2916675" id="rect5619-6-8-6-5-2" style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <rect y="125.02087" x="149.48959" height="29.104164" width="55.5625" id="rect8983-1" style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:1.05833327,1.05833327;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687499" x="177.27084" y="128.98961" id="text823-4-2-9-4-7-9-85-3"><tspan sodipodi:role="line" x="177.27084" y="128.98961" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.39687499" id="tspan825-6-0-2-5-6-26-7-3">Legend</tspan></text>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687499" x="157.42709" y="135.6042" id="text823-4-2-9-4-7-9-85-3-6"><tspan sodipodi:role="line" x="157.42709" y="135.6042" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;writing-mode:lr-tb;text-anchor:start;stroke-width:0.39687499" id="tspan825-6-0-2-5-6-26-7-3-4">Image Pixel Data</tspan></text>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687499" x="157.42709" y="143.5417" id="text823-4-2-9-4-7-9-85-3-6-5"><tspan sodipodi:role="line" x="157.42709" y="143.5417" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;writing-mode:lr-tb;text-anchor:start;stroke-width:0.39687499" id="tspan825-6-0-2-5-6-26-7-3-4-2">Sparse Memory Block</tspan></text>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687499" x="157.42709" y="151.4792" id="text823-4-2-9-4-7-9-85-3-6-6"><tspan sodipodi:role="line" x="157.42709" y="151.4792" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;writing-mode:lr-tb;text-anchor:start;stroke-width:0.39687499" id="tspan825-6-0-2-5-6-26-7-3-4-1">Mip Tail Data</tspan></text>
    </g>
    <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="M 13.229167,21.833333 H 66.145834 V 74.749999 H 13.229167 Z m 5.291667,0 V 74.749999 M 29.104168,21.833333 v 52.916666 m -5.291668,0 V 21.833333 m 10.583334,0 v 52.916666 m 5.291667,0 V 21.833333 m 5.291666,0 v 52.916666 m 5.291667,0 V 21.833333 m 5.291667,0 v 52.916666 m 5.291666,0 V 21.833333 m 5.291667,5.291666 H 13.229167 m 0,5.291667 h 52.916667 m 0,5.291667 H 13.229167 m 0,5.291666 h 52.916667 m 0,5.291667 H 13.229167 m 0,5.291667 h 52.916667 m 0,5.291666 H 13.229167 m 0,5.291667 h 52.916667 m 0,5.291667 H 13.229167" id="path1236" inkscape:connector-curvature="0"></path>
    <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="M 71.437501,21.833334 H 124.35417 V 74.749999 H 71.437501 Z m 5.291669,0 V 74.749999 M 87.312503,21.833334 v 52.916665 m -5.291669,0 V 21.833334 m 10.583336,0 v 52.916665 m 5.291657,0 V 21.833334 m 5.291673,0 v 52.916665 m 5.29167,0 V 21.833334 m 5.29166,0 v 52.916665 m 5.29168,0 V 21.833334 M 124.35417,27.125 H 71.437501 m 0,5.291666 h 52.916669 m 0,5.291667 H 71.437501 m 0,5.291666 h 52.916669 m 0,5.291667 H 71.437501 m 0,5.291667 h 52.916669 m 0,5.291666 H 71.437501 m 0,5.291667 h 52.916669 m 0,5.291667 H 71.437501" id="path1236-3" inkscape:connector-curvature="0"></path>
    <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 129.64584,21.833333 h 52.91667 v 52.916666 h -52.91667 z m 5.29167,0 v 52.916666 m 10.58333,-52.916666 v 52.916666 m -5.29166,0 V 21.833333 m 10.58333,0 v 52.916666 m 5.29167,0 V 21.833333 m 5.29166,0 v 52.916666 m 5.29167,0 V 21.833333 m 5.29167,0 v 52.916666 m 5.29166,0 V 21.833333 m 5.29167,5.291666 h -52.91667 m 0,5.291667 h 52.91667 m 0,5.291667 h -52.91667 m 0,5.291666 h 52.91667 m 0,5.291667 h -52.91667 m 0,5.291667 h 52.91667 m 0,5.291666 h -52.91667 m 0,5.291667 h 52.91667 m 0,5.291667 h -52.91667" id="path1236-1" inkscape:connector-curvature="0"></path>
    <path id="path1299" d="M 13.229167,80.041666 H 39.687305 V 106.49981 H 13.229167 Z m 5.291628,0 V 106.49981 M 23.812422,80.041666 V 106.49981 M 29.10405,80.041666 v 26.458144 m 5.291628,-26.458144 v 26.458144 m -21.166511,-5.29163 h 26.458138 m 0,-5.29163 H 13.229167 m 0,-5.291627 h 26.458138 m 0,-5.29163 H 13.229167" style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.25399813px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" inkscape:connector-curvature="0"></path>
    <path id="path1299-5" d="M 71.437501,80.041666 H 97.895647 V 106.49981 H 71.437501 Z m 5.291629,0 v 26.458144 m 5.291627,-26.458144 v 26.458144 m 5.291627,-26.458144 v 26.458144 m 5.291627,-26.458144 v 26.458144 m -21.16651,-5.29163 h 26.458146 m 0,-5.29163 H 71.437501 m 0,-5.291627 h 26.458146 m 0,-5.29163 H 71.437501" style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.25399813px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" inkscape:connector-curvature="0"></path>
    <path id="path1299-7" d="m 129.64584,80.041666 h 26.45814 v 26.458144 h -26.45814 z m 5.29163,0 v 26.458144 m 5.29163,-26.458144 v 26.458144 m 5.29162,-26.458144 v 26.458144 m 5.29163,-26.458144 v 26.458144 m -21.16651,-5.29163 h 26.45814 m 0,-5.29163 h -26.45814 m 0,-5.291627 h 26.45814 m 0,-5.29163 h -26.45814" style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.25399813px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" inkscape:connector-curvature="0"></path>
    <path style="fill:none;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.05833335, 1.05833335;stroke-dashoffset:0;stroke-opacity:1" d="m 19.843748,143.5417 h 3.96875 V 132.95836 H 13.229167 v 3.96875 m 5.29166,0 v -3.96875 m 1.322921,5.29167 h 3.96875" id="path1094-0" inkscape:connector-curvature="0"></path>
    <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" d="m 18.520827,143.5417 v -6.61459 m 1.322921,1.32292 h -6.614581 m 6.614581,5.29167 h -6.614581 v -6.61459 h 6.614581 v 6.61459" id="path1111-1" inkscape:connector-curvature="0"></path>
    <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" d="m 13.229167,114.43752 v 13.22916 h 13.22916 v -13.22916 h -13.22916 m 5.291659,0 v 13.22916 m 5.291672,0 v -13.22916 m -10.583331,2.64584 h 13.22916 m -13.22916,5.29166 h 13.22916" id="path1124-3" inkscape:connector-curvature="0"></path>
    <path style="fill:none;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.05833336, 1.05833336;stroke-dashoffset:0;stroke-opacity:1" d="m 26.458338,127.66668 h 2.64583 V 111.79169 H 13.229167 v 2.64584 m 5.29167,-2.64584 v 2.64584 m 5.291661,-2.64584 v 2.64584 m 5.29167,2.64583 h -2.64583 m 2.64583,5.29166 h -2.64583" id="path1141-9" inkscape:connector-curvature="0"></path>
    <path style="fill:none;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.05833336, 1.05833336;stroke-dashoffset:0;stroke-opacity:1" d="m 78.052081,143.54169 h 3.96875 v -10.58334 h -10.58333 v 3.96875 m 5.291661,0 v -3.96875 m 1.322919,5.29167 h 3.96875" id="path1094-0-5" inkscape:connector-curvature="0"></path>
    <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" d="m 76.729162,143.54169 v -6.61459 m 1.322919,1.32292 h -6.61458 m 6.61458,5.29167 h -6.61458 v -6.61459 h 6.61458 v 6.61459" id="path1111-1-6" inkscape:connector-curvature="0"></path>
    <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" d="m 71.437501,114.43751 v 13.22916 H 84.666662 V 114.43751 H 71.437501 m 5.291661,0 v 13.22916 m 5.291669,0 v -13.22916 m -10.58333,2.64584 h 13.229161 m -13.229161,5.29166 h 13.229161" id="path1124-3-4" inkscape:connector-curvature="0"></path>
    <path style="fill:none;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.05833337, 1.05833337;stroke-dashoffset:0;stroke-opacity:1" d="m 84.666673,127.66667 h 2.64583 V 111.79168 H 71.437501 v 2.64584 m 5.291672,-2.64584 v 2.64584 m 5.291658,-2.64584 v 2.64584 m 5.291672,2.64583 h -2.64583 m 2.64583,5.29166 h -2.64583" id="path1141-9-1" inkscape:connector-curvature="0"></path>
    <path style="fill:none;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.05833336, 1.05833336;stroke-dashoffset:0;stroke-opacity:1" d="m 136.26043,143.54169 h 3.96875 v -10.58334 h -10.58333 v 3.96875 m 5.29166,0 v -3.96875 m 1.32292,5.29167 h 3.96875" id="path1094-0-9" inkscape:connector-curvature="0"></path>
    <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" d="m 134.93751,143.54169 v -6.61459 m 1.32292,1.32292 h -6.61458 m 6.61458,5.29167 h -6.61458 v -6.61459 h 6.61458 v 6.61459" id="path1111-1-1" inkscape:connector-curvature="0"></path>
    <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" d="m 129.64585,114.43751 v 13.22916 h 13.22916 v -13.22916 h -13.22916 m 5.29166,0 v 13.22916 m 5.29167,0 v -13.22916 m -10.58333,2.64584 h 13.22916 m -13.22916,5.29166 h 13.22916" id="path1124-3-5" inkscape:connector-curvature="0"></path>
    <path style="fill:none;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.05833337, 1.05833337;stroke-dashoffset:0;stroke-opacity:1" d="m 142.87502,127.66667 h 2.64583 v -15.87499 h -15.875 v 2.64584 m 5.29167,-2.64584 v 2.64584 m 5.29166,-2.64584 v 2.64584 m 5.29167,2.64583 h -2.64583 m 2.64583,5.29166 h -2.64583" id="path1141-9-5" inkscape:connector-curvature="0"></path>
    <path style="fill:#ff0000;fill-opacity:1;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 13.229168,148.83333 h 31.75 l 10e-7,5.29167 H 13.229168 Z m 5.291667,0 v 5.29167 m 10.583333,-5.29167 v 5.29167 m -5.291667,0 v -5.29167 m 10.583333,0 v 5.29167 m 5.291667,0 v -5.29167" id="path1236-4" inkscape:connector-curvature="0" sodipodi:nodetypes="ccccccccccccccc"></path>
  </g>
</svg>
</div>
<div class="title">Figure 20. Sparse Image with Single Mip Tail</div>
</div>
<div class="paragraph">
<p>When <code>VK_SPARSE_IMAGE_FORMAT_SINGLE_MIPTAIL_BIT</code> is present all array
layers will share a single mip tail region.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="213.37727mm" height="126.98255mm" viewBox="0 0 213.37728 126.98255" version="1.1" id="svg5072" inkscape:version="0.92.2 (5c3e80d, 2017-08-06)" sodipodi:docname="sparseimage_alignedmipsize.svg">
  <sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.4" inkscape:cx="320.51149" inkscape:cy="359.79403" inkscape:document-units="mm" inkscape:current-layer="layer1" showgrid="true" inkscape:measure-start="50,1040" inkscape:measure-end="50,900" inkscape:snap-object-midpoints="true" inkscape:snap-grids="true" inkscape:snap-text-baseline="true" fit-margin-left="1" fit-margin-top="1" fit-margin-right="1" fit-margin-bottom="1" inkscape:window-width="1680" inkscape:window-height="987" inkscape:window-x="1672" inkscape:window-y="-8" inkscape:window-maximized="0">
    <inkscape:grid type="xygrid" id="grid5617" originx="5.8699868" originy="-154.97188"></inkscape:grid>
  </sodipodi:namedview>
  <metadata id="metadata5069">
    <rdf:rdf>
      <cc:work rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc:type>
        <dc:title></dc:title>
      </cc:work>
    </rdf:rdf>
  </metadata>
  <g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(5.8699862,-15.045569)">
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="39.6875" y="19.1875" id="text7094"><tspan sodipodi:role="line" id="tspan7092" x="39.6875" y="19.1875" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332">Array Layer 0</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="97.895836" y="19.187496" id="text7094-5"><tspan sodipodi:role="line" id="tspan7092-3" x="97.895836" y="19.187496" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332">Array Layer 1</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="156.10417" y="19.187496" id="text7094-6"><tspan sodipodi:role="line" id="tspan7092-0" x="156.10417" y="19.187496" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332">Array Layer 2</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="2.6458335" y="48.291668" id="text7094-67"><tspan sodipodi:role="line" x="2.6458335" y="48.291668" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7152">Mip</tspan><tspan sodipodi:role="line" x="2.6458337" y="53.583336" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156">Level 0</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="2.6458335" y="93.270836" id="text7094-67-1"><tspan sodipodi:role="line" x="2.6458335" y="93.270836" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7152-2">Mip</tspan><tspan sodipodi:role="line" x="2.6458337" y="98.5625" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156-6">Level 1</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="2.6458337" y="127.66666" id="text7094-67-2-1"><tspan sodipodi:role="line" x="2.6458335" y="127.66666" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156-0-4">Mip Tail</tspan></text>
    <g transform="translate(1.3229068,-13.229199)" id="g1301">
      <rect y="147.51044" x="150.8125" height="5.2916665" width="5.2916665" id="rect6319-7-9-4" style="fill:#ff0000;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <rect y="139.57294" x="150.8125" height="5.2916675" width="5.2916675" id="rect5619-4-1-6-6-0-6-8" style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.26499999;stroke-miterlimit:4;stroke-dasharray:1.05999995,1.05999995;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <rect y="131.63542" x="150.8125" height="5.2916675" width="5.2916675" id="rect5619-6-8-6-5-2" style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <rect y="125.02087" x="149.48959" height="29.104164" width="55.5625" id="rect8983-1" style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:0.265;stroke-miterlimit:4;stroke-dasharray:1.06,1.06;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687499" x="177.27084" y="128.98961" id="text823-4-2-9-4-7-9-85-3"><tspan sodipodi:role="line" x="177.27084" y="128.98961" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.39687499" id="tspan825-6-0-2-5-6-26-7-3">Legend</tspan></text>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687499" x="157.42709" y="135.6042" id="text823-4-2-9-4-7-9-85-3-6"><tspan sodipodi:role="line" x="157.42709" y="135.6042" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;writing-mode:lr-tb;text-anchor:start;stroke-width:0.39687499" id="tspan825-6-0-2-5-6-26-7-3-4">Image Pixel Data</tspan></text>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687499" x="157.42709" y="143.5417" id="text823-4-2-9-4-7-9-85-3-6-5"><tspan sodipodi:role="line" x="157.42709" y="143.5417" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;writing-mode:lr-tb;text-anchor:start;stroke-width:0.39687499" id="tspan825-6-0-2-5-6-26-7-3-4-2">Sparse Memory Block</tspan></text>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687499" x="157.42709" y="151.4792" id="text823-4-2-9-4-7-9-85-3-6-6"><tspan sodipodi:role="line" x="157.42709" y="151.4792" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;writing-mode:lr-tb;text-anchor:start;stroke-width:0.39687499" id="tspan825-6-0-2-5-6-26-7-3-4-1">Mip Tail Data</tspan></text>
    </g>
    <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="M 13.229167,21.833334 H 66.145833 V 74.75 H 13.229167 Z m 5.291667,0 V 74.75 M 29.104167,21.833334 V 74.75 m -5.291667,0 V 21.833334 m 10.583334,0 V 74.75 m 5.291666,0 V 21.833334 m 5.291666,0 V 74.75 m 5.291667,0 V 21.833334 m 5.291667,0 V 74.75 m 5.291666,0 V 21.833334 M 66.145833,27.125 H 13.229167 m 0,5.291667 h 52.916666 m 0,5.291667 H 13.229167 m 0,5.291666 h 52.916666 m 0,5.291667 H 13.229167 m 0,5.291667 h 52.916666 m 0,5.291666 H 13.229167 m 0,5.291667 h 52.916666 m 0,5.291667 H 13.229167" id="path1236" inkscape:connector-curvature="0"></path>
    <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="M 71.437501,21.833335 H 124.35416 V 74.75 H 71.437501 Z m 5.291667,0 V 74.75 M 87.312501,21.833335 V 74.75 m -5.291667,0 V 21.833335 m 10.583334,0 V 74.75 m 5.291666,0 V 21.833335 m 5.291666,0 V 74.75 m 5.29167,0 V 21.833335 m 5.29166,0 V 74.75 m 5.29167,0 V 21.833335 m 5.29166,5.291666 H 71.437501 m 0,5.291666 h 52.916659 m 0,5.291667 H 71.437501 m 0,5.291666 h 52.916659 m 0,5.291667 H 71.437501 m 0,5.291667 h 52.916659 m 0,5.291666 H 71.437501 m 0,5.291667 h 52.916659 m 0,5.291667 H 71.437501" id="path1236-3" inkscape:connector-curvature="0"></path>
    <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="M 129.64583,21.833334 H 182.5625 V 74.75 h -52.91667 z m 5.29167,0 V 74.75 M 145.52083,21.833334 V 74.75 m -5.29166,0 V 21.833334 m 10.58333,0 V 74.75 m 5.29167,0 V 21.833334 m 5.29166,0 V 74.75 m 5.29167,0 V 21.833334 m 5.29167,0 V 74.75 m 5.29166,0 V 21.833334 M 182.5625,27.125 h -52.91667 m 0,5.291667 h 52.91667 m 0,5.291667 h -52.91667 m 0,5.291666 h 52.91667 m 0,5.291667 h -52.91667 m 0,5.291667 h 52.91667 m 0,5.291666 h -52.91667 m 0,5.291667 h 52.91667 m 0,5.291667 h -52.91667" id="path1236-1" inkscape:connector-curvature="0"></path>
    <path id="path1299" d="M 13.229167,80.041667 H 39.687305 V 106.49981 H 13.229167 Z m 5.291628,0 v 26.458143 m 5.291627,-26.458143 v 26.458143 m 5.291627,-26.458143 v 26.458143 m 5.291628,-26.458143 v 26.458143 m -21.16651,-5.29163 h 26.458138 m 0,-5.291631 H 13.229167 m 0,-5.291627 h 26.458138 m 0,-5.291628 H 13.229167" style="fill:#808080;stroke:#000000;stroke-width:0.25399813px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;fill-opacity:1" inkscape:connector-curvature="0"></path>
    <path id="path1299-5" d="M 71.437501,80.041667 H 97.895639 V 106.49981 H 71.437501 Z m 5.291628,0 v 26.458143 m 5.291627,-26.458143 v 26.458143 m 5.291627,-26.458143 v 26.458143 m 5.291628,-26.458143 v 26.458143 m -21.16651,-5.29163 h 26.458138 m 0,-5.291631 H 71.437501 m 0,-5.291627 h 26.458138 m 0,-5.291628 H 71.437501" style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.25399813px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" inkscape:connector-curvature="0"></path>
    <path id="path1299-7" d="m 129.64583,80.041667 h 26.45814 v 26.458143 h -26.45814 z m 5.29163,0 v 26.458143 m 5.29163,-26.458143 v 26.458143 m 5.29162,-26.458143 v 26.458143 m 5.29163,-26.458143 v 26.458143 m -21.16651,-5.29163 h 26.45814 m 0,-5.291631 h -26.45814 m 0,-5.291627 h 26.45814 m 0,-5.291628 h -26.45814" style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.25399813px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" inkscape:connector-curvature="0"></path>
    <path id="path1299-6" d="m 13.229167,111.79167 15.875001,-3e-5 v 26.45815 l -15.875001,3e-5 z m 5.291629,0 v 26.45815 m 5.291627,-26.45815 v 26.45815 m -10.583256,-5.29163 15.875001,-3e-5 m 0,-5.29164 -15.875001,3e-5 m 0,-5.29162 15.875001,-3e-5 m 0,-5.29163 -15.875001,3e-5" style="fill:#ff0000;fill-opacity:1;stroke:#000000;stroke-width:0.25399813px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" inkscape:connector-curvature="0" sodipodi:nodetypes="ccccccccccccccccc"></path>
    <path id="path1299-6-4" d="m 71.437501,111.79167 15.875001,-3e-5 v 26.45815 l -15.875001,3e-5 z m 5.291628,0 v 26.45815 m 5.291628,-26.45815 v 26.45815 m -10.583256,-5.29163 15.875001,-3e-5 m 0,-5.29164 -15.875001,3e-5 m 0,-5.29162 15.875001,-3e-5 m 0,-5.29163 -15.875001,3e-5" style="fill:#ff0000;fill-opacity:1;stroke:#000000;stroke-width:0.25399813px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" inkscape:connector-curvature="0" sodipodi:nodetypes="ccccccccccccccccc"></path>
    <path id="path1299-6-8" d="m 129.64583,111.79167 15.875,-3e-5 v 26.45815 l -15.875,3e-5 z m 5.29163,0 v 26.45815 m 5.29162,-26.45815 v 26.45815 m -10.58325,-5.29163 15.875,-3e-5 m 0,-5.29164 -15.875,3e-5 m 0,-5.29162 15.875,-3e-5 m 0,-5.29163 -15.875,3e-5" style="fill:#ff0000;fill-opacity:1;stroke:#000000;stroke-width:0.25399813px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" inkscape:connector-curvature="0" sodipodi:nodetypes="ccccccccccccccccc"></path>
  </g>
</svg>
</div>
<div class="title">Figure 21. Sparse Image with Aligned Mip Size</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The mip tail regions are presented here in 2D arrays simply for figure size
reasons.
Each mip tail is logically a single array of sparse blocks with an
implementation-dependent mapping of texels or compressed texel blocks to
sparse blocks.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>When <code>VK_SPARSE_IMAGE_FORMAT_ALIGNED_MIP_SIZE_BIT</code> is present the first
mip level that would contain partially used sparse blocks begins the mip
tail region.
This level and all subsequent levels are placed in the mip tail.
Only the first <span class="eq">N</span> mip levels whose dimensions are an exact multiple of
the sparse image block dimensions <strong class="purple">can</strong> be bound and unbound on a sparse
block basis.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="213.37727mm" height="126.98255mm" viewBox="0 0 213.37728 126.98255" version="1.1" id="svg5072" inkscape:version="0.92.2 (5c3e80d, 2017-08-06)" sodipodi:docname="sparseimage_alignedmipsize_singlemiptail.svg">
  <defs id="defs5066"></defs>
  <sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.4" inkscape:cx="386.2212" inkscape:cy="333.12919" inkscape:document-units="mm" inkscape:current-layer="layer1" showgrid="true" inkscape:measure-start="50,1040" inkscape:measure-end="50,900" inkscape:snap-object-midpoints="true" inkscape:snap-grids="true" inkscape:snap-text-baseline="true" fit-margin-left="1" fit-margin-top="1" fit-margin-right="1" fit-margin-bottom="1" inkscape:window-width="1680" inkscape:window-height="987" inkscape:window-x="-8" inkscape:window-y="-8" inkscape:window-maximized="0">
    <inkscape:grid type="xygrid" id="grid5617" originx="5.8699868" originy="-154.97188"></inkscape:grid>
  </sodipodi:namedview>
  <metadata id="metadata5069">
    <rdf:rdf>
      <cc:work rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc:type>
        <dc:title></dc:title>
      </cc:work>
    </rdf:rdf>
  </metadata>
  <g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(5.8699862,-15.045569)">
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="39.6875" y="19.1875" id="text7094"><tspan sodipodi:role="line" id="tspan7092" x="39.6875" y="19.1875" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332">Array Layer 0</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="97.895836" y="19.187496" id="text7094-5"><tspan sodipodi:role="line" id="tspan7092-3" x="97.895836" y="19.187496" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332">Array Layer 1</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="156.10417" y="19.187496" id="text7094-6"><tspan sodipodi:role="line" id="tspan7092-0" x="156.10417" y="19.187496" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332">Array Layer 2</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="2.6458335" y="48.291668" id="text7094-67"><tspan sodipodi:role="line" x="2.6458335" y="48.291668" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7152">Mip</tspan><tspan sodipodi:role="line" x="2.6458337" y="53.583336" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156">Level 0</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="2.6458335" y="93.270836" id="text7094-67-1"><tspan sodipodi:role="line" x="2.6458335" y="93.270836" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7152-2">Mip</tspan><tspan sodipodi:role="line" x="2.6458337" y="98.5625" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156-6">Level 1</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="2.6458337" y="127.66666" id="text7094-67-2-1"><tspan sodipodi:role="line" x="2.6458335" y="127.66666" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156-0-4">Mip Tail</tspan></text>
    <g transform="translate(1.3229068,-13.229199)" id="g1301">
      <rect y="147.51044" x="150.8125" height="5.2916665" width="5.2916665" id="rect6319-7-9-4" style="fill:#ff0000;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <rect y="139.57294" x="150.8125" height="5.2916675" width="5.2916675" id="rect5619-4-1-6-6-0-6-8" style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:1.05833327,1.05833327;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <rect y="131.63542" x="150.8125" height="5.2916675" width="5.2916675" id="rect5619-6-8-6-5-2" style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <rect y="125.02087" x="149.48959" height="29.104164" width="55.5625" id="rect8983-1" style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:0.26499999;stroke-miterlimit:4;stroke-dasharray:1.05999995,1.05999995;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687499" x="177.27084" y="128.98961" id="text823-4-2-9-4-7-9-85-3"><tspan sodipodi:role="line" x="177.27084" y="128.98961" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.39687499" id="tspan825-6-0-2-5-6-26-7-3">Legend</tspan></text>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687499" x="157.42709" y="135.6042" id="text823-4-2-9-4-7-9-85-3-6"><tspan sodipodi:role="line" x="157.42709" y="135.6042" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;writing-mode:lr-tb;text-anchor:start;stroke-width:0.39687499" id="tspan825-6-0-2-5-6-26-7-3-4">Image Pixel Data</tspan></text>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687499" x="157.42709" y="143.5417" id="text823-4-2-9-4-7-9-85-3-6-5"><tspan sodipodi:role="line" x="157.42709" y="143.5417" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;writing-mode:lr-tb;text-anchor:start;stroke-width:0.39687499" id="tspan825-6-0-2-5-6-26-7-3-4-2">Sparse Memory Block</tspan></text>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687499" x="157.42709" y="151.4792" id="text823-4-2-9-4-7-9-85-3-6-6"><tspan sodipodi:role="line" x="157.42709" y="151.4792" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;writing-mode:lr-tb;text-anchor:start;stroke-width:0.39687499" id="tspan825-6-0-2-5-6-26-7-3-4-1">Mip Tail Data</tspan></text>
    </g>
    <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="M 13.229167,21.833334 H 66.145833 V 74.75 H 13.229167 Z m 5.291667,0 V 74.75 M 29.104167,21.833334 V 74.75 m -5.291667,0 V 21.833334 m 10.583334,0 V 74.75 m 5.291666,0 V 21.833334 m 5.291666,0 V 74.75 m 5.291667,0 V 21.833334 m 5.291667,0 V 74.75 m 5.291666,0 V 21.833334 M 66.145833,27.125 H 13.229167 m 0,5.291666 h 52.916666 m 0,5.291667 H 13.229167 m 0,5.291666 h 52.916666 m 0,5.291667 H 13.229167 m 0,5.291668 h 52.916666 m 0,5.291666 H 13.229167 m 0,5.291667 h 52.916666 m 0,5.291667 H 13.229167" id="path1236" inkscape:connector-curvature="0"></path>
    <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 71.4375,21.833335 h 52.91666 V 74.75 H 71.4375 Z m 5.291669,0 V 74.75 M 87.312502,21.833335 V 74.75 m -5.291669,0 V 21.833335 m 10.583336,0 V 74.75 m 5.291664,0 V 21.833335 m 5.291667,0 V 74.75 m 5.29167,0 V 21.833335 m 5.29166,0 V 74.75 m 5.29167,0 V 21.833335 m 5.29166,5.291666 H 71.4375 m 0,5.291665 h 52.91666 m 0,5.291667 H 71.4375 m 0,5.291666 h 52.91666 m 0,5.291667 H 71.4375 m 0,5.291668 h 52.91666 m 0,5.291666 H 71.4375 m 0,5.291667 h 52.91666 m 0,5.291667 H 71.4375" id="path1236-3" inkscape:connector-curvature="0"></path>
    <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="M 129.64583,21.833334 H 182.5625 V 74.75 h -52.91667 z m 5.29167,0 V 74.75 M 145.52083,21.833334 V 74.75 m -5.29166,0 V 21.833334 m 10.58333,0 V 74.75 m 5.29167,0 V 21.833334 m 5.29166,0 V 74.75 m 5.29167,0 V 21.833334 m 5.29167,0 V 74.75 m 5.29166,0 V 21.833334 M 182.5625,27.125 h -52.91667 m 0,5.291666 h 52.91667 m 0,5.291667 h -52.91667 m 0,5.291666 h 52.91667 m 0,5.291667 h -52.91667 m 0,5.291668 h 52.91667 m 0,5.291666 h -52.91667 m 0,5.291667 h 52.91667 m 0,5.291667 h -52.91667" id="path1236-1" inkscape:connector-curvature="0"></path>
    <path id="path1299" d="M 13.229167,80.041667 H 39.687304 V 106.49981 H 13.229167 Z m 5.291628,0 v 26.458143 m 5.291627,-26.458143 v 26.458143 m 5.291627,-26.458143 v 26.458143 m 5.291628,-26.458143 v 26.458143 m -21.16651,-5.29163 h 26.458137 m 0,-5.291629 H 13.229167 m 0,-5.291627 h 26.458137 m 0,-5.29163 H 13.229167" style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.25399813px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" inkscape:connector-curvature="0"></path>
    <path id="path1299-5" d="M 71.4375,80.041667 H 97.895643 V 106.49981 H 71.4375 Z m 5.291629,0 V 106.49981 M 82.020756,80.041667 V 106.49981 M 87.312383,80.041667 V 106.49981 M 92.60401,80.041667 V 106.49981 M 71.4375,101.20818 h 26.458143 m 0,-5.291629 H 71.4375 m 0,-5.291627 h 26.458143 m 0,-5.29163 H 71.4375" style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.25399813px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" inkscape:connector-curvature="0"></path>
    <path id="path1299-7" d="m 129.64583,80.041667 h 26.45814 v 26.458143 h -26.45814 z m 5.29163,0 v 26.458143 m 5.29163,-26.458143 v 26.458143 m 5.29162,-26.458143 v 26.458143 m 5.29163,-26.458143 v 26.458143 m -21.16651,-5.29163 h 26.45814 m 0,-5.291629 h -26.45814 m 0,-5.291627 h 26.45814 m 0,-5.29163 h -26.45814" style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.25399813px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" inkscape:connector-curvature="0"></path>
    <path style="fill:#ff0000;fill-opacity:1;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 13.229167,111.79167 h 47.625 V 138.25 h -47.625 z m 5.291667,0 V 138.25 M 29.104167,111.79167 V 138.25 m -5.291667,0 v -26.45833 m 10.583334,0 V 138.25 m 5.291666,0 v -26.45833 m 5.291666,0 V 138.25 m 5.291667,0 v -26.45833 m 5.291667,0 V 138.25 m 5.291667,-21.16666 h -47.625 m 0,5.29166 h 47.625 m 0,5.29167 h -47.625 m 0,5.29167 h 47.625" id="path1236-7" inkscape:connector-curvature="0" sodipodi:nodetypes="ccccccccccccccccccccccccccccc"></path>
  </g>
</svg>
</div>
<div class="title">Figure 22. Sparse Image with Aligned Mip Size and Single Mip Tail</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The mip tail region is presented here in a 2D array simply for figure size
reasons.
It is logically a single array of sparse blocks with an
implementation-dependent mapping of texels or compressed texel blocks to
sparse blocks.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>When both <code>VK_SPARSE_IMAGE_FORMAT_ALIGNED_MIP_SIZE_BIT</code> and
<code>VK_SPARSE_IMAGE_FORMAT_SINGLE_MIPTAIL_BIT</code> are present the constraints
from each of these flags are in effect.</p>
</div>
</div>
<div class="sect3">
<h4 id="sparsememory-standard-shapes"><a class="anchor" href="chap32.html#sparsememory-standard-shapes"></a>32.4.3. Standard Sparse Image Block Shapes</h4>
<div class="paragraph">
<p>Standard sparse image block shapes define a standard set of dimensions for
sparse image blocks that depend on the format of the image.
Layout of texels or compressed texel blocks within a sparse image block is
implementation-dependent.
All currently defined standard sparse image block shapes are 64 KB in size.</p>
</div>
<div class="paragraph">
<p>For block-compressed formats (e.g. <code>VK_FORMAT_BC5_UNORM_BLOCK</code>), the
texel size is the size of the compressed texel block (e.g. 128-bit for
<code>BC5</code>) thus the dimensions of the standard sparse image block shapes
apply in terms of compressed texel blocks.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>For block-compressed formats, the dimensions of a sparse image block in
terms of texels <strong class="purple">can</strong> be calculated by multiplying the sparse image block
dimensions by the compressed texel block dimensions.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div style="page-break-after: always;"></div>
<table id="sparsememory-sparseblockshapessingle" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 45. Standard Sparse Image Block Shapes (Single Sample)</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">TEXEL SIZE (bits)</th>
<th class="tableblock halign-left valign-top">Block Shape (2D)</th>
<th class="tableblock halign-left valign-top">Block Shape (3D)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>8-Bit</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256 × 256 × 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64 × 32 × 32</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>16-Bit</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">256 × 128 × 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32 × 32 × 32</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>32-Bit</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">128 × 128 × 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32 × 32 × 16</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>64-Bit</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">128 × 64 × 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32 × 16 × 16</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>128-Bit</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64 × 64 × 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16 × 16 × 16</p></td>
</tr>
</tbody>
</table>
<table id="sparsememory-sparseblockshapesmsaa" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 46. Standard Sparse Image Block Shapes (MSAA)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">TEXEL SIZE (bits)</th>
<th class="tableblock halign-left valign-top">Block Shape (2X)</th>
<th class="tableblock halign-left valign-top">Block Shape (4X)</th>
<th class="tableblock halign-left valign-top">Block Shape (8X)</th>
<th class="tableblock halign-left valign-top">Block Shape (16X)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>8-Bit</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">128 × 256 × 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">128 × 128 × 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64 × 128 × 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64 × 64 × 1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>16-Bit</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">128 × 128 × 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">128 × 64 × 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64 × 64 × 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64 × 32 × 1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>32-Bit</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64 × 128 × 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64 × 64 × 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32 × 64 × 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32 × 32 × 1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>64-Bit</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64 × 64 × 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64 × 32 × 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32 × 32 × 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32 × 16 × 1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>128-Bit</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32 × 64 × 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32 × 32 × 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16 × 32 × 1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16 × 16 × 1</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Implementations that support the standard sparse image block shape for all
formats listed in the <a href="chap32.html#sparsememory-sparseblockshapessingle">Standard Sparse Image Block Shapes (Single Sample)</a> and
<a href="chap32.html#sparsememory-sparseblockshapesmsaa">Standard Sparse Image Block Shapes (MSAA)</a> tables <strong class="purple">may</strong> advertise the following
<code>VkPhysicalDeviceSparseProperties</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>residencyStandard2DBlockShape</code></p>
</li>
<li>
<p><code>residencyStandard2DMultisampleBlockShape</code></p>
</li>
<li>
<p><code>residencyStandard3DBlockShape</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Reporting each of these features does <em>not</em> imply that all possible image
types are supported as sparse.
Instead, this indicates that no supported sparse image of the corresponding
type will use custom sparse image block dimensions for any formats that have
a corresponding standard sparse image block shape.</p>
</div>
</div>
<div class="sect3">
<h4 id="sparsememory-custom-shapes"><a class="anchor" href="chap32.html#sparsememory-custom-shapes"></a>32.4.4. Custom Sparse Image Block Shapes</h4>
<div class="paragraph">
<p>An implementation that does not support a standard image block shape for a
particular sparse partially-resident image <strong class="purple">may</strong> choose to support a custom
sparse image block shape for it instead.
The dimensions of such a custom sparse image block shape are reported in
<code>VkSparseImageFormatProperties</code>::<code>imageGranularity</code>.
As with standard sparse image block shapes, the size in bytes of the custom
sparse image block shape will be reported in
<code>VkMemoryRequirements</code>::<code>alignment</code>.</p>
</div>
<div class="paragraph">
<p>Custom sparse image block dimensions are reported through
<code>vkGetPhysicalDeviceSparseImageFormatProperties</code> and
<code>vkGetImageSparseMemoryRequirements</code>.</p>
</div>
<div class="paragraph">
<p>An implementation <strong class="purple">must</strong> not support both the standard sparse image block
shape and a custom sparse image block shape for the same image.
The standard sparse image block shape <strong class="purple">must</strong> be used if it is supported.</p>
</div>
</div>
<div class="sect3">
<h4 id="sparsememory-multiaspect"><a class="anchor" href="chap32.html#sparsememory-multiaspect"></a>32.4.5. Multiple Aspects</h4>
<div class="paragraph">
<p>Partially resident images are allowed to report separate sparse properties
for different aspects of the image.
One example is for depth/stencil images where the implementation separates
the depth and stencil data into separate planes.
Another reason for multiple aspects is to allow the application to manage
memory allocation for implementation-private <em>metadata</em> associated with the
image.
See the figure below:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="163.10645mm" height="156.29341mm" viewBox="0 0 163.10645 156.29341" version="1.1" id="svg5072" sodipodi:docname="sparseimage_multiaspect.svg" inkscape:version="0.92.2 (5c3e80d, 2017-08-06)">
  <defs id="defs5066"></defs>
  <sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.4142136" inkscape:cx="287.95243" inkscape:cy="224.95974" inkscape:document-units="mm" inkscape:current-layer="layer1" showgrid="true" inkscape:measure-start="50,1040" inkscape:measure-end="50,900" inkscape:snap-object-midpoints="true" inkscape:snap-grids="true" inkscape:snap-text-baseline="true" fit-margin-left="1" fit-margin-top="1" fit-margin-right="1" fit-margin-bottom="1" inkscape:window-width="1680" inkscape:window-height="987" inkscape:window-x="1672" inkscape:window-y="-8" inkscape:window-maximized="0" showguides="false">
    <inkscape:grid type="xygrid" id="grid5617" originx="5.8699862" originy="-125.73543"></inkscape:grid>
  </sodipodi:namedview>
  <metadata id="metadata5069">
    <rdf:rdf>
      <cc:work rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc:type>
        <dc:title></dc:title>
      </cc:work>
    </rdf:rdf>
  </metadata>
  <g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(5.8699859,-14.971155)">
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="39.6875" y="19.1875" id="text7094"><tspan sodipodi:role="line" id="tspan7092" x="39.6875" y="19.1875" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332">Depth</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="97.895836" y="19.187496" id="text7094-5"><tspan sodipodi:role="line" id="tspan7092-3" x="97.895836" y="19.187496" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332">Stencil</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="2.6458335" y="48.291668" id="text7094-67"><tspan sodipodi:role="line" x="2.6458335" y="48.291668" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7152">Mip</tspan><tspan sodipodi:role="line" x="2.6458337" y="53.583336" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156">Level 0</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="2.6458335" y="93.270836" id="text7094-67-1"><tspan sodipodi:role="line" x="2.6458335" y="93.270836" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7152-2">Mip</tspan><tspan sodipodi:role="line" x="2.6458337" y="98.5625" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156-6">Level 1</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="2.645834" y="148.83334" id="text7094-67-2"><tspan sodipodi:role="line" x="2.645834" y="148.83334" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7152-4">Mip</tspan><tspan sodipodi:role="line" x="2.6458342" y="154.12502" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156-0">Level 3</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="2.6458337" y="125.02084" id="text7094-67-2-8"><tspan sodipodi:role="line" x="2.6458337" y="125.02084" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7152-4-0">Mip</tspan><tspan sodipodi:role="line" x="2.645834" y="130.31252" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156-0-1">Level 2</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="2.645834" y="170" id="text7094-67-2-1"><tspan sodipodi:role="line" x="2.6458337" y="170" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156-0-4">Mip Tail</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="142.875" y="78.71875" id="text7094-67-2-1-1"><tspan sodipodi:role="line" x="142.875" y="78.71875" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332" id="tspan7156-0-4-5">Mip Tail</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:1.25;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332" x="142.875" y="19.187498" id="text7094-4"><tspan sodipodi:role="line" id="tspan7092-8" x="142.875" y="19.187498" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.26458332">Metadata</tspan></text>
    <g transform="translate(-48.947927,15.874963)" id="g1301">
      <rect y="147.51044" x="150.8125" height="5.2916665" width="5.2916665" id="rect6319-7-9-4" style="fill:#ff0000;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <rect y="139.57294" x="150.8125" height="5.2916675" width="5.2916675" id="rect5619-4-1-6-6-0-6-8" style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.26499999;stroke-miterlimit:4;stroke-dasharray:1.05999995,1.05999995;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <rect y="131.63542" x="150.8125" height="5.2916675" width="5.2916675" id="rect5619-6-8-6-5-2" style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <rect y="125.02087" x="149.48959" height="29.104164" width="55.5625" id="rect8983-1" style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:1.05833327,1.05833327;stroke-dashoffset:0;stroke-opacity:1"></rect>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687499" x="177.27084" y="128.98961" id="text823-4-2-9-4-7-9-85-3"><tspan sodipodi:role="line" x="177.27084" y="128.98961" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.39687499" id="tspan825-6-0-2-5-6-26-7-3">Legend</tspan></text>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687499" x="157.42709" y="135.6042" id="text823-4-2-9-4-7-9-85-3-6"><tspan sodipodi:role="line" x="157.42709" y="135.6042" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;writing-mode:lr-tb;text-anchor:start;stroke-width:0.39687499" id="tspan825-6-0-2-5-6-26-7-3-4">Image Pixel Data</tspan></text>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687499" x="157.42709" y="143.5417" id="text823-4-2-9-4-7-9-85-3-6-5"><tspan sodipodi:role="line" x="157.42709" y="143.5417" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;writing-mode:lr-tb;text-anchor:start;stroke-width:0.39687499" id="tspan825-6-0-2-5-6-26-7-3-4-2">Sparse Memory Block</tspan></text>
      <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687499" x="157.42709" y="151.4792" id="text823-4-2-9-4-7-9-85-3-6-6"><tspan sodipodi:role="line" x="157.42709" y="151.4792" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333359px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;writing-mode:lr-tb;text-anchor:start;stroke-width:0.39687499" id="tspan825-6-0-2-5-6-26-7-3-4-1">Mip Tail Data</tspan></text>
    </g>
    <path style="fill:none;stroke:#000000;stroke-width:0.26499999;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.05999995, 1.05999995;stroke-dashoffset:0;stroke-opacity:1" d="m 84.666666,138.25 h 7.9375 V 117.08333 H 71.437499 v 7.9375 m 10.583336,0 v -7.9375 m 2.645833,10.58334 h 7.9375" id="path1094" inkscape:connector-curvature="0"></path>
    <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 82.020834,138.25 v -13.22917 m 2.645833,2.64584 H 71.4375 M 84.666665,138.25 H 71.437498 V 125.02083 H 84.666667 V 138.25" id="path1111" inkscape:connector-curvature="0"></path>
    <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="M 71.437498,85.333322 V 111.79166 H 97.895831 V 85.333322 H 71.437498 m 10.583336,0 v 26.458338 m 10.583333,0 V 85.333322 M 71.4375,90.624992 H 97.895834 M 71.4375,101.20833 h 26.458334" id="path1124" inkscape:connector-curvature="0"></path>
    <path style="fill:none;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.05833328, 1.05833328;stroke-dashoffset:0;stroke-opacity:1" d="m 97.89584,111.79166 h 5.29166 V 80.041662 H 71.437502 v 5.29167 m 10.583336,-5.29167 v 5.29167 m 10.583334,-5.29167 v 5.29167 m 10.583328,5.29166 h -5.29166 m 5.29166,10.583338 h -5.29166" id="path1141" inkscape:connector-curvature="0"></path>
    <path style="fill:#ff0000;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 71.437498,159.41666 h 21.166667 v 10.58333 H 71.437498 Z m 10.583336,0 0,10.58334" id="path1158" inkscape:connector-curvature="0"></path>
    <path style="fill:#ff0000;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 13.229167,164.70833 h 10.583332 v 5.29166 H 13.229167 Z m 5.291667,0 0,5.29167" id="path1160" inkscape:connector-curvature="0"></path>
    <path style="fill:none;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.05833333, 1.05833333;stroke-dashoffset:0;stroke-opacity:1" d="m 19.843747,154.125 h 3.96875 v -10.58334 h -10.58333 v 3.96875 m 5.29166,0 v -3.96875 m 1.32292,5.29167 h 3.96875" id="path1094-0" inkscape:connector-curvature="0"></path>
    <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" d="m 18.520827,154.125 v -6.61459 m 1.32292,1.32292 h -6.61458 m 6.61458,5.29167 h -6.61458 v -6.61459 h 6.61458 v 6.61459" id="path1111-1" inkscape:connector-curvature="0"></path>
    <path style="fill:#808080;fill-opacity:1;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" d="m 13.229167,119.72916 v 13.22917 H 26.458326 V 119.72916 H 13.229167 m 5.291659,0 v 13.22917 m 5.291671,0 v -13.22917 m -10.58333,2.64584 h 13.229159 m -13.229159,5.29167 h 13.229159" id="path1124-3" inkscape:connector-curvature="0"></path>
    <path style="fill:none;stroke:#000000;stroke-width:0.26458332;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.05833334, 1.05833334;stroke-dashoffset:0;stroke-opacity:1" d="m 26.458337,132.95833 h 2.64583 v -15.875 h -15.875 v 2.64584 m 5.29167,-2.64584 v 2.64584 m 5.29166,-2.64584 v 2.64584 m 5.29167,2.64583 h -2.64583 m 2.64583,5.29167 h -2.64583" id="path1141-9" inkscape:connector-curvature="0"></path>
    <path style="fill:#808080;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="M 13.229167,80.041662 H 39.6875 V 106.5 H 13.229167 V 80.041662 m 5.291667,0 V 106.5 M 23.8125,80.041662 V 106.5 M 29.104167,80.041662 V 106.5 M 34.395834,80.041662 V 106.5 M 13.229167,101.20833 H 39.6875 m 0,-5.291668 H 13.229167 m 0,-5.291667 H 39.6875 m 0,-5.291666 H 13.229167" id="path1204" inkscape:connector-curvature="0"></path>
    <path style="fill:#808080;stroke:#000000;stroke-width:0.26458333;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none" d="m 71.4375,21.83333 h 52.91667 V 74.750015 H 71.4375 V 21.83333 m 10.583334,0 V 74.750015 M 92.604166,21.83333 V 74.750015 M 103.1875,21.83333 V 74.750015 M 113.77084,21.83333 V 74.750015 M 71.4375,64.166665 h 52.91667 m 0,-10.583335 H 71.4375 m 0,-10.583334 h 52.91667 m 0,-10.583332 H 71.4375" id="path1204-2" inkscape:connector-curvature="0"></path>
    <path style="fill:#808080;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;fill-opacity:1" d="M 13.229167,21.83333 H 66.145833 V 74.749996 H 13.229167 Z m 5.291667,0 V 74.749996 M 29.104167,21.83333 v 52.916666 m -5.291667,0 V 21.83333 m 10.583334,0 v 52.916666 m 5.291666,0 V 21.83333 m 5.291667,0 v 52.916666 m 5.291666,0 V 21.83333 m 5.291667,0 v 52.916666 m 5.291667,0 V 21.83333 m 5.291666,5.291666 H 13.229167 m 0,5.291667 h 52.916666 m 0,5.291667 H 13.229167 m 0,5.291666 h 52.916666 m 0,5.291667 H 13.229167 m 0,5.291667 h 52.916666 m 0,5.291666 H 13.229167 m 0,5.291667 h 52.916666 m 0,5.291667 H 13.229167" id="path1236" inkscape:connector-curvature="0"></path>
    <path style="fill:#ff0000;fill-opacity:1;stroke:#000000;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 129.64583,21.83333 h 26.45834 v 52.916664 h -26.45834 z m 5.29167,0 V 74.749994 M 145.52083,21.83333 v 52.916664 m -5.29167,0 V 21.83333 m 10.58334,0 v 52.916664 m 5.29167,-47.624998 h -26.45834 m 0,5.291667 h 26.45834 m 0,5.291667 h -26.45834 m 0,5.291666 h 26.45834 m 0,5.291668 h -26.45834 m 0,5.29167 h 26.45834 m 0,5.29166 h -26.45834 m 0,5.29167 h 26.45834 m 0,5.29167 h -26.45834" id="path1236-8" inkscape:connector-curvature="0" sodipodi:nodetypes="ccccccccccccccccccccccccccccccc"></path>
  </g>
</svg>
</div>
<div class="title">Figure 23. Multiple Aspect Sparse Image</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The mip tail regions are presented here in 2D arrays simply for figure size
reasons.
Each mip tail is logically a single array of sparse blocks with an
implementation-dependent mapping of texels or compressed texel blocks to
sparse blocks.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In the figure above the depth, stencil, and metadata aspects all have unique
sparse properties.
The per-texel stencil data is <span class="eq">¼</span> the size of the depth data,
hence the stencil sparse blocks include <span class="eq">4 ×</span> the number of
texels.
The sparse block size in bytes for all of the aspects is identical and
defined by <code>VkMemoryRequirements</code>::<code>alignment</code>.</p>
</div>
<div class="sect4">
<h5 id="_metadata"><a class="anchor" href="chap32.html#_metadata"></a>Metadata</h5>
<div class="paragraph">
<p>The metadata aspect of an image has the following constraints:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All metadata is reported in the mip tail region of the metadata aspect.</p>
</li>
<li>
<p>All metadata <strong class="purple">must</strong> be bound prior to device use of the sparse image.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sparsememory-sparse-memory-aliasing"><a class="anchor" href="chap32.html#sparsememory-sparse-memory-aliasing"></a>32.5. Sparse Memory Aliasing</h3>
<div class="paragraph">
<p>By default sparse resources have the same aliasing rules as non-sparse
resources.
See <a href="chap12.html#resources-memory-aliasing">Memory Aliasing</a> for more information.</p>
</div>
<div class="paragraph">
<p><code>VkDevice</code> objects that have the
<a href="chap41.html#features-sparseResidencyAliased">sparseResidencyAliased</a> feature enabled
are able to use the <code>VK_BUFFER_CREATE_SPARSE_ALIASED_BIT</code> and
<code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code> flags for resource creation.
These flags allow resources to access physical memory bound into multiple
locations within one or more sparse resources in a <em>data consistent</em>
fashion.
This means that reading physical memory from multiple aliased locations will
return the same value.</p>
</div>
<div class="paragraph">
<p>Care <strong class="purple">must</strong> be taken when performing a write operation to aliased physical
memory.
Memory dependencies <strong class="purple">must</strong> be used to separate writes to one alias from reads
or writes to another alias.
Writes to aliased memory that are not properly guarded against accesses to
different aliases will have undefined results for all accesses to the
aliased memory.</p>
</div>
<div class="paragraph">
<p>Applications that wish to make use of data consistent sparse memory aliasing
<strong class="purple">must</strong> abide by the following guidelines:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All sparse resources that are bound to aliased physical memory <strong class="purple">must</strong> be
created with the <code>VK_BUFFER_CREATE_SPARSE_ALIASED_BIT</code> /
<code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code> flag.</p>
</li>
<li>
<p>All resources that access aliased physical memory <strong class="purple">must</strong> interpret the
memory in the same way.
This implies the following:</p>
<div class="ulist">
<ul>
<li>
<p>Buffers and images <strong class="purple">cannot</strong> alias the same physical memory in a data
consistent fashion.
The physical memory ranges <strong class="purple">must</strong> be used exclusively by buffers or used
exclusively by images for data consistency to be guaranteed.</p>
</li>
<li>
<p>Memory in sparse image mip tail regions <strong class="purple">cannot</strong> access aliased memory
in a data consistent fashion.</p>
</li>
<li>
<p>Sparse images that alias the same physical memory <strong class="purple">must</strong> have compatible
formats and be using the same sparse image block shape in order to
access aliased memory in a data consistent fashion.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Failure to follow any of the above guidelines will require the application
to abide by the normal, non-sparse resource <a href="chap12.html#resources-memory-aliasing">aliasing rules</a>.
In this case memory <strong class="purple">cannot</strong> be accessed in a data consistent fashion.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Enabling sparse resource memory aliasing <strong class="purple">can</strong> be a way to lower physical
memory use, but it <strong class="purple">may</strong> reduce performance on some implementations.
An application developer <strong class="purple">can</strong> test on their target HW and balance the memory
/ performance trade-offs measured.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="_sparse_resource_implementation_guidelines_informative"><a class="anchor" href="chap32.html#_sparse_resource_implementation_guidelines_informative"></a>32.6. Sparse Resource Implementation Guidelines (Informative)</h3>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>This section is Informative.
It is included to aid in implementors’ understanding of sparse resources.</p>
</div>
<div class="paragraph">
<div class="title">Device Virtual Address</div>
<p>The basic <code>sparseBinding</code> feature allows the resource to reserve its own
device virtual address range at resource creation time rather than relying
on a bind operation to set this.
Without any other creation flags, no other constraints are relaxed compared
to normal resources.
All pages <strong class="purple">must</strong> be bound to physical memory before the device accesses the
resource.</p>
</div>
<div class="paragraph">
<p>The <a href="chap32.html#features-sparseResidency">sparse residency</a> features allow sparse
resources to be used even when not all pages are bound to memory.
Implementations that support access to unbound pages without causing a fault
<strong class="purple">may</strong> support <code>residencyNonResidentStrict</code>.</p>
</div>
<div class="paragraph">
<p>Not faulting on access to unbound pages is not enough to support
<code>residencyNonResidentStrict</code>.
An implementation <strong class="purple">must</strong> also guarantee that reads after writes to unbound
regions of the resource always return data for the read as if the memory
contains zeros.
Depending on any caching hierarchy of the implementation this <strong class="purple">may</strong> not
always be possible.</p>
</div>
<div class="paragraph">
<p>Any implementation that does not fault, but does not guarantee correct read
values <strong class="purple">must</strong> not support <code>residencyNonResidentStrict</code>.</p>
</div>
<div class="paragraph">
<p>Any implementation that <strong class="purple">cannot</strong> access unbound pages without causing a fault
will require the implementation to bind the entire device virtual address
range to physical memory.
Any pages that the application does not bind to memory <strong class="purple">may</strong> be bound to one
(or more) "`placeholder" physical page(s) allocated by the implementation.
Given the following properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A process <strong class="purple">must</strong> not access memory from another process</p>
</li>
<li>
<p>Reads return undefined values</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is sufficient for each host process to allocate these placeholder pages
and use them for all resources in that process.
Implementations <strong class="purple">may</strong> allocate more often (per instance, per device, or per
resource).</p>
</div>
<div class="paragraph">
<div class="title">Binding Memory</div>
<p>The byte size reported in <code>VkMemoryRequirements</code>::<code>size</code> <strong class="purple">must</strong> be
greater than or equal to the amount of physical memory <strong class="purple">required</strong> to fully
populate the resource.
Some implementations require “holes” in the device virtual address range
that are never accessed.
These holes <strong class="purple">may</strong> be included in the <code>size</code> reported for the resource.</p>
</div>
<div class="paragraph">
<p>Including or not including the device virtual address holes in the resource
size will alter how the implementation provides support for
<code>VkSparseImageOpaqueMemoryBindInfo</code>.
This operation <strong class="purple">must</strong> be supported for all sparse images, even ones created
with <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the holes are included in the size, this bind function becomes very
easy.
In most cases the <code>resourceOffset</code> is simply a device virtual
address offset and the implementation can easily determine what device
virtual address to bind.
The cost is that the application <strong class="purple">may</strong> allocate more physical memory for
the resource than it needs.</p>
</li>
<li>
<p>If the holes are not included in the size, the application <strong class="purple">can</strong> allocate
less physical memory than otherwise for the resource.
However, in this case the implementation <strong class="purple">must</strong> account for the holes
when mapping <code>resourceOffset</code> to the actual device virtual address
intended to be mapped.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>If the application always uses <code>VkSparseImageMemoryBindInfo</code> to bind
memory for the non-tail mip levels, any holes that are present in the
resource size <strong class="purple">may</strong> never be bound.</p>
</div>
<div class="paragraph">
<p>Since <code>VkSparseImageMemoryBindInfo</code> uses texel locations to determine
which device virtual addresses to bind, it is impossible to bind device
virtual address holes with this operation.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<div class="title">Binding Metadata Memory</div>
<p>All metadata for sparse images have their own sparse properties and are
embedded in the mip tail region for said properties.
See the <a href="chap32.html#sparsememory-multiaspect">Multiaspect</a> section for details.</p>
</div>
<div class="paragraph">
<p>Given that metadata is in a mip tail region, and the mip tail region <strong class="purple">must</strong>
be reported as contiguous (either globally or per-array-layer), some
implementations will have to resort to complicated offset → device virtual
address mapping for handling <code>VkSparseImageOpaqueMemoryBindInfo</code>.</p>
</div>
<div class="paragraph">
<p>To make this easier on the implementation, the
<code>VK_SPARSE_MEMORY_BIND_METADATA_BIT</code> explicitly specifies when metadata
is bound with <code>VkSparseImageOpaqueMemoryBindInfo</code>.
When this flag is not present, the <code>resourceOffset</code> <strong class="purple">may</strong> be treated as a
strict device virtual address offset.</p>
</div>
<div class="paragraph">
<p>When <code>VK_SPARSE_MEMORY_BIND_METADATA_BIT</code> is present, the
<code>resourceOffset</code> <strong class="purple">must</strong> have been derived explicitly from the
<code>imageMipTailOffset</code> in the sparse resource properties returned for the
metadata aspect.
By manipulating the value returned for <code>imageMipTailOffset</code>, the
<code>resourceOffset</code> does not have to correlate directly to a device virtual
address offset, and <strong class="purple">may</strong> instead be whatever value makes it easiest for the
implementation to derive the correct device virtual address.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sparsememory-resourceapi"><a class="anchor" href="chap32.html#sparsememory-resourceapi"></a>32.7. Sparse Resource API</h3>
<div class="paragraph">
<p>The APIs related to sparse resources are grouped into the following
categories:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="chap32.html#sparsememory-physicalfeatures">Physical Device Features</a></p>
</li>
<li>
<p><a href="chap32.html#sparsememory-physicalprops">Physical Device Sparse Properties</a></p>
</li>
<li>
<p><a href="chap32.html#sparsememory-format-props">Sparse Image Format Properties</a></p>
</li>
<li>
<p><a href="chap32.html#sparsememory-resource-creation">Sparse Resource Creation</a></p>
</li>
<li>
<p><a href="chap32.html#sparsememory-memory-requirements">Sparse Resource Memory Requirements</a></p>
</li>
<li>
<p><a href="chap32.html#sparsememory-resource-binding">Binding Resource Memory</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="sparsememory-physicalfeatures"><a class="anchor" href="chap32.html#sparsememory-physicalfeatures"></a>32.7.1. Physical Device Features</h4>
<div class="paragraph">
<p>Some sparse-resource related features are reported and enabled in
<code>VkPhysicalDeviceFeatures</code>.
These features <strong class="purple">must</strong> be supported and enabled on the <code>VkDevice</code> object
before applications <strong class="purple">can</strong> use them.
See <a href="chap41.html">Physical Device Features</a> for information on how to get and
set enabled device features, and for more detailed explanations of these
features.</p>
</div>
<div class="sect4">
<h5 id="_sparse_physical_device_features"><a class="anchor" href="chap32.html#_sparse_physical_device_features"></a>Sparse Physical Device Features</h5>
<div class="ulist">
<ul>
<li>
<p><code>sparseBinding</code>: Support for creating <a href="chap12.html#VkBuffer">VkBuffer</a> and
<code>VkImage</code> objects with the <code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code>
and <code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> flags, respectively.</p>
</li>
<li>
<p><code>sparseResidencyBuffer</code>: Support for creating <a href="chap12.html#VkBuffer">VkBuffer</a> objects
with the <code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code> flag.</p>
</li>
<li>
<p><code>sparseResidencyImage2D</code>: Support for creating 2D single-sampled
<code>VkImage</code> objects with <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>.</p>
</li>
<li>
<p><code>sparseResidencyImage3D</code>: Support for creating 3D <a href="chap12.html#VkImage">VkImage</a>
objects with <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>.</p>
</li>
<li>
<p><code>sparseResidency2Samples</code>: Support for creating 2D <a href="chap12.html#VkImage">VkImage</a>
objects with 2 samples and <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>.</p>
</li>
<li>
<p><code>sparseResidency4Samples</code>: Support for creating 2D <a href="chap12.html#VkImage">VkImage</a>
objects with 4 samples and <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>.</p>
</li>
<li>
<p><code>sparseResidency8Samples</code>: Support for creating 2D <a href="chap12.html#VkImage">VkImage</a>
objects with 8 samples and <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>.</p>
</li>
<li>
<p><code>sparseResidency16Samples</code>: Support for creating 2D <a href="chap12.html#VkImage">VkImage</a>
objects with 16 samples and <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>.</p>
</li>
<li>
<p><code>sparseResidencyAliased</code>: Support for creating <a href="chap12.html#VkBuffer">VkBuffer</a> and
<code>VkImage</code> objects with the <code>VK_BUFFER_CREATE_SPARSE_ALIASED_BIT</code>
and <code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code> flags, respectively.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="sparsememory-physicalprops"><a class="anchor" href="chap32.html#sparsememory-physicalprops"></a>32.7.2. Physical Device Sparse Properties</h4>
<div class="paragraph">
<p>Some features of the implementation are not possible to disable, and are
reported to allow applications to alter their sparse resource usage
accordingly.
These read-only capabilities are reported in the
<a href="chap5.html#VkPhysicalDeviceProperties">VkPhysicalDeviceProperties</a>::<code>sparseProperties</code> member, which is a
<code>VkPhysicalDeviceSparseProperties</code> structure.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkPhysicalDeviceSparseProperties</code> structure is defined as:</p>
</div>
<div id="VkPhysicalDeviceSparseProperties" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkPhysicalDeviceSparseProperties</span> <span class="p">{</span>
    <span class="n">VkBool32</span>    <span class="n">residencyStandard2DBlockShape</span><span class="p">;</span>
    <span class="n">VkBool32</span>    <span class="n">residencyStandard2DMultisampleBlockShape</span><span class="p">;</span>
    <span class="n">VkBool32</span>    <span class="n">residencyStandard3DBlockShape</span><span class="p">;</span>
    <span class="n">VkBool32</span>    <span class="n">residencyAlignedMipSize</span><span class="p">;</span>
    <span class="n">VkBool32</span>    <span class="n">residencyNonResidentStrict</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkPhysicalDeviceSparseProperties</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>residencyStandard2DBlockShape</code> is <code>VK_TRUE</code> if the physical
device will access all single-sample 2D sparse resources using the
standard sparse image block shapes (based on image format), as described
in the <a href="chap32.html#sparsememory-sparseblockshapessingle">Standard Sparse Image
Block Shapes (Single Sample)</a> table.
If this property is not supported the value returned in the
<code>imageGranularity</code> member of the <code>VkSparseImageFormatProperties</code>
structure for single-sample 2D images is not <strong class="purple">required</strong> to match the
standard sparse image block dimensions listed in the table.</p>
</li>
<li>
<p><code>residencyStandard2DMultisampleBlockShape</code> is <code>VK_TRUE</code> if the
physical device will access all multisample 2D sparse resources using
the standard sparse image block shapes (based on image format), as
described in the <a href="chap32.html#sparsememory-sparseblockshapesmsaa">Standard Sparse
Image Block Shapes (MSAA)</a> table.
If this property is not supported, the value returned in the
<code>imageGranularity</code> member of the <code>VkSparseImageFormatProperties</code>
structure for multisample 2D images is not <strong class="purple">required</strong> to match the
standard sparse image block dimensions listed in the table.</p>
</li>
<li>
<p><code>residencyStandard3DBlockShape</code> is <code>VK_TRUE</code> if the physical
device will access all 3D sparse resources using the standard sparse
image block shapes (based on image format), as described in the
<a href="chap32.html#sparsememory-sparseblockshapessingle">Standard Sparse Image Block
Shapes (Single Sample)</a> table.
If this property is not supported, the value returned in the
<code>imageGranularity</code> member of the <code>VkSparseImageFormatProperties</code>
structure for 3D images is not <strong class="purple">required</strong> to match the standard sparse
image block dimensions listed in the table.</p>
</li>
<li>
<p><code>residencyAlignedMipSize</code> is <code>VK_TRUE</code> if images with mip level
dimensions that are not integer multiples of the corresponding
dimensions of the sparse image block <strong class="purple">may</strong> be placed in the mip tail.
If this property is not reported, only mip levels with dimensions
smaller than the <code>imageGranularity</code> member of the
<code>VkSparseImageFormatProperties</code> structure will be placed in the mip
tail.
If this property is reported the implementation is allowed to return
<code>VK_SPARSE_IMAGE_FORMAT_ALIGNED_MIP_SIZE_BIT</code> in the <code>flags</code>
member of <code>VkSparseImageFormatProperties</code>, indicating that mip level
dimensions that are not integer multiples of the corresponding
dimensions of the sparse image block will be placed in the mip tail.</p>
</li>
<li>
<p><code>residencyNonResidentStrict</code> specifies whether the physical device
<strong class="purple">can</strong> consistently access non-resident regions of a resource.
If this property is <code>VK_TRUE</code>, access to non-resident regions of
resources will be guaranteed to return values as if the resource was
populated with 0; writes to non-resident regions will be discarded.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="sparsememory-format-props"><a class="anchor" href="chap32.html#sparsememory-format-props"></a>32.7.3. Sparse Image Format Properties</h4>
<div class="paragraph">
<p>Given that certain aspects of sparse image support, including the sparse
image block dimensions, <strong class="purple">may</strong> be implementation-dependent,
<a href="chap32.html#vkGetPhysicalDeviceSparseImageFormatProperties">vkGetPhysicalDeviceSparseImageFormatProperties</a> <strong class="purple">can</strong> be used to query
for sparse image format properties prior to resource creation.
This command is used to check whether a given set of sparse image parameters
is supported and what the sparse image block shape will be.</p>
</div>
<div class="sect4">
<h5 id="_sparse_image_format_properties_api"><a class="anchor" href="chap32.html#_sparse_image_format_properties_api"></a>Sparse Image Format Properties API</h5>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkSparseImageFormatProperties</code> structure is defined as:</p>
</div>
<div id="VkSparseImageFormatProperties" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkSparseImageFormatProperties</span> <span class="p">{</span>
    <span class="n">VkImageAspectFlags</span>          <span class="n">aspectMask</span><span class="p">;</span>
    <span class="n">VkExtent3D</span>                  <span class="n">imageGranularity</span><span class="p">;</span>
    <span class="n">VkSparseImageFormatFlags</span>    <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkSparseImageFormatProperties</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>aspectMask</code> is a bitmask <a href="chap12.html#VkImageAspectFlagBits">VkImageAspectFlagBits</a> specifying
which aspects of the image the properties apply to.</p>
</li>
<li>
<p><code>imageGranularity</code> is the width, height, and depth of the sparse
image block in texels or compressed texel blocks.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap32.html#VkSparseImageFormatFlagBits">VkSparseImageFormatFlagBits</a> specifying
additional information about the sparse resource.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">may</strong> be set in <a href="chap32.html#VkSparseImageFormatProperties">VkSparseImageFormatProperties</a>::<code>flags</code>,
specifying additional information about the sparse resource, are:</p>
</div>
<div id="VkSparseImageFormatFlagBits" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkSparseImageFormatFlagBits</span> <span class="p">{</span>
    <span class="n">VK_SPARSE_IMAGE_FORMAT_SINGLE_MIPTAIL_BIT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_SPARSE_IMAGE_FORMAT_ALIGNED_MIP_SIZE_BIT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_SPARSE_IMAGE_FORMAT_NONSTANDARD_BLOCK_SIZE_BIT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkSparseImageFormatFlagBits</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_SPARSE_IMAGE_FORMAT_SINGLE_MIPTAIL_BIT</code> specifies that the image
uses a single mip tail region for all array layers.</p>
</li>
<li>
<p><code>VK_SPARSE_IMAGE_FORMAT_ALIGNED_MIP_SIZE_BIT</code> specifies that the
first mip level whose dimensions are not integer multiples of the
corresponding dimensions of the sparse image block begins the mip tail
region.</p>
</li>
<li>
<p><code>VK_SPARSE_IMAGE_FORMAT_NONSTANDARD_BLOCK_SIZE_BIT</code> specifies that
the image uses non-standard sparse image block dimensions, and the
<code>imageGranularity</code> values do not match the standard sparse image
block dimensions for the given format.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkSparseImageFormatFlags" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkSparseImageFormatFlags</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkSparseImageFormatFlags</code> is a bitmask type for setting a mask of zero
or more <a href="chap32.html#VkSparseImageFormatFlagBits">VkSparseImageFormatFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><code>vkGetPhysicalDeviceSparseImageFormatProperties</code> returns an array of
<a href="chap32.html#VkSparseImageFormatProperties">VkSparseImageFormatProperties</a>.
Each element will describe properties for one set of image aspects that are
bound simultaneously in the image.
This is usually one element for each aspect in the image, but for
interleaved depth/stencil images there is only one element describing the
combined aspects.</p>
</div>
<div id="vkGetPhysicalDeviceSparseImageFormatProperties" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkGetPhysicalDeviceSparseImageFormatProperties</span><span class="p">(</span>
    <span class="n">VkPhysicalDevice</span>                            <span class="n">physicalDevice</span><span class="p">,</span>
    <span class="n">VkFormat</span>                                    <span class="n">format</span><span class="p">,</span>
    <span class="n">VkImageType</span>                                 <span class="n">type</span><span class="p">,</span>
    <span class="n">VkSampleCountFlagBits</span>                       <span class="n">samples</span><span class="p">,</span>
    <span class="n">VkImageUsageFlags</span>                           <span class="n">usage</span><span class="p">,</span>
    <span class="n">VkImageTiling</span>                               <span class="n">tiling</span><span class="p">,</span>
    <span class="kt">uint32_t</span><span class="o">*</span>                                   <span class="n">pPropertyCount</span><span class="p">,</span>
    <span class="n">VkSparseImageFormatProperties</span><span class="o">*</span>              <span class="n">pProperties</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>physicalDevice</code> is the physical device from which to query the
sparse image format properties.</p>
</li>
<li>
<p><code>format</code> is the image format.</p>
</li>
<li>
<p><code>type</code> is the dimensionality of image.</p>
</li>
<li>
<p><code>samples</code> is a <a href="chap42.html#VkSampleCountFlagBits">VkSampleCountFlagBits</a> value specifying the
number of samples per texel.</p>
</li>
<li>
<p><code>usage</code> is a bitmask describing the intended usage of the image.</p>
</li>
<li>
<p><code>tiling</code> is the tiling arrangement of the texel blocks in memory.</p>
</li>
<li>
<p><code>pPropertyCount</code> is a pointer to an integer related to the number of
sparse format properties available or queried, as described below.</p>
</li>
<li>
<p><code>pProperties</code> is either <code>NULL</code> or a pointer to an array of
<a href="chap32.html#VkSparseImageFormatProperties">VkSparseImageFormatProperties</a> structures.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>pProperties</code> is <code>NULL</code>, then the number of sparse format properties
available is returned in <code>pPropertyCount</code>.
Otherwise, <code>pPropertyCount</code> <strong class="purple">must</strong> point to a variable set by the user to
the number of elements in the <code>pProperties</code> array, and on return the
variable is overwritten with the number of structures actually written to
<code>pProperties</code>.
If <code>pPropertyCount</code> is less than the number of sparse format properties
available, at most <code>pPropertyCount</code> structures will be written.</p>
</div>
<div class="paragraph">
<p>If <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> is not supported for the given
arguments, <code>pPropertyCount</code> will be set to zero upon return, and no data
will be written to <code>pProperties</code>.</p>
</div>
<div class="paragraph">
<p>Multiple aspects are returned for depth/stencil images that are implemented
as separate planes by the implementation.
The depth and stencil data planes each have unique
<code>VkSparseImageFormatProperties</code> data.</p>
</div>
<div class="paragraph">
<p>Depth/stencil images with depth and stencil data interleaved into a single
plane will return a single <code>VkSparseImageFormatProperties</code> structure
with the <code>aspectMask</code> set to <code>VK_IMAGE_ASPECT_DEPTH_BIT</code> |
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetPhysicalDeviceSparseImageFormatProperties-samples-01094" href="chap32.html#VUID-vkGetPhysicalDeviceSparseImageFormatProperties-samples-01094"></a> <span class="vuid">VUID-vkGetPhysicalDeviceSparseImageFormatProperties-samples-01094</span><br>

<code>samples</code> <strong class="purple">must</strong> be a bit value that is set in
<code>VkImageFormatProperties</code>::<code>sampleCounts</code> returned by
<code>vkGetPhysicalDeviceImageFormatProperties</code> with <code>format</code>,
<code>type</code>, <code>tiling</code>, and <code>usage</code> equal to those in this command
and <code>flags</code> equal to the value that is set in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>flags</code> when the image is created</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetPhysicalDeviceSparseImageFormatProperties-physicalDevice-parameter" href="chap32.html#VUID-vkGetPhysicalDeviceSparseImageFormatProperties-physicalDevice-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceSparseImageFormatProperties-physicalDevice-parameter</span><br>
 <code>physicalDevice</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkPhysicalDevice">VkPhysicalDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceSparseImageFormatProperties-format-parameter" href="chap32.html#VUID-vkGetPhysicalDeviceSparseImageFormatProperties-format-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceSparseImageFormatProperties-format-parameter</span><br>
 <code>format</code> <strong class="purple">must</strong> be a valid <a href="chap43.html#VkFormat">VkFormat</a> value</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceSparseImageFormatProperties-type-parameter" href="chap32.html#VUID-vkGetPhysicalDeviceSparseImageFormatProperties-type-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceSparseImageFormatProperties-type-parameter</span><br>
 <code>type</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageType">VkImageType</a> value</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceSparseImageFormatProperties-samples-parameter" href="chap32.html#VUID-vkGetPhysicalDeviceSparseImageFormatProperties-samples-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceSparseImageFormatProperties-samples-parameter</span><br>
 <code>samples</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkSampleCountFlagBits">VkSampleCountFlagBits</a> value</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceSparseImageFormatProperties-usage-parameter" href="chap32.html#VUID-vkGetPhysicalDeviceSparseImageFormatProperties-usage-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceSparseImageFormatProperties-usage-parameter</span><br>
 <code>usage</code> <strong class="purple">must</strong> be a valid combination of <a href="chap12.html#VkImageUsageFlagBits">VkImageUsageFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceSparseImageFormatProperties-usage-requiredbitmask" href="chap32.html#VUID-vkGetPhysicalDeviceSparseImageFormatProperties-usage-requiredbitmask"></a> <span class="vuid">VUID-vkGetPhysicalDeviceSparseImageFormatProperties-usage-requiredbitmask</span><br>
 <code>usage</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceSparseImageFormatProperties-tiling-parameter" href="chap32.html#VUID-vkGetPhysicalDeviceSparseImageFormatProperties-tiling-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceSparseImageFormatProperties-tiling-parameter</span><br>
 <code>tiling</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageTiling">VkImageTiling</a> value</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceSparseImageFormatProperties-pPropertyCount-parameter" href="chap32.html#VUID-vkGetPhysicalDeviceSparseImageFormatProperties-pPropertyCount-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceSparseImageFormatProperties-pPropertyCount-parameter</span><br>
 <code>pPropertyCount</code> <strong class="purple">must</strong> be a valid pointer to a <code>uint32_t</code> value</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceSparseImageFormatProperties-pProperties-parameter" href="chap32.html#VUID-vkGetPhysicalDeviceSparseImageFormatProperties-pProperties-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceSparseImageFormatProperties-pProperties-parameter</span><br>
 If the value referenced by <code>pPropertyCount</code> is not <code>0</code>, and <code>pProperties</code> is not <code>NULL</code>, <code>pProperties</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>pPropertyCount</code> <a href="chap32.html#VkSparseImageFormatProperties">VkSparseImageFormatProperties</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><code>vkGetPhysicalDeviceSparseImageFormatProperties2</code> returns an array of
<a href="chap32.html#VkSparseImageFormatProperties2">VkSparseImageFormatProperties2</a>.
Each element will describe properties for one set of image aspects that are
bound simultaneously in the image.
This is usually one element for each aspect in the image, but for
interleaved depth/stencil images there is only one element describing the
combined aspects.</p>
</div>
<div id="vkGetPhysicalDeviceSparseImageFormatProperties2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="kt">void</span> <span class="nf">vkGetPhysicalDeviceSparseImageFormatProperties2</span><span class="p">(</span>
    <span class="n">VkPhysicalDevice</span>                            <span class="n">physicalDevice</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkPhysicalDeviceSparseImageFormatInfo2</span><span class="o">*</span> <span class="n">pFormatInfo</span><span class="p">,</span>
    <span class="kt">uint32_t</span><span class="o">*</span>                                   <span class="n">pPropertyCount</span><span class="p">,</span>
    <span class="n">VkSparseImageFormatProperties2</span><span class="o">*</span>             <span class="n">pProperties</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkGetPhysicalDeviceSparseImageFormatProperties2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_get_physical_device_properties2</span>
<span class="kt">void</span> <span class="nf">vkGetPhysicalDeviceSparseImageFormatProperties2KHR</span><span class="p">(</span>
    <span class="n">VkPhysicalDevice</span>                            <span class="n">physicalDevice</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkPhysicalDeviceSparseImageFormatInfo2</span><span class="o">*</span> <span class="n">pFormatInfo</span><span class="p">,</span>
    <span class="kt">uint32_t</span><span class="o">*</span>                                   <span class="n">pPropertyCount</span><span class="p">,</span>
    <span class="n">VkSparseImageFormatProperties2</span><span class="o">*</span>             <span class="n">pProperties</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>physicalDevice</code> is the physical device from which to query the
sparse image format properties.</p>
</li>
<li>
<p><code>pFormatInfo</code> is a pointer to a
<a href="chap32.html#VkPhysicalDeviceSparseImageFormatInfo2">VkPhysicalDeviceSparseImageFormatInfo2</a> structure containing input
parameters to the command.</p>
</li>
<li>
<p><code>pPropertyCount</code> is a pointer to an integer related to the number of
sparse format properties available or queried, as described below.</p>
</li>
<li>
<p><code>pProperties</code> is either <code>NULL</code> or a pointer to an array of
<a href="chap32.html#VkSparseImageFormatProperties2">VkSparseImageFormatProperties2</a> structures.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkGetPhysicalDeviceSparseImageFormatProperties2</code> behaves identically to
<a href="chap32.html#vkGetPhysicalDeviceSparseImageFormatProperties">vkGetPhysicalDeviceSparseImageFormatProperties</a>, with the ability to
return extended information by adding extending structures to the
<code>pNext</code> chain of its <code>pProperties</code> parameter.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetPhysicalDeviceSparseImageFormatProperties2-physicalDevice-parameter" href="chap32.html#VUID-vkGetPhysicalDeviceSparseImageFormatProperties2-physicalDevice-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceSparseImageFormatProperties2-physicalDevice-parameter</span><br>
 <code>physicalDevice</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkPhysicalDevice">VkPhysicalDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceSparseImageFormatProperties2-pFormatInfo-parameter" href="chap32.html#VUID-vkGetPhysicalDeviceSparseImageFormatProperties2-pFormatInfo-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceSparseImageFormatProperties2-pFormatInfo-parameter</span><br>
 <code>pFormatInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap32.html#VkPhysicalDeviceSparseImageFormatInfo2">VkPhysicalDeviceSparseImageFormatInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceSparseImageFormatProperties2-pPropertyCount-parameter" href="chap32.html#VUID-vkGetPhysicalDeviceSparseImageFormatProperties2-pPropertyCount-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceSparseImageFormatProperties2-pPropertyCount-parameter</span><br>
 <code>pPropertyCount</code> <strong class="purple">must</strong> be a valid pointer to a <code>uint32_t</code> value</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceSparseImageFormatProperties2-pProperties-parameter" href="chap32.html#VUID-vkGetPhysicalDeviceSparseImageFormatProperties2-pProperties-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceSparseImageFormatProperties2-pProperties-parameter</span><br>
 If the value referenced by <code>pPropertyCount</code> is not <code>0</code>, and <code>pProperties</code> is not <code>NULL</code>, <code>pProperties</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>pPropertyCount</code> <a href="chap32.html#VkSparseImageFormatProperties2">VkSparseImageFormatProperties2</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkPhysicalDeviceSparseImageFormatInfo2</code> structure is defined as:</p>
</div>
<div id="VkPhysicalDeviceSparseImageFormatInfo2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkPhysicalDeviceSparseImageFormatInfo2</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>          <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>              <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkFormat</span>                 <span class="n">format</span><span class="p">;</span>
    <span class="n">VkImageType</span>              <span class="n">type</span><span class="p">;</span>
    <span class="n">VkSampleCountFlagBits</span>    <span class="n">samples</span><span class="p">;</span>
    <span class="n">VkImageUsageFlags</span>        <span class="n">usage</span><span class="p">;</span>
    <span class="n">VkImageTiling</span>            <span class="n">tiling</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkPhysicalDeviceSparseImageFormatInfo2</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkPhysicalDeviceSparseImageFormatInfo2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_get_physical_device_properties2</span>
<span class="k">typedef</span> <span class="n">VkPhysicalDeviceSparseImageFormatInfo2</span> <span class="n">VkPhysicalDeviceSparseImageFormatInfo2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>format</code> is the image format.</p>
</li>
<li>
<p><code>type</code> is the dimensionality of image.</p>
</li>
<li>
<p><code>samples</code> is a <a href="chap42.html#VkSampleCountFlagBits">VkSampleCountFlagBits</a> value specifying the
number of samples per texel.</p>
</li>
<li>
<p><code>usage</code> is a bitmask describing the intended usage of the image.</p>
</li>
<li>
<p><code>tiling</code> is the tiling arrangement of the texel blocks in memory.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkPhysicalDeviceSparseImageFormatInfo2-samples-01095" href="chap32.html#VUID-VkPhysicalDeviceSparseImageFormatInfo2-samples-01095"></a> <span class="vuid">VUID-VkPhysicalDeviceSparseImageFormatInfo2-samples-01095</span><br>

<code>samples</code> <strong class="purple">must</strong> be a bit value that is set in
<code>VkImageFormatProperties</code>::<code>sampleCounts</code> returned by
<code>vkGetPhysicalDeviceImageFormatProperties</code> with <code>format</code>,
<code>type</code>, <code>tiling</code>, and <code>usage</code> equal to those in this command
and <code>flags</code> equal to the value that is set in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>flags</code> when the image is created</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkPhysicalDeviceSparseImageFormatInfo2-sType-sType" href="chap32.html#VUID-VkPhysicalDeviceSparseImageFormatInfo2-sType-sType"></a> <span class="vuid">VUID-VkPhysicalDeviceSparseImageFormatInfo2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_PHYSICAL_DEVICE_SPARSE_IMAGE_FORMAT_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkPhysicalDeviceSparseImageFormatInfo2-pNext-pNext" href="chap32.html#VUID-VkPhysicalDeviceSparseImageFormatInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkPhysicalDeviceSparseImageFormatInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkPhysicalDeviceSparseImageFormatInfo2-format-parameter" href="chap32.html#VUID-VkPhysicalDeviceSparseImageFormatInfo2-format-parameter"></a> <span class="vuid">VUID-VkPhysicalDeviceSparseImageFormatInfo2-format-parameter</span><br>
 <code>format</code> <strong class="purple">must</strong> be a valid <a href="chap43.html#VkFormat">VkFormat</a> value</p>
</li>
<li>
<p><a id="VUID-VkPhysicalDeviceSparseImageFormatInfo2-type-parameter" href="chap32.html#VUID-VkPhysicalDeviceSparseImageFormatInfo2-type-parameter"></a> <span class="vuid">VUID-VkPhysicalDeviceSparseImageFormatInfo2-type-parameter</span><br>
 <code>type</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageType">VkImageType</a> value</p>
</li>
<li>
<p><a id="VUID-VkPhysicalDeviceSparseImageFormatInfo2-samples-parameter" href="chap32.html#VUID-VkPhysicalDeviceSparseImageFormatInfo2-samples-parameter"></a> <span class="vuid">VUID-VkPhysicalDeviceSparseImageFormatInfo2-samples-parameter</span><br>
 <code>samples</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkSampleCountFlagBits">VkSampleCountFlagBits</a> value</p>
</li>
<li>
<p><a id="VUID-VkPhysicalDeviceSparseImageFormatInfo2-usage-parameter" href="chap32.html#VUID-VkPhysicalDeviceSparseImageFormatInfo2-usage-parameter"></a> <span class="vuid">VUID-VkPhysicalDeviceSparseImageFormatInfo2-usage-parameter</span><br>
 <code>usage</code> <strong class="purple">must</strong> be a valid combination of <a href="chap12.html#VkImageUsageFlagBits">VkImageUsageFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkPhysicalDeviceSparseImageFormatInfo2-usage-requiredbitmask" href="chap32.html#VUID-VkPhysicalDeviceSparseImageFormatInfo2-usage-requiredbitmask"></a> <span class="vuid">VUID-VkPhysicalDeviceSparseImageFormatInfo2-usage-requiredbitmask</span><br>
 <code>usage</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkPhysicalDeviceSparseImageFormatInfo2-tiling-parameter" href="chap32.html#VUID-VkPhysicalDeviceSparseImageFormatInfo2-tiling-parameter"></a> <span class="vuid">VUID-VkPhysicalDeviceSparseImageFormatInfo2-tiling-parameter</span><br>
 <code>tiling</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageTiling">VkImageTiling</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkSparseImageFormatProperties2</code> structure is defined as:</p>
</div>
<div id="VkSparseImageFormatProperties2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkSparseImageFormatProperties2</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                  <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                            <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkSparseImageFormatProperties</span>    <span class="n">properties</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkSparseImageFormatProperties2</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkSparseImageFormatProperties2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_get_physical_device_properties2</span>
<span class="k">typedef</span> <span class="n">VkSparseImageFormatProperties2</span> <span class="n">VkSparseImageFormatProperties2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>properties</code> is a <a href="chap32.html#VkSparseImageFormatProperties">VkSparseImageFormatProperties</a> structure
which is populated with the same values as in
<a href="chap32.html#vkGetPhysicalDeviceSparseImageFormatProperties">vkGetPhysicalDeviceSparseImageFormatProperties</a>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSparseImageFormatProperties2-sType-sType" href="chap32.html#VUID-VkSparseImageFormatProperties2-sType-sType"></a> <span class="vuid">VUID-VkSparseImageFormatProperties2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_SPARSE_IMAGE_FORMAT_PROPERTIES_2</code></p>
</li>
<li>
<p><a id="VUID-VkSparseImageFormatProperties2-pNext-pNext" href="chap32.html#VUID-VkSparseImageFormatProperties2-pNext-pNext"></a> <span class="vuid">VUID-VkSparseImageFormatProperties2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="sparsememory-resource-creation"><a class="anchor" href="chap32.html#sparsememory-resource-creation"></a>32.7.4. Sparse Resource Creation</h4>
<div class="paragraph">
<p>Sparse resources require that one or more sparse feature flags be specified
(as part of the <code>VkPhysicalDeviceFeatures</code> structure described
previously in the <a href="chap32.html#sparsememory-physicalfeatures">Physical Device Features</a>
section) when calling <a href="chap5.html#vkCreateDevice">vkCreateDevice</a>.
When the appropriate device features are enabled, the
<code>VK_BUFFER_CREATE_SPARSE_*</code> and <code>VK_IMAGE_CREATE_SPARSE_*</code> flags
<strong class="purple">can</strong> be used.
See <a href="chap12.html#vkCreateBuffer">vkCreateBuffer</a> and <a href="chap12.html#vkCreateImage">vkCreateImage</a> for details of the resource
creation APIs.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Specifying <code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code> or
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> requires specifying
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code> or
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>, respectively, as well.
This means that resources <strong class="purple">must</strong> be created with the appropriate
<code>*_SPARSE_BINDING_BIT</code> to be used with the sparse binding command
(<code>vkQueueBindSparse</code>).</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="sparsememory-memory-requirements"><a class="anchor" href="chap32.html#sparsememory-memory-requirements"></a>32.7.5. Sparse Resource Memory Requirements</h4>
<div class="paragraph">
<p>Sparse resources have specific memory requirements related to binding sparse
memory.
These memory requirements are reported differently for <code>VkBuffer</code>
objects and <code>VkImage</code> objects.</p>
</div>
<div class="sect4">
<h5 id="sparsememory-memory-buffer-fully-resident"><a class="anchor" href="chap32.html#sparsememory-memory-buffer-fully-resident"></a>Buffer and Fully-Resident Images</h5>
<div class="paragraph">
<p>Buffers (both fully and partially resident) and fully-resident images <strong class="purple">can</strong>
be bound to memory using only the data from <code>VkMemoryRequirements</code>.
For all sparse resources the <code>VkMemoryRequirements</code>::<code>alignment</code>
member specifies both the bindable sparse block size in bytes and <strong class="purple">required</strong>
alignment of <code>VkDeviceMemory</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="sparsememory-memory-partially-resident"><a class="anchor" href="chap32.html#sparsememory-memory-partially-resident"></a>Partially Resident Images</h5>
<div class="paragraph">
<p>Partially resident images have a different method for binding memory.
As with buffers and fully resident images, the
<code>VkMemoryRequirements</code>::<code>alignment</code> field specifies the bindable
sparse block size in bytes for the image.</p>
</div>
<div class="paragraph">
<p>Requesting sparse memory requirements for <code>VkImage</code> objects using
<code>vkGetImageSparseMemoryRequirements</code> will return an array of one or more
<code>VkSparseImageMemoryRequirements</code> structures.
Each structure describes the sparse memory requirements for a group of
aspects of the image.</p>
</div>
<div class="paragraph">
<p>The sparse image <strong class="purple">must</strong> have been created using the
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> flag to retrieve valid sparse
image memory requirements.</p>
</div>
</div>
<div class="sect4">
<h5 id="_sparse_image_memory_requirements"><a class="anchor" href="chap32.html#_sparse_image_memory_requirements"></a>Sparse Image Memory Requirements</h5>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkSparseImageMemoryRequirements</code> structure is defined as:</p>
</div>
<div id="VkSparseImageMemoryRequirements" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkSparseImageMemoryRequirements</span> <span class="p">{</span>
    <span class="n">VkSparseImageFormatProperties</span>    <span class="n">formatProperties</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                         <span class="n">imageMipTailFirstLod</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>                     <span class="n">imageMipTailSize</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>                     <span class="n">imageMipTailOffset</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>                     <span class="n">imageMipTailStride</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkSparseImageMemoryRequirements</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>formatProperties</code> is a <a href="chap32.html#VkSparseImageFormatProperties">VkSparseImageFormatProperties</a>
structure specifying properties of the image format.</p>
</li>
<li>
<p><code>imageMipTailFirstLod</code> is the first mip level at which image
subresources are included in the mip tail region.</p>
</li>
<li>
<p><code>imageMipTailSize</code> is the memory size (in bytes) of the mip tail
region.
If <code>formatProperties.flags</code> contains
<code>VK_SPARSE_IMAGE_FORMAT_SINGLE_MIPTAIL_BIT</code>, this is the size of the
whole mip tail, otherwise this is the size of the mip tail of a single
array layer.
This value is guaranteed to be a multiple of the sparse block size in
bytes.</p>
</li>
<li>
<p><code>imageMipTailOffset</code> is the opaque memory offset used with
<a href="chap32.html#VkSparseImageOpaqueMemoryBindInfo">VkSparseImageOpaqueMemoryBindInfo</a> to bind the mip tail region(s).</p>
</li>
<li>
<p><code>imageMipTailStride</code> is the offset stride between each array-layer’s
mip tail, if <code>formatProperties.flags</code> does not contain
<code>VK_SPARSE_IMAGE_FORMAT_SINGLE_MIPTAIL_BIT</code> (otherwise the value is
undefined).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To query sparse memory requirements for an image, call:</p>
</div>
<div id="vkGetImageSparseMemoryRequirements" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkGetImageSparseMemoryRequirements</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">image</span><span class="p">,</span>
    <span class="kt">uint32_t</span><span class="o">*</span>                                   <span class="n">pSparseMemoryRequirementCount</span><span class="p">,</span>
    <span class="n">VkSparseImageMemoryRequirements</span><span class="o">*</span>            <span class="n">pSparseMemoryRequirements</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image.</p>
</li>
<li>
<p><code>image</code> is the <a href="chap12.html#VkImage">VkImage</a> object to get the memory requirements
for.</p>
</li>
<li>
<p><code>pSparseMemoryRequirementCount</code> is a pointer to an integer related
to the number of sparse memory requirements available or queried, as
described below.</p>
</li>
<li>
<p><code>pSparseMemoryRequirements</code> is either <code>NULL</code> or a pointer to an
array of <code>VkSparseImageMemoryRequirements</code> structures.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>pSparseMemoryRequirements</code> is <code>NULL</code>, then the number of sparse
memory requirements available is returned in
<code>pSparseMemoryRequirementCount</code>.
Otherwise, <code>pSparseMemoryRequirementCount</code> <strong class="purple">must</strong> point to a variable set
by the user to the number of elements in the <code>pSparseMemoryRequirements</code>
array, and on return the variable is overwritten with the number of
structures actually written to <code>pSparseMemoryRequirements</code>.
If <code>pSparseMemoryRequirementCount</code> is less than the number of sparse
memory requirements available, at most <code>pSparseMemoryRequirementCount</code>
structures will be written.</p>
</div>
<div class="paragraph">
<p>If the image was not created with <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>
then <code>pSparseMemoryRequirementCount</code> will be set to zero and
<code>pSparseMemoryRequirements</code> will not be written to.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>It is legal for an implementation to report a larger value in
<code>VkMemoryRequirements</code>::<code>size</code> than would be obtained by adding
together memory sizes for all <code>VkSparseImageMemoryRequirements</code> returned
by <code>vkGetImageSparseMemoryRequirements</code>.
This <strong class="purple">may</strong> occur when the implementation requires unused padding in the
address range describing the resource.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageSparseMemoryRequirements-device-parameter" href="chap32.html#VUID-vkGetImageSparseMemoryRequirements-device-parameter"></a> <span class="vuid">VUID-vkGetImageSparseMemoryRequirements-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageSparseMemoryRequirements-image-parameter" href="chap32.html#VUID-vkGetImageSparseMemoryRequirements-image-parameter"></a> <span class="vuid">VUID-vkGetImageSparseMemoryRequirements-image-parameter</span><br>
 <code>image</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageSparseMemoryRequirements-pSparseMemoryRequirementCount-parameter" href="chap32.html#VUID-vkGetImageSparseMemoryRequirements-pSparseMemoryRequirementCount-parameter"></a> <span class="vuid">VUID-vkGetImageSparseMemoryRequirements-pSparseMemoryRequirementCount-parameter</span><br>
 <code>pSparseMemoryRequirementCount</code> <strong class="purple">must</strong> be a valid pointer to a <code>uint32_t</code> value</p>
</li>
<li>
<p><a id="VUID-vkGetImageSparseMemoryRequirements-pSparseMemoryRequirements-parameter" href="chap32.html#VUID-vkGetImageSparseMemoryRequirements-pSparseMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetImageSparseMemoryRequirements-pSparseMemoryRequirements-parameter</span><br>
 If the value referenced by <code>pSparseMemoryRequirementCount</code> is not <code>0</code>, and <code>pSparseMemoryRequirements</code> is not <code>NULL</code>, <code>pSparseMemoryRequirements</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>pSparseMemoryRequirementCount</code> <a href="chap32.html#VkSparseImageMemoryRequirements">VkSparseImageMemoryRequirements</a> structures</p>
</li>
<li>
<p><a id="VUID-vkGetImageSparseMemoryRequirements-image-parent" href="chap32.html#VUID-vkGetImageSparseMemoryRequirements-image-parent"></a> <span class="vuid">VUID-vkGetImageSparseMemoryRequirements-image-parent</span><br>
 <code>image</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To query sparse memory requirements for an image, call:</p>
</div>
<div id="vkGetImageSparseMemoryRequirements2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="kt">void</span> <span class="nf">vkGetImageSparseMemoryRequirements2</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkImageSparseMemoryRequirementsInfo2</span><span class="o">*</span> <span class="n">pInfo</span><span class="p">,</span>
    <span class="kt">uint32_t</span><span class="o">*</span>                                   <span class="n">pSparseMemoryRequirementCount</span><span class="p">,</span>
    <span class="n">VkSparseImageMemoryRequirements2</span><span class="o">*</span>           <span class="n">pSparseMemoryRequirements</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkGetImageSparseMemoryRequirements2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_get_memory_requirements2</span>
<span class="kt">void</span> <span class="nf">vkGetImageSparseMemoryRequirements2KHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkImageSparseMemoryRequirementsInfo2</span><span class="o">*</span> <span class="n">pInfo</span><span class="p">,</span>
    <span class="kt">uint32_t</span><span class="o">*</span>                                   <span class="n">pSparseMemoryRequirementCount</span><span class="p">,</span>
    <span class="n">VkSparseImageMemoryRequirements2</span><span class="o">*</span>           <span class="n">pSparseMemoryRequirements</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image.</p>
</li>
<li>
<p><code>pInfo</code> is a pointer to a <code>VkImageSparseMemoryRequirementsInfo2</code>
structure containing parameters required for the memory requirements
query.</p>
</li>
<li>
<p><code>pSparseMemoryRequirementCount</code> is a pointer to an integer related
to the number of sparse memory requirements available or queried, as
described below.</p>
</li>
<li>
<p><code>pSparseMemoryRequirements</code> is either <code>NULL</code> or a pointer to an
array of <code>VkSparseImageMemoryRequirements2</code> structures.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageSparseMemoryRequirements2-device-parameter" href="chap32.html#VUID-vkGetImageSparseMemoryRequirements2-device-parameter"></a> <span class="vuid">VUID-vkGetImageSparseMemoryRequirements2-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageSparseMemoryRequirements2-pInfo-parameter" href="chap32.html#VUID-vkGetImageSparseMemoryRequirements2-pInfo-parameter"></a> <span class="vuid">VUID-vkGetImageSparseMemoryRequirements2-pInfo-parameter</span><br>
 <code>pInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap32.html#VkImageSparseMemoryRequirementsInfo2">VkImageSparseMemoryRequirementsInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetImageSparseMemoryRequirements2-pSparseMemoryRequirementCount-parameter" href="chap32.html#VUID-vkGetImageSparseMemoryRequirements2-pSparseMemoryRequirementCount-parameter"></a> <span class="vuid">VUID-vkGetImageSparseMemoryRequirements2-pSparseMemoryRequirementCount-parameter</span><br>
 <code>pSparseMemoryRequirementCount</code> <strong class="purple">must</strong> be a valid pointer to a <code>uint32_t</code> value</p>
</li>
<li>
<p><a id="VUID-vkGetImageSparseMemoryRequirements2-pSparseMemoryRequirements-parameter" href="chap32.html#VUID-vkGetImageSparseMemoryRequirements2-pSparseMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetImageSparseMemoryRequirements2-pSparseMemoryRequirements-parameter</span><br>
 If the value referenced by <code>pSparseMemoryRequirementCount</code> is not <code>0</code>, and <code>pSparseMemoryRequirements</code> is not <code>NULL</code>, <code>pSparseMemoryRequirements</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>pSparseMemoryRequirementCount</code> <a href="chap32.html#VkSparseImageMemoryRequirements2">VkSparseImageMemoryRequirements2</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the sparse memory requirements for an image resource without
creating an object, call:</p>
</div>
<div id="vkGetDeviceImageSparseMemoryRequirements" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="kt">void</span> <span class="nf">vkGetDeviceImageSparseMemoryRequirements</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkDeviceImageMemoryRequirements</span><span class="o">*</span>      <span class="n">pInfo</span><span class="p">,</span>
    <span class="kt">uint32_t</span><span class="o">*</span>                                   <span class="n">pSparseMemoryRequirementCount</span><span class="p">,</span>
    <span class="n">VkSparseImageMemoryRequirements2</span><span class="o">*</span>           <span class="n">pSparseMemoryRequirements</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkGetDeviceImageSparseMemoryRequirementsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_maintenance4</span>
<span class="kt">void</span> <span class="nf">vkGetDeviceImageSparseMemoryRequirementsKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkDeviceImageMemoryRequirements</span><span class="o">*</span>      <span class="n">pInfo</span><span class="p">,</span>
    <span class="kt">uint32_t</span><span class="o">*</span>                                   <span class="n">pSparseMemoryRequirementCount</span><span class="p">,</span>
    <span class="n">VkSparseImageMemoryRequirements2</span><span class="o">*</span>           <span class="n">pSparseMemoryRequirements</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device intended to own the image.</p>
</li>
<li>
<p><code>pInfo</code> is a pointer to a <a href="chap12.html#VkDeviceImageMemoryRequirements">VkDeviceImageMemoryRequirements</a>
structure containing parameters required for the memory requirements
query.</p>
</li>
<li>
<p><code>pSparseMemoryRequirementCount</code> is a pointer to an integer related
to the number of sparse memory requirements available or queried, as
described below.</p>
</li>
<li>
<p><code>pSparseMemoryRequirements</code> is either <code>NULL</code> or a pointer to an
array of <code>VkSparseImageMemoryRequirements2</code> structures.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetDeviceImageSparseMemoryRequirements-device-parameter" href="chap32.html#VUID-vkGetDeviceImageSparseMemoryRequirements-device-parameter"></a> <span class="vuid">VUID-vkGetDeviceImageSparseMemoryRequirements-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetDeviceImageSparseMemoryRequirements-pInfo-parameter" href="chap32.html#VUID-vkGetDeviceImageSparseMemoryRequirements-pInfo-parameter"></a> <span class="vuid">VUID-vkGetDeviceImageSparseMemoryRequirements-pInfo-parameter</span><br>
 <code>pInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkDeviceImageMemoryRequirements">VkDeviceImageMemoryRequirements</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetDeviceImageSparseMemoryRequirements-pSparseMemoryRequirementCount-parameter" href="chap32.html#VUID-vkGetDeviceImageSparseMemoryRequirements-pSparseMemoryRequirementCount-parameter"></a> <span class="vuid">VUID-vkGetDeviceImageSparseMemoryRequirements-pSparseMemoryRequirementCount-parameter</span><br>
 <code>pSparseMemoryRequirementCount</code> <strong class="purple">must</strong> be a valid pointer to a <code>uint32_t</code> value</p>
</li>
<li>
<p><a id="VUID-vkGetDeviceImageSparseMemoryRequirements-pSparseMemoryRequirements-parameter" href="chap32.html#VUID-vkGetDeviceImageSparseMemoryRequirements-pSparseMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetDeviceImageSparseMemoryRequirements-pSparseMemoryRequirements-parameter</span><br>
 If the value referenced by <code>pSparseMemoryRequirementCount</code> is not <code>0</code>, and <code>pSparseMemoryRequirements</code> is not <code>NULL</code>, <code>pSparseMemoryRequirements</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>pSparseMemoryRequirementCount</code> <a href="chap32.html#VkSparseImageMemoryRequirements2">VkSparseImageMemoryRequirements2</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageSparseMemoryRequirementsInfo2</code> structure is defined as:</p>
</div>
<div id="VkImageSparseMemoryRequirementsInfo2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageSparseMemoryRequirementsInfo2</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImage</span>            <span class="n">image</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageSparseMemoryRequirementsInfo2</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkImageSparseMemoryRequirementsInfo2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_get_memory_requirements2</span>
<span class="k">typedef</span> <span class="n">VkImageSparseMemoryRequirementsInfo2</span> <span class="n">VkImageSparseMemoryRequirementsInfo2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>image</code> is the image to query.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSparseMemoryRequirementsInfo2-sType-sType" href="chap32.html#VUID-VkImageSparseMemoryRequirementsInfo2-sType-sType"></a> <span class="vuid">VUID-VkImageSparseMemoryRequirementsInfo2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_SPARSE_MEMORY_REQUIREMENTS_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkImageSparseMemoryRequirementsInfo2-pNext-pNext" href="chap32.html#VUID-VkImageSparseMemoryRequirementsInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkImageSparseMemoryRequirementsInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkImageSparseMemoryRequirementsInfo2-image-parameter" href="chap32.html#VUID-VkImageSparseMemoryRequirementsInfo2-image-parameter"></a> <span class="vuid">VUID-VkImageSparseMemoryRequirementsInfo2-image-parameter</span><br>
 <code>image</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkSparseImageMemoryRequirements2</code> structure is defined as:</p>
</div>
<div id="VkSparseImageMemoryRequirements2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkSparseImageMemoryRequirements2</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                    <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                              <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkSparseImageMemoryRequirements</span>    <span class="n">memoryRequirements</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkSparseImageMemoryRequirements2</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkSparseImageMemoryRequirements2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_get_memory_requirements2</span>
<span class="k">typedef</span> <span class="n">VkSparseImageMemoryRequirements2</span> <span class="n">VkSparseImageMemoryRequirements2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>memoryRequirements</code> is a <a href="chap32.html#VkSparseImageMemoryRequirements">VkSparseImageMemoryRequirements</a>
structure describing the memory requirements of the sparse image.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSparseImageMemoryRequirements2-sType-sType" href="chap32.html#VUID-VkSparseImageMemoryRequirements2-sType-sType"></a> <span class="vuid">VUID-VkSparseImageMemoryRequirements2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_SPARSE_IMAGE_MEMORY_REQUIREMENTS_2</code></p>
</li>
<li>
<p><a id="VUID-VkSparseImageMemoryRequirements2-pNext-pNext" href="chap32.html#VUID-VkSparseImageMemoryRequirements2-pNext-pNext"></a> <span class="vuid">VUID-VkSparseImageMemoryRequirements2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="sparsememory-resource-binding"><a class="anchor" href="chap32.html#sparsememory-resource-binding"></a>32.7.6. Binding Resource Memory</h4>
<div class="paragraph">
<p>Non-sparse resources are backed by a single physical allocation prior to
device use (via <code>vkBindImageMemory</code> or <code>vkBindBufferMemory</code>), and
their backing <strong class="purple">must</strong> not be changed.
On the other hand, sparse resources <strong class="purple">can</strong> be bound to memory non-contiguously
and these bindings <strong class="purple">can</strong> be altered during the lifetime of the resource.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>It is important to note that freeing a <code>VkDeviceMemory</code> object with
<code>vkFreeMemory</code> will not cause resources (or resource regions) bound to
the memory object to become unbound.
Applications <strong class="purple">must</strong> not access resources bound to memory that has been freed.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Sparse memory bindings execute on a queue that includes the
<code>VK_QUEUE_SPARSE_BINDING_BIT</code> bit.
Applications <strong class="purple">must</strong> use <a href="chap7.html">synchronization primitives</a> to
guarantee that other queues do not access ranges of memory concurrently with
a binding change.
Applications <strong class="purple">can</strong> access other ranges of the same resource while a bind
operation is executing.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Implementations <strong class="purple">must</strong> provide a guarantee that simultaneously binding sparse
blocks while another queue accesses those same sparse blocks via a sparse
resource <strong class="purple">must</strong> not access memory owned by another process or otherwise
corrupt the system.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>While some implementations <strong class="purple">may</strong> include <code>VK_QUEUE_SPARSE_BINDING_BIT</code>
support in queue families that also include graphics and compute support,
other implementations <strong class="purple">may</strong> only expose a
<code>VK_QUEUE_SPARSE_BINDING_BIT</code>-only queue family.
In either case, applications <strong class="purple">must</strong> use <a href="chap7.html">synchronization
primitives</a> to explicitly request any ordering dependencies between sparse
memory binding operations and other graphics/compute/transfer operations, as
sparse binding operations are not automatically ordered against command
buffer execution, even within a single queue.</p>
</div>
<div class="paragraph">
<p>When binding memory explicitly for the <code>VK_IMAGE_ASPECT_METADATA_BIT</code>
the application <strong class="purple">must</strong> use the <code>VK_SPARSE_MEMORY_BIND_METADATA_BIT</code> in
the <code>VkSparseMemoryBind</code>::<code>flags</code> field when binding memory.
Binding memory for metadata is done the same way as binding memory for the
mip tail, with the addition of the <code>VK_SPARSE_MEMORY_BIND_METADATA_BIT</code>
flag.</p>
</div>
<div class="paragraph">
<p>Binding the mip tail for any aspect <strong class="purple">must</strong> only be performed using
<a href="chap32.html#VkSparseImageOpaqueMemoryBindInfo">VkSparseImageOpaqueMemoryBindInfo</a>.
If <code>formatProperties.flags</code> contains
<code>VK_SPARSE_IMAGE_FORMAT_SINGLE_MIPTAIL_BIT</code>, then it <strong class="purple">can</strong> be bound with
a single <a href="chap32.html#VkSparseMemoryBind">VkSparseMemoryBind</a> structure, with <code>resourceOffset</code> =
<code>imageMipTailOffset</code> and <code>size</code> = <code>imageMipTailSize</code>.</p>
</div>
<div class="paragraph">
<p>If <code>formatProperties.flags</code> does not contain
<code>VK_SPARSE_IMAGE_FORMAT_SINGLE_MIPTAIL_BIT</code> then the offset for the mip
tail in each array layer is given as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="n">arrayMipTailOffset</span> <span class="o">=</span> <span class="n">imageMipTailOffset</span> <span class="o">+</span> <span class="n">arrayLayer</span> <span class="o">*</span> <span class="n">imageMipTailStride</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>and the mip tail <strong class="purple">can</strong> be bound with <code>layerCount</code> <a href="chap32.html#VkSparseMemoryBind">VkSparseMemoryBind</a>
structures, each using <code>size</code> = <code>imageMipTailSize</code> and
<code>resourceOffset</code> = <code>arrayMipTailOffset</code> as defined above.</p>
</div>
<div class="paragraph">
<p>Sparse memory binding is handled by the following APIs and related data
structures.</p>
</div>
<div class="sect4">
<h5 id="sparsemem-memory-binding"><a class="anchor" href="chap32.html#sparsemem-memory-binding"></a>Sparse Memory Binding Functions</h5>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkSparseMemoryBind</code> structure is defined as:</p>
</div>
<div id="VkSparseMemoryBind" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkSparseMemoryBind</span> <span class="p">{</span>
    <span class="n">VkDeviceSize</span>               <span class="n">resourceOffset</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>               <span class="n">size</span><span class="p">;</span>
    <span class="n">VkDeviceMemory</span>             <span class="n">memory</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>               <span class="n">memoryOffset</span><span class="p">;</span>
    <span class="n">VkSparseMemoryBindFlags</span>    <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkSparseMemoryBind</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>resourceOffset</code> is the offset into the resource.</p>
</li>
<li>
<p><code>size</code> is the size of the memory region to be bound.</p>
</li>
<li>
<p><code>memory</code> is the <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> object that the range of the
resource is bound to.
If <code>memory</code> is <a href="chap52.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, the range is unbound.</p>
</li>
<li>
<p><code>memoryOffset</code> is the offset into the <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> object to
bind the resource range to.
If <code>memory</code> is <a href="chap52.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, this value is ignored.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap32.html#VkSparseMemoryBindFlagBits">VkSparseMemoryBindFlagBits</a> specifying
usage of the binding operation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <em>binding range</em> <span class="eq">[<code>resourceOffset</code>, <code>resourceOffset</code> + 
<code>size</code>)</span> has different constraints based on <code>flags</code>.
If <code>flags</code> contains <code>VK_SPARSE_MEMORY_BIND_METADATA_BIT</code>, the
binding range <strong class="purple">must</strong> be within the mip tail region of the metadata aspect.
This metadata region is defined by:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">metadataRegion = [base, base + 
<code>imageMipTailSize</code>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">base = <code>imageMipTailOffset</code> + 
<code>imageMipTailStride</code> × n</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>and <code>imageMipTailOffset</code>, <code>imageMipTailSize</code>, and
<code>imageMipTailStride</code> values are from the
<a href="chap32.html#VkSparseImageMemoryRequirements">VkSparseImageMemoryRequirements</a> corresponding to the metadata aspect
of the image, and <span class="eq">n</span> is a valid array layer index for the image,</p>
</div>
<div class="paragraph">
<p><code>imageMipTailStride</code> is considered to be zero for aspects where
<code>VkSparseImageMemoryRequirements</code>::<code>formatProperties.flags</code> contains
<code>VK_SPARSE_IMAGE_FORMAT_SINGLE_MIPTAIL_BIT</code>.</p>
</div>
<div class="paragraph">
<p>If <code>flags</code> does not contain <code>VK_SPARSE_MEMORY_BIND_METADATA_BIT</code>,
the binding range <strong class="purple">must</strong> be within the range
<span class="eq">[0,<a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a>::<code>size</code>)</span>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSparseMemoryBind-memory-01096" href="chap32.html#VUID-VkSparseMemoryBind-memory-01096"></a> <span class="vuid">VUID-VkSparseMemoryBind-memory-01096</span><br>

If <code>memory</code> is not <a href="chap52.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>memory</code> and
<code>memoryOffset</code> <strong class="purple">must</strong> match the memory requirements of the resource,
as described in section <a href="chap12.html#resources-association">Resource Memory Association</a></p>
</li>
<li>
<p><a id="VUID-VkSparseMemoryBind-memory-01097" href="chap32.html#VUID-VkSparseMemoryBind-memory-01097"></a> <span class="vuid">VUID-VkSparseMemoryBind-memory-01097</span><br>

If <code>memory</code> is not <a href="chap52.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>memory</code> <strong class="purple">must</strong> not have
been created with a memory type that reports
<code>VK_MEMORY_PROPERTY_LAZILY_ALLOCATED_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkSparseMemoryBind-size-01098" href="chap32.html#VUID-VkSparseMemoryBind-size-01098"></a> <span class="vuid">VUID-VkSparseMemoryBind-size-01098</span><br>

<code>size</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkSparseMemoryBind-resourceOffset-01099" href="chap32.html#VUID-VkSparseMemoryBind-resourceOffset-01099"></a> <span class="vuid">VUID-VkSparseMemoryBind-resourceOffset-01099</span><br>

<code>resourceOffset</code> <strong class="purple">must</strong> be less than the size of the resource</p>
</li>
<li>
<p><a id="VUID-VkSparseMemoryBind-size-01100" href="chap32.html#VUID-VkSparseMemoryBind-size-01100"></a> <span class="vuid">VUID-VkSparseMemoryBind-size-01100</span><br>

<code>size</code> <strong class="purple">must</strong> be less than or equal to the size of the resource minus
<code>resourceOffset</code></p>
</li>
<li>
<p><a id="VUID-VkSparseMemoryBind-memoryOffset-01101" href="chap32.html#VUID-VkSparseMemoryBind-memoryOffset-01101"></a> <span class="vuid">VUID-VkSparseMemoryBind-memoryOffset-01101</span><br>

<code>memoryOffset</code> <strong class="purple">must</strong> be less than the size of <code>memory</code></p>
</li>
<li>
<p><a id="VUID-VkSparseMemoryBind-size-01102" href="chap32.html#VUID-VkSparseMemoryBind-size-01102"></a> <span class="vuid">VUID-VkSparseMemoryBind-size-01102</span><br>

<code>size</code> <strong class="purple">must</strong> be less than or equal to the size of <code>memory</code> minus
<code>memoryOffset</code></p>
</li>
<li>
<p><a id="VUID-VkSparseMemoryBind-memory-02730" href="chap32.html#VUID-VkSparseMemoryBind-memory-02730"></a> <span class="vuid">VUID-VkSparseMemoryBind-memory-02730</span><br>

If <code>memory</code> was created with
<a href="chap11.html#VkExportMemoryAllocateInfo">VkExportMemoryAllocateInfo</a>::<code>handleTypes</code> not equal to <code>0</code>, at
least one handle type it contained <strong class="purple">must</strong> also have been set in
<a href="chap12.html#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> or
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> when the
resource was created</p>
</li>
<li>
<p><a id="VUID-VkSparseMemoryBind-memory-02731" href="chap32.html#VUID-VkSparseMemoryBind-memory-02731"></a> <span class="vuid">VUID-VkSparseMemoryBind-memory-02731</span><br>

If <code>memory</code> was created by a memory import operation, the external
handle type of the imported memory <strong class="purple">must</strong> also have been set in
<a href="chap12.html#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> or
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> when the
resource was created</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSparseMemoryBind-memory-parameter" href="chap32.html#VUID-VkSparseMemoryBind-memory-parameter"></a> <span class="vuid">VUID-VkSparseMemoryBind-memory-parameter</span><br>
 If <code>memory</code> is not <a href="chap52.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>memory</code> <strong class="purple">must</strong> be a valid <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> handle</p>
</li>
<li>
<p><a id="VUID-VkSparseMemoryBind-flags-parameter" href="chap32.html#VUID-VkSparseMemoryBind-flags-parameter"></a> <span class="vuid">VUID-VkSparseMemoryBind-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap32.html#VkSparseMemoryBindFlagBits">VkSparseMemoryBindFlagBits</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in <a href="chap32.html#VkSparseMemoryBind">VkSparseMemoryBind</a>::<code>flags</code>, specifying
usage of a sparse memory binding operation, are:</p>
</div>
<div id="VkSparseMemoryBindFlagBits" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkSparseMemoryBindFlagBits</span> <span class="p">{</span>
    <span class="n">VK_SPARSE_MEMORY_BIND_METADATA_BIT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkSparseMemoryBindFlagBits</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_SPARSE_MEMORY_BIND_METADATA_BIT</code> specifies that the memory being
bound is only for the metadata aspect.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkSparseMemoryBindFlags" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkSparseMemoryBindFlags</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkSparseMemoryBindFlags</code> is a bitmask type for setting a mask of zero
or more <a href="chap32.html#VkSparseMemoryBindFlagBits">VkSparseMemoryBindFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Memory is bound to <code>VkBuffer</code> objects created with the
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code> flag using the following
structure:</p>
</div>
<div id="VkSparseBufferMemoryBindInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkSparseBufferMemoryBindInfo</span> <span class="p">{</span>
    <span class="n">VkBuffer</span>                     <span class="n">buffer</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                     <span class="n">bindCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkSparseMemoryBind</span><span class="o">*</span>    <span class="n">pBinds</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkSparseBufferMemoryBindInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>buffer</code> is the <a href="chap12.html#VkBuffer">VkBuffer</a> object to be bound.</p>
</li>
<li>
<p><code>bindCount</code> is the number of <a href="chap32.html#VkSparseMemoryBind">VkSparseMemoryBind</a> structures in
the <code>pBinds</code> array.</p>
</li>
<li>
<p><code>pBinds</code> is a pointer to an array of <a href="chap32.html#VkSparseMemoryBind">VkSparseMemoryBind</a>
structures.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSparseBufferMemoryBindInfo-buffer-parameter" href="chap32.html#VUID-VkSparseBufferMemoryBindInfo-buffer-parameter"></a> <span class="vuid">VUID-VkSparseBufferMemoryBindInfo-buffer-parameter</span><br>
 <code>buffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkSparseBufferMemoryBindInfo-pBinds-parameter" href="chap32.html#VUID-VkSparseBufferMemoryBindInfo-pBinds-parameter"></a> <span class="vuid">VUID-VkSparseBufferMemoryBindInfo-pBinds-parameter</span><br>
 <code>pBinds</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>bindCount</code> valid <a href="chap32.html#VkSparseMemoryBind">VkSparseMemoryBind</a> structures</p>
</li>
<li>
<p><a id="VUID-VkSparseBufferMemoryBindInfo-bindCount-arraylength" href="chap32.html#VUID-VkSparseBufferMemoryBindInfo-bindCount-arraylength"></a> <span class="vuid">VUID-VkSparseBufferMemoryBindInfo-bindCount-arraylength</span><br>
 <code>bindCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Memory is bound to opaque regions of <code>VkImage</code> objects created with the
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> flag using the following structure:</p>
</div>
<div id="VkSparseImageOpaqueMemoryBindInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkSparseImageOpaqueMemoryBindInfo</span> <span class="p">{</span>
    <span class="n">VkImage</span>                      <span class="n">image</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                     <span class="n">bindCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkSparseMemoryBind</span><span class="o">*</span>    <span class="n">pBinds</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkSparseImageOpaqueMemoryBindInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>image</code> is the <a href="chap12.html#VkImage">VkImage</a> object to be bound.</p>
</li>
<li>
<p><code>bindCount</code> is the number of <a href="chap32.html#VkSparseMemoryBind">VkSparseMemoryBind</a> structures in
the <code>pBinds</code> array.</p>
</li>
<li>
<p><code>pBinds</code> is a pointer to an array of <a href="chap32.html#VkSparseMemoryBind">VkSparseMemoryBind</a>
structures.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSparseImageOpaqueMemoryBindInfo-pBinds-01103" href="chap32.html#VUID-VkSparseImageOpaqueMemoryBindInfo-pBinds-01103"></a> <span class="vuid">VUID-VkSparseImageOpaqueMemoryBindInfo-pBinds-01103</span><br>

If the <code>flags</code> member of any element of <code>pBinds</code> contains
<code>VK_SPARSE_MEMORY_BIND_METADATA_BIT</code>, the binding range defined
<strong class="purple">must</strong> be within the mip tail region of the metadata aspect of
<code>image</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSparseImageOpaqueMemoryBindInfo-image-parameter" href="chap32.html#VUID-VkSparseImageOpaqueMemoryBindInfo-image-parameter"></a> <span class="vuid">VUID-VkSparseImageOpaqueMemoryBindInfo-image-parameter</span><br>
 <code>image</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkSparseImageOpaqueMemoryBindInfo-pBinds-parameter" href="chap32.html#VUID-VkSparseImageOpaqueMemoryBindInfo-pBinds-parameter"></a> <span class="vuid">VUID-VkSparseImageOpaqueMemoryBindInfo-pBinds-parameter</span><br>
 <code>pBinds</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>bindCount</code> valid <a href="chap32.html#VkSparseMemoryBind">VkSparseMemoryBind</a> structures</p>
</li>
<li>
<p><a id="VUID-VkSparseImageOpaqueMemoryBindInfo-bindCount-arraylength" href="chap32.html#VUID-VkSparseImageOpaqueMemoryBindInfo-bindCount-arraylength"></a> <span class="vuid">VUID-VkSparseImageOpaqueMemoryBindInfo-bindCount-arraylength</span><br>
 <code>bindCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>This operation is normally used to bind memory to fully-resident sparse
images or for mip tail regions of partially resident images.
However, it <strong class="purple">can</strong> also be used to bind memory for the entire binding range of
partially resident images.</p>
</div>
<div class="paragraph">
<p>In case <code>flags</code> does not contain
<code>VK_SPARSE_MEMORY_BIND_METADATA_BIT</code>, the <code>resourceOffset</code> is in the
range <span class="eq">[0, <a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a>::<code>size</code>)</span>, This range includes
data from all aspects of the image, including metadata.
For most implementations this will probably mean that the
<code>resourceOffset</code> is a simple device address offset within the resource.
It is possible for an application to bind a range of memory that includes
both resource data and metadata.
However, the application would not know what part of the image the memory is
used for, or if any range is being used for metadata.</p>
</div>
<div class="paragraph">
<p>When <code>flags</code> contains <code>VK_SPARSE_MEMORY_BIND_METADATA_BIT</code>, the
binding range specified <strong class="purple">must</strong> be within the mip tail region of the metadata
aspect.
In this case the <code>resourceOffset</code> is not <strong class="purple">required</strong> to be a simple device
address offset within the resource.
However, it <em>is</em> defined to be within <span class="eq">[<code>imageMipTailOffset</code>,
<code>imageMipTailOffset</code> +  <code>imageMipTailSize</code>)</span> for the metadata
aspect.
See <a href="chap32.html#VkSparseMemoryBind">VkSparseMemoryBind</a> for the full constraints on binding region with
this flag present.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Memory <strong class="purple">can</strong> be bound to sparse image blocks of <code>VkImage</code> objects created
with the <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> flag using the following
structure:</p>
</div>
<div id="VkSparseImageMemoryBindInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkSparseImageMemoryBindInfo</span> <span class="p">{</span>
    <span class="n">VkImage</span>                           <span class="n">image</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                          <span class="n">bindCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkSparseImageMemoryBind</span><span class="o">*</span>    <span class="n">pBinds</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkSparseImageMemoryBindInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>image</code> is the <a href="chap12.html#VkImage">VkImage</a> object to be bound</p>
</li>
<li>
<p><code>bindCount</code> is the number of <a href="chap32.html#VkSparseImageMemoryBind">VkSparseImageMemoryBind</a>
structures in <code>pBinds</code> array</p>
</li>
<li>
<p><code>pBinds</code> is a pointer to an array of <a href="chap32.html#VkSparseImageMemoryBind">VkSparseImageMemoryBind</a>
structures</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSparseImageMemoryBindInfo-subresource-01722" href="chap32.html#VUID-VkSparseImageMemoryBindInfo-subresource-01722"></a> <span class="vuid">VUID-VkSparseImageMemoryBindInfo-subresource-01722</span><br>

The <code>subresource.mipLevel</code> member of each element of <code>pBinds</code>
<strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-VkSparseImageMemoryBindInfo-subresource-01723" href="chap32.html#VUID-VkSparseImageMemoryBindInfo-subresource-01723"></a> <span class="vuid">VUID-VkSparseImageMemoryBindInfo-subresource-01723</span><br>

The <code>subresource.arrayLayer</code> member of each element of <code>pBinds</code>
<strong class="purple">must</strong> be less than the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-VkSparseImageMemoryBindInfo-image-02901" href="chap32.html#VUID-VkSparseImageMemoryBindInfo-image-02901"></a> <span class="vuid">VUID-VkSparseImageMemoryBindInfo-image-02901</span><br>

<code>image</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> set</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSparseImageMemoryBindInfo-image-parameter" href="chap32.html#VUID-VkSparseImageMemoryBindInfo-image-parameter"></a> <span class="vuid">VUID-VkSparseImageMemoryBindInfo-image-parameter</span><br>
 <code>image</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkSparseImageMemoryBindInfo-pBinds-parameter" href="chap32.html#VUID-VkSparseImageMemoryBindInfo-pBinds-parameter"></a> <span class="vuid">VUID-VkSparseImageMemoryBindInfo-pBinds-parameter</span><br>
 <code>pBinds</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>bindCount</code> valid <a href="chap32.html#VkSparseImageMemoryBind">VkSparseImageMemoryBind</a> structures</p>
</li>
<li>
<p><a id="VUID-VkSparseImageMemoryBindInfo-bindCount-arraylength" href="chap32.html#VUID-VkSparseImageMemoryBindInfo-bindCount-arraylength"></a> <span class="vuid">VUID-VkSparseImageMemoryBindInfo-bindCount-arraylength</span><br>
 <code>bindCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkSparseImageMemoryBind</code> structure is defined as:</p>
</div>
<div id="VkSparseImageMemoryBind" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkSparseImageMemoryBind</span> <span class="p">{</span>
    <span class="n">VkImageSubresource</span>         <span class="n">subresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                 <span class="n">offset</span><span class="p">;</span>
    <span class="n">VkExtent3D</span>                 <span class="n">extent</span><span class="p">;</span>
    <span class="n">VkDeviceMemory</span>             <span class="n">memory</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>               <span class="n">memoryOffset</span><span class="p">;</span>
    <span class="n">VkSparseMemoryBindFlags</span>    <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkSparseImageMemoryBind</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>subresource</code> is the image <em>aspect</em> and region of interest in the
image.</p>
</li>
<li>
<p><code>offset</code> are the coordinates of the first texel within the image
subresource to bind.</p>
</li>
<li>
<p><code>extent</code> is the size in texels of the region within the image
subresource to bind.
The extent <strong class="purple">must</strong> be a multiple of the sparse image block dimensions,
except when binding sparse image blocks along the edge of an image
subresource it <strong class="purple">can</strong> instead be such that any coordinate of
<span class="eq"><code>offset</code> +  <code>extent</code></span> equals the corresponding
dimensions of the image subresource.</p>
</li>
<li>
<p><code>memory</code> is the <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> object that the sparse image
blocks of the image are bound to.
If <code>memory</code> is <a href="chap52.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, the sparse image blocks are
unbound.</p>
</li>
<li>
<p><code>memoryOffset</code> is an offset into <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> object.
If <code>memory</code> is <a href="chap52.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, this value is ignored.</p>
</li>
<li>
<p><code>flags</code> are sparse memory binding flags.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSparseImageMemoryBind-memory-01104" href="chap32.html#VUID-VkSparseImageMemoryBind-memory-01104"></a> <span class="vuid">VUID-VkSparseImageMemoryBind-memory-01104</span><br>

If the <a href="chap41.html#features-sparseResidencyAliased">sparse aliased residency</a>
feature is not enabled, and if any other resources are bound to ranges
of <code>memory</code>, the range of <code>memory</code> being bound <strong class="purple">must</strong> not overlap
with those bound ranges</p>
</li>
<li>
<p><a id="VUID-VkSparseImageMemoryBind-memory-01105" href="chap32.html#VUID-VkSparseImageMemoryBind-memory-01105"></a> <span class="vuid">VUID-VkSparseImageMemoryBind-memory-01105</span><br>

<code>memory</code> and <code>memoryOffset</code> <strong class="purple">must</strong> match the memory requirements
of the calling command’s <code>image</code>, as described in section
<a href="chap12.html#resources-association">Resource Memory Association</a></p>
</li>
<li>
<p><a id="VUID-VkSparseImageMemoryBind-subresource-01106" href="chap32.html#VUID-VkSparseImageMemoryBind-subresource-01106"></a> <span class="vuid">VUID-VkSparseImageMemoryBind-subresource-01106</span><br>

<code>subresource</code> <strong class="purple">must</strong> be a valid image subresource for <code>image</code>
(see <a href="chap12.html#resources-image-views">Image Views</a>)</p>
</li>
<li>
<p><a id="VUID-VkSparseImageMemoryBind-offset-01107" href="chap32.html#VUID-VkSparseImageMemoryBind-offset-01107"></a> <span class="vuid">VUID-VkSparseImageMemoryBind-offset-01107</span><br>

<code>offset.x</code> <strong class="purple">must</strong> be a multiple of the sparse image block width
(<code>VkSparseImageFormatProperties</code>::<code>imageGranularity.width</code>) of
the image</p>
</li>
<li>
<p><a id="VUID-VkSparseImageMemoryBind-extent-01108" href="chap32.html#VUID-VkSparseImageMemoryBind-extent-01108"></a> <span class="vuid">VUID-VkSparseImageMemoryBind-extent-01108</span><br>

<code>extent.width</code> <strong class="purple">must</strong> either be a multiple of the sparse image block
width of the image, or else <span class="eq">(<code>extent.width</code> + 
<code>offset.x</code>)</span> <strong class="purple">must</strong> equal the width of the image subresource</p>
</li>
<li>
<p><a id="VUID-VkSparseImageMemoryBind-offset-01109" href="chap32.html#VUID-VkSparseImageMemoryBind-offset-01109"></a> <span class="vuid">VUID-VkSparseImageMemoryBind-offset-01109</span><br>

<code>offset.y</code> <strong class="purple">must</strong> be a multiple of the sparse image block height
(<code>VkSparseImageFormatProperties</code>::<code>imageGranularity.height</code>) of
the image</p>
</li>
<li>
<p><a id="VUID-VkSparseImageMemoryBind-extent-01110" href="chap32.html#VUID-VkSparseImageMemoryBind-extent-01110"></a> <span class="vuid">VUID-VkSparseImageMemoryBind-extent-01110</span><br>

<code>extent.height</code> <strong class="purple">must</strong> either be a multiple of the sparse image block
height of the image, or else <span class="eq">(<code>extent.height</code> + 
<code>offset.y</code>)</span> <strong class="purple">must</strong> equal the height of the image subresource</p>
</li>
<li>
<p><a id="VUID-VkSparseImageMemoryBind-offset-01111" href="chap32.html#VUID-VkSparseImageMemoryBind-offset-01111"></a> <span class="vuid">VUID-VkSparseImageMemoryBind-offset-01111</span><br>

<code>offset.z</code> <strong class="purple">must</strong> be a multiple of the sparse image block depth
(<code>VkSparseImageFormatProperties</code>::<code>imageGranularity.depth</code>) of
the image</p>
</li>
<li>
<p><a id="VUID-VkSparseImageMemoryBind-extent-01112" href="chap32.html#VUID-VkSparseImageMemoryBind-extent-01112"></a> <span class="vuid">VUID-VkSparseImageMemoryBind-extent-01112</span><br>

<code>extent.depth</code> <strong class="purple">must</strong> either be a multiple of the sparse image block
depth of the image, or else <span class="eq">(<code>extent.depth</code> + 
<code>offset.z</code>)</span> <strong class="purple">must</strong> equal the depth of the image subresource</p>
</li>
<li>
<p><a id="VUID-VkSparseImageMemoryBind-memory-02732" href="chap32.html#VUID-VkSparseImageMemoryBind-memory-02732"></a> <span class="vuid">VUID-VkSparseImageMemoryBind-memory-02732</span><br>

If <code>memory</code> was created with
<a href="chap11.html#VkExportMemoryAllocateInfo">VkExportMemoryAllocateInfo</a>::<code>handleTypes</code> not equal to <code>0</code>, at
least one handle type it contained <strong class="purple">must</strong> also have been set in
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> when the image
was created</p>
</li>
<li>
<p><a id="VUID-VkSparseImageMemoryBind-memory-02733" href="chap32.html#VUID-VkSparseImageMemoryBind-memory-02733"></a> <span class="vuid">VUID-VkSparseImageMemoryBind-memory-02733</span><br>

If <code>memory</code> was created by a memory import operation, the external
handle type of the imported memory <strong class="purple">must</strong> also have been set in
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> when
<code>image</code> was created</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSparseImageMemoryBind-subresource-parameter" href="chap32.html#VUID-VkSparseImageMemoryBind-subresource-parameter"></a> <span class="vuid">VUID-VkSparseImageMemoryBind-subresource-parameter</span><br>
 <code>subresource</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageSubresource">VkImageSubresource</a> structure</p>
</li>
<li>
<p><a id="VUID-VkSparseImageMemoryBind-memory-parameter" href="chap32.html#VUID-VkSparseImageMemoryBind-memory-parameter"></a> <span class="vuid">VUID-VkSparseImageMemoryBind-memory-parameter</span><br>
 If <code>memory</code> is not <a href="chap52.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>memory</code> <strong class="purple">must</strong> be a valid <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> handle</p>
</li>
<li>
<p><a id="VUID-VkSparseImageMemoryBind-flags-parameter" href="chap32.html#VUID-VkSparseImageMemoryBind-flags-parameter"></a> <span class="vuid">VUID-VkSparseImageMemoryBind-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap32.html#VkSparseMemoryBindFlagBits">VkSparseMemoryBindFlagBits</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To submit sparse binding operations to a queue, call:</p>
</div>
<div id="vkQueueBindSparse" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="n">VkResult</span> <span class="nf">vkQueueBindSparse</span><span class="p">(</span>
    <span class="n">VkQueue</span>                                     <span class="n">queue</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">bindInfoCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBindSparseInfo</span><span class="o">*</span>                     <span class="n">pBindInfo</span><span class="p">,</span>
    <span class="n">VkFence</span>                                     <span class="n">fence</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>queue</code> is the queue that the sparse binding operations will be
submitted to.</p>
</li>
<li>
<p><code>bindInfoCount</code> is the number of elements in the <code>pBindInfo</code>
array.</p>
</li>
<li>
<p><code>pBindInfo</code> is a pointer to an array of <a href="chap32.html#VkBindSparseInfo">VkBindSparseInfo</a>
structures, each specifying a sparse binding submission batch.</p>
</li>
<li>
<p><code>fence</code> is an <strong class="purple">optional</strong> handle to a fence to be signaled.
If <code>fence</code> is not <a href="chap52.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, it defines a
<a href="chap7.html#synchronization-fences-signaling">fence signal operation</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkQueueBindSparse</code> is a <a href="chap5.html#devsandqueues-submission">queue submission
command</a>, with each batch defined by an element of <code>pBindInfo</code> as a
<a href="chap32.html#VkBindSparseInfo">VkBindSparseInfo</a> structure.
Batches begin execution in the order they appear in <code>pBindInfo</code>, but
<strong class="purple">may</strong> complete out of order.</p>
</div>
<div class="paragraph">
<p>Within a batch, a given range of a resource <strong class="purple">must</strong> not be bound more than
once.
Across batches, if a range is to be bound to one allocation and offset and
then to another allocation and offset, then the application <strong class="purple">must</strong> guarantee
(usually using semaphores) that the binding operations are executed in the
correct order, as well as to order binding operations against the execution
of command buffer submissions.</p>
</div>
<div class="paragraph">
<p>As no operation to <a href="chap32.html#vkQueueBindSparse">vkQueueBindSparse</a> causes any pipeline stage to
access memory, synchronization primitives used in this command effectively
only define execution dependencies.</p>
</div>
<div class="paragraph">
<p>Additional information about fence and semaphore operation is described in
<a href="chap7.html">the synchronization chapter</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkQueueBindSparse-fence-01113" href="chap32.html#VUID-vkQueueBindSparse-fence-01113"></a> <span class="vuid">VUID-vkQueueBindSparse-fence-01113</span><br>

If <code>fence</code> is not <a href="chap52.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>fence</code> <strong class="purple">must</strong> be
unsignaled</p>
</li>
<li>
<p><a id="VUID-vkQueueBindSparse-fence-01114" href="chap32.html#VUID-vkQueueBindSparse-fence-01114"></a> <span class="vuid">VUID-vkQueueBindSparse-fence-01114</span><br>

If <code>fence</code> is not <a href="chap52.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>fence</code> <strong class="purple">must</strong> not be
associated with any other queue command that has not yet completed
execution on that queue</p>
</li>
<li>
<p><a id="VUID-vkQueueBindSparse-pSignalSemaphores-01115" href="chap32.html#VUID-vkQueueBindSparse-pSignalSemaphores-01115"></a> <span class="vuid">VUID-vkQueueBindSparse-pSignalSemaphores-01115</span><br>

Each element of the <code>pSignalSemaphores</code> member of each element of
<code>pBindInfo</code> <strong class="purple">must</strong> be unsignaled when the semaphore signal operation
it defines is executed on the device</p>
</li>
<li>
<p><a id="VUID-vkQueueBindSparse-pWaitSemaphores-01116" href="chap32.html#VUID-vkQueueBindSparse-pWaitSemaphores-01116"></a> <span class="vuid">VUID-vkQueueBindSparse-pWaitSemaphores-01116</span><br>

When a semaphore wait operation referring to a binary semaphore defined
by any element of the <code>pWaitSemaphores</code> member of any element of
<code>pBindInfo</code> executes on <code>queue</code>, there <strong class="purple">must</strong> be no other queues
waiting on the same semaphore</p>
</li>
<li>
<p><a id="VUID-vkQueueBindSparse-pWaitSemaphores-01117" href="chap32.html#VUID-vkQueueBindSparse-pWaitSemaphores-01117"></a> <span class="vuid">VUID-vkQueueBindSparse-pWaitSemaphores-01117</span><br>

All elements of the <code>pWaitSemaphores</code> member of all elements of the
<code>pBindInfo</code> parameter referring to a binary semaphore <strong class="purple">must</strong> be
semaphores that are signaled, or have
<a href="chap7.html#synchronization-semaphores-signaling">semaphore signal operations</a>
previously submitted for execution</p>
</li>
<li>
<p><a id="VUID-vkQueueBindSparse-pWaitSemaphores-03245" href="chap32.html#VUID-vkQueueBindSparse-pWaitSemaphores-03245"></a> <span class="vuid">VUID-vkQueueBindSparse-pWaitSemaphores-03245</span><br>

All elements of the <code>pWaitSemaphores</code> member of all elements of
<code>pBindInfo</code> created with a <a href="chap7.html#VkSemaphoreType">VkSemaphoreType</a> of
<code>VK_SEMAPHORE_TYPE_BINARY</code> <strong class="purple">must</strong> reference a semaphore signal
operation that has been submitted for execution and any semaphore signal
operations on which it depends (if any) <strong class="purple">must</strong> have also been submitted
for execution</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkQueueBindSparse-queue-parameter" href="chap32.html#VUID-vkQueueBindSparse-queue-parameter"></a> <span class="vuid">VUID-vkQueueBindSparse-queue-parameter</span><br>
 <code>queue</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkQueue">VkQueue</a> handle</p>
</li>
<li>
<p><a id="VUID-vkQueueBindSparse-pBindInfo-parameter" href="chap32.html#VUID-vkQueueBindSparse-pBindInfo-parameter"></a> <span class="vuid">VUID-vkQueueBindSparse-pBindInfo-parameter</span><br>
 If <code>bindInfoCount</code> is not <code>0</code>, <code>pBindInfo</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>bindInfoCount</code> valid <a href="chap32.html#VkBindSparseInfo">VkBindSparseInfo</a> structures</p>
</li>
<li>
<p><a id="VUID-vkQueueBindSparse-fence-parameter" href="chap32.html#VUID-vkQueueBindSparse-fence-parameter"></a> <span class="vuid">VUID-vkQueueBindSparse-fence-parameter</span><br>
 If <code>fence</code> is not <a href="chap52.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>fence</code> <strong class="purple">must</strong> be a valid <a href="chap7.html#VkFence">VkFence</a> handle</p>
</li>
<li>
<p><a id="VUID-vkQueueBindSparse-queuetype" href="chap32.html#VUID-vkQueueBindSparse-queuetype"></a> <span class="vuid">VUID-vkQueueBindSparse-queuetype</span><br>
 The <code>queue</code> <strong class="purple">must</strong> support sparse binding operations</p>
</li>
<li>
<p><a id="VUID-vkQueueBindSparse-commonparent" href="chap32.html#VUID-vkQueueBindSparse-commonparent"></a> <span class="vuid">VUID-vkQueueBindSparse-commonparent</span><br>
 Both of <code>fence</code>, and <code>queue</code> that are valid handles of non-ignored parameters <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>queue</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to <code>fence</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SPARSE_BINDING</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_DEVICE_LOST</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBindSparseInfo</code> structure is defined as:</p>
</div>
<div id="VkBindSparseInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBindSparseInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                 <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                    <span class="n">waitSemaphoreCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkSemaphore</span><span class="o">*</span>                          <span class="n">pWaitSemaphores</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                    <span class="n">bufferBindCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkSparseBufferMemoryBindInfo</span><span class="o">*</span>         <span class="n">pBufferBinds</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                    <span class="n">imageOpaqueBindCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkSparseImageOpaqueMemoryBindInfo</span><span class="o">*</span>    <span class="n">pImageOpaqueBinds</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                    <span class="n">imageBindCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkSparseImageMemoryBindInfo</span><span class="o">*</span>          <span class="n">pImageBinds</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                    <span class="n">signalSemaphoreCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkSemaphore</span><span class="o">*</span>                          <span class="n">pSignalSemaphores</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBindSparseInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>waitSemaphoreCount</code> is the number of semaphores upon which to wait
before executing the sparse binding operations for the batch.</p>
</li>
<li>
<p><code>pWaitSemaphores</code> is a pointer to an array of semaphores upon which
to wait on before the sparse binding operations for this batch begin
execution.
If semaphores to wait on are provided, they define a
<a href="chap7.html#synchronization-semaphores-waiting">semaphore wait operation</a>.</p>
</li>
<li>
<p><code>bufferBindCount</code> is the number of sparse buffer bindings to perform
in the batch.</p>
</li>
<li>
<p><code>pBufferBinds</code> is a pointer to an array of
<a href="chap32.html#VkSparseBufferMemoryBindInfo">VkSparseBufferMemoryBindInfo</a> structures.</p>
</li>
<li>
<p><code>imageOpaqueBindCount</code> is the number of opaque sparse image bindings
to perform.</p>
</li>
<li>
<p><code>pImageOpaqueBinds</code> is a pointer to an array of
<a href="chap32.html#VkSparseImageOpaqueMemoryBindInfo">VkSparseImageOpaqueMemoryBindInfo</a> structures, indicating opaque
sparse image bindings to perform.</p>
</li>
<li>
<p><code>imageBindCount</code> is the number of sparse image bindings to perform.</p>
</li>
<li>
<p><code>pImageBinds</code> is a pointer to an array of
<a href="chap32.html#VkSparseImageMemoryBindInfo">VkSparseImageMemoryBindInfo</a> structures, indicating sparse image
bindings to perform.</p>
</li>
<li>
<p><code>signalSemaphoreCount</code> is the number of semaphores to be signaled
once the sparse binding operations specified by the structure have
completed execution.</p>
</li>
<li>
<p><code>pSignalSemaphores</code> is a pointer to an array of semaphores which
will be signaled when the sparse binding operations for this batch have
completed execution.
If semaphores to be signaled are provided, they define a
<a href="chap7.html#synchronization-semaphores-signaling">semaphore signal operation</a>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindSparseInfo-pWaitSemaphores-03246" href="chap32.html#VUID-VkBindSparseInfo-pWaitSemaphores-03246"></a> <span class="vuid">VUID-VkBindSparseInfo-pWaitSemaphores-03246</span><br>

If any element of <code>pWaitSemaphores</code> or <code>pSignalSemaphores</code> was
created with a <a href="chap7.html#VkSemaphoreType">VkSemaphoreType</a> of <code>VK_SEMAPHORE_TYPE_TIMELINE</code>
then the <code>pNext</code> chain <strong class="purple">must</strong> include a
<a href="chap6.html#VkTimelineSemaphoreSubmitInfo">VkTimelineSemaphoreSubmitInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-VkBindSparseInfo-pNext-03247" href="chap32.html#VUID-VkBindSparseInfo-pNext-03247"></a> <span class="vuid">VUID-VkBindSparseInfo-pNext-03247</span><br>

If the <code>pNext</code> chain of this structure includes a
<a href="chap6.html#VkTimelineSemaphoreSubmitInfo">VkTimelineSemaphoreSubmitInfo</a> structure and any element of
<code>pWaitSemaphores</code> was created with a <a href="chap7.html#VkSemaphoreType">VkSemaphoreType</a> of
<code>VK_SEMAPHORE_TYPE_TIMELINE</code> then its <code>waitSemaphoreValueCount</code>
member <strong class="purple">must</strong> equal <code>waitSemaphoreCount</code></p>
</li>
<li>
<p><a id="VUID-VkBindSparseInfo-pNext-03248" href="chap32.html#VUID-VkBindSparseInfo-pNext-03248"></a> <span class="vuid">VUID-VkBindSparseInfo-pNext-03248</span><br>

If the <code>pNext</code> chain of this structure includes a
<a href="chap6.html#VkTimelineSemaphoreSubmitInfo">VkTimelineSemaphoreSubmitInfo</a> structure and any element of
<code>pSignalSemaphores</code> was created with a <a href="chap7.html#VkSemaphoreType">VkSemaphoreType</a> of
<code>VK_SEMAPHORE_TYPE_TIMELINE</code> then its
<code>signalSemaphoreValueCount</code> member <strong class="purple">must</strong> equal
<code>signalSemaphoreCount</code></p>
</li>
<li>
<p><a id="VUID-VkBindSparseInfo-pSignalSemaphores-03249" href="chap32.html#VUID-VkBindSparseInfo-pSignalSemaphores-03249"></a> <span class="vuid">VUID-VkBindSparseInfo-pSignalSemaphores-03249</span><br>

For each element of <code>pSignalSemaphores</code> created with a
<a href="chap7.html#VkSemaphoreType">VkSemaphoreType</a> of <code>VK_SEMAPHORE_TYPE_TIMELINE</code> the
corresponding element of
<a href="chap6.html#VkTimelineSemaphoreSubmitInfo">VkTimelineSemaphoreSubmitInfo</a>::<code>pSignalSemaphoreValues</code> <strong class="purple">must</strong>
have a value greater than the current value of the semaphore when the
<a href="chap7.html#synchronization-semaphores-signaling">semaphore signal operation</a> is
executed</p>
</li>
<li>
<p><a id="VUID-VkBindSparseInfo-pWaitSemaphores-03250" href="chap32.html#VUID-VkBindSparseInfo-pWaitSemaphores-03250"></a> <span class="vuid">VUID-VkBindSparseInfo-pWaitSemaphores-03250</span><br>

For each element of <code>pWaitSemaphores</code> created with a
<a href="chap7.html#VkSemaphoreType">VkSemaphoreType</a> of <code>VK_SEMAPHORE_TYPE_TIMELINE</code> the
corresponding element of
<a href="chap6.html#VkTimelineSemaphoreSubmitInfo">VkTimelineSemaphoreSubmitInfo</a>::<code>pWaitSemaphoreValues</code> <strong class="purple">must</strong>
have a value which does not differ from the current value of the
semaphore or from the value of any outstanding semaphore wait or signal
operation on that semaphore by more than
<a href="chap5.html#limits-maxTimelineSemaphoreValueDifference"><code>maxTimelineSemaphoreValueDifference</code></a></p>
</li>
<li>
<p><a id="VUID-VkBindSparseInfo-pSignalSemaphores-03251" href="chap32.html#VUID-VkBindSparseInfo-pSignalSemaphores-03251"></a> <span class="vuid">VUID-VkBindSparseInfo-pSignalSemaphores-03251</span><br>

For each element of <code>pSignalSemaphores</code> created with a
<a href="chap7.html#VkSemaphoreType">VkSemaphoreType</a> of <code>VK_SEMAPHORE_TYPE_TIMELINE</code> the
corresponding element of
<a href="chap6.html#VkTimelineSemaphoreSubmitInfo">VkTimelineSemaphoreSubmitInfo</a>::<code>pSignalSemaphoreValues</code> <strong class="purple">must</strong>
have a value which does not differ from the current value of the
semaphore or from the value of any outstanding semaphore wait or signal
operation on that semaphore by more than
<a href="chap5.html#limits-maxTimelineSemaphoreValueDifference"><code>maxTimelineSemaphoreValueDifference</code></a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindSparseInfo-sType-sType" href="chap32.html#VUID-VkBindSparseInfo-sType-sType"></a> <span class="vuid">VUID-VkBindSparseInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BIND_SPARSE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBindSparseInfo-pNext-pNext" href="chap32.html#VUID-VkBindSparseInfo-pNext-pNext"></a> <span class="vuid">VUID-VkBindSparseInfo-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap32.html#VkDeviceGroupBindSparseInfo">VkDeviceGroupBindSparseInfo</a> or <a href="chap6.html#VkTimelineSemaphoreSubmitInfo">VkTimelineSemaphoreSubmitInfo</a></p>
</li>
<li>
<p><a id="VUID-VkBindSparseInfo-sType-unique" href="chap32.html#VUID-VkBindSparseInfo-sType-unique"></a> <span class="vuid">VUID-VkBindSparseInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkBindSparseInfo-pWaitSemaphores-parameter" href="chap32.html#VUID-VkBindSparseInfo-pWaitSemaphores-parameter"></a> <span class="vuid">VUID-VkBindSparseInfo-pWaitSemaphores-parameter</span><br>
 If <code>waitSemaphoreCount</code> is not <code>0</code>, <code>pWaitSemaphores</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>waitSemaphoreCount</code> valid <a href="chap7.html#VkSemaphore">VkSemaphore</a> handles</p>
</li>
<li>
<p><a id="VUID-VkBindSparseInfo-pBufferBinds-parameter" href="chap32.html#VUID-VkBindSparseInfo-pBufferBinds-parameter"></a> <span class="vuid">VUID-VkBindSparseInfo-pBufferBinds-parameter</span><br>
 If <code>bufferBindCount</code> is not <code>0</code>, <code>pBufferBinds</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>bufferBindCount</code> valid <a href="chap32.html#VkSparseBufferMemoryBindInfo">VkSparseBufferMemoryBindInfo</a> structures</p>
</li>
<li>
<p><a id="VUID-VkBindSparseInfo-pImageOpaqueBinds-parameter" href="chap32.html#VUID-VkBindSparseInfo-pImageOpaqueBinds-parameter"></a> <span class="vuid">VUID-VkBindSparseInfo-pImageOpaqueBinds-parameter</span><br>
 If <code>imageOpaqueBindCount</code> is not <code>0</code>, <code>pImageOpaqueBinds</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>imageOpaqueBindCount</code> valid <a href="chap32.html#VkSparseImageOpaqueMemoryBindInfo">VkSparseImageOpaqueMemoryBindInfo</a> structures</p>
</li>
<li>
<p><a id="VUID-VkBindSparseInfo-pImageBinds-parameter" href="chap32.html#VUID-VkBindSparseInfo-pImageBinds-parameter"></a> <span class="vuid">VUID-VkBindSparseInfo-pImageBinds-parameter</span><br>
 If <code>imageBindCount</code> is not <code>0</code>, <code>pImageBinds</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>imageBindCount</code> valid <a href="chap32.html#VkSparseImageMemoryBindInfo">VkSparseImageMemoryBindInfo</a> structures</p>
</li>
<li>
<p><a id="VUID-VkBindSparseInfo-pSignalSemaphores-parameter" href="chap32.html#VUID-VkBindSparseInfo-pSignalSemaphores-parameter"></a> <span class="vuid">VUID-VkBindSparseInfo-pSignalSemaphores-parameter</span><br>
 If <code>signalSemaphoreCount</code> is not <code>0</code>, <code>pSignalSemaphores</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>signalSemaphoreCount</code> valid <a href="chap7.html#VkSemaphore">VkSemaphore</a> handles</p>
</li>
<li>
<p><a id="VUID-VkBindSparseInfo-commonparent" href="chap32.html#VUID-VkBindSparseInfo-commonparent"></a> <span class="vuid">VUID-VkBindSparseInfo-commonparent</span><br>
 Both of the elements of <code>pSignalSemaphores</code>, and the elements of <code>pWaitSemaphores</code> that are valid handles of non-ignored parameters <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>To specify the values to use when waiting for and signaling semaphores
created with a <a href="chap7.html#VkSemaphoreType">VkSemaphoreType</a> of <code>VK_SEMAPHORE_TYPE_TIMELINE</code>,
add a <a href="chap6.html#VkTimelineSemaphoreSubmitInfo">VkTimelineSemaphoreSubmitInfo</a> structure to the <code>pNext</code> chain
of the <a href="chap32.html#VkBindSparseInfo">VkBindSparseInfo</a> structure.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="chap32.html#VkBindSparseInfo">VkBindSparseInfo</a> includes a
<code>VkDeviceGroupBindSparseInfo</code> structure, then that structure includes
device indices specifying which instance of the resources and memory are
bound.</p>
</div>
<div class="paragraph">
<p>The <code>VkDeviceGroupBindSparseInfo</code> structure is defined as:</p>
</div>
<div id="VkDeviceGroupBindSparseInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkDeviceGroupBindSparseInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">resourceDeviceIndex</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">memoryDeviceIndex</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkDeviceGroupBindSparseInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkDeviceGroupBindSparseInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_device_group</span>
<span class="k">typedef</span> <span class="n">VkDeviceGroupBindSparseInfo</span> <span class="n">VkDeviceGroupBindSparseInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>resourceDeviceIndex</code> is a device index indicating which instance of
the resource is bound.</p>
</li>
<li>
<p><code>memoryDeviceIndex</code> is a device index indicating which instance of
the memory the resource instance is bound to.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These device indices apply to all buffer and image memory binds included in
the batch pointing to this structure.
The semaphore waits and signals for the batch are executed only by the
physical device specified by the <code>resourceDeviceIndex</code>.</p>
</div>
<div class="paragraph">
<p>If this structure is not present, <code>resourceDeviceIndex</code> and
<code>memoryDeviceIndex</code> are assumed to be zero.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDeviceGroupBindSparseInfo-resourceDeviceIndex-01118" href="chap32.html#VUID-VkDeviceGroupBindSparseInfo-resourceDeviceIndex-01118"></a> <span class="vuid">VUID-VkDeviceGroupBindSparseInfo-resourceDeviceIndex-01118</span><br>

<code>resourceDeviceIndex</code> and <code>memoryDeviceIndex</code> <strong class="purple">must</strong> both be
valid device indices</p>
</li>
<li>
<p><a id="VUID-VkDeviceGroupBindSparseInfo-memoryDeviceIndex-01119" href="chap32.html#VUID-VkDeviceGroupBindSparseInfo-memoryDeviceIndex-01119"></a> <span class="vuid">VUID-VkDeviceGroupBindSparseInfo-memoryDeviceIndex-01119</span><br>

Each memory allocation bound in this batch <strong class="purple">must</strong> have allocated an
instance for <code>memoryDeviceIndex</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDeviceGroupBindSparseInfo-sType-sType" href="chap32.html#VUID-VkDeviceGroupBindSparseInfo-sType-sType"></a> <span class="vuid">VUID-VkDeviceGroupBindSparseInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_DEVICE_GROUP_BIND_SPARSE_INFO</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div></div>

<nav>
  <a rel="prev" href="chap31.html" class="nav nav-prev" title="Previous page" aria-label="Previous page" aria-keyshortcuts="Left">
        <i class="fa fa-angle-left"></i>
     </a>
  <a rel="next" href="chap33.html" class="nav nav-next" title="Next page" aria-label="Next page" aria-keyshortcuts="Right">
        <i class="fa fa-angle-right"></i>
     </a>
  <div style="clear: both"></div>
</nav>
<div id="footer">
<div id="footer-text">
Version 1.3.205<br>
Last updated 2022-01-21 21:58:54 -0800
</div>
</div>



</body>
  <script>
  function isInViewport(ele) {
    const rect = ele.getBoundingClientRect();
    return (
        rect.top >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight)
    );
  }
  function yPosition (ele) {
    const rect = ele.getBoundingClientRect();
    return (rect.top - 20); // 20px above
  }
  let curr = document.getElementsByClassName('current');
  if (!isInViewport(curr[curr.length - 1])) {
    document.getElementById('toc').scrollTo({
      top: yPosition(curr[0]),
      left: 0,
      behavior: 'smooth'
    });
  }

  /* For page navigation */
  function gotoPage(selector) {
    const button = document.querySelector(selector);
    if (button)
      window.location.href = button.href;
  }
  document.addEventListener('keydown', e => {
    switch (e.key) {
      case 'ArrowRight':
        e.preventDefault();
        gotoPage('.nav-next');
        break;
      case 'ArrowLeft':
        e.preventDefault();
        gotoPage('.nav-prev');
        break;
    }
  });
  </script>
  </html>