<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<title>VK_EXT_image_drm_format_modifier(3)</title>
<style>
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: #fff; color: #222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

object, svg { display: inline-block; vertical-align: middle; }

.center { margin-left: auto; margin-right: auto; }

.spread { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.4; color: black; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #0068b0; text-decoration: none; line-height: inherit; }
a:hover, a:focus { color: #333; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: Noto, sans-serif; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 0.75em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Noto, sans-serif; font-weight: normal; font-style: normal; color: black; text-rendering: optimizeLegibility; margin-top: 0.5em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #4d4d4d; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #ddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; color: #264357; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 0.75em; list-style-position: outside; font-family: Noto, sans-serif; }

ul, ol { margin-left: 1.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3em; font-weight: bold; }
dl dd { margin-bottom: 0.75em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: black; border-bottom: 1px dotted #ddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 0.75em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #ddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #365E7A; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #365E7A; }

blockquote, blockquote p { line-height: 1.6; color: #333; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #ddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Tables */
table { background: #fff; margin-bottom: 1.25em; border: solid 1px #d8d8ce; }
table thead, table tfoot { background: #eee; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #6d6e71; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f8f8f8; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.4; }

body { -moz-osx-font-smoothing: grayscale; -webkit-font-smoothing: antialiased; tab-size: 4; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }

a:hover, a:focus { text-decoration: underline; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: inherit; font-style: normal !important; letter-spacing: 0; padding: 0; background-color: transparent; -webkit-border-radius: 0; border-radius: 0; line-height: inherit; word-wrap: break-word; }
*:not(pre) > code.nobreak { word-wrap: normal; }
*:not(pre) > code.nowrap { white-space: nowrap; }

pre, pre > code { line-height: 1.6; color: #264357; font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; }

em em { font-style: normal; }

strong strong { font-weight: normal; }

.keyseq { color: #333333; }

kbd { font-family: Consolas, "Liberation Mono", Courier, monospace; display: inline-block; color: black; font-size: 0.65em; line-height: 1.45; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -moz-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: 0 0.15em; padding: 0.2em 0.5em; vertical-align: middle; position: relative; top: -0.1em; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menuref { color: #000; }

.menuseq b:not(.caret), .menuref { font-weight: inherit; }

.menuseq { word-spacing: -0.02em; }
.menuseq b.caret { font-size: 1.25em; line-height: 0.8; }
.menuseq i.caret { font-weight: bold; text-align: center; width: 0.45em; }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 1.5em; padding-right: 1.5em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: black; margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #ddd; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #ddd; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #ddd; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: #365E7A; display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: #333; }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: #333; }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: black; border-bottom: 1px solid #ddd; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#toc { border-bottom: 0 solid #ddd; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: Noto, sans-serif; list-style-type: none; }
#toc li { line-height: 1.3334; margin-top: 0.3334em; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: black; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background-color: #fff; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #ddd; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; margin-bottom: 0.8rem; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #ddd; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: #fff; -webkit-border-radius: 0; border-radius: 0; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background-color: none; padding: 1.25em; }

#footer-text { color: black; line-height: 1.44; }

#content { margin-bottom: 0.625em; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { #content { margin-bottom: 1.25em; }
  .sect1 { padding-bottom: 1.25em; } }
.sect1:last-child { padding-bottom: 0; }

.sect1 + .sect1 { border-top: 0 solid #ddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: black; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: black; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; }

table.tableblock > caption.title { white-space: nowrap; overflow: visible; max-width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: black; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: initial; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: Noto, sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #ddd; color: #365E7A; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: #fff; -webkit-border-radius: 0; border-radius: 0; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: #fff; -webkit-border-radius: 0; border-radius: 0; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: black; margin-top: 0; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint { background: #eee; }
.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint { background: #f2f1f1; }

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { border: 1px hidden #666; -webkit-border-radius: 0; border-radius: 0; word-wrap: break-word; padding: 1.25em 1.5625em 1.125em 1.5625em; font-size: 0.8125em; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 1em; } }

.literalblock.output pre { color: #eee; background-color: #264357; }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 1.25em 1.5625em 1.125em 1.5625em; -webkit-border-radius: 0; border-radius: 0; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: #999; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

table.pyhltable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; line-height: 1.6; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

pre.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #ddd; }

pre.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background: none !important; padding-right: 0 !important; }

.quoteblock { margin: 0 1em 0.75em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock blockquote p { color: #333; font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: black; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.5em; margin-right: 0.5ex; text-align: right; }
.quoteblock .quoteblock { margin-left: 0; margin-right: 0; padding: 0.5em 0; border-left: 3px solid #365E7A; }
.quoteblock .quoteblock blockquote { padding: 0 0 0 0.75em; }
.quoteblock .quoteblock blockquote:before { display: none; }

.verseblock { margin: 0 1em 0.75em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: #333; font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.8125em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.025em; color: #365E7A; }

.quoteblock.abstract { margin: 0 0 0.75em 0; display: block; }
.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p { text-align: left; word-spacing: 0; }
.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before { display: none; }

table.tableblock { max-width: 100%; border-collapse: separate; }
table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #d8d8ce; }

table.grid-all > thead > tr > .tableblock, table.grid-all > tbody > tr > .tableblock { border-width: 0 1px 1px 0; }

table.grid-all > tfoot > tr > .tableblock { border-width: 1px 1px 0 0; }

table.grid-cols > * > tr > .tableblock { border-width: 0 1px 0 0; }

table.grid-rows > thead > tr > .tableblock, table.grid-rows > tbody > tr > .tableblock { border-width: 0 0 1px 0; }

table.grid-rows > tfoot > tr > .tableblock { border-width: 1px 0 0 0; }

table.grid-all > * > tr > .tableblock:last-child, table.grid-cols > * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-all > tbody > tr:last-child > .tableblock, table.grid-all > thead:last-child > tr > .tableblock, table.grid-rows > tbody > tr:last-child > .tableblock, table.grid-rows > thead:last-child > tr > .tableblock { border-bottom-width: 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot { border-width: 1px 0; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.4; background: #eee; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: #222; font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.375em; }

ul.checklist, ul.none, ol.none, ul.no-bullet, ol.no-bullet, ol.unnumbered, ul.unstyled, ol.unstyled { list-style-type: none; }

ul.no-bullet, ol.no-bullet, ol.unnumbered { margin-left: 0.625em; }

ul.unstyled, ol.unstyled { margin-left: 0; }

ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child { width: 1.25em; font-size: 0.8em; position: relative; bottom: 0.125em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.inline { display: -ms-flexbox; display: -webkit-box; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; list-style: none; margin: 0 0 0.375em -0.75em; }

ul.inline > li { margin-left: 0.75em; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1, td.hdlist2 { vertical-align: top; padding: 0 0.625em; }

td.hdlist1 { font-weight: bold; padding-bottom: 0.75em; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0.4em 0.75em 0 0.75em; line-height: 1; vertical-align: top; }
.colist > table tr > td:first-of-type img { max-width: initial; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px #fff; -webkit-box-shadow: 0 0 0 1px #ddd; box-shadow: 0 0 0 1px #ddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; display: inline-block; }
a.image object { pointer-events: none; }

sup.footnote, sup.footnoteref { font-size: 0.875em; position: static; vertical-align: super; }
sup.footnote a, sup.footnoteref a { text-decoration: none; }
sup.footnote a:active, sup.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -0.25em 0 0.75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em 0 0.225em; line-height: 1.3334; font-size: 0.875em; margin-left: 1.2em; margin-bottom: 0.2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; margin-left: -1.05em; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }
a span.icon > .fa { cursor: inherit; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #29475c; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: black; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { border-bottom: 1px solid #ddd; }

.sect1 { padding-bottom: 0; }

#toctitle { color: #00406F; font-weight: normal; margin-top: 1.5em; }

.sidebarblock { border-color: #aaa; }

code { -webkit-border-radius: 4px; border-radius: 4px; }

p.tableblock.header { color: #6d6e71; }

.literalblock pre, .listingblock pre { background: #eee; }

/* From https://github.com/KhronosGroup/Vulkan-Docs/pull/901 */
a code { color: inherit; }

/* From https://github.com/KhronosGroup/Vulkan-Docs/pull/1157 */
/* Make VUID anchor handles*/
li > p > a[id^="VUID-"] { visibility: hidden; position: absolute; z-index: 1001; width: 2.2ex; margin-left: -2.2ex; display: block; text-decoration: none !important; text-align: center; font-weight: normal; }

li > p > a[id^="VUID-"]:before { content: "\00A7"; font-size: 1em; display: block; padding-top: 0em; background: #fff; }

li > p:hover > a[id^="VUID-"], li > p > a[id^="VUID-"]:hover { visibility: visible; }

li > p > a[id^="VUID-"].link { color: black; text-decoration: none; }

/* TODO: not quite sure what these two do */
li > p > a[id^="VUID-"].link:hover { color: black; }

.vuid { color: #4d4d4d; font-family: monospace; }

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<!-- dragged in by font-awesome css included by asciidoctor, but preloaded in this extension for convenience -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0" as="font" type="font/woff2" crossorigin="">

<!-- Note: Chrome needs crossorigin="" even for same-origin fonts -->
<link rel="preload" href="../katex/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Typewriter-Regular.woff2" as="font" type="font/woff2" crossorigin=""><link rel="stylesheet" href="../../katex/katex.min.css">
<!--ChunkedSearchJSMarker-->
<style>
    #loading_msg {
        width: 100%;
        margin-left: auto;
        margin-right: auto;
        margin-top: 1ex;
        margin-bottom: 1ex;
        max-width: 62.5em;
        position: relative;
        padding-left: 1.5em;
        padding-right: 1.5em;
    }
    .hidden {display: none;}
</style>
<script>
    function hideElement(e){
        e.setAttribute("hidden", "");
        e.classList.add("hidden");
    }

    function unhideElement(e){
        e.classList.remove("hidden");
        e.removeAttribute("hidden");
    }

    function hideLoadableContent(){
        unhideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) hideElement(loadable);
    }

    function unhideLoadableContent(){
        hideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) unhideElement(loadable);
    }

    window.addEventListener("load", unhideLoadableContent);
</script>
</head>
<body class="manpage">
<div id="header">
<h1>VK_EXT_image_drm_format_modifier(3) Manual Page</h1>
<h2 id="_name">Name</h2>
<div class="sectionbody">
<p>VK_EXT_image_drm_format_modifier - device extension</p>
</div>
</div>
<div id="loading_msg" class="hidden" hidden><p>Loading&hellip; please wait.</p></div>
<!--ChunkedSearchboxMarker-->
<div id="content" class="loadable" ><script>hideLoadableContent();</script>
<div class="sect1">
<h2 id="_registered_extension_number"><a class="anchor" href="#_registered_extension_number"></a>Registered Extension Number</h2>
<div class="sectionbody">
<div class="paragraph">
<p>159</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_revision"><a class="anchor" href="#_revision"></a>Revision</h2>
<div class="sectionbody">
<div class="paragraph">
<p>2</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_extension_and_version_dependencies"><a class="anchor" href="#_extension_and_version_dependencies"></a>Extension and Version Dependencies</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Requires Vulkan 1.0</p>
</li>
<li>
<p>Requires <code><a href="VK_KHR_bind_memory2.html">VK_KHR_bind_memory2</a></code></p>
</li>
<li>
<p>Requires <code><a href="VK_KHR_get_physical_device_properties2.html">VK_KHR_get_physical_device_properties2</a></code></p>
</li>
<li>
<p>Requires <code><a href="VK_KHR_image_format_list.html">VK_KHR_image_format_list</a></code></p>
</li>
<li>
<p>Requires <code><a href="VK_KHR_sampler_ycbcr_conversion.html">VK_KHR_sampler_ycbcr_conversion</a></code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contact"><a class="anchor" href="#_contact"></a>Contact</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Chad Versace <a href="https://github.com/KhronosGroup/Vulkan-Docs/issues/new?body=[VK_EXT_image_drm_format_modifier] @chadversary%0A&lt;&lt;Here describe the issue or question you have about the VK_EXT_image_drm_format_modifier extension&gt;&gt;" target="_blank" rel="nofollow noopener"><span class="icon black"><i class="fa fa-github"></i></span>chadversary</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_other_extension_metadata"><a class="anchor" href="#_other_extension_metadata"></a>Other Extension Metadata</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Last Modified Date</strong></dt>
<dd>
<p>2021-09-30</p>
</dd>
<dt class="hdlist1"><strong>IP Status</strong></dt>
<dd>
<p>No known IP claims.</p>
</dd>
<dt class="hdlist1"><strong>Contributors</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Antoine Labour, Google</p>
</li>
<li>
<p>Bas Nieuwenhuizen, Google</p>
</li>
<li>
<p>Chad Versace, Google</p>
</li>
<li>
<p>James Jones, NVIDIA</p>
</li>
<li>
<p>Jason Ekstrand, Intel</p>
</li>
<li>
<p>Jőrg Wagner, ARM</p>
</li>
<li>
<p>Kristian Høgsberg Kristensen, Google</p>
</li>
<li>
<p>Ray Smith, ARM</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_description"><a class="anchor" href="#_description"></a>Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This extension provides the ability to use <em>DRM format modifiers</em> with
images, enabling Vulkan to better integrate with the Linux ecosystem of
graphics, video, and display APIs.</p>
</div>
<div class="paragraph">
<p>Its functionality closely overlaps with
<code>EGL_EXT_image_dma_buf_import_modifiers</code><sup><a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/html/vkspec.html#VK_EXT_image_drm_format_modifier-fn2">2</sup></a>^
and
<code>EGL_MESA_image_dma_buf_export</code><sup><a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/html/vkspec.html#VK_EXT_image_drm_format_modifier-fn3">3</sup></a>^.
Unlike the EGL extensions, this extension does not require the use of a
specific handle type (such as a dma_buf) for external memory and provides
more explicit control of image creation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction_to_drm_format_modifiers"><a class="anchor" href="#_introduction_to_drm_format_modifiers"></a>Introduction to DRM Format Modifiers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <em>DRM format modifier</em> is a 64-bit, vendor-prefixed, semi-opaque unsigned
integer.
Most <em>modifiers</em> represent a concrete, vendor-specific tiling format for
images.
Some exceptions are <code>DRM_FORMAT_MOD_LINEAR</code> (which is not
vendor-specific); <code>DRM_FORMAT_MOD_NONE</code> (which is an alias of
<code>DRM_FORMAT_MOD_LINEAR</code> due to historical accident); and
<code>DRM_FORMAT_MOD_INVALID</code> (which does not represent a tiling format).
The <em>modifier&#8217;s</em> vendor prefix consists of the 8 most significant bits.
The canonical list of <em>modifiers</em> and vendor prefixes is found in
<a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/include/uapi/drm/drm_fourcc.h"><code>drm_fourcc.h</code></a>
in the Linux kernel source.
The other dominant source of <em>modifiers</em> are vendor kernel trees.</p>
</div>
<div class="paragraph">
<p>One goal of <em>modifiers</em> in the Linux ecosystem is to enumerate for each
vendor a reasonably sized set of tiling formats that are appropriate for
images shared across processes, APIs, and/or devices, where each
participating component may possibly be from different vendors.
A non-goal is to enumerate all tiling formats supported by all vendors.
Some tiling formats used internally by vendors are inappropriate for
sharing; no <em>modifiers</em> should be assigned to such tiling formats.</p>
</div>
<div class="paragraph">
<p>Modifier values typically do not <em>describe</em> memory layouts.
More precisely, a <em>modifier</em>'s lower 56 bits usually have no structure.
Instead, modifiers <em>name</em> memory layouts; they name a small set of
vendor-preferred layouts for image sharing.
As a consequence, in each vendor namespace the modifier values are often
sequentially allocated starting at 1.</p>
</div>
<div class="paragraph">
<p>Each <em>modifier</em> is usually supported by a single vendor and its name matches
the pattern <code>{VENDOR}_FORMAT_MOD_*</code> or <code>DRM_FORMAT_MOD_{VENDOR}_*</code>.
Examples are <code>I915_FORMAT_MOD_X_TILED</code> and
<code>DRM_FORMAT_MOD_BROADCOM_VC4_T_TILED</code>.
An exception is <code>DRM_FORMAT_MOD_LINEAR</code>, which is supported by most
vendors.</p>
</div>
<div class="paragraph">
<p>Many APIs in Linux use <em>modifiers</em> to negotiate and specify the memory
layout of shared images.
For example, a Wayland compositor and Wayland client may, by relaying
<em>modifiers</em> over the Wayland protocol <code>zwp_linux_dmabuf_v1</code>, negotiate a
vendor-specific tiling format for a shared <code>wl_buffer</code>.
The client may allocate the underlying memory for the <code>wl_buffer</code> with
GBM, providing the chosen <em>modifier</em> to <code>gbm_bo_create_with_modifiers</code>.
The client may then import the <code>wl_buffer</code> into Vulkan for producing
image content, providing the resource&#8217;s dma_buf to
<a href="VkImportMemoryFdInfoKHR.html">VkImportMemoryFdInfoKHR</a> and its <em>modifier</em> to
<a href="VkImageDrmFormatModifierExplicitCreateInfoEXT.html">VkImageDrmFormatModifierExplicitCreateInfoEXT</a>.
The compositor may then import the <code>wl_buffer</code> into OpenGL for sampling,
providing the resource&#8217;s dma_buf and <em>modifier</em> to <code>eglCreateImage</code>.
The compositor may also bypass OpenGL and submit the <code>wl_buffer</code> directly
to the kernel&#8217;s display API, providing the dma_buf and <em>modifier</em> through
<code>drm_mode_fb_cmd2</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_format_translation"><a class="anchor" href="#_format_translation"></a>Format Translation</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Modifier</em>-capable APIs often pair <em>modifiers</em> with DRM formats, which are
defined in
<a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/include/uapi/drm/drm_fourcc.h"><code>drm_fourcc.h</code></a>.
However, <code>VK_EXT_image_drm_format_modifier</code> uses <a href="VkFormat.html">VkFormat</a> instead of
DRM formats.
The application must convert between <a href="VkFormat.html">VkFormat</a> and DRM format when it
sends or receives a DRM format to or from an external API.</p>
</div>
<div class="paragraph">
<p>The mapping from <a href="VkFormat.html">VkFormat</a> to DRM format is lossy.
Therefore, when receiving a DRM format from an external API, often the
application must use information from the external API to accurately map the
DRM format to a <a href="VkFormat.html">VkFormat</a>.
For example, DRM formats do not distinguish between RGB and sRGB (as of
2018-03-28); external information is required to identify the image&#8217;s
colorspace.</p>
</div>
<div class="paragraph">
<p>The mapping between <a href="VkFormat.html">VkFormat</a> and DRM format is also incomplete.
For some DRM formats there exist no corresponding Vulkan format, and for
some Vulkan formats there exist no corresponding DRM format.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_usage_patterns"><a class="anchor" href="#_usage_patterns"></a>Usage Patterns</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Three primary usage patterns are intended for this extension:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Negotiation.</strong> The application negotiates with <em>modifier</em>-aware,
external components to determine sets of image creation parameters
supported among all components.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>In the Linux ecosystem, the negotiation usually assumes the image is a 2D,
single-sampled, non-mipmapped, non-array image; this extension permits that
assumption but does not require it.
The result of the negotiation usually resembles a set of tuples such as
<em>(drmFormat, drmFormatModifier)</em>, where each participating component
supports all tuples in the set.</p>
</div>
<div class="paragraph">
<p>Many details of this negotiation—such as the protocol used during
negotiation, the set of image creation parameters expressable in the
protocol, and how the protocol chooses which process and which API will
create the image—are outside the scope of this specification.</p>
</div>
<div class="paragraph">
<p>In this extension, <a href="vkGetPhysicalDeviceFormatProperties2.html">vkGetPhysicalDeviceFormatProperties2</a> with
<a href="VkDrmFormatModifierPropertiesListEXT.html">VkDrmFormatModifierPropertiesListEXT</a> serves a primary role during the
negotiation, and <a href="vkGetPhysicalDeviceImageFormatProperties2.html">vkGetPhysicalDeviceImageFormatProperties2</a> with
<a href="VkPhysicalDeviceImageDrmFormatModifierInfoEXT.html">VkPhysicalDeviceImageDrmFormatModifierInfoEXT</a> serves a secondary role.</p>
</div>
</div>
</div>
</li>
<li>
<p><strong>Import.</strong> The application imports an image with a <em>modifier</em>.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>In this pattern, the application receives from an external source the
image&#8217;s memory and its creation parameters, which are often the result of
the negotiation described above.
Some image creation parameters are implicitly defined by the external
source; for example, <code>VK_IMAGE_TYPE_2D</code> is often assumed.
Some image creation parameters are usually explicit, such as the image&#8217;s
<code>format</code>, <code>drmFormatModifier</code>, and <code>extent</code>; and each plane&#8217;s
<code>offset</code> and <code>rowPitch</code>.</p>
</div>
<div class="paragraph">
<p>Before creating the image, the application first verifies that the physical
device supports the received creation parameters by querying
<a href="vkGetPhysicalDeviceFormatProperties2.html">vkGetPhysicalDeviceFormatProperties2</a> with
<a href="VkDrmFormatModifierPropertiesListEXT.html">VkDrmFormatModifierPropertiesListEXT</a> and
<a href="vkGetPhysicalDeviceImageFormatProperties2.html">vkGetPhysicalDeviceImageFormatProperties2</a> with
<a href="VkPhysicalDeviceImageDrmFormatModifierInfoEXT.html">VkPhysicalDeviceImageDrmFormatModifierInfoEXT</a>.
Then the application creates the image by chaining
<a href="VkImageDrmFormatModifierExplicitCreateInfoEXT.html">VkImageDrmFormatModifierExplicitCreateInfoEXT</a> and
<a href="VkExternalMemoryImageCreateInfo.html">VkExternalMemoryImageCreateInfo</a> onto <a href="VkImageCreateInfo.html">VkImageCreateInfo</a>.</p>
</div>
</div>
</div>
</li>
<li>
<p><strong>Export.</strong> The application creates an image and allocates its memory.
Then the application exports to <em>modifier</em>-aware consumers the image&#8217;s
memory handles; its creation parameters; its <em>modifier</em>; and the
<a href="VkSubresourceLayout.html" target="_blank" rel="noopener"><code>offset</code></a>,
<a href="VkSubresourceLayout.html" target="_blank" rel="noopener"><code>size</code></a>, and
<a href="VkSubresourceLayout.html" target="_blank" rel="noopener"><code>rowPitch</code></a> of each <em>memory plane</em>.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>In this pattern, the Vulkan device is the authority for the image; it is the
allocator of the image&#8217;s memory and the decider of the image&#8217;s creation
parameters.
When choosing the image&#8217;s creation parameters, the application usually
chooses a tuple <em>(format, drmFormatModifier)</em> from the result of the
negotiation described above.
The negotiation&#8217;s result often contains multiple tuples that share the same
format but differ in their <em>modifier</em>.
In this case, the application should defer the choice of the image&#8217;s
<em>modifier</em> to the Vulkan implementation by providing all such <em>modifiers</em> to
<a href="VkImageDrmFormatModifierListCreateInfoEXT.html">VkImageDrmFormatModifierListCreateInfoEXT</a>::<code>pDrmFormatModifiers</code>;
and the implementation should choose from <code>pDrmFormatModifiers</code> the
optimal <em>modifier</em> in consideration with the other image parameters.</p>
</div>
<div class="paragraph">
<p>The application creates the image by chaining
<a href="VkImageDrmFormatModifierListCreateInfoEXT.html">VkImageDrmFormatModifierListCreateInfoEXT</a> and
<a href="VkExternalMemoryImageCreateInfo.html">VkExternalMemoryImageCreateInfo</a> onto <a href="VkImageCreateInfo.html">VkImageCreateInfo</a>.
The protocol and APIs by which the application will share the image with
external consumers will likely determine the value of
<a href="VkExternalMemoryImageCreateInfo.html">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code>.
The implementation chooses for the image an optimal <em>modifier</em> from
<a href="VkImageDrmFormatModifierListCreateInfoEXT.html">VkImageDrmFormatModifierListCreateInfoEXT</a>::<code>pDrmFormatModifiers</code>.
The application then queries the implementation-chosen <em>modifier</em> with
<a href="vkGetImageDrmFormatModifierPropertiesEXT.html">vkGetImageDrmFormatModifierPropertiesEXT</a>, and queries the memory
layout of each plane with <a href="vkGetImageSubresourceLayout.html">vkGetImageSubresourceLayout</a>.</p>
</div>
<div class="paragraph">
<p>The application then allocates the image&#8217;s memory with
<a href="VkMemoryAllocateInfo.html">VkMemoryAllocateInfo</a>, adding chained extending structures for external
memory; binds it to the image; and exports the memory, for example, with
<a href="vkGetMemoryFdKHR.html">vkGetMemoryFdKHR</a>.</p>
</div>
<div class="paragraph">
<p>Finally, the application sends the image&#8217;s creation parameters, its
<em>modifier</em>, its per-plane memory layout, and the exported memory handle to
the external consumers.
The details of how the application transmits this information to external
consumers is outside the scope of this specification.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prior_art"><a class="anchor" href="#_prior_art"></a>Prior Art</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Extension
<code>EGL_EXT_image_dma_buf_import</code><sup><a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/html/vkspec.html#VK_EXT_image_drm_format_modifier-fn1">1</sup></a>^
introduced the ability to create an <code>EGLImage</code> by importing for each
plane a dma_buf, offset, and row pitch.</p>
</div>
<div class="paragraph">
<p>Later, extension
<code>EGL_EXT_image_dma_buf_import_modifiers</code><sup><a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/html/vkspec.html#VK_EXT_image_drm_format_modifier-fn2">2</sup></a>^
introduced the ability to query which combination of formats and <em>modifiers</em>
the implementation supports and to specify <em>modifiers</em> during creation of
the <code>EGLImage</code>.</p>
</div>
<div class="paragraph">
<p>Extension
<code>EGL_MESA_image_dma_buf_export</code><sup><a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/html/vkspec.html#VK_EXT_image_drm_format_modifier-fn3">3</sup></a>^
is the inverse of <code>EGL_EXT_image_dma_buf_import_modifiers</code>.</p>
</div>
<div class="paragraph">
<p>The Linux kernel modesetting API (KMS), when configuring the display&#8217;s
framebuffer with <code>struct
drm_mode_fb_cmd2</code><sup><a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/html/vkspec.html#VK_EXT_image_drm_format_modifier-fn4">4</sup></a>^, allows one to
specify the frambuffer&#8217;s <em>modifier</em> as well as a per-plane memory handle,
offset, and row pitch.</p>
</div>
<div class="paragraph">
<p>GBM, a graphics buffer manager for Linux, allows creation of a <code>gbm_bo</code>
(that is, a graphics <em>buffer object</em>) by importing data similar to that in
<code>EGL_EXT_image_dma_buf_import_modifiers</code><sup><a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/html/vkspec.html#VK_EXT_image_drm_format_modifier-fn1">1</sup></a>^;
and symmetrically allows exporting the same data from the <code>gbm_bo</code>.
See the references to <em>modifier</em> and <em>plane</em> in
<code>gbm.h</code><sup><a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/html/vkspec.html#VK_EXT_image_drm_format_modifier-fn5">5</sup></a>^.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_new_commands"><a class="anchor" href="#_new_commands"></a>New Commands</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="vkGetImageDrmFormatModifierPropertiesEXT.html">vkGetImageDrmFormatModifierPropertiesEXT</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_new_structures"><a class="anchor" href="#_new_structures"></a>New Structures</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="VkDrmFormatModifierPropertiesEXT.html">VkDrmFormatModifierPropertiesEXT</a></p>
</li>
<li>
<p><a href="VkImageDrmFormatModifierPropertiesEXT.html">VkImageDrmFormatModifierPropertiesEXT</a></p>
</li>
<li>
<p>Extending <a href="VkFormatProperties2.html">VkFormatProperties2</a>:</p>
<div class="ulist">
<ul>
<li>
<p><a href="VkDrmFormatModifierPropertiesListEXT.html">VkDrmFormatModifierPropertiesListEXT</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Extending <a href="VkImageCreateInfo.html">VkImageCreateInfo</a>:</p>
<div class="ulist">
<ul>
<li>
<p><a href="VkImageDrmFormatModifierExplicitCreateInfoEXT.html">VkImageDrmFormatModifierExplicitCreateInfoEXT</a></p>
</li>
<li>
<p><a href="VkImageDrmFormatModifierListCreateInfoEXT.html">VkImageDrmFormatModifierListCreateInfoEXT</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Extending <a href="VkPhysicalDeviceImageFormatInfo2.html">VkPhysicalDeviceImageFormatInfo2</a>:</p>
<div class="ulist">
<ul>
<li>
<p><a href="VkPhysicalDeviceImageDrmFormatModifierInfoEXT.html">VkPhysicalDeviceImageDrmFormatModifierInfoEXT</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <a href="VK_KHR_format_feature_flags2.html">VK_KHR_format_feature_flags2</a> is supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="VkDrmFormatModifierProperties2EXT.html">VkDrmFormatModifierProperties2EXT</a></p>
</li>
<li>
<p>Extending <a href="VkFormatProperties2.html">VkFormatProperties2</a>:</p>
<div class="ulist">
<ul>
<li>
<p><a href="VkDrmFormatModifierPropertiesList2EXT.html">VkDrmFormatModifierPropertiesList2EXT</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_new_enum_constants"><a class="anchor" href="#_new_enum_constants"></a>New Enum Constants</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><code>VK_EXT_IMAGE_DRM_FORMAT_MODIFIER_EXTENSION_NAME</code></p>
</li>
<li>
<p><code>VK_EXT_IMAGE_DRM_FORMAT_MODIFIER_SPEC_VERSION</code></p>
</li>
<li>
<p>Extending <a href="VkImageAspectFlagBits.html">VkImageAspectFlagBits</a>:</p>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_ASPECT_MEMORY_PLANE_0_BIT_EXT</code></p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_MEMORY_PLANE_1_BIT_EXT</code></p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_MEMORY_PLANE_2_BIT_EXT</code></p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_MEMORY_PLANE_3_BIT_EXT</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Extending <a href="VkImageTiling.html">VkImageTiling</a>:</p>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Extending <a href="VkResult.html">VkResult</a>:</p>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_INVALID_DRM_FORMAT_MODIFIER_PLANE_LAYOUT_EXT</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Extending <a href="VkStructureType.html">VkStructureType</a>:</p>
<div class="ulist">
<ul>
<li>
<p><code>VK_STRUCTURE_TYPE_DRM_FORMAT_MODIFIER_PROPERTIES_LIST_EXT</code></p>
</li>
<li>
<p><code>VK_STRUCTURE_TYPE_IMAGE_DRM_FORMAT_MODIFIER_EXPLICIT_CREATE_INFO_EXT</code></p>
</li>
<li>
<p><code>VK_STRUCTURE_TYPE_IMAGE_DRM_FORMAT_MODIFIER_LIST_CREATE_INFO_EXT</code></p>
</li>
<li>
<p><code>VK_STRUCTURE_TYPE_IMAGE_DRM_FORMAT_MODIFIER_PROPERTIES_EXT</code></p>
</li>
<li>
<p><code>VK_STRUCTURE_TYPE_PHYSICAL_DEVICE_IMAGE_DRM_FORMAT_MODIFIER_INFO_EXT</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <a href="VK_KHR_format_feature_flags2.html">VK_KHR_format_feature_flags2</a> is supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Extending <a href="VkStructureType.html">VkStructureType</a>:</p>
<div class="ulist">
<ul>
<li>
<p><code>VK_STRUCTURE_TYPE_DRM_FORMAT_MODIFIER_PROPERTIES_LIST_2_EXT</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_issues"><a class="anchor" href="#_issues"></a>Issues</h2>
<div class="sectionbody">
<div class="paragraph">
<p>1) Should this extension define a single DRM format modifier per
<code>VkImage</code>? Or define one per plane?</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><strong>RESOLVED</strong>: There exists a single DRM format modifier per <code>VkImage</code>.</p>
</div>
<div class="paragraph">
<p><strong>DISCUSSION</strong>: Prior art, such as
<code>EGL_EXT_image_dma_buf_import_modifiers</code><sup><a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/html/vkspec.html#VK_EXT_image_drm_format_modifier-fn2">2</sup></a>^,
<code>struct drm_mode_fb_cmd2</code><sup><a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/html/vkspec.html#VK_EXT_image_drm_format_modifier-fn4">4</sup></a>^, and
<code>struct
gbm_import_fd_modifier_data</code><sup><a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/html/vkspec.html#VK_EXT_image_drm_format_modifier-fn5">5</sup></a>^,
allows defining one <em>modifier</em> per plane.
However, developers of the GBM and kernel APIs concede it was a mistake.
Beginning in Linux 4.10, the kernel requires that the application provide
the same DRM format <em>modifier</em> for each plane.
(See Linux commit
<a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=bae781b259269590109e8a4a8227331362b88212">bae781b259269590109e8a4a8227331362b88212</a>).
And GBM provides an entry point, <code>gbm_bo_get_modifier</code>, for querying the
<em>modifier</em> of the image but does not provide one to query the modifier of
individual planes.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>2) When creating an image with
<a href="VkImageDrmFormatModifierExplicitCreateInfoEXT.html">VkImageDrmFormatModifierExplicitCreateInfoEXT</a>, which is typically used
when <em>importing</em> an image, should the application explicitly provide the
size of each plane?</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><strong>RESOLVED</strong>: No.
The application <strong class="purple">must</strong> not provide the size.
To enforce this, the API requires that
<a href="VkImageDrmFormatModifierExplicitCreateInfoEXT.html">VkImageDrmFormatModifierExplicitCreateInfoEXT</a>::<code>pPlaneLayouts-&gt;size</code>
<strong class="purple">must</strong> be 0.</p>
</div>
<div class="paragraph">
<p><strong>DISCUSSION</strong>: Prior art, such as
<code>EGL_EXT_image_dma_buf_import_modifiers</code><sup><a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/html/vkspec.html#VK_EXT_image_drm_format_modifier-fn2">2</sup></a>^,
<code>struct drm_mode_fb_cmd2</code><sup><a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/html/vkspec.html#VK_EXT_image_drm_format_modifier-fn4">4</sup></a>^, and
<code>struct
gbm_import_fd_modifier_data</code><sup><a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/html/vkspec.html#VK_EXT_image_drm_format_modifier-fn5">5</sup></a>^,
omits from the API the size of each plane.
Instead, the APIs infer each plane&#8217;s size from the import parameters, which
include the image&#8217;s pixel format and a dma_buf, offset, and row pitch for
each plane.</p>
</div>
<div class="paragraph">
<p>However, Vulkan differs from EGL and GBM with regards to image creation in
the following ways:</p>
</div>
<div class="ulist">
<div class="title">Differences in Image Creation</div>
<ul>
<li>
<p><strong>Undedicated allocation by default.</strong> When importing or exporting a set
of dma_bufs as an <code>EGLImage</code> or <code>gbm_bo</code>, common practice mandates
that each dma_buf&#8217;s memory be dedicated (in the sense of
<code>VK_KHR_dedicated_allocation</code>) to the image (though not necessarily
dedicated to a single plane).
In particular, neither the GBM documentation nor the EGL extension
specifications explicitly state this requirement, but in light of common
practice this is likely due to under-specification rather than
intentional omission.
In contrast, <code>VK_EXT_image_drm_format_modifier</code> permits, but does not
require, the implementation to require dedicated allocations for images
created with <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>.</p>
</li>
<li>
<p><strong>Separation of image creation and memory allocation.</strong> When importing a
set of dma_bufs as an <code>EGLImage</code> or <code>gbm_bo</code>, EGL and GBM create
the image resource and bind it to memory (the dma_bufs) simultaneously.
This allows EGL and GBM to query each dma_buf&#8217;s size during image
creation.
In Vulkan, image creation and memory allocation are independent unless a
dedicated allocation is used (as in <code>VK_KHR_dedicated_allocation</code>).
Therefore, without requiring dedicated allocation, Vulkan cannot query
the size of each dma_buf (or other external handle) when calculating the
image&#8217;s memory layout.
Even if dedication allocation were required, Vulkan cannot calculate the
image&#8217;s memory layout until after the image is bound to its dma_ufs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The above differences complicate the potential inference of plane size in
Vulkan.
Consider the following problematic cases:</p>
</div>
<div class="ulist">
<div class="title">Problematic Plane Size Calculations</div>
<ul>
<li>
<p><strong>Padding.</strong> Some plane of the image may require implementation-dependent
padding.</p>
</li>
<li>
<p><strong>Metadata.</strong> For some <em>modifiers</em>, the image may have a metadata plane
which requires a non-trivial calculation to determine its size.</p>
</li>
<li>
<p><strong>Mipmapped, array, and 3D images.</strong> The implementation may support
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code> for images whose
<code>mipLevels</code>, <code>arrayLayers</code>, or <code>depth</code> is greater than 1.
For such images with certain <em>modifiers</em>, the calculation of each
plane&#8217;s size may be non-trivial.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>However, an application-provided plane size solves none of the above
problems.</p>
</div>
<div class="paragraph">
<p>For simplicity, consider an external image with a single memory plane.
The implementation is obviously capable calculating the image&#8217;s size when
its tiling is <code>VK_IMAGE_TILING_OPTIMAL</code>.
Likewise, any reasonable implementation is capable of calculating the
image&#8217;s size when its tiling uses a supported <em>modifier</em>.</p>
</div>
<div class="paragraph">
<p>Suppose that the external image&#8217;s size is smaller than the
implementation-calculated size.
If the application provided the external image&#8217;s size to
<a href="vkCreateImage.html">vkCreateImage</a>, the implementation would observe the mismatched size
and recognize its inability to comprehend the external image&#8217;s layout
(unless the implementation used the application-provided size to select a
refinement of the tiling layout indicated by the <em>modifier</em>, which is
strongly discouraged).
The implementation would observe the conflict, and reject image creation
with <code>VK_ERROR_INVALID_DRM_FORMAT_MODIFIER_PLANE_LAYOUT_EXT</code>.
On the other hand, if the application did not provide the external image&#8217;s
size to <a href="vkCreateImage.html">vkCreateImage</a>, then the application would observe after
calling <a href="vkGetImageMemoryRequirements.html">vkGetImageMemoryRequirements</a> that the external image&#8217;s size is
less than the size required by the implementation.
The application would observe the conflict and refuse to bind the
<code>VkImage</code> to the external memory.
In both cases, the result is explicit failure.</p>
</div>
<div class="paragraph">
<p>Suppose that the external image&#8217;s size is larger than the
implementation-calculated size.
If the application provided the external image&#8217;s size to
<a href="vkCreateImage.html">vkCreateImage</a>, for reasons similar to above the implementation would
observe the mismatched size and recognize its inability to comprehend the
image data residing in the extra size.
The implementation, however, must assume that image data resides in the
entire size provided by the application.
The implementation would observe the conflict and reject image creation with
<code>VK_ERROR_INVALID_DRM_FORMAT_MODIFIER_PLANE_LAYOUT_EXT</code>.
On the other hand, if the application did not provide the external image&#8217;s
size to <a href="vkCreateImage.html">vkCreateImage</a>, then the application would observe after
calling <a href="vkGetImageMemoryRequirements.html">vkGetImageMemoryRequirements</a> that the external image&#8217;s size is
larger than the implementation-usable size.
The application would observe the conflict and refuse to bind the
<code>VkImage</code> to the external memory.
In both cases, the result is explicit failure.</p>
</div>
<div class="paragraph">
<p>Therefore, an application-provided size provides no benefit, and this
extension should not require it.
This decision renders <a href="VkSubresourceLayout.html">VkSubresourceLayout</a>::<code>size</code> an unused field
during image creation, and thus introduces a risk that implementations may
require applications to submit sideband creation parameters in the unused
field.
To prevent implementations from relying on sideband data, this extension
<em>requires</em> the application to set <code>size</code> to 0.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_references"><a class="anchor" href="#_references"></a>References</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a id="VK_EXT_image_drm_format_modifier-fn1"></a>
<a href="https://www.khronos.org/registry/EGL/extensions/EXT/EGL_EXT_image_dma_buf_import.txt"><code>EGL_EXT_image_dma_buf_import</code></a></p>
</li>
<li>
<p><a id="VK_EXT_image_drm_format_modifier-fn2"></a>
<a href="https://www.khronos.org/registry/EGL/extensions/EXT/EGL_EXT_image_dma_buf_import_modifiers.txt"><code>EGL_EXT_image_dma_buf_import_modifiers</code></a></p>
</li>
<li>
<p><a id="VK_EXT_image_drm_format_modifier-fn3"></a>
<a href="https://www.khronos.org/registry/EGL/extensions/MESA/EGL_MESA_image_dma_buf_export.txt"><code>EGL_MESA_image_dma_buf_export</code></a></p>
</li>
<li>
<p><a id="VK_EXT_image_drm_format_modifier-fn4"></a>
<a href="https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/include/uapi/drm/drm_mode.h?id=refs/tags/v4.10#n392"><code>struct
drm_mode_fb_cmd2</code></a></p>
</li>
<li>
<p><a id="VK_EXT_image_drm_format_modifier-fn5"></a>
<a href="https://cgit.freedesktop.org/mesa/mesa/tree/src/gbm/main/gbm.h?id=refs/tags/mesa-18.0.0-rc1"><code>gbm.h</code></a></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_version_history"><a class="anchor" href="#_version_history"></a>Version History</h3>
<div class="ulist">
<ul>
<li>
<p>Revision 1, 2018-08-29 (Chad Versace)</p>
<div class="ulist">
<ul>
<li>
<p>First stable revision</p>
</li>
</ul>
</div>
</li>
<li>
<p>Revision 2, 2021-09-30 (Jon Leech)</p>
<div class="ulist">
<ul>
<li>
<p>Add interaction with <code><a href="VK_KHR_format_feature_flags2.html">VK_KHR_format_feature_flags2</a></code> to <code>vk.xml</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also"><a class="anchor" href="#_see_also"></a>See Also</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="VkDrmFormatModifierPropertiesEXT.html">VkDrmFormatModifierPropertiesEXT</a>, <a href="VkDrmFormatModifierPropertiesListEXT.html">VkDrmFormatModifierPropertiesListEXT</a>, <a href="VkImageDrmFormatModifierExplicitCreateInfoEXT.html">VkImageDrmFormatModifierExplicitCreateInfoEXT</a>, <a href="VkImageDrmFormatModifierListCreateInfoEXT.html">VkImageDrmFormatModifierListCreateInfoEXT</a>, <a href="VkImageDrmFormatModifierPropertiesEXT.html">VkImageDrmFormatModifierPropertiesEXT</a>, <a href="VkPhysicalDeviceImageDrmFormatModifierInfoEXT.html">VkPhysicalDeviceImageDrmFormatModifierInfoEXT</a>, <a href="vkGetImageDrmFormatModifierPropertiesEXT.html">vkGetImageDrmFormatModifierPropertiesEXT</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_document_notes"><a class="anchor" href="#_document_notes"></a>Document Notes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information, see the <a href="https://www.khronos.org/registry/vulkan/specs/1.3-extensions/html/vkspec.html#VK_EXT_image_drm_format_modifier" target="_blank" rel="noopener">Vulkan Specification</a></p>
</div>
<div class="paragraph">
<p>This page is a generated document.
Fixes and changes should be made to the generator scripts, not directly.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_copyright"><a class="anchor" href="#_copyright"></a>Copyright</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copyright 2014-2022 The Khronos Group Inc.</p>
</div>
<div class="paragraph">
<p>SPDX-License-Identifier: CC-BY-4.0</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.3.205<br>
Last updated 2022-02-04 03:34:22 -0800
</div>
</div>


</body>
</html>