<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>vkCmdWriteTimestamp</title><link rel="stylesheet" type="text/css" href="vkman.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /></head><body><div xml:lang="en" class="refentry" lang="en"><a id="id-1"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vkCmdWriteTimestamp — Write a device timestamp into a query object.</p></div><div class="refsect1"><a id="_c_specification"></a><h2>C Specification</h2><p>To request a timestamp, call:</p><pre class="programlisting">void vkCmdWriteTimestamp(
    VkCommandBuffer                             commandBuffer,
    VkPipelineStageFlagBits                     pipelineStage,
    VkQueryPool                                 queryPool,
    uint32_t                                    query);</pre></div><div class="refsect1"><a id="_parameters"></a><h2>Parameters</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>commandBuffer</code></em> is the command buffer into which the command will be
    recorded.
</li><li class="listitem">
<em class="parameter"><code>pipelineStage</code></em> is one of the <code class="code"><a class="link" href="#">VkPipelineStageFlagBits</a></code>,
    specifying a stage of the pipeline.
</li><li class="listitem">
<em class="parameter"><code>queryPool</code></em> is the query pool that will manage the timestamp.
</li><li class="listitem">
<em class="parameter"><code>query</code></em> is the query within the query pool that will contain the
    timestamp.
</li></ul></div></div><div class="refsect1"><a id="_description"></a><h2>Description</h2><p><span class="strong"><strong><code class="code">vkCmdWriteTimestamp</code></strong></span> latches the value of the timer when all previous
commands have completed executing as far as the specified pipeline stage,
and writes the timestamp value to memory. When the timestamp value is
written, the availability status of the query is set to available.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note: Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If an implementation is unable to detect completion and latch the timer at
any specific stage of the pipeline, it <span class="normative">may</span> instead do so at any logically
later stage.</p></td></tr></table></div><p><code class="code"><a class="link" href="#">vkCmdCopyQueryPoolResults</a></code> <span class="normative">can</span> then be called to copy the timestamp
value from the query pool into buffer memory, with ordering and
synchronization behavior equivalent to how other queries operate. Timestamp
values <span class="normative">can</span> also be retrieved from the query pool using
<code class="code"><a class="link" href="#">vkGetQueryPoolResults</a></code>. As with other queries, the query <span class="normative">must</span> be reset
using <code class="code"><a class="link" href="#">vkCmdResetQueryPool</a></code> before requesting the timestamp value be
written to it.</p><p>While <span class="strong"><strong><code class="code">vkCmdWriteTimestamp</code></strong></span> <span class="normative">can</span> be called inside or outside of a render
pass instance, <code class="code"><a class="link" href="#">vkCmdCopyQueryPoolResults</a></code> <span class="normative">must</span> only be called outside
of a render pass instance.</p></div><div class="refsect1"><a id="_valid_usage"></a><h2>Valid Usage</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>commandBuffer</code></em> <span class="normative">must</span> be a valid <code class="code">VkCommandBuffer</code> handle
</li><li class="listitem">
<em class="parameter"><code>pipelineStage</code></em> <span class="normative">must</span> be a valid <code class="code"><a class="link" href="#">VkPipelineStageFlagBits</a></code> value
</li><li class="listitem">
<em class="parameter"><code>queryPool</code></em> <span class="normative">must</span> be a valid <code class="code">VkQueryPool</code> handle
</li><li class="listitem">
<em class="parameter"><code>commandBuffer</code></em> <span class="normative">must</span> be in the recording state
</li><li class="listitem">
The <code class="code">VkCommandPool</code> that <em class="parameter"><code>commandBuffer</code></em> was allocated from <span class="normative">must</span> support graphics or compute operations
</li><li class="listitem">
Each of <em class="parameter"><code>commandBuffer</code></em> and <em class="parameter"><code>queryPool</code></em> <span class="normative">must</span> have been created, allocated or retrieved from the same <code class="code">VkDevice</code>
</li><li class="listitem">
The query identified by <em class="parameter"><code>queryPool</code></em> and <em class="parameter"><code>query</code></em> <span class="normative">must</span> be <span class="emphasis"><em>unavailable</em></span>
</li><li class="listitem">
The command pool’s queue family <span class="normative">must</span> support a non-zero <em class="parameter"><code>timestampValidBits</code></em>
</li></ul></div></div><div class="refsect1"><a id="_host_synchronization"></a><h2>Host Synchronization</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Host access to <em class="parameter"><code>commandBuffer</code></em> <span class="normative">must</span> be externally synchronized
</li></ul></div></div><div class="refsect1"><a id="_command_properties"></a><h2>Command Properties</h2><div class="informaltable"><table cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " width="100%"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top">Command Buffer Levels</th><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top">Render Pass Scope</th><th style="border-bottom: 1px solid #527bbd; " align="left" valign="top">Supported Queue Types</th></tr></thead><tbody><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>Primary
Secondary</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>Both</p></td><td style="" align="left" valign="top"><p>GRAPHICS
COMPUTE</p></td></tr></tbody></table></div></div><div class="refsect1"><a id="_see_also"></a><h2>See Also</h2><p><code class="code"><a class="link" href="#">VkCommandBuffer</a></code>, <code class="code"><a class="link" href="#">VkPipelineStageFlagBits</a></code>, <code class="code"><a class="link" href="#">VkQueryPool</a></code></p></div><div class="refsect1"><a id="_document_notes"></a><h2>Document Notes</h2><p>For more information, see the Vulkan Specification at URL</p><p><a class="ulink" href="https://www.khronos.org/registry/vulkan/specs/1.0/xhtml/vkspec.html#vkCmdWriteTimestamp" target="_top">https://www.khronos.org/registry/vulkan/specs/1.0/xhtml/vkspec.html#vkCmdWriteTimestamp</a></p><p>This page is extracted from the Vulkan Specification.
Fixes and changes should be made to the Specification,not directly.</p></div><div class="refsect1"><a id="_copyright"></a><h2>Copyright</h2><p>Copyright (c) 2014-2016 Khronos Group. This work is licensed under a
<a class="ulink" href="http://creativecommons.org/licenses/by/4.0/" target="_top">Creative Commons
Attribution 4.0 International License</a>.</p></div></div></body></html>