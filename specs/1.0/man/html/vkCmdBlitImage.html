<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>vkCmdBlitImage</title><link rel="stylesheet" type="text/css" href="vkman.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /></head><body><div xml:lang="en" class="refentry" lang="en"><a id="id-1"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vkCmdBlitImage â€” Copy regions of an image, potentially performing format conversion,</p></div><div class="refsect1"><a id="_c_specification"></a><h2>C Specification</h2><p>To copy regions of a source image into a destination image, potentially
performing format conversion, arbitrary scaling, and filtering, call:</p><pre class="programlisting">void vkCmdBlitImage(
    VkCommandBuffer                             commandBuffer,
    VkImage                                     srcImage,
    VkImageLayout                               srcImageLayout,
    VkImage                                     dstImage,
    VkImageLayout                               dstImageLayout,
    uint32_t                                    regionCount,
    const VkImageBlit*                          pRegions,
    VkFilter                                    filter);</pre></div><div class="refsect1"><a id="_parameters"></a><h2>Parameters</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>commandBuffer</code></em> is the command buffer into which the command will be
    recorded.
</li><li class="listitem">
<em class="parameter"><code>srcImage</code></em> is the source image.
</li><li class="listitem">
<em class="parameter"><code>srcImageLayout</code></em> is the layout of the source image subresources for
    the blit.
</li><li class="listitem">
<em class="parameter"><code>dstImage</code></em> is the destination image.
</li><li class="listitem">
<em class="parameter"><code>dstImageLayout</code></em> is the layout of the destination image subresources
    for the blit.
</li><li class="listitem">
<em class="parameter"><code>regionCount</code></em> is the number of regions to blit.
</li><li class="listitem">
<em class="parameter"><code>pRegions</code></em> is a pointer to an array of <code class="code"><a class="link" href="#">VkImageBlit</a></code> structures
    specifying the regions to blit.
</li><li class="listitem">
<em class="parameter"><code>filter</code></em> is a <code class="code"><a class="link" href="#">VkFilter</a></code> specifying the filter to apply if the
    blits require scaling.
</li></ul></div></div><div class="refsect1"><a id="_description"></a><h2>Description</h2><p><span class="strong"><strong><code class="code">vkCmdBlitImage</code></strong></span> <span class="normative">must not</span> be used for multisampled source or destination
images. Use <code class="code"><a class="link" href="#">vkCmdResolveImage</a></code> for this purpose.</p><p>If sizes of source and destination extents do not match, scaling is
performed by applying the filtering mode specified by <em class="parameter"><code>filter</code></em>
parameter. <code class="code">VK_FILTER_LINEAR</code> uses bilinear interpolation, and
<code class="code">VK_FILTER_NEAREST</code> uses point sampling. When using
<code class="code">VK_FILTER_LINEAR</code>, magnifying blits <span class="normative">may</span> generate texel coordinates
outside of the source region. If those coordinates are outside the bounds of
the image level, the coordinates are clamped as in
<code class="code">VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE</code> address mode. However, if the
coordinates are outside the source region but inside the image level, the
implementation <span class="normative">may</span> clamp coordinates to the source region.</p><p>If source and destination extents are identical, no filtering is performed.
Pixels in the axis-aligned region bounded by srcOffsets[0] and srcOffsets[1]
will be copied to the destination region bound by dstOffsets[0] and
dstOffsets[1]. In the case where dstOffsets[0].x &gt; dstOffsets[1].x the
copied pixels are reversed in that direction. Likewise for y and z.</p><p>Blits are done layer by layer starting with the <em class="parameter"><code>baseArrayLayer</code></em> member
of <em class="parameter"><code>srcSubresource</code></em> for the source and <em class="parameter"><code>dstSubresource</code></em> for the
destination. <em class="parameter"><code>layerCount</code></em> layers are blitted to the destination image.</p><p>3D textures are blitted slice by slice. Slices in the source region bounded
by <em class="parameter"><code>srcOffsets</code></em>[0].z and <em class="parameter"><code>srcOffsets</code></em>[1].z are copied to slices in
the destination region bounded by <em class="parameter"><code>dstOffsets</code></em>[0].z and
<em class="parameter"><code>dstOffsets</code></em>[1].z. For each destination slice, a source z coordinate is
linearly interpolated between <em class="parameter"><code>srcOffsets</code></em>[0].z and
<em class="parameter"><code>srcOffsets</code></em>[1].z. If the <em class="parameter"><code>filter</code></em> parameter is
<code class="code">VK_FILTER_LINEAR</code> then the value sampled from the source image is taken
by doing linear filtering using the interpolated z coordinate. If
<em class="parameter"><code>filter</code></em> parameter is <code class="code">VK_FILTER_NEAREST</code> then value sampled from
the source image is taken from the single nearest slice (with undefined
rounding mode).</p><p>The following filtering and conversion rules apply:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Integer formats <span class="normative">can</span> only be converted to other integer formats with the
    same signedness.
</li><li class="listitem">
No format conversion is supported between depth/stencil images - the
    formats <span class="normative">must</span> match.
</li><li class="listitem">
Format conversions on unorm, snorm, unscaled and packed float formats of
    the copied aspect of the image are performed by first converting the
    pixels to float values.
</li><li class="listitem">
In case of sRGB source format, nonlinear RGB values are converted to
    linear representation prior to filtering.
</li><li class="listitem">
After filtering, the float values are first clamped and then cast to the
    destination image format. In case of sRGB destination format, linear RGB
    values are converted to nonlinear representation before writing the
    pixel to the image.
</li></ul></div><p>Signed and unsigned integers are converted by first clamping to the
representable range of the destination format, then casting the value.</p></div><div class="refsect1"><a id="_valid_usage"></a><h2>Valid Usage</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>commandBuffer</code></em> <span class="normative">must</span> be a valid <code class="code">VkCommandBuffer</code> handle
</li><li class="listitem">
<em class="parameter"><code>srcImage</code></em> <span class="normative">must</span> be a valid <code class="code">VkImage</code> handle
</li><li class="listitem">
<em class="parameter"><code>srcImageLayout</code></em> <span class="normative">must</span> be a valid <code class="code"><a class="link" href="#">VkImageLayout</a></code> value
</li><li class="listitem">
<em class="parameter"><code>dstImage</code></em> <span class="normative">must</span> be a valid <code class="code">VkImage</code> handle
</li><li class="listitem">
<em class="parameter"><code>dstImageLayout</code></em> <span class="normative">must</span> be a valid <code class="code"><a class="link" href="#">VkImageLayout</a></code> value
</li><li class="listitem">
<em class="parameter"><code>pRegions</code></em> <span class="normative">must</span> be a pointer to an array of <em class="parameter"><code>regionCount</code></em> valid <code class="code">VkImageBlit</code> structures
</li><li class="listitem">
<em class="parameter"><code>filter</code></em> <span class="normative">must</span> be a valid <code class="code"><a class="link" href="#">VkFilter</a></code> value
</li><li class="listitem">
<em class="parameter"><code>commandBuffer</code></em> <span class="normative">must</span> be in the recording state
</li><li class="listitem">
The <code class="code">VkCommandPool</code> that <em class="parameter"><code>commandBuffer</code></em> was allocated from <span class="normative">must</span> support graphics operations
</li><li class="listitem">
This command <span class="normative">must</span> only be called outside of a render pass instance
</li><li class="listitem">
<em class="parameter"><code>regionCount</code></em> <span class="normative">must</span> be greater than <code class="literal">0</code>
</li><li class="listitem">
Each of <em class="parameter"><code>commandBuffer</code></em>, <em class="parameter"><code>srcImage</code></em> and <em class="parameter"><code>dstImage</code></em> <span class="normative">must</span> have been created, allocated or retrieved from the same <code class="code">VkDevice</code>
</li><li class="listitem">
The source region specified by a given element of <em class="parameter"><code>pRegions</code></em> <span class="normative">must</span> be a region that is contained within <em class="parameter"><code>srcImage</code></em>
</li><li class="listitem">
The destination region specified by a given element of <em class="parameter"><code>pRegions</code></em> <span class="normative">must</span> be a region that is contained within <em class="parameter"><code>dstImage</code></em>
</li><li class="listitem">
The union of all source regions, and the union of all destination regions, specified by the elements of <em class="parameter"><code>pRegions</code></em>, <span class="normative">must not</span> overlap in memory
</li><li class="listitem">
<em class="parameter"><code>srcImage</code></em> <span class="normative">must</span> use a format that supports <code class="code">VK_FORMAT_FEATURE_BLIT_SRC_BIT</code>, which is indicated by <code class="code">VkFormatProperties</code>::<em class="parameter"><code>linearTilingFeatures</code></em> (for linear tiled images) or <code class="code">VkFormatProperties</code>::<em class="parameter"><code>optimalTilingFeatures</code></em> (for optimally tiled images) - as returned by <span class="strong"><strong><code class="code">vkGetPhysicalDeviceFormatProperties</code></strong></span>
</li><li class="listitem">
<em class="parameter"><code>srcImage</code></em> <span class="normative">must</span> have been created with <code class="code">VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag
</li><li class="listitem">
<em class="parameter"><code>srcImageLayout</code></em> <span class="normative">must</span> specify the layout of the image subresources of <em class="parameter"><code>srcImage</code></em> specified in <em class="parameter"><code>pRegions</code></em> at the time this command is executed on a <code class="code">VkDevice</code>
</li><li class="listitem">
<em class="parameter"><code>srcImageLayout</code></em> <span class="normative">must</span> be either of <code class="code">VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code> or <code class="code">VK_IMAGE_LAYOUT_GENERAL</code>
</li><li class="listitem">
<em class="parameter"><code>dstImage</code></em> <span class="normative">must</span> use a format that supports <code class="code">VK_FORMAT_FEATURE_BLIT_DST_BIT</code>, which is indicated by <code class="code">VkFormatProperties</code>::<em class="parameter"><code>linearTilingFeatures</code></em> (for linear tiled images) or <code class="code">VkFormatProperties</code>::<em class="parameter"><code>optimalTilingFeatures</code></em> (for optimally tiled images) - as returned by <span class="strong"><strong><code class="code">vkGetPhysicalDeviceFormatProperties</code></strong></span>
</li><li class="listitem">
<em class="parameter"><code>dstImage</code></em> <span class="normative">must</span> have been created with <code class="code">VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag
</li><li class="listitem">
<em class="parameter"><code>dstImageLayout</code></em> <span class="normative">must</span> specify the layout of the image subresources of <em class="parameter"><code>dstImage</code></em> specified in <em class="parameter"><code>pRegions</code></em> at the time this command is executed on a <code class="code">VkDevice</code>
</li><li class="listitem">
<em class="parameter"><code>dstImageLayout</code></em> <span class="normative">must</span> be either of <code class="code">VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> or <code class="code">VK_IMAGE_LAYOUT_GENERAL</code>
</li><li class="listitem">
The sample count of <em class="parameter"><code>srcImage</code></em> and <em class="parameter"><code>dstImage</code></em> <span class="normative">must</span> both be equal to <code class="code">VK_SAMPLE_COUNT_1_BIT</code>
</li><li class="listitem">
If either of <em class="parameter"><code>srcImage</code></em> or <em class="parameter"><code>dstImage</code></em> was created with a signed integer <code class="code"><a class="link" href="#">VkFormat</a></code>, the other <span class="normative">must</span> also have been created with a signed integer <code class="code"><a class="link" href="#">VkFormat</a></code>
</li><li class="listitem">
If either of <em class="parameter"><code>srcImage</code></em> or <em class="parameter"><code>dstImage</code></em> was created with an unsigned integer <code class="code"><a class="link" href="#">VkFormat</a></code>, the other <span class="normative">must</span> also have been created with an unsigned integer <code class="code"><a class="link" href="#">VkFormat</a></code>
</li><li class="listitem">
If either of <em class="parameter"><code>srcImage</code></em> or <em class="parameter"><code>dstImage</code></em> was created with a depth/stencil format, the other <span class="normative">must</span> have exactly the same format
</li><li class="listitem">
If <em class="parameter"><code>srcImage</code></em> was created with a depth/stencil format, <em class="parameter"><code>filter</code></em> <span class="normative">must</span> be <code class="code">VK_FILTER_NEAREST</code>
</li><li class="listitem">
If <em class="parameter"><code>filter</code></em> is <code class="code">VK_FILTER_LINEAR</code>, <em class="parameter"><code>srcImage</code></em> <span class="normative">must</span> be of a format which supports linear filtering, as specified by the <code class="code">VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code> flag in <code class="code">VkFormatProperties</code>::<em class="parameter"><code>linearTilingFeatures</code></em> (for a linear image) or <code class="code">VkFormatProperties</code>::<em class="parameter"><code>optimalTilingFeatures</code></em>(for an optimally tiled image) returned by <span class="strong"><strong><code class="code">vkGetPhysicalDeviceFormatProperties</code></strong></span>
</li></ul></div></div><div class="refsect1"><a id="_host_synchronization"></a><h2>Host Synchronization</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Host access to <em class="parameter"><code>commandBuffer</code></em> <span class="normative">must</span> be externally synchronized
</li></ul></div></div><div class="refsect1"><a id="_command_properties"></a><h2>Command Properties</h2><div class="informaltable"><table cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " width="100%"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top">Command Buffer Levels</th><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top">Render Pass Scope</th><th style="border-bottom: 1px solid #527bbd; " align="left" valign="top">Supported Queue Types</th></tr></thead><tbody><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>Primary
Secondary</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>Outside</p></td><td style="" align="left" valign="top"><p>GRAPHICS</p></td></tr></tbody></table></div></div><div class="refsect1"><a id="_see_also"></a><h2>See Also</h2><p><code class="code"><a class="link" href="#">VkCommandBuffer</a></code>, <code class="code"><a class="link" href="#">VkFilter</a></code>, <code class="code"><a class="link" href="#">VkImage</a></code>, <code class="code"><a class="link" href="#">VkImageBlit</a></code>, <code class="code"><a class="link" href="#">VkImageLayout</a></code></p></div><div class="refsect1"><a id="_document_notes"></a><h2>Document Notes</h2><p>For more information, see the Vulkan Specification at URL</p><p><a class="ulink" href="https://www.khronos.org/registry/vulkan/specs/1.0/xhtml/vkspec.html#vkCmdBlitImage" target="_top">https://www.khronos.org/registry/vulkan/specs/1.0/xhtml/vkspec.html#vkCmdBlitImage</a></p><p>This page is extracted from the Vulkan Specification.
Fixes and changes should be made to the Specification,not directly.</p></div><div class="refsect1"><a id="_copyright"></a><h2>Copyright</h2><p>Copyright (c) 2014-2016 Khronos Group. This work is licensed under a
<a class="ulink" href="http://creativecommons.org/licenses/by/4.0/" target="_top">Creative Commons
Attribution 4.0 International License</a>.</p></div></div></body></html>