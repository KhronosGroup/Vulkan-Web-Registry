<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>VkBufferImageCopy</title><link rel="stylesheet" type="text/css" href="vkman.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /></head><body><div xml:lang="en" class="refentry" lang="en"><a id="id-1"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VkBufferImageCopy — Structure specifying a buffer image copy operation</p></div><div class="refsect1"><a id="_c_specification"></a><h2>C Specification</h2><p>For both <code class="code"><a class="link" href="#">vkCmdCopyBufferToImage</a></code> and <code class="code"><a class="link" href="#">vkCmdCopyImageToBuffer</a></code>, each
element of <em class="parameter"><code>pRegions</code></em> is a structure defined as:</p><pre class="programlisting">typedef struct VkBufferImageCopy {
    VkDeviceSize                bufferOffset;
    uint32_t                    bufferRowLength;
    uint32_t                    bufferImageHeight;
    VkImageSubresourceLayers    imageSubresource;
    VkOffset3D                  imageOffset;
    VkExtent3D                  imageExtent;
} VkBufferImageCopy;</pre></div><div class="refsect1"><a id="_members"></a><h2>Members</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>bufferOffset</code></em> is the offset in bytes from the start of the
    buffer object where the image data is copied from or to.
</li><li class="listitem">
<em class="parameter"><code>bufferRowLength</code></em> and <em class="parameter"><code>bufferImageHeight</code></em> specify the
    data in buffer memory as a subregion of a larger two- or
    three-dimensional image, and control the addressing calculations of data
    in buffer memory. If either of these values is zero, that aspect of the
    buffer memory is considered to be tightly packed according to the
    <em class="parameter"><code>imageExtent</code></em>.
</li><li class="listitem">
<em class="parameter"><code>imageSubresource</code></em> is an <code class="code"><a class="link" href="#">VkImageSubresourceLayers</a></code> used to
    specify the specific image subresources of the image used for the source
    or destination image data.
</li><li class="listitem">
<em class="parameter"><code>imageOffset</code></em> selects the initial x, y, z offsets in texels of the
    sub-region of the source or destination image data.
</li><li class="listitem">
<em class="parameter"><code>imageExtent</code></em> is the size in texels of the image to copy in
    <em class="parameter"><code>width</code></em>, <em class="parameter"><code>height</code></em> and <em class="parameter"><code>depth</code></em>. 1D images use only <em class="parameter"><code>x</code></em>
    and <em class="parameter"><code>width</code></em>. 2D images use <em class="parameter"><code>x</code></em>, <em class="parameter"><code>y</code></em>, <em class="parameter"><code>width</code></em> and
    <em class="parameter"><code>height</code></em>. 3D images use <em class="parameter"><code>x</code></em>, <em class="parameter"><code>y</code></em>, <em class="parameter"><code>z</code></em>, <em class="parameter"><code>width</code></em>,
    <em class="parameter"><code>height</code></em> and <em class="parameter"><code>depth</code></em>.
</li></ul></div></div><div class="refsect1"><a id="_description"></a><h2>Description</h2><p>When copying to or from a depth or stencil aspect, the data in buffer
memory uses a layout that is a (mostly) tightly packed representation of
the depth or stencil data. Specifically:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
data copied to or from the stencil aspect of any depth/stencil format
    is tightly packed with one <code class="code">VK_FORMAT_S8_UINT</code> value per texel.
</li><li class="listitem">
data copied to or from the depth aspect of a <code class="code">VK_FORMAT_D16_UNORM</code>
    or <code class="code">VK_FORMAT_D16_UNORM_S8_UINT</code> format is tightly packed with one
    <code class="code">VK_FORMAT_D16_UNORM</code> value per texel.
</li><li class="listitem">
data copied to or from the depth aspect of a <code class="code">VK_FORMAT_D32_SFLOAT</code>
    or <code class="code">VK_FORMAT_D32_SFLOAT_S8_UINT</code> format is tightly packed with
    one <code class="code">VK_FORMAT_D32_SFLOAT</code> value per texel.
</li><li class="listitem">
data copied to or from the depth aspect of a
    <code class="code">VK_FORMAT_X8_D24_UNORM_PACK32</code> or
    <code class="code">VK_FORMAT_D24_UNORM_S8_UINT</code> format is packed with one 32-bit word
    per texel with the D24 value in the LSBs of the word, and undefined
    values in the eight MSBs.
</li></ul></div><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note: Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>To copy both the depth and stencil aspects of a depth/stencil format, two
entries in <em class="parameter"><code>pRegions</code></em> <span class="normative">can</span> be used, where one specifies the depth
aspect in <em class="parameter"><code>imageSubresource</code></em>, and the other specifies the stencil
aspect.</p></td></tr></table></div><p>Because depth or stencil aspect buffer to image copies <span class="normative">may</span> require format
conversions on some implementations, they are not supported on queues
that do not support graphics.</p><p>Copies are done layer by layer starting with image layer
<em class="parameter"><code>baseArrayLayer</code></em> member of <em class="parameter"><code>imageSubresource</code></em>. <em class="parameter"><code>layerCount</code></em>
layers are copied from the source image or to the destination image.</p></div><div class="refsect1"><a id="_valid_usage"></a><h2>Valid Usage</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>imageSubresource</code></em> <span class="normative">must</span> be a valid <code class="code">VkImageSubresourceLayers</code> structure
</li><li class="listitem">
<em class="parameter"><code>bufferOffset</code></em> <span class="normative">must</span> be a multiple of the calling command’s <code class="code">VkImage</code> parameter’s texel size
</li><li class="listitem">
<em class="parameter"><code>bufferOffset</code></em> <span class="normative">must</span> be a multiple of <code class="literal">4</code>
</li><li class="listitem">
<em class="parameter"><code>bufferRowLength</code></em> <span class="normative">must</span> be <code class="literal">0</code>, or greater than or equal to the <em class="parameter"><code>width</code></em> member of <em class="parameter"><code>imageExtent</code></em>
</li><li class="listitem">
<em class="parameter"><code>bufferImageHeight</code></em> <span class="normative">must</span> be <code class="literal">0</code>, or greater than or equal to the <em class="parameter"><code>height</code></em> member of <em class="parameter"><code>imageExtent</code></em>
</li><li class="listitem">
<em class="parameter"><code>imageOffset.x</code></em> and (<em class="parameter"><code>imageExtent.width</code></em> + <em class="parameter"><code>imageOffset.x</code></em>) <span class="normative">must</span> both be greater than or equal to <code class="literal">0</code> and less than or equal to the image subresource width
</li><li class="listitem">
<em class="parameter"><code>imageOffset.y</code></em> and (imageExtent.height + <em class="parameter"><code>imageOffset.y</code></em>) <span class="normative">must</span> both be greater than or equal to <code class="literal">0</code> and less than or equal to the image subresource height
</li><li class="listitem">
<em class="parameter"><code>imageOffset.z</code></em> and (imageExtent.depth + <em class="parameter"><code>imageOffset.z</code></em>) <span class="normative">must</span> both be greater than or equal to <code class="literal">0</code> and less than or equal to the image subresource depth
</li><li class="listitem"><p class="simpara">
If the calling command’s <code class="code">VkImage</code> parameter is a compressed format image:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
<em class="parameter"><code>bufferRowLength</code></em> <span class="normative">must</span> be a multiple of the compressed texel block width
</li><li class="listitem">
<em class="parameter"><code>bufferImageHeight</code></em> <span class="normative">must</span> be a multiple of the compressed texel block height
</li><li class="listitem">
all members of <em class="parameter"><code>imageOffset</code></em> <span class="normative">must</span> be a multiple of the corresponding dimensions of the compressed texel block
</li><li class="listitem">
<em class="parameter"><code>bufferOffset</code></em> <span class="normative">must</span> be a multiple of the compressed texel block size in bytes
</li><li class="listitem">
<em class="parameter"><code>imageExtent.width</code></em> <span class="normative">must</span> be a multiple of the compressed texel block width or (<em class="parameter"><code>imageExtent.width</code></em> + <em class="parameter"><code>imageOffset.x</code></em>) <span class="normative">must</span> equal the image subresource width
</li><li class="listitem">
<em class="parameter"><code>imageExtent.height</code></em> <span class="normative">must</span> be a multiple of the compressed texel block height or (<em class="parameter"><code>imageExtent.height</code></em> + <em class="parameter"><code>imageOffset.y</code></em>) <span class="normative">must</span> equal the image subresource height
</li><li class="listitem">
<em class="parameter"><code>imageExtent.depth</code></em> <span class="normative">must</span> be a multiple of the compressed texel block depth or (<em class="parameter"><code>imageExtent.depth</code></em> + <em class="parameter"><code>imageOffset.z</code></em>) <span class="normative">must</span> equal the image subresource depth
</li></ul></div></li><li class="listitem">
<em class="parameter"><code>bufferOffset</code></em>, <em class="parameter"><code>bufferRowLength</code></em>, <em class="parameter"><code>bufferImageHeight</code></em> and all members of <em class="parameter"><code>imageOffset</code></em> and <em class="parameter"><code>imageExtent</code></em> <span class="normative">must</span> respect the image transfer granularity requirements of the queue family that it will be submitted against, as described in <a class="link" href="#">Physical Device Enumeration</a>
</li><li class="listitem">
The <em class="parameter"><code>aspectMask</code></em> member of <em class="parameter"><code>imageSubresource</code></em> <span class="normative">must</span> specify aspects present in the calling command’s <code class="code">VkImage</code> parameter
</li><li class="listitem">
The <em class="parameter"><code>aspectMask</code></em> member of <em class="parameter"><code>imageSubresource</code></em> <span class="normative">must</span> only have a single bit set
</li><li class="listitem">
If the calling command’s <code class="code">VkImage</code> parameter is of <code class="code"><a class="link" href="#">VkImageType</a></code> <code class="code">VK_IMAGE_TYPE_3D</code>, the <em class="parameter"><code>baseArrayLayer</code></em> and <em class="parameter"><code>layerCount</code></em> members of <em class="parameter"><code>imageSubresource</code></em> <span class="normative">must</span> be <code class="literal">0</code> and <code class="literal">1</code>, respectively
</li></ul></div></div><div class="refsect1"><a id="_see_also"></a><h2>See Also</h2><p>basetypes:VkDeviceSize, <code class="code"><a class="link" href="#">VkExtent3D</a></code>, <code class="code"><a class="link" href="#">VkImageSubresourceLayers</a></code>, <code class="code"><a class="link" href="#">VkOffset3D</a></code>, <code class="code"><a class="link" href="#">vkCmdCopyBufferToImage</a></code>, <code class="code"><a class="link" href="#">vkCmdCopyImageToBuffer</a></code></p></div><div class="refsect1"><a id="_document_notes"></a><h2>Document Notes</h2><p>For more information, see the Vulkan Specification at URL</p><p><a class="ulink" href="https://www.khronos.org/registry/vulkan/specs/1.0/xhtml/vkspec.html#VkBufferImageCopy" target="_top">https://www.khronos.org/registry/vulkan/specs/1.0/xhtml/vkspec.html#VkBufferImageCopy</a></p><p>This page is extracted from the Vulkan Specification.
Fixes and changes should be made to the Specification,not directly.</p></div><div class="refsect1"><a id="_copyright"></a><h2>Copyright</h2><p>Copyright (c) 2014-2016 Khronos Group. This work is licensed under a
<a class="ulink" href="http://creativecommons.org/licenses/by/4.0/" target="_top">Creative Commons
Attribution 4.0 International License</a>.</p></div></div></body></html>