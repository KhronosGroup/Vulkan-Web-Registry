<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>vkCmdCopyImage</title><link rel="stylesheet" type="text/css" href="vkman.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /></head><body><div xml:lang="en" class="refentry" lang="en"><a id="id-1"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vkCmdCopyImage â€” Copy data between images.</p></div><div class="refsect1"><a id="_c_specification"></a><h2>C Specification</h2><p>To copy data between image objects, call:</p><pre class="programlisting">void vkCmdCopyImage(
    VkCommandBuffer                             commandBuffer,
    VkImage                                     srcImage,
    VkImageLayout                               srcImageLayout,
    VkImage                                     dstImage,
    VkImageLayout                               dstImageLayout,
    uint32_t                                    regionCount,
    const VkImageCopy*                          pRegions);</pre></div><div class="refsect1"><a id="_parameters"></a><h2>Parameters</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>commandBuffer</code></em> is the command buffer into which the command will be
    recorded.
</li><li class="listitem">
<em class="parameter"><code>srcImage</code></em> is the source image.
</li><li class="listitem">
<em class="parameter"><code>srcImageLayout</code></em> is the current layout of the source image
    subresource.
</li><li class="listitem">
<em class="parameter"><code>dstImage</code></em> is the destination image.
</li><li class="listitem">
<em class="parameter"><code>dstImageLayout</code></em> is  the current layout of the destination image
    subresource.
</li><li class="listitem">
<em class="parameter"><code>regionCount</code></em> is the number of regions to copy.
</li><li class="listitem">
<em class="parameter"><code>pRegions</code></em> is a pointer to an array of <code class="code"><a class="link" href="#">VkImageCopy</a></code> structures
    specifying the regions to copy.
</li></ul></div></div><div class="refsect1"><a id="_description"></a><h2>Description</h2><p>Each region in <em class="parameter"><code>pRegions</code></em> is copied from the source image to the same
region of the destination image. <em class="parameter"><code>srcImage</code></em> and <em class="parameter"><code>dstImage</code></em> <span class="normative">can</span> be
the same image or alias the same memory.</p><p>Copies are done layer by layer starting with <em class="parameter"><code>baseArrayLayer</code></em> member of
<em class="parameter"><code>srcSubresource</code></em> for the source and <em class="parameter"><code>dstSubresource</code></em> for the
destination. <em class="parameter"><code>layerCount</code></em> layers are copied to the destination image.</p><p><a id="copies-images-format-compatibility"></a>The formats of <em class="parameter"><code>srcImage</code></em> and <em class="parameter"><code>dstImage</code></em> <span class="normative">must</span> be compatible.
Formats are considered compatible if their texel size in bytes is the same
between both formats. For example, <code class="code">VK_FORMAT_R8G8B8A8_UNORM</code> is
compatible with <code class="code">VK_FORMAT_R32_UINT</code> because both texels are 4
bytes in size. Depth/stencil formats <span class="normative">must</span> match exactly.</p><p><span class="strong"><strong><code class="code">vkCmdCopyImage</code></strong></span> allows copying between size-compatible compressed
and uncompressed internal formats. Formats are size-compatible if the texel
size of the uncompressed format is equal to the compressed texel block size in
bytes of the compressed format. Such a copy does not perform on-the-fly
compression or decompression. When copying from an uncompressed format to a
compressed format, each texel of uncompressed data of the source image is
copied as a raw value to the corresponding compressed texel block of the
destination image. When copying from a compressed format to an uncompressed
format, each compressed texel block of the source image is copied as a raw
value to the corresponding texel of uncompressed data in the destination
image. Thus, for example, it is legal to copy between a 128-bit uncompressed
format and a compressed format which has a 128-bit sized compressed texel
block representing 4x4 texels (using 8 bits per texel), or between a 64-bit
uncompressed format and a compressed format which has a 64-bit sized
compressed texel block representing 4x4 texels (using 4 bits per texel).</p><p>When copying between compressed and uncompressed formats the <em class="parameter"><code>extent</code></em>
members represent the texel dimensions of the source image and not the
destination. When copying from a compressed image to an uncompressed image
the image texel dimensions written to the uncompressed image will be source
extent divided by the compressed texel block dimensions. When copying from an
uncompressed image to a compressed image the image texel dimensions written
to the compressed image will be the source extent multiplied by the
compressed texel block dimensions. In both cases the number of bytes read and
the number of bytes written will be identical.</p><p>Copying to or from block-compressed images is typically done in multiples of
the compressed texel block. For this reason the <em class="parameter"><code>extent</code></em> <span class="normative">must</span> be a
multiple of the compressed texel block dimension. There is one exception to
this rule which is <span class="normative">required</span> to handle compressed images created with
dimensions that are not a multiple of the compressed texel block dimensions.
If the <em class="parameter"><code>srcImage</code></em> is compressed and if <em class="parameter"><code>extent.width</code></em> is not a
multiple of the compressed texel block width then (<em class="parameter"><code>extent.width</code></em>
<em class="parameter"><code>srcOffset.x</code></em>) <span class="normative">must</span> equal the image subresource width, if
<em class="parameter"><code>extent.height</code></em> is not a multiple of the compressed texel block height
then (<em class="parameter"><code>extent.height</code></em> + <em class="parameter"><code>srcOffset.y</code></em>) <span class="normative">must</span> equal the image
subresource height and if <em class="parameter"><code>extent.depth</code></em> is not a multiple of the
compressed texel block depth then (<em class="parameter"><code>extent.depth</code></em> + <em class="parameter"><code>srcOffset.z</code></em>)
<span class="normative">must</span> equal the image subresource depth. Similarly, if the <em class="parameter"><code>dstImage</code></em> is
compressed and if <em class="parameter"><code>extent.width</code></em> is not a multiple of the compressed
texel block width then (<em class="parameter"><code>extent.width</code></em> + <em class="parameter"><code>dstOffset.x</code></em>) <span class="normative">must</span> equal
the image subresource width, if <em class="parameter"><code>extent.height</code></em> is not a multiple of the
compressed texel block height then (<em class="parameter"><code>extent.height</code></em> + <em class="parameter"><code>dstOffset.y</code></em>)
<span class="normative">must</span> equal the image subresource height and if <em class="parameter"><code>extent.depth</code></em> is not a
multiple of the compressed texel block depth then (<em class="parameter"><code>extent.depth</code></em>
<em class="parameter"><code>dstOffset.z</code></em>) <span class="normative">must</span> equal the image subresource depth. This allows the
last compressed texel block of the image in each non-multiple dimension to
be included as a source or destination of the copy.</p><p><span class="strong"><strong><code class="code">vkCmdCopyImage</code></strong></span> <span class="normative">can</span> be used to copy image data between multisample
images, but both images <span class="normative">must</span> have the same number of samples.</p></div><div class="refsect1"><a id="_valid_usage"></a><h2>Valid Usage</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>commandBuffer</code></em> <span class="normative">must</span> be a valid <code class="code">VkCommandBuffer</code> handle
</li><li class="listitem">
<em class="parameter"><code>srcImage</code></em> <span class="normative">must</span> be a valid <code class="code">VkImage</code> handle
</li><li class="listitem">
<em class="parameter"><code>srcImageLayout</code></em> <span class="normative">must</span> be a valid <code class="code"><a class="link" href="#">VkImageLayout</a></code> value
</li><li class="listitem">
<em class="parameter"><code>dstImage</code></em> <span class="normative">must</span> be a valid <code class="code">VkImage</code> handle
</li><li class="listitem">
<em class="parameter"><code>dstImageLayout</code></em> <span class="normative">must</span> be a valid <code class="code"><a class="link" href="#">VkImageLayout</a></code> value
</li><li class="listitem">
<em class="parameter"><code>pRegions</code></em> <span class="normative">must</span> be a pointer to an array of <em class="parameter"><code>regionCount</code></em> valid <code class="code">VkImageCopy</code> structures
</li><li class="listitem">
<em class="parameter"><code>commandBuffer</code></em> <span class="normative">must</span> be in the recording state
</li><li class="listitem">
The <code class="code">VkCommandPool</code> that <em class="parameter"><code>commandBuffer</code></em> was allocated from <span class="normative">must</span> support transfer, graphics or compute operations
</li><li class="listitem">
This command <span class="normative">must</span> only be called outside of a render pass instance
</li><li class="listitem">
<em class="parameter"><code>regionCount</code></em> <span class="normative">must</span> be greater than <code class="literal">0</code>
</li><li class="listitem">
Each of <em class="parameter"><code>commandBuffer</code></em>, <em class="parameter"><code>srcImage</code></em> and <em class="parameter"><code>dstImage</code></em> <span class="normative">must</span> have been created, allocated or retrieved from the same <code class="code">VkDevice</code>
</li><li class="listitem">
The source region specified by a given element of <em class="parameter"><code>pRegions</code></em> <span class="normative">must</span> be a region that is contained within <em class="parameter"><code>srcImage</code></em>
</li><li class="listitem">
The destination region specified by a given element of <em class="parameter"><code>pRegions</code></em> <span class="normative">must</span> be a region that is contained within <em class="parameter"><code>dstImage</code></em>
</li><li class="listitem">
The union of all source regions, and the union of all destination regions, specified by the elements of <em class="parameter"><code>pRegions</code></em>, <span class="normative">must not</span> overlap in memory
</li><li class="listitem">
<em class="parameter"><code>srcImage</code></em> <span class="normative">must</span> have been created with <code class="code">VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag
</li><li class="listitem">
<em class="parameter"><code>srcImageLayout</code></em> <span class="normative">must</span> specify the layout of the image subresources of <em class="parameter"><code>srcImage</code></em> specified in <em class="parameter"><code>pRegions</code></em> at the time this command is executed on a <code class="code">VkDevice</code>
</li><li class="listitem">
<em class="parameter"><code>srcImageLayout</code></em> <span class="normative">must</span> be either of <code class="code">VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code> or <code class="code">VK_IMAGE_LAYOUT_GENERAL</code>
</li><li class="listitem">
<em class="parameter"><code>dstImage</code></em> <span class="normative">must</span> have been created with <code class="code">VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag
</li><li class="listitem">
<em class="parameter"><code>dstImageLayout</code></em> <span class="normative">must</span> specify the layout of the image subresources of <em class="parameter"><code>dstImage</code></em> specified in <em class="parameter"><code>pRegions</code></em> at the time this command is executed on a <code class="code">VkDevice</code>
</li><li class="listitem">
<em class="parameter"><code>dstImageLayout</code></em> <span class="normative">must</span> be either of <code class="code">VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> or <code class="code">VK_IMAGE_LAYOUT_GENERAL</code>
</li><li class="listitem">
The <code class="code"><a class="link" href="#">VkFormat</a></code> of each of <em class="parameter"><code>srcImage</code></em> and <em class="parameter"><code>dstImage</code></em> <span class="normative">must</span> be compatible, as defined <a class="link" href="#copies-images-format-compatibility">below</a>
</li><li class="listitem">
The sample count of <em class="parameter"><code>srcImage</code></em> and <em class="parameter"><code>dstImage</code></em> <span class="normative">must</span> match
</li></ul></div></div><div class="refsect1"><a id="_host_synchronization"></a><h2>Host Synchronization</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Host access to <em class="parameter"><code>commandBuffer</code></em> <span class="normative">must</span> be externally synchronized
</li></ul></div></div><div class="refsect1"><a id="_command_properties"></a><h2>Command Properties</h2><div class="informaltable"><table cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " width="100%"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top">Command Buffer Levels</th><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top">Render Pass Scope</th><th style="border-bottom: 1px solid #527bbd; " align="left" valign="top">Supported Queue Types</th></tr></thead><tbody><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>Primary
Secondary</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>Outside</p></td><td style="" align="left" valign="top"><p>TRANSFER
GRAPHICS
COMPUTE</p></td></tr></tbody></table></div></div><div class="refsect1"><a id="_see_also"></a><h2>See Also</h2><p><code class="code"><a class="link" href="#">VkCommandBuffer</a></code>, <code class="code"><a class="link" href="#">VkImage</a></code>, <code class="code"><a class="link" href="#">VkImageCopy</a></code>, <code class="code"><a class="link" href="#">VkImageLayout</a></code></p></div><div class="refsect1"><a id="_document_notes"></a><h2>Document Notes</h2><p>For more information, see the Vulkan Specification at URL</p><p><a class="ulink" href="https://www.khronos.org/registry/vulkan/specs/1.0/xhtml/vkspec.html#vkCmdCopyImage" target="_top">https://www.khronos.org/registry/vulkan/specs/1.0/xhtml/vkspec.html#vkCmdCopyImage</a></p><p>This page is extracted from the Vulkan Specification.
Fixes and changes should be made to the Specification,not directly.</p></div><div class="refsect1"><a id="_copyright"></a><h2>Copyright</h2><p>Copyright (c) 2014-2016 Khronos Group. This work is licensed under a
<a class="ulink" href="http://creativecommons.org/licenses/by/4.0/" target="_top">Creative Commons
Attribution 4.0 International License</a>.</p></div></div></body></html>