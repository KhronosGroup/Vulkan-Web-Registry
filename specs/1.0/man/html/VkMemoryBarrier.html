<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>VkMemoryBarrier</title><link rel="stylesheet" type="text/css" href="vkman.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /></head><body><div xml:lang="en" class="refentry" lang="en"><a id="id-1"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VkMemoryBarrier — Structure specifying a memory barrier</p></div><div class="refsect1"><a id="_c_specification"></a><h2>C Specification</h2><p>The <code class="code">VkMemoryBarrier</code> structure is defined as:</p><pre class="programlisting">typedef struct VkMemoryBarrier {
    VkStructureType    sType;
    const void*        pNext;
    VkAccessFlags      srcAccessMask;
    VkAccessFlags      dstAccessMask;
} VkMemoryBarrier;</pre></div><div class="refsect1"><a id="_members"></a><h2>Members</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>sType</code></em> is the type of this structure.
</li><li class="listitem">
<em class="parameter"><code>pNext</code></em> is <code class="literal">NULL</code> or a pointer to an extension-specific structure.
</li><li class="listitem">
<em class="parameter"><code>srcAccessMask</code></em> is a bitmask of the classes of memory accesses
    performed by the first set of commands that will participate in
    the dependency.
</li><li class="listitem">
<em class="parameter"><code>dstAccessMask</code></em> is a bitmask of the classes of memory accesses
    performed by the second set of commands that will participate in
    the dependency.
</li></ul></div></div><div class="refsect1"><a id="_description"></a><h2>Description</h2><p><em class="parameter"><code>srcAccessMask</code></em> and <em class="parameter"><code>dstAccessMask</code></em>, along with <em class="parameter"><code>srcStageMask</code></em>
and <em class="parameter"><code>dstStageMask</code></em> from <code class="code"><a class="link" href="#">vkCmdPipelineBarrier</a></code>, define the two
halves of a memory dependency and an execution dependency. Memory accesses
using the set of access types in <em class="parameter"><code>srcAccessMask</code></em> performed in pipeline
stages in <em class="parameter"><code>srcStageMask</code></em> by the first set of commands <span class="normative">must</span> complete and
be available to later commands. The side effects of the first set of
commands will be visible to memory accesses using the set of access types in
<em class="parameter"><code>dstAccessMask</code></em> performed in pipeline stages in <em class="parameter"><code>dstStageMask</code></em> by
the second set of commands. If the barrier is by-region, these requirements
only apply to invocations within the same framebuffer-space region, for
pipeline stages that perform framebuffer-space work. The execution
dependency guarantees that execution of work by the destination stages of
the second set of commands will not begin until execution of work by the
source stages of the first set of commands has completed.</p><p>A common type of memory dependency is to avoid a read-after-write hazard. In
this case, the source access mask and stages will include writes from a
particular stage, and the destination access mask and stages will indicate
how those writes will be read in subsequent commands. However, barriers <span class="normative">can</span>
also express write-after-read dependencies and write-after-write
dependencies, and are even useful to express read-after-read dependencies
across an image layout change.</p><p>Bits which <span class="normative">can</span> be set in <code class="code"><a class="link" href="#">VkMemoryBarrier</a></code>::<em class="parameter"><code>srcAccessMask</code></em> and
<code class="code"><a class="link" href="#">VkMemoryBarrier</a></code>::<em class="parameter"><code>dstAccessMask</code></em> include:</p><pre class="programlisting">typedef enum VkAccessFlagBits {
    VK_ACCESS_INDIRECT_COMMAND_READ_BIT = 0x00000001,
    VK_ACCESS_INDEX_READ_BIT = 0x00000002,
    VK_ACCESS_VERTEX_ATTRIBUTE_READ_BIT = 0x00000004,
    VK_ACCESS_UNIFORM_READ_BIT = 0x00000008,
    VK_ACCESS_INPUT_ATTACHMENT_READ_BIT = 0x00000010,
    VK_ACCESS_SHADER_READ_BIT = 0x00000020,
    VK_ACCESS_SHADER_WRITE_BIT = 0x00000040,
    VK_ACCESS_COLOR_ATTACHMENT_READ_BIT = 0x00000080,
    VK_ACCESS_COLOR_ATTACHMENT_WRITE_BIT = 0x00000100,
    VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_READ_BIT = 0x00000200,
    VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_WRITE_BIT = 0x00000400,
    VK_ACCESS_TRANSFER_READ_BIT = 0x00000800,
    VK_ACCESS_TRANSFER_WRITE_BIT = 0x00001000,
    VK_ACCESS_HOST_READ_BIT = 0x00002000,
    VK_ACCESS_HOST_WRITE_BIT = 0x00004000,
    VK_ACCESS_MEMORY_READ_BIT = 0x00008000,
    VK_ACCESS_MEMORY_WRITE_BIT = 0x00010000,
} VkAccessFlagBits;</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="code">VK_ACCESS_INDIRECT_COMMAND_READ_BIT</code> indicates that the access is
    an indirect command structure read as part of an indirect drawing
    command.
</li><li class="listitem">
<code class="code">VK_ACCESS_INDEX_READ_BIT</code> indicates that the access is an index
    buffer read.
</li><li class="listitem">
<code class="code">VK_ACCESS_VERTEX_ATTRIBUTE_READ_BIT</code> indicates that the access is a
    read via the vertex input bindings.
</li><li class="listitem">
<code class="code">VK_ACCESS_UNIFORM_READ_BIT</code> indicates that the access is a read via
    a uniform buffer or dynamic uniform buffer descriptor.
</li><li class="listitem">
<code class="code">VK_ACCESS_INPUT_ATTACHMENT_READ_BIT</code> indicates that the access is a
    read via an input attachment descriptor.
</li><li class="listitem">
<code class="code">VK_ACCESS_SHADER_READ_BIT</code> indicates that the access is a read from
    a shader via any other descriptor type.
</li><li class="listitem">
<code class="code">VK_ACCESS_SHADER_WRITE_BIT</code> indicates that the access is a write
    or atomic from a shader via the same descriptor types as in
    <code class="code">VK_ACCESS_SHADER_READ_BIT</code>.
</li><li class="listitem">
<code class="code">VK_ACCESS_COLOR_ATTACHMENT_READ_BIT</code> indicates that the access is a
    read via a color attachment.
</li><li class="listitem">
<code class="code">VK_ACCESS_COLOR_ATTACHMENT_WRITE_BIT</code> indicates that the access is
    a write via a color or resolve attachment.
</li><li class="listitem">
<code class="code">VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_READ_BIT</code> indicates that the
    access is a read via a depth/stencil attachment.
</li><li class="listitem">
<code class="code">VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_WRITE_BIT</code> indicates that the
    access is a write via a depth/stencil attachment.
</li><li class="listitem">
<code class="code">VK_ACCESS_TRANSFER_READ_BIT</code> indicates that the access is a read
    from a transfer (copy, blit, resolve, etc.) operation. For the complete
    set of transfer operations, see
    <a class="link" href="#"><code class="code">VK_PIPELINE_STAGE_TRANSFER_BIT</code></a>.
</li><li class="listitem">
<code class="code">VK_ACCESS_TRANSFER_WRITE_BIT</code> indicates that the access is a write
    from a transfer (copy, blit, resolve, etc.) operation. For the complete
    set of transfer operations, see
    <a class="link" href="#"><code class="code">VK_PIPELINE_STAGE_TRANSFER_BIT</code></a>.
</li><li class="listitem">
<code class="code">VK_ACCESS_HOST_READ_BIT</code> indicates that the access is a read via
    the host.
</li><li class="listitem">
<code class="code">VK_ACCESS_HOST_WRITE_BIT</code> indicates that the access is a write via
    the host.
</li><li class="listitem">
<code class="code">VK_ACCESS_MEMORY_READ_BIT</code> indicates that the access is a read via
    a non-specific unit attached to the memory. This unit <span class="normative">may</span> be external
    to the Vulkan device or otherwise not part of the core Vulkan pipeline.
    When included in <em class="parameter"><code>dstAccessMask</code></em>, all writes using access types in
    <em class="parameter"><code>srcAccessMask</code></em> performed by pipeline stages in <em class="parameter"><code>srcStageMask</code></em>
    <span class="normative">must</span> be visible in memory.
</li><li class="listitem">
<code class="code">VK_ACCESS_MEMORY_WRITE_BIT</code> indicates that the access is a write
    via a non-specific unit attached to the memory. This unit <span class="normative">may</span> be
    external to the Vulkan device or otherwise not part of the core Vulkan
    pipeline. When included in <em class="parameter"><code>srcAccessMask</code></em>, all access types in
    <em class="parameter"><code>dstAccessMask</code></em> from pipeline stages in <em class="parameter"><code>dstStageMask</code></em> will
    observe the side effects of commands that executed before the barrier.
    When included in <em class="parameter"><code>dstAccessMask</code></em> all writes using access types in
    <em class="parameter"><code>srcAccessMask</code></em> performed by pipeline stages in <em class="parameter"><code>srcStageMask</code></em>
    <span class="normative">must</span> be visible in memory.
</li></ul></div><p>Color attachment reads and writes are automatically (without memory or
execution dependencies) coherent and ordered against themselves and each
other for a given sample within a subpass of a render pass instance,
executing in <a class="link" href="#">API order</a>. Similarly,
depth/stencil attachment reads and writes are automatically coherent and
ordered against themselves and each other in the same circumstances.</p><p>Shader reads and/or writes through two variables (in the same or different
shader invocations) decorated with <span class="strong"><strong><code class="code">Coherent</code></strong></span> and which use the same
image view or buffer view are automatically coherent with each other, but
require execution dependencies if a specific order is desired. Similarly,
shader atomic operations are coherent with each other and with <span class="strong"><strong><code class="code">Coherent</code></strong></span>
variables. Non-<span class="strong"><strong><code class="code">Coherent</code></strong></span> shader memory accesses require memory
dependencies for writes to be available and reads to be visible.</p><p>Certain memory access types are only supported on queues that support a
particular set of operations. The following table lists, for each access
flag, which queue capability flag <span class="normative">must</span> be supported by the queue. When
multiple flags are enumerated in the second column of the table it means
that the access type is supported on the queue if it supports any of the
listed capability flags. For further details on queue capabilities see
<a class="link" href="#">Physical Device Enumeration</a>
and <a class="link" href="#">Queues</a>.</p><div class="table"><a id="id-1.6.10"></a><p class="title"><strong>Table 1. Supported access flags</strong></p><div class="table-contents"><table summary="Supported access flags" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " width="100%"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top">Access flag                                                  </th><th style="border-bottom: 1px solid #527bbd; " align="left" valign="top"> Required queue capability flag</th></tr></thead><tbody><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_ACCESS_INDIRECT_COMMAND_READ_BIT</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_QUEUE_GRAPHICS_BIT</code> or <code class="code">VK_QUEUE_COMPUTE_BIT</code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_ACCESS_INDEX_READ_BIT</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_QUEUE_GRAPHICS_BIT</code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_ACCESS_VERTEX_ATTRIBUTE_READ_BIT</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_QUEUE_GRAPHICS_BIT</code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_ACCESS_UNIFORM_READ_BIT</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_QUEUE_GRAPHICS_BIT</code> or <code class="code">VK_QUEUE_COMPUTE_BIT</code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_ACCESS_INPUT_ATTACHMENT_READ_BIT</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_QUEUE_GRAPHICS_BIT</code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_ACCESS_SHADER_READ_BIT</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_QUEUE_GRAPHICS_BIT</code> or <code class="code">VK_QUEUE_COMPUTE_BIT</code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_ACCESS_SHADER_WRITE_BIT</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_QUEUE_GRAPHICS_BIT</code> or <code class="code">VK_QUEUE_COMPUTE_BIT</code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_ACCESS_COLOR_ATTACHMENT_READ_BIT</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_QUEUE_GRAPHICS_BIT</code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_ACCESS_COLOR_ATTACHMENT_WRITE_BIT</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_QUEUE_GRAPHICS_BIT</code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_READ_BIT</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_QUEUE_GRAPHICS_BIT</code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_WRITE_BIT</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_QUEUE_GRAPHICS_BIT</code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_ACCESS_TRANSFER_READ_BIT</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_QUEUE_GRAPHICS_BIT</code>, <code class="code">VK_QUEUE_COMPUTE_BIT</code> or <code class="code">VK_QUEUE_TRANSFER_BIT</code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_ACCESS_TRANSFER_WRITE_BIT</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_QUEUE_GRAPHICS_BIT</code>, <code class="code">VK_QUEUE_COMPUTE_BIT</code> or <code class="code">VK_QUEUE_TRANSFER_BIT</code></p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_ACCESS_HOST_READ_BIT</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>None</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_ACCESS_HOST_WRITE_BIT</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>None</p></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_ACCESS_MEMORY_READ_BIT</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>None</p></td></tr><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p><code class="code">VK_ACCESS_MEMORY_WRITE_BIT</code></p></td><td style="" align="left" valign="top"><p>None</p></td></tr></tbody></table></div></div><br class="table-break" /></div><div class="refsect1"><a id="_valid_usage"></a><h2>Valid Usage</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>sType</code></em> <span class="normative">must</span> be <code class="code">VK_STRUCTURE_TYPE_MEMORY_BARRIER</code>
</li><li class="listitem">
<em class="parameter"><code>pNext</code></em> <span class="normative">must</span> be <code class="literal">NULL</code>
</li><li class="listitem">
<em class="parameter"><code>srcAccessMask</code></em> <span class="normative">must</span> be a valid combination of <code class="code"><a class="link" href="#">VkAccessFlagBits</a></code> values
</li><li class="listitem">
<em class="parameter"><code>dstAccessMask</code></em> <span class="normative">must</span> be a valid combination of <code class="code"><a class="link" href="#">VkAccessFlagBits</a></code> values
</li></ul></div></div><div class="refsect1"><a id="_see_also"></a><h2>See Also</h2><p><code class="code"><a class="link" href="#">VkAccessFlags</a></code>, <code class="code"><a class="link" href="#">VkStructureType</a></code>, <code class="code"><a class="link" href="#">vkCmdPipelineBarrier</a></code>, <code class="code"><a class="link" href="#">vkCmdWaitEvents</a></code></p></div><div class="refsect1"><a id="_document_notes"></a><h2>Document Notes</h2><p>For more information, see the Vulkan Specification at URL</p><p><a class="ulink" href="https://www.khronos.org/registry/vulkan/specs/1.0/xhtml/vkspec.html#VkMemoryBarrier" target="_top">https://www.khronos.org/registry/vulkan/specs/1.0/xhtml/vkspec.html#VkMemoryBarrier</a></p><p>This page is extracted from the Vulkan Specification.
Fixes and changes should be made to the Specification,not directly.</p></div><div class="refsect1"><a id="_copyright"></a><h2>Copyright</h2><p>Copyright (c) 2014-2016 Khronos Group. This work is licensed under a
<a class="ulink" href="http://creativecommons.org/licenses/by/4.0/" target="_top">Creative Commons
Attribution 4.0 International License</a>.</p></div></div></body></html>