<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>vkCmdPipelineBarrier</title><link rel="stylesheet" type="text/css" href="vkman.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /></head><body><div xml:lang="en" class="refentry" lang="en"><a id="id-1"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vkCmdPipelineBarrier â€” Insert a set of execution and memory barriers.</p></div><div class="refsect1"><a id="_c_specification"></a><h2>C Specification</h2><p>To record a pipeline barrier, call:</p><pre class="programlisting">void vkCmdPipelineBarrier(
    VkCommandBuffer                             commandBuffer,
    VkPipelineStageFlags                        srcStageMask,
    VkPipelineStageFlags                        dstStageMask,
    VkDependencyFlags                           dependencyFlags,
    uint32_t                                    memoryBarrierCount,
    const VkMemoryBarrier*                      pMemoryBarriers,
    uint32_t                                    bufferMemoryBarrierCount,
    const VkBufferMemoryBarrier*                pBufferMemoryBarriers,
    uint32_t                                    imageMemoryBarrierCount,
    const VkImageMemoryBarrier*                 pImageMemoryBarriers);</pre></div><div class="refsect1"><a id="_parameters"></a><h2>Parameters</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>commandBuffer</code></em> is the command buffer into which the command is
    recorded.
</li><li class="listitem">
<em class="parameter"><code>srcStageMask</code></em> is a bitmask of <code class="code"><a class="link" href="#">VkPipelineStageFlagBits</a></code>
    specifying a set of source pipeline stages (see
    <a class="xref" href="#">???</a>).
</li><li class="listitem"><p class="simpara">
<em class="parameter"><code>dstStageMask</code></em> is a bitmask specifying a set of destination pipeline
    stages.
</p><p class="simpara">The pipeline barrier specifies an execution dependency such that all
work performed by the set of pipeline stages included in
<em class="parameter"><code>srcStageMask</code></em> of the first set of commands completes before any
work performed by the set of pipeline stages included in
<em class="parameter"><code>dstStageMask</code></em> of the second set of commands begins.</p></li><li class="listitem">
<em class="parameter"><code>dependencyFlags</code></em> is a bitmask of <code class="code"><a class="link" href="#">VkDependencyFlagBits</a></code>. The
    execution dependency is by-region if the mask includes
    <code class="code">VK_DEPENDENCY_BY_REGION_BIT</code>.
</li><li class="listitem">
<em class="parameter"><code>memoryBarrierCount</code></em> is the length of the <em class="parameter"><code>pMemoryBarriers</code></em>
    array.
</li><li class="listitem">
<em class="parameter"><code>pMemoryBarriers</code></em> is a pointer to an array of <code class="code"><a class="link" href="#">VkMemoryBarrier</a></code>
    structures.
</li><li class="listitem">
<em class="parameter"><code>bufferMemoryBarrierCount</code></em> is the length of the
    <em class="parameter"><code>pBufferMemoryBarriers</code></em> array.
</li><li class="listitem">
<em class="parameter"><code>pBufferMemoryBarriers</code></em> is a pointer to an array of
    <code class="code"><a class="link" href="#">VkBufferMemoryBarrier</a></code> structures.
</li><li class="listitem">
<em class="parameter"><code>imageMemoryBarrierCount</code></em> is the length of the
    <em class="parameter"><code>pImageMemoryBarriers</code></em> array.
</li><li class="listitem">
<em class="parameter"><code>pImageMemoryBarriers</code></em> is a pointer to an array of
    <code class="code"><a class="link" href="#">VkImageMemoryBarrier</a></code> structures.
</li></ul></div></div><div class="refsect1"><a id="_description"></a><h2>Description</h2><p>Each element of the <em class="parameter"><code>pMemoryBarriers</code></em>, <em class="parameter"><code>pBufferMemoryBarriers</code></em> and
<em class="parameter"><code>pImageMemoryBarriers</code></em> arrays specifies two halves of a memory
dependency, as defined above. Specifics of each type of memory barrier and
the memory access types are defined further in
<a class="link" href="#">Memory Barriers</a>.</p><p>If <span class="strong"><strong><code class="code">vkCmdPipelineBarrier</code></strong></span> is called outside a render pass instance, then
the first set of commands is all prior commands submitted to the queue and
recorded in the command buffer and the second set of commands is all
subsequent commands recorded in the command buffer and submitted to the
queue. If <span class="strong"><strong><code class="code">vkCmdPipelineBarrier</code></strong></span> is called inside a render pass
instance, then the first set of commands is all prior commands in the same
subpass and the second set of commands is all subsequent commands in the
same subpass.</p></div><div class="refsect1"><a id="_valid_usage"></a><h2>Valid Usage</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>commandBuffer</code></em> <span class="normative">must</span> be a valid <code class="code">VkCommandBuffer</code> handle
</li><li class="listitem">
<em class="parameter"><code>srcStageMask</code></em> <span class="normative">must</span> be a valid combination of <code class="code"><a class="link" href="#">VkPipelineStageFlagBits</a></code> values
</li><li class="listitem">
<em class="parameter"><code>srcStageMask</code></em> <span class="normative">must not</span> be <code class="literal">0</code>
</li><li class="listitem">
<em class="parameter"><code>dstStageMask</code></em> <span class="normative">must</span> be a valid combination of <code class="code"><a class="link" href="#">VkPipelineStageFlagBits</a></code> values
</li><li class="listitem">
<em class="parameter"><code>dstStageMask</code></em> <span class="normative">must not</span> be <code class="literal">0</code>
</li><li class="listitem">
<em class="parameter"><code>dependencyFlags</code></em> <span class="normative">must</span> be a valid combination of <code class="code"><a class="link" href="#">VkDependencyFlagBits</a></code> values
</li><li class="listitem">
If <em class="parameter"><code>memoryBarrierCount</code></em> is not <code class="literal">0</code>, <em class="parameter"><code>pMemoryBarriers</code></em> <span class="normative">must</span> be a pointer to an array of <em class="parameter"><code>memoryBarrierCount</code></em> valid <code class="code">VkMemoryBarrier</code> structures
</li><li class="listitem">
If <em class="parameter"><code>bufferMemoryBarrierCount</code></em> is not <code class="literal">0</code>, <em class="parameter"><code>pBufferMemoryBarriers</code></em> <span class="normative">must</span> be a pointer to an array of <em class="parameter"><code>bufferMemoryBarrierCount</code></em> valid <code class="code">VkBufferMemoryBarrier</code> structures
</li><li class="listitem">
If <em class="parameter"><code>imageMemoryBarrierCount</code></em> is not <code class="literal">0</code>, <em class="parameter"><code>pImageMemoryBarriers</code></em> <span class="normative">must</span> be a pointer to an array of <em class="parameter"><code>imageMemoryBarrierCount</code></em> valid <code class="code">VkImageMemoryBarrier</code> structures
</li><li class="listitem">
<em class="parameter"><code>commandBuffer</code></em> <span class="normative">must</span> be in the recording state
</li><li class="listitem">
The <code class="code">VkCommandPool</code> that <em class="parameter"><code>commandBuffer</code></em> was allocated from <span class="normative">must</span> support transfer, graphics or compute operations
</li><li class="listitem">
If the <a class="link" href="#">geometry shaders</a> feature is not enabled, <em class="parameter"><code>srcStageMask</code></em> <span class="normative">must not</span> contain <code class="code">VK_PIPELINE_STAGE_GEOMETRY_SHADER_BIT</code>
</li><li class="listitem">
If the <a class="link" href="#">geometry shaders</a> feature is not enabled, <em class="parameter"><code>dstStageMask</code></em> <span class="normative">must not</span> contain <code class="code">VK_PIPELINE_STAGE_GEOMETRY_SHADER_BIT</code>
</li><li class="listitem">
If the <a class="link" href="#">tessellation shaders</a> feature is not enabled, <em class="parameter"><code>srcStageMask</code></em> <span class="normative">must not</span> contain <code class="code">VK_PIPELINE_STAGE_TESSELLATION_CONTROL_SHADER_BIT</code> or <code class="code">VK_PIPELINE_STAGE_TESSELLATION_EVALUATION_SHADER_BIT</code>
</li><li class="listitem">
If the <a class="link" href="#">tessellation shaders</a> feature is not enabled, <em class="parameter"><code>dstStageMask</code></em> <span class="normative">must not</span> contain <code class="code">VK_PIPELINE_STAGE_TESSELLATION_CONTROL_SHADER_BIT</code> or <code class="code">VK_PIPELINE_STAGE_TESSELLATION_EVALUATION_SHADER_BIT</code>
</li><li class="listitem">
If <span class="strong"><strong><code class="code">vkCmdPipelineBarrier</code></strong></span> is called within a render pass instance, the render pass <span class="normative">must</span> declare at least one self-dependency from the current subpass to itself - see <a class="link" href="#">Subpass Self-dependency</a>
</li></ul></div></div><div class="refsect1"><a id="_host_synchronization"></a><h2>Host Synchronization</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Host access to <em class="parameter"><code>commandBuffer</code></em> <span class="normative">must</span> be externally synchronized
</li></ul></div></div><div class="refsect1"><a id="_command_properties"></a><h2>Command Properties</h2><div class="informaltable"><table cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " width="100%"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><thead><tr><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top">Command Buffer Levels</th><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top">Render Pass Scope</th><th style="border-bottom: 1px solid #527bbd; " align="left" valign="top">Supported Queue Types</th></tr></thead><tbody><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>Primary
Secondary</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>Both</p></td><td style="" align="left" valign="top"><p>TRANSFER
GRAPHICS
COMPUTE</p></td></tr></tbody></table></div></div><div class="refsect1"><a id="_see_also"></a><h2>See Also</h2><p><code class="code"><a class="link" href="#">VkBufferMemoryBarrier</a></code>, <code class="code"><a class="link" href="#">VkCommandBuffer</a></code>, <code class="code"><a class="link" href="#">VkDependencyFlags</a></code>, <code class="code"><a class="link" href="#">VkImageMemoryBarrier</a></code>, <code class="code"><a class="link" href="#">VkMemoryBarrier</a></code>, <code class="code"><a class="link" href="#">VkPipelineStageFlags</a></code></p></div><div class="refsect1"><a id="_document_notes"></a><h2>Document Notes</h2><p>For more information, see the Vulkan Specification at URL</p><p><a class="ulink" href="https://www.khronos.org/registry/vulkan/specs/1.0/xhtml/vkspec.html#vkCmdPipelineBarrier" target="_top">https://www.khronos.org/registry/vulkan/specs/1.0/xhtml/vkspec.html#vkCmdPipelineBarrier</a></p><p>This page is extracted from the Vulkan Specification.
Fixes and changes should be made to the Specification,not directly.</p></div><div class="refsect1"><a id="_copyright"></a><h2>Copyright</h2><p>Copyright (c) 2014-2016 Khronos Group. This work is licensed under a
<a class="ulink" href="http://creativecommons.org/licenses/by/4.0/" target="_top">Creative Commons
Attribution 4.0 International License</a>.</p></div></div></body></html>