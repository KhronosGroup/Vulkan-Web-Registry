<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>VkImageLayout</title><link rel="stylesheet" type="text/css" href="vkman.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /></head><body><div xml:lang="en" class="refentry" lang="en"><a id="id-1"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VkImageLayout — Layout of image and image subresources</p></div><div class="refsect1"><a id="_c_specification"></a><h2>C Specification</h2><p>The set of image layouts consists of:</p><pre class="programlisting">typedef enum VkImageLayout {
    VK_IMAGE_LAYOUT_UNDEFINED = 0,
    VK_IMAGE_LAYOUT_GENERAL = 1,
    VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL = 2,
    VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL = 3,
    VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL = 4,
    VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL = 5,
    VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL = 6,
    VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL = 7,
    VK_IMAGE_LAYOUT_PREINITIALIZED = 8,
} VkImageLayout;</pre></div><div class="refsect1"><a id="_description"></a><h2>Description</h2><p>The type(s) of device access supported by each layout are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="code">VK_IMAGE_LAYOUT_UNDEFINED</code>: Supports no device access. This layout
    <span class="normative">must</span> only be used as an <em class="parameter"><code>initialLayout</code></em> or as the <em class="parameter"><code>oldLayout</code></em>
    in an image transition. When transitioning out of this layout, the
    contents of the memory are not guaranteed to be preserved.
</li><li class="listitem">
<code class="code">VK_IMAGE_LAYOUT_PREINITIALIZED</code>: Supports no device access. This
    layout <span class="normative">must</span> only be used as an <em class="parameter"><code>initialLayout</code></em> or as the
    <em class="parameter"><code>oldLayout</code></em> in an image transition. When transitioning out of this
    layout, the contents of the memory are preserved. This
    layout is intended to be used as the initial layout for an image whose
    contents are written by the host, and hence the data <span class="normative">can</span> be written to
    memory immediately, without first executing a layout transition.
    Currently, <code class="code">VK_IMAGE_LAYOUT_PREINITIALIZED</code> is only useful with
    <code class="code">VK_IMAGE_TILING_LINEAR</code> images because there is not a standard
    layout defined for <code class="code">VK_IMAGE_TILING_OPTIMAL</code> images.
</li><li class="listitem">
<code class="code">VK_IMAGE_LAYOUT_GENERAL</code>: Supports all types of device access.
</li><li class="listitem">
<code class="code">VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL</code>: <span class="normative">must</span> only be used as a
    color or resolve attachment in a <code class="code">VkFramebuffer</code>. This layout is
    valid only for image subresources of images created with the
    <code class="code">VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code> usage bit enabled.
</li><li class="listitem">
<code class="code">VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL</code>: <span class="normative">must</span> only be
    used as a depth/stencil attachment in a <code class="code">VkFramebuffer</code>. This layout
    is valid only for image subresources of images created with the
    <code class="code">VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code> usage bit enabled.
</li><li class="listitem">
<code class="code">VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code>: <span class="normative">must</span> only be
    used as a read-only depth/stencil attachment in a <code class="code">VkFramebuffer</code>
    and/or as a read-only image in a shader (which <span class="normative">can</span> be read as a sampled
    image, combined image/sampler and/or input attachment). This layout is
    valid only for image subresources of images created with the
    <code class="code">VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code> usage bit enabled.
</li><li class="listitem">
<code class="code">VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL</code>: <span class="normative">must</span> only be used as a
    read-only image in a shader (which <span class="normative">can</span> be read as a sampled image,
    combined image/sampler and/or input attachment). This layout is valid
    only for image subresources of images created with the
    <code class="code">VK_IMAGE_USAGE_SAMPLED_BIT</code> or
    <code class="code">VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code> usage bit enabled.
</li><li class="listitem">
<code class="code">VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code>: <span class="normative">must</span> only be used as a
    source image of a transfer command (see the definition of
    <a class="link" href="#"><code class="code">VK_PIPELINE_STAGE_TRANSFER_BIT</code></a>).
    This layout is valid only for image subresources of images created with
    the <code class="code">VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage bit enabled.
</li><li class="listitem">
<code class="code">VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>: <span class="normative">must</span> only be used as a
    destination image of a transfer command. This layout is valid only for
    image subresources of images created with the
    <code class="code">VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage bit enabled.
</li></ul></div><p>For each mechanism of accessing an image in the API, there is a parameter or
structure member that controls the image layout used to access the image.
For transfer commands, this is a parameter to the command (see <a class="xref" href="#">???</a>
and <a class="xref" href="#">???</a>). For use as a framebuffer attachment, this is a member in
the substructures of the <code class="code">VkRenderPassCreateInfo</code> (see
<a class="link" href="#">Render Pass</a>). For use in a descriptor set, this is a member
in the <code class="code">VkDescriptorImageInfo</code> structure (see
<a class="xref" href="#">???</a>). At the time that any command buffer command
accessing an image executes on any queue, the layouts of the image
subresources that are accessed <span class="normative">must</span> all match the layout specified via the
API controlling those accesses.</p><p>The image layout of each image subresource <span class="normative">must</span> be well-defined at each
point in the image subresource’s lifetime. This means that when performing a
layout transition on the image subresource, the old layout value <span class="normative">must</span>
either equal the current layout of the image subresource (at the time the
transition executes), or else be <code class="code">VK_IMAGE_LAYOUT_UNDEFINED</code> (implying
that the contents of the image subresource need not be preserved). The new
layout used in a transition <span class="normative">must not</span> be <code class="code">VK_IMAGE_LAYOUT_UNDEFINED</code> or
<code class="code">VK_IMAGE_LAYOUT_PREINITIALIZED</code>.</p></div><div class="refsect1"><a id="_see_also"></a><h2>See Also</h2><p><code class="code"><a class="link" href="#">VkAttachmentDescription</a></code>, <code class="code"><a class="link" href="#">VkAttachmentReference</a></code>, <code class="code"><a class="link" href="#">VkDescriptorImageInfo</a></code>, <code class="code"><a class="link" href="#">VkImageCreateInfo</a></code>, <code class="code"><a class="link" href="#">VkImageMemoryBarrier</a></code>, <code class="code"><a class="link" href="#">vkCmdBlitImage</a></code>, <code class="code"><a class="link" href="#">vkCmdClearColorImage</a></code>, <code class="code"><a class="link" href="#">vkCmdClearDepthStencilImage</a></code>, <code class="code"><a class="link" href="#">vkCmdCopyBufferToImage</a></code>, <code class="code"><a class="link" href="#">vkCmdCopyImage</a></code>, <code class="code"><a class="link" href="#">vkCmdCopyImageToBuffer</a></code>, <code class="code"><a class="link" href="#">vkCmdResolveImage</a></code></p></div><div class="refsect1"><a id="_document_notes"></a><h2>Document Notes</h2><p>For more information, see the Vulkan Specification at URL</p><p><a class="ulink" href="https://www.khronos.org/registry/vulkan/specs/1.0/xhtml/vkspec.html#VkImageLayout" target="_top">https://www.khronos.org/registry/vulkan/specs/1.0/xhtml/vkspec.html#VkImageLayout</a></p><p>This page is extracted from the Vulkan Specification.
Fixes and changes should be made to the Specification,not directly.</p></div><div class="refsect1"><a id="_copyright"></a><h2>Copyright</h2><p>Copyright (c) 2014-2016 Khronos Group. This work is licensed under a
<a class="ulink" href="http://creativecommons.org/licenses/by/4.0/" target="_top">Creative Commons
Attribution 4.0 International License</a>.</p></div></div></body></html>