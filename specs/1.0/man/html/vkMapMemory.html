<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>vkMapMemory</title><link rel="stylesheet" type="text/css" href="vkman.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /></head><body><div xml:lang="en" class="refentry" lang="en"><a id="id-1"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>vkMapMemory â€” Map a memory object into application address space.</p></div><div class="refsect1"><a id="_c_specification"></a><h2>C Specification</h2><p>To retrieve a host virtual address pointer to a region of a mappable memory
object, call:</p><pre class="programlisting">VkResult vkMapMemory(
    VkDevice                                    device,
    VkDeviceMemory                              memory,
    VkDeviceSize                                offset,
    VkDeviceSize                                size,
    VkMemoryMapFlags                            flags,
    void**                                      ppData);</pre></div><div class="refsect1"><a id="_parameters"></a><h2>Parameters</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>device</code></em> is the logical device that owns the memory.
</li><li class="listitem">
<em class="parameter"><code>memory</code></em> is the <code class="code">VkDeviceMemory</code> object to be mapped.
</li><li class="listitem">
<em class="parameter"><code>offset</code></em> is a zero-based byte offset from the beginning of the
    memory object.
</li><li class="listitem">
<em class="parameter"><code>size</code></em> is the size of the memory range to map, or
    <code class="code">VK_WHOLE_SIZE</code> to map from <em class="parameter"><code>offset</code></em> to the end of the
    allocation.
</li><li class="listitem">
<em class="parameter"><code>flags</code></em> is reserved for future use.
</li><li class="listitem">
<em class="parameter"><code>ppData</code></em> points to a pointer in which is returned a host-accessible
    pointer to the beginning of the mapped range. This pointer minus
    <em class="parameter"><code>offset</code></em> <span class="normative">must</span> be aligned to at least
    <code class="code">VkPhysicalDeviceLimits</code>::<em class="parameter"><code>minMemoryMapAlignment</code></em>.
</li></ul></div></div><div class="refsect1"><a id="_description"></a><h2>Description</h2><p>It is an application error to call <span class="strong"><strong><code class="code">vkMapMemory</code></strong></span> on a memory object that
is already mapped.</p><p><a id="memory-device-hostaccess-hazards"></a><span class="strong"><strong><code class="code">vkMapMemory</code></strong></span> does not check whether the device memory is currently in
use before returning the host-accessible pointer. The application
<span class="normative">must</span> guarantee that any previously submitted command that writes to this
range has completed before the host reads from or writes to that
range, and that any previously submitted command that reads from that
range has completed before the host writes to that region (see
<a class="link" href="#">here</a>
for details on fulfilling such a guarantee). If the device memory was
allocated without the <code class="code">VK_MEMORY_PROPERTY_HOST_COHERENT_BIT</code> set,
these guarantees <span class="normative">must</span> be made for an extended range: the application
<span class="normative">must</span> round down the start of the range to the nearest multiple of
<code class="code">VkPhysicalDeviceLimits</code>::<em class="parameter"><code>nonCoherentAtomSize</code></em>, and round the end
of the range up to the nearest multiple of
<code class="code">VkPhysicalDeviceLimits</code>::<em class="parameter"><code>nonCoherentAtomSize</code></em>.</p><p>While a range of device memory is mapped for host access, the application
is responsible for synchronizing both device and host access to that memory
range.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><table border="0" summary="Note: Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/icons/note.png" /></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>It is important for the application developer to become meticulously
familiar with all of the mechanisms described in the chapter on
<a class="link" href="#">Synchronization and Cache Control</a> as they are crucial
to maintaining memory access ordering.</p></td></tr></table></div></div><div class="refsect1"><a id="_valid_usage"></a><h2>Valid Usage</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<em class="parameter"><code>device</code></em> <span class="normative">must</span> be a valid <code class="code">VkDevice</code> handle
</li><li class="listitem">
<em class="parameter"><code>memory</code></em> <span class="normative">must</span> be a valid <code class="code">VkDeviceMemory</code> handle
</li><li class="listitem">
<em class="parameter"><code>flags</code></em> <span class="normative">must</span> be <code class="literal">0</code>
</li><li class="listitem">
<em class="parameter"><code>ppData</code></em> <span class="normative">must</span> be a pointer to a pointer
</li><li class="listitem">
<em class="parameter"><code>memory</code></em> <span class="normative">must</span> have been created, allocated or retrieved from <em class="parameter"><code>device</code></em>
</li><li class="listitem">
Each of <em class="parameter"><code>device</code></em> and <em class="parameter"><code>memory</code></em> <span class="normative">must</span> have been created, allocated or retrieved from the same <code class="code">VkPhysicalDevice</code>
</li><li class="listitem">
<em class="parameter"><code>memory</code></em> <span class="normative">must not</span> currently be mapped
</li><li class="listitem">
<em class="parameter"><code>offset</code></em> <span class="normative">must</span> be less than the size of <em class="parameter"><code>memory</code></em>
</li><li class="listitem">
If <em class="parameter"><code>size</code></em> is not equal to <code class="code">VK_WHOLE_SIZE</code>, <em class="parameter"><code>size</code></em> <span class="normative">must</span> be greater than <code class="literal">0</code>
</li><li class="listitem">
If <em class="parameter"><code>size</code></em> is not equal to <code class="code">VK_WHOLE_SIZE</code>, <em class="parameter"><code>size</code></em> <span class="normative">must</span> be less than or equal to the size of the <em class="parameter"><code>memory</code></em> minus <em class="parameter"><code>offset</code></em>
</li><li class="listitem">
<em class="parameter"><code>memory</code></em> <span class="normative">must</span> have been created with a memory type that reports <code class="code">VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT</code>
</li></ul></div></div><div class="refsect1"><a id="_host_synchronization"></a><h2>Host Synchronization</h2><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Host access to <em class="parameter"><code>memory</code></em> <span class="normative">must</span> be externally synchronized
</li></ul></div></div><div class="refsect1"><a id="_return_codes"></a><h2>Return Codes</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term">
On success, this command returns
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="code">VK_SUCCESS</code>
</li></ul></div></dd><dt><span class="term">
On failure, this command returns
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="code">VK_ERROR_OUT_OF_HOST_MEMORY</code>
</li><li class="listitem">
<code class="code">VK_ERROR_OUT_OF_DEVICE_MEMORY</code>
</li><li class="listitem">
<code class="code">VK_ERROR_MEMORY_MAP_FAILED</code>
</li></ul></div></dd></dl></div></div><div class="refsect1"><a id="_see_also"></a><h2>See Also</h2><p><code class="code"><a class="link" href="#">VkDevice</a></code>, <code class="code"><a class="link" href="#">VkDeviceMemory</a></code>, basetypes:VkDeviceSize, <code class="code"><a class="link" href="#">VkMemoryMapFlags</a></code></p></div><div class="refsect1"><a id="_document_notes"></a><h2>Document Notes</h2><p>For more information, see the Vulkan Specification at URL</p><p><a class="ulink" href="https://www.khronos.org/registry/vulkan/specs/1.0/xhtml/vkspec.html#vkMapMemory" target="_top">https://www.khronos.org/registry/vulkan/specs/1.0/xhtml/vkspec.html#vkMapMemory</a></p><p>This page is extracted from the Vulkan Specification.
Fixes and changes should be made to the Specification,not directly.</p></div><div class="refsect1"><a id="_copyright"></a><h2>Copyright</h2><p>Copyright (c) 2014-2016 Khronos Group. This work is licensed under a
<a class="ulink" href="http://creativecommons.org/licenses/by/4.0/" target="_top">Creative Commons
Attribution 4.0 International License</a>.</p></div></div></body></html>