<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="AsciiDoc 8.6.9">
<title>vkMapMemory(3)</title>
<style type="text/css">
/*
  CSS stylesheet for XHTML produced by DocBook XSL stylesheets.
  Tested with XSL stylesheets 1.61.2, 1.67.2
*/

span.strong {
  font-weight: bold;
}

body blockquote {
  margin-top: .75em;
  line-height: 1.5;
  margin-bottom: .75em;
}

html body {
  margin: 1em 5% 1em 5%;
  font-family: tahoma, veranda, sans-serif;
}

body div {
  margin: 0;
}

h1, h2, h3, h4, h5, h6
{
  color: #527bbd;
  font-family: tahoma, verdana, sans-serif;
}

.type {
  color: #333333;
  font-family: "courier new", monospace;
  /* font-size: 1.2em; */
}

code {
  font-family: "courier new", monospace;
  /* font-size: 1.2em; */
}

div.toc p:first-child,
div.list-of-figures p:first-child,
div.list-of-tables p:first-child,
div.list-of-examples p:first-child,
div.example p.title,
div.sidebar p.title
{
  font-weight: bold;
  color: #527bbd;
  font-family: tahoma, verdana, sans-serif;
  margin-bottom: 0.2em;
}

div.refnamediv
{
  font-weight: bold;
  color: #333377;
}

em.parameter {
  font-style: normal;
  color: #000060;
  font-family: "courier new", monospace;
}

body h1 {
  margin: .0em 0 0 -4%;
  line-height: 1.3;
  border-bottom: 2px solid silver;
}

body h2 {
  margin: 0.5em 0 0 -4%;
  line-height: 1.3;
  border-bottom: 2px solid silver;
}

body h3 {
  margin: .8em 0 0 -3%;
  line-height: 1.3;
}

body h4 {
  margin: .8em 0 0 -3%;
  line-height: 1.3;
}

body h5 {
  margin: .8em 0 0 -2%;
  line-height: 1.3;
}

body h6 {
  margin: .8em 0 0 -1%;
  line-height: 1.3;
}

body hr {
  border: none; /* Broken on IE6 */
}
div.footnotes hr {
  border: 1px solid silver;
}

div.navheader th, div.navheader td, div.navfooter td {
  font-family: sans-serif;
  font-size: 0.9em;
  font-weight: bold;
  color: #527bbd;
}
div.navheader img, div.navfooter img {
  border-style: none;
}
div.navheader a, div.navfooter a {
  font-weight: normal;
}
div.navfooter hr {
  border: 1px solid silver;
}

body td {
  line-height: 1.2
}

body th {
  line-height: 1.2;
}

ol {
  line-height: 1.2;
}

ul, body dir, body menu {
  line-height: 1.2;
}

html {
  margin: 0;
  padding: 0;
}

body h1, body h2, body h3, body h4, body h5, body h6 {
  margin-left: 0
}

body pre {
  margin: 0.5em 10% 0.5em 1em;
  line-height: 1.0;
  color: #333333;
}

tt.literal, code.literal {
  color: navy;
}

.programlisting, .screen {
  border: 1px solid silver;
  background: #f4f4f4;
  margin: 0.5em 10% 0.5em 0;
  padding: 0.5em 1em;
  font-family: "courier new", monospace;
}

div.sidebar {
  background: #ffffee;
  margin: 1.0em 10% 0.5em 0;
  padding: 0.5em 1em;
  border: 1px solid silver;
}
div.sidebar * { padding: 0; }
div.sidebar div { margin: 0; }
div.sidebar p.title {
  margin-top: 0.5em;
  margin-bottom: 0.2em;
}

div.bibliomixed {
  margin: 0.5em 5% 0.5em 1em;
}

div.glossary dt {
  font-weight: bold;
}
div.glossary dd p {
  margin-top: 0.2em;
}

dl {
  margin: .8em 0;
  line-height: 1.2;
}

dt {
  margin-top: 0.5em;
}

dt span.term {
  font-style: normal;
  color: navy;
}

div.variablelist dd p {
  margin-top: 0;
}

div.itemizedlist li, div.orderedlist li {
  margin-left: -0.8em;
  margin-top: 0.5em;
}

ul, ol {
    list-style-position: outside;
}

div.sidebar ul, div.sidebar ol {
    margin-left: 2.8em;
}

div.itemizedlist p.title,
div.orderedlist p.title,
div.variablelist p.title
{
  margin-bottom: -0.8em;
}

div.revhistory table {
  border-collapse: collapse;
  border: none;
}
div.revhistory th {
  border: none;
  color: #527bbd;
  font-family: tahoma, verdana, sans-serif;
}
div.revhistory td {
  border: 1px solid silver;
}

/* Keep TOC and index lines close together. */
div.toc dl, div.toc dt,
div.list-of-figures dl, div.list-of-figures dt,
div.list-of-tables dl, div.list-of-tables dt,
div.indexdiv dl, div.indexdiv dt
{
  line-height: normal;
  margin-top: 0;
  margin-bottom: 0;
}

/*
  Table styling does not work because of overriding attributes in
  generated HTML.
*/
div.table table,
div.informaltable table
{
    margin-left: 0;
    margin-right: 5%;
    margin-bottom: 0.8em;
}
div.informaltable table
{
    margin-top: 0.4em
}
div.table thead,
div.table tfoot,
div.table tbody,
div.informaltable thead,
div.informaltable tfoot,
div.informaltable tbody
{
    /* No effect in IE6. */
    border-top: 3px solid #527bbd;
    border-bottom: 3px solid #527bbd;
}
div.table thead, div.table tfoot,
div.informaltable thead, div.informaltable tfoot
{
    font-weight: bold;
}

div.mediaobject img {
    margin-bottom: 0.8em;
}
div.figure p.title,
div.table p.title
{
  margin-top: 1em;
  margin-bottom: 0.4em;
}

div.calloutlist p
{
  margin-top: 0em;
  margin-bottom: 0.4em;
}

@media print {
  div.navheader, div.navfooter { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install();
/*]]>*/
</script>
    <script type="text/x-mathjax-config">
	MathJax.Hub.Config({
	    MathML: { extensions: ["content-mathml.js"] },
	    tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] }
	});
    </script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
</head>
<body class="manpage" style="max-width:1024px">
<div id="header">
<h1>
vkMapMemory(3) Manual Page
</h1>
<h2>NAME</h2>
<div class="sectionbody">
<p>vkMapMemory -
   Map a memory object into application address space
</p>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_c_specification">C Specification</h2>
<div class="sectionbody">
<div class="paragraph"><p>To retrieve a host virtual address pointer to a region of a mappable memory
object, call:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #008080">VkResult</span> <span style="font-weight: bold"><span style="color: #000000">vkMapMemory</span></span><span style="color: #990000">(</span>
    <span style="color: #008080">VkDevice</span>                                    device<span style="color: #990000">,</span>
    <span style="color: #008080">VkDeviceMemory</span>                              memory<span style="color: #990000">,</span>
    <span style="color: #008080">VkDeviceSize</span>                                offset<span style="color: #990000">,</span>
    <span style="color: #008080">VkDeviceSize</span>                                size<span style="color: #990000">,</span>
    <span style="color: #008080">VkMemoryMapFlags</span>                            flags<span style="color: #990000">,</span>
    <span style="color: #009900">void</span><span style="color: #990000">**</span>                                      ppData<span style="color: #990000">);</span></tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_parameters">Parameters</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
<code>device</code> is the logical device that owns the memory.
</p>
</li>
<li>
<p>
<code>memory</code> is the <code>VkDeviceMemory</code> object to be mapped.
</p>
</li>
<li>
<p>
<code>offset</code> is a zero-based byte offset from the beginning of the
    memory object.
</p>
</li>
<li>
<p>
<code>size</code> is the size of the memory range to map, or
    <code>VK_WHOLE_SIZE</code> to map from <code>offset</code> to the end of the
    allocation.
</p>
</li>
<li>
<p>
<code>flags</code> is reserved for future use.
</p>
</li>
<li>
<p>
<code>ppData</code> points to a pointer in which is returned a host-accessible
    pointer to the beginning of the mapped range.
    This pointer minus <code>offset</code> <span role="normative">must</span> be aligned to at least
    <code>VkPhysicalDeviceLimits</code>::<code>minMemoryMapAlignment</code>.
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_description">Description</h2>
<div class="sectionbody">
<div class="paragraph"><p>It is an application error to call <code>vkMapMemory</code> on a memory object that
is already mapped.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph"><p><code>vkMapMemory</code> will fail if the implementation is unable to allocate an
appropriately sized contiguous virtual address range, e.g. due to virtual
address space fragmentation or platform limits.
In such cases, <code>vkMapMemory</code> <span role="normative">must</span> return VK_ERROR_MEMORY_MAP_FAILED.
The application <span role="normative">can</span> improve the likelihood of success by reducing the size
of the mapped range and/or removing unneeded mappings using
<code>VkUnmapMemory</code>.</p></div>
</td>
</tr></table>
</div>
<div class="paragraph" id="memory-device-hostaccess-hazards"><p><code>vkMapMemory</code> does not check whether the device memory is currently in
use before returning the host-accessible pointer.
The application <span role="normative">must</span> guarantee that any previously submitted command that
writes to this range has completed before the host reads from or writes to
that range, and that any previously submitted command that reads from that
range has completed before the host writes to that region (see
<a href="#synchronization-fences-devicewrites">here</a> for details on fulfilling such
a guarantee).
If the device memory was allocated without the
<code>VK_MEMORY_PROPERTY_HOST_COHERENT_BIT</code> set, these guarantees <span role="normative">must</span> be
made for an extended range: the application <span role="normative">must</span> round down the start of
the range to the nearest multiple of
<code>VkPhysicalDeviceLimits</code>::<code>nonCoherentAtomSize</code>, and round the end
of the range up to the nearest multiple of
<code>VkPhysicalDeviceLimits</code>::<code>nonCoherentAtomSize</code>.</p></div>
<div class="paragraph"><p>While a range of device memory is mapped for host access, the application is
responsible for synchronizing both device and host access to that memory
range.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph"><p>It is important for the application developer to become meticulously
familiar with all of the mechanisms described in the chapter on
<a href="#synchronization">Synchronization and Cache Control</a> as they are crucial
to maintaining memory access ordering.</p></div>
</td>
</tr></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist"><ul>
<li>
<p>
<code>memory</code> <span role="normative">must</span> not currently be mapped
</p>
</li>
<li>
<p>
<code>offset</code> <span role="normative">must</span> be less than the size of <code>memory</code>
</p>
</li>
<li>
<p>
If <code>size</code> is not equal to <code>VK_WHOLE_SIZE</code>, <code>size</code> <span role="normative">must</span> be
    greater than <span class="monospaced">0</span>
</p>
</li>
<li>
<p>
If <code>size</code> is not equal to <code>VK_WHOLE_SIZE</code>, <code>size</code> <span role="normative">must</span> be
    less than or equal to the size of the <code>memory</code> minus <code>offset</code>
</p>
</li>
<li>
<p>
<code>memory</code> <span role="normative">must</span> have been created with a memory type that reports
    <code>VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT</code>
</p>
</li>
</ul></div>
</div></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist"><ul>
<li>
<p>
<code>device</code> <span role="normative">must</span> be a valid <code>VkDevice</code> handle
</p>
</li>
<li>
<p>
<code>memory</code> <span role="normative">must</span> be a valid <code>VkDeviceMemory</code> handle
</p>
</li>
<li>
<p>
<code>flags</code> <span role="normative">must</span> be <span class="monospaced">0</span>
</p>
</li>
<li>
<p>
<code>ppData</code> <span role="normative">must</span> be a pointer to a pointer
</p>
</li>
<li>
<p>
<code>memory</code> <span role="normative">must</span> have been created, allocated, or retrieved from <code>device</code>
</p>
</li>
</ul></div>
</div></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist"><ul>
<li>
<p>
Host access to <code>memory</code> <span role="normative">must</span> be externally synchronized
</p>
</li>
</ul></div>
</div></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist"><dl>
<dt class="hdlist1">
On success, this command returns
</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<code>VK_SUCCESS</code>
</p>
</li>
</ul></div>
</dd>
<dt class="hdlist1">
On failure, this command returns
</dt>
<dd>
<div class="ulist"><ul>
<li>
<p>
<code>VK_ERROR_OUT_OF_HOST_MEMORY</code>
</p>
</li>
<li>
<p>
<code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code>
</p>
</li>
<li>
<p>
<code>VK_ERROR_MEMORY_MAP_FAILED</code>
</p>
</li>
</ul></div>
</dd>
</dl></div>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also">See Also</h2>
<div class="sectionbody">
<div class="paragraph"><p><code><a href="VkDevice.html">VkDevice</a></code>, <code><a href="VkDeviceMemory.html">VkDeviceMemory</a></code>, <code><a href="VkDeviceSize.html">VkDeviceSize</a></code>, <code><a href="VkMemoryMapFlags.html">VkMemoryMapFlags</a></code></p></div>
</div>
</div>
<div class="sect1">
<h2 id="_document_notes">Document Notes</h2>
<div class="sectionbody">
<div class="paragraph"><p>For more information, see the Vulkan Specification at URL</p></div>
<div class="paragraph"><p><a href="https://www.khronos.org/registry/vulkan/specs/1.0/xhtml/vkspec.html#vkMapMemory">https://www.khronos.org/registry/vulkan/specs/1.0/xhtml/vkspec.html#vkMapMemory</a></p></div>
<div class="paragraph"><p>This page is extracted from the Vulkan Specification.
Fixes and changes should be made to the Specification,not directly.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_copyright">Copyright</h2>
<div class="sectionbody">
<div class="paragraph"><p>Copyright (c) 2014-2016 Khronos Group. This work is licensed under a
<a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons
Attribution 4.0 International License</a>.</p></div>
</div>
</div>
</div>
<div id="footnotes"><hr></div>
<div id="footer">
<div id="footer-text">
Last updated
 2016-11-12 03:29:09 PST
</div>
</div>
</body>
</html>
