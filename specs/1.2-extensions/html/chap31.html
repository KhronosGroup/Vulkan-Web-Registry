<!DOCTYPE html><html lang="en"><head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<meta name="author" content="The Khronos® Vulkan Working Group">
<title>Vulkan® 1.2.186 - A Specification (with all registered Vulkan extensions)</title>
<link rel="stylesheet" href="style0.css" type="text/css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="style1.css" type="text/css">

<!-- dragged in by font-awesome css included by asciidoctor, but preloaded in this extension for convenience -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0" as="font" type="font/woff2" crossorigin="">

<!-- Note: Chrome needs crossorigin="" even for same-origin fonts -->
<link rel="preload" href="../katex/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Typewriter-Regular.woff2" as="font" type="font/woff2" crossorigin=""><link rel="stylesheet" href="../katex/katex.min.css">
<!--ChunkedSearchJSMarker-->
<link href="chunked.css?4" rel="stylesheet">
<script>var searchindexurl = 'search.index.js?4' + (document.title.replace(/[^0-9.]/g, ''));</script>
<script src="chunked.js?4"></script>
<link rel="stylesheet" href="style2.css" type="text/css">
<script>
    function hideElement(e){
        e.setAttribute("hidden", "");
        e.classList.add("hidden");
    }

    function unhideElement(e){
        e.classList.remove("hidden");
        e.removeAttribute("hidden");
    }

    function hideLoadableContent(){
        unhideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) hideElement(loadable);
    }

    function unhideLoadableContent(){
        hideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) unhideElement(loadable);
    }

    window.addEventListener("load", unhideLoadableContent);
</script>
<link rel="stylesheet" href="asciidoctor-chunker.css" type="text/css"></head>
<body class="book toc2 toc-left">
<div id="header" style="max-width: 100%;">
<h1>Vulkan<sup>®</sup> 1.2.186 - A Specification (with all registered Vulkan extensions)</h1>
<div class="details">
<span id="author" class="author">The Khronos<sup>®</sup> Vulkan Working Group</span><br>
<span id="revnumber">version 1.2.186,</span>
<span id="revdate">2021-07-27 09:51:57Z</span>
<br><span id="revremark">from git branch: github-main commit: 907c556530050b0f4af073753335f23c885c02bf</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="index.html">Titlepage</a></li><li><a href="chap1.html">1. Preamble</a></li>
<li><a href="chap2.html">2. Introduction</a>
<ul class="sectlevel2">
<li><a href="chap2.html#introduction-conventions">2.1. Document Conventions</a></li>
</ul>
</li>
<li><a href="chap3.html">3. Fundamentals</a>
<ul class="sectlevel2">
<li><a href="chap3.html#fundamentals-host-environment">3.1. Host and Device Environment</a></li>
<li><a href="chap3.html#fundamentals-execmodel">3.2. Execution Model</a></li>
<li><a href="chap3.html#fundamentals-objectmodel-overview">3.3. Object Model</a></li>
<li><a href="chap3.html#fundamentals-abi">3.4. Application Binary Interface</a></li>
<li><a href="chap3.html#fundamentals-commandsyntax">3.5. Command Syntax and Duration</a></li>
<li><a href="chap3.html#fundamentals-threadingbehavior">3.6. Threading Behavior</a></li>
<li><a href="chap3.html#fundamentals-validusage">3.7. Valid Usage</a></li>
<li><a href="chap3.html#fundamentals-returncodes">3.8. <code>VkResult</code> Return Codes</a></li>
<li><a href="chap3.html#fundamentals-numerics">3.9. Numeric Representation and Computation</a></li>
<li><a href="chap3.html#fundamentals-fixedconv">3.10. Fixed-Point Data Conversions</a></li>
<li><a href="chap3.html#fundamentals-common-objects">3.11. Common Object Types</a></li>
</ul>
</li>
<li><a href="chap4.html">4. Initialization</a>
<ul class="sectlevel2">
<li><a href="chap4.html#initialization-functionpointers">4.1. Command Function Pointers</a></li>
<li><a href="chap4.html#initialization-instances">4.2. Instances</a></li>
</ul>
</li>
<li><a href="chap5.html">5. Devices and Queues</a>
<ul class="sectlevel2">
<li><a href="chap5.html#devsandqueues-physical-device-enumeration">5.1. Physical Devices</a></li>
<li><a href="chap5.html#devsandqueues-devices">5.2. Devices</a></li>
<li><a href="chap5.html#devsandqueues-queues">5.3. Queues</a></li>
</ul>
</li>
<li><a href="chap6.html">6. Command Buffers</a>
<ul class="sectlevel2">
<li><a href="chap6.html#commandbuffers-lifecycle">6.1. Command Buffer Lifecycle</a></li>
<li><a href="chap6.html#commandbuffers-pools">6.2. Command Pools</a></li>
<li><a href="chap6.html#commandbuffer-allocation">6.3. Command Buffer Allocation and Management</a></li>
<li><a href="chap6.html#commandbuffers-recording">6.4. Command Buffer Recording</a></li>
<li><a href="chap6.html#commandbuffers-submission">6.5. Command Buffer Submission</a></li>
<li><a href="chap6.html#commandbuffers-submission-progress">6.6. Queue Forward Progress</a></li>
<li><a href="chap6.html#commandbuffers-secondary">6.7. Secondary Command Buffer Execution</a></li>
<li><a href="chap6.html#commandbuffers-devicemask">6.8. Command Buffer Device Mask</a></li>
</ul>
</li>
<li><a href="chap7.html">7. Synchronization and Cache Control</a>
<ul class="sectlevel2">
<li><a href="chap7.html#synchronization-dependencies">7.1. Execution and Memory Dependencies</a></li>
<li><a href="chap7.html#synchronization-implicit">7.2. Implicit Synchronization Guarantees</a></li>
<li><a href="chap7.html#synchronization-fences">7.3. Fences</a></li>
<li><a href="chap7.html#synchronization-semaphores">7.4. Semaphores</a></li>
<li><a href="chap7.html#synchronization-events">7.5. Events</a></li>
<li><a href="chap7.html#synchronization-pipeline-barriers">7.6. Pipeline Barriers</a></li>
<li><a href="chap7.html#synchronization-memory-barriers">7.7. Memory Barriers</a></li>
<li><a href="chap7.html#synchronization-wait-idle">7.8. Wait Idle Operations</a></li>
<li><a href="chap7.html#synchronization-submission-host-writes">7.9. Host Write Ordering Guarantees</a></li>
<li><a href="chap7.html#synchronization-device-group">7.10. Synchronization and Multiple Physical Devices</a></li>
<li><a href="chap7.html#calibrated-timestamps">7.11. Calibrated timestamps</a></li>
</ul>
</li>
<li><a href="chap8.html">8. Render Pass</a>
<ul class="sectlevel2">
<li><a href="chap8.html#renderpass-creation">8.1. Render Pass Creation</a></li>
<li><a href="chap8.html#renderpass-compatibility">8.2. Render Pass Compatibility</a></li>
<li><a href="chap8.html#_framebuffers">8.3. Framebuffers</a></li>
<li><a href="chap8.html#renderpass-commands">8.4. Render Pass Commands</a></li>
</ul>
</li>
<li><a href="chap9.html">9. Shaders</a>
<ul class="sectlevel2">
<li><a href="chap9.html#shader-modules">9.1. Shader Modules</a></li>
<li><a href="chap9.html#shaders-execution">9.2. Shader Execution</a></li>
<li><a href="chap9.html#shaders-execution-memory-ordering">9.3. Shader Memory Access Ordering</a></li>
<li><a href="chap9.html#shaders-inputs">9.4. Shader Inputs and Outputs</a></li>
<li><a href="chap9.html#shaders-task">9.5. Task Shaders</a></li>
<li><a href="chap9.html#shaders-mesh">9.6. Mesh Shaders</a></li>
<li><a href="chap9.html#shaders-vertex">9.7. Vertex Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-control">9.8. Tessellation Control Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-evaluation">9.9. Tessellation Evaluation Shaders</a></li>
<li><a href="chap9.html#shaders-geometry">9.10. Geometry Shaders</a></li>
<li><a href="chap9.html#shaders-fragment">9.11. Fragment Shaders</a></li>
<li><a href="chap9.html#shaders-compute">9.12. Compute Shaders</a></li>
<li><a href="chap9.html#shaders-ray-generation">9.13. Ray Generation Shaders</a></li>
<li><a href="chap9.html#shaders-intersection">9.14. Intersection Shaders</a></li>
<li><a href="chap9.html#shaders-any-hit">9.15. Any-Hit Shaders</a></li>
<li><a href="chap9.html#shaders-closest-hit">9.16. Closest Hit Shaders</a></li>
<li><a href="chap9.html#shaders-miss">9.17. Miss Shaders</a></li>
<li><a href="chap9.html#shaders-callable">9.18. Callable Shaders</a></li>
<li><a href="chap9.html#shaders-interpolation-decorations">9.19. Interpolation Decorations</a></li>
<li><a href="chap9.html#shaders-staticuse">9.20. Static Use</a></li>
<li><a href="chap9.html#shaders-scope">9.21. Scope</a></li>
<li><a href="chap9.html#shaders-group-operations">9.22. Group Operations</a></li>
<li><a href="chap9.html#shaders-quad-operations">9.23. Quad Group Operations</a></li>
<li><a href="chap9.html#shaders-derivative-operations">9.24. Derivative Operations</a></li>
<li><a href="chap9.html#shaders-helper-invocations">9.25. Helper Invocations</a></li>
<li><a href="chap9.html#_cooperative_matrices">9.26. Cooperative Matrices</a></li>
<li><a href="chap9.html#shaders-validation-cache">9.27. Validation Cache</a></li>
</ul>
</li>
<li><a href="chap10.html">10. Pipelines</a>
<ul class="sectlevel2">
<li><a href="chap10.html#pipelines-compute">10.1. Compute Pipelines</a></li>
<li><a href="chap10.html#pipelines-graphics">10.2. Graphics Pipelines</a></li>
<li><a href="chap10.html#pipelines-ray-tracing">10.3. Ray Tracing Pipelines</a></li>
<li><a href="chap10.html#pipelines-destruction">10.4. Pipeline Destruction</a></li>
<li><a href="chap10.html#pipelines-multiple">10.5. Multiple Pipeline Creation</a></li>
<li><a href="chap10.html#pipelines-pipeline-derivatives">10.6. Pipeline Derivatives</a></li>
<li><a href="chap10.html#pipelines-cache">10.7. Pipeline Cache</a></li>
<li><a href="chap10.html#pipelines-specialization-constants">10.8. Specialization Constants</a></li>
<li><a href="chap10.html#pipeline-library">10.9. Pipeline Libraries</a></li>
<li><a href="chap10.html#pipelines-binding">10.10. Pipeline Binding</a></li>
<li><a href="chap10.html#pipelines-dynamic-state">10.11. Dynamic State</a></li>
<li><a href="chap10.html#pipelines-shader-information">10.12. Pipeline Shader Information</a></li>
<li><a href="chap10.html#pipelines-compiler-control">10.13. Pipeline Compiler Control</a></li>
<li><a href="chap10.html#pipelines-creation-feedback">10.14. Pipeline Creation Feedback</a></li>
</ul>
</li>
<li><a href="chap11.html">11. Memory Allocation</a>
<ul class="sectlevel2">
<li><a href="chap11.html#memory-host">11.1. Host Memory</a></li>
<li><a href="chap11.html#memory-device">11.2. Device Memory</a></li>
</ul>
</li>
<li><a href="chap12.html">12. Resource Creation</a>
<ul class="sectlevel2">
<li><a href="chap12.html#resources-buffers">12.1. Buffers</a></li>
<li><a href="chap12.html#resources-buffer-views">12.2. Buffer Views</a></li>
<li><a href="chap12.html#resources-images">12.3. Images</a></li>
<li><a href="chap12.html#resources-image-layouts">12.4. Image Layouts</a></li>
<li><a href="chap12.html#resources-image-views">12.5. Image Views</a></li>
<li><a href="chap12.html#resources-acceleration-structures">12.6. Acceleration Structures</a></li>
<li><a href="chap12.html#resources-association">12.7. Resource Memory Association</a></li>
<li><a href="chap12.html#resources-sharing">12.8. Resource Sharing Mode</a></li>
<li><a href="chap12.html#resources-memory-aliasing">12.9. Memory Aliasing</a></li>
</ul>
</li>
<li><a href="chap13.html">13. Samplers</a>
<ul class="sectlevel2">
<li><a href="chap13.html#samplers-YCbCr-conversion">13.1. Sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></li>
</ul>
</li>
<li><a href="chap14.html">14. Resource Descriptors</a>
<ul class="sectlevel2">
<li><a href="chap14.html#descriptorsets-types">14.1. Descriptor Types</a></li>
<li><a href="chap14.html#descriptorsets-sets">14.2. Descriptor Sets</a></li>
<li><a href="chap14.html#descriptorsets-physical-storage-buffer">14.3. Physical Storage Buffer Access</a></li>
</ul>
</li>
<li><a href="chap15.html">15. Shader Interfaces</a>
<ul class="sectlevel2">
<li><a href="chap15.html#interfaces-iointerfaces">15.1. Shader Input and Output Interfaces</a></li>
<li><a href="chap15.html#interfaces-vertexinput">15.2. Vertex Input Interface</a></li>
<li><a href="chap15.html#interfaces-fragmentoutput">15.3. Fragment Output Interface</a></li>
<li><a href="chap15.html#interfaces-inputattachment">15.4. Fragment Input Attachment Interface</a></li>
<li><a href="chap15.html#interfaces-raypipeline">15.5. Ray Tracing Pipeline Interface</a></li>
<li><a href="chap15.html#interfaces-resources">15.6. Shader Resource Interface</a></li>
<li><a href="chap15.html#interfaces-builtin-variables">15.7. Built-In Variables</a></li>
</ul>
</li>
<li><a href="chap16.html">16. Image Operations</a>
<ul class="sectlevel2">
<li><a href="chap16.html#_image_operations_overview">16.1. Image Operations Overview</a></li>
<li><a href="chap16.html#_conversion_formulas">16.2. Conversion Formulas</a></li>
<li><a href="chap16.html#_texel_input_operations">16.3. Texel Input Operations</a></li>
<li><a href="chap16.html#_texel_output_operations">16.4. Texel Output Operations</a></li>
<li><a href="chap16.html#textures-normalized-operations">16.5. Normalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#_unnormalized_texel_coordinate_operations">16.6. Unnormalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-integer-coordinate-operations">16.7. Integer Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-sample-operations">16.8. Image Sample Operations</a></li>
<li><a href="chap16.html#textures-footprint">16.9. Texel Footprint Evaluation</a></li>
<li><a href="chap16.html#textures-instructions">16.10. Image Operation Steps</a></li>
<li><a href="chap16.html#textures-queries">16.11. Image Query Instructions</a></li>
</ul>
</li>
<li><a href="chap17.html">17. Fragment Density Map Operations</a>
<ul class="sectlevel2">
<li><a href="chap17.html#_fragment_density_map_operations_overview">17.1. Fragment Density Map Operations Overview</a></li>
<li><a href="chap17.html#fragmentdensitymap-fetch-density-value">17.2. Fetch Density Value</a></li>
<li><a href="chap17.html#fragmentdensitymap-conversion-to-fragment-area">17.3. Fragment Area Conversion</a></li>
</ul>
</li>
<li><a href="chap18.html">18. Queries</a>
<ul class="sectlevel2">
<li><a href="chap18.html#queries-pools">18.1. Query Pools</a></li>
<li><a href="chap18.html#queries-operation">18.2. Query Operation</a></li>
<li><a href="chap18.html#queries-occlusion">18.3. Occlusion Queries</a></li>
<li><a href="chap18.html#queries-pipestats">18.4. Pipeline Statistics Queries</a></li>
<li><a href="chap18.html#queries-timestamps">18.5. Timestamp Queries</a></li>
<li><a href="chap18.html#queries-performance">18.6. Performance Queries</a></li>
<li><a href="chap18.html#queries-transform-feedback">18.7. Transform Feedback Queries</a></li>
<li><a href="chap18.html#queries-performance-intel">18.8. Intel performance queries</a></li>
<li><a href="chap18.html#queries-result-status-only">18.9. Result Status Queries</a></li>
<li><a href="chap18.html#queries-video-encode-bitstream-buffer-range">18.10. Video Encode Bitstream Buffer Range</a></li>
</ul>
</li>
<li><a href="chap19.html">19. Clear Commands</a>
<ul class="sectlevel2">
<li><a href="chap19.html#clears-outside">19.1. Clearing Images Outside A Render Pass Instance</a></li>
<li><a href="chap19.html#clears-inside">19.2. Clearing Images Inside A Render Pass Instance</a></li>
<li><a href="chap19.html#clears-values">19.3. Clear Values</a></li>
<li><a href="chap19.html#clears-filling-buffers">19.4. Filling Buffers</a></li>
<li><a href="chap19.html#clears-updating-buffers">19.5. Updating Buffers</a></li>
</ul>
</li>
<li><a href="chap20.html">20. Copy Commands</a>
<ul class="sectlevel2">
<li><a href="chap20.html#_common_operation">20.1. Common Operation</a></li>
<li><a href="chap20.html#copies-buffers">20.2. Copying Data Between Buffers</a></li>
<li><a href="chap20.html#copies-images">20.3. Copying Data Between Images</a></li>
<li><a href="chap20.html#copies-buffers-images">20.4. Copying Data Between Buffers and Images</a></li>
<li><a href="chap20.html#copies-imagescaling">20.5. Image Copies with Scaling</a></li>
<li><a href="chap20.html#copies-resolve">20.6. Resolving Multisample Images</a></li>
<li><a href="chap20.html#copies-buffer-markers">20.7. Buffer Markers</a></li>
</ul>
</li>
<li><a href="chap21.html">21. Drawing Commands</a>
<ul class="sectlevel2">
<li><a href="chap21.html#drawing-primitive-topologies">21.1. Primitive Topologies</a></li>
<li><a href="chap21.html#drawing-primitive-order">21.2. Primitive Order</a></li>
<li><a href="chap21.html#drawing-primitive-shading">21.3. Programmable Primitive Shading</a></li>
<li><a href="chap21.html#drawing-conditional-rendering">21.4. Conditional Rendering</a></li>
<li><a href="chap21.html#drawing-mesh-shading">21.5. Programmable Mesh Shading</a></li>
</ul>
</li>
<li><a href="chap22.html">22. Fixed-Function Vertex Processing</a>
<ul class="sectlevel2">
<li><a href="chap22.html#fxvertex-attrib">22.1. Vertex Attributes</a></li>
<li><a href="chap22.html#fxvertex-input">22.2. Vertex Input Description</a></li>
<li><a href="chap22.html#_vertex_attribute_divisor_in_instanced_rendering">22.3. Vertex Attribute Divisor in Instanced Rendering</a></li>
</ul>
</li>
<li><a href="chap23.html">23. Tessellation</a>
<ul class="sectlevel2">
<li><a href="chap23.html#_tessellator">23.1. Tessellator</a></li>
<li><a href="chap23.html#_tessellator_patch_discard">23.2. Tessellator Patch Discard</a></li>
<li><a href="chap23.html#tessellation-tessellator-spacing">23.3. Tessellator Spacing</a></li>
<li><a href="chap23.html#tessellation-primitive-order">23.4. Tessellation Primitive Ordering</a></li>
<li><a href="chap23.html#tessellation-vertex-winding-order">23.5. Tessellator Vertex Winding Order</a></li>
<li><a href="chap23.html#tessellation-triangle-tessellation">23.6. Triangle Tessellation</a></li>
<li><a href="chap23.html#tessellation-quad-tessellation">23.7. Quad Tessellation</a></li>
<li><a href="chap23.html#tessellation-isoline-tessellation">23.8. Isoline Tessellation</a></li>
<li><a href="chap23.html#tessellation-point-mode">23.9. Tessellation Point Mode</a></li>
<li><a href="chap23.html#_tessellation_pipeline_state">23.10. Tessellation Pipeline State</a></li>
</ul>
</li>
<li><a href="chap24.html">24. Geometry Shading</a>
<ul class="sectlevel2">
<li><a href="chap24.html#geometry-input">24.1. Geometry Shader Input Primitives</a></li>
<li><a href="chap24.html#geometry-output">24.2. Geometry Shader Output Primitives</a></li>
<li><a href="chap24.html#geometry-invocations">24.3. Multiple Invocations of Geometry Shaders</a></li>
<li><a href="chap24.html#geometry-ordering">24.4. Geometry Shader Primitive Ordering</a></li>
<li><a href="chap24.html#geometry-passthrough">24.5. Geometry Shader Passthrough</a></li>
</ul>
</li>
<li><a href="chap25.html">25. Mesh Shading</a>
<ul class="sectlevel2">
<li><a href="chap25.html#mesh-task-input">25.1. Task Shader Input</a></li>
<li><a href="chap25.html#mesh-task-output">25.2. Task Shader Output</a></li>
<li><a href="chap25.html#mesh-generation">25.3. Mesh Generation</a></li>
<li><a href="chap25.html#mesh-input">25.4. Mesh Shader Input</a></li>
<li><a href="chap25.html#mesh-output">25.5. Mesh Shader Output Primitives</a></li>
<li><a href="chap25.html#mesh-output-perview">25.6. Mesh Shader Per-View Outputs</a></li>
<li><a href="chap25.html#mesh-ordering">25.7. Mesh Shader Primitive Ordering</a></li>
</ul>
</li>
<li><a href="chap26.html">26. Fixed-Function Vertex Post-Processing</a>
<ul class="sectlevel2">
<li><a href="chap26.html#vertexpostproc-transform-feedback">26.1. Transform Feedback</a></li>
<li><a href="chap26.html#vertexpostproc-viewport-swizzle">26.2. Viewport Swizzle</a></li>
<li><a href="chap26.html#vertexpostproc-flatshading">26.3. Flat Shading</a></li>
<li><a href="chap26.html#vertexpostproc-clipping">26.4. Primitive Clipping</a></li>
<li><a href="chap26.html#vertexpostproc-clipping-shader-outputs">26.5. Clipping Shader Outputs</a></li>
<li><a href="chap26.html#vertexpostproc-viewportwscaling">26.6. Controlling Viewport W Scaling</a></li>
<li><a href="chap26.html#vertexpostproc-coord-transform">26.7. Coordinate Transformations</a></li>
<li><a href="chap26.html#vertexpostproc-renderpass-transform">26.8. Render Pass Transform</a></li>
<li><a href="chap26.html#vertexpostproc-viewport">26.9. Controlling the Viewport</a></li>
</ul>
</li>
<li><a href="chap27.html">27. Rasterization</a>
<ul class="sectlevel2">
<li><a href="chap27.html#primsrast-discard">27.1. Discarding Primitives Before Rasterization</a></li>
<li><a href="chap27.html#primsrast-stream">27.2. Controlling the Vertex Stream Used for Rasterization</a></li>
<li><a href="chap27.html#primrast-order">27.3. Rasterization Order</a></li>
<li><a href="chap27.html#primsrast-multisampling">27.4. Multisampling</a></li>
<li><a href="chap27.html#primrast-samplelocations">27.5. Custom Sample Locations</a></li>
<li><a href="chap27.html#primsrast-fragment-shading-rate">27.6. Fragment Shading Rates</a></li>
<li><a href="chap27.html#primsrast-shading-rate-image">27.7. Shading Rate Image</a></li>
<li><a href="chap27.html#primsrast-sampleshading">27.8. Sample Shading</a></li>
<li><a href="chap27.html#primsrast-barycentric">27.9. Barycentric Interpolation</a></li>
<li><a href="chap27.html#primsrast-points">27.10. Points</a></li>
<li><a href="chap27.html#primsrast-lines">27.11. Line Segments</a></li>
<li><a href="chap27.html#primsrast-polygons">27.12. Polygons</a></li>
</ul>
</li>
<li><a href="chap28.html">28. Fragment Operations</a>
<ul class="sectlevel2">
<li><a href="chap28.html#fragops-discard-rectangles">28.1. Discard Rectangles Test</a></li>
<li><a href="chap28.html#fragops-scissor">28.2. Scissor Test</a></li>
<li><a href="chap28.html#fragops-exclusive-scissor">28.3. Exclusive Scissor Test</a></li>
<li><a href="chap28.html#fragops-samplemask">28.4. Sample Mask Test</a></li>
<li><a href="chap28.html#fragops-covg">28.5. Multisample Coverage</a></li>
<li><a href="chap28.html#fragops-ds-state">28.6. Depth and Stencil Operations</a></li>
<li><a href="chap28.html#fragops-dbt">28.7. Depth Bounds Test</a></li>
<li><a href="chap28.html#fragops-stencil">28.8. Stencil Test</a></li>
<li><a href="chap28.html#fragops-depth">28.9. Depth Test</a></li>
<li><a href="chap28.html#fragops-rep-frag-test">28.10. Representative Fragment Test</a></li>
<li><a href="chap28.html#fragops-samplecount">28.11. Sample Counting</a></li>
<li><a href="chap28.html#fragops-coverage-to-color">28.12. Fragment Coverage To Color</a></li>
<li><a href="chap28.html#fragops-coverage-reduction">28.13. Coverage Reduction</a></li>
</ul>
</li>
<li><a href="chap29.html">29. The Framebuffer</a>
<ul class="sectlevel2">
<li><a href="chap29.html#framebuffer-blending">29.1. Blending</a></li>
<li><a href="chap29.html#framebuffer-logicop">29.2. Logical Operations</a></li>
<li><a href="chap29.html#framebuffer-color-write-mask">29.3. Color Write Mask</a></li>
<li><a href="chap29.html#framebuffer-color-write-enable">29.4. Color Write Enable</a></li>
</ul>
</li>
<li><a href="chap30.html">30. Dispatching Commands</a></li>
<li class="current"><a href="chap31.html">31. Device-Generated Commands</a>
<ul class="sectlevel2">
<li class="current"><a href="chap31.html#indirectmdslayout">31.1. Indirect Commands Layout</a></li>
<li class="current"><a href="chap31.html#_indirect_commands_generation_and_execution">31.2. Indirect Commands Generation And Execution</a></li>
</ul>
</li>
<li><a href="chap32.html">32. Sparse Resources</a>
<ul class="sectlevel2">
<li><a href="chap32.html#sparsememory-sparseresourcefeatures">32.1. Sparse Resource Features</a></li>
<li><a href="chap32.html#sparsememory-fully-resident">32.2. Sparse Buffers and Fully-Resident Images</a></li>
<li><a href="chap32.html#sparsememory-partially-resident-buffers">32.3. Sparse Partially-Resident Buffers</a></li>
<li><a href="chap32.html#sparsememory-partially-resident-images">32.4. Sparse Partially-Resident Images</a></li>
<li><a href="chap32.html#sparsememory-sparse-memory-aliasing">32.5. Sparse Memory Aliasing</a></li>
<li><a href="chap32.html#_sparse_resource_implementation_guidelines_informative">32.6. Sparse Resource Implementation Guidelines (Informative)</a></li>
<li><a href="chap32.html#sparsememory-resourceapi">32.7. Sparse Resource API</a></li>
</ul>
</li>
<li><a href="chap33.html">33. Window System Integration (WSI)</a>
<ul class="sectlevel2">
<li><a href="chap33.html#_wsi_platform">33.1. WSI Platform</a></li>
<li><a href="chap33.html#_wsi_surface">33.2. WSI Surface</a></li>
<li><a href="chap33.html#display">33.3. Presenting Directly to Display Devices</a></li>
<li><a href="chap33.html#_querying_for_wsi_support">33.4. Querying for WSI Support</a></li>
<li><a href="chap33.html#_surface_queries">33.5. Surface Queries</a></li>
<li><a href="chap33.html#_full_screen_exclusive_control">33.6. Full Screen Exclusive Control</a></li>
<li><a href="chap33.html#_device_group_queries">33.7. Device Group Queries</a></li>
<li><a href="chap33.html#_display_timing_queries">33.8. Display Timing Queries</a></li>
<li><a href="chap33.html#present-wait">33.9. Present Wait</a></li>
<li><a href="chap33.html#_wsi_swapchain">33.10. WSI Swapchain</a></li>
<li><a href="chap33.html#_hdr_metadata">33.11. Hdr Metadata</a></li>
</ul>
</li>
<li><a href="chap34.html">34. Deferred Host Operations</a>
<ul class="sectlevel2">
<li><a href="chap34.html#deferred-host-operations-requesting">34.1. Requesting Deferral</a></li>
<li><a href="chap34.html#_deferred_host_operations_api">34.2. Deferred Host Operations API</a></li>
</ul>
</li>
<li><a href="chap35.html">35. Private Data</a></li>
<li><a href="chap36.html">36. Acceleration Structures</a>
<ul class="sectlevel2">
<li><a href="chap36.html#acceleration-structure-def">36.1. Acceleration Structures</a></li>
<li><a href="chap36.html#host-acceleration-structure">36.2. Host Acceleration Structure Operations</a></li>
</ul>
</li>
<li><a href="chap37.html">37. Ray Traversal</a>
<ul class="sectlevel2">
<li><a href="chap37.html#ray-intersection-candidate-determination">37.1. Ray Intersection Candidate Determination</a></li>
<li><a href="chap37.html#ray-intersection-culling">37.2. Ray Intersection Culling</a></li>
<li><a href="chap37.html#ray-intersection-confirmation">37.3. Ray Intersection Confirmation</a></li>
<li><a href="chap37.html#ray-closest-hit-determination">37.4. Ray Closest Hit Determination</a></li>
<li><a href="chap37.html#ray-result-determination">37.5. Ray Result Determination</a></li>
</ul>
</li>
<li><a href="chap38.html">38. Ray Tracing</a>
<ul class="sectlevel2">
<li><a href="chap38.html#ray-tracing-shader-call">38.1. Shader Call Instructions</a></li>
<li><a href="chap38.html#ray-tracing-commands">38.2. Ray Tracing Commands</a></li>
<li><a href="chap38.html#shader-binding-table">38.3. Shader Binding Table</a></li>
<li><a href="chap38.html#ray-tracing-pipeline-stack">38.4. Ray Tracing Pipeline Stack</a></li>
</ul>
</li>
<li><a href="chap39.html">39. Video Decode and Encode Operations</a>
<ul class="sectlevel2">
<li><a href="chap39.html#_technical_terminology_and_semantics">39.1. Technical Terminology and Semantics</a></li>
<li><a href="chap39.html#_introduction">39.2. Introduction</a></li>
<li><a href="chap39.html#video-physical-device-capabilities">39.3. Video Physical Device Capabilities</a></li>
<li><a href="chap39.html#video-session-objects">39.4. Video Session Objects</a></li>
<li><a href="chap39.html#video-decode-operations">39.5. Video Decode Operations</a></li>
<li><a href="chap39.html#decode-h264">39.6. Video Decode of AVC (ITU-T H.264)</a></li>
<li><a href="chap39.html#decode-h265">39.7. Video Decode of HEVC (ITU-T H.265)</a></li>
<li><a href="chap39.html#video-encode-operations">39.8. Video Encode Operations</a></li>
<li><a href="chap39.html#encode-h264">39.9. Encode H.264</a></li>
</ul>
</li>
<li><a href="chap40.html">40. Extending Vulkan</a>
<ul class="sectlevel2">
<li><a href="chap40.html#extendingvulkan-instanceanddevicefunctionality">40.1. Instance and Device Functionality</a></li>
<li><a href="chap40.html#extendingvulkan-coreversions">40.2. Core Versions</a></li>
<li><a href="chap40.html#extendingvulkan-layers">40.3. Layers</a></li>
<li><a href="chap40.html#extendingvulkan-extensions">40.4. Extensions</a></li>
<li><a href="chap40.html#extendingvulkan-extensions-extensiondependencies">40.5. Extension Dependencies</a></li>
<li><a href="chap40.html#_compatibility_guarantees_informative">40.6. Compatibility Guarantees (Informative)</a></li>
</ul>
</li>
<li><a href="chap41.html">41. Features</a>
<ul class="sectlevel2">
<li><a href="chap41.html#features-requirements">41.1. Feature Requirements</a></li>
</ul>
</li>
<li><a href="chap42.html">42. Limits</a>
<ul class="sectlevel2">
<li><a href="chap42.html#limits-minmax">42.1. Limit Requirements</a></li>
<li><a href="chap42.html#limits-multisample">42.2. Additional Multisampling Capabilities</a></li>
</ul>
</li>
<li><a href="chap43.html">43. Formats</a>
<ul class="sectlevel2">
<li><a href="chap43.html#formats-definition">43.1. Format Definition</a></li>
<li><a href="chap43.html#formats-properties">43.2. Format Properties</a></li>
<li><a href="chap43.html#features-required-format-support">43.3. Required Format Support</a></li>
</ul>
</li>
<li><a href="chap44.html">44. Additional Capabilities</a>
<ul class="sectlevel2">
<li><a href="chap44.html#capabilities-image">44.1. Additional Image Capabilities</a></li>
<li><a href="chap44.html#capabilities-buffer">44.2. Additional Buffer Capabilities</a></li>
<li><a href="chap44.html#capabilities-semaphore">44.3. Optional Semaphore Capabilities</a></li>
<li><a href="chap44.html#capabilities-fence">44.4. Optional Fence Capabilities</a></li>
<li><a href="chap44.html#features-timestamp-calibration">44.5. Timestamp Calibration Capabilities</a></li>
</ul>
</li>
<li><a href="chap45.html">45. Debugging</a>
<ul class="sectlevel2">
<li><a href="chap45.html#debugging-debug-utils">45.1. Debug Utilities</a></li>
<li><a href="chap45.html#debugging-debug-markers">45.2. Debug Markers</a></li>
<li><a href="chap45.html#debugging-debug-report-callbacks">45.3. Debug Report Callbacks</a></li>
<li><a href="chap45.html#_device_loss_debugging">45.4. Device Loss Debugging</a></li>
<li><a href="chap45.html#debugging-tooling-info">45.5. Active Tooling Information</a></li>
</ul>
</li>
<li><a href="chap46.html">Appendix A: Vulkan Environment for SPIR-V</a>
<ul class="sectlevel2">
<li><a href="chap46.html#_versions_and_formats">Versions and Formats</a></li>
<li><a href="chap46.html#spirvenv-capabilities">Capabilities</a></li>
<li><a href="chap46.html#spirvenv-module-validation">Validation Rules within a Module</a></li>
<li><a href="chap46.html#spirvenv-precision-operation">Precision and Operation of SPIR-V Instructions</a></li>
<li><a href="chap46.html#spirvenv-image-signedness">Signedness of SPIR-V Image Accesses</a></li>
<li><a href="chap46.html#spirvenv-format-type-matching">Image Format and Type Matching</a></li>
<li><a href="chap46.html#spirvenv-image-formats">Compatibility Between SPIR-V Image Formats And Vulkan Formats</a></li>
</ul>
</li>
<li><a href="chap47.html">Appendix B: Memory Model</a>
<ul class="sectlevel2">
<li><a href="chap47.html#memory-model-agent">Agent</a></li>
<li><a href="chap47.html#memory-model-memory-location">Memory Location</a></li>
<li><a href="chap47.html#memory-model-allocation">Allocation</a></li>
<li><a href="chap47.html#memory-model-memory-operation">Memory Operation</a></li>
<li><a href="chap47.html#memory-model-references">Reference</a></li>
<li><a href="chap47.html#memory-model-program-order">Program-Order</a></li>
<li><a href="chap47.html#shader-call-related">Shader Call Related</a></li>
<li><a href="chap47.html#shader-call-order">Shader Call Order</a></li>
<li><a href="chap47.html#memory-model-scope">Scope</a></li>
<li><a href="chap47.html#memory-model-atomic-operation">Atomic Operation</a></li>
<li><a href="chap47.html#memory-model-scoped-modification-order">Scoped Modification Order</a></li>
<li><a href="chap47.html#memory-model-memory-semantics">Memory Semantics</a></li>
<li><a href="chap47.html#memory-model-release-sequence">Release Sequence</a></li>
<li><a href="chap47.html#memory-model-synchronizes-with">Synchronizes-With</a></li>
<li><a href="chap47.html#memory-model-system-synchronizes-with">System-Synchronizes-With</a></li>
<li><a href="chap47.html#memory-model-non-private">Private vs. Non-Private</a></li>
<li><a href="chap47.html#memory-model-inter-thread-happens-before">Inter-Thread-Happens-Before</a></li>
<li><a href="chap47.html#memory-model-happens-before">Happens-Before</a></li>
<li><a href="chap47.html#memory-model-availability-visibility">Availability and Visibility</a></li>
<li><a href="chap47.html#memory-model-vulkan-availability-visibility">Availability, Visibility, and Domain Operations</a></li>
<li><a href="chap47.html#memory-model-availability-visibility-semantics">Availability and Visibility Semantics</a></li>
<li><a href="chap47.html#memory-model-instruction-av-vis">Per-Instruction Availability and Visibility Semantics</a></li>
<li><a href="chap47.html#memory-model-location-ordered">Location-Ordered</a></li>
<li><a href="chap47.html#memory-model-access-data-race">Data Race</a></li>
<li><a href="chap47.html#memory-model-visible-to">Visible-To</a></li>
<li><a href="chap47.html#memory-model-acyclicity">Acyclicity</a></li>
<li><a href="chap47.html#memory-model-shader-io">Shader I/O</a></li>
<li><a href="chap47.html#memory-model-deallocation">Deallocation</a></li>
<li><a href="chap47.html#memory-model-informative-descriptions">Descriptions (Informative)</a></li>
<li><a href="chap47.html#memory-model-tessellation-output-ordering">Tessellation Output Ordering</a></li>
<li><a href="chap47.html#memory-model-cooperative-matrix">Cooperative Matrix Memory Access</a></li>
</ul>
</li>
<li><a href="chap48.html">Appendix C: Compressed Image Formats</a>
<ul class="sectlevel2">
<li><a href="chap48.html#appendix-compressedtex-bc">Block-Compressed Image Formats</a></li>
<li><a href="chap48.html#appendix-compressedtex-etc2">ETC Compressed Image Formats</a></li>
<li><a href="chap48.html#appendix-compressedtex-astc">ASTC Compressed Image Formats</a></li>
<li><a href="chap48.html#appendix-compressedtex-pvrtc">PVRTC Compressed Image Formats</a></li>
</ul>
</li>
<li><a href="chap49.html">Appendix D: Core Revisions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap49.html#versions-1.2">Version 1.2</a></li>
<li><a href="chap49.html#versions-1.1">Version 1.1</a></li>
</ul>
</li>
<li><a href="chap50.html">Appendix E: Layers &amp; Extensions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap50.html#extension-appendices-list">List of Current Extensions</a></li>
<li><a href="chap50.html#provisional-extension-appendices-list">List of Provisional Extensions</a></li>
<li><a href="chap50.html#deprecated-extension-appendices-list">List of Deprecated Extensions</a></li>
</ul>
</li>
<li><a href="chap51.html">Appendix F: API Boilerplate</a>
<ul class="sectlevel2">
<li><a href="chap51.html#boilerplate-headers">Vulkan Header Files</a></li>
<li><a href="chap51.html#boilerplate-wsi-header">Window System-Specific Header Control (Informative)</a></li>
<li><a href="chap51.html#boilerplate-provisional-header">Provisional Extension Header Control (Informative)</a></li>
</ul>
</li>
<li><a href="chap52.html">Appendix G: Invariance</a>
<ul class="sectlevel2">
<li><a href="chap52.html#_repeatability">Repeatability</a></li>
<li><a href="chap52.html#_multi_pass_algorithms">Multi-pass Algorithms</a></li>
<li><a href="chap52.html#_invariance_rules">Invariance Rules</a></li>
<li><a href="chap52.html#_tessellation_invariance">Tessellation Invariance</a></li>
</ul>
</li>
<li><a href="chap53.html">Appendix H: Lexicon</a>
<ul class="sectlevel2">
<li><a href="chap53.html#glossary">Glossary</a></li>
<li><a href="chap53.html#lexicon-common-abbreviations">Common Abbreviations</a></li>
<li><a href="chap53.html#lexicon-prefixes">Prefixes</a></li>
</ul>
</li>
<li><a href="chap54.html">Appendix I: Credits (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap54.html#_working_group_contributors_to_vulkan">Working Group Contributors to Vulkan</a></li>
<li><a href="chap54.html#_other_credits">Other Credits</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="loading_msg" class="hidden" hidden=""><p>Loading… please wait.</p></div>
<!--ChunkedSearchboxMarker-->
<div class="searchbox"><label for="searchbox">Search: </label><input id="searchbox" type="text" disabled="disabled" value="Loading Search Data"><div id="resultsdiv"><ol id="results"></ol></div></div>
<div id="content" class="loadable" style="max-width: 100%;"><div class="sect1">
<h2 id="device-generated-commands"><a class="anchor" href="chap31.html"></a>31. Device-Generated Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter discusses the generation of command buffer content on the
device, for which these principle steps are to be taken:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Define via <code>VkIndirectCommandsLayoutNV</code> the sequence of commands
which should be generated.</p>
</li>
<li>
<p>Optionally make use of <a href="chap10.html#graphics-shadergroups">device-bindable Shader
Groups</a>.</p>
</li>
<li>
<p>Retrieve device addresses by <a href="chap14.html#vkGetBufferDeviceAddressEXT">vkGetBufferDeviceAddressEXT</a> for
setting buffers on the device.</p>
</li>
<li>
<p>Fill one or more <code>VkBuffer</code> with the appropriate content that gets
interpreted by <code>VkIndirectCommandsLayoutNV</code>.</p>
</li>
<li>
<p>Create a <code>preprocess</code> <code>VkBuffer</code> using the allocation information
from <a href="chap31.html#vkGetGeneratedCommandsMemoryRequirementsNV">vkGetGeneratedCommandsMemoryRequirementsNV</a>.</p>
</li>
<li>
<p>Optionally preprocess the input data using
<a href="chap31.html#vkCmdPreprocessGeneratedCommandsNV">vkCmdPreprocessGeneratedCommandsNV</a> in a separate action.</p>
</li>
<li>
<p>Generate and execute the actual commands via
<a href="chap31.html#vkCmdExecuteGeneratedCommandsNV">vkCmdExecuteGeneratedCommandsNV</a> passing all required data.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="chap31.html#vkCmdPreprocessGeneratedCommandsNV">vkCmdPreprocessGeneratedCommandsNV</a> executes in a separate logical
pipeline from either graphics or compute.
When preprocessing commands in a separate step they <strong class="purple">must</strong> be explicitly
synchronized against the command execution.
When not preprocessing, the preprocessing is automatically synchronized
against the command execution.</p>
</div>
<div class="sect2">
<h3 id="indirectmdslayout"><a class="anchor" href="chap31.html#indirectmdslayout"></a>31.1. Indirect Commands Layout</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The device-side command generation happens through an iterative processing
of an atomic sequence comprised of command tokens, which are represented by:</p>
</div>
<div id="VkIndirectCommandsLayoutNV" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_NV_device_generated_commands</span>
VK_DEFINE_NON_DISPATCHABLE_HANDLE(VkIndirectCommandsLayoutNV)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_creation_and_deletion"><a class="anchor" href="chap31.html#_creation_and_deletion"></a>31.1.1. Creation and Deletion</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Indirect command layouts are created by:</p>
</div>
<div id="vkCreateIndirectCommandsLayoutNV" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_NV_device_generated_commands</span>
VkResult vkCreateIndirectCommandsLayoutNV(
    VkDevice                                    device,
    <span class="directive">const</span> VkIndirectCommandsLayoutCreateInfoNV* pCreateInfo,
    <span class="directive">const</span> VkAllocationCallbacks*                pAllocator,
    VkIndirectCommandsLayoutNV*                 pIndirectCommandsLayout);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the indirect command
layout.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to an instance of the
<code>VkIndirectCommandsLayoutCreateInfoNV</code> structure containing
parameters affecting creation of the indirect command layout.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pIndirectCommandsLayout</code> is a pointer to a
<code>VkIndirectCommandsLayoutNV</code> handle in which the resulting indirect
command layout is returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateIndirectCommandsLayoutNV-deviceGeneratedCommands-02929" href="chap31.html#VUID-vkCreateIndirectCommandsLayoutNV-deviceGeneratedCommands-02929"></a> <span class="vuid">VUID-vkCreateIndirectCommandsLayoutNV-deviceGeneratedCommands-02929</span><br>

The <a href="chap41.html#features-deviceGeneratedCommands"><code>VkPhysicalDeviceDeviceGeneratedCommandsFeaturesNV</code>::<code>deviceGeneratedCommands</code></a>
feature <strong class="purple">must</strong> be enabled</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateIndirectCommandsLayoutNV-device-parameter" href="chap31.html#VUID-vkCreateIndirectCommandsLayoutNV-device-parameter"></a> <span class="vuid">VUID-vkCreateIndirectCommandsLayoutNV-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateIndirectCommandsLayoutNV-pCreateInfo-parameter" href="chap31.html#VUID-vkCreateIndirectCommandsLayoutNV-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateIndirectCommandsLayoutNV-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap31.html#VkIndirectCommandsLayoutCreateInfoNV">VkIndirectCommandsLayoutCreateInfoNV</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateIndirectCommandsLayoutNV-pAllocator-parameter" href="chap31.html#VUID-vkCreateIndirectCommandsLayoutNV-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateIndirectCommandsLayoutNV-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateIndirectCommandsLayoutNV-pIndirectCommandsLayout-parameter" href="chap31.html#VUID-vkCreateIndirectCommandsLayoutNV-pIndirectCommandsLayout-parameter"></a> <span class="vuid">VUID-vkCreateIndirectCommandsLayoutNV-pIndirectCommandsLayout-parameter</span><br>
 <code>pIndirectCommandsLayout</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap31.html#VkIndirectCommandsLayoutNV">VkIndirectCommandsLayoutNV</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkIndirectCommandsLayoutCreateInfoNV</code> structure is defined as:</p>
</div>
<div id="VkIndirectCommandsLayoutCreateInfoNV" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_NV_device_generated_commands</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkIndirectCommandsLayoutCreateInfoNV {
    VkStructureType                           sType;
    <span class="directive">const</span> <span class="directive">void</span>*                               pNext;
    VkIndirectCommandsLayoutUsageFlagsNV      flags;
    VkPipelineBindPoint                       pipelineBindPoint;
    uint32_t                                  tokenCount;
    <span class="directive">const</span> VkIndirectCommandsLayoutTokenNV*    pTokens;
    uint32_t                                  streamCount;
    <span class="directive">const</span> uint32_t*                           pStreamStrides;
} VkIndirectCommandsLayoutCreateInfoNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pipelineBindPoint</code> is the <a href="chap10.html#VkPipelineBindPoint">VkPipelineBindPoint</a> that this
layout targets.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of
<a href="chap31.html#VkIndirectCommandsLayoutUsageFlagBitsNV">VkIndirectCommandsLayoutUsageFlagBitsNV</a> specifying usage hints of
this layout.</p>
</li>
<li>
<p><code>tokenCount</code> is the length of the individual command sequence.</p>
</li>
<li>
<p><code>pTokens</code> is an array describing each command token in detail.
See <a href="chap31.html#VkIndirectCommandsTokenTypeNV">VkIndirectCommandsTokenTypeNV</a> and
<a href="chap31.html#VkIndirectCommandsLayoutTokenNV">VkIndirectCommandsLayoutTokenNV</a> below for details.</p>
</li>
<li>
<p><code>streamCount</code> is the number of streams used to provide the token
inputs.</p>
</li>
<li>
<p><code>pStreamStrides</code> is an array defining the byte stride for each input
stream.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following code illustrates some of the flags:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c"><span class="directive">void</span> cmdProcessAllSequences(cmd, pipeline, indirectCommandsLayout, pIndirectCommandsTokens, sequencesCount, indexbuffer, indexbufferOffset)
{
  <span class="keyword">for</span> (s = <span class="integer">0</span>; s &lt; sequencesCount; s++)
  {
    sUsed = s;

    <span class="keyword">if</span> (indirectCommandsLayout.flags &amp; VK_INDIRECT_COMMANDS_LAYOUT_USAGE_INDEXED_SEQUENCES_BIT_NV) {
      sUsed = indexbuffer.load_uint32( sUsed * <span class="keyword">sizeof</span>(uint32_t) + indexbufferOffset);
    }

    <span class="keyword">if</span> (indirectCommandsLayout.flags &amp; VK_INDIRECT_COMMANDS_LAYOUT_USAGE_UNORDERED_SEQUENCES_BIT_NV) {
      sUsed = incoherent_implementation_dependent_permutation[ sUsed ];
    }

    cmdProcessSequence( cmd, pipeline, indirectCommandsLayout, pIndirectCommandsTokens, sUsed );
  }
}</code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutCreateInfoNV-pipelineBindPoint-02930" href="chap31.html#VUID-VkIndirectCommandsLayoutCreateInfoNV-pipelineBindPoint-02930"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutCreateInfoNV-pipelineBindPoint-02930</span><br>

The <code>pipelineBindPoint</code> <strong class="purple">must</strong> be
<code>VK_PIPELINE_BIND_POINT_GRAPHICS</code></p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutCreateInfoNV-tokenCount-02931" href="chap31.html#VUID-VkIndirectCommandsLayoutCreateInfoNV-tokenCount-02931"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutCreateInfoNV-tokenCount-02931</span><br>

<code>tokenCount</code> <strong class="purple">must</strong> be greater than <code>0</code> and less than or equal to
<code>VkPhysicalDeviceDeviceGeneratedCommandsPropertiesNV</code>::<code>maxIndirectCommandsTokenCount</code></p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutCreateInfoNV-pTokens-02932" href="chap31.html#VUID-VkIndirectCommandsLayoutCreateInfoNV-pTokens-02932"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutCreateInfoNV-pTokens-02932</span><br>

If <code>pTokens</code> contains an entry of
<code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_SHADER_GROUP_NV</code> it <strong class="purple">must</strong> be the
first element of the array and there <strong class="purple">must</strong> be only a single element of
such token type</p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutCreateInfoNV-pTokens-02933" href="chap31.html#VUID-VkIndirectCommandsLayoutCreateInfoNV-pTokens-02933"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutCreateInfoNV-pTokens-02933</span><br>

If <code>pTokens</code> contains an entry of
<code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_STATE_FLAGS_NV</code> there <strong class="purple">must</strong> be only
a single element of such token type</p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutCreateInfoNV-pTokens-02934" href="chap31.html#VUID-VkIndirectCommandsLayoutCreateInfoNV-pTokens-02934"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutCreateInfoNV-pTokens-02934</span><br>

All state tokens in <code>pTokens</code> <strong class="purple">must</strong> occur prior work provoking
tokens (<code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_DRAW_NV</code>,
<code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_DRAW_INDEXED_NV</code>,
<code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_DRAW_TASKS_NV</code>)</p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutCreateInfoNV-pTokens-02935" href="chap31.html#VUID-VkIndirectCommandsLayoutCreateInfoNV-pTokens-02935"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutCreateInfoNV-pTokens-02935</span><br>

The content of <code>pTokens</code> <strong class="purple">must</strong> include one single work provoking
token that is compatible with the <code>pipelineBindPoint</code></p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutCreateInfoNV-streamCount-02936" href="chap31.html#VUID-VkIndirectCommandsLayoutCreateInfoNV-streamCount-02936"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutCreateInfoNV-streamCount-02936</span><br>

<code>streamCount</code> <strong class="purple">must</strong> be greater than <code>0</code> and less or equal to
<code>VkPhysicalDeviceDeviceGeneratedCommandsPropertiesNV</code>::<code>maxIndirectCommandsStreamCount</code></p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutCreateInfoNV-pStreamStrides-02937" href="chap31.html#VUID-VkIndirectCommandsLayoutCreateInfoNV-pStreamStrides-02937"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutCreateInfoNV-pStreamStrides-02937</span><br>

each element of <code>pStreamStrides</code> <strong class="purple">must</strong> be greater than `0`and less
than or equal to
<code>VkPhysicalDeviceDeviceGeneratedCommandsPropertiesNV</code>::<code>maxIndirectCommandsStreamStride</code>.
Furthermore the alignment of each token input <strong class="purple">must</strong> be ensured</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutCreateInfoNV-sType-sType" href="chap31.html#VUID-VkIndirectCommandsLayoutCreateInfoNV-sType-sType"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutCreateInfoNV-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_INDIRECT_COMMANDS_LAYOUT_CREATE_INFO_NV</code></p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutCreateInfoNV-pNext-pNext" href="chap31.html#VUID-VkIndirectCommandsLayoutCreateInfoNV-pNext-pNext"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutCreateInfoNV-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutCreateInfoNV-flags-parameter" href="chap31.html#VUID-VkIndirectCommandsLayoutCreateInfoNV-flags-parameter"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutCreateInfoNV-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap31.html#VkIndirectCommandsLayoutUsageFlagBitsNV">VkIndirectCommandsLayoutUsageFlagBitsNV</a> values</p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutCreateInfoNV-pipelineBindPoint-parameter" href="chap31.html#VUID-VkIndirectCommandsLayoutCreateInfoNV-pipelineBindPoint-parameter"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutCreateInfoNV-pipelineBindPoint-parameter</span><br>
 <code>pipelineBindPoint</code> <strong class="purple">must</strong> be a valid <a href="chap10.html#VkPipelineBindPoint">VkPipelineBindPoint</a> value</p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutCreateInfoNV-pTokens-parameter" href="chap31.html#VUID-VkIndirectCommandsLayoutCreateInfoNV-pTokens-parameter"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutCreateInfoNV-pTokens-parameter</span><br>
 <code>pTokens</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>tokenCount</code> valid <a href="chap31.html#VkIndirectCommandsLayoutTokenNV">VkIndirectCommandsLayoutTokenNV</a> structures</p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutCreateInfoNV-pStreamStrides-parameter" href="chap31.html#VUID-VkIndirectCommandsLayoutCreateInfoNV-pStreamStrides-parameter"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutCreateInfoNV-pStreamStrides-parameter</span><br>
 <code>pStreamStrides</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>streamCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutCreateInfoNV-tokenCount-arraylength" href="chap31.html#VUID-VkIndirectCommandsLayoutCreateInfoNV-tokenCount-arraylength"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutCreateInfoNV-tokenCount-arraylength</span><br>
 <code>tokenCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutCreateInfoNV-streamCount-arraylength" href="chap31.html#VUID-VkIndirectCommandsLayoutCreateInfoNV-streamCount-arraylength"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutCreateInfoNV-streamCount-arraylength</span><br>
 <code>streamCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in
<a href="chap31.html#VkIndirectCommandsLayoutCreateInfoNV">VkIndirectCommandsLayoutCreateInfoNV</a>::<code>flags</code>, specifying usage
hints of an indirect command layout, are:</p>
</div>
<div id="VkIndirectCommandsLayoutUsageFlagBitsNV" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_NV_device_generated_commands</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkIndirectCommandsLayoutUsageFlagBitsNV {
    VK_INDIRECT_COMMANDS_LAYOUT_USAGE_EXPLICIT_PREPROCESS_BIT_NV = <span class="hex">0x00000001</span>,
    VK_INDIRECT_COMMANDS_LAYOUT_USAGE_INDEXED_SEQUENCES_BIT_NV = <span class="hex">0x00000002</span>,
    VK_INDIRECT_COMMANDS_LAYOUT_USAGE_UNORDERED_SEQUENCES_BIT_NV = <span class="hex">0x00000004</span>,
} VkIndirectCommandsLayoutUsageFlagBitsNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_INDIRECT_COMMANDS_LAYOUT_USAGE_EXPLICIT_PREPROCESS_BIT_NV</code>
specifies that the layout is always used with the manual preprocessing
step through calling <a href="chap31.html#vkCmdPreprocessGeneratedCommandsNV">vkCmdPreprocessGeneratedCommandsNV</a> and
executed by <a href="chap31.html#vkCmdExecuteGeneratedCommandsNV">vkCmdExecuteGeneratedCommandsNV</a> with <code>isPreprocessed</code>
set to <code>VK_TRUE</code>.</p>
</li>
<li>
<p><code>VK_INDIRECT_COMMANDS_LAYOUT_USAGE_INDEXED_SEQUENCES_BIT_NV</code>
specifies that the input data for the sequences is not implicitly
indexed from 0..sequencesUsed but a user provided <code>VkBuffer</code>
encoding the index is provided.</p>
</li>
<li>
<p><code>VK_INDIRECT_COMMANDS_LAYOUT_USAGE_UNORDERED_SEQUENCES_BIT_NV</code>
specifies that the processing of sequences <strong class="purple">can</strong> happen at an
implementation-dependent order, which is not: guaranteed to be coherent
using the same input data.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkIndirectCommandsLayoutUsageFlagsNV" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_NV_device_generated_commands</span>
<span class="keyword">typedef</span> VkFlags VkIndirectCommandsLayoutUsageFlagsNV;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkIndirectCommandsLayoutUsageFlagsNV</code> is a bitmask type for setting a
mask of zero or more <a href="chap31.html#VkIndirectCommandsLayoutUsageFlagBitsNV">VkIndirectCommandsLayoutUsageFlagBitsNV</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Indirect command layouts are destroyed by:</p>
</div>
<div id="vkDestroyIndirectCommandsLayoutNV" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_NV_device_generated_commands</span>
<span class="directive">void</span> vkDestroyIndirectCommandsLayoutNV(
    VkDevice                                    device,
    VkIndirectCommandsLayoutNV                  indirectCommandsLayout,
    <span class="directive">const</span> VkAllocationCallbacks*                pAllocator);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the layout.</p>
</li>
<li>
<p><code>indirectCommandsLayout</code> is the layout to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyIndirectCommandsLayoutNV-indirectCommandsLayout-02938" href="chap31.html#VUID-vkDestroyIndirectCommandsLayoutNV-indirectCommandsLayout-02938"></a> <span class="vuid">VUID-vkDestroyIndirectCommandsLayoutNV-indirectCommandsLayout-02938</span><br>

All submitted commands that refer to <code>indirectCommandsLayout</code> <strong class="purple">must</strong>
have completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyIndirectCommandsLayoutNV-indirectCommandsLayout-02939" href="chap31.html#VUID-vkDestroyIndirectCommandsLayoutNV-indirectCommandsLayout-02939"></a> <span class="vuid">VUID-vkDestroyIndirectCommandsLayoutNV-indirectCommandsLayout-02939</span><br>

If <code>VkAllocationCallbacks</code> were provided when
<code>indirectCommandsLayout</code> was created, a compatible set of callbacks
<strong class="purple">must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyIndirectCommandsLayoutNV-indirectCommandsLayout-02940" href="chap31.html#VUID-vkDestroyIndirectCommandsLayoutNV-indirectCommandsLayout-02940"></a> <span class="vuid">VUID-vkDestroyIndirectCommandsLayoutNV-indirectCommandsLayout-02940</span><br>

If no <code>VkAllocationCallbacks</code> were provided when
<code>indirectCommandsLayout</code> was created, <code>pAllocator</code> <strong class="purple">must</strong> be
<code>NULL</code></p>
</li>
<li>
<p><a id="VUID-vkDestroyIndirectCommandsLayoutNV-deviceGeneratedCommands-02941" href="chap31.html#VUID-vkDestroyIndirectCommandsLayoutNV-deviceGeneratedCommands-02941"></a> <span class="vuid">VUID-vkDestroyIndirectCommandsLayoutNV-deviceGeneratedCommands-02941</span><br>

The <a href="chap41.html#features-deviceGeneratedCommands"><code>VkPhysicalDeviceDeviceGeneratedCommandsFeaturesNV</code>::<code>deviceGeneratedCommands</code></a>
feature <strong class="purple">must</strong> be enabled</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyIndirectCommandsLayoutNV-device-parameter" href="chap31.html#VUID-vkDestroyIndirectCommandsLayoutNV-device-parameter"></a> <span class="vuid">VUID-vkDestroyIndirectCommandsLayoutNV-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyIndirectCommandsLayoutNV-indirectCommandsLayout-parameter" href="chap31.html#VUID-vkDestroyIndirectCommandsLayoutNV-indirectCommandsLayout-parameter"></a> <span class="vuid">VUID-vkDestroyIndirectCommandsLayoutNV-indirectCommandsLayout-parameter</span><br>
 If <code>indirectCommandsLayout</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>indirectCommandsLayout</code> <strong class="purple">must</strong> be a valid <a href="chap31.html#VkIndirectCommandsLayoutNV">VkIndirectCommandsLayoutNV</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyIndirectCommandsLayoutNV-pAllocator-parameter" href="chap31.html#VUID-vkDestroyIndirectCommandsLayoutNV-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyIndirectCommandsLayoutNV-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyIndirectCommandsLayoutNV-indirectCommandsLayout-parent" href="chap31.html#VUID-vkDestroyIndirectCommandsLayoutNV-indirectCommandsLayout-parent"></a> <span class="vuid">VUID-vkDestroyIndirectCommandsLayoutNV-indirectCommandsLayout-parent</span><br>
 If <code>indirectCommandsLayout</code> is a valid handle, it <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>indirectCommandsLayout</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_token_input_streams"><a class="anchor" href="chap31.html#_token_input_streams"></a>31.1.2. Token Input Streams</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkIndirectCommandsStreamNV</code> structure specifies the input data for
one or more tokens at processing time.</p>
</div>
<div id="VkIndirectCommandsStreamNV" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_NV_device_generated_commands</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkIndirectCommandsStreamNV {
    VkBuffer        buffer;
    VkDeviceSize    offset;
} VkIndirectCommandsStreamNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>buffer</code> specifies the <a href="chap12.html#VkBuffer">VkBuffer</a> storing the functional
arguments for each sequence.
These arguments <strong class="purple">can</strong> be written by the device.</p>
</li>
<li>
<p><code>offset</code> specified an offset into <code>buffer</code> where the arguments
start.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkIndirectCommandsStreamNV-buffer-02942" href="chap31.html#VUID-VkIndirectCommandsStreamNV-buffer-02942"></a> <span class="vuid">VUID-VkIndirectCommandsStreamNV-buffer-02942</span><br>

The <code>buffer</code>’s usage flag <strong class="purple">must</strong> have the
<code>VK_BUFFER_USAGE_INDIRECT_BUFFER_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsStreamNV-offset-02943" href="chap31.html#VUID-VkIndirectCommandsStreamNV-offset-02943"></a> <span class="vuid">VUID-VkIndirectCommandsStreamNV-offset-02943</span><br>

The <code>offset</code> <strong class="purple">must</strong> be aligned to
<code>VkPhysicalDeviceDeviceGeneratedCommandsPropertiesNV</code>::<code>minIndirectCommandsBufferOffsetAlignment</code></p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsStreamNV-buffer-02975" href="chap31.html#VUID-VkIndirectCommandsStreamNV-buffer-02975"></a> <span class="vuid">VUID-VkIndirectCommandsStreamNV-buffer-02975</span><br>

If <code>buffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkIndirectCommandsStreamNV-buffer-parameter" href="chap31.html#VUID-VkIndirectCommandsStreamNV-buffer-parameter"></a> <span class="vuid">VUID-VkIndirectCommandsStreamNV-buffer-parameter</span><br>
 <code>buffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The input streams <strong class="purple">can</strong> contain raw <code>uint32_t</code> values, existing indirect
commands such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="chap21.html#VkDrawIndirectCommand">VkDrawIndirectCommand</a></p>
</li>
<li>
<p><a href="chap21.html#VkDrawIndexedIndirectCommand">VkDrawIndexedIndirectCommand</a></p>
</li>
<li>
<p><a href="chap21.html#VkDrawMeshTasksIndirectCommandNV">VkDrawMeshTasksIndirectCommandNV</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>or additional commands as listed below.
How the data is used is described in the next section.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBindShaderGroupIndirectCommandNV</code> structure specifies the input
data for the <code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_SHADER_GROUP_NV</code> token.</p>
</div>
<div id="VkBindShaderGroupIndirectCommandNV" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_NV_device_generated_commands</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkBindShaderGroupIndirectCommandNV {
    uint32_t    groupIndex;
} VkBindShaderGroupIndirectCommandNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>index</code> specifies which shader group of the current bound graphics
pipeline is used.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindShaderGroupIndirectCommandNV-None-02944" href="chap31.html#VUID-VkBindShaderGroupIndirectCommandNV-None-02944"></a> <span class="vuid">VUID-VkBindShaderGroupIndirectCommandNV-None-02944</span><br>

The current bound graphics pipeline, as well as the pipelines it may
reference, <strong class="purple">must</strong> have been created with
<code>VK_PIPELINE_CREATE_INDIRECT_BINDABLE_BIT_NV</code></p>
</li>
<li>
<p><a id="VUID-VkBindShaderGroupIndirectCommandNV-index-02945" href="chap31.html#VUID-VkBindShaderGroupIndirectCommandNV-index-02945"></a> <span class="vuid">VUID-VkBindShaderGroupIndirectCommandNV-index-02945</span><br>

The <code>index</code> <strong class="purple">must</strong> be within range of the accessible shader groups of
the current bound graphics pipeline.
See <a href="chap10.html#vkCmdBindPipelineShaderGroupNV">vkCmdBindPipelineShaderGroupNV</a> for further details</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBindIndexBufferIndirectCommandNV</code> structure specifies the input
data for the <code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_INDEX_BUFFER_NV</code> token.</p>
</div>
<div id="VkBindIndexBufferIndirectCommandNV" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_NV_device_generated_commands</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkBindIndexBufferIndirectCommandNV {
    VkDeviceAddress    bufferAddress;
    uint32_t           size;
    VkIndexType        indexType;
} VkBindIndexBufferIndirectCommandNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>bufferAddress</code> specifies a physical address of the <a href="chap12.html#VkBuffer">VkBuffer</a>
used as index buffer.</p>
</li>
<li>
<p><code>size</code> is the byte size range which is available for this operation
from the provided address.</p>
</li>
<li>
<p><code>indexType</code> is a <a href="chap21.html#VkIndexType">VkIndexType</a> value specifying how indices are
treated.
Instead of the Vulkan enum values, a custom <code>uint32_t</code> value <strong class="purple">can</strong> be
mapped to an <a href="chap21.html#VkIndexType">VkIndexType</a> by specifying the
<code>VkIndirectCommandsLayoutTokenNV</code>::<code>pIndexTypes</code> and
<code>VkIndirectCommandsLayoutTokenNV</code>::<code>pIndexTypeValues</code> arrays.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindIndexBufferIndirectCommandNV-None-02946" href="chap31.html#VUID-VkBindIndexBufferIndirectCommandNV-None-02946"></a> <span class="vuid">VUID-VkBindIndexBufferIndirectCommandNV-None-02946</span><br>

The buffer’s usage flag from which the address was acquired <strong class="purple">must</strong> have
the <code>VK_BUFFER_USAGE_INDEX_BUFFER_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkBindIndexBufferIndirectCommandNV-bufferAddress-02947" href="chap31.html#VUID-VkBindIndexBufferIndirectCommandNV-bufferAddress-02947"></a> <span class="vuid">VUID-VkBindIndexBufferIndirectCommandNV-bufferAddress-02947</span><br>

The <code>bufferAddress</code> <strong class="purple">must</strong> be aligned to the <code>indexType</code> used</p>
</li>
<li>
<p><a id="VUID-VkBindIndexBufferIndirectCommandNV-None-02948" href="chap31.html#VUID-VkBindIndexBufferIndirectCommandNV-None-02948"></a> <span class="vuid">VUID-VkBindIndexBufferIndirectCommandNV-None-02948</span><br>

Each element of the buffer from which the address was acquired and that
is non-sparse <strong class="purple">must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindIndexBufferIndirectCommandNV-indexType-parameter" href="chap31.html#VUID-VkBindIndexBufferIndirectCommandNV-indexType-parameter"></a> <span class="vuid">VUID-VkBindIndexBufferIndirectCommandNV-indexType-parameter</span><br>
 <code>indexType</code> <strong class="purple">must</strong> be a valid <a href="chap21.html#VkIndexType">VkIndexType</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBindVertexBufferIndirectCommandNV</code> structure specifies the input
data for the <code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_VERTEX_BUFFER_NV</code> token.</p>
</div>
<div id="VkBindVertexBufferIndirectCommandNV" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_NV_device_generated_commands</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkBindVertexBufferIndirectCommandNV {
    VkDeviceAddress    bufferAddress;
    uint32_t           size;
    uint32_t           stride;
} VkBindVertexBufferIndirectCommandNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>bufferAddress</code> specifies a physical address of the <a href="chap12.html#VkBuffer">VkBuffer</a>
used as vertex input binding.</p>
</li>
<li>
<p><code>size</code> is the byte size range which is available for this operation
from the provided address.</p>
</li>
<li>
<p><code>stride</code> is the byte size stride for this vertex input binding as in
<code>VkVertexInputBindingDescription</code>::<code>stride</code>.
It is only used if
<code>VkIndirectCommandsLayoutTokenNV</code>::<code>vertexDynamicStride</code> was
set, otherwise the stride is inherited from the current bound graphics
pipeline.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindVertexBufferIndirectCommandNV-None-02949" href="chap31.html#VUID-VkBindVertexBufferIndirectCommandNV-None-02949"></a> <span class="vuid">VUID-VkBindVertexBufferIndirectCommandNV-None-02949</span><br>

The buffer’s usage flag from which the address was acquired <strong class="purple">must</strong> have
the <code>VK_BUFFER_USAGE_VERTEX_BUFFER_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkBindVertexBufferIndirectCommandNV-None-02950" href="chap31.html#VUID-VkBindVertexBufferIndirectCommandNV-None-02950"></a> <span class="vuid">VUID-VkBindVertexBufferIndirectCommandNV-None-02950</span><br>

Each element of the buffer from which the address was acquired and that
is non-sparse <strong class="purple">must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkSetStateFlagsIndirectCommandNV</code> structure specifies the input
data for the <code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_STATE_FLAGS_NV</code> token.
Which state is changed depends on the <a href="chap31.html#VkIndirectStateFlagBitsNV">VkIndirectStateFlagBitsNV</a>
specified at <code>VkIndirectCommandsLayoutNV</code> creation time.</p>
</div>
<div id="VkSetStateFlagsIndirectCommandNV" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_NV_device_generated_commands</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkSetStateFlagsIndirectCommandNV {
    uint32_t    data;
} VkSetStateFlagsIndirectCommandNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>data</code> encodes packed state that this command alters.</p>
<div class="ulist">
<ul>
<li>
<p>Bit <code>0</code>: If set represents <code>VK_FRONT_FACE_CLOCKWISE</code>, otherwise
<code>VK_FRONT_FACE_COUNTER_CLOCKWISE</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>A subset of the graphics pipeline state <strong class="purple">can</strong> be altered using indirect state
flags:</p>
</div>
<div id="VkIndirectStateFlagBitsNV" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_NV_device_generated_commands</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkIndirectStateFlagBitsNV {
    VK_INDIRECT_STATE_FLAG_FRONTFACE_BIT_NV = <span class="hex">0x00000001</span>,
} VkIndirectStateFlagBitsNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_INDIRECT_STATE_FLAG_FRONTFACE_BIT_NV</code> allows to toggle the
<a href="chap27.html#VkFrontFace">VkFrontFace</a> rasterization state for subsequent draw operations.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkIndirectStateFlagsNV" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_NV_device_generated_commands</span>
<span class="keyword">typedef</span> VkFlags VkIndirectStateFlagsNV;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkIndirectStateFlagsNV</code> is a bitmask type for setting a mask of zero or
more <a href="chap31.html#VkIndirectStateFlagBitsNV">VkIndirectStateFlagBitsNV</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tokenized_command_processing"><a class="anchor" href="chap31.html#_tokenized_command_processing"></a>31.1.3. Tokenized Command Processing</h4>
<div class="paragraph">
<p>The processing is in principle illustrated below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c"><span class="directive">void</span> cmdProcessSequence(cmd, pipeline, indirectCommandsLayout, pIndirectCommandsStreams, s)
{
  <span class="keyword">for</span> (t = <span class="integer">0</span>; t &lt; indirectCommandsLayout.tokenCount; t++)
  {
    uint32_t stream  = indirectCommandsLayout.pTokens[t].stream;
    uint32_t offset  = indirectCommandsLayout.pTokens[t].offset;
    uint32_t stride  = indirectCommandsLayout.pStreamStrides[stream];
    stream            = pIndirectCommandsStreams[stream];
    <span class="directive">const</span> <span class="directive">void</span>* input = stream.buffer.pointer( stream.offset + stride * s + offset )

    <span class="comment">// further details later</span>
    indirectCommandsLayout.pTokens[t].command (cmd, pipeline, input, s);
  }
}

<span class="directive">void</span> cmdProcessAllSequences(cmd, pipeline, indirectCommandsLayout, pIndirectCommandsStreams, sequencesCount)
{
  <span class="keyword">for</span> (s = <span class="integer">0</span>; s &lt; sequencesCount; s++)
  {
    cmdProcessSequence(cmd, pipeline, indirectCommandsLayout, pIndirectCommandsStreams, s);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The processing of each sequence is considered stateless, therefore all state
changes <strong class="purple">must</strong> occur prior work provoking commands within the sequence.
A single sequence is strictly targeting the <a href="chap10.html#VkPipelineBindPoint">VkPipelineBindPoint</a> it was
created with.</p>
</div>
<div class="paragraph">
<p>The primary input data for each token is provided through <code>VkBuffer</code>
content at preprocessing using <a href="chap31.html#vkCmdPreprocessGeneratedCommandsNV">vkCmdPreprocessGeneratedCommandsNV</a> or
execution time using <a href="chap31.html#vkCmdExecuteGeneratedCommandsNV">vkCmdExecuteGeneratedCommandsNV</a>, however some
functional arguments, for example binding sets, are specified at layout
creation time.
The input size is different for each token.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of those elements of the
<a href="chap31.html#VkIndirectCommandsLayoutCreateInfoNV">VkIndirectCommandsLayoutCreateInfoNV</a>::<code>pTokens</code> array which
specify command tokens (other elements of the array specify command
parameters) are:</p>
</div>
<div id="VkIndirectCommandsTokenTypeNV" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_NV_device_generated_commands</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkIndirectCommandsTokenTypeNV {
    VK_INDIRECT_COMMANDS_TOKEN_TYPE_SHADER_GROUP_NV = <span class="integer">0</span>,
    VK_INDIRECT_COMMANDS_TOKEN_TYPE_STATE_FLAGS_NV = <span class="integer">1</span>,
    VK_INDIRECT_COMMANDS_TOKEN_TYPE_INDEX_BUFFER_NV = <span class="integer">2</span>,
    VK_INDIRECT_COMMANDS_TOKEN_TYPE_VERTEX_BUFFER_NV = <span class="integer">3</span>,
    VK_INDIRECT_COMMANDS_TOKEN_TYPE_PUSH_CONSTANT_NV = <span class="integer">4</span>,
    VK_INDIRECT_COMMANDS_TOKEN_TYPE_DRAW_INDEXED_NV = <span class="integer">5</span>,
    VK_INDIRECT_COMMANDS_TOKEN_TYPE_DRAW_NV = <span class="integer">6</span>,
    VK_INDIRECT_COMMANDS_TOKEN_TYPE_DRAW_TASKS_NV = <span class="integer">7</span>,
} VkIndirectCommandsTokenTypeNV;</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all" style="width: 80%;">
<caption class="title">Table 44. Supported indirect command tokens</caption>
<colgroup>
<col style="width: 67%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Token type</th>
<th class="tableblock halign-left valign-top">Equivalent command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_SHADER_GROUP_NV</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="chap10.html#vkCmdBindPipelineShaderGroupNV">vkCmdBindPipelineShaderGroupNV</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_STATE_FLAGS_NV</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_INDEX_BUFFER_NV</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="chap21.html#vkCmdBindIndexBuffer">vkCmdBindIndexBuffer</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_VERTEX_BUFFER_NV</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="chap22.html#vkCmdBindVertexBuffers">vkCmdBindVertexBuffers</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_PUSH_CONSTANT_NV</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="chap14.html#vkCmdPushConstants">vkCmdPushConstants</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_DRAW_INDEXED_NV</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="chap21.html#vkCmdDrawIndexedIndirect">vkCmdDrawIndexedIndirect</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_DRAW_NV</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="chap21.html#vkCmdDrawIndirect">vkCmdDrawIndirect</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_DRAW_TASKS_NV</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="chap21.html#vkCmdDrawMeshTasksIndirectNV">vkCmdDrawMeshTasksIndirectNV</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkIndirectCommandsLayoutTokenNV</code> structure specifies details to the
function arguments that need to be known at layout creation time:</p>
</div>
<div id="VkIndirectCommandsLayoutTokenNV" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_NV_device_generated_commands</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkIndirectCommandsLayoutTokenNV {
    VkStructureType                  sType;
    <span class="directive">const</span> <span class="directive">void</span>*                      pNext;
    VkIndirectCommandsTokenTypeNV    tokenType;
    uint32_t                         stream;
    uint32_t                         offset;
    uint32_t                         vertexBindingUnit;
    VkBool32                         vertexDynamicStride;
    VkPipelineLayout                 pushconstantPipelineLayout;
    VkShaderStageFlags               pushconstantShaderStageFlags;
    uint32_t                         pushconstantOffset;
    uint32_t                         pushconstantSize;
    VkIndirectStateFlagsNV           indirectStateFlags;
    uint32_t                         indexTypeCount;
    <span class="directive">const</span> VkIndexType*               pIndexTypes;
    <span class="directive">const</span> uint32_t*                  pIndexTypeValues;
} VkIndirectCommandsLayoutTokenNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>tokenType</code> specifies the token command type.</p>
</li>
<li>
<p><code>stream</code> is the index of the input stream that contains the token
argument data.</p>
</li>
<li>
<p><code>offset</code> is a relative starting offset within the input stream
memory for the token argument data.</p>
</li>
<li>
<p><code>vertexBindingUnit</code> is used for the vertex buffer binding command.</p>
</li>
<li>
<p><code>vertexDynamicStride</code> sets if the vertex buffer stride is provided
by the binding command rather than the current bound graphics pipeline
state.</p>
</li>
<li>
<p><code>pushconstantPipelineLayout</code> is the <code>VkPipelineLayout</code> used for
the push constant command.</p>
</li>
<li>
<p><code>pushconstantShaderStageFlags</code> are the shader stage flags used for
the push constant command.</p>
</li>
<li>
<p><code>pushconstantOffset</code> is the offset used for the push constant
command.</p>
</li>
<li>
<p><code>pushconstantSize</code> is the size used for the push constant command.</p>
</li>
<li>
<p><code>indirectStateFlags</code> are the active states for the state flag
command.</p>
</li>
<li>
<p><code>indexTypeCount</code> is the optional size of the <code>pIndexTypes</code> and
<code>pIndexTypeValues</code> array pairings.
If not zero, it allows to register a custom <code>uint32_t</code> value to be
treated as specific <code>VkIndexType</code>.</p>
</li>
<li>
<p><code>pIndexTypes</code> is the used <code>VkIndexType</code> for the corresponding
<code>uint32_t</code> value entry in <code>pIndexTypeValues</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutTokenNV-stream-02951" href="chap31.html#VUID-VkIndirectCommandsLayoutTokenNV-stream-02951"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutTokenNV-stream-02951</span><br>

<code>stream</code> <strong class="purple">must</strong> be smaller than
<code>VkIndirectCommandsLayoutCreateInfoNV</code>::<code>streamCount</code></p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutTokenNV-offset-02952" href="chap31.html#VUID-VkIndirectCommandsLayoutTokenNV-offset-02952"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutTokenNV-offset-02952</span><br>

<code>offset</code> <strong class="purple">must</strong> be less than or equal to
<code>VkPhysicalDeviceDeviceGeneratedCommandsPropertiesNV</code>::<code>maxIndirectCommandsTokenOffset</code></p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02976" href="chap31.html#VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02976"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02976</span><br>

If <code>tokenType</code> is
<code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_VERTEX_BUFFER_NV</code>,
<code>vertexBindingUnit</code> <strong class="purple">must</strong> stay within device supported limits for
the appropriate commands</p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02977" href="chap31.html#VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02977"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02977</span><br>

If <code>tokenType</code> is
<code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_PUSH_CONSTANT_NV</code>,
<code>pushconstantPipelineLayout</code> <strong class="purple">must</strong> be valid</p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02978" href="chap31.html#VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02978"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02978</span><br>

If <code>tokenType</code> is
<code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_PUSH_CONSTANT_NV</code>,
<code>pushconstantOffset</code> <strong class="purple">must</strong> be a multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02979" href="chap31.html#VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02979"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02979</span><br>

If <code>tokenType</code> is
<code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_PUSH_CONSTANT_NV</code>,
<code>pushconstantSize</code> <strong class="purple">must</strong> be a multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02980" href="chap31.html#VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02980"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02980</span><br>

If <code>tokenType</code> is
<code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_PUSH_CONSTANT_NV</code>,
<code>pushconstantOffset</code> <strong class="purple">must</strong> be less than
<code>VkPhysicalDeviceLimits</code>::<code>maxPushConstantsSize</code></p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02981" href="chap31.html#VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02981"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02981</span><br>

If <code>tokenType</code> is
<code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_PUSH_CONSTANT_NV</code>,
<code>pushconstantSize</code> <strong class="purple">must</strong> be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxPushConstantsSize</code> minus
<code>pushconstantOffset</code></p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02982" href="chap31.html#VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02982"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02982</span><br>

If <code>tokenType</code> is
<code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_PUSH_CONSTANT_NV</code>, for each byte in
the range specified by <code>pushconstantOffset</code> and
<code>pushconstantSize</code> and for each shader stage in
<code>pushconstantShaderStageFlags</code>, there <strong class="purple">must</strong> be a push constant range
in <code>pushconstantPipelineLayout</code> that includes that byte and that
stage</p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02983" href="chap31.html#VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02983"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02983</span><br>

If <code>tokenType</code> is
<code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_PUSH_CONSTANT_NV</code>, for each byte in
the range specified by <code>pushconstantOffset</code> and
<code>pushconstantSize</code> and for each push constant range that overlaps
that byte, <code>pushconstantShaderStageFlags</code> <strong class="purple">must</strong> include all stages
in that push constant range’s
<a href="chap14.html#VkPushConstantRange">VkPushConstantRange</a>::<code>stageFlags</code></p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02984" href="chap31.html#VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02984"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutTokenNV-tokenType-02984</span><br>

If <code>tokenType</code> is
<code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_STATE_FLAGS_NV</code>,
<code>indirectStateFlags</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutTokenNV-sType-sType" href="chap31.html#VUID-VkIndirectCommandsLayoutTokenNV-sType-sType"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutTokenNV-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_INDIRECT_COMMANDS_LAYOUT_TOKEN_NV</code></p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutTokenNV-pNext-pNext" href="chap31.html#VUID-VkIndirectCommandsLayoutTokenNV-pNext-pNext"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutTokenNV-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutTokenNV-tokenType-parameter" href="chap31.html#VUID-VkIndirectCommandsLayoutTokenNV-tokenType-parameter"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutTokenNV-tokenType-parameter</span><br>
 <code>tokenType</code> <strong class="purple">must</strong> be a valid <a href="chap31.html#VkIndirectCommandsTokenTypeNV">VkIndirectCommandsTokenTypeNV</a> value</p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutTokenNV-pushconstantPipelineLayout-parameter" href="chap31.html#VUID-VkIndirectCommandsLayoutTokenNV-pushconstantPipelineLayout-parameter"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutTokenNV-pushconstantPipelineLayout-parameter</span><br>
 If <code>pushconstantPipelineLayout</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>pushconstantPipelineLayout</code> <strong class="purple">must</strong> be a valid <a href="chap14.html#VkPipelineLayout">VkPipelineLayout</a> handle</p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutTokenNV-pushconstantShaderStageFlags-parameter" href="chap31.html#VUID-VkIndirectCommandsLayoutTokenNV-pushconstantShaderStageFlags-parameter"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutTokenNV-pushconstantShaderStageFlags-parameter</span><br>
 <code>pushconstantShaderStageFlags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap10.html#VkShaderStageFlagBits">VkShaderStageFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutTokenNV-indirectStateFlags-parameter" href="chap31.html#VUID-VkIndirectCommandsLayoutTokenNV-indirectStateFlags-parameter"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutTokenNV-indirectStateFlags-parameter</span><br>
 <code>indirectStateFlags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap31.html#VkIndirectStateFlagBitsNV">VkIndirectStateFlagBitsNV</a> values</p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutTokenNV-pIndexTypes-parameter" href="chap31.html#VUID-VkIndirectCommandsLayoutTokenNV-pIndexTypes-parameter"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutTokenNV-pIndexTypes-parameter</span><br>
 If <code>indexTypeCount</code> is not <code>0</code>, <code>pIndexTypes</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>indexTypeCount</code> valid <a href="chap21.html#VkIndexType">VkIndexType</a> values</p>
</li>
<li>
<p><a id="VUID-VkIndirectCommandsLayoutTokenNV-pIndexTypeValues-parameter" href="chap31.html#VUID-VkIndirectCommandsLayoutTokenNV-pIndexTypeValues-parameter"></a> <span class="vuid">VUID-VkIndirectCommandsLayoutTokenNV-pIndexTypeValues-parameter</span><br>
 If <code>indexTypeCount</code> is not <code>0</code>, <code>pIndexTypeValues</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>indexTypeCount</code> <code>uint32_t</code> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following code provides detailed information on how an individual
sequence is processed.
For valid usage, all restrictions from the regular commands apply.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c"><span class="directive">void</span> cmdProcessSequence(cmd, pipeline, indirectCommandsLayout, pIndirectCommandsStreams, s)
{
  <span class="keyword">for</span> (uint32_t t = <span class="integer">0</span>; t &lt; indirectCommandsLayout.tokenCount; t++){
    token = indirectCommandsLayout.pTokens[t];

    uint32_t stride   = indirectCommandsLayout.pStreamStrides[token.stream];
    stream            = pIndirectCommandsStreams[token.stream];
    uint32_t offset   = stream.offset + stride * s + token.offset;
    <span class="directive">const</span> <span class="directive">void</span>* input = stream.buffer.pointer( offset )

    <span class="keyword">switch</span>(input.type){
    <span class="label">VK_INDIRECT_COMMANDS_TOKEN_TYPE_SHADER_GROUP_NV:</span>
      VkBindShaderGroupIndirectCommandNV* bind = input;

      vkCmdBindPipelineShaderGroupNV(cmd, indirectCommandsLayout.pipelineBindPoint,
        pipeline, bind-&gt;groupIndex);
    <span class="keyword">break</span>;

    <span class="label">VK_INDIRECT_COMMANDS_TOKEN_TYPE_STATE_FLAGS_NV:</span>
      VkSetStateFlagsIndirectCommandNV* state = input;

      <span class="keyword">if</span> (token.indirectStateFlags &amp; VK_INDIRECT_STATE_FLAG_FRONTFACE_BIT_NV){
        <span class="keyword">if</span> (state.data &amp; (<span class="integer">1</span> &lt;&lt; <span class="integer">0</span>)){
          set VK_FRONT_FACE_CLOCKWISE;
        } <span class="keyword">else</span> {
          set VK_FRONT_FACE_COUNTER_CLOCKWISE;
        }
      }
    <span class="keyword">break</span>;

    <span class="label">VK_INDIRECT_COMMANDS_TOKEN_TYPE_PUSH_CONSTANT_NV:</span>
      uint32_t* data = input;

      vkCmdPushConstants(cmd,
        token.pushconstantPipelineLayout
        token.pushconstantStageFlags,
        token.pushconstantOffset,
        token.pushconstantSize, data);
    <span class="keyword">break</span>;

    <span class="label">VK_INDIRECT_COMMANDS_TOKEN_TYPE_INDEX_BUFFER_NV:</span>
      VkBindIndexBufferIndirectCommandNV* data = input;

      <span class="comment">// the indexType may optionally be remapped</span>
      <span class="comment">// from a custom uint32_t value, via</span>
      <span class="comment">// VkIndirectCommandsLayoutTokenNV::pIndexTypeValues</span>

      vkCmdBindIndexBuffer(cmd,
        deriveBuffer(data-&gt;bufferAddress),
        deriveOffset(data-&gt;bufferAddress),
        data-&gt;indexType);
    <span class="keyword">break</span>;

    <span class="label">VK_INDIRECT_COMMANDS_TOKEN_TYPE_VERTEX_BUFFER_NV:</span>
      VkBindVertexBufferIndirectCommandNV* data = input;

      <span class="comment">// if token.vertexDynamicStride is VK_TRUE</span>
      <span class="comment">// then the stride for this binding is set</span>
      <span class="comment">// using data-&gt;stride as well</span>

      vkCmdBindVertexBuffers(cmd,
        token.vertexBindingUnit, <span class="integer">1</span>,
        &amp;deriveBuffer(data-&gt;bufferAddress),
        &amp;deriveOffset(data-&gt;bufferAddress));
    <span class="keyword">break</span>;

    <span class="label">VK_INDIRECT_COMMANDS_TOKEN_TYPE_DRAW_INDEXED_NV:</span>
      vkCmdDrawIndexedIndirect(cmd,
        stream.buffer, offset, <span class="integer">1</span>, <span class="integer">0</span>);
    <span class="keyword">break</span>;

    <span class="label">VK_INDIRECT_COMMANDS_TOKEN_TYPE_DRAW_NV:</span>
      vkCmdDrawIndirect(cmd,
        stream.buffer,
        offset, <span class="integer">1</span>, <span class="integer">0</span>);
    <span class="keyword">break</span>;

    <span class="comment">// only available if VK_NV_mesh_shader is supported</span>
    <span class="label">VK_INDIRECT_COMMANDS_TOKEN_TYPE_DISPATCH_NV:</span>
      vkCmdDrawMeshTasksIndirectNV(cmd,
        stream.buffer, offset, <span class="integer">1</span>, <span class="integer">0</span>);
    <span class="keyword">break</span>;
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_indirect_commands_generation_and_execution"><a class="anchor" href="chap31.html#_indirect_commands_generation_and_execution"></a>31.2. Indirect Commands Generation And Execution</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The generation of commands on the device requires a <code>preprocess</code> buffer.
To retrieve the memory size and alignment requirements of a particular
execution state call:</p>
</div>
<div id="vkGetGeneratedCommandsMemoryRequirementsNV" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_NV_device_generated_commands</span>
<span class="directive">void</span> vkGetGeneratedCommandsMemoryRequirementsNV(
    VkDevice                                    device,
    <span class="directive">const</span> VkGeneratedCommandsMemoryRequirementsInfoNV* pInfo,
    VkMemoryRequirements2*                      pMemoryRequirements);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the buffer.</p>
</li>
<li>
<p><code>pInfo</code> is a pointer to an instance of the
<code>VkGeneratedCommandsMemoryRequirementsInfoNV</code> structure containing
parameters required for the memory requirements query.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a <a href="chap12.html#VkMemoryRequirements2">VkMemoryRequirements2</a>
structure in which the memory requirements of the buffer object are
returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetGeneratedCommandsMemoryRequirementsNV-deviceGeneratedCommands-02906" href="chap31.html#VUID-vkGetGeneratedCommandsMemoryRequirementsNV-deviceGeneratedCommands-02906"></a> <span class="vuid">VUID-vkGetGeneratedCommandsMemoryRequirementsNV-deviceGeneratedCommands-02906</span><br>

The <a href="chap41.html#features-deviceGeneratedCommands"><code>VkPhysicalDeviceDeviceGeneratedCommandsFeaturesNV</code>::<code>deviceGeneratedCommands</code></a>
feature <strong class="purple">must</strong> be enabled</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetGeneratedCommandsMemoryRequirementsNV-device-parameter" href="chap31.html#VUID-vkGetGeneratedCommandsMemoryRequirementsNV-device-parameter"></a> <span class="vuid">VUID-vkGetGeneratedCommandsMemoryRequirementsNV-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetGeneratedCommandsMemoryRequirementsNV-pInfo-parameter" href="chap31.html#VUID-vkGetGeneratedCommandsMemoryRequirementsNV-pInfo-parameter"></a> <span class="vuid">VUID-vkGetGeneratedCommandsMemoryRequirementsNV-pInfo-parameter</span><br>
 <code>pInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap31.html#VkGeneratedCommandsMemoryRequirementsInfoNV">VkGeneratedCommandsMemoryRequirementsInfoNV</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetGeneratedCommandsMemoryRequirementsNV-pMemoryRequirements-parameter" href="chap31.html#VUID-vkGetGeneratedCommandsMemoryRequirementsNV-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetGeneratedCommandsMemoryRequirementsNV-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkMemoryRequirements2">VkMemoryRequirements2</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkGeneratedCommandsMemoryRequirementsInfoNV" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_NV_device_generated_commands</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkGeneratedCommandsMemoryRequirementsInfoNV {
    VkStructureType               sType;
    <span class="directive">const</span> <span class="directive">void</span>*                   pNext;
    VkPipelineBindPoint           pipelineBindPoint;
    VkPipeline                    pipeline;
    VkIndirectCommandsLayoutNV    indirectCommandsLayout;
    uint32_t                      maxSequencesCount;
} VkGeneratedCommandsMemoryRequirementsInfoNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pipelineBindPoint</code> is the <a href="chap10.html#VkPipelineBindPoint">VkPipelineBindPoint</a> of the
<code>pipeline</code> that this buffer memory is intended to be used with
during the execution.</p>
</li>
<li>
<p><code>pipeline</code> is the <a href="chap10.html#VkPipeline">VkPipeline</a> that this buffer memory is
intended to be used with during the execution.</p>
</li>
<li>
<p><code>indirectCommandsLayout</code> is the <a href="chap31.html#VkIndirectCommandsLayoutNV">VkIndirectCommandsLayoutNV</a>
that this buffer memory is intended to be used with.</p>
</li>
<li>
<p><code>maxSequencesCount</code> is the maximum number of sequences that this
buffer memory in combination with the other state provided <strong class="purple">can</strong> be used
with.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkGeneratedCommandsMemoryRequirementsInfoNV-maxSequencesCount-02907" href="chap31.html#VUID-VkGeneratedCommandsMemoryRequirementsInfoNV-maxSequencesCount-02907"></a> <span class="vuid">VUID-VkGeneratedCommandsMemoryRequirementsInfoNV-maxSequencesCount-02907</span><br>

<code>maxSequencesCount</code> <strong class="purple">must</strong> be less or equal to
<a href="chap42.html#VkPhysicalDeviceDeviceGeneratedCommandsPropertiesNV">VkPhysicalDeviceDeviceGeneratedCommandsPropertiesNV</a>::<code>maxIndirectSequenceCount</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkGeneratedCommandsMemoryRequirementsInfoNV-sType-sType" href="chap31.html#VUID-VkGeneratedCommandsMemoryRequirementsInfoNV-sType-sType"></a> <span class="vuid">VUID-VkGeneratedCommandsMemoryRequirementsInfoNV-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_GENERATED_COMMANDS_MEMORY_REQUIREMENTS_INFO_NV</code></p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsMemoryRequirementsInfoNV-pNext-pNext" href="chap31.html#VUID-VkGeneratedCommandsMemoryRequirementsInfoNV-pNext-pNext"></a> <span class="vuid">VUID-VkGeneratedCommandsMemoryRequirementsInfoNV-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsMemoryRequirementsInfoNV-pipelineBindPoint-parameter" href="chap31.html#VUID-VkGeneratedCommandsMemoryRequirementsInfoNV-pipelineBindPoint-parameter"></a> <span class="vuid">VUID-VkGeneratedCommandsMemoryRequirementsInfoNV-pipelineBindPoint-parameter</span><br>
 <code>pipelineBindPoint</code> <strong class="purple">must</strong> be a valid <a href="chap10.html#VkPipelineBindPoint">VkPipelineBindPoint</a> value</p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsMemoryRequirementsInfoNV-pipeline-parameter" href="chap31.html#VUID-VkGeneratedCommandsMemoryRequirementsInfoNV-pipeline-parameter"></a> <span class="vuid">VUID-VkGeneratedCommandsMemoryRequirementsInfoNV-pipeline-parameter</span><br>
 <code>pipeline</code> <strong class="purple">must</strong> be a valid <a href="chap10.html#VkPipeline">VkPipeline</a> handle</p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsMemoryRequirementsInfoNV-indirectCommandsLayout-parameter" href="chap31.html#VUID-VkGeneratedCommandsMemoryRequirementsInfoNV-indirectCommandsLayout-parameter"></a> <span class="vuid">VUID-VkGeneratedCommandsMemoryRequirementsInfoNV-indirectCommandsLayout-parameter</span><br>
 <code>indirectCommandsLayout</code> <strong class="purple">must</strong> be a valid <a href="chap31.html#VkIndirectCommandsLayoutNV">VkIndirectCommandsLayoutNV</a> handle</p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsMemoryRequirementsInfoNV-commonparent" href="chap31.html#VUID-VkGeneratedCommandsMemoryRequirementsInfoNV-commonparent"></a> <span class="vuid">VUID-VkGeneratedCommandsMemoryRequirementsInfoNV-commonparent</span><br>
 Both of <code>indirectCommandsLayout</code>, and <code>pipeline</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The actual generation of commands as well as their execution on the device
is handled as single action with:</p>
</div>
<div id="vkCmdExecuteGeneratedCommandsNV" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_NV_device_generated_commands</span>
<span class="directive">void</span> vkCmdExecuteGeneratedCommandsNV(
    VkCommandBuffer                             commandBuffer,
    VkBool32                                    isPreprocessed,
    <span class="directive">const</span> VkGeneratedCommandsInfoNV*            pGeneratedCommandsInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command is
recorded.</p>
</li>
<li>
<p><code>isPreprocessed</code> represents whether the input data has already been
preprocessed on the device.
If it is <code>VK_FALSE</code> this command will implicitly trigger the
preprocessing step, otherwise not.</p>
</li>
<li>
<p><code>pGeneratedCommandsInfo</code> is a pointer to an instance of the
<a href="chap31.html#VkGeneratedCommandsInfoNV">VkGeneratedCommandsInfoNV</a> structure containing parameters
affecting the generation of commands.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-magFilter-04553" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-magFilter-04553"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-magFilter-04553</span><br>

If a <a href="chap13.html#VkSampler">VkSampler</a> created with <code>magFilter</code> or <code>minFilter</code>
equal to <code>VK_FILTER_LINEAR</code> and <code>compareEnable</code> equal to
<code>VK_FALSE</code> is used to sample a <a href="chap12.html#VkImageView">VkImageView</a> as a result of this
command, then the image view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-mipmapMode-04770" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-mipmapMode-04770"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-mipmapMode-04770</span><br>

If a <a href="chap13.html#VkSampler">VkSampler</a> created with <code>mipmapMode</code> equal to
<code>VK_SAMPLER_MIPMAP_MODE_LINEAR</code> and <code>compareEnable</code> equal to
<code>VK_FALSE</code> is used to sample a <a href="chap12.html#VkImageView">VkImageView</a> as a result of this
command, then the image view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-02691" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-02691"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-02691</span><br>

If a <code>VkImageView</code> is accessed using atomic operations as a result
of this command, then the image view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_STORAGE_IMAGE_ATOMIC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-02692" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-02692"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-02692</span><br>

If a <code>VkImageView</code> is sampled with <code>VK_FILTER_CUBIC_EXT</code> as a
result of this command, then the image view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_CUBIC_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-filterCubic-02694" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-filterCubic-02694"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-filterCubic-02694</span><br>

Any <a href="chap12.html#VkImageView">VkImageView</a> being sampled with <code>VK_FILTER_CUBIC_EXT</code> as a
result of this command <strong class="purple">must</strong> have a <a href="chap12.html#VkImageViewType">VkImageViewType</a> and format
that supports cubic filtering, as specified by
<code>VkFilterCubicImageViewImageFormatPropertiesEXT</code>::<code>filterCubic</code>
returned by <code>vkGetPhysicalDeviceImageFormatProperties2</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-filterCubicMinmax-02695" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-filterCubicMinmax-02695"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-filterCubicMinmax-02695</span><br>

Any <a href="chap12.html#VkImageView">VkImageView</a> being sampled with <code>VK_FILTER_CUBIC_EXT</code> with
a reduction mode of either <code>VK_SAMPLER_REDUCTION_MODE_MIN</code> or
<code>VK_SAMPLER_REDUCTION_MODE_MAX</code> as a result of this command <strong class="purple">must</strong>
have a <a href="chap12.html#VkImageViewType">VkImageViewType</a> and format that supports cubic filtering
together with minmax filtering, as specified by
<code>VkFilterCubicImageViewImageFormatPropertiesEXT</code>::<code>filterCubicMinmax</code>
returned by <code>vkGetPhysicalDeviceImageFormatProperties2</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-flags-02696" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-flags-02696"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-flags-02696</span><br>

Any <a href="chap12.html#VkImage">VkImage</a> created with a <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>flags</code>
containing <code>VK_IMAGE_CREATE_CORNER_SAMPLED_BIT_NV</code> sampled as a
result of this command <strong class="purple">must</strong> only be sampled using a
<a href="chap13.html#VkSamplerAddressMode">VkSamplerAddressMode</a> of
<code>VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-02697" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-02697"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-02697</span><br>

For each set <em>n</em> that is statically used by the <code>VkPipeline</code> bound
to the pipeline bind point used by this command, a descriptor set <strong class="purple">must</strong>
have been bound to <em>n</em> at the same pipeline bind point, with a
<code>VkPipelineLayout</code> that is compatible for set <em>n</em>, with the
<code>VkPipelineLayout</code> used to create the current <code>VkPipeline</code>, as
described in <a href="chap14.html#descriptorsets-compatibility">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-02698" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-02698"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-02698</span><br>

For each push constant that is statically used by the <code>VkPipeline</code>
bound to the pipeline bind point used by this command, a push constant
value <strong class="purple">must</strong> have been set for the same pipeline bind point, with a
<code>VkPipelineLayout</code> that is compatible for push constants, with the
<code>VkPipelineLayout</code> used to create the current <code>VkPipeline</code>, as
described in <a href="chap14.html#descriptorsets-compatibility">Pipeline Layout Compatibility</a></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-02699" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-02699"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-02699</span><br>

Descriptors in each bound descriptor set, specified via
<code>vkCmdBindDescriptorSets</code>, <strong class="purple">must</strong> be valid if they are statically
used by the <code>VkPipeline</code> bound to the pipeline bind point used by
this command</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-02700" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-02700"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-02700</span><br>

A valid pipeline <strong class="purple">must</strong> be bound to the pipeline bind point used by this
command</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-commandBuffer-02701" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-commandBuffer-02701"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-commandBuffer-02701</span><br>

If the <code>VkPipeline</code> object bound to the pipeline bind point used by
this command requires any dynamic state, that state <strong class="purple">must</strong> have been set
or inherited (if the <code><a href="chap50.html#VK_NV_inherited_viewport_scissor">VK_NV_inherited_viewport_scissor</a></code> extension is
enabled) for <code>commandBuffer</code>, and done so after any previously bound
pipeline with the corresponding state not specified as dynamic</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-02859" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-02859"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-02859</span><br>

There <strong class="purple">must</strong> not have been any calls to dynamic state setting commands
for any state not specified as dynamic in the <code>VkPipeline</code> object
bound to the pipeline bind point used by this command, since that
pipeline was bound</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-02702" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-02702"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-02702</span><br>

If the <code>VkPipeline</code> object bound to the pipeline bind point used by
this command accesses a <code>VkSampler</code> object that uses unnormalized
coordinates, that sampler <strong class="purple">must</strong> not be used to sample from any
<code>VkImage</code> with a <code>VkImageView</code> of the type
<code>VK_IMAGE_VIEW_TYPE_3D</code>, <code>VK_IMAGE_VIEW_TYPE_CUBE</code>,
<code>VK_IMAGE_VIEW_TYPE_1D_ARRAY</code>, <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code> or
<code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code>, in any shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-02703" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-02703"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-02703</span><br>

If the <code>VkPipeline</code> object bound to the pipeline bind point used by
this command accesses a <code>VkSampler</code> object that uses unnormalized
coordinates, that sampler <strong class="purple">must</strong> not be used with any of the SPIR-V
<code>OpImageSample*</code> or <code>OpImageSparseSample*</code> instructions with
<code>ImplicitLod</code>, <code>Dref</code> or <code>Proj</code> in their name, in any shader
stage</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-02704" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-02704"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-02704</span><br>

If the <code>VkPipeline</code> object bound to the pipeline bind point used by
this command accesses a <code>VkSampler</code> object that uses unnormalized
coordinates, that sampler <strong class="purple">must</strong> not be used with any of the SPIR-V
<code>OpImageSample*</code> or <code>OpImageSparseSample*</code> instructions that includes a
LOD bias or any offset values, in any shader stage</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-02705" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-02705"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-02705</span><br>

If the <a href="chap41.html#features-robustBufferAccess">robust buffer access</a> feature is
not enabled, and if the <code>VkPipeline</code> object bound to the pipeline
bind point used by this command accesses a uniform buffer, it <strong class="purple">must</strong> not
access values outside of the range of the buffer as specified in the
descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-02706" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-02706"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-02706</span><br>

If the <a href="chap41.html#features-robustBufferAccess">robust buffer access</a> feature is
not enabled, and if the <code>VkPipeline</code> object bound to the pipeline
bind point used by this command accesses a storage buffer, it <strong class="purple">must</strong> not
access values outside of the range of the buffer as specified in the
descriptor set bound to the same pipeline bind point</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-commandBuffer-02707" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-commandBuffer-02707"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-commandBuffer-02707</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, any resource
accessed by the <code>VkPipeline</code> object bound to the pipeline bind point
used by this command <strong class="purple">must</strong> not be a protected resource</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-04115" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-04115"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-04115</span><br>

If a <a href="chap12.html#VkImageView">VkImageView</a> is accessed using <code>OpImageWrite</code> as a result
of this command, then the <code>Type</code> of the <code>Texel</code> operand of that
instruction <strong class="purple">must</strong> have at least as many components as the image view’s
format.</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-OpImageWrite-04469" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-OpImageWrite-04469"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-OpImageWrite-04469</span><br>

If a <a href="chap12.html#VkBufferView">VkBufferView</a> is accessed using <code>OpImageWrite</code> as a result
of this command, then the <code>Type</code> of the <code>Texel</code> operand of that
instruction <strong class="purple">must</strong> have at least as many components as the buffer view’s
format.</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-SampledType-04470" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-SampledType-04470"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-SampledType-04470</span><br>

If a <a href="chap12.html#VkImageView">VkImageView</a> with a <a href="chap43.html#VkFormat">VkFormat</a> that has a 64-bit channel
width is accessed as a result of this command, the <code>SampledType</code> of
the <code>OpTypeImage</code> operand of that instruction <strong class="purple">must</strong> have a <code>Width</code>
of 64.</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-SampledType-04471" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-SampledType-04471"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-SampledType-04471</span><br>

If a <a href="chap12.html#VkImageView">VkImageView</a> with a <a href="chap43.html#VkFormat">VkFormat</a> that has a channel width
less than 64-bit is accessed as a result of this command, the
<code>SampledType</code> of the <code>OpTypeImage</code> operand of that instruction
<strong class="purple">must</strong> have a <code>Width</code> of 32.</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-SampledType-04472" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-SampledType-04472"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-SampledType-04472</span><br>

If a <a href="chap12.html#VkBufferView">VkBufferView</a> with a <a href="chap43.html#VkFormat">VkFormat</a> that has a 64-bit channel
width is accessed as a result of this command, the <code>SampledType</code> of
the <code>OpTypeImage</code> operand of that instruction <strong class="purple">must</strong> have a <code>Width</code>
of 64.</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-SampledType-04473" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-SampledType-04473"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-SampledType-04473</span><br>

If a <a href="chap12.html#VkBufferView">VkBufferView</a> with a <a href="chap43.html#VkFormat">VkFormat</a> that has a channel width
less than 64-bit is accessed as a result of this command, the
<code>SampledType</code> of the <code>OpTypeImage</code> operand of that instruction
<strong class="purple">must</strong> have a <code>Width</code> of 32.</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-sparseImageInt64Atomics-04474" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-sparseImageInt64Atomics-04474"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-sparseImageInt64Atomics-04474</span><br>

If the
<a href="chap41.html#features-sparseImageInt64Atomics"><code>sparseImageInt64Atomics</code></a>
feature is not enabled, <a href="chap12.html#VkImage">VkImage</a> objects created with the
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> flag <strong class="purple">must</strong> not be accessed by
atomic instructions through an <code>OpTypeImage</code> with a <code>SampledType</code>
with a <code>Width</code> of 64 by this command.</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-sparseImageInt64Atomics-04475" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-sparseImageInt64Atomics-04475"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-sparseImageInt64Atomics-04475</span><br>

If the
<a href="chap41.html#features-sparseImageInt64Atomics"><code>sparseImageInt64Atomics</code></a>
feature is not enabled, <a href="chap12.html#VkBuffer">VkBuffer</a> objects created with the
<code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code> flag <strong class="purple">must</strong> not be accessed
by atomic instructions through an <code>OpTypeImage</code> with a
<code>SampledType</code> with a <code>Width</code> of 64 by this command.</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-renderPass-02684" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-renderPass-02684"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-renderPass-02684</span><br>

The current render pass <strong class="purple">must</strong> be <a href="chap8.html#renderpass-compatibility">compatible</a>
with the <code>renderPass</code> member of the
<code>VkGraphicsPipelineCreateInfo</code> structure specified when creating the
<code>VkPipeline</code> bound to <code>VK_PIPELINE_BIND_POINT_GRAPHICS</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-subpass-02685" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-subpass-02685"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-subpass-02685</span><br>

The subpass index of the current render pass <strong class="purple">must</strong> be equal to the
<code>subpass</code> member of the <code>VkGraphicsPipelineCreateInfo</code> structure
specified when creating the <code>VkPipeline</code> bound to
<code>VK_PIPELINE_BIND_POINT_GRAPHICS</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-02686" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-02686"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-02686</span><br>

Every input attachment used by the current subpass <strong class="purple">must</strong> be bound to the
pipeline via a descriptor set</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-04584" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-04584"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-04584</span><br>

Image subresources used as attachments in the current render pass <strong class="purple">must</strong>
not be accessed in any way other than as an attachment by this command,
except for cases involving read-only access to depth/stencil attachments
as described in the <a href="chap8.html#renderpass-attachment-nonattachment">Render Pass</a>
chapter</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-maxMultiviewInstanceIndex-02688" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-maxMultiviewInstanceIndex-02688"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-maxMultiviewInstanceIndex-02688</span><br>

If the draw is recorded in a render pass instance with multiview
enabled, the maximum instance index <strong class="purple">must</strong> be less than or equal to
<a href="chap42.html#VkPhysicalDeviceMultiviewProperties">VkPhysicalDeviceMultiviewProperties</a>::<code>maxMultiviewInstanceIndex</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-sampleLocationsEnable-02689" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-sampleLocationsEnable-02689"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-sampleLocationsEnable-02689</span><br>

If the bound graphics pipeline was created with
<a href="chap27.html#VkPipelineSampleLocationsStateCreateInfoEXT">VkPipelineSampleLocationsStateCreateInfoEXT</a>::<code>sampleLocationsEnable</code>
set to <code>VK_TRUE</code> and the current subpass has a depth/stencil
attachment, then that attachment <strong class="purple">must</strong> have been created with the
<code>VK_IMAGE_CREATE_SAMPLE_LOCATIONS_COMPATIBLE_DEPTH_BIT_EXT</code> bit set</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-viewportCount-03417" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-viewportCount-03417"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-viewportCount-03417</span><br>

If the bound graphics pipeline state was created with the
<code>VK_DYNAMIC_STATE_VIEWPORT_WITH_COUNT_EXT</code> dynamic state enabled,
but not the <code>VK_DYNAMIC_STATE_SCISSOR_WITH_COUNT_EXT</code> dynamic state
enabled, then <a href="chap26.html#vkCmdSetViewportWithCountEXT">vkCmdSetViewportWithCountEXT</a> <strong class="purple">must</strong> have been called
in the current command buffer prior to this drawing command, and the
<code>viewportCount</code> parameter of <code>vkCmdSetViewportWithCountEXT</code>
<strong class="purple">must</strong> match the
<code>VkPipelineViewportStateCreateInfo</code>::<code>scissorCount</code> of the
pipeline</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-scissorCount-03418" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-scissorCount-03418"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-scissorCount-03418</span><br>

If the bound graphics pipeline state was created with the
<code>VK_DYNAMIC_STATE_SCISSOR_WITH_COUNT_EXT</code> dynamic state enabled, but
not the <code>VK_DYNAMIC_STATE_VIEWPORT_WITH_COUNT_EXT</code> dynamic state
enabled, then <a href="chap26.html#vkCmdSetScissorWithCountEXT">vkCmdSetScissorWithCountEXT</a> <strong class="purple">must</strong> have been called
in the current command buffer prior to this drawing command, and the
<code>scissorCount</code> parameter of <code>vkCmdSetScissorWithCountEXT</code> <strong class="purple">must</strong>
match the <code>VkPipelineViewportStateCreateInfo</code>::<code>viewportCount</code>
of the pipeline</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-viewportCount-03419" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-viewportCount-03419"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-viewportCount-03419</span><br>

If the bound graphics pipeline state was created with both the
<code>VK_DYNAMIC_STATE_SCISSOR_WITH_COUNT_EXT</code> and
<code>VK_DYNAMIC_STATE_VIEWPORT_WITH_COUNT_EXT</code> dynamic states enabled
then both <a href="chap26.html#vkCmdSetViewportWithCountEXT">vkCmdSetViewportWithCountEXT</a> and
<a href="chap26.html#vkCmdSetScissorWithCountEXT">vkCmdSetScissorWithCountEXT</a> <strong class="purple">must</strong> have been called in the current
command buffer prior to this drawing command, and the
<code>viewportCount</code> parameter of <code>vkCmdSetViewportWithCountEXT</code>
<strong class="purple">must</strong> match the <code>scissorCount</code> parameter of
<code>vkCmdSetScissorWithCountEXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-viewportCount-04137" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-viewportCount-04137"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-viewportCount-04137</span><br>

If the bound graphics pipeline state was created with the
<code>VK_DYNAMIC_STATE_VIEWPORT_WITH_COUNT_EXT</code> dynamic state enabled,
but not the <code>VK_DYNAMIC_STATE_VIEWPORT_W_SCALING_NV</code> dynamic state
enabled, then the bound graphics pipeline <strong class="purple">must</strong> have been created with
<a href="chap26.html#VkPipelineViewportWScalingStateCreateInfoNV">VkPipelineViewportWScalingStateCreateInfoNV</a>::<code>viewportCount</code>
greater or equal to the <code>viewportCount</code> parameter in the last call
to <a href="chap26.html#vkCmdSetViewportWithCountEXT">vkCmdSetViewportWithCountEXT</a></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-viewportCount-04138" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-viewportCount-04138"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-viewportCount-04138</span><br>

If the bound graphics pipeline state was created with the
<code>VK_DYNAMIC_STATE_VIEWPORT_WITH_COUNT_EXT</code> and
<code>VK_DYNAMIC_STATE_VIEWPORT_W_SCALING_NV</code> dynamic states enabled then
the <code>viewportCount</code> parameter in the last call to
<a href="chap26.html#vkCmdSetViewportWScalingNV">vkCmdSetViewportWScalingNV</a> <strong class="purple">must</strong> be greater than or equal to the
<code>viewportCount</code> parameter in the last call to
<a href="chap26.html#vkCmdSetViewportWithCountEXT">vkCmdSetViewportWithCountEXT</a></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-viewportCount-04139" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-viewportCount-04139"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-viewportCount-04139</span><br>

If the bound graphics pipeline state was created with the
<code>VK_DYNAMIC_STATE_VIEWPORT_WITH_COUNT_EXT</code> dynamic state enabled,
but not the <code>VK_DYNAMIC_STATE_VIEWPORT_SHADING_RATE_PALETTE_NV</code>
dynamic state enabled, then the bound graphics pipeline <strong class="purple">must</strong> have been
created with
<a href="chap27.html#VkPipelineViewportShadingRateImageStateCreateInfoNV">VkPipelineViewportShadingRateImageStateCreateInfoNV</a>::<code>viewportCount</code>
greater or equal to the <code>viewportCount</code> parameter in the last call
to <a href="chap26.html#vkCmdSetViewportWithCountEXT">vkCmdSetViewportWithCountEXT</a></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-viewportCount-04140" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-viewportCount-04140"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-viewportCount-04140</span><br>

If the bound graphics pipeline state was created with the
<code>VK_DYNAMIC_STATE_VIEWPORT_WITH_COUNT_EXT</code> and
<code>VK_DYNAMIC_STATE_VIEWPORT_SHADING_RATE_PALETTE_NV</code> dynamic states
enabled then the <code>viewportCount</code> parameter in the last call to
<a href="chap27.html#vkCmdSetViewportShadingRatePaletteNV">vkCmdSetViewportShadingRatePaletteNV</a> <strong class="purple">must</strong> be greater than or
equal to the <code>viewportCount</code> parameter in the last call to
<a href="chap26.html#vkCmdSetViewportWithCountEXT">vkCmdSetViewportWithCountEXT</a></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-VkPipelineVieportCreateInfo-04141" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-VkPipelineVieportCreateInfo-04141"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-VkPipelineVieportCreateInfo-04141</span><br>

If the bound graphics pipeline state was created with the
<code>VK_DYNAMIC_STATE_VIEWPORT_WITH_COUNT_EXT</code> dynamic state enabled and
an instance of <a href="chap26.html#VkPipelineViewportSwizzleStateCreateInfoNV">VkPipelineViewportSwizzleStateCreateInfoNV</a> chained
from <code>VkPipelineVieportCreateInfo</code>, then the bound graphics pipeline
<strong class="purple">must</strong> have been created with
<a href="chap26.html#VkPipelineViewportSwizzleStateCreateInfoNV">VkPipelineViewportSwizzleStateCreateInfoNV</a>::<code>viewportCount</code>
greater or equal to the <code>viewportCount</code> parameter in the last call
to <a href="chap26.html#vkCmdSetViewportWithCountEXT">vkCmdSetViewportWithCountEXT</a></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-VkPipelineVieportCreateInfo-04142" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-VkPipelineVieportCreateInfo-04142"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-VkPipelineVieportCreateInfo-04142</span><br>

If the bound graphics pipeline state was created with the
<code>VK_DYNAMIC_STATE_VIEWPORT_WITH_COUNT_EXT</code> dynamic state enabled and
an instance of <a href="chap28.html#VkPipelineViewportExclusiveScissorStateCreateInfoNV">VkPipelineViewportExclusiveScissorStateCreateInfoNV</a>
chained from <code>VkPipelineVieportCreateInfo</code>, then the bound graphics
pipeline <strong class="purple">must</strong> have been created with
<a href="chap28.html#VkPipelineViewportExclusiveScissorStateCreateInfoNV">VkPipelineViewportExclusiveScissorStateCreateInfoNV</a>::<code>exclusiveScissorCount</code>
greater or equal to the <code>viewportCount</code> parameter in the last call
to <a href="chap26.html#vkCmdSetViewportWithCountEXT">vkCmdSetViewportWithCountEXT</a></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-primitiveTopology-03420" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-primitiveTopology-03420"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-primitiveTopology-03420</span><br>

If the bound graphics pipeline state was created with the
<code>VK_DYNAMIC_STATE_PRIMITIVE_TOPOLOGY_EXT</code> dynamic state enabled then
<a href="chap21.html#vkCmdSetPrimitiveTopologyEXT">vkCmdSetPrimitiveTopologyEXT</a> <strong class="purple">must</strong> have been called in the current
command buffer prior to this drawing command, and the
<code>primitiveTopology</code> parameter of <code>vkCmdSetPrimitiveTopologyEXT</code>
<strong class="purple">must</strong> be of the same <a href="chap21.html#drawing-primitive-topology-class">topology
class</a> as the pipeline
<a href="chap21.html#VkPipelineInputAssemblyStateCreateInfo">VkPipelineInputAssemblyStateCreateInfo</a>::<code>topology</code> state</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-04875" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-04875"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-04875</span><br>

If the bound graphics pipeline state was created with the
<code>VK_DYNAMIC_STATE_PATCH_CONTROL_POINTS_EXT</code> dynamic state enabled
then <a href="chap9.html#vkCmdSetPatchControlPointsEXT">vkCmdSetPatchControlPointsEXT</a> <strong class="purple">must</strong> have been called in the
current command buffer prior to this drawing command</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-04876" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-04876"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-04876</span><br>

If the bound graphics pipeline state was created with the
<code>VK_DYNAMIC_STATE_RASTERIZER_DISCARD_ENABLE_EXT</code> dynamic state
enabled then <a href="chap27.html#vkCmdSetRasterizerDiscardEnableEXT">vkCmdSetRasterizerDiscardEnableEXT</a> <strong class="purple">must</strong> have been
called in the current command buffer prior to this drawing command</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-04877" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-04877"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-04877</span><br>

If the bound graphics pipeline state was created with the
<code>VK_DYNAMIC_STATE_DEPTH_BIAS_ENABLE_EXT</code> dynamic state enabled then
<a href="chap27.html#vkCmdSetDepthBiasEnableEXT">vkCmdSetDepthBiasEnableEXT</a> <strong class="purple">must</strong> have been called in the current
command buffer prior to this drawing command</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-logicOp-04878" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-logicOp-04878"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-logicOp-04878</span><br>

If the bound graphics pipeline state was created with the
<code>VK_DYNAMIC_STATE_LOGIC_OP_EXT</code> dynamic state enabled then
<a href="chap29.html#vkCmdSetLogicOpEXT">vkCmdSetLogicOpEXT</a> <strong class="purple">must</strong> have been called in the current command
buffer prior to this drawing command and the <code>logicOp</code> <strong class="purple">must</strong> be a
valid <a href="chap29.html#VkLogicOp">VkLogicOp</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-04879" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-04879"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-04879</span><br>

If the bound graphics pipeline state was created with the
<code>VK_DYNAMIC_STATE_PRIMITIVE_RESTART_ENABLE_EXT</code> dynamic state
enabled then <a href="chap21.html#vkCmdSetPrimitiveRestartEnableEXT">vkCmdSetPrimitiveRestartEnableEXT</a> <strong class="purple">must</strong> have been
called in the current command buffer prior to this drawing command</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-primitiveFragmentShadingRateWithMultipleViewports-04552" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-primitiveFragmentShadingRateWithMultipleViewports-04552"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-primitiveFragmentShadingRateWithMultipleViewports-04552</span><br>

If the <a href="chap42.html#limits-primitiveFragmentShadingRateWithMultipleViewports"><code>primitiveFragmentShadingRateWithMultipleViewports</code></a> limit is not
supported, the bound graphics pipeline was created with the
<code>VK_DYNAMIC_STATE_VIEWPORT_WITH_COUNT_EXT</code> dynamic state enabled,
and any of the shader stages of the bound graphics pipeline write to the
<code>PrimitiveShadingRateKHR</code> built-in, then
<a href="chap26.html#vkCmdSetViewportWithCountEXT">vkCmdSetViewportWithCountEXT</a> <strong class="purple">must</strong> have been called in the current
command buffer prior to this drawing command, and the
<code>viewportCount</code> parameter of <code>vkCmdSetViewportWithCountEXT</code>
<strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-blendEnable-04727" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-blendEnable-04727"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-blendEnable-04727</span><br>

If rasterization is not disabled in the bound graphics pipeline, then
for each color attachment in the subpass, if the corresponding image
view’s <a href="chap12.html#resources-image-view-format-features">format features</a> do not
contain <code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BLEND_BIT</code>, then the
<code>blendEnable</code> member of the corresponding element of the
<code>pAttachments</code> member of <code>pColorBlendState</code> <strong class="purple">must</strong> be
<code>VK_FALSE</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-rasterizationSamples-04740" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-rasterizationSamples-04740"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-rasterizationSamples-04740</span><br>

If rasterization is not disabled in the bound graphics pipeline, and
neither the <code><a href="chap50.html#VK_AMD_mixed_attachment_samples">VK_AMD_mixed_attachment_samples</a></code> nor the
<code><a href="chap50.html#VK_NV_framebuffer_mixed_samples">VK_NV_framebuffer_mixed_samples</a></code> extensions are enabled, then
<a href="chap27.html#VkPipelineMultisampleStateCreateInfo">VkPipelineMultisampleStateCreateInfo</a>::<code>rasterizationSamples</code>
<strong class="purple">must</strong> be the same as the current subpass color and/or depth/stencil
attachments</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-04912" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-04912"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-04912</span><br>

If the bound graphics pipeline was created with both the
<code>VK_DYNAMIC_STATE_VERTEX_INPUT_EXT</code> and
<code>VK_DYNAMIC_STATE_VERTEX_INPUT_BINDING_STRIDE_EXT</code> dynamic states
enabled, then <a href="chap22.html#vkCmdSetVertexInputEXT">vkCmdSetVertexInputEXT</a> <strong class="purple">must</strong> have been called in the
current command buffer prior to this draw command</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-pStrides-04913" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-pStrides-04913"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-pStrides-04913</span><br>

If the bound graphics pipeline was created with the
<code>VK_DYNAMIC_STATE_VERTEX_INPUT_BINDING_STRIDE_EXT</code> dynamic state
enabled, but not the <code>VK_DYNAMIC_STATE_VERTEX_INPUT_EXT</code> dynamic
state enabled, then <a href="chap22.html#vkCmdBindVertexBuffers2EXT">vkCmdBindVertexBuffers2EXT</a> <strong class="purple">must</strong> have been
called in the current command buffer prior to this draw command, and the
<code>pStrides</code> parameter of <a href="chap22.html#vkCmdBindVertexBuffers2EXT">vkCmdBindVertexBuffers2EXT</a> <strong class="purple">must</strong> not
be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-04914" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-04914"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-04914</span><br>

If the bound graphics pipeline state was created with the
<code>VK_DYNAMIC_STATE_VERTEX_INPUT_EXT</code> dynamic state enabled, then
<a href="chap22.html#vkCmdSetVertexInputEXT">vkCmdSetVertexInputEXT</a> <strong class="purple">must</strong> have been called in the current
command buffer prior to this draw command</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-04007" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-04007"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-04007</span><br>

All vertex input bindings accessed via vertex input variables declared
in the vertex shader entry point’s interface <strong class="purple">must</strong> have either valid or
<a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a> buffers bound</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-04008" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-04008"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-04008</span><br>

If the <a href="chap41.html#features-nullDescriptor">nullDescriptor</a> feature is not
enabled, all vertex input bindings accessed via vertex input variables
declared in the vertex shader entry point’s interface <strong class="purple">must</strong> not be
<a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-02721" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-02721"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-02721</span><br>

For a given vertex buffer binding, any attribute data fetched <strong class="purple">must</strong> be
entirely contained within the corresponding vertex buffer binding, as
described in <a href="chap22.html#fxvertex-input">Vertex Input Description</a></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-commandBuffer-02970" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-commandBuffer-02970"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-commandBuffer-02970</span><br>

<code>commandBuffer</code> <strong class="purple">must</strong> not be a protected command buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-isPreprocessed-02908" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-isPreprocessed-02908"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-isPreprocessed-02908</span><br>

If <code>isPreprocessed</code> is <code>VK_TRUE</code> then
<a href="chap31.html#vkCmdPreprocessGeneratedCommandsNV">vkCmdPreprocessGeneratedCommandsNV</a> <strong class="purple">must</strong> have already been
executed on the device, using the same <code>pGeneratedCommandsInfo</code>
content as well as the content of the input buffers it references (all
except <a href="chap31.html#VkGeneratedCommandsInfoNV">VkGeneratedCommandsInfoNV</a>::<code>preprocessBuffer</code>).
Furthermore <code>pGeneratedCommandsInfo</code>`s <code>indirectCommandsLayout</code>
<strong class="purple">must</strong> have been created with the
<code>VK_INDIRECT_COMMANDS_LAYOUT_USAGE_EXPLICIT_PREPROCESS_BIT_NV</code> bit
set</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-pipeline-02909" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-pipeline-02909"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-pipeline-02909</span><br>

<code>VkGeneratedCommandsInfoNV</code>::<code>pipeline</code> <strong class="purple">must</strong> match the current
bound pipeline at
<code>VkGeneratedCommandsInfoNV</code>::<code>pipelineBindPoint</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-None-02910" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-None-02910"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-None-02910</span><br>

Transform feedback <strong class="purple">must</strong> not be active</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-deviceGeneratedCommands-02911" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-deviceGeneratedCommands-02911"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-deviceGeneratedCommands-02911</span><br>

The <a href="chap41.html#features-deviceGeneratedCommands"><code>VkPhysicalDeviceDeviceGeneratedCommandsFeaturesNV</code>::<code>deviceGeneratedCommands</code></a>
feature <strong class="purple">must</strong> be enabled</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-commandBuffer-parameter" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-pGeneratedCommandsInfo-parameter" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-pGeneratedCommandsInfo-parameter"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-pGeneratedCommandsInfo-parameter</span><br>
 <code>pGeneratedCommandsInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap31.html#VkGeneratedCommandsInfoNV">VkGeneratedCommandsInfoNV</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-commandBuffer-recording" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-commandBuffer-cmdpool" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteGeneratedCommandsNV-renderpass" href="chap31.html#VUID-vkCmdExecuteGeneratedCommandsNV-renderpass"></a> <span class="vuid">VUID-vkCmdExecuteGeneratedCommandsNV-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called inside of a render pass instance</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics<br>
Compute</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkGeneratedCommandsInfoNV" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_NV_device_generated_commands</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkGeneratedCommandsInfoNV {
    VkStructureType                      sType;
    <span class="directive">const</span> <span class="directive">void</span>*                          pNext;
    VkPipelineBindPoint                  pipelineBindPoint;
    VkPipeline                           pipeline;
    VkIndirectCommandsLayoutNV           indirectCommandsLayout;
    uint32_t                             streamCount;
    <span class="directive">const</span> VkIndirectCommandsStreamNV*    pStreams;
    uint32_t                             sequencesCount;
    VkBuffer                             preprocessBuffer;
    VkDeviceSize                         preprocessOffset;
    VkDeviceSize                         preprocessSize;
    VkBuffer                             sequencesCountBuffer;
    VkDeviceSize                         sequencesCountOffset;
    VkBuffer                             sequencesIndexBuffer;
    VkDeviceSize                         sequencesIndexOffset;
} VkGeneratedCommandsInfoNV;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pipelineBindPoint</code> is the <a href="chap10.html#VkPipelineBindPoint">VkPipelineBindPoint</a> used for the
<code>pipeline</code>.</p>
</li>
<li>
<p><code>pipeline</code> is the <a href="chap10.html#VkPipeline">VkPipeline</a> used in the generation and
execution process.</p>
</li>
<li>
<p><code>indirectCommandsLayout</code> is the <a href="chap31.html#VkIndirectCommandsLayoutNV">VkIndirectCommandsLayoutNV</a>
that provides the command sequence to generate.</p>
</li>
<li>
<p><code>streamCount</code> defines the number of input streams</p>
</li>
<li>
<p><code>pStreams</code> is a pointer to an array of <code>streamCount</code>
<a href="chap31.html#VkIndirectCommandsStreamNV">VkIndirectCommandsStreamNV</a> structures providing the input data for
the tokens used in <code>indirectCommandsLayout</code>.</p>
</li>
<li>
<p><code>sequencesCount</code> is the maximum number of sequences to reserve.
If <code>sequencesCountBuffer</code> is <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, this is also the
actual number of sequences generated.</p>
</li>
<li>
<p><code>preprocessBuffer</code> is the <a href="chap12.html#VkBuffer">VkBuffer</a> that is used for
preprocessing the input data for execution.
If this structure is used with <a href="chap31.html#vkCmdExecuteGeneratedCommandsNV">vkCmdExecuteGeneratedCommandsNV</a>
with its <code>isPreprocessed</code> set to <code>VK_TRUE</code>, then the preprocessing
step is skipped and data is only read from this buffer.</p>
</li>
<li>
<p><code>preprocessOffset</code> is the byte offset into <code>preprocessBuffer</code>
where the preprocessed data is stored.</p>
</li>
<li>
<p><code>preprocessSize</code> is the maximum byte size within the
<code>preprocessBuffer</code> after the <code>preprocessOffset</code> that is
available for preprocessing.</p>
</li>
<li>
<p><code>sequencesCountBuffer</code> is a <code>VkBuffer</code> in which the actual
number of sequences is provided as single <code>uint32_t</code> value.</p>
</li>
<li>
<p><code>sequencesCountOffset</code> is the byte offset into
<code>sequencesCountBuffer</code> where the count value is stored.</p>
</li>
<li>
<p><code>sequencesIndexBuffer</code> is a <code>VkBuffer</code> that encodes the used
sequence indices as <code>uint32_t</code> array.</p>
</li>
<li>
<p><code>sequencesIndexOffset</code> is the byte offset into
<code>sequencesIndexBuffer</code> where the index values start.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-pipeline-02912" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-pipeline-02912"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-pipeline-02912</span><br>

The provided <code>pipeline</code> <strong class="purple">must</strong> match the pipeline bound at execution
time</p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-indirectCommandsLayout-02913" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-indirectCommandsLayout-02913"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-indirectCommandsLayout-02913</span><br>

If the <code>indirectCommandsLayout</code> uses a token of
<code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_SHADER_GROUP_NV</code>, then the
<code>pipeline</code> <strong class="purple">must</strong> have been created with multiple shader groups</p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-indirectCommandsLayout-02914" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-indirectCommandsLayout-02914"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-indirectCommandsLayout-02914</span><br>

If the <code>indirectCommandsLayout</code> uses a token of
<code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_SHADER_GROUP_NV</code>, then the
<code>pipeline</code> <strong class="purple">must</strong> have been created with
<code>VK_PIPELINE_CREATE_INDIRECT_BINDABLE_BIT_NV</code> set in
<code>VkGraphicsPipelineCreateInfo</code>::<code>flags</code></p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-indirectCommandsLayout-02915" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-indirectCommandsLayout-02915"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-indirectCommandsLayout-02915</span><br>

If the <code>indirectCommandsLayout</code> uses a token of
<code>VK_INDIRECT_COMMANDS_TOKEN_TYPE_PUSH_CONSTANT_NV</code>, then the
<code>pipeline</code>`s <code>VkPipelineLayout</code> <strong class="purple">must</strong> match the
<a href="chap31.html#VkIndirectCommandsLayoutTokenNV">VkIndirectCommandsLayoutTokenNV</a>::<code>pushconstantPipelineLayout</code></p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-streamCount-02916" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-streamCount-02916"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-streamCount-02916</span><br>

<code>streamCount</code> <strong class="purple">must</strong> match the <code>indirectCommandsLayout</code>’s
<code>streamCount</code></p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-sequencesCount-02917" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-sequencesCount-02917"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-sequencesCount-02917</span><br>

<code>sequencesCount</code> <strong class="purple">must</strong> be less or equal to
<a href="chap42.html#VkPhysicalDeviceDeviceGeneratedCommandsPropertiesNV">VkPhysicalDeviceDeviceGeneratedCommandsPropertiesNV</a>::<code>maxIndirectSequenceCount</code>
and
<a href="chap31.html#VkGeneratedCommandsMemoryRequirementsInfoNV">VkGeneratedCommandsMemoryRequirementsInfoNV</a>::<code>maxSequencesCount</code>
that was used to determine the <code>preprocessSize</code></p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-preprocessBuffer-02918" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-preprocessBuffer-02918"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-preprocessBuffer-02918</span><br>

<code>preprocessBuffer</code> <strong class="purple">must</strong> have the
<code>VK_BUFFER_USAGE_INDIRECT_BUFFER_BIT</code> bit set in its usage flag</p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-preprocessOffset-02919" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-preprocessOffset-02919"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-preprocessOffset-02919</span><br>

<code>preprocessOffset</code> <strong class="purple">must</strong> be aligned to
<a href="chap42.html#VkPhysicalDeviceDeviceGeneratedCommandsPropertiesNV">VkPhysicalDeviceDeviceGeneratedCommandsPropertiesNV</a>::<code>minIndirectCommandsBufferOffsetAlignment</code></p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-preprocessBuffer-02971" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-preprocessBuffer-02971"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-preprocessBuffer-02971</span><br>

If <code>preprocessBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound
completely and contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-preprocessSize-02920" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-preprocessSize-02920"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-preprocessSize-02920</span><br>

<code>preprocessSize</code> <strong class="purple">must</strong> be at least equal to the memory requirement`s
size returned by <a href="chap31.html#vkGetGeneratedCommandsMemoryRequirementsNV">vkGetGeneratedCommandsMemoryRequirementsNV</a> using
the matching inputs (<code>indirectCommandsLayout</code>, …​) as within this
structure</p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-sequencesCountBuffer-02921" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-sequencesCountBuffer-02921"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-sequencesCountBuffer-02921</span><br>

<code>sequencesCountBuffer</code> <strong class="purple">can</strong> be set if the actual used count of
sequences is sourced from the provided buffer.
In that case the <code>sequencesCount</code> serves as upper bound</p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-sequencesCountBuffer-02922" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-sequencesCountBuffer-02922"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-sequencesCountBuffer-02922</span><br>

If <code>sequencesCountBuffer</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, its usage
flag <strong class="purple">must</strong> have the <code>VK_BUFFER_USAGE_INDIRECT_BUFFER_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-sequencesCountBuffer-02923" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-sequencesCountBuffer-02923"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-sequencesCountBuffer-02923</span><br>

If <code>sequencesCountBuffer</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>,
<code>sequencesCountOffset</code> <strong class="purple">must</strong> be aligned to
<code>VkPhysicalDeviceDeviceGeneratedCommandsPropertiesNV</code>::<code>minSequencesCountBufferOffsetAlignment</code></p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-sequencesCountBuffer-02972" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-sequencesCountBuffer-02972"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-sequencesCountBuffer-02972</span><br>

If <code>sequencesCountBuffer</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a> and is
non-sparse then it <strong class="purple">must</strong> be bound completely and contiguously to a
single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-sequencesIndexBuffer-02924" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-sequencesIndexBuffer-02924"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-sequencesIndexBuffer-02924</span><br>

If <code>indirectCommandsLayout</code>’s
<code>VK_INDIRECT_COMMANDS_LAYOUT_USAGE_INDEXED_SEQUENCES_BIT_NV</code> is set,
<code>sequencesIndexBuffer</code> <strong class="purple">must</strong> be set otherwise it <strong class="purple">must</strong> be
<a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a></p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-sequencesIndexBuffer-02925" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-sequencesIndexBuffer-02925"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-sequencesIndexBuffer-02925</span><br>

If <code>sequencesIndexBuffer</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, its usage
flag <strong class="purple">must</strong> have the <code>VK_BUFFER_USAGE_INDIRECT_BUFFER_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-sequencesIndexBuffer-02926" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-sequencesIndexBuffer-02926"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-sequencesIndexBuffer-02926</span><br>

If <code>sequencesIndexBuffer</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>,
<code>sequencesIndexOffset</code> <strong class="purple">must</strong> be aligned to
<code>VkPhysicalDeviceDeviceGeneratedCommandsPropertiesNV</code>::<code>minSequencesIndexBufferOffsetAlignment</code></p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-sequencesIndexBuffer-02973" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-sequencesIndexBuffer-02973"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-sequencesIndexBuffer-02973</span><br>

If <code>sequencesIndexBuffer</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a> and is
non-sparse then it <strong class="purple">must</strong> be bound completely and contiguously to a
single <code>VkDeviceMemory</code> object</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-sType-sType" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-sType-sType"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_GENERATED_COMMANDS_INFO_NV</code></p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-pNext-pNext" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-pNext-pNext"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-pipelineBindPoint-parameter" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-pipelineBindPoint-parameter"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-pipelineBindPoint-parameter</span><br>
 <code>pipelineBindPoint</code> <strong class="purple">must</strong> be a valid <a href="chap10.html#VkPipelineBindPoint">VkPipelineBindPoint</a> value</p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-pipeline-parameter" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-pipeline-parameter"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-pipeline-parameter</span><br>
 <code>pipeline</code> <strong class="purple">must</strong> be a valid <a href="chap10.html#VkPipeline">VkPipeline</a> handle</p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-indirectCommandsLayout-parameter" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-indirectCommandsLayout-parameter"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-indirectCommandsLayout-parameter</span><br>
 <code>indirectCommandsLayout</code> <strong class="purple">must</strong> be a valid <a href="chap31.html#VkIndirectCommandsLayoutNV">VkIndirectCommandsLayoutNV</a> handle</p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-pStreams-parameter" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-pStreams-parameter"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-pStreams-parameter</span><br>
 <code>pStreams</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>streamCount</code> valid <a href="chap31.html#VkIndirectCommandsStreamNV">VkIndirectCommandsStreamNV</a> structures</p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-preprocessBuffer-parameter" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-preprocessBuffer-parameter"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-preprocessBuffer-parameter</span><br>
 <code>preprocessBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-sequencesCountBuffer-parameter" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-sequencesCountBuffer-parameter"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-sequencesCountBuffer-parameter</span><br>
 If <code>sequencesCountBuffer</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>sequencesCountBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-sequencesIndexBuffer-parameter" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-sequencesIndexBuffer-parameter"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-sequencesIndexBuffer-parameter</span><br>
 If <code>sequencesIndexBuffer</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>sequencesIndexBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-streamCount-arraylength" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-streamCount-arraylength"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-streamCount-arraylength</span><br>
 <code>streamCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkGeneratedCommandsInfoNV-commonparent" href="chap31.html#VUID-VkGeneratedCommandsInfoNV-commonparent"></a> <span class="vuid">VUID-VkGeneratedCommandsInfoNV-commonparent</span><br>
 Each of <code>indirectCommandsLayout</code>, <code>pipeline</code>, <code>preprocessBuffer</code>, <code>sequencesCountBuffer</code>, and <code>sequencesIndexBuffer</code> that are valid handles of non-ignored parameters <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Referencing the functions defined in <a href="chap31.html#indirectmdslayout">Indirect Commands Layout</a>,
<code>vkCmdExecuteGeneratedCommandsNV</code> behaves as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c">uint32_t sequencesCount = sequencesCountBuffer ?
      min(maxSequencesCount, sequencesCountBuffer.load_uint32(sequencesCountOffset) :
      maxSequencesCount;


cmdProcessAllSequences(commandBuffer, pipeline,
                       indirectCommandsLayout, pIndirectCommandsStreams,
                       sequencesCount,
                       sequencesIndexBuffer, sequencesIndexOffset);

<span class="comment">// The stateful commands within indirectCommandsLayout will not</span>
<span class="comment">// affect the state of subsequent commands in the target</span>
<span class="comment">// command buffer (cmd)</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>It is important to note that the values of all state related to the
<code>pipelineBindPoint</code> used are undefined after this command.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Commands <strong class="purple">can</strong> be preprocessed prior execution using the following command:</p>
</div>
<div id="vkCmdPreprocessGeneratedCommandsNV" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_NV_device_generated_commands</span>
<span class="directive">void</span> vkCmdPreprocessGeneratedCommandsNV(
    VkCommandBuffer                             commandBuffer,
    <span class="directive">const</span> VkGeneratedCommandsInfoNV*            pGeneratedCommandsInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer which does the preprocessing.</p>
</li>
<li>
<p><code>pGeneratedCommandsInfo</code> is a pointer to an instance of the
<a href="chap31.html#VkGeneratedCommandsInfoNV">VkGeneratedCommandsInfoNV</a> structure containing parameters
affecting the preprocessing step.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdPreprocessGeneratedCommandsNV-commandBuffer-02974" href="chap31.html#VUID-vkCmdPreprocessGeneratedCommandsNV-commandBuffer-02974"></a> <span class="vuid">VUID-vkCmdPreprocessGeneratedCommandsNV-commandBuffer-02974</span><br>

<code>commandBuffer</code> <strong class="purple">must</strong> not be a protected command buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdPreprocessGeneratedCommandsNV-pGeneratedCommandsInfo-02927" href="chap31.html#VUID-vkCmdPreprocessGeneratedCommandsNV-pGeneratedCommandsInfo-02927"></a> <span class="vuid">VUID-vkCmdPreprocessGeneratedCommandsNV-pGeneratedCommandsInfo-02927</span><br>

<code>pGeneratedCommandsInfo</code>`s <code>indirectCommandsLayout</code> <strong class="purple">must</strong> have
been created with the
<code>VK_INDIRECT_COMMANDS_LAYOUT_USAGE_EXPLICIT_PREPROCESS_BIT_NV</code> bit
set</p>
</li>
<li>
<p><a id="VUID-vkCmdPreprocessGeneratedCommandsNV-deviceGeneratedCommands-02928" href="chap31.html#VUID-vkCmdPreprocessGeneratedCommandsNV-deviceGeneratedCommands-02928"></a> <span class="vuid">VUID-vkCmdPreprocessGeneratedCommandsNV-deviceGeneratedCommands-02928</span><br>

The <a href="chap41.html#features-deviceGeneratedCommands"><code>VkPhysicalDeviceDeviceGeneratedCommandsFeaturesNV</code>::<code>deviceGeneratedCommands</code></a>
feature <strong class="purple">must</strong> be enabled</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdPreprocessGeneratedCommandsNV-commandBuffer-parameter" href="chap31.html#VUID-vkCmdPreprocessGeneratedCommandsNV-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdPreprocessGeneratedCommandsNV-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdPreprocessGeneratedCommandsNV-pGeneratedCommandsInfo-parameter" href="chap31.html#VUID-vkCmdPreprocessGeneratedCommandsNV-pGeneratedCommandsInfo-parameter"></a> <span class="vuid">VUID-vkCmdPreprocessGeneratedCommandsNV-pGeneratedCommandsInfo-parameter</span><br>
 <code>pGeneratedCommandsInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap31.html#VkGeneratedCommandsInfoNV">VkGeneratedCommandsInfoNV</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdPreprocessGeneratedCommandsNV-commandBuffer-recording" href="chap31.html#VUID-vkCmdPreprocessGeneratedCommandsNV-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdPreprocessGeneratedCommandsNV-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdPreprocessGeneratedCommandsNV-commandBuffer-cmdpool" href="chap31.html#VUID-vkCmdPreprocessGeneratedCommandsNV-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdPreprocessGeneratedCommandsNV-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdPreprocessGeneratedCommandsNV-renderpass" href="chap31.html#VUID-vkCmdPreprocessGeneratedCommandsNV-renderpass"></a> <span class="vuid">VUID-vkCmdPreprocessGeneratedCommandsNV-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics<br>
Compute</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
</div></div>

<nav>
  <a rel="prev" href="chap30.html" class="nav nav-prev" aria-keyshortcuts="Left">
        <i class="fa fa-angle-left"></i>
     </a>
  <a rel="next" href="chap32.html" class="nav nav-next" aria-keyshortcuts="Right">
        <i class="fa fa-angle-right"></i>
     </a>
  <div style="clear: both"></div>
</nav>
<div id="footer" style="max-width: 100%;">
<div id="footer-text">
Version 1.2.186<br>
Last updated 2021-04-13 01:33:51 -0700
</div>
</div>



</body>
  <script>
  function isInViewport(ele) {
    const rect = ele.getBoundingClientRect();
    return (
        rect.top >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight)
    );
  }
  function yPosition (ele) {
    const rect = ele.getBoundingClientRect();
    return (rect.top - 20); // 20px above
  }
  let curr = document.getElementsByClassName('current');
  if (!isInViewport(curr[curr.length - 1])) {
    document.getElementById('toc').scrollTo({
      top: yPosition(curr[0]),
      left: 0,
      behavior: 'smooth'
    });
  }
  </script>
  </html>