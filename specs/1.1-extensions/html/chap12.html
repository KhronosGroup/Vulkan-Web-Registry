<!DOCTYPE html><html lang="en"><head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="author" content="The Khronos® Vulkan Working Group">
<title>Vulkan® 1.1.222 - A Specification (with all registered Vulkan extensions)</title>
<link rel="stylesheet" href="style0.css" type="text/css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="style1.css" type="text/css">
<link rel="stylesheet" href="style2.css" type="text/css">

<!-- dragged in by font-awesome css included by asciidoctor, but preloaded in this extension for convenience -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0" as="font" type="font/woff2" crossorigin="">

<!-- Note: Chrome needs crossorigin="" even for same-origin fonts -->
<link rel="preload" href="../katex/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Typewriter-Regular.woff2" as="font" type="font/woff2" crossorigin=""><link rel="stylesheet" href="../katex/katex.min.css">
<!--ChunkedSearchJSMarker-->
<link href="chunked.css?4" rel="stylesheet">
<script>var searchindexurl = 'search.index.js?4' + (document.title.replace(/[^0-9.]/g, ''));</script>
<script src="chunked.js?4"></script>
<link rel="stylesheet" href="style3.css" type="text/css">
<script>
    function hideElement(e){
        e.setAttribute("hidden", "");
        e.classList.add("hidden");
    }

    function unhideElement(e){
        e.classList.remove("hidden");
        e.removeAttribute("hidden");
    }

    function hideLoadableContent(){
        unhideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) hideElement(loadable);
    }

    function unhideLoadableContent(){
        hideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) unhideElement(loadable);
    }

    window.addEventListener("load", unhideLoadableContent);
</script>
<link rel="stylesheet" href="asciidoctor-chunker.css" type="text/css"></head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Vulkan<sup>®</sup> 1.1.222 - A Specification (with all registered Vulkan extensions)</h1>
<div class="details">
<span id="author" class="author">The Khronos<sup>®</sup> Vulkan Working Group</span><br>
<span id="revnumber">version 1.1.222,</span>
<span id="revdate">2022-07-21 09:30:07Z</span>
<br><span id="revremark">from git branch: github-main commit: 8dcc7469b01529600b712596a5a48ec8c710e228</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="index.html">Titlepage</a></li><li><a href="chap1.html">1. Preamble</a></li>
<li><a href="chap2.html">2. Introduction</a>
<ul class="sectlevel2">
<li><a href="chap2.html#introduction-conventions">2.1. Document Conventions</a></li>
</ul>
</li>
<li><a href="chap3.html">3. Fundamentals</a>
<ul class="sectlevel2">
<li><a href="chap3.html#fundamentals-host-environment">3.1. Host and Device Environment</a></li>
<li><a href="chap3.html#fundamentals-execmodel">3.2. Execution Model</a></li>
<li><a href="chap3.html#fundamentals-objectmodel-overview">3.3. Object Model</a></li>
<li><a href="chap3.html#fundamentals-abi">3.4. Application Binary Interface</a></li>
<li><a href="chap3.html#fundamentals-commandsyntax">3.5. Command Syntax and Duration</a></li>
<li><a href="chap3.html#fundamentals-threadingbehavior">3.6. Threading Behavior</a></li>
<li><a href="chap3.html#fundamentals-validusage">3.7. Valid Usage</a></li>
<li><a href="chap3.html#fundamentals-returncodes">3.8. <code>VkResult</code> Return Codes</a></li>
<li><a href="chap3.html#fundamentals-numerics">3.9. Numeric Representation and Computation</a></li>
<li><a href="chap3.html#fundamentals-fixedconv">3.10. Fixed-Point Data Conversions</a></li>
<li><a href="chap3.html#fundamentals-common-objects">3.11. Common Object Types</a></li>
<li><a href="chap3.html#fundamentals-api-name-aliases">3.12. API Name Aliases</a></li>
</ul>
</li>
<li><a href="chap4.html">4. Initialization</a>
<ul class="sectlevel2">
<li><a href="chap4.html#initialization-functionpointers">4.1. Command Function Pointers</a></li>
<li><a href="chap4.html#initialization-instances">4.2. Instances</a></li>
</ul>
</li>
<li><a href="chap5.html">5. Devices and Queues</a>
<ul class="sectlevel2">
<li><a href="chap5.html#devsandqueues-physical-device-enumeration">5.1. Physical Devices</a></li>
<li><a href="chap5.html#devsandqueues-devices">5.2. Devices</a></li>
<li><a href="chap5.html#devsandqueues-queues">5.3. Queues</a></li>
</ul>
</li>
<li><a href="chap6.html">6. Command Buffers</a>
<ul class="sectlevel2">
<li><a href="chap6.html#commandbuffers-lifecycle">6.1. Command Buffer Lifecycle</a></li>
<li><a href="chap6.html#commandbuffers-pools">6.2. Command Pools</a></li>
<li><a href="chap6.html#commandbuffer-allocation">6.3. Command Buffer Allocation and Management</a></li>
<li><a href="chap6.html#commandbuffers-recording">6.4. Command Buffer Recording</a></li>
<li><a href="chap6.html#commandbuffers-submission">6.5. Command Buffer Submission</a></li>
<li><a href="chap6.html#commandbuffers-submission-progress">6.6. Queue Forward Progress</a></li>
<li><a href="chap6.html#commandbuffers-secondary">6.7. Secondary Command Buffer Execution</a></li>
<li><a href="chap6.html#commandbuffers-devicemask">6.8. Command Buffer Device Mask</a></li>
</ul>
</li>
<li><a href="chap7.html">7. Synchronization and Cache Control</a>
<ul class="sectlevel2">
<li><a href="chap7.html#synchronization-dependencies">7.1. Execution and Memory Dependencies</a></li>
<li><a href="chap7.html#synchronization-implicit">7.2. Implicit Synchronization Guarantees</a></li>
<li><a href="chap7.html#synchronization-fences">7.3. Fences</a></li>
<li><a href="chap7.html#synchronization-semaphores">7.4. Semaphores</a></li>
<li><a href="chap7.html#synchronization-events">7.5. Events</a></li>
<li><a href="chap7.html#synchronization-pipeline-barriers">7.6. Pipeline Barriers</a></li>
<li><a href="chap7.html#synchronization-memory-barriers">7.7. Memory Barriers</a></li>
<li><a href="chap7.html#synchronization-wait-idle">7.8. Wait Idle Operations</a></li>
<li><a href="chap7.html#synchronization-submission-host-writes">7.9. Host Write Ordering Guarantees</a></li>
<li><a href="chap7.html#synchronization-device-group">7.10. Synchronization and Multiple Physical Devices</a></li>
<li><a href="chap7.html#calibrated-timestamps">7.11. Calibrated timestamps</a></li>
</ul>
</li>
<li><a href="chap8.html">8. Render Pass</a>
<ul class="sectlevel2">
<li><a href="chap8.html#renderpass-creation">8.1. Render Pass Creation</a></li>
<li><a href="chap8.html#renderpass-compatibility">8.2. Render Pass Compatibility</a></li>
<li><a href="chap8.html#_framebuffers">8.3. Framebuffers</a></li>
<li><a href="chap8.html#renderpass-commands">8.4. Render Pass Commands</a></li>
<li><a href="chap8.html#renderpass-creation-feedback">8.5. Render Pass Creation Feedback</a></li>
</ul>
</li>
<li><a href="chap9.html">9. Shaders</a>
<ul class="sectlevel2">
<li><a href="chap9.html#shader-modules">9.1. Shader Modules</a></li>
<li><a href="chap9.html#shaders-identifiers">9.2. Shader Module Identifiers</a></li>
<li><a href="chap9.html#shaders-execution">9.3. Shader Execution</a></li>
<li><a href="chap9.html#shaders-execution-memory-ordering">9.4. Shader Memory Access Ordering</a></li>
<li><a href="chap9.html#shaders-inputs">9.5. Shader Inputs and Outputs</a></li>
<li><a href="chap9.html#shaders-task">9.6. Task Shaders</a></li>
<li><a href="chap9.html#shaders-mesh">9.7. Mesh Shaders</a></li>
<li><a href="chap9.html#shaders-vertex">9.8. Vertex Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-control">9.9. Tessellation Control Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-evaluation">9.10. Tessellation Evaluation Shaders</a></li>
<li><a href="chap9.html#shaders-geometry">9.11. Geometry Shaders</a></li>
<li><a href="chap9.html#shaders-fragment">9.12. Fragment Shaders</a></li>
<li><a href="chap9.html#shaders-compute">9.13. Compute Shaders</a></li>
<li><a href="chap9.html#shaders-ray-generation">9.14. Ray Generation Shaders</a></li>
<li><a href="chap9.html#shaders-intersection">9.15. Intersection Shaders</a></li>
<li><a href="chap9.html#shaders-any-hit">9.16. Any-Hit Shaders</a></li>
<li><a href="chap9.html#shaders-closest-hit">9.17. Closest Hit Shaders</a></li>
<li><a href="chap9.html#shaders-miss">9.18. Miss Shaders</a></li>
<li><a href="chap9.html#shaders-callable">9.19. Callable Shaders</a></li>
<li><a href="chap9.html#shaders-interpolation-decorations">9.20. Interpolation decorations</a></li>
<li><a href="chap9.html#shaders-staticuse">9.21. Static Use</a></li>
<li><a href="chap9.html#shaders-scope">9.22. Scope</a></li>
<li><a href="chap9.html#shaders-group-operations">9.23. Group Operations</a></li>
<li><a href="chap9.html#shaders-quad-operations">9.24. Quad Group Operations</a></li>
<li><a href="chap9.html#shaders-derivative-operations">9.25. Derivative Operations</a></li>
<li><a href="chap9.html#shaders-helper-invocations">9.26. Helper Invocations</a></li>
<li><a href="chap9.html#_cooperative_matrices">9.27. Cooperative Matrices</a></li>
<li><a href="chap9.html#shaders-validation-cache">9.28. Validation Cache</a></li>
</ul>
</li>
<li><a href="chap10.html">10. Pipelines</a>
<ul class="sectlevel2">
<li><a href="chap10.html#pipelines-compute">10.1. Compute Pipelines</a></li>
<li><a href="chap10.html#pipelines-graphics">10.2. Graphics Pipelines</a></li>
<li><a href="chap10.html#pipelines-ray-tracing">10.3. Ray Tracing Pipelines</a></li>
<li><a href="chap10.html#pipelines-destruction">10.4. Pipeline Destruction</a></li>
<li><a href="chap10.html#pipelines-multiple">10.5. Multiple Pipeline Creation</a></li>
<li><a href="chap10.html#pipelines-pipeline-derivatives">10.6. Pipeline Derivatives</a></li>
<li><a href="chap10.html#pipelines-cache">10.7. Pipeline Cache</a></li>
<li><a href="chap10.html#pipelines-specialization-constants">10.8. Specialization Constants</a></li>
<li><a href="chap10.html#pipeline-library">10.9. Pipeline Libraries</a></li>
<li><a href="chap10.html#pipelines-binding">10.10. Pipeline Binding</a></li>
<li><a href="chap10.html#pipelines-dynamic-state">10.11. Dynamic State</a></li>
<li><a href="chap10.html#pipelines-shader-information">10.12. Pipeline Properties and Shader Information</a></li>
<li><a href="chap10.html#pipelines-compiler-control">10.13. Pipeline Compiler Control</a></li>
<li><a href="chap10.html#pipelines-creation-feedback">10.14. Pipeline Creation Feedback</a></li>
</ul>
</li>
<li><a href="chap11.html">11. Memory Allocation</a>
<ul class="sectlevel2">
<li><a href="chap11.html#memory-host">11.1. Host Memory</a></li>
<li><a href="chap11.html#memory-device">11.2. Device Memory</a></li>
</ul>
</li>
<li class="current"><a href="chap12.html">12. Resource Creation</a>
<ul class="sectlevel2">
<li class="current"><a href="chap12.html#resources-buffers">12.1. Buffers</a></li>
<li class="current"><a href="chap12.html#resources-buffer-views">12.2. Buffer Views</a></li>
<li class="current"><a href="chap12.html#resources-images">12.3. Images</a></li>
<li class="current"><a href="chap12.html#resources-image-layouts">12.4. Image Layouts</a></li>
<li class="current"><a href="chap12.html#resources-image-views">12.5. Image Views</a></li>
<li class="current"><a href="chap12.html#resources-acceleration-structures">12.6. Acceleration Structures</a></li>
<li class="current"><a href="chap12.html#resources-association">12.7. Resource Memory Association</a></li>
<li class="current"><a href="chap12.html#resources-sharing">12.8. Resource Sharing Mode</a></li>
<li class="current"><a href="chap12.html#resources-memory-aliasing">12.9. Memory Aliasing</a></li>
<li class="current"><a href="chap12.html#resources-buffer-collection-fuchsia">12.10. Buffer Collections</a></li>
</ul>
</li>
<li><a href="chap13.html">13. Samplers</a>
<ul class="sectlevel2">
<li><a href="chap13.html#samplers-YCbCr-conversion">13.1. Sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></li>
</ul>
</li>
<li><a href="chap14.html">14. Resource Descriptors</a>
<ul class="sectlevel2">
<li><a href="chap14.html#descriptorsets-types">14.1. Descriptor Types</a></li>
<li><a href="chap14.html#descriptorsets-sets">14.2. Descriptor Sets</a></li>
<li><a href="chap14.html#descriptorsets-physical-storage-buffer">14.3. Physical Storage Buffer Access</a></li>
</ul>
</li>
<li><a href="chap15.html">15. Shader Interfaces</a>
<ul class="sectlevel2">
<li><a href="chap15.html#interfaces-iointerfaces">15.1. Shader Input and Output Interfaces</a></li>
<li><a href="chap15.html#interfaces-vertexinput">15.2. Vertex Input Interface</a></li>
<li><a href="chap15.html#interfaces-fragmentoutput">15.3. Fragment Output Interface</a></li>
<li><a href="chap15.html#interfaces-inputattachment">15.4. Fragment Input Attachment Interface</a></li>
<li><a href="chap15.html#interfaces-raypipeline">15.5. Ray Tracing Pipeline Interface</a></li>
<li><a href="chap15.html#interfaces-resources">15.6. Shader Resource Interface</a></li>
<li><a href="chap15.html#interfaces-builtin-variables">15.7. Built-In Variables</a></li>
</ul>
</li>
<li><a href="chap16.html">16. Image Operations</a>
<ul class="sectlevel2">
<li><a href="chap16.html#_image_operations_overview">16.1. Image Operations Overview</a></li>
<li><a href="chap16.html#_conversion_formulas">16.2. Conversion Formulas</a></li>
<li><a href="chap16.html#_texel_input_operations">16.3. Texel Input Operations</a></li>
<li><a href="chap16.html#_texel_output_operations">16.4. Texel Output Operations</a></li>
<li><a href="chap16.html#textures-normalized-operations">16.5. Normalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#_unnormalized_texel_coordinate_operations">16.6. Unnormalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-integer-coordinate-operations">16.7. Integer Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-sample-operations">16.8. Image Sample Operations</a></li>
<li><a href="chap16.html#textures-footprint">16.9. Texel Footprint Evaluation</a></li>
<li><a href="chap16.html#textures-weightimage">16.10. Weight Image Sampling</a></li>
<li><a href="chap16.html#textures-blockmatch">16.11. Block Matching</a></li>
<li><a href="chap16.html#textures-boxfilter">16.12. Box Filter Sampling</a></li>
<li><a href="chap16.html#textures-instructions">16.13. Image Operation Steps</a></li>
<li><a href="chap16.html#textures-queries">16.14. Image Query Instructions</a></li>
</ul>
</li>
<li><a href="chap17.html">17. Fragment Density Map Operations</a>
<ul class="sectlevel2">
<li><a href="chap17.html#_fragment_density_map_operations_overview">17.1. Fragment Density Map Operations Overview</a></li>
<li><a href="chap17.html#fragmentdensitymap-fetch-density-value">17.2. Fetch Density Value</a></li>
<li><a href="chap17.html#fragmentdensitymap-conversion-to-fragment-area">17.3. Fragment Area Conversion</a></li>
</ul>
</li>
<li><a href="chap18.html">18. Queries</a>
<ul class="sectlevel2">
<li><a href="chap18.html#queries-pools">18.1. Query Pools</a></li>
<li><a href="chap18.html#queries-operation">18.2. Query Operation</a></li>
<li><a href="chap18.html#queries-occlusion">18.3. Occlusion Queries</a></li>
<li><a href="chap18.html#queries-pipestats">18.4. Pipeline Statistics Queries</a></li>
<li><a href="chap18.html#queries-timestamps">18.5. Timestamp Queries</a></li>
<li><a href="chap18.html#queries-performance">18.6. Performance Queries</a></li>
<li><a href="chap18.html#queries-transform-feedback">18.7. Transform Feedback Queries</a></li>
<li><a href="chap18.html#queries-primitives-generated">18.8. Primitives Generated Queries</a></li>
<li><a href="chap18.html#queries-performance-intel">18.9. Intel performance queries</a></li>
<li><a href="chap18.html#queries-result-status-only">18.10. Result Status Queries</a></li>
<li><a href="chap18.html#queries-video-encode-bitstream-buffer-range">18.11. Video Encode Bitstream Buffer Range</a></li>
</ul>
</li>
<li><a href="chap19.html">19. Clear Commands</a>
<ul class="sectlevel2">
<li><a href="chap19.html#clears-outside">19.1. Clearing Images Outside A Render Pass Instance</a></li>
<li><a href="chap19.html#clears-inside">19.2. Clearing Images Inside A Render Pass Instance</a></li>
<li><a href="chap19.html#clears-values">19.3. Clear Values</a></li>
<li><a href="chap19.html#clears-filling-buffers">19.4. Filling Buffers</a></li>
<li><a href="chap19.html#clears-updating-buffers">19.5. Updating Buffers</a></li>
</ul>
</li>
<li><a href="chap20.html">20. Copy Commands</a>
<ul class="sectlevel2">
<li><a href="chap20.html#copies-buffers">20.1. Copying Data Between Buffers</a></li>
<li><a href="chap20.html#copies-images">20.2. Copying Data Between Images</a></li>
<li><a href="chap20.html#copies-buffers-images">20.3. Copying Data Between Buffers and Images</a></li>
<li><a href="chap20.html#copies-imagescaling">20.4. Image Copies with Scaling</a></li>
<li><a href="chap20.html#copies-resolve">20.5. Resolving Multisample Images</a></li>
<li><a href="chap20.html#copies-buffer-markers">20.6. Buffer Markers</a></li>
</ul>
</li>
<li><a href="chap21.html">21. Drawing Commands</a>
<ul class="sectlevel2">
<li><a href="chap21.html#drawing-primitive-topologies">21.1. Primitive Topologies</a></li>
<li><a href="chap21.html#drawing-primitive-order">21.2. Primitive Order</a></li>
<li><a href="chap21.html#drawing-primitive-shading">21.3. Programmable Primitive Shading</a></li>
<li><a href="chap21.html#drawing-conditional-rendering">21.4. Conditional Rendering</a></li>
<li><a href="chap21.html#drawing-mesh-shading">21.5. Programmable Mesh Shading</a></li>
</ul>
</li>
<li><a href="chap22.html">22. Fixed-Function Vertex Processing</a>
<ul class="sectlevel2">
<li><a href="chap22.html#fxvertex-attrib">22.1. Vertex Attributes</a></li>
<li><a href="chap22.html#fxvertex-input">22.2. Vertex Input Description</a></li>
<li><a href="chap22.html#fxvertex-attribute_divisor">22.3. Vertex Attribute Divisor in Instanced Rendering</a></li>
<li><a href="chap22.html#fxvertex-input-address-calculation">22.4. Vertex Input Address Calculation</a></li>
</ul>
</li>
<li><a href="chap23.html">23. Tessellation</a>
<ul class="sectlevel2">
<li><a href="chap23.html#_tessellator">23.1. Tessellator</a></li>
<li><a href="chap23.html#_tessellator_patch_discard">23.2. Tessellator Patch Discard</a></li>
<li><a href="chap23.html#tessellation-tessellator-spacing">23.3. Tessellator Spacing</a></li>
<li><a href="chap23.html#tessellation-primitive-order">23.4. Tessellation Primitive Ordering</a></li>
<li><a href="chap23.html#tessellation-vertex-winding-order">23.5. Tessellator Vertex Winding Order</a></li>
<li><a href="chap23.html#tessellation-triangle-tessellation">23.6. Triangle Tessellation</a></li>
<li><a href="chap23.html#tessellation-quad-tessellation">23.7. Quad Tessellation</a></li>
<li><a href="chap23.html#tessellation-isoline-tessellation">23.8. Isoline Tessellation</a></li>
<li><a href="chap23.html#tessellation-point-mode">23.9. Tessellation Point Mode</a></li>
<li><a href="chap23.html#_tessellation_pipeline_state">23.10. Tessellation Pipeline State</a></li>
</ul>
</li>
<li><a href="chap24.html">24. Geometry Shading</a>
<ul class="sectlevel2">
<li><a href="chap24.html#geometry-input">24.1. Geometry Shader Input Primitives</a></li>
<li><a href="chap24.html#geometry-output">24.2. Geometry Shader Output Primitives</a></li>
<li><a href="chap24.html#geometry-invocations">24.3. Multiple Invocations of Geometry Shaders</a></li>
<li><a href="chap24.html#geometry-ordering">24.4. Geometry Shader Primitive Ordering</a></li>
<li><a href="chap24.html#geometry-passthrough">24.5. Geometry Shader Passthrough</a></li>
</ul>
</li>
<li><a href="chap25.html">25. Mesh Shading</a>
<ul class="sectlevel2">
<li><a href="chap25.html#mesh-task-input">25.1. Task Shader Input</a></li>
<li><a href="chap25.html#mesh-task-output">25.2. Task Shader Output</a></li>
<li><a href="chap25.html#mesh-generation">25.3. Mesh Generation</a></li>
<li><a href="chap25.html#mesh-input">25.4. Mesh Shader Input</a></li>
<li><a href="chap25.html#mesh-output">25.5. Mesh Shader Output Primitives</a></li>
<li><a href="chap25.html#mesh-output-perview">25.6. Mesh Shader Per-View Outputs</a></li>
<li><a href="chap25.html#mesh-ordering">25.7. Mesh Shader Primitive Ordering</a></li>
</ul>
</li>
<li><a href="chap26.html">26. Fixed-Function Vertex Post-Processing</a>
<ul class="sectlevel2">
<li><a href="chap26.html#vertexpostproc-transform-feedback">26.1. Transform Feedback</a></li>
<li><a href="chap26.html#vertexpostproc-viewport-swizzle">26.2. Viewport Swizzle</a></li>
<li><a href="chap26.html#vertexpostproc-flatshading">26.3. Flat Shading</a></li>
<li><a href="chap26.html#vertexpostproc-clipping">26.4. Primitive Clipping</a></li>
<li><a href="chap26.html#vertexpostproc-clipping-shader-outputs">26.5. Clipping Shader Outputs</a></li>
<li><a href="chap26.html#vertexpostproc-viewportwscaling">26.6. Controlling Viewport W Scaling</a></li>
<li><a href="chap26.html#vertexpostproc-coord-transform">26.7. Coordinate Transformations</a></li>
<li><a href="chap26.html#vertexpostproc-renderpass-transform">26.8. Render Pass Transform</a></li>
<li><a href="chap26.html#vertexpostproc-viewport">26.9. Controlling the Viewport</a></li>
</ul>
</li>
<li><a href="chap27.html">27. Rasterization</a>
<ul class="sectlevel2">
<li><a href="chap27.html#primsrast-discard">27.1. Discarding Primitives Before Rasterization</a></li>
<li><a href="chap27.html#primsrast-stream">27.2. Controlling the Vertex Stream Used for Rasterization</a></li>
<li><a href="chap27.html#primsrast-order">27.3. Rasterization Order</a></li>
<li><a href="chap27.html#primsrast-multisampling">27.4. Multisampling</a></li>
<li><a href="chap27.html#primsrast-samplelocations">27.5. Custom Sample Locations</a></li>
<li><a href="chap27.html#primsrast-fragment-shading-rate">27.6. Fragment Shading Rates</a></li>
<li><a href="chap27.html#primsrast-shading-rate-image">27.7. Shading Rate Image</a></li>
<li><a href="chap27.html#primsrast-sampleshading">27.8. Sample Shading</a></li>
<li><a href="chap27.html#primsrast-barycentric">27.9. Barycentric Interpolation</a></li>
<li><a href="chap27.html#primsrast-points">27.10. Points</a></li>
<li><a href="chap27.html#primsrast-lines">27.11. Line Segments</a></li>
<li><a href="chap27.html#primsrast-polygons">27.12. Polygons</a></li>
</ul>
</li>
<li><a href="chap28.html">28. Fragment Operations</a>
<ul class="sectlevel2">
<li><a href="chap28.html#fragops-discard-rectangles">28.1. Discard Rectangles Test</a></li>
<li><a href="chap28.html#fragops-scissor">28.2. Scissor Test</a></li>
<li><a href="chap28.html#fragops-exclusive-scissor">28.3. Exclusive Scissor Test</a></li>
<li><a href="chap28.html#fragops-samplemask">28.4. Sample Mask Test</a></li>
<li><a href="chap28.html#fragops-shader">28.5. Fragment Shading</a></li>
<li><a href="chap28.html#fragops-covg">28.6. Multisample Coverage</a></li>
<li><a href="chap28.html#fragops-ds-state">28.7. Depth and Stencil Operations</a></li>
<li><a href="chap28.html#fragops-dbt">28.8. Depth Bounds Test</a></li>
<li><a href="chap28.html#fragops-stencil">28.9. Stencil Test</a></li>
<li><a href="chap28.html#fragops-depth">28.10. Depth Test</a></li>
<li><a href="chap28.html#fragops-rep-frag-test">28.11. Representative Fragment Test</a></li>
<li><a href="chap28.html#fragops-samplecount">28.12. Sample Counting</a></li>
<li><a href="chap28.html#fragops-coverage-to-color">28.13. Fragment Coverage To Color</a></li>
<li><a href="chap28.html#fragops-coverage-reduction">28.14. Coverage Reduction</a></li>
</ul>
</li>
<li><a href="chap29.html">29. The Framebuffer</a>
<ul class="sectlevel2">
<li><a href="chap29.html#framebuffer-blending">29.1. Blending</a></li>
<li><a href="chap29.html#framebuffer-logicop">29.2. Logical Operations</a></li>
<li><a href="chap29.html#framebuffer-color-write-mask">29.3. Color Write Mask</a></li>
<li><a href="chap29.html#framebuffer-color-write-enable">29.4. Color Write Enable</a></li>
<li><a href="chap29.html#framebuffer-queries">29.5. Framebuffer Query Instructions</a></li>
</ul>
</li>
<li><a href="chap30.html">30. Dispatching Commands</a></li>
<li><a href="chap31.html">31. Device-Generated Commands</a>
<ul class="sectlevel2">
<li><a href="chap31.html#indirectmdslayout">31.1. Indirect Commands Layout</a></li>
<li><a href="chap31.html#_indirect_commands_generation_and_execution">31.2. Indirect Commands Generation And Execution</a></li>
</ul>
</li>
<li><a href="chap32.html">32. Sparse Resources</a>
<ul class="sectlevel2">
<li><a href="chap32.html#sparsememory-sparseresourcefeatures">32.1. Sparse Resource Features</a></li>
<li><a href="chap32.html#sparsememory-fully-resident">32.2. Sparse Buffers and Fully-Resident Images</a></li>
<li><a href="chap32.html#sparsememory-partially-resident-buffers">32.3. Sparse Partially-Resident Buffers</a></li>
<li><a href="chap32.html#sparsememory-partially-resident-images">32.4. Sparse Partially-Resident Images</a></li>
<li><a href="chap32.html#sparsememory-sparse-memory-aliasing">32.5. Sparse Memory Aliasing</a></li>
<li><a href="chap32.html#_sparse_resource_implementation_guidelines_informative">32.6. Sparse Resource Implementation Guidelines (Informative)</a></li>
<li><a href="chap32.html#sparsememory-resourceapi">32.7. Sparse Resource API</a></li>
</ul>
</li>
<li><a href="chap33.html">33. Window System Integration (WSI)</a>
<ul class="sectlevel2">
<li><a href="chap33.html#_wsi_platform">33.1. WSI Platform</a></li>
<li><a href="chap33.html#_wsi_surface">33.2. WSI Surface</a></li>
<li><a href="chap33.html#display">33.3. Presenting Directly to Display Devices</a></li>
<li><a href="chap33.html#_querying_for_wsi_support">33.4. Querying for WSI Support</a></li>
<li><a href="chap33.html#_surface_queries">33.5. Surface Queries</a></li>
<li><a href="chap33.html#_full_screen_exclusive_control">33.6. Full Screen Exclusive Control</a></li>
<li><a href="chap33.html#_device_group_queries">33.7. Device Group Queries</a></li>
<li><a href="chap33.html#_display_timing_queries">33.8. Display Timing Queries</a></li>
<li><a href="chap33.html#present-wait">33.9. Present Wait</a></li>
<li><a href="chap33.html#_wsi_swapchain">33.10. WSI Swapchain</a></li>
<li><a href="chap33.html#_hdr_metadata">33.11. Hdr Metadata</a></li>
</ul>
</li>
<li><a href="chap34.html">34. Deferred Host Operations</a>
<ul class="sectlevel2">
<li><a href="chap34.html#deferred-host-operations-requesting">34.1. Requesting Deferral</a></li>
<li><a href="chap34.html#_deferred_host_operations_api">34.2. Deferred Host Operations API</a></li>
</ul>
</li>
<li><a href="chap35.html">35. Private Data</a></li>
<li><a href="chap36.html">36. Acceleration Structures</a>
<ul class="sectlevel2">
<li><a href="chap36.html#acceleration-structure-def">36.1. Acceleration Structures</a></li>
<li><a href="chap36.html#host-acceleration-structure">36.2. Host Acceleration Structure Operations</a></li>
</ul>
</li>
<li><a href="chap37.html">37. Ray Traversal</a>
<ul class="sectlevel2">
<li><a href="chap37.html#ray-intersection-candidate-determination">37.1. Ray Intersection Candidate Determination</a></li>
<li><a href="chap37.html#ray-intersection-culling">37.2. Ray Intersection Culling</a></li>
<li><a href="chap37.html#ray-intersection-confirmation">37.3. Ray Intersection Confirmation</a></li>
<li><a href="chap37.html#ray-closest-hit-determination">37.4. Ray Closest Hit Determination</a></li>
<li><a href="chap37.html#ray-result-determination">37.5. Ray Result Determination</a></li>
</ul>
</li>
<li><a href="chap38.html">38. Ray Tracing</a>
<ul class="sectlevel2">
<li><a href="chap38.html#ray-tracing-shader-call">38.1. Shader Call Instructions</a></li>
<li><a href="chap38.html#ray-tracing-commands">38.2. Ray Tracing Commands</a></li>
<li><a href="chap38.html#shader-binding-table">38.3. Shader Binding Table</a></li>
<li><a href="chap38.html#ray-tracing-pipeline-stack">38.4. Ray Tracing Pipeline Stack</a></li>
</ul>
</li>
<li><a href="chap39.html">39. Video Decode and Encode Operations</a>
<ul class="sectlevel2">
<li><a href="chap39.html#_technical_terminology_and_semantics">39.1. Technical Terminology and Semantics</a></li>
<li><a href="chap39.html#_introduction">39.2. Introduction</a></li>
<li><a href="chap39.html#video-physical-device-capabilities">39.3. Video Physical Device Capabilities</a></li>
<li><a href="chap39.html#video-session-objects">39.4. Video Session Objects</a></li>
<li><a href="chap39.html#video-decode-operations">39.5. Video Decode Operations</a></li>
<li><a href="chap39.html#decode-h264">39.6. Video Decode of AVC (ITU-T H.264)</a></li>
<li><a href="chap39.html#decode-h265">39.7. Video Decode of HEVC (ITU-T H.265)</a></li>
<li><a href="chap39.html#video-encode-operations">39.8. Video Encode Operations</a></li>
<li><a href="chap39.html#encode-h264">39.9. Encode H.264</a></li>
<li><a href="chap39.html#encode-h265">39.10. Encode H.265</a></li>
</ul>
</li>
<li><a href="chap40.html">40. Extending Vulkan</a>
<ul class="sectlevel2">
<li><a href="chap40.html#extendingvulkan-instanceanddevicefunctionality">40.1. Instance and Device Functionality</a></li>
<li><a href="chap40.html#extendingvulkan-coreversions">40.2. Core Versions</a></li>
<li><a href="chap40.html#extendingvulkan-layers">40.3. Layers</a></li>
<li><a href="chap40.html#extendingvulkan-extensions">40.4. Extensions</a></li>
<li><a href="chap40.html#extendingvulkan-extensions-extensiondependencies">40.5. Extension Dependencies</a></li>
<li><a href="chap40.html#_compatibility_guarantees_informative">40.6. Compatibility Guarantees (Informative)</a></li>
</ul>
</li>
<li><a href="chap41.html">41. Features</a>
<ul class="sectlevel2">
<li><a href="chap41.html#features-requirements">41.1. Feature Requirements</a></li>
</ul>
</li>
<li><a href="chap42.html">42. Limits</a>
<ul class="sectlevel2">
<li><a href="chap42.html#limits-minmax">42.1. Limit Requirements</a></li>
<li><a href="chap42.html#limits-multisample">42.2. Additional Multisampling Capabilities</a></li>
</ul>
</li>
<li><a href="chap43.html">43. Formats</a>
<ul class="sectlevel2">
<li><a href="chap43.html#formats-definition">43.1. Format Definition</a></li>
<li><a href="chap43.html#formats-properties">43.2. Format Properties</a></li>
<li><a href="chap43.html#features-required-format-support">43.3. Required Format Support</a></li>
</ul>
</li>
<li><a href="chap44.html">44. Additional Capabilities</a>
<ul class="sectlevel2">
<li><a href="chap44.html#capabilities-image">44.1. Additional Image Capabilities</a></li>
<li><a href="chap44.html#capabilities-buffer">44.2. Additional Buffer Capabilities</a></li>
<li><a href="chap44.html#capabilities-semaphore">44.3. Optional Semaphore Capabilities</a></li>
<li><a href="chap44.html#capabilities-fence">44.4. Optional Fence Capabilities</a></li>
<li><a href="chap44.html#features-timestamp-calibration">44.5. Timestamp Calibration Capabilities</a></li>
</ul>
</li>
<li><a href="chap45.html">45. Debugging</a>
<ul class="sectlevel2">
<li><a href="chap45.html#debugging-debug-utils">45.1. Debug Utilities</a></li>
<li><a href="chap45.html#debugging-debug-markers">45.2. Debug Markers</a></li>
<li><a href="chap45.html#debugging-debug-report-callbacks">45.3. Debug Report Callbacks</a></li>
<li><a href="chap45.html#_device_loss_debugging">45.4. Device Loss Debugging</a></li>
<li><a href="chap45.html#debugging-tooling-info">45.5. Active Tooling Information</a></li>
</ul>
</li>
<li><a href="chap46.html">Appendix A: Vulkan Environment for SPIR-V</a>
<ul class="sectlevel2">
<li><a href="chap46.html#_versions_and_formats">Versions and Formats</a></li>
<li><a href="chap46.html#spirvenv-capabilities">Capabilities</a></li>
<li><a href="chap46.html#spirvenv-module-validation">Validation Rules within a Module</a></li>
<li><a href="chap46.html#spirvenv-precision-operation">Precision and Operation of SPIR-V Instructions</a></li>
<li><a href="chap46.html#spirvenv-image-signedness">Signedness of SPIR-V Image Accesses</a></li>
<li><a href="chap46.html#spirvenv-format-type-matching">Image Format and Type Matching</a></li>
<li><a href="chap46.html#spirvenv-image-formats">Compatibility Between SPIR-V Image Formats And Vulkan Formats</a></li>
</ul>
</li>
<li><a href="chap47.html">Appendix B: Memory Model</a>
<ul class="sectlevel2">
<li><a href="chap47.html#memory-model-agent">Agent</a></li>
<li><a href="chap47.html#memory-model-memory-location">Memory Location</a></li>
<li><a href="chap47.html#memory-model-allocation">Allocation</a></li>
<li><a href="chap47.html#memory-model-memory-operation">Memory Operation</a></li>
<li><a href="chap47.html#memory-model-references">Reference</a></li>
<li><a href="chap47.html#memory-model-program-order">Program-Order</a></li>
<li><a href="chap47.html#shader-call-related">Shader Call Related</a></li>
<li><a href="chap47.html#shader-call-order">Shader Call Order</a></li>
<li><a href="chap47.html#memory-model-scope">Scope</a></li>
<li><a href="chap47.html#memory-model-atomic-operation">Atomic Operation</a></li>
<li><a href="chap47.html#memory-model-scoped-modification-order">Scoped Modification Order</a></li>
<li><a href="chap47.html#memory-model-memory-semantics">Memory Semantics</a></li>
<li><a href="chap47.html#memory-model-release-sequence">Release Sequence</a></li>
<li><a href="chap47.html#memory-model-synchronizes-with">Synchronizes-With</a></li>
<li><a href="chap47.html#memory-model-system-synchronizes-with">System-Synchronizes-With</a></li>
<li><a href="chap47.html#memory-model-non-private">Private vs. Non-Private</a></li>
<li><a href="chap47.html#memory-model-inter-thread-happens-before">Inter-Thread-Happens-Before</a></li>
<li><a href="chap47.html#memory-model-happens-before">Happens-Before</a></li>
<li><a href="chap47.html#memory-model-availability-visibility">Availability and Visibility</a></li>
<li><a href="chap47.html#memory-model-vulkan-availability-visibility">Availability, Visibility, and Domain Operations</a></li>
<li><a href="chap47.html#memory-model-availability-visibility-semantics">Availability and Visibility Semantics</a></li>
<li><a href="chap47.html#memory-model-instruction-av-vis">Per-Instruction Availability and Visibility Semantics</a></li>
<li><a href="chap47.html#memory-model-location-ordered">Location-Ordered</a></li>
<li><a href="chap47.html#memory-model-access-data-race">Data Race</a></li>
<li><a href="chap47.html#memory-model-visible-to">Visible-To</a></li>
<li><a href="chap47.html#memory-model-acyclicity">Acyclicity</a></li>
<li><a href="chap47.html#memory-model-shader-io">Shader I/O</a></li>
<li><a href="chap47.html#memory-model-deallocation">Deallocation</a></li>
<li><a href="chap47.html#memory-model-informative-descriptions">Descriptions (Informative)</a></li>
<li><a href="chap47.html#memory-model-tessellation-output-ordering">Tessellation Output Ordering</a></li>
<li><a href="chap47.html#memory-model-cooperative-matrix">Cooperative Matrix Memory Access</a></li>
</ul>
</li>
<li><a href="chap48.html">Appendix C: Compressed Image Formats</a>
<ul class="sectlevel2">
<li><a href="chap48.html#appendix-compressedtex-bc">Block-Compressed Image Formats</a></li>
<li><a href="chap48.html#appendix-compressedtex-etc2">ETC Compressed Image Formats</a></li>
<li><a href="chap48.html#appendix-compressedtex-astc">ASTC Compressed Image Formats</a></li>
<li><a href="chap48.html#appendix-compressedtex-pvrtc">PVRTC Compressed Image Formats</a></li>
</ul>
</li>
<li><a href="chap49.html">Appendix D: Core Revisions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap49.html#versions-1.1">Version 1.1</a></li>
<li><a href="chap49.html#versions-1.0">Version 1.0</a></li>
</ul>
</li>
<li><a href="chap50.html">Appendix E: Layers &amp; Extensions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap50.html#extension-appendices-list">List of Current Extensions</a></li>
<li><a href="chap50.html#provisional-extension-appendices-list">List of Provisional Extensions</a></li>
<li><a href="chap50.html#deprecated-extension-appendices-list">List of Deprecated Extensions</a></li>
</ul>
</li>
<li><a href="chap51.html">Appendix F: API Boilerplate</a>
<ul class="sectlevel2">
<li><a href="chap51.html#boilerplate-headers">Vulkan Header Files</a></li>
<li><a href="chap51.html#boilerplate-wsi-header">Window System-Specific Header Control (Informative)</a></li>
<li><a href="chap51.html#boilerplate-provisional-header">Provisional Extension Header Control (Informative)</a></li>
</ul>
</li>
<li><a href="chap52.html">Appendix G: Invariance</a>
<ul class="sectlevel2">
<li><a href="chap52.html#_repeatability">Repeatability</a></li>
<li><a href="chap52.html#_multi_pass_algorithms">Multi-pass Algorithms</a></li>
<li><a href="chap52.html#_invariance_rules">Invariance Rules</a></li>
<li><a href="chap52.html#_tessellation_invariance">Tessellation Invariance</a></li>
</ul>
</li>
<li><a href="chap53.html">Appendix H: Lexicon</a>
<ul class="sectlevel2">
<li><a href="chap53.html#glossary">Glossary</a></li>
<li><a href="chap53.html#lexicon-common-abbreviations">Common Abbreviations</a></li>
<li><a href="chap53.html#lexicon-prefixes">Prefixes</a></li>
</ul>
</li>
<li><a href="chap54.html">Appendix I: Credits (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap54.html#_working_group_contributors_to_vulkan">Working Group Contributors to Vulkan</a></li>
<li><a href="chap54.html#_other_credits">Other Credits</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="loading_msg" class="hidden" hidden=""><p>Loading… please wait.</p></div>
<!--ChunkedSearchboxMarker-->
<div class="searchbox"><label for="searchbox">Search: </label><input id="searchbox" type="text" disabled="disabled" value="Loading Search Data"><div id="resultsdiv"><ol id="results"></ol></div></div>
<div id="content" class="loadable"><div class="sect1">
<h2 id="resources"><a class="anchor" href="chap12.html"></a>12. Resource Creation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vulkan supports two primary resource types: <em>buffers</em> and <em>images</em>.
Resources are views of memory with associated formatting and dimensionality.
Buffers provide access to raw arrays of bytes, whereas images <strong class="purple">can</strong> be
multidimensional and <strong class="purple">may</strong> have associated metadata.</p>
</div>
<div class="sect2">
<h3 id="resources-buffers"><a class="anchor" href="chap12.html#resources-buffers"></a>12.1. Buffers</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Buffers represent linear arrays of data which are used for various purposes
by binding them to a graphics or compute pipeline via descriptor sets or via
certain commands, or by directly specifying them as parameters to certain
commands.</p>
</div>
<div class="paragraph">
<p>Buffers are represented by <code>VkBuffer</code> handles:</p>
</div>
<div id="VkBuffer" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="n">VK_DEFINE_NON_DISPATCHABLE_HANDLE</span><span class="p">(</span><span class="n">VkBuffer</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create buffers, call:</p>
</div>
<div id="vkCreateBuffer" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="n">VkResult</span> <span class="nf">vkCreateBuffer</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBufferCreateInfo</span><span class="o">*</span>                   <span class="n">pCreateInfo</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">,</span>
    <span class="n">VkBuffer</span><span class="o">*</span>                                   <span class="n">pBuffer</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the buffer object.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a> structure
containing parameters affecting creation of the buffer.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pBuffer</code> is a pointer to a <a href="chap12.html#VkBuffer">VkBuffer</a> handle in which the
resulting buffer object is returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateBuffer-flags-00911" href="chap12.html#VUID-vkCreateBuffer-flags-00911"></a> <span class="vuid">VUID-vkCreateBuffer-flags-00911</span><br>

If the <code>flags</code> member of <code>pCreateInfo</code> includes
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code>, creating this <code>VkBuffer</code>
<strong class="purple">must</strong> not cause the total required sparse memory for all currently valid
sparse resources on the device to exceed
<code>VkPhysicalDeviceLimits</code>::<code>sparseAddressSpaceSize</code></p>
</li>
<li>
<p><a id="VUID-vkCreateBuffer-pNext-06387" href="chap12.html#VUID-vkCreateBuffer-pNext-06387"></a> <span class="vuid">VUID-vkCreateBuffer-pNext-06387</span><br>

If using the <a href="chap12.html#VkBuffer">VkBuffer</a> for an import operation from a
<a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> where a
<a href="chap12.html#VkBufferCollectionBufferCreateInfoFUCHSIA">VkBufferCollectionBufferCreateInfoFUCHSIA</a> has been chained to
<code>pNext</code>, <code>pCreateInfo</code> <strong class="purple">must</strong> match the
<a href="chap12.html#VkBufferConstraintsInfoFUCHSIA">VkBufferConstraintsInfoFUCHSIA</a>::<code>createInfo</code> used when setting
the constraints on the buffer collection with
<a href="chap12.html#vkSetBufferCollectionBufferConstraintsFUCHSIA">vkSetBufferCollectionBufferConstraintsFUCHSIA</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateBuffer-device-parameter" href="chap12.html#VUID-vkCreateBuffer-device-parameter"></a> <span class="vuid">VUID-vkCreateBuffer-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateBuffer-pCreateInfo-parameter" href="chap12.html#VUID-vkCreateBuffer-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateBuffer-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateBuffer-pAllocator-parameter" href="chap12.html#VUID-vkCreateBuffer-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateBuffer-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateBuffer-pBuffer-parameter" href="chap12.html#VUID-vkCreateBuffer-pBuffer-parameter"></a> <span class="vuid">VUID-vkCreateBuffer-pBuffer-parameter</span><br>
 <code>pBuffer</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INVALID_OPAQUE_CAPTURE_ADDRESS_KHR</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkBufferCreateInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBufferCreateInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>        <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>            <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkBufferCreateFlags</span>    <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>           <span class="n">size</span><span class="p">;</span>
    <span class="n">VkBufferUsageFlags</span>     <span class="n">usage</span><span class="p">;</span>
    <span class="n">VkSharingMode</span>          <span class="n">sharingMode</span><span class="p">;</span>
    <span class="kt">uint32_t</span>               <span class="n">queueFamilyIndexCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint32_t</span><span class="o">*</span>        <span class="n">pQueueFamilyIndices</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBufferCreateInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap12.html#VkBufferCreateFlagBits">VkBufferCreateFlagBits</a> specifying
additional parameters of the buffer.</p>
</li>
<li>
<p><code>size</code> is the size in bytes of the buffer to be created.</p>
</li>
<li>
<p><code>usage</code> is a bitmask of <a href="chap12.html#VkBufferUsageFlagBits">VkBufferUsageFlagBits</a> specifying
allowed usages of the buffer.</p>
</li>
<li>
<p><code>sharingMode</code> is a <a href="chap12.html#VkSharingMode">VkSharingMode</a> value specifying the sharing
mode of the buffer when it will be accessed by multiple queue families.</p>
</li>
<li>
<p><code>queueFamilyIndexCount</code> is the number of entries in the
<code>pQueueFamilyIndices</code> array.</p>
</li>
<li>
<p><code>pQueueFamilyIndices</code> is a pointer to an array of queue families
that will access this buffer.
It is ignored if <code>sharingMode</code> is not
<code>VK_SHARING_MODE_CONCURRENT</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCreateInfo-size-00912" href="chap12.html#VUID-VkBufferCreateInfo-size-00912"></a> <span class="vuid">VUID-VkBufferCreateInfo-size-00912</span><br>

<code>size</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-sharingMode-00913" href="chap12.html#VUID-VkBufferCreateInfo-sharingMode-00913"></a> <span class="vuid">VUID-VkBufferCreateInfo-sharingMode-00913</span><br>

If <code>sharingMode</code> is <code>VK_SHARING_MODE_CONCURRENT</code>,
<code>pQueueFamilyIndices</code> <strong class="purple">must</strong> be a valid pointer to an array of
<code>queueFamilyIndexCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-sharingMode-00914" href="chap12.html#VUID-VkBufferCreateInfo-sharingMode-00914"></a> <span class="vuid">VUID-VkBufferCreateInfo-sharingMode-00914</span><br>

If <code>sharingMode</code> is <code>VK_SHARING_MODE_CONCURRENT</code>,
<code>queueFamilyIndexCount</code> <strong class="purple">must</strong> be greater than <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-sharingMode-01419" href="chap12.html#VUID-VkBufferCreateInfo-sharingMode-01419"></a> <span class="vuid">VUID-VkBufferCreateInfo-sharingMode-01419</span><br>

If <code>sharingMode</code> is <code>VK_SHARING_MODE_CONCURRENT</code>, each element
of <code>pQueueFamilyIndices</code> <strong class="purple">must</strong> be unique and <strong class="purple">must</strong> be less than
<code>pQueueFamilyPropertyCount</code> returned by either
<a href="chap5.html#vkGetPhysicalDeviceQueueFamilyProperties">vkGetPhysicalDeviceQueueFamilyProperties</a> or
<a href="chap5.html#vkGetPhysicalDeviceQueueFamilyProperties2">vkGetPhysicalDeviceQueueFamilyProperties2</a> for the
<code>physicalDevice</code> that was used to create <code>device</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-00915" href="chap12.html#VUID-VkBufferCreateInfo-flags-00915"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-00915</span><br>

If the <a href="chap41.html#features-sparseBinding"><code>sparseBinding</code></a> feature is not
enabled, <code>flags</code> <strong class="purple">must</strong> not contain
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-00916" href="chap12.html#VUID-VkBufferCreateInfo-flags-00916"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-00916</span><br>

If the <a href="chap41.html#features-sparseResidencyBuffer"><code>sparseResidencyBuffer</code></a>
feature is not enabled, <code>flags</code> <strong class="purple">must</strong> not contain
<code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-00917" href="chap12.html#VUID-VkBufferCreateInfo-flags-00917"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-00917</span><br>

If the <a href="chap41.html#features-sparseResidencyAliased"><code>sparseResidencyAliased</code></a>
feature is not enabled, <code>flags</code> <strong class="purple">must</strong> not contain
<code>VK_BUFFER_CREATE_SPARSE_ALIASED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-00918" href="chap12.html#VUID-VkBufferCreateInfo-flags-00918"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-00918</span><br>

If <code>flags</code> contains <code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code> or
<code>VK_BUFFER_CREATE_SPARSE_ALIASED_BIT</code>, it <strong class="purple">must</strong> also contain
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-pNext-00920" href="chap12.html#VUID-VkBufferCreateInfo-pNext-00920"></a> <span class="vuid">VUID-VkBufferCreateInfo-pNext-00920</span><br>

If the <code>pNext</code> chain includes a
<a href="chap12.html#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a> structure, its <code>handleTypes</code>
member <strong class="purple">must</strong> only contain bits that are also in
<a href="chap44.html#VkExternalBufferProperties">VkExternalBufferProperties</a>::<code>externalMemoryProperties.compatibleHandleTypes</code>,
as returned by <a href="chap44.html#vkGetPhysicalDeviceExternalBufferProperties">vkGetPhysicalDeviceExternalBufferProperties</a> with
<code>pExternalBufferInfo-&gt;handleType</code> equal to any one of the handle
types specified in
<a href="chap12.html#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-01887" href="chap12.html#VUID-VkBufferCreateInfo-flags-01887"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-01887</span><br>

If the <a href="chap41.html#features-protectedMemory"><code>protectedMemory</code></a> feature is
not enabled, <code>flags</code> <strong class="purple">must</strong> not contain
<code>VK_BUFFER_CREATE_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-None-01888" href="chap12.html#VUID-VkBufferCreateInfo-None-01888"></a> <span class="vuid">VUID-VkBufferCreateInfo-None-01888</span><br>

If any of the bits <code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code>,
<code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code>, or
<code>VK_BUFFER_CREATE_SPARSE_ALIASED_BIT</code> are set,
<code>VK_BUFFER_CREATE_PROTECTED_BIT</code> <strong class="purple">must</strong> not also be set</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-pNext-01571" href="chap12.html#VUID-VkBufferCreateInfo-pNext-01571"></a> <span class="vuid">VUID-VkBufferCreateInfo-pNext-01571</span><br>

If the <code>pNext</code> chain includes a
<a href="chap12.html#VkDedicatedAllocationBufferCreateInfoNV">VkDedicatedAllocationBufferCreateInfoNV</a> structure, and the
<code>dedicatedAllocation</code> member of the chained structure is
<code>VK_TRUE</code>, then <code>flags</code> <strong class="purple">must</strong> not include
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code>,
<code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code>, or
<code>VK_BUFFER_CREATE_SPARSE_ALIASED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-deviceAddress-02604" href="chap12.html#VUID-VkBufferCreateInfo-deviceAddress-02604"></a> <span class="vuid">VUID-VkBufferCreateInfo-deviceAddress-02604</span><br>

If <a href="chap12.html#VkBufferDeviceAddressCreateInfoEXT">VkBufferDeviceAddressCreateInfoEXT</a>::<code>deviceAddress</code> is not
zero, <code>flags</code> <strong class="purple">must</strong> include
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-opaqueCaptureAddress-03337" href="chap12.html#VUID-VkBufferCreateInfo-opaqueCaptureAddress-03337"></a> <span class="vuid">VUID-VkBufferCreateInfo-opaqueCaptureAddress-03337</span><br>

If
<a href="chap12.html#VkBufferOpaqueCaptureAddressCreateInfo">VkBufferOpaqueCaptureAddressCreateInfo</a>::<code>opaqueCaptureAddress</code>
is not zero, <code>flags</code> <strong class="purple">must</strong> include
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-03338" href="chap12.html#VUID-VkBufferCreateInfo-flags-03338"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-03338</span><br>

If <code>flags</code> includes
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code>, the
<a href="chap41.html#features-bufferDeviceAddressCaptureReplay"><code>bufferDeviceAddressCaptureReplay</code></a> or
<a href="chap41.html#features-bufferDeviceAddressCaptureReplayEXT"><code>bufferDeviceAddressCaptureReplayEXT</code></a> feature <strong class="purple">must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-usage-04813" href="chap12.html#VUID-VkBufferCreateInfo-usage-04813"></a> <span class="vuid">VUID-VkBufferCreateInfo-usage-04813</span><br>

If <code>usage</code> includes <code>VK_BUFFER_USAGE_VIDEO_DECODE_SRC_BIT_KHR</code>,
<code>VK_BUFFER_USAGE_VIDEO_DECODE_DST_BIT_KHR</code>, then the <code>pNext</code>
chain <strong class="purple">must</strong> include a valid <a href="chap39.html#VkVideoProfilesKHR">VkVideoProfilesKHR</a> structure with
<code>profileCount</code> greater than <code>0</code> and <code>pProfiles</code> including at
least one <a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a>::<code>videoCodecOperation</code> specifying
a decode operation</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-usage-04814" href="chap12.html#VUID-VkBufferCreateInfo-usage-04814"></a> <span class="vuid">VUID-VkBufferCreateInfo-usage-04814</span><br>

If <code>usage</code> includes <code>VK_BUFFER_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code>,
<code>VK_BUFFER_USAGE_VIDEO_ENCODE_DST_BIT_KHR</code>, then the <code>pNext</code>
chain <strong class="purple">must</strong> include a valid <a href="chap39.html#VkVideoProfilesKHR">VkVideoProfilesKHR</a> structure with
<code>profileCount</code> greater than <code>0</code> and <code>pProfiles</code> including at
least one <a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a>::<code>videoCodecOperation</code> specifying
an encode operation</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-size-06409" href="chap12.html#VUID-VkBufferCreateInfo-size-06409"></a> <span class="vuid">VUID-VkBufferCreateInfo-size-06409</span><br>

<code>size</code> <strong class="purple">must</strong> be less than or equal to
<a href="chap42.html#VkPhysicalDeviceMaintenance4Properties">VkPhysicalDeviceMaintenance4Properties</a>::<code>maxBufferSize</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCreateInfo-sType-sType" href="chap12.html#VUID-VkBufferCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkBufferCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-pNext-pNext" href="chap12.html#VUID-VkBufferCreateInfo-pNext-pNext"></a> <span class="vuid">VUID-VkBufferCreateInfo-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap12.html#VkBufferCollectionBufferCreateInfoFUCHSIA">VkBufferCollectionBufferCreateInfoFUCHSIA</a>, <a href="chap12.html#VkBufferDeviceAddressCreateInfoEXT">VkBufferDeviceAddressCreateInfoEXT</a>, <a href="chap12.html#VkBufferOpaqueCaptureAddressCreateInfo">VkBufferOpaqueCaptureAddressCreateInfo</a>, <a href="chap12.html#VkDedicatedAllocationBufferCreateInfoNV">VkDedicatedAllocationBufferCreateInfoNV</a>, <a href="chap12.html#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>, or <a href="chap39.html#VkVideoProfilesKHR">VkVideoProfilesKHR</a></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-sType-unique" href="chap12.html#VUID-VkBufferCreateInfo-sType-unique"></a> <span class="vuid">VUID-VkBufferCreateInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-flags-parameter" href="chap12.html#VUID-VkBufferCreateInfo-flags-parameter"></a> <span class="vuid">VUID-VkBufferCreateInfo-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap12.html#VkBufferCreateFlagBits">VkBufferCreateFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-usage-parameter" href="chap12.html#VUID-VkBufferCreateInfo-usage-parameter"></a> <span class="vuid">VUID-VkBufferCreateInfo-usage-parameter</span><br>
 <code>usage</code> <strong class="purple">must</strong> be a valid combination of <a href="chap12.html#VkBufferUsageFlagBits">VkBufferUsageFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-usage-requiredbitmask" href="chap12.html#VUID-VkBufferCreateInfo-usage-requiredbitmask"></a> <span class="vuid">VUID-VkBufferCreateInfo-usage-requiredbitmask</span><br>
 <code>usage</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCreateInfo-sharingMode-parameter" href="chap12.html#VUID-VkBufferCreateInfo-sharingMode-parameter"></a> <span class="vuid">VUID-VkBufferCreateInfo-sharingMode-parameter</span><br>
 <code>sharingMode</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkSharingMode">VkSharingMode</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in <a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>usage</code>, specifying
usage behavior of a buffer, are:</p>
</div>
<div id="VkBufferUsageFlagBits" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkBufferUsageFlagBits</span> <span class="p">{</span>
    <span class="n">VK_BUFFER_USAGE_TRANSFER_SRC_BIT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_BUFFER_USAGE_TRANSFER_DST_BIT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_BUFFER_USAGE_UNIFORM_TEXEL_BUFFER_BIT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
    <span class="n">VK_BUFFER_USAGE_STORAGE_TEXEL_BUFFER_BIT</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
    <span class="n">VK_BUFFER_USAGE_UNIFORM_BUFFER_BIT</span> <span class="o">=</span> <span class="mh">0x00000010</span><span class="p">,</span>
    <span class="n">VK_BUFFER_USAGE_STORAGE_BUFFER_BIT</span> <span class="o">=</span> <span class="mh">0x00000020</span><span class="p">,</span>
    <span class="n">VK_BUFFER_USAGE_INDEX_BUFFER_BIT</span> <span class="o">=</span> <span class="mh">0x00000040</span><span class="p">,</span>
    <span class="n">VK_BUFFER_USAGE_VERTEX_BUFFER_BIT</span> <span class="o">=</span> <span class="mh">0x00000080</span><span class="p">,</span>
    <span class="n">VK_BUFFER_USAGE_INDIRECT_BUFFER_BIT</span> <span class="o">=</span> <span class="mh">0x00000100</span><span class="p">,</span>
    <span class="n">VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</span> <span class="o">=</span> <span class="mh">0x00020000</span><span class="p">,</span>
<span class="cp">#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_KHR_video_decode_queue</span>
    <span class="n">VK_BUFFER_USAGE_VIDEO_DECODE_SRC_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00002000</span><span class="p">,</span>
<span class="cp">#endif
#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_KHR_video_decode_queue</span>
    <span class="n">VK_BUFFER_USAGE_VIDEO_DECODE_DST_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00004000</span><span class="p">,</span>
<span class="cp">#endif
</span>  <span class="c1">// Provided by VK_EXT_transform_feedback</span>
    <span class="n">VK_BUFFER_USAGE_TRANSFORM_FEEDBACK_BUFFER_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000800</span><span class="p">,</span>
  <span class="c1">// Provided by VK_EXT_transform_feedback</span>
    <span class="n">VK_BUFFER_USAGE_TRANSFORM_FEEDBACK_COUNTER_BUFFER_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00001000</span><span class="p">,</span>
  <span class="c1">// Provided by VK_EXT_conditional_rendering</span>
    <span class="n">VK_BUFFER_USAGE_CONDITIONAL_RENDERING_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000200</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_acceleration_structure</span>
    <span class="n">VK_BUFFER_USAGE_ACCELERATION_STRUCTURE_BUILD_INPUT_READ_ONLY_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00080000</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_acceleration_structure</span>
    <span class="n">VK_BUFFER_USAGE_ACCELERATION_STRUCTURE_STORAGE_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00100000</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_ray_tracing_pipeline</span>
    <span class="n">VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000400</span><span class="p">,</span>
<span class="cp">#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_KHR_video_encode_queue</span>
    <span class="n">VK_BUFFER_USAGE_VIDEO_ENCODE_DST_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00008000</span><span class="p">,</span>
<span class="cp">#endif
#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_KHR_video_encode_queue</span>
    <span class="n">VK_BUFFER_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00010000</span><span class="p">,</span>
<span class="cp">#endif
</span>  <span class="c1">// Provided by VK_NV_ray_tracing</span>
    <span class="n">VK_BUFFER_USAGE_RAY_TRACING_BIT_NV</span> <span class="o">=</span> <span class="n">VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</span><span class="p">,</span>
  <span class="c1">// Provided by VK_EXT_buffer_device_address</span>
    <span class="n">VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT_EXT</span> <span class="o">=</span> <span class="n">VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_buffer_device_address</span>
    <span class="n">VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT_KHR</span> <span class="o">=</span> <span class="n">VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkBufferUsageFlagBits</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_BUFFER_USAGE_TRANSFER_SRC_BIT</code> specifies that the buffer <strong class="purple">can</strong> be
used as the source of a <em>transfer command</em> (see the definition of
<a href="chap7.html#synchronization-pipeline-stages-transfer"><code>VK_PIPELINE_STAGE_TRANSFER_BIT</code></a>).</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> specifies that the buffer <strong class="purple">can</strong> be
used as the destination of a transfer command.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_UNIFORM_TEXEL_BUFFER_BIT</code> specifies that the buffer
<strong class="purple">can</strong> be used to create a <code>VkBufferView</code> suitable for occupying a
<code>VkDescriptorSet</code> slot of type
<code>VK_DESCRIPTOR_TYPE_UNIFORM_TEXEL_BUFFER</code>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_STORAGE_TEXEL_BUFFER_BIT</code> specifies that the buffer
<strong class="purple">can</strong> be used to create a <code>VkBufferView</code> suitable for occupying a
<code>VkDescriptorSet</code> slot of type
<code>VK_DESCRIPTOR_TYPE_STORAGE_TEXEL_BUFFER</code>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_UNIFORM_BUFFER_BIT</code> specifies that the buffer <strong class="purple">can</strong>
be used in a <code>VkDescriptorBufferInfo</code> suitable for occupying a
<code>VkDescriptorSet</code> slot either of type
<code>VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER</code> or
<code>VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER_DYNAMIC</code>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_STORAGE_BUFFER_BIT</code> specifies that the buffer <strong class="purple">can</strong>
be used in a <code>VkDescriptorBufferInfo</code> suitable for occupying a
<code>VkDescriptorSet</code> slot either of type
<code>VK_DESCRIPTOR_TYPE_STORAGE_BUFFER</code> or
<code>VK_DESCRIPTOR_TYPE_STORAGE_BUFFER_DYNAMIC</code>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_INDEX_BUFFER_BIT</code> specifies that the buffer is
suitable for passing as the <code>buffer</code> parameter to
<a href="chap21.html#vkCmdBindIndexBuffer">vkCmdBindIndexBuffer</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_VERTEX_BUFFER_BIT</code> specifies that the buffer is
suitable for passing as an element of the <code>pBuffers</code> array to
<a href="chap22.html#vkCmdBindVertexBuffers">vkCmdBindVertexBuffers</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_INDIRECT_BUFFER_BIT</code> specifies that the buffer is
suitable for passing as the <code>buffer</code> parameter to
<a href="chap21.html#vkCmdDrawIndirect">vkCmdDrawIndirect</a>, <a href="chap21.html#vkCmdDrawIndexedIndirect">vkCmdDrawIndexedIndirect</a>,
<a href="chap21.html#vkCmdDrawMeshTasksIndirectNV">vkCmdDrawMeshTasksIndirectNV</a>,
<a href="chap21.html#vkCmdDrawMeshTasksIndirectCountNV">vkCmdDrawMeshTasksIndirectCountNV</a>,
or <a href="chap30.html#vkCmdDispatchIndirect">vkCmdDispatchIndirect</a>.
It is also suitable for passing as the <code>buffer</code> member of
<code>VkIndirectCommandsStreamNV</code>, or <code>sequencesCountBuffer</code> or
<code>sequencesIndexBuffer</code> or <code>preprocessedBuffer</code> member of
<code>VkGeneratedCommandsInfoNV</code></p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_CONDITIONAL_RENDERING_BIT_EXT</code> specifies that the
buffer is suitable for passing as the <code>buffer</code> parameter to
<a href="chap21.html#vkCmdBeginConditionalRenderingEXT">vkCmdBeginConditionalRenderingEXT</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_TRANSFORM_FEEDBACK_BUFFER_BIT_EXT</code> specifies that
the buffer is suitable for using for binding as a transform feedback
buffer with <a href="chap26.html#vkCmdBindTransformFeedbackBuffersEXT">vkCmdBindTransformFeedbackBuffersEXT</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_TRANSFORM_FEEDBACK_COUNTER_BUFFER_BIT_EXT</code>
specifies that the buffer is suitable for using as a counter buffer with
<a href="chap26.html#vkCmdBeginTransformFeedbackEXT">vkCmdBeginTransformFeedbackEXT</a> and
<a href="chap26.html#vkCmdEndTransformFeedbackEXT">vkCmdEndTransformFeedbackEXT</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_RAY_TRACING_BIT_NV</code> specifies that the buffer is
suitable for use in <a href="chap38.html#vkCmdTraceRaysNV">vkCmdTraceRaysNV</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_SHADER_BINDING_TABLE_BIT_KHR</code> specifies that the
buffer is suitable for use as a <a href="chap38.html#shader-binding-table">Shader Binding
Table</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_ACCELERATION_STRUCTURE_BUILD_INPUT_READ_ONLY_BIT_KHR</code>
specifies that the buffer is suitable for use as a read-only input to an
<a href="chap36.html#acceleration-structure-building">acceleration structure build</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_ACCELERATION_STRUCTURE_STORAGE_BIT_KHR</code> specifies
that the buffer is suitable for storage space for a
<a href="chap12.html#VkAccelerationStructureKHR">VkAccelerationStructureKHR</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</code> specifies that the
buffer <strong class="purple">can</strong> be used to retrieve a buffer device address via
<a href="chap14.html#vkGetBufferDeviceAddressKHR">vkGetBufferDeviceAddressKHR</a> and use that address to access the
buffer’s memory from a shader.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_VIDEO_DECODE_SRC_BIT_KHR</code> specifies that the buffer
<strong class="purple">can</strong> be used as the source bitstream buffer in a
<a href="chap39.html#video-decode-operations">video decode operation</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_VIDEO_DECODE_DST_BIT_KHR</code> specifies that the buffer
<strong class="purple">can</strong> be used as the destination status buffer in a
<a href="chap39.html#video-decode-operations">video decode operation</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_VIDEO_ENCODE_DST_BIT_KHR</code> specifies that the buffer
<strong class="purple">can</strong> be used as the destination bitstream buffer in a
<a href="chap39.html#video-encode-operations">video encode operation</a>.</p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_VIDEO_ENCODE_DST_BIT_KHR</code> specifies that the buffer
<strong class="purple">can</strong> be used as the destination status buffer in a
<a href="chap39.html#video-encode-operations">video encode operation</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkBufferUsageFlags" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkBufferUsageFlags</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkBufferUsageFlags</code> is a bitmask type for setting a mask of zero or
more <a href="chap12.html#VkBufferUsageFlagBits">VkBufferUsageFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in <a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>flags</code>, specifying
additional parameters of a buffer, are:</p>
</div>
<div id="VkBufferCreateFlagBits" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkBufferCreateFlagBits</span> <span class="p">{</span>
    <span class="n">VK_BUFFER_CREATE_SPARSE_BINDING_BIT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_BUFFER_CREATE_SPARSE_ALIASED_BIT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
  <span class="c1">// Provided by VK_VERSION_1_1</span>
    <span class="n">VK_BUFFER_CREATE_PROTECTED_BIT</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
    <span class="n">VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</span> <span class="o">=</span> <span class="mh">0x00000010</span><span class="p">,</span>
  <span class="c1">// Provided by VK_EXT_buffer_device_address</span>
    <span class="n">VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT_EXT</span> <span class="o">=</span> <span class="n">VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_buffer_device_address</span>
    <span class="n">VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT_KHR</span> <span class="o">=</span> <span class="n">VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkBufferCreateFlagBits</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code> specifies that the buffer will
be backed using sparse memory binding.</p>
</li>
<li>
<p><code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code> specifies that the buffer
<strong class="purple">can</strong> be partially backed using sparse memory binding.
Buffers created with this flag <strong class="purple">must</strong> also be created with the
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code> flag.</p>
</li>
<li>
<p><code>VK_BUFFER_CREATE_SPARSE_ALIASED_BIT</code> specifies that the buffer will
be backed using sparse memory binding with memory ranges that might also
simultaneously be backing another buffer (or another portion of the same
buffer).
Buffers created with this flag <strong class="purple">must</strong> also be created with the
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code> flag.</p>
</li>
<li>
<p><code>VK_BUFFER_CREATE_PROTECTED_BIT</code> specifies that the buffer is a
protected buffer.</p>
</li>
<li>
<p><code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code> specifies that
the buffer’s address <strong class="purple">can</strong> be saved and reused on a subsequent run (e.g.
for trace capture and replay), see
<a href="chap12.html#VkBufferOpaqueCaptureAddressCreateInfo">VkBufferOpaqueCaptureAddressCreateInfo</a> for more detail.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="chap32.html#sparsememory-sparseresourcefeatures">Sparse Resource Features</a> and
<a href="chap41.html">Physical Device Features</a> for details of the sparse memory
features supported on a device.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkBufferCreateFlags" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkBufferCreateFlags</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkBufferCreateFlags</code> is a bitmask type for setting a mask of zero or
more <a href="chap12.html#VkBufferCreateFlagBits">VkBufferCreateFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain includes a
<code>VkDedicatedAllocationBufferCreateInfoNV</code> structure, then that structure
includes an enable controlling whether the buffer will have a dedicated
memory allocation bound to it.</p>
</div>
<div class="paragraph">
<p>The <code>VkDedicatedAllocationBufferCreateInfoNV</code> structure is defined as:</p>
</div>
<div id="VkDedicatedAllocationBufferCreateInfoNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_dedicated_allocation</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkDedicatedAllocationBufferCreateInfoNV</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkBool32</span>           <span class="n">dedicatedAllocation</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkDedicatedAllocationBufferCreateInfoNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>dedicatedAllocation</code> specifies whether the buffer will have a
dedicated allocation bound to it.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDedicatedAllocationBufferCreateInfoNV-sType-sType" href="chap12.html#VUID-VkDedicatedAllocationBufferCreateInfoNV-sType-sType"></a> <span class="vuid">VUID-VkDedicatedAllocationBufferCreateInfoNV-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_DEDICATED_ALLOCATION_BUFFER_CREATE_INFO_NV</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To define a set of external memory handle types that <strong class="purple">may</strong> be used as backing
store for a buffer, add a <a href="chap12.html#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a> structure
to the <code>pNext</code> chain of the <a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a> structure.
The <code>VkExternalMemoryBufferCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkExternalMemoryBufferCreateInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkExternalMemoryBufferCreateInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkExternalMemoryHandleTypeFlags</span>    <span class="n">handleTypes</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkExternalMemoryBufferCreateInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkExternalMemoryBufferCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_external_memory</span>
<span class="k">typedef</span> <span class="n">VkExternalMemoryBufferCreateInfo</span> <span class="n">VkExternalMemoryBufferCreateInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>A <code>VkExternalMemoryBufferCreateInfo</code> structure with a non-zero
<code>handleTypes</code> field must be included in the creation parameters for a
buffer that will be bound to memory that is either exported or imported.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>handleTypes</code> is zero or a bitmask of
<a href="chap44.html#VkExternalMemoryHandleTypeFlagBits">VkExternalMemoryHandleTypeFlagBits</a> specifying one or more external
memory handle types.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkExternalMemoryBufferCreateInfo-sType-sType" href="chap12.html#VUID-VkExternalMemoryBufferCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkExternalMemoryBufferCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_EXTERNAL_MEMORY_BUFFER_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkExternalMemoryBufferCreateInfo-handleTypes-parameter" href="chap12.html#VUID-VkExternalMemoryBufferCreateInfo-handleTypes-parameter"></a> <span class="vuid">VUID-VkExternalMemoryBufferCreateInfo-handleTypes-parameter</span><br>
 <code>handleTypes</code> <strong class="purple">must</strong> be a valid combination of <a href="chap44.html#VkExternalMemoryHandleTypeFlagBits">VkExternalMemoryHandleTypeFlagBits</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To request a specific device address for a buffer, add a
<a href="chap12.html#VkBufferOpaqueCaptureAddressCreateInfo">VkBufferOpaqueCaptureAddressCreateInfo</a> structure to the <code>pNext</code>
chain of the <a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a> structure.
The <code>VkBufferOpaqueCaptureAddressCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkBufferOpaqueCaptureAddressCreateInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBufferOpaqueCaptureAddressCreateInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint64_t</span>           <span class="n">opaqueCaptureAddress</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBufferOpaqueCaptureAddressCreateInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBufferOpaqueCaptureAddressCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_buffer_device_address</span>
<span class="k">typedef</span> <span class="n">VkBufferOpaqueCaptureAddressCreateInfo</span> <span class="n">VkBufferOpaqueCaptureAddressCreateInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>opaqueCaptureAddress</code> is the opaque capture address requested for
the buffer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>opaqueCaptureAddress</code> is zero, no specific address is requested.</p>
</div>
<div class="paragraph">
<p>If <code>opaqueCaptureAddress</code> is not zero, then it <strong class="purple">should</strong> be an address
retrieved from <a href="chap14.html#vkGetBufferOpaqueCaptureAddressKHR">vkGetBufferOpaqueCaptureAddressKHR</a> for an identically
created buffer on the same implementation.</p>
</div>
<div class="paragraph">
<p>If this structure is not present, it is as if <code>opaqueCaptureAddress</code> is
zero.</p>
</div>
<div class="paragraph">
<p>Apps <strong class="purple">should</strong> avoid creating buffers with app-provided addresses and
implementation-provided addresses in the same process, to reduce the
likelihood of <code>VK_ERROR_INVALID_OPAQUE_CAPTURE_ADDRESS</code> errors.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The expected usage for this is that a trace capture/replay tool will add the
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code> flag to all buffers
that use <code>VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</code>, and during capture
will save the queried opaque device addresses in the trace.
During replay, the buffers will be created specifying the original address
so any address values stored in the trace data will remain valid.</p>
</div>
<div class="paragraph">
<p>Implementations are expected to separate such buffers in the GPU address
space so normal allocations will avoid using these addresses.
Apps/tools should avoid mixing app-provided and implementation-provided
addresses for buffers created with
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code>, to avoid address
space allocation conflicts.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferOpaqueCaptureAddressCreateInfo-sType-sType" href="chap12.html#VUID-VkBufferOpaqueCaptureAddressCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkBufferOpaqueCaptureAddressCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_OPAQUE_CAPTURE_ADDRESS_CREATE_INFO</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Alternatively, to
request a specific device address for a buffer, add a
<a href="chap12.html#VkBufferDeviceAddressCreateInfoEXT">VkBufferDeviceAddressCreateInfoEXT</a> structure to the <code>pNext</code> chain
of the <a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a> structure.
The <code>VkBufferDeviceAddressCreateInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkBufferDeviceAddressCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_buffer_device_address</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBufferDeviceAddressCreateInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkDeviceAddress</span>    <span class="n">deviceAddress</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBufferDeviceAddressCreateInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>deviceAddress</code> is the device address requested for the buffer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>deviceAddress</code> is zero, no specific address is requested.</p>
</div>
<div class="paragraph">
<p>If <code>deviceAddress</code> is not zero, then it <strong class="purple">must</strong> be an address retrieved
from an identically created buffer on the same implementation.
The buffer <strong class="purple">must</strong> also be bound to an identically created
<code>VkDeviceMemory</code> object.</p>
</div>
<div class="paragraph">
<p>If this structure is not present, it is as if <code>deviceAddress</code> is zero.</p>
</div>
<div class="paragraph">
<p>Apps <strong class="purple">should</strong> avoid creating buffers with app-provided addresses and
implementation-provided addresses in the same process, to reduce the
likelihood of <code>VK_ERROR_INVALID_DEVICE_ADDRESS_EXT</code> errors.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferDeviceAddressCreateInfoEXT-sType-sType" href="chap12.html#VUID-VkBufferDeviceAddressCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkBufferDeviceAddressCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_DEVICE_ADDRESS_CREATE_INFO_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferCollectionBufferCreateInfoFUCHSIA</code> structure is defined as:</p>
</div>
<div id="VkBufferCollectionBufferCreateInfoFUCHSIA" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_FUCHSIA_buffer_collection</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBufferCollectionBufferCreateInfoFUCHSIA</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>              <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                  <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkBufferCollectionFUCHSIA</span>    <span class="n">collection</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                     <span class="n">index</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBufferCollectionBufferCreateInfoFUCHSIA</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure</p>
</li>
<li>
<p><code>collection</code> is the <a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><code>index</code> is the index of the buffer in the buffer collection from
which the memory will be imported</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCollectionBufferCreateInfoFUCHSIA-index-06388" href="chap12.html#VUID-VkBufferCollectionBufferCreateInfoFUCHSIA-index-06388"></a> <span class="vuid">VUID-VkBufferCollectionBufferCreateInfoFUCHSIA-index-06388</span><br>

<code>index</code> <strong class="purple">must</strong> be less than
<a href="chap12.html#VkBufferCollectionPropertiesFUCHSIA">VkBufferCollectionPropertiesFUCHSIA</a>::<code>bufferCount</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCollectionBufferCreateInfoFUCHSIA-sType-sType" href="chap12.html#VUID-VkBufferCollectionBufferCreateInfoFUCHSIA-sType-sType"></a> <span class="vuid">VUID-VkBufferCollectionBufferCreateInfoFUCHSIA-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_COLLECTION_BUFFER_CREATE_INFO_FUCHSIA</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCollectionBufferCreateInfoFUCHSIA-collection-parameter" href="chap12.html#VUID-VkBufferCollectionBufferCreateInfoFUCHSIA-collection-parameter"></a> <span class="vuid">VUID-VkBufferCollectionBufferCreateInfoFUCHSIA-collection-parameter</span><br>
 <code>collection</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy a buffer, call:</p>
</div>
<div id="vkDestroyBuffer" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkDestroyBuffer</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkBuffer</span>                                    <span class="n">buffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the buffer.</p>
</li>
<li>
<p><code>buffer</code> is the buffer to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyBuffer-buffer-00922" href="chap12.html#VUID-vkDestroyBuffer-buffer-00922"></a> <span class="vuid">VUID-vkDestroyBuffer-buffer-00922</span><br>

All submitted commands that refer to <code>buffer</code>, either directly or
via a <code>VkBufferView</code>, <strong class="purple">must</strong> have completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyBuffer-buffer-00923" href="chap12.html#VUID-vkDestroyBuffer-buffer-00923"></a> <span class="vuid">VUID-vkDestroyBuffer-buffer-00923</span><br>

If <code>VkAllocationCallbacks</code> were provided when <code>buffer</code> was
created, a compatible set of callbacks <strong class="purple">must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyBuffer-buffer-00924" href="chap12.html#VUID-vkDestroyBuffer-buffer-00924"></a> <span class="vuid">VUID-vkDestroyBuffer-buffer-00924</span><br>

If no <code>VkAllocationCallbacks</code> were provided when <code>buffer</code> was
created, <code>pAllocator</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyBuffer-device-parameter" href="chap12.html#VUID-vkDestroyBuffer-device-parameter"></a> <span class="vuid">VUID-vkDestroyBuffer-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyBuffer-buffer-parameter" href="chap12.html#VUID-vkDestroyBuffer-buffer-parameter"></a> <span class="vuid">VUID-vkDestroyBuffer-buffer-parameter</span><br>
 If <code>buffer</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>buffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyBuffer-pAllocator-parameter" href="chap12.html#VUID-vkDestroyBuffer-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyBuffer-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyBuffer-buffer-parent" href="chap12.html#VUID-vkDestroyBuffer-buffer-parent"></a> <span class="vuid">VUID-vkDestroyBuffer-buffer-parent</span><br>
 If <code>buffer</code> is a valid handle, it <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>buffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-buffer-views"><a class="anchor" href="chap12.html#resources-buffer-views"></a>12.2. Buffer Views</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>A <em>buffer view</em> represents a contiguous range of a buffer and a specific
format to be used to interpret the data.
Buffer views are used to enable shaders to access buffer contents using
<a href="chap16.html">image operations</a>.
In order to create a valid buffer view, the buffer <strong class="purple">must</strong> have been created
with at least one of the following usage flags:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_BUFFER_USAGE_UNIFORM_TEXEL_BUFFER_BIT</code></p>
</li>
<li>
<p><code>VK_BUFFER_USAGE_STORAGE_TEXEL_BUFFER_BIT</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Buffer views are represented by <code>VkBufferView</code> handles:</p>
</div>
<div id="VkBufferView" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="n">VK_DEFINE_NON_DISPATCHABLE_HANDLE</span><span class="p">(</span><span class="n">VkBufferView</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create a buffer view, call:</p>
</div>
<div id="vkCreateBufferView" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="n">VkResult</span> <span class="nf">vkCreateBufferView</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBufferViewCreateInfo</span><span class="o">*</span>               <span class="n">pCreateInfo</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">,</span>
    <span class="n">VkBufferView</span><span class="o">*</span>                               <span class="n">pView</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the buffer view.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="chap12.html#VkBufferViewCreateInfo">VkBufferViewCreateInfo</a>
structure containing parameters to be used to create the buffer view.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pView</code> is a pointer to a <a href="chap12.html#VkBufferView">VkBufferView</a> handle in which the
resulting buffer view object is returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateBufferView-device-parameter" href="chap12.html#VUID-vkCreateBufferView-device-parameter"></a> <span class="vuid">VUID-vkCreateBufferView-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateBufferView-pCreateInfo-parameter" href="chap12.html#VUID-vkCreateBufferView-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateBufferView-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkBufferViewCreateInfo">VkBufferViewCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateBufferView-pAllocator-parameter" href="chap12.html#VUID-vkCreateBufferView-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateBufferView-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateBufferView-pView-parameter" href="chap12.html#VUID-vkCreateBufferView-pView-parameter"></a> <span class="vuid">VUID-vkCreateBufferView-pView-parameter</span><br>
 <code>pView</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkBufferView">VkBufferView</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferViewCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkBufferViewCreateInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBufferViewCreateInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>            <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkBufferViewCreateFlags</span>    <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkBuffer</span>                   <span class="n">buffer</span><span class="p">;</span>
    <span class="n">VkFormat</span>                   <span class="n">format</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>               <span class="n">offset</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>               <span class="n">range</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBufferViewCreateInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
<li>
<p><code>buffer</code> is a <a href="chap12.html#VkBuffer">VkBuffer</a> on which the view will be created.</p>
</li>
<li>
<p><code>format</code> is a <a href="chap43.html#VkFormat">VkFormat</a> describing the format of the data
elements in the buffer.</p>
</li>
<li>
<p><code>offset</code> is an offset in bytes from the base address of the buffer.
Accesses to the buffer view from shaders use addressing that is relative
to this starting offset.</p>
</li>
<li>
<p><code>range</code> is a size in bytes of the buffer view.
If <code>range</code> is equal to <code>VK_WHOLE_SIZE</code>, the range from
<code>offset</code> to the end of the buffer is used.
If <code>VK_WHOLE_SIZE</code> is used and the remaining size of the buffer is
not a multiple of the <a href="chap43.html#texel-block-size">texel block size</a> of
<code>format</code>, the nearest smaller multiple is used.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-offset-00925" href="chap12.html#VUID-VkBufferViewCreateInfo-offset-00925"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-offset-00925</span><br>

<code>offset</code> <strong class="purple">must</strong> be less than the size of <code>buffer</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-range-00928" href="chap12.html#VUID-VkBufferViewCreateInfo-range-00928"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-range-00928</span><br>

If <code>range</code> is not equal to <code>VK_WHOLE_SIZE</code>, <code>range</code> <strong class="purple">must</strong> be
greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-range-00929" href="chap12.html#VUID-VkBufferViewCreateInfo-range-00929"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-range-00929</span><br>

If <code>range</code> is not equal to <code>VK_WHOLE_SIZE</code>, <code>range</code> <strong class="purple">must</strong> be
an integer multiple of the texel block size of <code>format</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-range-00930" href="chap12.html#VUID-VkBufferViewCreateInfo-range-00930"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-range-00930</span><br>

If <code>range</code> is not equal to <code>VK_WHOLE_SIZE</code>, the number of texel
buffer elements given by <span class="eq">(⌊<code>range</code> / (texel block
size)⌋ × (texels per block))</span> where texel block size and
texels per block are as defined in the <a href="chap43.html#formats-compatibility">Compatible Formats</a> table for <code>format</code>, <strong class="purple">must</strong> be less than or equal
to <code>VkPhysicalDeviceLimits</code>::<code>maxTexelBufferElements</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-offset-00931" href="chap12.html#VUID-VkBufferViewCreateInfo-offset-00931"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-offset-00931</span><br>

If <code>range</code> is not equal to <code>VK_WHOLE_SIZE</code>, the sum of
<code>offset</code> and <code>range</code> <strong class="purple">must</strong> be less than or equal to the size of
<code>buffer</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-range-04059" href="chap12.html#VUID-VkBufferViewCreateInfo-range-04059"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-range-04059</span><br>

If <code>range</code> is equal to <code>VK_WHOLE_SIZE</code>, the number of texel
buffer elements given by <span class="eq">(⌊(size - <code>offset</code>) / (texel
block size)⌋ × (texels per block))</span> where size is the size
of <code>buffer</code>, and texel block size and texels per block are as
defined in the <a href="chap43.html#formats-compatibility">Compatible Formats</a> table for
<code>format</code>, <strong class="purple">must</strong> be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxTexelBufferElements</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-buffer-00932" href="chap12.html#VUID-VkBufferViewCreateInfo-buffer-00932"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-buffer-00932</span><br>

<code>buffer</code> <strong class="purple">must</strong> have been created with a <code>usage</code> value containing
at least one of <code>VK_BUFFER_USAGE_UNIFORM_TEXEL_BUFFER_BIT</code> or
<code>VK_BUFFER_USAGE_STORAGE_TEXEL_BUFFER_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-buffer-00933" href="chap12.html#VUID-VkBufferViewCreateInfo-buffer-00933"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-buffer-00933</span><br>

If <code>buffer</code> was created with <code>usage</code> containing
<code>VK_BUFFER_USAGE_UNIFORM_TEXEL_BUFFER_BIT</code>, <code>format</code> <strong class="purple">must</strong> be
supported for uniform texel buffers, as specified by the
<code>VK_FORMAT_FEATURE_UNIFORM_TEXEL_BUFFER_BIT</code> flag in
<code>VkFormatProperties</code>::<code>bufferFeatures</code> returned by
<a href="chap43.html#vkGetPhysicalDeviceFormatProperties">vkGetPhysicalDeviceFormatProperties</a></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-buffer-00934" href="chap12.html#VUID-VkBufferViewCreateInfo-buffer-00934"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-buffer-00934</span><br>

If <code>buffer</code> was created with <code>usage</code> containing
<code>VK_BUFFER_USAGE_STORAGE_TEXEL_BUFFER_BIT</code>, <code>format</code> <strong class="purple">must</strong> be
supported for storage texel buffers, as specified by the
<code>VK_FORMAT_FEATURE_STORAGE_TEXEL_BUFFER_BIT</code> flag in
<code>VkFormatProperties</code>::<code>bufferFeatures</code> returned by
<a href="chap43.html#vkGetPhysicalDeviceFormatProperties">vkGetPhysicalDeviceFormatProperties</a></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-buffer-00935" href="chap12.html#VUID-VkBufferViewCreateInfo-buffer-00935"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-buffer-00935</span><br>

If <code>buffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-offset-02749" href="chap12.html#VUID-VkBufferViewCreateInfo-offset-02749"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-offset-02749</span><br>

If the <a href="chap41.html#features-texelBufferAlignment"><code>texelBufferAlignment</code></a>
feature is not enabled, <code>offset</code> <strong class="purple">must</strong> be a multiple of
<code>VkPhysicalDeviceLimits</code>::<code>minTexelBufferOffsetAlignment</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-buffer-02750" href="chap12.html#VUID-VkBufferViewCreateInfo-buffer-02750"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-buffer-02750</span><br>

If the <a href="chap41.html#features-texelBufferAlignment"><code>texelBufferAlignment</code></a>
feature is enabled and if <code>buffer</code> was created with <code>usage</code>
containing <code>VK_BUFFER_USAGE_STORAGE_TEXEL_BUFFER_BIT</code>, <code>offset</code>
<strong class="purple">must</strong> be a multiple of the lesser of
<a href="chap42.html#VkPhysicalDeviceTexelBufferAlignmentProperties">VkPhysicalDeviceTexelBufferAlignmentProperties</a>::<code>storageTexelBufferOffsetAlignmentBytes</code>
or, if
<a href="chap42.html#VkPhysicalDeviceTexelBufferAlignmentProperties">VkPhysicalDeviceTexelBufferAlignmentProperties</a>::<code>storageTexelBufferOffsetSingleTexelAlignment</code>
is <code>VK_TRUE</code>, the size of a texel of the requested <code>format</code>.
If the size of a texel is a multiple of three bytes, then the size of a
single component of <code>format</code> is used instead</p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-buffer-02751" href="chap12.html#VUID-VkBufferViewCreateInfo-buffer-02751"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-buffer-02751</span><br>

If the <a href="chap41.html#features-texelBufferAlignment"><code>texelBufferAlignment</code></a>
feature is enabled and if <code>buffer</code> was created with <code>usage</code>
containing <code>VK_BUFFER_USAGE_UNIFORM_TEXEL_BUFFER_BIT</code>, <code>offset</code>
<strong class="purple">must</strong> be a multiple of the lesser of
<a href="chap42.html#VkPhysicalDeviceTexelBufferAlignmentProperties">VkPhysicalDeviceTexelBufferAlignmentProperties</a>::<code>uniformTexelBufferOffsetAlignmentBytes</code>
or, if
<a href="chap42.html#VkPhysicalDeviceTexelBufferAlignmentProperties">VkPhysicalDeviceTexelBufferAlignmentProperties</a>::<code>uniformTexelBufferOffsetSingleTexelAlignment</code>
is <code>VK_TRUE</code>, the size of a texel of the requested <code>format</code>.
If the size of a texel is a multiple of three bytes, then the size of a
single component of <code>format</code> is used instead</p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-pNext-06782" href="chap12.html#VUID-VkBufferViewCreateInfo-pNext-06782"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-pNext-06782</span><br>

If the <code>pNext</code> chain includes a
<a href="chap11.html#VkExportMetalObjectCreateInfoEXT">VkExportMetalObjectCreateInfoEXT</a> structure, its
<code>exportObjectType</code> member <strong class="purple">must</strong> be
<code>VK_EXPORT_METAL_OBJECT_TYPE_METAL_TEXTURE_BIT_EXT</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-sType-sType" href="chap12.html#VUID-VkBufferViewCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_VIEW_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-pNext-pNext" href="chap12.html#VUID-VkBufferViewCreateInfo-pNext-pNext"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="chap11.html#VkExportMetalObjectCreateInfoEXT">VkExportMetalObjectCreateInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-sType-unique" href="chap12.html#VUID-VkBufferViewCreateInfo-sType-unique"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique, with the exception of structures of type <a href="chap11.html#VkExportMetalObjectCreateInfoEXT">VkExportMetalObjectCreateInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-flags-zerobitmask" href="chap12.html#VUID-VkBufferViewCreateInfo-flags-zerobitmask"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-flags-zerobitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-buffer-parameter" href="chap12.html#VUID-VkBufferViewCreateInfo-buffer-parameter"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-buffer-parameter</span><br>
 <code>buffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBufferViewCreateInfo-format-parameter" href="chap12.html#VUID-VkBufferViewCreateInfo-format-parameter"></a> <span class="vuid">VUID-VkBufferViewCreateInfo-format-parameter</span><br>
 <code>format</code> <strong class="purple">must</strong> be a valid <a href="chap43.html#VkFormat">VkFormat</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkBufferViewCreateFlags" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkBufferViewCreateFlags</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkBufferViewCreateFlags</code> is a bitmask type for setting a mask, but is
currently reserved for future use.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy a buffer view, call:</p>
</div>
<div id="vkDestroyBufferView" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkDestroyBufferView</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkBufferView</span>                                <span class="n">bufferView</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the buffer view.</p>
</li>
<li>
<p><code>bufferView</code> is the buffer view to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyBufferView-bufferView-00936" href="chap12.html#VUID-vkDestroyBufferView-bufferView-00936"></a> <span class="vuid">VUID-vkDestroyBufferView-bufferView-00936</span><br>

All submitted commands that refer to <code>bufferView</code> <strong class="purple">must</strong> have
completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyBufferView-bufferView-00937" href="chap12.html#VUID-vkDestroyBufferView-bufferView-00937"></a> <span class="vuid">VUID-vkDestroyBufferView-bufferView-00937</span><br>

If <code>VkAllocationCallbacks</code> were provided when <code>bufferView</code> was
created, a compatible set of callbacks <strong class="purple">must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyBufferView-bufferView-00938" href="chap12.html#VUID-vkDestroyBufferView-bufferView-00938"></a> <span class="vuid">VUID-vkDestroyBufferView-bufferView-00938</span><br>

If no <code>VkAllocationCallbacks</code> were provided when <code>bufferView</code>
was created, <code>pAllocator</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyBufferView-device-parameter" href="chap12.html#VUID-vkDestroyBufferView-device-parameter"></a> <span class="vuid">VUID-vkDestroyBufferView-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyBufferView-bufferView-parameter" href="chap12.html#VUID-vkDestroyBufferView-bufferView-parameter"></a> <span class="vuid">VUID-vkDestroyBufferView-bufferView-parameter</span><br>
 If <code>bufferView</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>bufferView</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBufferView">VkBufferView</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyBufferView-pAllocator-parameter" href="chap12.html#VUID-vkDestroyBufferView-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyBufferView-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyBufferView-bufferView-parent" href="chap12.html#VUID-vkDestroyBufferView-bufferView-parent"></a> <span class="vuid">VUID-vkDestroyBufferView-bufferView-parent</span><br>
 If <code>bufferView</code> is a valid handle, it <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>bufferView</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-images"><a class="anchor" href="chap12.html#resources-images"></a>12.3. Images</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Images represent multidimensional - up to 3 - arrays of data which <strong class="purple">can</strong> be
used for various purposes (e.g. attachments, textures), by binding them to a
graphics or compute pipeline via descriptor sets, or by directly specifying
them as parameters to certain commands.</p>
</div>
<div class="paragraph">
<p>Images are represented by <code>VkImage</code> handles:</p>
</div>
<div id="VkImage" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="n">VK_DEFINE_NON_DISPATCHABLE_HANDLE</span><span class="p">(</span><span class="n">VkImage</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create images, call:</p>
</div>
<div id="vkCreateImage" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="n">VkResult</span> <span class="nf">vkCreateImage</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkImageCreateInfo</span><span class="o">*</span>                    <span class="n">pCreateInfo</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">,</span>
    <span class="n">VkImage</span><span class="o">*</span>                                    <span class="n">pImage</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the image.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> structure
containing parameters to be used to create the image.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pImage</code> is a pointer to a <a href="chap12.html#VkImage">VkImage</a> handle in which the
resulting image object is returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateImage-flags-00939" href="chap12.html#VUID-vkCreateImage-flags-00939"></a> <span class="vuid">VUID-vkCreateImage-flags-00939</span><br>

If the <code>flags</code> member of <code>pCreateInfo</code> includes
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>, creating this <code>VkImage</code>
<strong class="purple">must</strong> not cause the total required sparse memory for all currently valid
sparse resources on the device to exceed
<code>VkPhysicalDeviceLimits</code>::<code>sparseAddressSpaceSize</code></p>
</li>
<li>
<p><a id="VUID-vkCreateImage-pNext-06389" href="chap12.html#VUID-vkCreateImage-pNext-06389"></a> <span class="vuid">VUID-vkCreateImage-pNext-06389</span><br>

If a <a href="chap12.html#VkBufferCollectionImageCreateInfoFUCHSIA">VkBufferCollectionImageCreateInfoFUCHSIA</a> has been chained to
<code>pNext</code>, <code>pCreateInfo</code> <strong class="purple">must</strong> match the
<a href="chap12.html#sysmem-chosen-create-infos">Sysmem chosen <code>VkImageCreateInfo</code></a>
excepting members <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>extent</code> and
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code> in the match criteria</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateImage-device-parameter" href="chap12.html#VUID-vkCreateImage-device-parameter"></a> <span class="vuid">VUID-vkCreateImage-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateImage-pCreateInfo-parameter" href="chap12.html#VUID-vkCreateImage-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateImage-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateImage-pAllocator-parameter" href="chap12.html#VUID-vkCreateImage-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateImage-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateImage-pImage-parameter" href="chap12.html#VUID-vkCreateImage-pImage-parameter"></a> <span class="vuid">VUID-vkCreateImage-pImage-parameter</span><br>
 <code>pImage</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_COMPRESSION_EXHAUSTED_EXT</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkImageCreateInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageCreateInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>          <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>              <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImageCreateFlags</span>       <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkImageType</span>              <span class="n">imageType</span><span class="p">;</span>
    <span class="n">VkFormat</span>                 <span class="n">format</span><span class="p">;</span>
    <span class="n">VkExtent3D</span>               <span class="n">extent</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                 <span class="n">mipLevels</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                 <span class="n">arrayLayers</span><span class="p">;</span>
    <span class="n">VkSampleCountFlagBits</span>    <span class="n">samples</span><span class="p">;</span>
    <span class="n">VkImageTiling</span>            <span class="n">tiling</span><span class="p">;</span>
    <span class="n">VkImageUsageFlags</span>        <span class="n">usage</span><span class="p">;</span>
    <span class="n">VkSharingMode</span>            <span class="n">sharingMode</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                 <span class="n">queueFamilyIndexCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint32_t</span><span class="o">*</span>          <span class="n">pQueueFamilyIndices</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>            <span class="n">initialLayout</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageCreateInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap12.html#VkImageCreateFlagBits">VkImageCreateFlagBits</a> describing
additional parameters of the image.</p>
</li>
<li>
<p><code>imageType</code> is a <a href="chap12.html#VkImageType">VkImageType</a> value specifying the basic
dimensionality of the image.
Layers in array textures do not count as a dimension for the purposes of
the image type.</p>
</li>
<li>
<p><code>format</code> is a <a href="chap43.html#VkFormat">VkFormat</a> describing the format and type of the
texel blocks that will be contained in the image.</p>
</li>
<li>
<p><code>extent</code> is a <a href="chap3.html#VkExtent3D">VkExtent3D</a> describing the number of data
elements in each dimension of the base level.</p>
</li>
<li>
<p><code>mipLevels</code> describes the number of levels of detail available for
minified sampling of the image.</p>
</li>
<li>
<p><code>arrayLayers</code> is the number of layers in the image.</p>
</li>
<li>
<p><code>samples</code> is a <a href="chap42.html#VkSampleCountFlagBits">VkSampleCountFlagBits</a> value specifying the
number of <a href="chap27.html#primsrast-multisampling">samples per texel</a>.</p>
</li>
<li>
<p><code>tiling</code> is a <a href="chap12.html#VkImageTiling">VkImageTiling</a> value specifying the tiling
arrangement of the texel blocks in memory.</p>
</li>
<li>
<p><code>usage</code> is a bitmask of <a href="chap12.html#VkImageUsageFlagBits">VkImageUsageFlagBits</a> describing the
intended usage of the image.</p>
</li>
<li>
<p><code>sharingMode</code> is a <a href="chap12.html#VkSharingMode">VkSharingMode</a> value specifying the sharing
mode of the image when it will be accessed by multiple queue families.</p>
</li>
<li>
<p><code>queueFamilyIndexCount</code> is the number of entries in the
<code>pQueueFamilyIndices</code> array.</p>
</li>
<li>
<p><code>pQueueFamilyIndices</code> is a pointer to an array of queue families
that will access this image.
It is ignored if <code>sharingMode</code> is not
<code>VK_SHARING_MODE_CONCURRENT</code>.</p>
</li>
<li>
<p><code>initialLayout</code> is a <a href="chap12.html#VkImageLayout">VkImageLayout</a> value specifying the
initial <a href="chap12.html#VkImageLayout">VkImageLayout</a> of all image subresources of the image.
See <a href="chap12.html#resources-image-layouts">Image Layouts</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Images created with <code>tiling</code> equal to <code>VK_IMAGE_TILING_LINEAR</code> have
further restrictions on their limits and capabilities compared to images
created with <code>tiling</code> equal to <code>VK_IMAGE_TILING_OPTIMAL</code>.
Creation of images with tiling <code>VK_IMAGE_TILING_LINEAR</code> <strong class="purple">may</strong> not be
supported unless other parameters meet all of the constraints:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>imageType</code> is <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><code>format</code> is not a depth/stencil format</p>
</li>
<li>
<p><code>mipLevels</code> is 1</p>
</li>
<li>
<p><code>arrayLayers</code> is 1</p>
</li>
<li>
<p><code>samples</code> is <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><code>usage</code> only includes <code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> and/or
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Images created with one of the <a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">formats that require a sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>, have further
restrictions on their limits and capabilities compared to images created
with other formats.
Creation of images with a format requiring
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">Y′C<sub>B</sub>C<sub>R</sub> conversion</a> <strong class="purple">may</strong> not
be supported unless other parameters meet all of the constraints:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>imageType</code> is <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><code>mipLevels</code> is 1</p>
</li>
<li>
<p><code>arrayLayers</code> is 1</p>
</li>
<li>
<p><code>samples</code> is <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Implementations <strong class="purple">may</strong> support additional limits and capabilities beyond those
listed above.</p>
</div>
<div class="paragraph">
<p>To determine the set of valid <code>usage</code> bits for a given format, call
<a href="chap43.html#vkGetPhysicalDeviceFormatProperties">vkGetPhysicalDeviceFormatProperties</a>.</p>
</div>
<div class="paragraph">
<p>If the size of the resultant image would exceed <code>maxResourceSize</code>, then
<a href="chap12.html#vkCreateImage">vkCreateImage</a> <strong class="purple">must</strong> fail and return
<code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code>.
This failure <strong class="purple">may</strong> occur even when all image creation parameters satisfy
their valid usage requirements.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>For images created without <code>VK_IMAGE_CREATE_EXTENDED_USAGE_BIT</code> a
<code>usage</code> bit is valid if it is supported for the format the image is
created with.</p>
</div>
<div class="paragraph">
<p>For images created with <code>VK_IMAGE_CREATE_EXTENDED_USAGE_BIT</code> a
<code>usage</code> bit is valid if it is supported for at least one of the formats
a <code>VkImageView</code> created from the image <strong class="purple">can</strong> have (see
<a href="chap12.html#resources-image-views">Image Views</a> for more detail).</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div id="resources-image-creation-limits" class="sidebarblock">
<div class="content">
<div class="title">Image Creation Limits</div>
<div class="paragraph">
<p>Valid values for some image creation parameters are limited by a numerical
upper bound or by inclusion in a bitset.
For example, <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>arrayLayers</code> is limited by
<code>imageCreateMaxArrayLayers</code>, defined below; and
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>samples</code> is limited by
<code>imageCreateSampleCounts</code>, also defined below.</p>
</div>
<div class="paragraph">
<p>Several limiting values are defined below, as well as assisting values from
which the limiting values are derived.
The limiting values are referenced by the relevant valid usage statements of
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Let <code>uint64_t imageCreateDrmFormatModifiers[]</code> be the set of
<a href="chap53.html#glossary-drm-format-modifier">Linux DRM format modifiers</a> that the
resultant image <strong class="purple">may</strong> have.</p>
<div class="ulist">
<ul>
<li>
<p>If <code>tiling</code> is not <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>,
then <code>imageCreateDrmFormatModifiers</code> is empty.</p>
</li>
<li>
<p>If <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains
<a href="chap12.html#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a>, then
<code>imageCreateDrmFormatModifiers</code> contains exactly one modifier,
<a href="chap12.html#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a>::<code>drmFormatModifier</code>.</p>
</li>
<li>
<p>If <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains
<a href="chap12.html#VkImageDrmFormatModifierListCreateInfoEXT">VkImageDrmFormatModifierListCreateInfoEXT</a>, then
<code>imageCreateDrmFormatModifiers</code> contains the entire array
<a href="chap12.html#VkImageDrmFormatModifierListCreateInfoEXT">VkImageDrmFormatModifierListCreateInfoEXT</a>::<code>pDrmFormatModifiers</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Let <code>VkBool32 imageCreateMaybeLinear</code> indicate if the resultant image
may be <a href="chap53.html#glossary-linear-resource">linear</a>.</p>
<div class="ulist">
<ul>
<li>
<p>If <code>tiling</code> is <code>VK_IMAGE_TILING_LINEAR</code>, then
<code>imageCreateMaybeLinear</code> is <code>VK_TRUE</code>.</p>
</li>
<li>
<p>If <code>tiling</code> is <code>VK_IMAGE_TILING_OPTIMAL</code>, then
<code>imageCreateMaybeLinear</code> is <code>VK_FALSE</code>.</p>
</li>
<li>
<p>If <code>tiling</code> is <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then
<code>imageCreateMaybeLinear</code> is <code>VK_TRUE</code> if and only if
<code>imageCreateDrmFormatModifiers</code> contains
<code>DRM_FORMAT_MOD_LINEAR</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Let <code>VkFormatFeatureFlags imageCreateFormatFeatures</code> be the set of valid
<em>format features</em> available during image creation.</p>
<div class="ulist">
<ul>
<li>
<p>If <code>tiling</code> is <code>VK_IMAGE_TILING_LINEAR</code>, then
<code>imageCreateFormatFeatures</code> is the value of
<a href="chap43.html#VkFormatProperties">VkFormatProperties</a>::<code>linearTilingFeatures</code> found by calling
<a href="chap43.html#vkGetPhysicalDeviceFormatProperties">vkGetPhysicalDeviceFormatProperties</a> with parameter <code>format</code>
equal to <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code>.</p>
</li>
<li>
<p>If <code>tiling</code> is <code>VK_IMAGE_TILING_OPTIMAL</code>,
and if the <code>pNext</code> chain includes no <a href="chap12.html#VkExternalFormatANDROID">VkExternalFormatANDROID</a>
structure with non-zero <code>externalFormat</code>,
then <code>imageCreateFormatFeatures</code> is the value of
<a href="chap43.html#VkFormatProperties">VkFormatProperties</a>::<code>optimalTilingFeatures</code> found by calling
<a href="chap43.html#vkGetPhysicalDeviceFormatProperties">vkGetPhysicalDeviceFormatProperties</a> with parameter <code>format</code>
equal to <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code>.</p>
</li>
<li>
<p>If <code>tiling</code> is <code>VK_IMAGE_TILING_OPTIMAL</code>, and if the
<code>pNext</code> chain includes a <a href="chap12.html#VkExternalFormatANDROID">VkExternalFormatANDROID</a> structure
with non-zero <code>externalFormat</code>, then
<code>imageCreateFormatFeatures</code> is the value of
<a href="chap11.html#VkAndroidHardwareBufferFormatPropertiesANDROID">VkAndroidHardwareBufferFormatPropertiesANDROID</a>::<code>formatFeatures</code>
obtained by <a href="chap11.html#vkGetAndroidHardwareBufferPropertiesANDROID">vkGetAndroidHardwareBufferPropertiesANDROID</a> with a
matching <code>externalFormat</code> value.</p>
</li>
<li>
<p>If the <code>pNext</code> chain includes a
<a href="chap12.html#VkBufferCollectionImageCreateInfoFUCHSIA">VkBufferCollectionImageCreateInfoFUCHSIA</a> structure, then
<code>imageCreateFormatFeatures</code> is the value of
<a href="chap12.html#VkBufferCollectionPropertiesFUCHSIA">VkBufferCollectionPropertiesFUCHSIA</a>::<code>formatFeatures</code> found
by calling <a href="chap12.html#vkGetBufferCollectionPropertiesFUCHSIA">vkGetBufferCollectionPropertiesFUCHSIA</a> with a
parameter <code>collection</code> equal to
<a href="chap12.html#VkBufferCollectionImageCreateInfoFUCHSIA">VkBufferCollectionImageCreateInfoFUCHSIA</a>::<code>collection</code></p>
</li>
<li>
<p>If <code>tiling</code> is <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then
the value of <code>imageCreateFormatFeatures</code> is found by calling
<a href="chap43.html#vkGetPhysicalDeviceFormatProperties2">vkGetPhysicalDeviceFormatProperties2</a> with
<a href="chap44.html#VkImageFormatProperties">VkImageFormatProperties</a>::<code>format</code> equal to
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code> and with
<a href="chap43.html#VkDrmFormatModifierPropertiesListEXT">VkDrmFormatModifierPropertiesListEXT</a> chained into
<a href="chap43.html#VkFormatProperties2">VkFormatProperties2</a>; by collecting all members of the returned
array
<a href="chap43.html#VkDrmFormatModifierPropertiesListEXT">VkDrmFormatModifierPropertiesListEXT</a>::<code>pDrmFormatModifierProperties</code>
whose <code>drmFormatModifier</code> belongs to
<code>imageCreateDrmFormatModifiers</code>; and by taking the bitwise
intersection, over the collected array members, of
<code>drmFormatModifierTilingFeatures</code>.
(The resultant <code>imageCreateFormatFeatures</code> <strong class="purple">may</strong> be empty).</p>
</li>
</ul>
</div>
</li>
<li>
<p>Let <code>VkImageFormatProperties2 imageCreateImageFormatPropertiesList[]</code> be
defined as follows.</p>
<div class="ulist">
<ul>
<li>
<p>If <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains no
<a href="chap12.html#VkExternalFormatANDROID">VkExternalFormatANDROID</a> structure with non-zero
<code>externalFormat</code>, then <code>imageCreateImageFormatPropertiesList</code>
is
the list of structures obtained by calling
<a href="chap44.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a>, possibly multiple
times, as follows:</p>
<div class="ulist">
<ul>
<li>
<p>The parameters <a href="chap44.html#VkPhysicalDeviceImageFormatInfo2">VkPhysicalDeviceImageFormatInfo2</a>::<code>format</code>,
<code>imageType</code>, <code>tiling</code>, <code>usage</code>, and <code>flags</code> <strong class="purple">must</strong> be
equal to those in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>.</p>
</li>
<li>
<p>If <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains a
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure whose
<code>handleTypes</code> is not <code>0</code>, then
<a href="chap44.html#VkPhysicalDeviceImageFormatInfo2">VkPhysicalDeviceImageFormatInfo2</a>::<code>pNext</code> <strong class="purple">must</strong> contain a
<a href="chap44.html#VkPhysicalDeviceExternalImageFormatInfo">VkPhysicalDeviceExternalImageFormatInfo</a> structure whose
<code>handleType</code> is not <code>0</code>; and
<a href="chap44.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a> <strong class="purple">must</strong> be called for
each handle type in
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code>, successively
setting
<a href="chap44.html#VkPhysicalDeviceExternalImageFormatInfo">VkPhysicalDeviceExternalImageFormatInfo</a>::<code>handleType</code> on
each call.</p>
</li>
<li>
<p>If <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains no
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure, or contains a
structure whose <code>handleTypes</code> is <code>0</code>, then
<a href="chap44.html#VkPhysicalDeviceImageFormatInfo2">VkPhysicalDeviceImageFormatInfo2</a>::<code>pNext</code> <strong class="purple">must</strong> either
contain no <a href="chap44.html#VkPhysicalDeviceExternalImageFormatInfo">VkPhysicalDeviceExternalImageFormatInfo</a> structure, or
contain a structure whose <code>handleType</code> is <code>0</code>.</p>
</li>
<li>
<p>If <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains a
<a href="chap39.html#VkVideoProfilesKHR">VkVideoProfilesKHR</a> structure then
<a href="chap44.html#VkPhysicalDeviceImageFormatInfo2">VkPhysicalDeviceImageFormatInfo2</a>::<code>pNext</code> <strong class="purple">must</strong> also contain
the same <a href="chap39.html#VkVideoProfilesKHR">VkVideoProfilesKHR</a> structure on each call.</p>
</li>
<li>
<p>If <code>tiling</code> is <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>,
then:</p>
<div class="ulist">
<ul>
<li>
<p><a href="chap44.html#VkPhysicalDeviceImageFormatInfo2">VkPhysicalDeviceImageFormatInfo2</a>::<code>pNext</code> <strong class="purple">must</strong> contain a
<a href="chap44.html#VkPhysicalDeviceImageDrmFormatModifierInfoEXT">VkPhysicalDeviceImageDrmFormatModifierInfoEXT</a> structure where
<code>sharingMode</code> is equal to
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>sharingMode</code>;</p>
</li>
<li>
<p>if <code>sharingMode</code> is <code>VK_SHARING_MODE_CONCURRENT</code>, then
<code>queueFamilyIndexCount</code> and <code>pQueueFamilyIndices</code> <strong class="purple">must</strong> be
equal to those in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>;</p>
</li>
<li>
<p>if <code>flags</code> contains <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code>,
then the <a href="chap12.html#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a> structure included in the
<code>pNext</code> chain of <a href="chap44.html#VkPhysicalDeviceImageFormatInfo2">VkPhysicalDeviceImageFormatInfo2</a> <strong class="purple">must</strong> be
equivalent to the one included in the <code>pNext</code> chain of
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>;</p>
</li>
<li>
<p>if <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains a
<a href="chap12.html#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a> structure, then the
<a href="chap44.html#VkPhysicalDeviceImageFormatInfo2">VkPhysicalDeviceImageFormatInfo2</a>::<code>pNext</code> chain <strong class="purple">must</strong>
contain an equivalent structure;</p>
</li>
<li>
<p><a href="chap44.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a> <strong class="purple">must</strong> be called for
each modifier in <code>imageCreateDrmFormatModifiers</code>, successively
setting
<a href="chap44.html#VkPhysicalDeviceImageDrmFormatModifierInfoEXT">VkPhysicalDeviceImageDrmFormatModifierInfoEXT</a>::<code>drmFormatModifier</code>
on each call.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If <code>tiling</code> is not <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>,
then <a href="chap44.html#VkPhysicalDeviceImageFormatInfo2">VkPhysicalDeviceImageFormatInfo2</a>::<code>pNext</code> <strong class="purple">must</strong> contain
no <a href="chap44.html#VkPhysicalDeviceImageDrmFormatModifierInfoEXT">VkPhysicalDeviceImageDrmFormatModifierInfoEXT</a> structure.</p>
</li>
<li>
<p>If any call to <a href="chap44.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a> returns
an error, then <code>imageCreateImageFormatPropertiesList</code> is defined
to be the empty list.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains a
<a href="chap12.html#VkExternalFormatANDROID">VkExternalFormatANDROID</a> structure with non-zero
<code>externalFormat</code>, then <code>imageCreateImageFormatPropertiesList</code>
contains a single element where:</p>
<div class="ulist">
<ul>
<li>
<p><code>VkImageFormatProperties</code>::<code>maxMipLevels</code> is
<span class="eq">⌊log<sub>2</sub>(max(<code>extent.width</code>, <code>extent.height</code>,
<code>extent.depth</code>))⌋ +  1</span>.</p>
</li>
<li>
<p><code>VkImageFormatProperties</code>::<code>maxArrayLayers</code> is
<a href="chap42.html#VkPhysicalDeviceLimits">VkPhysicalDeviceLimits</a>::<code>maxImageArrayLayers</code>.</p>
</li>
<li>
<p>Each component of <code>VkImageFormatProperties</code>::<code>maxExtent</code> is
<a href="chap42.html#VkPhysicalDeviceLimits">VkPhysicalDeviceLimits</a>::<code>maxImageDimension2D</code>.</p>
</li>
<li>
<p><code>VkImageFormatProperties</code>::<code>sampleCounts</code> contains exactly
<code>VK_SAMPLE_COUNT_1_BIT</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Let <code>uint32_t imageCreateMaxMipLevels</code> be
the minimum value of <a href="chap44.html#VkImageFormatProperties">VkImageFormatProperties</a>::<code>maxMipLevels</code>
in <code>imageCreateImageFormatPropertiesList</code>.
The value is undefined if <code>imageCreateImageFormatPropertiesList</code> is
empty.</p>
</li>
<li>
<p>Let <code>uint32_t imageCreateMaxArrayLayers</code> be
the minimum value of <a href="chap44.html#VkImageFormatProperties">VkImageFormatProperties</a>::<code>maxArrayLayers</code>
in <code>imageCreateImageFormatPropertiesList</code>.
The value is undefined if <code>imageCreateImageFormatPropertiesList</code> is
empty.</p>
</li>
<li>
<p>Let <code>VkExtent3D imageCreateMaxExtent</code> be
the component-wise minimum over all
<a href="chap44.html#VkImageFormatProperties">VkImageFormatProperties</a>::<code>maxExtent</code> values in
<code>imageCreateImageFormatPropertiesList</code>.
The value is undefined if <code>imageCreateImageFormatPropertiesList</code> is
empty.</p>
</li>
<li>
<p>Let <code>VkSampleCountFlags imageCreateSampleCounts</code> be
the intersection of each
<a href="chap44.html#VkImageFormatProperties">VkImageFormatProperties</a>::<code>sampleCounts</code> in
<code>imageCreateImageFormatPropertiesList</code>.
The value is undefined if <code>imageCreateImageFormatPropertiesList</code> is
empty.</p>
</li>
<li>
<p>Let <code>VkVideoFormatPropertiesKHR videoFormatProperties[]</code> be defined as
follows.</p>
<div class="ulist">
<ul>
<li>
<p>If <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains a
<a href="chap39.html#VkVideoProfilesKHR">VkVideoProfilesKHR</a> structure, then <code>videoFormatProperties</code> is the
list of structures obtained by calling
<a href="chap39.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> with
<a href="chap39.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a>::<code>imageUsage</code> equal to the
<code>usage</code> member of <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> and
<a href="chap39.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a>::<code>pNext</code> containing the
same <a href="chap39.html#VkVideoProfilesKHR">VkVideoProfilesKHR</a> structure chained to
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>.</p>
</li>
<li>
<p>If <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code> contains no
<a href="chap39.html#VkVideoProfilesKHR">VkVideoProfilesKHR</a> structure, then <code>videoFormatProperties</code> is an
empty list.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Let <code>VkBool32 supportedVideoFormat</code> indicate if the image parameters are
supported by the specified video profiles.</p>
<div class="ulist">
<ul>
<li>
<p><code>supportedVideoFormat</code> is <code>VK_TRUE</code> if there exists an element in
the <code>videoFormatProperties</code> list for which all of the following
conditions are true:</p>
<div class="ulist">
<ul>
<li>
<p><a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code> equals
<a href="chap39.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a>::<code>format</code>.</p>
</li>
<li>
<p><a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>flags</code> only contains bits also set in
<a href="chap39.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a>::<code>imageCreateFlags</code>.</p>
</li>
<li>
<p><a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>imageType</code> equals
<a href="chap39.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a>::<code>imageType</code>.</p>
</li>
<li>
<p><a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>tiling</code> equals
<a href="chap39.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a>::<code>imageTiling</code>.</p>
</li>
<li>
<p><a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code> only contains bits also set in
<a href="chap39.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a>::<code>imageUsageFlags</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Otherwise <code>supportedVideoFormat</code> is <code>VK_FALSE</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCreateInfo-imageCreateMaxMipLevels-02251" href="chap12.html#VUID-VkImageCreateInfo-imageCreateMaxMipLevels-02251"></a> <span class="vuid">VUID-VkImageCreateInfo-imageCreateMaxMipLevels-02251</span><br>

Each of the following values (as described in
<a href="chap12.html#resources-image-creation-limits">Image Creation Limits</a>) <strong class="purple">must</strong> not be
undefined : <code>imageCreateMaxMipLevels</code>,
<code>imageCreateMaxArrayLayers</code>, <code>imageCreateMaxExtent</code>, and
<code>imageCreateSampleCounts</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-sharingMode-00941" href="chap12.html#VUID-VkImageCreateInfo-sharingMode-00941"></a> <span class="vuid">VUID-VkImageCreateInfo-sharingMode-00941</span><br>

If <code>sharingMode</code> is <code>VK_SHARING_MODE_CONCURRENT</code>,
<code>pQueueFamilyIndices</code> <strong class="purple">must</strong> be a valid pointer to an array of
<code>queueFamilyIndexCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-sharingMode-00942" href="chap12.html#VUID-VkImageCreateInfo-sharingMode-00942"></a> <span class="vuid">VUID-VkImageCreateInfo-sharingMode-00942</span><br>

If <code>sharingMode</code> is <code>VK_SHARING_MODE_CONCURRENT</code>,
<code>queueFamilyIndexCount</code> <strong class="purple">must</strong> be greater than <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-sharingMode-01420" href="chap12.html#VUID-VkImageCreateInfo-sharingMode-01420"></a> <span class="vuid">VUID-VkImageCreateInfo-sharingMode-01420</span><br>

If <code>sharingMode</code> is <code>VK_SHARING_MODE_CONCURRENT</code>, each element
of <code>pQueueFamilyIndices</code> <strong class="purple">must</strong> be unique and <strong class="purple">must</strong> be less than
<code>pQueueFamilyPropertyCount</code> returned by either
<a href="chap5.html#vkGetPhysicalDeviceQueueFamilyProperties">vkGetPhysicalDeviceQueueFamilyProperties</a> or
<a href="chap5.html#vkGetPhysicalDeviceQueueFamilyProperties2">vkGetPhysicalDeviceQueueFamilyProperties2</a> for the
<code>physicalDevice</code> that was used to create <code>device</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-01974" href="chap12.html#VUID-VkImageCreateInfo-pNext-01974"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-01974</span><br>

If the <code>pNext</code> chain includes a <a href="chap12.html#VkExternalFormatANDROID">VkExternalFormatANDROID</a>
structure, and its <code>externalFormat</code> member is non-zero the
<code>format</code> <strong class="purple">must</strong> be <code>VK_FORMAT_UNDEFINED</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-01975" href="chap12.html#VUID-VkImageCreateInfo-pNext-01975"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-01975</span><br>

If the <code>pNext</code> chain does not include a
<a href="chap12.html#VkExternalFormatANDROID">VkExternalFormatANDROID</a> structure, or does and its
<code>externalFormat</code> member is <code>0</code>, the <code>format</code> <strong class="purple">must</strong> not be
<code>VK_FORMAT_UNDEFINED</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-extent-00944" href="chap12.html#VUID-VkImageCreateInfo-extent-00944"></a> <span class="vuid">VUID-VkImageCreateInfo-extent-00944</span><br>

<code>extent.width</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-extent-00945" href="chap12.html#VUID-VkImageCreateInfo-extent-00945"></a> <span class="vuid">VUID-VkImageCreateInfo-extent-00945</span><br>

<code>extent.height</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-extent-00946" href="chap12.html#VUID-VkImageCreateInfo-extent-00946"></a> <span class="vuid">VUID-VkImageCreateInfo-extent-00946</span><br>

<code>extent.depth</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-mipLevels-00947" href="chap12.html#VUID-VkImageCreateInfo-mipLevels-00947"></a> <span class="vuid">VUID-VkImageCreateInfo-mipLevels-00947</span><br>

<code>mipLevels</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-arrayLayers-00948" href="chap12.html#VUID-VkImageCreateInfo-arrayLayers-00948"></a> <span class="vuid">VUID-VkImageCreateInfo-arrayLayers-00948</span><br>

<code>arrayLayers</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-00949" href="chap12.html#VUID-VkImageCreateInfo-flags-00949"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-00949</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</code>,
<code>imageType</code> <strong class="purple">must</strong> be <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-02557" href="chap12.html#VUID-VkImageCreateInfo-flags-02557"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-02557</span><br>

If <code>flags</code> contains
<code>VK_IMAGE_USAGE_FRAGMENT_DENSITY_MAP_BIT_EXT</code>, <code>imageType</code> <strong class="purple">must</strong>
be <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-00950" href="chap12.html#VUID-VkImageCreateInfo-flags-00950"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-00950</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code>,
<code>imageType</code> <strong class="purple">must</strong> be <code>VK_IMAGE_TYPE_3D</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-extent-02252" href="chap12.html#VUID-VkImageCreateInfo-extent-02252"></a> <span class="vuid">VUID-VkImageCreateInfo-extent-02252</span><br>

<code>extent.width</code> <strong class="purple">must</strong> be less than or equal to
<code>imageCreateMaxExtent.width</code> (as defined in
<a href="chap12.html#resources-image-creation-limits">Image Creation Limits</a>)</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-extent-02253" href="chap12.html#VUID-VkImageCreateInfo-extent-02253"></a> <span class="vuid">VUID-VkImageCreateInfo-extent-02253</span><br>

<code>extent.height</code> <strong class="purple">must</strong> be less than or equal to
<code>imageCreateMaxExtent.height</code> (as defined in
<a href="chap12.html#resources-image-creation-limits">Image Creation Limits</a>)</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-extent-02254" href="chap12.html#VUID-VkImageCreateInfo-extent-02254"></a> <span class="vuid">VUID-VkImageCreateInfo-extent-02254</span><br>

<code>extent.depth</code> <strong class="purple">must</strong> be less than or equal to
<code>imageCreateMaxExtent.depth</code> (as defined in
<a href="chap12.html#resources-image-creation-limits">Image Creation Limits</a>)</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00954" href="chap12.html#VUID-VkImageCreateInfo-imageType-00954"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00954</span><br>

If <code>imageType</code> is <code>VK_IMAGE_TYPE_2D</code> and <code>flags</code> contains
<code>VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</code>, <code>extent.width</code> and
<code>extent.height</code> <strong class="purple">must</strong> be equal and <code>arrayLayers</code> <strong class="purple">must</strong> be
greater than or equal to 6</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00956" href="chap12.html#VUID-VkImageCreateInfo-imageType-00956"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00956</span><br>

If <code>imageType</code> is <code>VK_IMAGE_TYPE_1D</code>, both <code>extent.height</code>
and <code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00957" href="chap12.html#VUID-VkImageCreateInfo-imageType-00957"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00957</span><br>

If <code>imageType</code> is <code>VK_IMAGE_TYPE_2D</code>, <code>extent.depth</code> <strong class="purple">must</strong>
be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-mipLevels-00958" href="chap12.html#VUID-VkImageCreateInfo-mipLevels-00958"></a> <span class="vuid">VUID-VkImageCreateInfo-mipLevels-00958</span><br>

<code>mipLevels</code> <strong class="purple">must</strong> be less than or equal to the number of levels in
the complete mipmap chain based on <span class="eq"><code>extent.width</code></span>,
<span class="eq"><code>extent.height</code></span>, and <span class="eq"><code>extent.depth</code></span></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-mipLevels-02255" href="chap12.html#VUID-VkImageCreateInfo-mipLevels-02255"></a> <span class="vuid">VUID-VkImageCreateInfo-mipLevels-02255</span><br>

<code>mipLevels</code> <strong class="purple">must</strong> be less than or equal to
<code>imageCreateMaxMipLevels</code> (as defined in
<a href="chap12.html#resources-image-creation-limits">Image Creation Limits</a>)</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-arrayLayers-02256" href="chap12.html#VUID-VkImageCreateInfo-arrayLayers-02256"></a> <span class="vuid">VUID-VkImageCreateInfo-arrayLayers-02256</span><br>

<code>arrayLayers</code> <strong class="purple">must</strong> be less than or equal to
<code>imageCreateMaxArrayLayers</code> (as defined in
<a href="chap12.html#resources-image-creation-limits">Image Creation Limits</a>)</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00961" href="chap12.html#VUID-VkImageCreateInfo-imageType-00961"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00961</span><br>

If <code>imageType</code> is <code>VK_IMAGE_TYPE_3D</code>, <code>arrayLayers</code> <strong class="purple">must</strong> be
<code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-samples-02257" href="chap12.html#VUID-VkImageCreateInfo-samples-02257"></a> <span class="vuid">VUID-VkImageCreateInfo-samples-02257</span><br>

If <code>samples</code> is not <code>VK_SAMPLE_COUNT_1_BIT</code>, then
<code>imageType</code> <strong class="purple">must</strong> be <code>VK_IMAGE_TYPE_2D</code>, <code>flags</code> <strong class="purple">must</strong> not
contain <code>VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</code>, <code>mipLevels</code> <strong class="purple">must</strong>
be equal to <code>1</code>, and <code>imageCreateMaybeLinear</code> (as defined in
<a href="chap12.html#resources-image-creation-limits">Image Creation Limits</a>) <strong class="purple">must</strong> be
<code>VK_FALSE</code>,</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-samples-02558" href="chap12.html#VUID-VkImageCreateInfo-samples-02558"></a> <span class="vuid">VUID-VkImageCreateInfo-samples-02558</span><br>

If <code>samples</code> is not <code>VK_SAMPLE_COUNT_1_BIT</code>, <code>usage</code> <strong class="purple">must</strong>
not contain <code>VK_IMAGE_USAGE_FRAGMENT_DENSITY_MAP_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-00963" href="chap12.html#VUID-VkImageCreateInfo-usage-00963"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-00963</span><br>

If <code>usage</code> includes <code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code>,
then bits other than <code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code>,
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>, and
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code> <strong class="purple">must</strong> not be set</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-00964" href="chap12.html#VUID-VkImageCreateInfo-usage-00964"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-00964</span><br>

If <code>usage</code> includes <code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code>,
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>,
<code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code>, or
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code>, <code>extent.width</code> <strong class="purple">must</strong> be
less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxFramebufferWidth</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-00965" href="chap12.html#VUID-VkImageCreateInfo-usage-00965"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-00965</span><br>

If <code>usage</code> includes <code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code>,
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>,
<code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code>, or
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code>, <code>extent.height</code> <strong class="purple">must</strong> be
less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxFramebufferHeight</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-fragmentDensityMapOffset-06514" href="chap12.html#VUID-VkImageCreateInfo-fragmentDensityMapOffset-06514"></a> <span class="vuid">VUID-VkImageCreateInfo-fragmentDensityMapOffset-06514</span><br>

If the <a href="#features-fragmentDensityMapOffset" class="target-missing"><code>fragmentDensityMapOffset</code></a> feature is not enabled and <code>usage</code>
includes <code>VK_IMAGE_USAGE_FRAGMENT_DENSITY_MAP_BIT_EXT</code>,
<code>extent.width</code> <strong class="purple">must</strong> be less than or equal to
<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.80002em;vertical-align:-0.65002em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size2">⌈</span></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9322159999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">g</span><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">s</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">x</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="mord mtight"><span class="mord mathdefault mtight">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.02691em;">w</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight">h</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">b</span><span class="mord mathdefault mtight">u</span><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">W</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight">h</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size2">⌉</span></span></span></span></span></span></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-fragmentDensityMapOffset-06515" href="chap12.html#VUID-VkImageCreateInfo-fragmentDensityMapOffset-06515"></a> <span class="vuid">VUID-VkImageCreateInfo-fragmentDensityMapOffset-06515</span><br>

If the <a href="#features-fragmentDensityMapOffset" class="target-missing"><code>fragmentDensityMapOffset</code></a> feature is not enabled and <code>usage</code>
includes <code>VK_IMAGE_USAGE_FRAGMENT_DENSITY_MAP_BIT_EXT</code>,
<code>extent.height</code> <strong class="purple">must</strong> be less than or equal to
<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.80002em;vertical-align:-0.65002em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size2">⌈</span></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9322159999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">g</span><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">s</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">x</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="mord mtight"><span class="mord mathdefault mtight">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">h</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">g</span><span class="mord mathdefault mtight">h</span><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29011428571428566em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">b</span><span class="mord mathdefault mtight">u</span><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span><span class="mord mathdefault mtight" style="margin-right:0.10764em;">f</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">g</span><span class="mord mathdefault mtight">h</span><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.5480799999999999em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size2">⌉</span></span></span></span></span></span></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-00966" href="chap12.html#VUID-VkImageCreateInfo-usage-00966"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-00966</span><br>

If <code>usage</code> includes <code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code>,
<code>usage</code> <strong class="purple">must</strong> also contain at least one of
<code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code>,
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>, or
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-samples-02258" href="chap12.html#VUID-VkImageCreateInfo-samples-02258"></a> <span class="vuid">VUID-VkImageCreateInfo-samples-02258</span><br>

<code>samples</code> <strong class="purple">must</strong> be a bit value that is set in
<code>imageCreateSampleCounts</code> (as defined in
<a href="chap12.html#resources-image-creation-limits">Image Creation Limits</a>)</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-00968" href="chap12.html#VUID-VkImageCreateInfo-usage-00968"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-00968</span><br>

If the <a href="chap41.html#features-shaderStorageImageMultisample"><code>shaderStorageImageMultisample</code></a> feature is not enabled, and
<code>usage</code> contains <code>VK_IMAGE_USAGE_STORAGE_BIT</code>, <code>samples</code>
<strong class="purple">must</strong> be <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-00969" href="chap12.html#VUID-VkImageCreateInfo-flags-00969"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-00969</span><br>

If the <a href="chap41.html#features-sparseBinding"><code>sparseBinding</code></a> feature is not
enabled, <code>flags</code> <strong class="purple">must</strong> not contain
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-01924" href="chap12.html#VUID-VkImageCreateInfo-flags-01924"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-01924</span><br>

If the <a href="chap41.html#features-sparseResidencyAliased"><code>sparseResidencyAliased</code></a>
feature is not enabled, <code>flags</code> <strong class="purple">must</strong> not contain
<code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-tiling-04121" href="chap12.html#VUID-VkImageCreateInfo-tiling-04121"></a> <span class="vuid">VUID-VkImageCreateInfo-tiling-04121</span><br>

If <code>tiling</code> is <code>VK_IMAGE_TILING_LINEAR</code>, <code>flags</code> <strong class="purple">must</strong> not
contain <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00970" href="chap12.html#VUID-VkImageCreateInfo-imageType-00970"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00970</span><br>

If <code>imageType</code> is <code>VK_IMAGE_TYPE_1D</code>, <code>flags</code> <strong class="purple">must</strong> not
contain <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00971" href="chap12.html#VUID-VkImageCreateInfo-imageType-00971"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00971</span><br>

If the <a href="chap41.html#features-sparseResidencyImage2D"><code>sparseResidencyImage2D</code></a>
feature is not enabled, and <code>imageType</code> is <code>VK_IMAGE_TYPE_2D</code>,
<code>flags</code> <strong class="purple">must</strong> not contain <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00972" href="chap12.html#VUID-VkImageCreateInfo-imageType-00972"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00972</span><br>

If the <a href="chap41.html#features-sparseResidencyImage3D"><code>sparseResidencyImage3D</code></a>
feature is not enabled, and <code>imageType</code> is <code>VK_IMAGE_TYPE_3D</code>,
<code>flags</code> <strong class="purple">must</strong> not contain <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00973" href="chap12.html#VUID-VkImageCreateInfo-imageType-00973"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00973</span><br>

If the <a href="chap41.html#features-sparseResidency2Samples"><code>sparseResidency2Samples</code></a> feature is not enabled, <code>imageType</code>
is <code>VK_IMAGE_TYPE_2D</code>, and <code>samples</code> is
<code>VK_SAMPLE_COUNT_2_BIT</code>, <code>flags</code> <strong class="purple">must</strong> not contain
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00974" href="chap12.html#VUID-VkImageCreateInfo-imageType-00974"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00974</span><br>

If the <a href="chap41.html#features-sparseResidency4Samples"><code>sparseResidency4Samples</code></a> feature is not enabled, <code>imageType</code>
is <code>VK_IMAGE_TYPE_2D</code>, and <code>samples</code> is
<code>VK_SAMPLE_COUNT_4_BIT</code>, <code>flags</code> <strong class="purple">must</strong> not contain
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00975" href="chap12.html#VUID-VkImageCreateInfo-imageType-00975"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00975</span><br>

If the <a href="chap41.html#features-sparseResidency8Samples"><code>sparseResidency8Samples</code></a> feature is not enabled, <code>imageType</code>
is <code>VK_IMAGE_TYPE_2D</code>, and <code>samples</code> is
<code>VK_SAMPLE_COUNT_8_BIT</code>, <code>flags</code> <strong class="purple">must</strong> not contain
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-00976" href="chap12.html#VUID-VkImageCreateInfo-imageType-00976"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-00976</span><br>

If the <a href="chap41.html#features-sparseResidency16Samples"><code>sparseResidency16Samples</code></a> feature is not enabled, <code>imageType</code>
is <code>VK_IMAGE_TYPE_2D</code>, and <code>samples</code> is
<code>VK_SAMPLE_COUNT_16_BIT</code>, <code>flags</code> <strong class="purple">must</strong> not contain
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-00987" href="chap12.html#VUID-VkImageCreateInfo-flags-00987"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-00987</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> or
<code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code>, it <strong class="purple">must</strong> also contain
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-None-01925" href="chap12.html#VUID-VkImageCreateInfo-None-01925"></a> <span class="vuid">VUID-VkImageCreateInfo-None-01925</span><br>

If any of the bits <code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>,
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>, or
<code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code> are set,
<code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code> <strong class="purple">must</strong> not also be set</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-01890" href="chap12.html#VUID-VkImageCreateInfo-flags-01890"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-01890</span><br>

If the <a href="chap41.html#features-protectedMemory"><code>protectedMemory</code></a> feature is
not enabled, <code>flags</code> <strong class="purple">must</strong> not contain
<code>VK_IMAGE_CREATE_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-None-01891" href="chap12.html#VUID-VkImageCreateInfo-None-01891"></a> <span class="vuid">VUID-VkImageCreateInfo-None-01891</span><br>

If any of the bits <code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>,
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>, or
<code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code> are set,
<code>VK_IMAGE_CREATE_PROTECTED_BIT</code> <strong class="purple">must</strong> not also be set</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-00988" href="chap12.html#VUID-VkImageCreateInfo-pNext-00988"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-00988</span><br>

If the <code>pNext</code> chain includes a
<a href="chap12.html#VkExternalMemoryImageCreateInfoNV">VkExternalMemoryImageCreateInfoNV</a> structure, it <strong class="purple">must</strong> not contain
a <a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-00990" href="chap12.html#VUID-VkImageCreateInfo-pNext-00990"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-00990</span><br>

If the <code>pNext</code> chain includes a
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure, its <code>handleTypes</code>
member <strong class="purple">must</strong> only contain bits that are also in
<a href="chap44.html#VkExternalImageFormatProperties">VkExternalImageFormatProperties</a>::<code>externalMemoryProperties.compatibleHandleTypes</code>,
as returned by <a href="chap44.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a> with
<code>format</code>, <code>imageType</code>, <code>tiling</code>, <code>usage</code>, and
<code>flags</code> equal to those in this structure, and with a
<a href="chap44.html#VkPhysicalDeviceExternalImageFormatInfo">VkPhysicalDeviceExternalImageFormatInfo</a> structure included in the
<code>pNext</code> chain, with a <code>handleType</code> equal to any one of the
handle types specified in
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-00991" href="chap12.html#VUID-VkImageCreateInfo-pNext-00991"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-00991</span><br>

If the <code>pNext</code> chain includes a
<a href="chap12.html#VkExternalMemoryImageCreateInfoNV">VkExternalMemoryImageCreateInfoNV</a> structure, its <code>handleTypes</code>
member <strong class="purple">must</strong> only contain bits that are also in
<a href="chap44.html#VkExternalImageFormatPropertiesNV">VkExternalImageFormatPropertiesNV</a>::<code>externalMemoryProperties.compatibleHandleTypes</code>,
as returned by <a href="chap44.html#vkGetPhysicalDeviceExternalImageFormatPropertiesNV">vkGetPhysicalDeviceExternalImageFormatPropertiesNV</a>
with <code>format</code>, <code>imageType</code>, <code>tiling</code>, <code>usage</code>, and
<code>flags</code> equal to those in this structure, and with
<code>externalHandleType</code> equal to any one of the handle types specified
in <a href="chap12.html#VkExternalMemoryImageCreateInfoNV">VkExternalMemoryImageCreateInfoNV</a>::<code>handleTypes</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-physicalDeviceCount-01421" href="chap12.html#VUID-VkImageCreateInfo-physicalDeviceCount-01421"></a> <span class="vuid">VUID-VkImageCreateInfo-physicalDeviceCount-01421</span><br>

If the logical device was created with
<a href="chap5.html#VkDeviceGroupDeviceCreateInfo">VkDeviceGroupDeviceCreateInfo</a>::<code>physicalDeviceCount</code> equal to
1, <code>flags</code> <strong class="purple">must</strong> not contain
<code>VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-02259" href="chap12.html#VUID-VkImageCreateInfo-flags-02259"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-02259</span><br>

If <code>flags</code> contains
<code>VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT</code>, then
<code>mipLevels</code> <strong class="purple">must</strong> be one, <code>arrayLayers</code> <strong class="purple">must</strong> be one,
<code>imageType</code> <strong class="purple">must</strong> be <code>VK_IMAGE_TYPE_2D</code>.
and <code>imageCreateMaybeLinear</code> (as defined in
<a href="chap12.html#resources-image-creation-limits">Image Creation Limits</a>) <strong class="purple">must</strong> be
<code>VK_FALSE</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-01572" href="chap12.html#VUID-VkImageCreateInfo-flags-01572"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-01572</span><br>

If <code>flags</code> contains
<code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code>, then <code>format</code>
<strong class="purple">must</strong> be a <a href="chap48.html">compressed image format</a></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-01573" href="chap12.html#VUID-VkImageCreateInfo-flags-01573"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-01573</span><br>

If <code>flags</code> contains
<code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code>, then <code>flags</code>
<strong class="purple">must</strong> also contain <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-initialLayout-00993" href="chap12.html#VUID-VkImageCreateInfo-initialLayout-00993"></a> <span class="vuid">VUID-VkImageCreateInfo-initialLayout-00993</span><br>

<code>initialLayout</code> <strong class="purple">must</strong> be <code>VK_IMAGE_LAYOUT_UNDEFINED</code> or
<code>VK_IMAGE_LAYOUT_PREINITIALIZED</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-01443" href="chap12.html#VUID-VkImageCreateInfo-pNext-01443"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-01443</span><br>

If the <code>pNext</code> chain includes a
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> or
<code>VkExternalMemoryImageCreateInfoNV</code> structure whose
<code>handleTypes</code> member is not <code>0</code>, <code>initialLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_UNDEFINED</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-06410" href="chap12.html#VUID-VkImageCreateInfo-format-06410"></a> <span class="vuid">VUID-VkImageCreateInfo-format-06410</span><br>

If the image <code>format</code> is one of the
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">formats that require a
sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>, <code>mipLevels</code> <strong class="purple">must</strong> be 1</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-06411" href="chap12.html#VUID-VkImageCreateInfo-format-06411"></a> <span class="vuid">VUID-VkImageCreateInfo-format-06411</span><br>

If the image <code>format</code> is one of the
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">formats that require a
sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>, <code>samples</code> <strong class="purple">must</strong> be
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-06412" href="chap12.html#VUID-VkImageCreateInfo-format-06412"></a> <span class="vuid">VUID-VkImageCreateInfo-format-06412</span><br>

If the image <code>format</code> is one of the
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">formats that require a
sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>, <code>imageType</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-06413" href="chap12.html#VUID-VkImageCreateInfo-format-06413"></a> <span class="vuid">VUID-VkImageCreateInfo-format-06413</span><br>

If the image <code>format</code> is one of the
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">formats that require a
sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>, and the <code>ycbcrImageArrays</code> feature is
not enabled, <code>arrayLayers</code> <strong class="purple">must</strong> be 1</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageCreateFormatFeatures-02260" href="chap12.html#VUID-VkImageCreateInfo-imageCreateFormatFeatures-02260"></a> <span class="vuid">VUID-VkImageCreateInfo-imageCreateFormatFeatures-02260</span><br>

If <code>format</code> is a <em>multi-planar</em> format, and if
<code>imageCreateFormatFeatures</code> (as defined in
<a href="chap12.html#resources-image-creation-limits">Image Creation Limits</a>) does not
contain <code>VK_FORMAT_FEATURE_DISJOINT_BIT</code>, then <code>flags</code> <strong class="purple">must</strong> not
contain <code>VK_IMAGE_CREATE_DISJOINT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-01577" href="chap12.html#VUID-VkImageCreateInfo-format-01577"></a> <span class="vuid">VUID-VkImageCreateInfo-format-01577</span><br>

If <code>format</code> is not a <em>multi-planar</em> format, and <code>flags</code> does not
include <code>VK_IMAGE_CREATE_ALIAS_BIT</code>, <code>flags</code> <strong class="purple">must</strong> not contain
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-04712" href="chap12.html#VUID-VkImageCreateInfo-format-04712"></a> <span class="vuid">VUID-VkImageCreateInfo-format-04712</span><br>

If <code>format</code> has a <code>_422</code> or <code>_420</code> suffix, <code>width</code> <strong class="purple">must</strong>
be a multiple of 2</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-04713" href="chap12.html#VUID-VkImageCreateInfo-format-04713"></a> <span class="vuid">VUID-VkImageCreateInfo-format-04713</span><br>

If <code>format</code> has a <code>_420</code> suffix, <code>height</code> <strong class="purple">must</strong> be a multiple
of 2</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-tiling-02261" href="chap12.html#VUID-VkImageCreateInfo-tiling-02261"></a> <span class="vuid">VUID-VkImageCreateInfo-tiling-02261</span><br>

If <code>tiling</code> is <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then
the <code>pNext</code> chain <strong class="purple">must</strong> include exactly one of
<a href="chap12.html#VkImageDrmFormatModifierListCreateInfoEXT">VkImageDrmFormatModifierListCreateInfoEXT</a> or
<a href="chap12.html#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a> structures</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-02262" href="chap12.html#VUID-VkImageCreateInfo-pNext-02262"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-02262</span><br>

If the <code>pNext</code> chain includes a
<a href="chap12.html#VkImageDrmFormatModifierListCreateInfoEXT">VkImageDrmFormatModifierListCreateInfoEXT</a> or
<a href="chap12.html#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a> structure, then
<code>tiling</code> <strong class="purple">must</strong> be <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-tiling-02353" href="chap12.html#VUID-VkImageCreateInfo-tiling-02353"></a> <span class="vuid">VUID-VkImageCreateInfo-tiling-02353</span><br>

If <code>tiling</code> is <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code> and
<code>flags</code> contains <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code>, then the
<code>pNext</code> chain <strong class="purple">must</strong> include a <a href="chap12.html#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>
structure with non-zero <code>viewFormatCount</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-01533" href="chap12.html#VUID-VkImageCreateInfo-flags-01533"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-01533</span><br>

If <code>flags</code> contains
<code>VK_IMAGE_CREATE_SAMPLE_LOCATIONS_COMPATIBLE_DEPTH_BIT_EXT</code>
<code>format</code> <strong class="purple">must</strong> be a depth or depth/stencil format</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-02393" href="chap12.html#VUID-VkImageCreateInfo-pNext-02393"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-02393</span><br>

If the <code>pNext</code> chain includes a
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure whose <code>handleTypes</code>
member includes
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_ANDROID_HARDWARE_BUFFER_BIT_ANDROID</code>,
<code>imageType</code> <strong class="purple">must</strong> be <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-02394" href="chap12.html#VUID-VkImageCreateInfo-pNext-02394"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-02394</span><br>

If the <code>pNext</code> chain includes a
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure whose <code>handleTypes</code>
member includes
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_ANDROID_HARDWARE_BUFFER_BIT_ANDROID</code>,
<code>mipLevels</code> <strong class="purple">must</strong> either be <code>1</code> or equal to the number of levels in
the complete mipmap chain based on <span class="eq"><code>extent.width</code></span>,
<span class="eq"><code>extent.height</code></span>, and <span class="eq"><code>extent.depth</code></span></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-02396" href="chap12.html#VUID-VkImageCreateInfo-pNext-02396"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-02396</span><br>

If the <code>pNext</code> chain includes a <a href="chap12.html#VkExternalFormatANDROID">VkExternalFormatANDROID</a>
structure whose <code>externalFormat</code> member is not <code>0</code>, <code>flags</code>
<strong class="purple">must</strong> not include <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-02397" href="chap12.html#VUID-VkImageCreateInfo-pNext-02397"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-02397</span><br>

If the <code>pNext</code> chain includes a <a href="chap12.html#VkExternalFormatANDROID">VkExternalFormatANDROID</a>
structure whose <code>externalFormat</code> member is not <code>0</code>, <code>usage</code>
<strong class="purple">must</strong> not include any usages except <code>VK_IMAGE_USAGE_SAMPLED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-02398" href="chap12.html#VUID-VkImageCreateInfo-pNext-02398"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-02398</span><br>

If the <code>pNext</code> chain includes a <a href="chap12.html#VkExternalFormatANDROID">VkExternalFormatANDROID</a>
structure whose <code>externalFormat</code> member is not <code>0</code>, <code>tiling</code>
<strong class="purple">must</strong> be <code>VK_IMAGE_TILING_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-02795" href="chap12.html#VUID-VkImageCreateInfo-format-02795"></a> <span class="vuid">VUID-VkImageCreateInfo-format-02795</span><br>

If <code>format</code> is a depth-stencil format, <code>usage</code> includes
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>, and the <code>pNext</code>
chain includes a <a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure, then its
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> member <strong class="purple">must</strong>
also include <code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-02796" href="chap12.html#VUID-VkImageCreateInfo-format-02796"></a> <span class="vuid">VUID-VkImageCreateInfo-format-02796</span><br>

If <code>format</code> is a depth-stencil format, <code>usage</code> does not include
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>, and the <code>pNext</code>
chain includes a <a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure, then its
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> member <strong class="purple">must</strong>
also not include <code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-02797" href="chap12.html#VUID-VkImageCreateInfo-format-02797"></a> <span class="vuid">VUID-VkImageCreateInfo-format-02797</span><br>

If <code>format</code> is a depth-stencil format, <code>usage</code> includes
<code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code>, and the <code>pNext</code> chain
includes a <a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure, then its
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> member <strong class="purple">must</strong>
also include <code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-02798" href="chap12.html#VUID-VkImageCreateInfo-format-02798"></a> <span class="vuid">VUID-VkImageCreateInfo-format-02798</span><br>

If <code>format</code> is a depth-stencil format, <code>usage</code> does not include
<code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code>, and the <code>pNext</code> chain
includes a <a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure, then its
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code> member <strong class="purple">must</strong>
also not include <code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-Format-02536" href="chap12.html#VUID-VkImageCreateInfo-Format-02536"></a> <span class="vuid">VUID-VkImageCreateInfo-Format-02536</span><br>

If <code>Format</code> is a depth-stencil format and the <code>pNext</code> chain
includes a <a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure with its
<code>stencilUsage</code> member including
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code>, <code>extent.width</code> <strong class="purple">must</strong> be
less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxFramebufferWidth</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-02537" href="chap12.html#VUID-VkImageCreateInfo-format-02537"></a> <span class="vuid">VUID-VkImageCreateInfo-format-02537</span><br>

If <code>format</code> is a depth-stencil format and the <code>pNext</code> chain
includes a <a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure with its
<code>stencilUsage</code> member including
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code>, <code>extent.height</code> <strong class="purple">must</strong> be
less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxFramebufferHeight</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-02538" href="chap12.html#VUID-VkImageCreateInfo-format-02538"></a> <span class="vuid">VUID-VkImageCreateInfo-format-02538</span><br>

If the <a href="chap41.html#features-shaderStorageImageMultisample"><code>shaderStorageImageMultisample</code></a> feature is not enabled,
<code>format</code> is a depth-stencil format and the <code>pNext</code> chain
includes a <a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure with its
<code>stencilUsage</code> including <code>VK_IMAGE_USAGE_STORAGE_BIT</code>,
<code>samples</code> <strong class="purple">must</strong> be <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-02050" href="chap12.html#VUID-VkImageCreateInfo-flags-02050"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-02050</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_CORNER_SAMPLED_BIT_NV</code>,
<code>imageType</code> <strong class="purple">must</strong> be <code>VK_IMAGE_TYPE_2D</code> or
<code>VK_IMAGE_TYPE_3D</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-02051" href="chap12.html#VUID-VkImageCreateInfo-flags-02051"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-02051</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_CORNER_SAMPLED_BIT_NV</code>, it
<strong class="purple">must</strong> not contain <code>VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</code> and the
<code>format</code> <strong class="purple">must</strong> not be a depth/stencil format</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-02052" href="chap12.html#VUID-VkImageCreateInfo-flags-02052"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-02052</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_CORNER_SAMPLED_BIT_NV</code> and
<code>imageType</code> is <code>VK_IMAGE_TYPE_2D</code>, <code>extent.width</code> and
<code>extent.height</code> <strong class="purple">must</strong> be greater than <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-02053" href="chap12.html#VUID-VkImageCreateInfo-flags-02053"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-02053</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_CORNER_SAMPLED_BIT_NV</code> and
<code>imageType</code> is <code>VK_IMAGE_TYPE_3D</code>, <code>extent.width</code>,
<code>extent.height</code>, and <code>extent.depth</code> <strong class="purple">must</strong> be greater than <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-02082" href="chap12.html#VUID-VkImageCreateInfo-imageType-02082"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-02082</span><br>

If <code>usage</code> includes
<code>VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code>,
<code>imageType</code> <strong class="purple">must</strong> be <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-samples-02083" href="chap12.html#VUID-VkImageCreateInfo-samples-02083"></a> <span class="vuid">VUID-VkImageCreateInfo-samples-02083</span><br>

If <code>usage</code> includes
<code>VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code>,
<code>samples</code> <strong class="purple">must</strong> be <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-tiling-02084" href="chap12.html#VUID-VkImageCreateInfo-tiling-02084"></a> <span class="vuid">VUID-VkImageCreateInfo-tiling-02084</span><br>

If <code>usage</code> includes <code>VK_IMAGE_USAGE_SHADING_RATE_IMAGE_BIT_NV</code>,
<code>tiling</code> <strong class="purple">must</strong> be <code>VK_IMAGE_TILING_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-02565" href="chap12.html#VUID-VkImageCreateInfo-flags-02565"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-02565</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code>,
<code>tiling</code> <strong class="purple">must</strong> be <code>VK_IMAGE_TILING_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-02566" href="chap12.html#VUID-VkImageCreateInfo-flags-02566"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-02566</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code>,
<code>imageType</code> <strong class="purple">must</strong> be <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-02567" href="chap12.html#VUID-VkImageCreateInfo-flags-02567"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-02567</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code>,
<code>flags</code> <strong class="purple">must</strong> not contain <code>VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-02568" href="chap12.html#VUID-VkImageCreateInfo-flags-02568"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-02568</span><br>

If <code>flags</code> contains <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code>,
<code>mipLevels</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-04992" href="chap12.html#VUID-VkImageCreateInfo-usage-04992"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-04992</span><br>

If <code>usage</code> includes <code>VK_IMAGE_USAGE_INVOCATION_MASK_BIT_HUAWEI</code>,
<code>tiling</code> <strong class="purple">must</strong> be <code>VK_IMAGE_TILING_LINEAR</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageView2DOn3DImage-04459" href="chap12.html#VUID-VkImageCreateInfo-imageView2DOn3DImage-04459"></a> <span class="vuid">VUID-VkImageCreateInfo-imageView2DOn3DImage-04459</span><br>

If the <code><a href="chap50.html#VK_KHR_portability_subset">VK_KHR_portability_subset</a></code> extension is enabled, and
<a href="chap41.html#VkPhysicalDevicePortabilitySubsetFeaturesKHR">VkPhysicalDevicePortabilitySubsetFeaturesKHR</a>::<code>imageView2DOn3DImage</code>
is <code>VK_FALSE</code>, <code>flags</code> <strong class="purple">must</strong> not contain
<code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-multisampleArrayImage-04460" href="chap12.html#VUID-VkImageCreateInfo-multisampleArrayImage-04460"></a> <span class="vuid">VUID-VkImageCreateInfo-multisampleArrayImage-04460</span><br>

If the <code><a href="chap50.html#VK_KHR_portability_subset">VK_KHR_portability_subset</a></code> extension is enabled, and
<a href="chap41.html#VkPhysicalDevicePortabilitySubsetFeaturesKHR">VkPhysicalDevicePortabilitySubsetFeaturesKHR</a>::<code>multisampleArrayImage</code>
is <code>VK_FALSE</code>, and <code>samples</code> is not <code>VK_SAMPLE_COUNT_1_BIT</code>,
then <code>arrayLayers</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-06722" href="chap12.html#VUID-VkImageCreateInfo-pNext-06722"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-06722</span><br>

If a <a href="chap12.html#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a> structure was included in the
<code>pNext</code> chain and
<a href="chap12.html#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>::<code>viewFormatCount</code> is not zero,
then each format in
<a href="chap12.html#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>::<code>pViewFormats</code> <strong class="purple">must</strong> either be
compatible with the <code>format</code> as described in the
<a href="chap43.html#formats-compatibility">compatibility table</a> or, if <code>flags</code>
contains <code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code>, be an
uncompressed format that is size-compatible with <code>format</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-04738" href="chap12.html#VUID-VkImageCreateInfo-flags-04738"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-04738</span><br>

If <code>flags</code> does not contain <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code>
and the <code>pNext</code> chain includes a <a href="chap12.html#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>
structure, then <a href="chap12.html#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>::<code>viewFormatCount</code>
<strong class="purple">must</strong> be <code>0</code> or <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-04815" href="chap12.html#VUID-VkImageCreateInfo-usage-04815"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-04815</span><br>

If <code>usage</code> includes <code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code>,
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code>, then the <code>pNext</code>
chain <strong class="purple">must</strong> include a valid <a href="chap39.html#VkVideoProfilesKHR">VkVideoProfilesKHR</a> structure with
<code>profileCount</code> greater than <code>0</code> and <code>pProfiles</code> including at
least one <a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a>::<code>videoCodecOperation</code> specifying
a decode operation</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-04816" href="chap12.html#VUID-VkImageCreateInfo-usage-04816"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-04816</span><br>

If <code>usage</code> includes <code>VK_IMAGE_USAGE_VIDEO_ENCODE_DST_BIT_KHR</code>,
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code>,
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code>, then the <code>pNext</code>
chain <strong class="purple">must</strong> include a valid <a href="chap39.html#VkVideoProfilesKHR">VkVideoProfilesKHR</a> structure with
<code>profileCount</code> greater than <code>0</code> and <code>pProfiles</code> including at
least one <a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a>::<code>videoCodecOperation</code> specifying
an encode operation</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-06811" href="chap12.html#VUID-VkImageCreateInfo-pNext-06811"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-06811</span><br>

If the <code>pNext</code> chain includes a <a href="chap39.html#VkVideoProfilesKHR">VkVideoProfilesKHR</a> structure
then <code>supportedVideoFormat</code> <strong class="purple">must</strong> be <code>VK_TRUE</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-06390" href="chap12.html#VUID-VkImageCreateInfo-pNext-06390"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-06390</span><br>

If the <a href="chap12.html#VkImage">VkImage</a> is to be used to import memory from a
<a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a>, a
<a href="chap12.html#VkBufferCollectionImageCreateInfoFUCHSIA">VkBufferCollectionImageCreateInfoFUCHSIA</a> structure <strong class="purple">must</strong> be
chained to <code>pNext</code>.</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-multisampledRenderToSingleSampled-06882" href="chap12.html#VUID-VkImageCreateInfo-multisampledRenderToSingleSampled-06882"></a> <span class="vuid">VUID-VkImageCreateInfo-multisampledRenderToSingleSampled-06882</span><br>

If the <a href="chap41.html#features-multisampledRenderToSingleSampled"><code>multisampledRenderToSingleSampled</code></a> feature is not enabled,
<code>flags</code> <strong class="purple">must</strong> not contain
<code>VK_IMAGE_CREATE_MULTISAMPLED_RENDER_TO_SINGLE_SAMPLED_BIT_EXT</code>.</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-06883" href="chap12.html#VUID-VkImageCreateInfo-flags-06883"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-06883</span><br>

If <code>flags</code> contains
<code>VK_IMAGE_CREATE_MULTISAMPLED_RENDER_TO_SINGLE_SAMPLED_BIT_EXT</code>,
<code>samples</code> <strong class="purple">must</strong> be <code>VK_SAMPLE_COUNT_1_BIT</code>.</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-06743" href="chap12.html#VUID-VkImageCreateInfo-pNext-06743"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-06743</span><br>

If the <code>pNext</code> chain includes a <a href="chap12.html#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>
structure, <code>format</code> is a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar</a> format, and
<a href="chap12.html#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::<code>flags</code> includes
<code>VK_IMAGE_COMPRESSION_FIXED_RATE_EXPLICIT_EXT</code>, then
<a href="chap12.html#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::<code>compressionControlPlaneCount</code>
<strong class="purple">must</strong> be equal to the number of planes in <code>format</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-06744" href="chap12.html#VUID-VkImageCreateInfo-pNext-06744"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-06744</span><br>

If the <code>pNext</code> chain includes a <a href="chap12.html#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>
structure, <code>format</code> is a not
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar</a> format, and
<a href="chap12.html#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::<code>flags</code> includes
<code>VK_IMAGE_COMPRESSION_FIXED_RATE_EXPLICIT_EXT</code>, then
<a href="chap12.html#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::<code>compressionControlPlaneCount</code>
<strong class="purple">must</strong> be 1</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-06746" href="chap12.html#VUID-VkImageCreateInfo-pNext-06746"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-06746</span><br>

If the <code>pNext</code> chain includes a <a href="chap12.html#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>
structure, it <strong class="purple">must</strong> not contain a
<a href="chap12.html#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-06783" href="chap12.html#VUID-VkImageCreateInfo-pNext-06783"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-06783</span><br>

If the <code>pNext</code> chain includes a
<a href="chap11.html#VkExportMetalObjectCreateInfoEXT">VkExportMetalObjectCreateInfoEXT</a> structure, its
<code>exportObjectType</code> member <strong class="purple">must</strong> be either
<code>VK_EXPORT_METAL_OBJECT_TYPE_METAL_TEXTURE_BIT_EXT</code> or
<code>VK_EXPORT_METAL_OBJECT_TYPE_METAL_IOSURFACE_BIT_EXT</code>.</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-06784" href="chap12.html#VUID-VkImageCreateInfo-pNext-06784"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-06784</span><br>

If the <code>pNext</code> chain includes a <a href="chap11.html#VkImportMetalTextureInfoEXT">VkImportMetalTextureInfoEXT</a>
structure its <code>plane</code> member <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or
<code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>.</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-06785" href="chap12.html#VUID-VkImageCreateInfo-pNext-06785"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-06785</span><br>

If the <code>pNext</code> chain includes a <a href="chap11.html#VkImportMetalTextureInfoEXT">VkImportMetalTextureInfoEXT</a>
structure and the image does not have a multi-planar format, then
<a href="chap11.html#VkImportMetalTextureInfoEXT">VkImportMetalTextureInfoEXT</a>::<code>plane</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>.</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-06786" href="chap12.html#VUID-VkImageCreateInfo-pNext-06786"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-06786</span><br>

If the <code>pNext</code> chain includes a <a href="chap11.html#VkImportMetalTextureInfoEXT">VkImportMetalTextureInfoEXT</a>
structure and the image has a multi-planar format with only two planes,
then <a href="chap11.html#VkImportMetalTextureInfoEXT">VkImportMetalTextureInfoEXT</a>::<code>plane</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCreateInfo-sType-sType" href="chap12.html#VUID-VkImageCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkImageCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-pNext-pNext" href="chap12.html#VUID-VkImageCreateInfo-pNext-pNext"></a> <span class="vuid">VUID-VkImageCreateInfo-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap12.html#VkBufferCollectionImageCreateInfoFUCHSIA">VkBufferCollectionImageCreateInfoFUCHSIA</a>, <a href="chap12.html#VkDedicatedAllocationImageCreateInfoNV">VkDedicatedAllocationImageCreateInfoNV</a>, <a href="chap11.html#VkExportMetalObjectCreateInfoEXT">VkExportMetalObjectCreateInfoEXT</a>, <a href="chap12.html#VkExternalFormatANDROID">VkExternalFormatANDROID</a>, <a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>, <a href="chap12.html#VkExternalMemoryImageCreateInfoNV">VkExternalMemoryImageCreateInfoNV</a>, <a href="chap12.html#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>, <a href="chap12.html#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a>, <a href="chap12.html#VkImageDrmFormatModifierListCreateInfoEXT">VkImageDrmFormatModifierListCreateInfoEXT</a>, <a href="chap12.html#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>, <a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>, <a href="chap12.html#VkImageSwapchainCreateInfoKHR">VkImageSwapchainCreateInfoKHR</a>, <a href="chap11.html#VkImportMetalIOSurfaceInfoEXT">VkImportMetalIOSurfaceInfoEXT</a>, <a href="chap11.html#VkImportMetalTextureInfoEXT">VkImportMetalTextureInfoEXT</a>, or <a href="chap39.html#VkVideoProfilesKHR">VkVideoProfilesKHR</a></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-sType-unique" href="chap12.html#VUID-VkImageCreateInfo-sType-unique"></a> <span class="vuid">VUID-VkImageCreateInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique, with the exception of structures of type <a href="chap11.html#VkExportMetalObjectCreateInfoEXT">VkExportMetalObjectCreateInfoEXT</a> or <a href="chap11.html#VkImportMetalTextureInfoEXT">VkImportMetalTextureInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-flags-parameter" href="chap12.html#VUID-VkImageCreateInfo-flags-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap12.html#VkImageCreateFlagBits">VkImageCreateFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-imageType-parameter" href="chap12.html#VUID-VkImageCreateInfo-imageType-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-imageType-parameter</span><br>
 <code>imageType</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageType">VkImageType</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-format-parameter" href="chap12.html#VUID-VkImageCreateInfo-format-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-format-parameter</span><br>
 <code>format</code> <strong class="purple">must</strong> be a valid <a href="chap43.html#VkFormat">VkFormat</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-samples-parameter" href="chap12.html#VUID-VkImageCreateInfo-samples-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-samples-parameter</span><br>
 <code>samples</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkSampleCountFlagBits">VkSampleCountFlagBits</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-tiling-parameter" href="chap12.html#VUID-VkImageCreateInfo-tiling-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-tiling-parameter</span><br>
 <code>tiling</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageTiling">VkImageTiling</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-parameter" href="chap12.html#VUID-VkImageCreateInfo-usage-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-parameter</span><br>
 <code>usage</code> <strong class="purple">must</strong> be a valid combination of <a href="chap12.html#VkImageUsageFlagBits">VkImageUsageFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-usage-requiredbitmask" href="chap12.html#VUID-VkImageCreateInfo-usage-requiredbitmask"></a> <span class="vuid">VUID-VkImageCreateInfo-usage-requiredbitmask</span><br>
 <code>usage</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-sharingMode-parameter" href="chap12.html#VUID-VkImageCreateInfo-sharingMode-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-sharingMode-parameter</span><br>
 <code>sharingMode</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkSharingMode">VkSharingMode</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageCreateInfo-initialLayout-parameter" href="chap12.html#VUID-VkImageCreateInfo-initialLayout-parameter"></a> <span class="vuid">VUID-VkImageCreateInfo-initialLayout-parameter</span><br>
 <code>initialLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferCollectionImageCreateInfoFUCHSIA</code> structure is defined as:</p>
</div>
<div id="VkBufferCollectionImageCreateInfoFUCHSIA" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_FUCHSIA_buffer_collection</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBufferCollectionImageCreateInfoFUCHSIA</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>              <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                  <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkBufferCollectionFUCHSIA</span>    <span class="n">collection</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                     <span class="n">index</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBufferCollectionImageCreateInfoFUCHSIA</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure</p>
</li>
<li>
<p><code>collection</code> is the <a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><code>index</code> is the index of the buffer in the buffer collection from
which the memory will be imported</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCollectionImageCreateInfoFUCHSIA-index-06391" href="chap12.html#VUID-VkBufferCollectionImageCreateInfoFUCHSIA-index-06391"></a> <span class="vuid">VUID-VkBufferCollectionImageCreateInfoFUCHSIA-index-06391</span><br>

<code>index</code> <strong class="purple">must</strong> be less than
<a href="chap12.html#VkBufferCollectionPropertiesFUCHSIA">VkBufferCollectionPropertiesFUCHSIA</a>::<code>bufferCount</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCollectionImageCreateInfoFUCHSIA-sType-sType" href="chap12.html#VUID-VkBufferCollectionImageCreateInfoFUCHSIA-sType-sType"></a> <span class="vuid">VUID-VkBufferCollectionImageCreateInfoFUCHSIA-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_COLLECTION_IMAGE_CREATE_INFO_FUCHSIA</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCollectionImageCreateInfoFUCHSIA-collection-parameter" href="chap12.html#VUID-VkBufferCollectionImageCreateInfoFUCHSIA-collection-parameter"></a> <span class="vuid">VUID-VkBufferCollectionImageCreateInfoFUCHSIA-collection-parameter</span><br>
 <code>collection</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageStencilUsageCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkImageStencilUsageCreateInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageStencilUsageCreateInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>      <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>          <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImageUsageFlags</span>    <span class="n">stencilUsage</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageStencilUsageCreateInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkImageStencilUsageCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_separate_stencil_usage</span>
<span class="k">typedef</span> <span class="n">VkImageStencilUsageCreateInfo</span> <span class="n">VkImageStencilUsageCreateInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stencilUsage</code> is a bitmask of <a href="chap12.html#VkImageUsageFlagBits">VkImageUsageFlagBits</a> describing
the intended usage of the stencil aspect of the image.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> includes a
<code>VkImageStencilUsageCreateInfo</code> structure, then that structure includes
the usage flags specific to the stencil aspect of the image for an image
with a depth-stencil format.</p>
</div>
<div class="paragraph">
<p>This structure specifies image usages which only apply to the stencil aspect
of a depth/stencil format image.
When this structure is included in the <code>pNext</code> chain of
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>, the stencil aspect of the image <strong class="purple">must</strong> only be used
as specified by <code>stencilUsage</code>.
When this structure is not included in the <code>pNext</code> chain of
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>, the stencil aspect of an image <strong class="purple">must</strong> only be used
as specified by <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code>.
Use of other aspects of an image are unaffected by this structure.</p>
</div>
<div class="paragraph">
<p>This structure <strong class="purple">can</strong> also be included in the <code>pNext</code> chain of
<a href="chap44.html#VkPhysicalDeviceImageFormatInfo2">VkPhysicalDeviceImageFormatInfo2</a> to query additional capabilities
specific to image creation parameter combinations including a separate set
of usage flags for the stencil aspect of the image using
<a href="chap44.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a>.
When this structure is not included in the <code>pNext</code> chain of
<code>VkPhysicalDeviceImageFormatInfo2</code> then the implicit value of
<code>stencilUsage</code> matches that of
<code>VkPhysicalDeviceImageFormatInfo2</code>::<code>usage</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageStencilUsageCreateInfo-stencilUsage-02539" href="chap12.html#VUID-VkImageStencilUsageCreateInfo-stencilUsage-02539"></a> <span class="vuid">VUID-VkImageStencilUsageCreateInfo-stencilUsage-02539</span><br>

If <code>stencilUsage</code> includes
<code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code>, it <strong class="purple">must</strong> not include bits
other than <code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code> or
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageStencilUsageCreateInfo-sType-sType" href="chap12.html#VUID-VkImageStencilUsageCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkImageStencilUsageCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_STENCIL_USAGE_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkImageStencilUsageCreateInfo-stencilUsage-parameter" href="chap12.html#VUID-VkImageStencilUsageCreateInfo-stencilUsage-parameter"></a> <span class="vuid">VUID-VkImageStencilUsageCreateInfo-stencilUsage-parameter</span><br>
 <code>stencilUsage</code> <strong class="purple">must</strong> be a valid combination of <a href="chap12.html#VkImageUsageFlagBits">VkImageUsageFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageStencilUsageCreateInfo-stencilUsage-requiredbitmask" href="chap12.html#VUID-VkImageStencilUsageCreateInfo-stencilUsage-requiredbitmask"></a> <span class="vuid">VUID-VkImageStencilUsageCreateInfo-stencilUsage-requiredbitmask</span><br>
 <code>stencilUsage</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain includes a
<code>VkDedicatedAllocationImageCreateInfoNV</code> structure, then that structure
includes an enable controlling whether the image will have a dedicated
memory allocation bound to it.</p>
</div>
<div class="paragraph">
<p>The <code>VkDedicatedAllocationImageCreateInfoNV</code> structure is defined as:</p>
</div>
<div id="VkDedicatedAllocationImageCreateInfoNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_dedicated_allocation</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkDedicatedAllocationImageCreateInfoNV</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkBool32</span>           <span class="n">dedicatedAllocation</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkDedicatedAllocationImageCreateInfoNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>dedicatedAllocation</code> specifies whether the image will have a
dedicated allocation bound to it.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Using a dedicated allocation for color and depth/stencil attachments or
other large images <strong class="purple">may</strong> improve performance on some devices.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDedicatedAllocationImageCreateInfoNV-dedicatedAllocation-00994" href="chap12.html#VUID-VkDedicatedAllocationImageCreateInfoNV-dedicatedAllocation-00994"></a> <span class="vuid">VUID-VkDedicatedAllocationImageCreateInfoNV-dedicatedAllocation-00994</span><br>

If <code>dedicatedAllocation</code> is <code>VK_TRUE</code>,
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>flags</code> <strong class="purple">must</strong> not include
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>,
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>, or
<code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDedicatedAllocationImageCreateInfoNV-sType-sType" href="chap12.html#VUID-VkDedicatedAllocationImageCreateInfoNV-sType-sType"></a> <span class="vuid">VUID-VkDedicatedAllocationImageCreateInfoNV-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_DEDICATED_ALLOCATION_IMAGE_CREATE_INFO_NV</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To define a set of external memory handle types that <strong class="purple">may</strong> be used as backing
store for an image, add a <a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure to
the <code>pNext</code> chain of the <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> structure.
The <code>VkExternalMemoryImageCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkExternalMemoryImageCreateInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkExternalMemoryImageCreateInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkExternalMemoryHandleTypeFlags</span>    <span class="n">handleTypes</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkExternalMemoryImageCreateInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkExternalMemoryImageCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_external_memory</span>
<span class="k">typedef</span> <span class="n">VkExternalMemoryImageCreateInfo</span> <span class="n">VkExternalMemoryImageCreateInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>A <code>VkExternalMemoryImageCreateInfo</code> structure with a non-zero
<code>handleTypes</code> field must be included in the creation parameters for an
image that will be bound to memory that is either exported or imported.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>handleTypes</code> is zero or a bitmask of
<a href="chap44.html#VkExternalMemoryHandleTypeFlagBits">VkExternalMemoryHandleTypeFlagBits</a> specifying one or more external
memory handle types.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkExternalMemoryImageCreateInfo-sType-sType" href="chap12.html#VUID-VkExternalMemoryImageCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkExternalMemoryImageCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_EXTERNAL_MEMORY_IMAGE_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkExternalMemoryImageCreateInfo-handleTypes-parameter" href="chap12.html#VUID-VkExternalMemoryImageCreateInfo-handleTypes-parameter"></a> <span class="vuid">VUID-VkExternalMemoryImageCreateInfo-handleTypes-parameter</span><br>
 <code>handleTypes</code> <strong class="purple">must</strong> be a valid combination of <a href="chap44.html#VkExternalMemoryHandleTypeFlagBits">VkExternalMemoryHandleTypeFlagBits</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain includes a <code>VkExternalMemoryImageCreateInfoNV</code>
structure, then that structure defines a set of external memory handle types
that <strong class="purple">may</strong> be used as backing store for the image.</p>
</div>
<div class="paragraph">
<p>The <code>VkExternalMemoryImageCreateInfoNV</code> structure is defined as:</p>
</div>
<div id="VkExternalMemoryImageCreateInfoNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_external_memory</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkExternalMemoryImageCreateInfoNV</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                      <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                          <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkExternalMemoryHandleTypeFlagsNV</span>    <span class="n">handleTypes</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkExternalMemoryImageCreateInfoNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>handleTypes</code> is zero or a bitmask of
<a href="chap11.html#VkExternalMemoryHandleTypeFlagBitsNV">VkExternalMemoryHandleTypeFlagBitsNV</a> specifying one or more
external memory handle types.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkExternalMemoryImageCreateInfoNV-sType-sType" href="chap12.html#VUID-VkExternalMemoryImageCreateInfoNV-sType-sType"></a> <span class="vuid">VUID-VkExternalMemoryImageCreateInfoNV-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_EXTERNAL_MEMORY_IMAGE_CREATE_INFO_NV</code></p>
</li>
<li>
<p><a id="VUID-VkExternalMemoryImageCreateInfoNV-handleTypes-parameter" href="chap12.html#VUID-VkExternalMemoryImageCreateInfoNV-handleTypes-parameter"></a> <span class="vuid">VUID-VkExternalMemoryImageCreateInfoNV-handleTypes-parameter</span><br>
 <code>handleTypes</code> <strong class="purple">must</strong> be a valid combination of <a href="chap11.html#VkExternalMemoryHandleTypeFlagBitsNV">VkExternalMemoryHandleTypeFlagBitsNV</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create an image with an
<a href="chap11.html#memory-external-android-hardware-buffer-external-formats">external
format</a>, add a <code>VkExternalFormatANDROID</code> structure in the <code>pNext</code>
chain of <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>.
<code>VkExternalFormatANDROID</code> is defined as:</p>
</div>
<div id="VkExternalFormatANDROID" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_ANDROID_external_memory_android_hardware_buffer</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkExternalFormatANDROID</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>              <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint64_t</span>           <span class="n">externalFormat</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkExternalFormatANDROID</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>externalFormat</code> is an implementation-defined identifier for the
external format</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>externalFormat</code> is zero, the effect is as if the
<code>VkExternalFormatANDROID</code> structure was not present.
Otherwise, the <code>image</code> will have the specified external format.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkExternalFormatANDROID-externalFormat-01894" href="chap12.html#VUID-VkExternalFormatANDROID-externalFormat-01894"></a> <span class="vuid">VUID-VkExternalFormatANDROID-externalFormat-01894</span><br>

<code>externalFormat</code> <strong class="purple">must</strong> be <code>0</code> or a value returned in the
<code>externalFormat</code> member of
<a href="chap11.html#VkAndroidHardwareBufferFormatPropertiesANDROID">VkAndroidHardwareBufferFormatPropertiesANDROID</a> by an earlier call
to <a href="chap11.html#vkGetAndroidHardwareBufferPropertiesANDROID">vkGetAndroidHardwareBufferPropertiesANDROID</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkExternalFormatANDROID-sType-sType" href="chap12.html#VUID-VkExternalFormatANDROID-sType-sType"></a> <span class="vuid">VUID-VkExternalFormatANDROID-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_EXTERNAL_FORMAT_ANDROID</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> includes a
<code>VkImageSwapchainCreateInfoKHR</code> structure, then that structure includes
a swapchain handle indicating that the image will be bound to memory from
that swapchain.</p>
</div>
<div class="paragraph">
<p>The <code>VkImageSwapchainCreateInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkImageSwapchainCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1 with VK_KHR_swapchain, VK_KHR_device_group with VK_KHR_swapchain</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageSwapchainCreateInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkSwapchainKHR</span>     <span class="n">swapchain</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageSwapchainCreateInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>swapchain</code> is <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a> or a handle of a swapchain that
the image will be bound to.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSwapchainCreateInfoKHR-swapchain-00995" href="chap12.html#VUID-VkImageSwapchainCreateInfoKHR-swapchain-00995"></a> <span class="vuid">VUID-VkImageSwapchainCreateInfoKHR-swapchain-00995</span><br>

If <code>swapchain</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, the fields of
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> <strong class="purple">must</strong> match the
<a href="chap33.html#swapchain-wsi-image-create-info">implied image creation parameters</a>
of the swapchain</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSwapchainCreateInfoKHR-sType-sType" href="chap12.html#VUID-VkImageSwapchainCreateInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkImageSwapchainCreateInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_SWAPCHAIN_CREATE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkImageSwapchainCreateInfoKHR-swapchain-parameter" href="chap12.html#VUID-VkImageSwapchainCreateInfoKHR-swapchain-parameter"></a> <span class="vuid">VUID-VkImageSwapchainCreateInfoKHR-swapchain-parameter</span><br>
 If <code>swapchain</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>swapchain</code> <strong class="purple">must</strong> be a valid <a href="chap33.html#VkSwapchainKHR">VkSwapchainKHR</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> includes a
<code>VkImageFormatListCreateInfo</code> structure, then that structure contains a
list of all formats that <strong class="purple">can</strong> be used when creating views of this image.</p>
</div>
<div class="paragraph">
<p>The <code>VkImageFormatListCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkImageFormatListCreateInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageFormatListCreateInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">viewFormatCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkFormat</span><span class="o">*</span>    <span class="n">pViewFormats</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageFormatListCreateInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkImageFormatListCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_image_format_list</span>
<span class="k">typedef</span> <span class="n">VkImageFormatListCreateInfo</span> <span class="n">VkImageFormatListCreateInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>viewFormatCount</code> is the number of entries in the <code>pViewFormats</code>
array.</p>
</li>
<li>
<p><code>pViewFormats</code> is a pointer to an array of <a href="chap43.html#VkFormat">VkFormat</a> values
specifying all formats which <strong class="purple">can</strong> be used when creating views of this
image.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>viewFormatCount</code> is zero, <code>pViewFormats</code> is ignored and the
image is created as if the <code>VkImageFormatListCreateInfo</code> structure were
not included in the <code>pNext</code> chain of <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageFormatListCreateInfo-sType-sType" href="chap12.html#VUID-VkImageFormatListCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkImageFormatListCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_FORMAT_LIST_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkImageFormatListCreateInfo-pViewFormats-parameter" href="chap12.html#VUID-VkImageFormatListCreateInfo-pViewFormats-parameter"></a> <span class="vuid">VUID-VkImageFormatListCreateInfo-pViewFormats-parameter</span><br>
 If <code>viewFormatCount</code> is not <code>0</code>, <code>pViewFormats</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>viewFormatCount</code> valid <a href="chap43.html#VkFormat">VkFormat</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> includes a
<a href="chap12.html#VkImageDrmFormatModifierListCreateInfoEXT">VkImageDrmFormatModifierListCreateInfoEXT</a> structure, then the image
will be created with one of the <a href="chap53.html#glossary-drm-format-modifier">Linux DRM
format modifiers</a> listed in the structure.
The choice of modifier is implementation-dependent.</p>
</div>
<div class="paragraph">
<p>The <a href="chap12.html#VkImageDrmFormatModifierListCreateInfoEXT">VkImageDrmFormatModifierListCreateInfoEXT</a> structure is defined as:</p>
</div>
<div id="VkImageDrmFormatModifierListCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_image_drm_format_modifier</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageDrmFormatModifierListCreateInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">drmFormatModifierCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint64_t</span><span class="o">*</span>    <span class="n">pDrmFormatModifiers</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageDrmFormatModifierListCreateInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>drmFormatModifierCount</code> is the length of the
<code>pDrmFormatModifiers</code> array.</p>
</li>
<li>
<p><code>pDrmFormatModifiers</code> is a pointer to an array of <em>Linux DRM format
modifiers</em>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageDrmFormatModifierListCreateInfoEXT-pDrmFormatModifiers-02263" href="chap12.html#VUID-VkImageDrmFormatModifierListCreateInfoEXT-pDrmFormatModifiers-02263"></a> <span class="vuid">VUID-VkImageDrmFormatModifierListCreateInfoEXT-pDrmFormatModifiers-02263</span><br>

Each <em>modifier</em> in <code>pDrmFormatModifiers</code> <strong class="purple">must</strong> be compatible with
the parameters in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> and its <code>pNext</code> chain, as
determined by querying <a href="chap44.html#VkPhysicalDeviceImageFormatInfo2">VkPhysicalDeviceImageFormatInfo2</a> extended
with <a href="chap44.html#VkPhysicalDeviceImageDrmFormatModifierInfoEXT">VkPhysicalDeviceImageDrmFormatModifierInfoEXT</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageDrmFormatModifierListCreateInfoEXT-sType-sType" href="chap12.html#VUID-VkImageDrmFormatModifierListCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkImageDrmFormatModifierListCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_DRM_FORMAT_MODIFIER_LIST_CREATE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageDrmFormatModifierListCreateInfoEXT-pDrmFormatModifiers-parameter" href="chap12.html#VUID-VkImageDrmFormatModifierListCreateInfoEXT-pDrmFormatModifiers-parameter"></a> <span class="vuid">VUID-VkImageDrmFormatModifierListCreateInfoEXT-pDrmFormatModifiers-parameter</span><br>
 <code>pDrmFormatModifiers</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>drmFormatModifierCount</code> <code>uint64_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkImageDrmFormatModifierListCreateInfoEXT-drmFormatModifierCount-arraylength" href="chap12.html#VUID-VkImageDrmFormatModifierListCreateInfoEXT-drmFormatModifierCount-arraylength"></a> <span class="vuid">VUID-VkImageDrmFormatModifierListCreateInfoEXT-drmFormatModifierCount-arraylength</span><br>
 <code>drmFormatModifierCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> includes a
<a href="chap12.html#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a> structure, then the
image will be created with the <a href="chap53.html#glossary-drm-format-modifier">Linux DRM
format modifier</a> and memory layout defined by the structure.</p>
</div>
<div class="paragraph">
<p>The <a href="chap12.html#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a> structure is defined
as:</p>
</div>
<div id="VkImageDrmFormatModifierExplicitCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_image_drm_format_modifier</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageDrmFormatModifierExplicitCreateInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>               <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                   <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint64_t</span>                      <span class="n">drmFormatModifier</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                      <span class="n">drmFormatModifierPlaneCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkSubresourceLayout</span><span class="o">*</span>    <span class="n">pPlaneLayouts</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageDrmFormatModifierExplicitCreateInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>drmFormatModifier</code> is the <em>Linux DRM format modifier</em> with which
the image will be created.</p>
</li>
<li>
<p><code>drmFormatModifierPlaneCount</code> is the number of <em>memory planes</em> in
the image (as reported by <a href="chap43.html#VkDrmFormatModifierPropertiesEXT">VkDrmFormatModifierPropertiesEXT</a>) as
well as the length of the <code>pPlaneLayouts</code> array.</p>
</li>
<li>
<p><code>pPlaneLayouts</code> is a pointer to an array of
<a href="chap12.html#VkSubresourceLayout">VkSubresourceLayout</a> structures describing the image’s <em>memory
planes</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>i</code><sup>th</sup> member of <code>pPlaneLayouts</code> describes the layout of the
image’s <code>i</code><sup>th</sup> <em>memory plane</em> (that is,
<code>VK_IMAGE_ASPECT_MEMORY_PLANE<em>_i_</em>BIT_EXT</code>).
In each element of <code>pPlaneLayouts</code>, the implementation <strong class="purple">must</strong> ignore
<code>size</code>.
The implementation calculates the size of each plane, which the application
<strong class="purple">can</strong> query with <a href="chap12.html#vkGetImageSubresourceLayout">vkGetImageSubresourceLayout</a>.</p>
</div>
<div class="paragraph">
<p>When creating an image with
<a href="chap12.html#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a>, it is the application’s
responsibility to satisfy all valid usage requirements.
However, the implementation <strong class="purple">must</strong> validate that the provided
<code>pPlaneLayouts</code>, when combined with the provided <code>drmFormatModifier</code>
and other creation parameters in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> and its <code>pNext</code>
chain, produce a valid image.
(This validation is necessarily implementation-dependent and outside the
scope of Vulkan, and therefore not described by valid usage requirements).
If this validation fails, then <a href="chap12.html#vkCreateImage">vkCreateImage</a> returns
<code>VK_ERROR_INVALID_DRM_FORMAT_MODIFIER_PLANE_LAYOUT_EXT</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-drmFormatModifier-02264" href="chap12.html#VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-drmFormatModifier-02264"></a> <span class="vuid">VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-drmFormatModifier-02264</span><br>

<code>drmFormatModifier</code> <strong class="purple">must</strong> be compatible with the parameters in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> and its <code>pNext</code> chain, as determined by
querying <a href="chap44.html#VkPhysicalDeviceImageFormatInfo2">VkPhysicalDeviceImageFormatInfo2</a> extended with
<a href="chap44.html#VkPhysicalDeviceImageDrmFormatModifierInfoEXT">VkPhysicalDeviceImageDrmFormatModifierInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-drmFormatModifierPlaneCount-02265" href="chap12.html#VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-drmFormatModifierPlaneCount-02265"></a> <span class="vuid">VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-drmFormatModifierPlaneCount-02265</span><br>

<code>drmFormatModifierPlaneCount</code> <strong class="purple">must</strong> be equal to the
<a href="chap43.html#VkDrmFormatModifierPropertiesEXT">VkDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifierPlaneCount</code>
associated with <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code> and
<code>drmFormatModifier</code>, as found by querying
<a href="chap43.html#VkDrmFormatModifierPropertiesListEXT">VkDrmFormatModifierPropertiesListEXT</a></p>
</li>
<li>
<p><a id="VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-size-02267" href="chap12.html#VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-size-02267"></a> <span class="vuid">VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-size-02267</span><br>

For each element of <code>pPlaneLayouts</code>, <code>size</code> <strong class="purple">must</strong> be 0</p>
</li>
<li>
<p><a id="VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-arrayPitch-02268" href="chap12.html#VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-arrayPitch-02268"></a> <span class="vuid">VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-arrayPitch-02268</span><br>

For each element of <code>pPlaneLayouts</code>, <code>arrayPitch</code> <strong class="purple">must</strong> be 0 if
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>arrayLayers</code> is 1</p>
</li>
<li>
<p><a id="VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-depthPitch-02269" href="chap12.html#VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-depthPitch-02269"></a> <span class="vuid">VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-depthPitch-02269</span><br>

For each element of <code>pPlaneLayouts</code>, <code>depthPitch</code> <strong class="purple">must</strong> be 0 if
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>extent.depth</code> is 1</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-sType-sType" href="chap12.html#VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_DRM_FORMAT_MODIFIER_EXPLICIT_CREATE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-pPlaneLayouts-parameter" href="chap12.html#VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-pPlaneLayouts-parameter"></a> <span class="vuid">VUID-VkImageDrmFormatModifierExplicitCreateInfoEXT-pPlaneLayouts-parameter</span><br>
 If <code>drmFormatModifierPlaneCount</code> is not <code>0</code>, <code>pPlaneLayouts</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>drmFormatModifierPlaneCount</code> <a href="chap12.html#VkSubresourceLayout">VkSubresourceLayout</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> list of <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> includes a
<code>VkImageCompressionControlEXT</code> structure, then that structure describes
compression controls for this image.</p>
</div>
<div class="paragraph">
<p>The <code>VkImageCompressionControlEXT</code> structure is defined as:</p>
</div>
<div id="VkImageCompressionControlEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_image_compression_control</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageCompressionControlEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                         <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                             <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImageCompressionFlagsEXT</span>              <span class="n">flags</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                <span class="n">compressionControlPlaneCount</span><span class="p">;</span>
    <span class="n">VkImageCompressionFixedRateFlagsEXT</span><span class="o">*</span>    <span class="n">pFixedRateFlags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageCompressionControlEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap12.html#VkImageCompressionFlagBitsEXT">VkImageCompressionFlagBitsEXT</a>
describing compression controls for the image.</p>
</li>
<li>
<p><code>compressionControlPlaneCount</code> is the number of entries in the
<code>pFixedRateFlags</code> array.</p>
</li>
<li>
<p><code>pFixedRateFlags</code> is <code>NULL</code> or a pointer to an array of
<a href="chap12.html#VkImageCompressionFixedRateFlagsEXT">VkImageCompressionFixedRateFlagsEXT</a> bitfields describing allowed
fixed-rate compression rates of each image plane.
It is ignored if <code>flags</code> does not include
<code>VK_IMAGE_COMPRESSION_FIXED_RATE_EXPLICIT_EXT</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If enabled, fixed-rate compression is done in an implementation-defined
manner and <strong class="purple">may</strong> be applied at block granularity.
In that case, a write to an individual texel <strong class="purple">may</strong> modify the value of other
texels in the same block.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCompressionControlEXT-flags-06747" href="chap12.html#VUID-VkImageCompressionControlEXT-flags-06747"></a> <span class="vuid">VUID-VkImageCompressionControlEXT-flags-06747</span><br>

<code>flags</code> <strong class="purple">must</strong> be one of <code>VK_IMAGE_COMPRESSION_DEFAULT_EXT</code>,
<code>VK_IMAGE_COMPRESSION_FIXED_RATE_DEFAULT_EXT</code>,
<code>VK_IMAGE_COMPRESSION_FIXED_RATE_EXPLICIT_EXT</code>, or
<code>VK_IMAGE_COMPRESSION_DISABLED_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageCompressionControlEXT-flags-06748" href="chap12.html#VUID-VkImageCompressionControlEXT-flags-06748"></a> <span class="vuid">VUID-VkImageCompressionControlEXT-flags-06748</span><br>

If <code>flags</code> includes
<code>VK_IMAGE_COMPRESSION_FIXED_RATE_EXPLICIT_EXT</code>,
<code>pFixedRateFlags</code> <strong class="purple">must</strong> not be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCompressionControlEXT-sType-sType" href="chap12.html#VUID-VkImageCompressionControlEXT-sType-sType"></a> <span class="vuid">VUID-VkImageCompressionControlEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_COMPRESSION_CONTROL_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Some combinations of compression properties may not be supported.
For example, some implementations may not support different fixed-rate
compression rates per plane of a multi-planar format and will not be able to
enable fixed-rate compression for any plane if the requested rates differ.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of <a href="chap12.html#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::<code>flags</code>,
specifying compression controls for an image, are:</p>
</div>
<div id="VkImageCompressionFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_image_compression_control</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkImageCompressionFlagBitsEXT</span> <span class="p">{</span>
    <span class="n">VK_IMAGE_COMPRESSION_DEFAULT_EXT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_DEFAULT_EXT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_EXPLICIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_DISABLED_EXT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkImageCompressionFlagBitsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_COMPRESSION_DEFAULT_EXT</code> specifies that the default image
compression setting is used.
Implementations <strong class="purple">must</strong> not apply fixed-rate compression.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_DEFAULT_EXT</code> specifies that the
implementation <strong class="purple">may</strong> choose any supported fixed-rate compression setting
in an implementation-defined manner based on the properties of the
image.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_EXPLICIT_EXT</code> specifies that
fixed-rate compression <strong class="purple">may</strong> be used and that the allowed compression
rates are specified by
<a href="chap12.html#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::<code>pFixedRateFlags</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_DISABLED_EXT</code> specifies that all lossless and
fixed-rate compression <strong class="purple">should</strong> be disabled.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <a href="chap12.html#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::<code>flags</code> is
<code>VK_IMAGE_COMPRESSION_FIXED_RATE_EXPLICIT_EXT</code>, then the <code>i</code><sup>th</sup>
member of the <code>pFixedRateFlags</code> array specifies the allowed compression
rates for the image’s <code>i</code><sup>th</sup> plane.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>If <code>VK_IMAGE_COMPRESSION_DISABLED_EXT</code> is included in
<a href="chap12.html#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::<code>flags</code>, both lossless and
fixed-rate compression will be disabled.
This is likely to have a negative impact on performance and is only intended
to be used for debugging purposes.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkImageCompressionFixedRateFlagsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_image_compression_control</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkImageCompressionFixedRateFlagsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkImageCompressionFixedRateFlagsEXT</code> is a bitmask type for setting a
mask of zero or more <a href="chap12.html#VkImageCompressionFixedRateFlagBitsEXT">VkImageCompressionFixedRateFlagBitsEXT</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in
<a href="chap12.html#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::<code>pFixedRateFlags</code>, specifying
allowed compression rates for an image plane, are:</p>
</div>
<div id="VkImageCompressionFixedRateFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_image_compression_control</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkImageCompressionFixedRateFlagBitsEXT</span> <span class="p">{</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_NONE_EXT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_1BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_2BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_3BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_4BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_5BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000010</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_6BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000020</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_7BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000040</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_8BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000080</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_9BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000100</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_10BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000200</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_11BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000400</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_12BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000800</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_13BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00001000</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_14BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00002000</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_15BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00004000</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_16BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00008000</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_17BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00010000</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_18BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00020000</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_19BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00040000</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_20BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00080000</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_21BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00100000</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_22BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00200000</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_23BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00400000</span><span class="p">,</span>
    <span class="n">VK_IMAGE_COMPRESSION_FIXED_RATE_24BPC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00800000</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkImageCompressionFixedRateFlagBitsEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_NONE_EXT</code> specifies that fixed-rate
compression <strong class="purple">must</strong> not be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_1BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[1,2)</span> bits per component
<strong class="purple">may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_2BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[2,3)</span> bits per component
<strong class="purple">may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_3BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[3,4)</span> bits per component
<strong class="purple">may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_4BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[4,5)</span> bits per component
<strong class="purple">may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_5BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[5,6)</span> bits per component
<strong class="purple">may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_6BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[6,7)</span> bits per component
<strong class="purple">may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_7BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[7,8)</span> bits per component
<strong class="purple">may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_8BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[8,9)</span> bits per component
<strong class="purple">may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_9BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[9,10)</span> bits per component
<strong class="purple">may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_10BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[10,11)</span> bits per
component <strong class="purple">may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_11BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of <span class="eq">[11,12)</span> bits per
component <strong class="purple">may</strong> be used.</p>
</li>
<li>
<p><code>VK_IMAGE_COMPRESSION_FIXED_RATE_12BPC_BIT_EXT</code> specifies that
fixed-rate compression with a bitrate of at least 12 bits per component
<strong class="purple">may</strong> be used.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the format has a different bit rate for different components,
<a href="chap12.html#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::<code>pFixedRateFlags</code> describes the rate
of the component with the largest number of bits assigned to it, scaled pro
rata.
For example, to request that a <code>VK_FORMAT_A2R10G10B10_UNORM_PACK32</code>
format be stored at a rate of 8 bits per pixel, use
<code>VK_IMAGE_COMPRESSION_FIXED_RATE_2BPC_BIT_EXT</code> (10 bits for the largest
component, stored at quarter the original size, 2.5 bits, rounded down).</p>
</div>
<div class="paragraph">
<p>If <code>flags</code> includes <code>VK_IMAGE_COMPRESSION_FIXED_RATE_EXPLICIT_EXT</code>,
and multiple bits are set in
<a href="chap12.html#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>::pFixedRateFlags for a plane,
implementations <strong class="purple">should</strong> apply the lowest allowed bitrate that is supported.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The choice of “bits per component” terminology was chosen so that the same
compression rate describes the same degree of compression applied to formats
that differ only in the number of components.
For example, <code>VK_FORMAT_R8G8_UNORM</code> compressed to half its original size
is a rate of 4 bits per component, 8 bits per pixel.
<code>VK_FORMAT_R8G8B8A8_UNORM</code> compressed to half <em>its</em> original size is 4
bits per component, 16 bits per pixel.
Both of these cases can be requested with
<code>VK_IMAGE_COMPRESSION_FIXED_RATE_4BPC_BIT_EXT</code>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To query the compression properties of an image, add a
<a href="chap12.html#VkImageCompressionPropertiesEXT">VkImageCompressionPropertiesEXT</a> structure to the <code>pNext</code> chain of
the <a href="chap12.html#VkSubresourceLayout2EXT">VkSubresourceLayout2EXT</a> structure in a call to
<a href="chap12.html#vkGetImageSubresourceLayout2EXT">vkGetImageSubresourceLayout2EXT</a>.</p>
</div>
<div class="paragraph">
<p>To determine the compression rates that are supported for a given image
format, add a <a href="chap12.html#VkImageCompressionPropertiesEXT">VkImageCompressionPropertiesEXT</a> structure to the
<code>pNext</code> chain of the <a href="chap44.html#VkImageFormatProperties2">VkImageFormatProperties2</a> structure in a call
to <a href="chap44.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Since fixed-rate compression is disabled by default, the
<a href="chap12.html#VkImageCompressionPropertiesEXT">VkImageCompressionPropertiesEXT</a> structure passed to
<a href="chap44.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a> will not indicate any
fixed-rate compression support unless a <a href="chap12.html#VkImageCompressionControlEXT">VkImageCompressionControlEXT</a>
structure is also included in the <code>pNext</code> chain of the
<a href="chap44.html#VkPhysicalDeviceImageFormatInfo2">VkPhysicalDeviceImageFormatInfo2</a> structure passed to the same command.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The <code>VkImageCompressionPropertiesEXT</code> structure is defined as:</p>
</div>
<div id="VkImageCompressionPropertiesEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_image_compression_control</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageCompressionPropertiesEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                        <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                                  <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImageCompressionFlagsEXT</span>             <span class="n">imageCompressionFlags</span><span class="p">;</span>
    <span class="n">VkImageCompressionFixedRateFlagsEXT</span>    <span class="n">imageCompressionFixedRateFlags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageCompressionPropertiesEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>imageCompressionFlags</code> returns a value describing the compression
controls that apply to the image.
The value will be either <code>VK_IMAGE_COMPRESSION_DEFAULT_EXT</code> to
indicate no fixed-rate compression,
<code>VK_IMAGE_COMPRESSION_FIXED_RATE_EXPLICIT_EXT</code> to indicate
fixed-rate compression, or <code>VK_IMAGE_COMPRESSION_DISABLED_EXT</code> to
indicate no compression.</p>
</li>
<li>
<p><code>imageCompressionFixedRateFlags</code> returns a
<a href="chap12.html#VkImageCompressionFixedRateFlagsEXT">VkImageCompressionFixedRateFlagsEXT</a> value describing the
compression rates that apply to the specified aspect of the image.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCompressionPropertiesEXT-sType-sType" href="chap12.html#VUID-VkImageCompressionPropertiesEXT-sType-sType"></a> <span class="vuid">VUID-VkImageCompressionPropertiesEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_COMPRESSION_PROPERTIES_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="chap12.html#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p><a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code></p>
</li>
<li>
<p><a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>specify intended usage of an image, and are:</p>
</div>
<div id="VkImageUsageFlagBits" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkImageUsageFlagBits</span> <span class="p">{</span>
    <span class="n">VK_IMAGE_USAGE_TRANSFER_SRC_BIT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_IMAGE_USAGE_TRANSFER_DST_BIT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_IMAGE_USAGE_SAMPLED_BIT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
    <span class="n">VK_IMAGE_USAGE_STORAGE_BIT</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
    <span class="n">VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</span> <span class="o">=</span> <span class="mh">0x00000010</span><span class="p">,</span>
    <span class="n">VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</span> <span class="o">=</span> <span class="mh">0x00000020</span><span class="p">,</span>
    <span class="n">VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</span> <span class="o">=</span> <span class="mh">0x00000040</span><span class="p">,</span>
    <span class="n">VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</span> <span class="o">=</span> <span class="mh">0x00000080</span><span class="p">,</span>
<span class="cp">#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_KHR_video_decode_queue</span>
    <span class="n">VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000400</span><span class="p">,</span>
<span class="cp">#endif
#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_KHR_video_decode_queue</span>
    <span class="n">VK_IMAGE_USAGE_VIDEO_DECODE_SRC_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000800</span><span class="p">,</span>
<span class="cp">#endif
#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_KHR_video_decode_queue</span>
    <span class="n">VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00001000</span><span class="p">,</span>
<span class="cp">#endif
</span>  <span class="c1">// Provided by VK_EXT_fragment_density_map</span>
    <span class="n">VK_IMAGE_USAGE_FRAGMENT_DENSITY_MAP_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000200</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_fragment_shading_rate</span>
    <span class="n">VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000100</span><span class="p">,</span>
<span class="cp">#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_KHR_video_encode_queue</span>
    <span class="n">VK_IMAGE_USAGE_VIDEO_ENCODE_DST_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00002000</span><span class="p">,</span>
<span class="cp">#endif
#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_KHR_video_encode_queue</span>
    <span class="n">VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00004000</span><span class="p">,</span>
<span class="cp">#endif
#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_KHR_video_encode_queue</span>
    <span class="n">VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00008000</span><span class="p">,</span>
<span class="cp">#endif
</span>  <span class="c1">// Provided by VK_HUAWEI_invocation_mask</span>
    <span class="n">VK_IMAGE_USAGE_INVOCATION_MASK_BIT_HUAWEI</span> <span class="o">=</span> <span class="mh">0x00040000</span><span class="p">,</span>
  <span class="c1">// Provided by VK_QCOM_image_processing</span>
    <span class="n">VK_IMAGE_USAGE_SAMPLE_WEIGHT_BIT_QCOM</span> <span class="o">=</span> <span class="mh">0x00100000</span><span class="p">,</span>
  <span class="c1">// Provided by VK_QCOM_image_processing</span>
    <span class="n">VK_IMAGE_USAGE_SAMPLE_BLOCK_MATCH_BIT_QCOM</span> <span class="o">=</span> <span class="mh">0x00200000</span><span class="p">,</span>
  <span class="c1">// Provided by VK_NV_shading_rate_image</span>
    <span class="n">VK_IMAGE_USAGE_SHADING_RATE_IMAGE_BIT_NV</span> <span class="o">=</span> <span class="n">VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkImageUsageFlagBits</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> specifies that the image <strong class="purple">can</strong> be
used as the source of a transfer command.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> specifies that the image <strong class="purple">can</strong> be
used as the destination of a transfer command.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_SAMPLED_BIT</code> specifies that the image <strong class="purple">can</strong> be used
to create a <code>VkImageView</code> suitable for occupying a
<code>VkDescriptorSet</code> slot either of type
<code>VK_DESCRIPTOR_TYPE_SAMPLED_IMAGE</code> or
<code>VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER</code>, and be sampled by a
shader.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_STORAGE_BIT</code> specifies that the image <strong class="purple">can</strong> be used
to create a <code>VkImageView</code> suitable for occupying a
<code>VkDescriptorSet</code> slot of type
<code>VK_DESCRIPTOR_TYPE_STORAGE_IMAGE</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code> specifies that the image <strong class="purple">can</strong>
be used to create a <code>VkImageView</code> suitable for use as a color or
resolve attachment in a <code>VkFramebuffer</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code> specifies that the
image <strong class="purple">can</strong> be used to create a <code>VkImageView</code> suitable for use as a
depth/stencil
or depth/stencil resolve
attachment in a <code>VkFramebuffer</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code> specifies that
implementations <strong class="purple">may</strong> support using <a href="chap11.html">memory allocations</a> with
the <code>VK_MEMORY_PROPERTY_LAZILY_ALLOCATED_BIT</code> to back an image with
this usage.
This bit <strong class="purple">can</strong> be set for any image that <strong class="purple">can</strong> be used to create a
<code>VkImageView</code> suitable for use as a color, resolve, depth/stencil,
or input attachment.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code> specifies that the image <strong class="purple">can</strong>
be used to create a <code>VkImageView</code> suitable for occupying
<code>VkDescriptorSet</code> slot of type
<code>VK_DESCRIPTOR_TYPE_INPUT_ATTACHMENT</code>; be read from a shader as an
input attachment; and be used as an input attachment in a framebuffer.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_FRAGMENT_DENSITY_MAP_BIT_EXT</code> specifies that the
image <strong class="purple">can</strong> be used to create a <code>VkImageView</code> suitable for use as a
<a href="chap17.html">fragment density map image</a>.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code> specifies
    that the image <strong class="purple">can</strong> be used to create a <code>VkImageView</code> suitable for
    use as a
    <a href="chap27.html#primsrast-fragment-shading-rate-attachment">fragment shading rate
    attachment</a>
or
    <a href="chap27.html#primsrast-shading-rate-image">shading rate image</a></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code> specifies that
<a href="chap39.html#video-decode-operations">video decode operations</a> <strong class="purple">can</strong> use the image
as an output picture for video decode operations.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_DECODE_SRC_BIT_KHR</code> is reserved for future
use.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code> specifies that
<a href="chap39.html#video-decode-operations">video decode operations</a> <strong class="purple">can</strong> use the image
as a <a href="chap39.html#video-picture-resources">DPB Video Picture Resource</a>,
representing a <a href="chap39.html#reference-picture">reference picture</a>.
If an implementation requires separate allocations for DPB and decode
output, indicating this by returning <code>VK_ERROR_FORMAT_NOT_SUPPORTED</code>
to any <a href="chap39.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> call with both
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code> and
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code> usage bits, then
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code> <strong class="purple">must</strong> not be combined with
any other <code>VK_IMAGE_USAGE_*</code> flags.
Otherwise, <code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code> <strong class="purple">must</strong> be
combined with <code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code>, if the DPB
image is required to coincide with the decoded output picture.
In the case where DPB coincides with the decoded output picture, image
resources <strong class="purple">can</strong> be used as <a href="chap39.html#reference-picture">reference pictures</a> only
after acting as targets for video decode operations, where its image
view <strong class="purple">must</strong> be set to both
<a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot-&gt;pPictureResource-&gt;imageViewBinding</code>
and
<a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>dstPictureResource.imageViewBinding</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code> specifies that the image
<strong class="purple">can</strong> be used as an <a href="chap39.html#input-encode-picture">input picture</a> for
<a href="chap39.html#video-encode-operations">video encode operations</a>.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_ENCODE_DST_BIT_KHR</code> is reserved for future
use.</p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code> specifies that
<a href="chap39.html#video-encode-operations">video encode operations</a> <strong class="purple">can</strong> use the image
as an output to hold a <a href="chap39.html#video-picture-resources">reconstructed picture</a>
that can subsequently act as an input <a href="chap39.html#reference-picture">reference
picture</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkImageUsageFlags" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkImageUsageFlags</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkImageUsageFlags</code> is a bitmask type for setting a mask of zero or more
<a href="chap12.html#VkImageUsageFlagBits">VkImageUsageFlagBits</a>.</p>
</div>
<div id="valid-imageview-imageusage" class="paragraph">
<p>When creating a <code>VkImageView</code> one of the following
<a href="chap12.html#VkImageUsageFlagBits">VkImageUsageFlagBits</a> <strong class="purple">must</strong> be set:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_USAGE_SAMPLED_BIT</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_STORAGE_BIT</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_FRAGMENT_DENSITY_MAP_BIT_EXT</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_SAMPLE_WEIGHT_BIT_QCOM</code></p>
</li>
<li>
<p><code>VK_IMAGE_USAGE_SAMPLE_BLOCK_MATCH_BIT_QCOM</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>flags</code>, specifying
additional parameters of an image, are:</p>
</div>
<div id="VkImageCreateFlagBits" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkImageCreateFlagBits</span> <span class="p">{</span>
    <span class="n">VK_IMAGE_CREATE_SPARSE_BINDING_BIT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
    <span class="n">VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
    <span class="n">VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</span> <span class="o">=</span> <span class="mh">0x00000010</span><span class="p">,</span>
  <span class="c1">// Provided by VK_VERSION_1_1</span>
    <span class="n">VK_IMAGE_CREATE_ALIAS_BIT</span> <span class="o">=</span> <span class="mh">0x00000400</span><span class="p">,</span>
  <span class="c1">// Provided by VK_VERSION_1_1</span>
    <span class="n">VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT</span> <span class="o">=</span> <span class="mh">0x00000040</span><span class="p">,</span>
  <span class="c1">// Provided by VK_VERSION_1_1</span>
    <span class="n">VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</span> <span class="o">=</span> <span class="mh">0x00000020</span><span class="p">,</span>
  <span class="c1">// Provided by VK_VERSION_1_1</span>
    <span class="n">VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</span> <span class="o">=</span> <span class="mh">0x00000080</span><span class="p">,</span>
  <span class="c1">// Provided by VK_VERSION_1_1</span>
    <span class="n">VK_IMAGE_CREATE_EXTENDED_USAGE_BIT</span> <span class="o">=</span> <span class="mh">0x00000100</span><span class="p">,</span>
  <span class="c1">// Provided by VK_VERSION_1_1</span>
    <span class="n">VK_IMAGE_CREATE_PROTECTED_BIT</span> <span class="o">=</span> <span class="mh">0x00000800</span><span class="p">,</span>
  <span class="c1">// Provided by VK_VERSION_1_1</span>
    <span class="n">VK_IMAGE_CREATE_DISJOINT_BIT</span> <span class="o">=</span> <span class="mh">0x00000200</span><span class="p">,</span>
  <span class="c1">// Provided by VK_NV_corner_sampled_image</span>
    <span class="n">VK_IMAGE_CREATE_CORNER_SAMPLED_BIT_NV</span> <span class="o">=</span> <span class="mh">0x00002000</span><span class="p">,</span>
  <span class="c1">// Provided by VK_EXT_sample_locations</span>
    <span class="n">VK_IMAGE_CREATE_SAMPLE_LOCATIONS_COMPATIBLE_DEPTH_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00001000</span><span class="p">,</span>
  <span class="c1">// Provided by VK_EXT_fragment_density_map</span>
    <span class="n">VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00004000</span><span class="p">,</span>
  <span class="c1">// Provided by VK_EXT_multisampled_render_to_single_sampled</span>
    <span class="n">VK_IMAGE_CREATE_MULTISAMPLED_RENDER_TO_SINGLE_SAMPLED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00040000</span><span class="p">,</span>
  <span class="c1">// Provided by VK_EXT_image_2d_view_of_3d</span>
    <span class="n">VK_IMAGE_CREATE_2D_VIEW_COMPATIBLE_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00020000</span><span class="p">,</span>
  <span class="c1">// Provided by VK_QCOM_fragment_density_map_offset</span>
    <span class="n">VK_IMAGE_CREATE_FRAGMENT_DENSITY_MAP_OFFSET_BIT_QCOM</span> <span class="o">=</span> <span class="mh">0x00008000</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_bind_memory2 with VK_KHR_device_group</span>
    <span class="n">VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT_KHR</span> <span class="o">=</span> <span class="n">VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_maintenance1</span>
    <span class="n">VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT_KHR</span> <span class="o">=</span> <span class="n">VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_maintenance2</span>
    <span class="n">VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT_KHR</span> <span class="o">=</span> <span class="n">VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_maintenance2</span>
    <span class="n">VK_IMAGE_CREATE_EXTENDED_USAGE_BIT_KHR</span> <span class="o">=</span> <span class="n">VK_IMAGE_CREATE_EXTENDED_USAGE_BIT</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_sampler_ycbcr_conversion</span>
    <span class="n">VK_IMAGE_CREATE_DISJOINT_BIT_KHR</span> <span class="o">=</span> <span class="n">VK_IMAGE_CREATE_DISJOINT_BIT</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_bind_memory2</span>
    <span class="n">VK_IMAGE_CREATE_ALIAS_BIT_KHR</span> <span class="o">=</span> <span class="n">VK_IMAGE_CREATE_ALIAS_BIT</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkImageCreateFlagBits</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> specifies that the image will
be backed using sparse memory binding.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> specifies that the image <strong class="purple">can</strong>
be partially backed using sparse memory binding.
Images created with this flag <strong class="purple">must</strong> also be created with the
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> flag.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code> specifies that the image will
be backed using sparse memory binding with memory ranges that might also
simultaneously be backing another image (or another portion of the same
image).
Images created with this flag <strong class="purple">must</strong> also be created with the
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> flag.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code> specifies that the image <strong class="purple">can</strong>
be used to create a <code>VkImageView</code> with a different format from the
image.
For <a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar</a> formats,
<code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code> specifies that a
<code>VkImageView</code> can be created of a <em>plane</em> of the image.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</code> specifies that the image <strong class="purple">can</strong>
be used to create a <code>VkImageView</code> of type
<code>VK_IMAGE_VIEW_TYPE_CUBE</code> or <code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> specifies that the image
<strong class="purple">can</strong> be used to create a <code>VkImageView</code> of type
<code>VK_IMAGE_VIEW_TYPE_2D</code> or <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_PROTECTED_BIT</code> specifies that the image is a
protected image.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT</code> specifies that the
image <strong class="purple">can</strong> be used with a non-zero value of the
<code>splitInstanceBindRegionCount</code> member of a
<a href="chap12.html#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a> structure passed into
<a href="chap12.html#vkBindImageMemory2">vkBindImageMemory2</a>.
This flag also has the effect of making the image use the standard
sparse image block dimensions.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code> specifies that the
image having a compressed format <strong class="purple">can</strong> be used to create a
<code>VkImageView</code> with an uncompressed format where each texel in the
image view corresponds to a compressed texel block of the image.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_EXTENDED_USAGE_BIT</code> specifies that the image <strong class="purple">can</strong>
be created with usage flags that are not supported for the format the
image is created with but are supported for at least one format a
<code>VkImageView</code> created from the image <strong class="purple">can</strong> have.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_DISJOINT_BIT</code> specifies that an image with a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a> <strong class="purple">must</strong>
have each plane separately bound to memory, rather than having a single
memory binding for the whole image; the presence of this bit
distinguishes a <em>disjoint image</em> from an image without this bit set.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_ALIAS_BIT</code> specifies that two images created with
    the same creation parameters and aliased to the same memory <strong class="purple">can</strong>
    interpret the contents of the memory consistently with each other,
    subject to the rules described in the <a href="chap12.html#resources-memory-aliasing">Memory
    Aliasing</a> section.
    This flag further specifies that each plane of a <em>disjoint</em> image <strong class="purple">can</strong>
    share an in-memory non-linear representation with single-plane images,
    and that a single-plane image <strong class="purple">can</strong> share an in-memory non-linear
    representation with a plane of a multi-planar disjoint image, according
    to the rules in <a href="chap43.html#formats-compatible-planes">Compatible formats of planes of multi-planar formats</a>.
    If the <code>pNext</code> chain includes a
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>
or
<a href="chap12.html#VkExternalMemoryImageCreateInfoNV">VkExternalMemoryImageCreateInfoNV</a>
    structure whose <code>handleTypes</code> member is not <code>0</code>, it is as if
    <code>VK_IMAGE_CREATE_ALIAS_BIT</code> is set.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_SAMPLE_LOCATIONS_COMPATIBLE_DEPTH_BIT_EXT</code>
specifies that an image with a depth or depth/stencil format <strong class="purple">can</strong> be
used with custom sample locations when used as a depth/stencil
attachment.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_CORNER_SAMPLED_BIT_NV</code> specifies that the image is
a <a href="chap12.html#resources-images-corner-sampled">corner-sampled image</a>.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code> specifies that an image <strong class="purple">can</strong> be
in a subsampled format which <strong class="purple">may</strong> be more optimal when written as an
attachment by a render pass that has a fragment density map attachment.
Accessing a subsampled image has additional considerations:</p>
<div class="ulist">
<ul>
<li>
<p>Image data read as an image sampler will have undefined values if the
sampler was not created with <code>flags</code> containing
<code>VK_SAMPLER_CREATE_SUBSAMPLED_BIT_EXT</code> or was not sampled through
the use of a combined image sampler with an immutable sampler in
<code>VkDescriptorSetLayoutBinding</code>.</p>
</li>
<li>
<p>Image data read with an input attachment will have undefined values if
the contents were not written as an attachment in an earlier subpass of
the same render pass.</p>
</li>
<li>
<p>Image data read as an image sampler in the fragment shader will be
additionally be read by the device during
<code>VK_PIPELINE_STAGE_VERTEX_SHADER_BIT</code> if
<a href="chap42.html#limits-subsampledCoarseReconstructionEarlyAccess"><code>VkPhysicalDeviceFragmentDensityMap2PropertiesEXT</code>::<code>subsampledCoarseReconstructionEarlyAccess</code></a>
is <code>VK_TRUE</code> and the sampler was created with <code>flags</code>
containing
<code>VK_SAMPLER_CREATE_SUBSAMPLED_COARSE_RECONSTRUCTION_BIT_EXT</code>.</p>
</li>
<li>
<p>Image data read with load operations are resampled to the fragment
density of the render pass if <a href="chap42.html#limits-subsampledLoads"><code>VkPhysicalDeviceFragmentDensityMap2PropertiesEXT</code>::<code>subsampledLoads</code></a>
is <code>VK_TRUE</code>.
Otherwise, values of image data are undefined.</p>
</li>
<li>
<p>Image contents outside of the render area take on undefined values if
the image is stored as a render pass attachment.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>VK_IMAGE_CREATE_FRAGMENT_DENSITY_MAP_OFFSET_BIT_QCOM</code> specifies
that an image <strong class="purple">can</strong> be used in a render pass with non-zero
<a href="chap8.html#renderpass-fragmentdensitymapoffsets">fragment density map offsets</a>.
In a renderpass with non-zero offsets, fragment density map attachments,
input attachments, color attachments, depth/stencil attachment, resolve
attachments, and preserve attachments <strong class="purple">must</strong> be created with
<code>VK_IMAGE_CREATE_FRAGMENT_DENSITY_MAP_OFFSET_BIT_QCOM</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_CREATE_MULTISAMPLED_RENDER_TO_SINGLE_SAMPLED_BIT_EXT</code>
specifies that an image <strong class="purple">can</strong> be used with
<a href="chap8.html#multisampled-render-to-single-sampled">multisampled rendering as a
single-sampled framebuffer attachment</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="chap32.html#sparsememory-sparseresourcefeatures">Sparse Resource Features</a> and
<a href="chap32.html#sparsememory-physicalfeatures">Sparse Physical Device Features</a> for more
details.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkImageCreateFlags" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkImageCreateFlags</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkImageCreateFlags</code> is a bitmask type for setting a mask of zero or
more <a href="chap12.html#VkImageCreateFlagBits">VkImageCreateFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>imageType</code>, specifying the
basic dimensionality of an image, are:</p>
</div>
<div id="VkImageType" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkImageType</span> <span class="p">{</span>
    <span class="n">VK_IMAGE_TYPE_1D</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_IMAGE_TYPE_2D</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">VK_IMAGE_TYPE_3D</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkImageType</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_TYPE_1D</code> specifies a one-dimensional image.</p>
</li>
<li>
<p><code>VK_IMAGE_TYPE_2D</code> specifies a two-dimensional image.</p>
</li>
<li>
<p><code>VK_IMAGE_TYPE_3D</code> specifies a three-dimensional image.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>tiling</code>, specifying the
tiling arrangement of texel blocks in an image, are:</p>
</div>
<div id="VkImageTiling" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkImageTiling</span> <span class="p">{</span>
    <span class="n">VK_IMAGE_TILING_OPTIMAL</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_IMAGE_TILING_LINEAR</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="c1">// Provided by VK_EXT_image_drm_format_modifier</span>
    <span class="n">VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</span> <span class="o">=</span> <span class="mi">1000158000</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkImageTiling</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_TILING_OPTIMAL</code> specifies optimal tiling (texels are laid
out in an implementation-dependent arrangement, for more efficient
memory access).</p>
</li>
<li>
<p><code>VK_IMAGE_TILING_LINEAR</code> specifies linear tiling (texels are laid
out in memory in row-major order, possibly with some padding on each
row).</p>
</li>
<li>
<p><code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code> indicates that the image’s
tiling is defined by a <a href="chap53.html#glossary-drm-format-modifier">Linux DRM format
modifier</a>.
The modifier is specified at image creation with
<a href="chap12.html#VkImageDrmFormatModifierListCreateInfoEXT">VkImageDrmFormatModifierListCreateInfoEXT</a> or
<a href="chap12.html#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a>, and <strong class="purple">can</strong> be queried
with <a href="chap12.html#vkGetImageDrmFormatModifierPropertiesEXT">vkGetImageDrmFormatModifierPropertiesEXT</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To query the memory layout of an image subresource, call:</p>
</div>
<div id="vkGetImageSubresourceLayout" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkGetImageSubresourceLayout</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">image</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkImageSubresource</span><span class="o">*</span>                   <span class="n">pSubresource</span><span class="p">,</span>
    <span class="n">VkSubresourceLayout</span><span class="o">*</span>                        <span class="n">pLayout</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image.</p>
</li>
<li>
<p><code>image</code> is the image whose layout is being queried.</p>
</li>
<li>
<p><code>pSubresource</code> is a pointer to a <a href="chap12.html#VkImageSubresource">VkImageSubresource</a> structure
selecting a specific image subresource from the image.</p>
</li>
<li>
<p><code>pLayout</code> is a pointer to a <a href="chap12.html#VkSubresourceLayout">VkSubresourceLayout</a> structure in
which the layout is returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the image is <a href="chap53.html#glossary-linear-resource">linear</a>, then the
returned layout is valid for <a href="chap11.html#memory-device-hostaccess">host access</a>.</p>
</div>
<div class="paragraph">
<p>If the image’s
tiling is <code>VK_IMAGE_TILING_LINEAR</code> and its
format is a <a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar
format</a>, then <code>vkGetImageSubresourceLayout</code> describes one
<em>format plane</em>
of the image.
If the image’s tiling is <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then
<code>vkGetImageSubresourceLayout</code> describes one <em>memory plane</em> of the image.
If the image’s tiling is <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code> and
the image is <a href="chap53.html#glossary-linear-resource">non-linear</a>, then the returned
layout has an implementation-dependent meaning; the vendor of the image’s
<a href="chap53.html#glossary-drm-format-modifier">DRM format modifier</a> <strong class="purple">may</strong> provide
documentation that explains how to interpret the returned layout.</p>
</div>
<div class="paragraph">
<p><code>vkGetImageSubresourceLayout</code> is invariant for the lifetime of a single
image.
However, the subresource layout of images in Android hardware buffer
external memory is not known until the image has been bound to memory, so
applications <strong class="purple">must</strong> not call <a href="chap12.html#vkGetImageSubresourceLayout">vkGetImageSubresourceLayout</a> for such an
image before it has been bound.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-image-02270" href="chap12.html#VUID-vkGetImageSubresourceLayout-image-02270"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-image-02270</span><br>

<code>image</code> <strong class="purple">must</strong> have been created with <code>tiling</code> equal to
<code>VK_IMAGE_TILING_LINEAR</code> or
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-aspectMask-00997" href="chap12.html#VUID-vkGetImageSubresourceLayout-aspectMask-00997"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-aspectMask-00997</span><br>

The <code>aspectMask</code> member of <code>pSubresource</code> <strong class="purple">must</strong> only have a
single bit set</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-mipLevel-01716" href="chap12.html#VUID-vkGetImageSubresourceLayout-mipLevel-01716"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-mipLevel-01716</span><br>

The <code>mipLevel</code> member of <code>pSubresource</code> <strong class="purple">must</strong> be less than the
<code>mipLevels</code> specified in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code>
was created</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-arrayLayer-01717" href="chap12.html#VUID-vkGetImageSubresourceLayout-arrayLayer-01717"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-arrayLayer-01717</span><br>

The <code>arrayLayer</code> member of <code>pSubresource</code> <strong class="purple">must</strong> be less than the
<code>arrayLayers</code> specified in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code>
was created</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-format-04461" href="chap12.html#VUID-vkGetImageSubresourceLayout-format-04461"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-format-04461</span><br>

If <code>format</code> is a color format, the <code>aspectMask</code> member of
<code>pSubresource</code> <strong class="purple">must</strong> be <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-format-04462" href="chap12.html#VUID-vkGetImageSubresourceLayout-format-04462"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-format-04462</span><br>

If <code>format</code> has a depth component, the <code>aspectMask</code> member of
<code>pSubresource</code> <strong class="purple">must</strong> contain <code>VK_IMAGE_ASPECT_DEPTH_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-format-04463" href="chap12.html#VUID-vkGetImageSubresourceLayout-format-04463"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-format-04463</span><br>

If <code>format</code> has a stencil component, the <code>aspectMask</code> member of
<code>pSubresource</code> <strong class="purple">must</strong> contain <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-format-04464" href="chap12.html#VUID-vkGetImageSubresourceLayout-format-04464"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-format-04464</span><br>

If <code>format</code> does not contain a stencil or depth component, the
<code>aspectMask</code> member of <code>pSubresource</code> <strong class="purple">must</strong> not contain
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-format-01581" href="chap12.html#VUID-vkGetImageSubresourceLayout-format-01581"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-format-01581</span><br>

If the <code>tiling</code> of the <code>image</code> is <code>VK_IMAGE_TILING_LINEAR</code>
and its <code>format</code> is a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a> with
two planes, the <code>aspectMask</code> member of <code>pSubresource</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code> or <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-format-01582" href="chap12.html#VUID-vkGetImageSubresourceLayout-format-01582"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-format-01582</span><br>

If the <code>tiling</code> of the <code>image</code> is <code>VK_IMAGE_TILING_LINEAR</code>
and its <code>format</code> is a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a> with
three planes, the <code>aspectMask</code> member of <code>pSubresource</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code> or
<code>VK_IMAGE_ASPECT_PLANE_2_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-image-01895" href="chap12.html#VUID-vkGetImageSubresourceLayout-image-01895"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-image-01895</span><br>

If <code>image</code> was created with the
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_ANDROID_HARDWARE_BUFFER_BIT_ANDROID</code>
external memory handle type, then <code>image</code> <strong class="purple">must</strong> be bound to memory</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-tiling-02271" href="chap12.html#VUID-vkGetImageSubresourceLayout-tiling-02271"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-tiling-02271</span><br>

If the <code>tiling</code> of the <code>image</code> is
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then the <code>aspectMask</code>
member of <code>pSubresource</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_MEMORY_PLANE<em>_i_</em>BIT_EXT</code> and the index <em>i</em> <strong class="purple">must</strong>
be less than the
<a href="chap43.html#VkDrmFormatModifierPropertiesEXT">VkDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifierPlaneCount</code>
associated with the image’s <code>format</code> and
<a href="chap12.html#VkImageDrmFormatModifierPropertiesEXT">VkImageDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifier</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-device-parameter" href="chap12.html#VUID-vkGetImageSubresourceLayout-device-parameter"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-image-parameter" href="chap12.html#VUID-vkGetImageSubresourceLayout-image-parameter"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-image-parameter</span><br>
 <code>image</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-pSubresource-parameter" href="chap12.html#VUID-vkGetImageSubresourceLayout-pSubresource-parameter"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-pSubresource-parameter</span><br>
 <code>pSubresource</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkImageSubresource">VkImageSubresource</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-pLayout-parameter" href="chap12.html#VUID-vkGetImageSubresourceLayout-pLayout-parameter"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-pLayout-parameter</span><br>
 <code>pLayout</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkSubresourceLayout">VkSubresourceLayout</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout-image-parent" href="chap12.html#VUID-vkGetImageSubresourceLayout-image-parent"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout-image-parent</span><br>
 <code>image</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageSubresource</code> structure is defined as:</p>
</div>
<div id="VkImageSubresource" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageSubresource</span> <span class="p">{</span>
    <span class="n">VkImageAspectFlags</span>    <span class="n">aspectMask</span><span class="p">;</span>
    <span class="kt">uint32_t</span>              <span class="n">mipLevel</span><span class="p">;</span>
    <span class="kt">uint32_t</span>              <span class="n">arrayLayer</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageSubresource</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>aspectMask</code> is a <a href="chap12.html#VkImageAspectFlags">VkImageAspectFlags</a> value selecting the image
<em>aspect</em>.</p>
</li>
<li>
<p><code>mipLevel</code> selects the mipmap level.</p>
</li>
<li>
<p><code>arrayLayer</code> selects the array layer.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSubresource-aspectMask-parameter" href="chap12.html#VUID-VkImageSubresource-aspectMask-parameter"></a> <span class="vuid">VUID-VkImageSubresource-aspectMask-parameter</span><br>
 <code>aspectMask</code> <strong class="purple">must</strong> be a valid combination of <a href="chap12.html#VkImageAspectFlagBits">VkImageAspectFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageSubresource-aspectMask-requiredbitmask" href="chap12.html#VUID-VkImageSubresource-aspectMask-requiredbitmask"></a> <span class="vuid">VUID-VkImageSubresource-aspectMask-requiredbitmask</span><br>
 <code>aspectMask</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Information about the layout of the image subresource is returned in a
<code>VkSubresourceLayout</code> structure:</p>
</div>
<div id="VkSubresourceLayout" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkSubresourceLayout</span> <span class="p">{</span>
    <span class="n">VkDeviceSize</span>    <span class="n">offset</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>    <span class="n">size</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>    <span class="n">rowPitch</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>    <span class="n">arrayPitch</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>    <span class="n">depthPitch</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkSubresourceLayout</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>offset</code> is the byte offset from the start of the image
or the plane
where the image subresource begins.</p>
</li>
<li>
<p><code>size</code> is the size in bytes of the image subresource.
<code>size</code> includes any extra memory that is required based on
<code>rowPitch</code>.</p>
</li>
<li>
<p><code>rowPitch</code> describes the number of bytes between each row of texels
in an image.</p>
</li>
<li>
<p><code>arrayPitch</code> describes the number of bytes between each array layer
of an image.</p>
</li>
<li>
<p><code>depthPitch</code> describes the number of bytes between each slice of 3D
image.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the image is <a href="chap53.html#glossary-linear-resource">linear</a>, then <code>rowPitch</code>,
<code>arrayPitch</code> and <code>depthPitch</code> describe the layout of the image
subresource in linear memory.
For uncompressed formats, <code>rowPitch</code> is the number of bytes between
texels with the same x coordinate in adjacent rows (y coordinates differ by
one).
<code>arrayPitch</code> is the number of bytes between texels with the same x and y
coordinate in adjacent array layers of the image (array layer values differ
by one).
<code>depthPitch</code> is the number of bytes between texels with the same x and y
coordinate in adjacent slices of a 3D image (z coordinates differ by one).
Expressed as an addressing formula, the starting byte of a texel in the
image subresource has address:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c"><span class="c1">// (x,y,z,layer) are in texel coordinates</span>
<span class="n">address</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="n">layer</span><span class="p">)</span> <span class="o">=</span> <span class="n">layer</span><span class="o">*</span><span class="n">arrayPitch</span> <span class="o">+</span> <span class="n">z</span><span class="o">*</span><span class="n">depthPitch</span> <span class="o">+</span> <span class="n">y</span><span class="o">*</span><span class="n">rowPitch</span> <span class="o">+</span> <span class="n">x</span><span class="o">*</span><span class="n">elementSize</span> <span class="o">+</span> <span class="n">offset</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For compressed formats, the <code>rowPitch</code> is the number of bytes between
compressed texel blocks in adjacent rows.
<code>arrayPitch</code> is the number of bytes between compressed texel blocks in
adjacent array layers.
<code>depthPitch</code> is the number of bytes between compressed texel blocks in
adjacent slices of a 3D image.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c"><span class="c1">// (x,y,z,layer) are in compressed texel block coordinates</span>
<span class="n">address</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="n">layer</span><span class="p">)</span> <span class="o">=</span> <span class="n">layer</span><span class="o">*</span><span class="n">arrayPitch</span> <span class="o">+</span> <span class="n">z</span><span class="o">*</span><span class="n">depthPitch</span> <span class="o">+</span> <span class="n">y</span><span class="o">*</span><span class="n">rowPitch</span> <span class="o">+</span> <span class="n">x</span><span class="o">*</span><span class="n">compressedTexelBlockByteSize</span> <span class="o">+</span> <span class="n">offset</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The value of <code>arrayPitch</code> is undefined for images that were not created
as arrays.
<code>depthPitch</code> is defined only for 3D images.</p>
</div>
<div class="paragraph">
<p>If the image has a
<em>single-plane</em>
color format
and its tiling is <code>VK_IMAGE_TILING_LINEAR</code>
, then the <code>aspectMask</code> member of <code>VkImageSubresource</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_COLOR_BIT</code>.</p>
</div>
<div class="paragraph">
<p>If the image has a depth/stencil format
and its tiling is <code>VK_IMAGE_TILING_LINEAR</code>
, then <code>aspectMask</code> <strong class="purple">must</strong> be either <code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>.
On implementations that store depth and stencil aspects separately, querying
each of these image subresource layouts will return a different <code>offset</code>
and <code>size</code> representing the region of memory used for that aspect.
On implementations that store depth and stencil aspects interleaved, the
same <code>offset</code> and <code>size</code> are returned and represent the interleaved
memory allocation.</p>
</div>
<div class="paragraph">
<p>If the image has a <a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar
format</a>
and its tiling is <code>VK_IMAGE_TILING_LINEAR</code>
, then the <code>aspectMask</code> member of <code>VkImageSubresource</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or
(for 3-plane formats only) <code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>.
Querying each of these image subresource layouts will return a different
<code>offset</code> and <code>size</code> representing the region of memory used for that
plane.
If the image is <em>disjoint</em>, then the <code>offset</code> is relative to the base
address of the plane.
If the image is <em>non-disjoint</em>, then the <code>offset</code> is relative to the
base address of the image.</p>
</div>
<div class="paragraph">
<p>If the image’s tiling is <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then
the <code>aspectMask</code> member of <code>VkImageSubresource</code> <strong class="purple">must</strong> be one of
<code>VK_IMAGE_ASPECT_MEMORY_PLANE<em>_i_</em>BIT_EXT</code>, where the maximum allowed
plane index <em>i</em> is defined by the
<a href="chap43.html#VkDrmFormatModifierPropertiesEXT">VkDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifierPlaneCount</code>
associated with the image’s <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code> and
<a href="chap53.html#glossary-drm-format-modifier">modifier</a>.
The memory range used by the subresource is described by <code>offset</code> and
<code>size</code>.
If the image is <em>disjoint</em>, then the <code>offset</code> is relative to the base
address of the <em>memory plane</em>.
If the image is <em>non-disjoint</em>, then the <code>offset</code> is relative to the
base address of the image.
If the image is <a href="chap53.html#glossary-linear-resource">non-linear</a>, then
<code>rowPitch</code>, <code>arrayPitch</code>, and <code>depthPitch</code> have an
implementation-dependent meaning.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To query the memory layout of an image subresource, call:</p>
</div>
<div id="vkGetImageSubresourceLayout2EXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_image_compression_control</span>
<span class="kt">void</span> <span class="nf">vkGetImageSubresourceLayout2EXT</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">image</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkImageSubresource2EXT</span><span class="o">*</span>               <span class="n">pSubresource</span><span class="p">,</span>
    <span class="n">VkSubresourceLayout2EXT</span><span class="o">*</span>                    <span class="n">pLayout</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image.</p>
</li>
<li>
<p><code>image</code> is the image whose layout is being queried.</p>
</li>
<li>
<p><code>pSubresource</code> is a pointer to a <a href="chap12.html#VkImageSubresource2EXT">VkImageSubresource2EXT</a>
structure selecting a specific image for the image subresource.</p>
</li>
<li>
<p><code>pLayout</code> is a pointer to a <a href="chap12.html#VkSubresourceLayout2EXT">VkSubresourceLayout2EXT</a> structure
in which the layout is returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkGetImageSubresourceLayout2EXT</code> behaves similarly to
<a href="chap12.html#vkGetImageSubresourceLayout">vkGetImageSubresourceLayout</a>, with the ability to specify extended
inputs via chained input structures, and to return extended information via
chained output structures.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2EXT-image-02270" href="chap12.html#VUID-vkGetImageSubresourceLayout2EXT-image-02270"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2EXT-image-02270</span><br>

<code>image</code> <strong class="purple">must</strong> have been created with <code>tiling</code> equal to
<code>VK_IMAGE_TILING_LINEAR</code> or
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2EXT-aspectMask-00997" href="chap12.html#VUID-vkGetImageSubresourceLayout2EXT-aspectMask-00997"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2EXT-aspectMask-00997</span><br>

The <code>aspectMask</code> member of <code>pSubresource</code> <strong class="purple">must</strong> only have a
single bit set</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2EXT-mipLevel-01716" href="chap12.html#VUID-vkGetImageSubresourceLayout2EXT-mipLevel-01716"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2EXT-mipLevel-01716</span><br>

The <code>mipLevel</code> member of <code>pSubresource</code> <strong class="purple">must</strong> be less than the
<code>mipLevels</code> specified in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code>
was created</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2EXT-arrayLayer-01717" href="chap12.html#VUID-vkGetImageSubresourceLayout2EXT-arrayLayer-01717"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2EXT-arrayLayer-01717</span><br>

The <code>arrayLayer</code> member of <code>pSubresource</code> <strong class="purple">must</strong> be less than the
<code>arrayLayers</code> specified in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code>
was created</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2EXT-format-04461" href="chap12.html#VUID-vkGetImageSubresourceLayout2EXT-format-04461"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2EXT-format-04461</span><br>

If <code>format</code> is a color format, the <code>aspectMask</code> member of
<code>pSubresource</code> <strong class="purple">must</strong> be <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2EXT-format-04462" href="chap12.html#VUID-vkGetImageSubresourceLayout2EXT-format-04462"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2EXT-format-04462</span><br>

If <code>format</code> has a depth component, the <code>aspectMask</code> member of
<code>pSubresource</code> <strong class="purple">must</strong> contain <code>VK_IMAGE_ASPECT_DEPTH_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2EXT-format-04463" href="chap12.html#VUID-vkGetImageSubresourceLayout2EXT-format-04463"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2EXT-format-04463</span><br>

If <code>format</code> has a stencil component, the <code>aspectMask</code> member of
<code>pSubresource</code> <strong class="purple">must</strong> contain <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2EXT-format-04464" href="chap12.html#VUID-vkGetImageSubresourceLayout2EXT-format-04464"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2EXT-format-04464</span><br>

If <code>format</code> does not contain a stencil or depth component, the
<code>aspectMask</code> member of <code>pSubresource</code> <strong class="purple">must</strong> not contain
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2EXT-format-01581" href="chap12.html#VUID-vkGetImageSubresourceLayout2EXT-format-01581"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2EXT-format-01581</span><br>

If the <code>tiling</code> of the <code>image</code> is <code>VK_IMAGE_TILING_LINEAR</code>
and its <code>format</code> is a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a> with
two planes, the <code>aspectMask</code> member of <code>pSubresource</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code> or <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2EXT-format-01582" href="chap12.html#VUID-vkGetImageSubresourceLayout2EXT-format-01582"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2EXT-format-01582</span><br>

If the <code>tiling</code> of the <code>image</code> is <code>VK_IMAGE_TILING_LINEAR</code>
and its <code>format</code> is a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a> with
three planes, the <code>aspectMask</code> member of <code>pSubresource</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code> or
<code>VK_IMAGE_ASPECT_PLANE_2_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2EXT-image-01895" href="chap12.html#VUID-vkGetImageSubresourceLayout2EXT-image-01895"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2EXT-image-01895</span><br>

If <code>image</code> was created with the
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_ANDROID_HARDWARE_BUFFER_BIT_ANDROID</code>
external memory handle type, then <code>image</code> <strong class="purple">must</strong> be bound to memory</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2EXT-tiling-02271" href="chap12.html#VUID-vkGetImageSubresourceLayout2EXT-tiling-02271"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2EXT-tiling-02271</span><br>

If the <code>tiling</code> of the <code>image</code> is
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then the <code>aspectMask</code>
member of <code>pSubresource</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_MEMORY_PLANE<em>_i_</em>BIT_EXT</code> and the index <em>i</em> <strong class="purple">must</strong>
be less than the
<a href="chap43.html#VkDrmFormatModifierPropertiesEXT">VkDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifierPlaneCount</code>
associated with the image’s <code>format</code> and
<a href="chap12.html#VkImageDrmFormatModifierPropertiesEXT">VkImageDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifier</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2EXT-device-parameter" href="chap12.html#VUID-vkGetImageSubresourceLayout2EXT-device-parameter"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2EXT-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2EXT-image-parameter" href="chap12.html#VUID-vkGetImageSubresourceLayout2EXT-image-parameter"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2EXT-image-parameter</span><br>
 <code>image</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2EXT-pSubresource-parameter" href="chap12.html#VUID-vkGetImageSubresourceLayout2EXT-pSubresource-parameter"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2EXT-pSubresource-parameter</span><br>
 <code>pSubresource</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkImageSubresource2EXT">VkImageSubresource2EXT</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2EXT-pLayout-parameter" href="chap12.html#VUID-vkGetImageSubresourceLayout2EXT-pLayout-parameter"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2EXT-pLayout-parameter</span><br>
 <code>pLayout</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkSubresourceLayout2EXT">VkSubresourceLayout2EXT</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetImageSubresourceLayout2EXT-image-parent" href="chap12.html#VUID-vkGetImageSubresourceLayout2EXT-image-parent"></a> <span class="vuid">VUID-vkGetImageSubresourceLayout2EXT-image-parent</span><br>
 <code>image</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageSubresource2EXT</code> structure is defined as:</p>
</div>
<div id="VkImageSubresource2EXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_image_compression_control</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageSubresource2EXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>       <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                 <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImageSubresource</span>    <span class="n">imageSubresource</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageSubresource2EXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>imageSubresource</code> is a <a href="chap12.html#VkImageSubresource">VkImageSubresource</a> structure.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSubresource2EXT-sType-sType" href="chap12.html#VUID-VkImageSubresource2EXT-sType-sType"></a> <span class="vuid">VUID-VkImageSubresource2EXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_SUBRESOURCE_2_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresource2EXT-pNext-pNext" href="chap12.html#VUID-VkImageSubresource2EXT-pNext-pNext"></a> <span class="vuid">VUID-VkImageSubresource2EXT-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresource2EXT-imageSubresource-parameter" href="chap12.html#VUID-VkImageSubresource2EXT-imageSubresource-parameter"></a> <span class="vuid">VUID-VkImageSubresource2EXT-imageSubresource-parameter</span><br>
 <code>imageSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageSubresource">VkImageSubresource</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Information about the layout of the image subresource is returned in a
<code>VkSubresourceLayout2EXT</code> structure:</p>
</div>
<div id="VkSubresourceLayout2EXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_image_compression_control</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkSubresourceLayout2EXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>        <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                  <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkSubresourceLayout</span>    <span class="n">subresourceLayout</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkSubresourceLayout2EXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>subresourceLayout</code> is a <a href="chap12.html#VkSubresourceLayout">VkSubresourceLayout</a> structure.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSubresourceLayout2EXT-sType-sType" href="chap12.html#VUID-VkSubresourceLayout2EXT-sType-sType"></a> <span class="vuid">VUID-VkSubresourceLayout2EXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_SUBRESOURCE_LAYOUT_2_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkSubresourceLayout2EXT-pNext-pNext" href="chap12.html#VUID-VkSubresourceLayout2EXT-pNext-pNext"></a> <span class="vuid">VUID-VkSubresourceLayout2EXT-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="chap12.html#VkImageCompressionPropertiesEXT">VkImageCompressionPropertiesEXT</a></p>
</li>
<li>
<p><a id="VUID-VkSubresourceLayout2EXT-sType-unique" href="chap12.html#VUID-VkSubresourceLayout2EXT-sType-unique"></a> <span class="vuid">VUID-VkSubresourceLayout2EXT-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If an image was created with <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>,
then the image has a <a href="chap53.html#glossary-drm-format-modifier">Linux DRM format
modifier</a>.
To query the <em>modifier</em>, call:</p>
</div>
<div id="vkGetImageDrmFormatModifierPropertiesEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_image_drm_format_modifier</span>
<span class="n">VkResult</span> <span class="nf">vkGetImageDrmFormatModifierPropertiesEXT</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">image</span><span class="p">,</span>
    <span class="n">VkImageDrmFormatModifierPropertiesEXT</span><span class="o">*</span>      <span class="n">pProperties</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image.</p>
</li>
<li>
<p><code>image</code> is the queried image.</p>
</li>
<li>
<p><code>pProperties</code> is a pointer to a
<a href="chap12.html#VkImageDrmFormatModifierPropertiesEXT">VkImageDrmFormatModifierPropertiesEXT</a> structure in which
properties of the image’s <em>DRM format modifier</em> are returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageDrmFormatModifierPropertiesEXT-image-02272" href="chap12.html#VUID-vkGetImageDrmFormatModifierPropertiesEXT-image-02272"></a> <span class="vuid">VUID-vkGetImageDrmFormatModifierPropertiesEXT-image-02272</span><br>

<code>image</code> <strong class="purple">must</strong> have been created with <a href="chap12.html#VkImageCreateInfo"><code>tiling</code></a> equal to <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageDrmFormatModifierPropertiesEXT-device-parameter" href="chap12.html#VUID-vkGetImageDrmFormatModifierPropertiesEXT-device-parameter"></a> <span class="vuid">VUID-vkGetImageDrmFormatModifierPropertiesEXT-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageDrmFormatModifierPropertiesEXT-image-parameter" href="chap12.html#VUID-vkGetImageDrmFormatModifierPropertiesEXT-image-parameter"></a> <span class="vuid">VUID-vkGetImageDrmFormatModifierPropertiesEXT-image-parameter</span><br>
 <code>image</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageDrmFormatModifierPropertiesEXT-pProperties-parameter" href="chap12.html#VUID-vkGetImageDrmFormatModifierPropertiesEXT-pProperties-parameter"></a> <span class="vuid">VUID-vkGetImageDrmFormatModifierPropertiesEXT-pProperties-parameter</span><br>
 <code>pProperties</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkImageDrmFormatModifierPropertiesEXT">VkImageDrmFormatModifierPropertiesEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetImageDrmFormatModifierPropertiesEXT-image-parent" href="chap12.html#VUID-vkGetImageDrmFormatModifierPropertiesEXT-image-parent"></a> <span class="vuid">VUID-vkGetImageDrmFormatModifierPropertiesEXT-image-parent</span><br>
 <code>image</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap12.html#VkImageDrmFormatModifierPropertiesEXT">VkImageDrmFormatModifierPropertiesEXT</a> structure is defined as:</p>
</div>
<div id="VkImageDrmFormatModifierPropertiesEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_image_drm_format_modifier</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageDrmFormatModifierPropertiesEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>              <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint64_t</span>           <span class="n">drmFormatModifier</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageDrmFormatModifierPropertiesEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>drmFormatModifier</code> returns the image’s
<a href="chap53.html#glossary-drm-format-modifier">Linux DRM format modifier</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code>image</code> was created with
<a href="chap12.html#VkImageDrmFormatModifierListCreateInfoEXT">VkImageDrmFormatModifierListCreateInfoEXT</a>, then the returned
<code>drmFormatModifier</code> <strong class="purple">must</strong> belong to the list of modifiers provided at
time of image creation in
<a href="chap12.html#VkImageDrmFormatModifierListCreateInfoEXT">VkImageDrmFormatModifierListCreateInfoEXT</a>::<code>pDrmFormatModifiers</code>.
If the <code>image</code> was created with
<a href="chap12.html#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a>, then the returned
<code>drmFormatModifier</code> <strong class="purple">must</strong> be the modifier provided at time of image
creation in
<a href="chap12.html#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a>::<code>drmFormatModifier</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageDrmFormatModifierPropertiesEXT-sType-sType" href="chap12.html#VUID-VkImageDrmFormatModifierPropertiesEXT-sType-sType"></a> <span class="vuid">VUID-VkImageDrmFormatModifierPropertiesEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_DRM_FORMAT_MODIFIER_PROPERTIES_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageDrmFormatModifierPropertiesEXT-pNext-pNext" href="chap12.html#VUID-VkImageDrmFormatModifierPropertiesEXT-pNext-pNext"></a> <span class="vuid">VUID-VkImageDrmFormatModifierPropertiesEXT-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy an image, call:</p>
</div>
<div id="vkDestroyImage" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkDestroyImage</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">image</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the image.</p>
</li>
<li>
<p><code>image</code> is the image to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyImage-image-01000" href="chap12.html#VUID-vkDestroyImage-image-01000"></a> <span class="vuid">VUID-vkDestroyImage-image-01000</span><br>

All submitted commands that refer to <code>image</code>, either directly or via
a <code>VkImageView</code>, <strong class="purple">must</strong> have completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyImage-image-01001" href="chap12.html#VUID-vkDestroyImage-image-01001"></a> <span class="vuid">VUID-vkDestroyImage-image-01001</span><br>

If <code>VkAllocationCallbacks</code> were provided when <code>image</code> was
created, a compatible set of callbacks <strong class="purple">must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyImage-image-01002" href="chap12.html#VUID-vkDestroyImage-image-01002"></a> <span class="vuid">VUID-vkDestroyImage-image-01002</span><br>

If no <code>VkAllocationCallbacks</code> were provided when <code>image</code> was
created, <code>pAllocator</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-vkDestroyImage-image-04882" href="chap12.html#VUID-vkDestroyImage-image-04882"></a> <span class="vuid">VUID-vkDestroyImage-image-04882</span><br>

<code>image</code> <strong class="purple">must</strong> not have been acquired from
<a href="chap33.html#vkGetSwapchainImagesKHR">vkGetSwapchainImagesKHR</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyImage-device-parameter" href="chap12.html#VUID-vkDestroyImage-device-parameter"></a> <span class="vuid">VUID-vkDestroyImage-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyImage-image-parameter" href="chap12.html#VUID-vkDestroyImage-image-parameter"></a> <span class="vuid">VUID-vkDestroyImage-image-parameter</span><br>
 If <code>image</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>image</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyImage-pAllocator-parameter" href="chap12.html#VUID-vkDestroyImage-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyImage-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyImage-image-parent" href="chap12.html#VUID-vkDestroyImage-image-parent"></a> <span class="vuid">VUID-vkDestroyImage-image-parent</span><br>
 If <code>image</code> is a valid handle, it <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>image</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-image-format-features"><a class="anchor" href="chap12.html#resources-image-format-features"></a>12.3.1. Image Format Features</h4>
<div class="paragraph">
<p>Valid uses of a <a href="chap12.html#VkImage">VkImage</a> <strong class="purple">may</strong> depend on the image’s <em>format features</em>,
defined below.
Such constraints are documented in the affected valid usage statement.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the image was created with <code>VK_IMAGE_TILING_LINEAR</code>, then its set
of <em>format features</em> is the value of
<a href="chap43.html#VkFormatProperties">VkFormatProperties</a>::<code>linearTilingFeatures</code> found by calling
<a href="chap43.html#vkGetPhysicalDeviceFormatProperties">vkGetPhysicalDeviceFormatProperties</a> on the same <code>format</code> as
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code>.</p>
</li>
<li>
<p>If the image was created with <code>VK_IMAGE_TILING_OPTIMAL</code>,
but without an
<a href="chap11.html#memory-external-android-hardware-buffer-external-formats">Android
hardware buffer external format</a>,
or an
<a href="chap12.html#VkBufferCollectionImageCreateInfoFUCHSIA">VkBufferCollectionImageCreateInfoFUCHSIA</a>,
then its set of <em>format features</em> is the value of
<a href="chap43.html#VkFormatProperties">VkFormatProperties</a>::<code>optimalTilingFeatures</code> found by calling
<a href="chap43.html#vkGetPhysicalDeviceFormatProperties">vkGetPhysicalDeviceFormatProperties</a> on the same <code>format</code> as
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code>.</p>
</li>
<li>
<p>If the image was created with an
<a href="chap11.html#memory-external-android-hardware-buffer-external-formats">Android
hardware buffer external format</a>, then its set of <em>format features</em> is
the value of
<a href="chap11.html#VkAndroidHardwareBufferFormatPropertiesANDROID">VkAndroidHardwareBufferFormatPropertiesANDROID</a>::<code>formatFeatures</code>
found by calling <a href="chap11.html#vkGetAndroidHardwareBufferPropertiesANDROID">vkGetAndroidHardwareBufferPropertiesANDROID</a> on
the Android hardware buffer that was imported to the
<a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> to which the image is bound.</p>
</li>
<li>
<p>If the image was created with
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then:</p>
<div class="ulist">
<ul>
<li>
<p>The image’s DRM format modifier is the value of
<a href="chap12.html#VkImageDrmFormatModifierPropertiesEXT">VkImageDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifier</code>
found by calling <a href="chap12.html#vkGetImageDrmFormatModifierPropertiesEXT">vkGetImageDrmFormatModifierPropertiesEXT</a>.</p>
</li>
<li>
<p>Let
<a href="chap43.html#VkDrmFormatModifierPropertiesListEXT">VkDrmFormatModifierPropertiesListEXT</a>::<code>pDrmFormatModifierProperties</code>
be the array found by calling
<a href="chap43.html#vkGetPhysicalDeviceFormatProperties2">vkGetPhysicalDeviceFormatProperties2</a> on the same <code>format</code> as
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>format</code>.</p>
</li>
<li>
<p>Let <code>VkDrmFormatModifierPropertiesEXT prop</code> be the array element whose
<code>drmFormatModifier</code> member is the value of the image’s DRM format
modifier.</p>
</li>
<li>
<p>Then the image’s set of <em>format features</em> is the value of
<code>prop</code>::<code>drmFormatModifierTilingFeatures</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="resources-images-corner-sampled"><a class="anchor" href="chap12.html#resources-images-corner-sampled"></a>12.3.2. Corner-Sampled Images</h4>
<div class="paragraph">
<p>A <em>corner-sampled image</em> is an image where unnormalized texel coordinates
are centered on integer values rather than half-integer values.</p>
</div>
<div class="paragraph">
<p>A corner-sampled image has a number of differences compared to conventional
texture image:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Texels are centered on integer coordinates.
See <a href="chap16.html#textures-unnormalized-to-integer">Unnormalized Texel Coordinate
Operations</a></p>
</li>
<li>
<p>Normalized coordinates are scaled using <span class="eq">coord × (dim - 1)</span>
rather than <span class="eq">coord × dim</span>, where dim is the size of one
dimension of the image.
See <a href="chap16.html#textures-normalized-to-unnormalized">normalized texel coordinate
transform</a>.</p>
</li>
<li>
<p>Partial derivatives are scaled using <span class="eq">coord × (dim - 1)</span>
rather than <span class="eq">coord × dim</span>.
See <a href="chap16.html#textures-scale-factor">Scale Factor Operation</a>.</p>
</li>
<li>
<p>Calculation of the next higher lod size goes according to
<span class="eq">⌈dim / 2⌉</span> rather than <span class="eq">⌊dim / 2⌋</span>.
See <a href="chap12.html#resources-image-miplevel-sizing">Image Miplevel Sizing</a>.</p>
</li>
<li>
<p>The minimum level size is 2x2 for 2D images and 2x2x2 for 3D images.
See <a href="chap12.html#resources-image-miplevel-sizing">Image Miplevel Sizing</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Corner-sampling is only supported for 2D and 3D images.
When sampling a corner-sampled image, the sampler addressing mode <strong class="purple">must</strong> be
<code>VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE</code>.
Corner-sampled images are not supported as cube maps or depth/stencil
images.</p>
</div>
</div>
<div class="sect3">
<h4 id="resources-image-miplevel-sizing"><a class="anchor" href="chap12.html#resources-image-miplevel-sizing"></a>12.3.3. Image Miplevel Sizing</h4>
<div class="paragraph">
<p>A <em>complete mipmap chain</em> is the full set of miplevels, from the largest
miplevel provided, down to the <em>minimum miplevel size</em>.</p>
</div>
<div class="sect4">
<h5 id="_conventional_images"><a class="anchor" href="chap12.html#_conventional_images"></a>Conventional Images</h5>
<div class="paragraph">
<p>For conventional images, the dimensions of each successive miplevel,
<span class="eq">n+1</span>, are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>width</code><sub>n+1</sub> = max(⌊<code>width</code><sub>n</sub>/2⌋,
1)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>height</code><sub>n+1</sub> = max(⌊<code>height</code><sub>n</sub>/2⌋,
1)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>depth</code><sub>n+1</sub> = max(⌊<code>depth</code><sub>n</sub>/2⌋,
1)</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>where <span class="eq"><code>width</code><sub>n</sub></span>, <span class="eq"><code>height</code><sub>n</sub></span>, and <span class="eq"><code>depth</code><sub>n</sub></span>
are the dimensions of the next larger miplevel, <span class="eq">n</span>.</p>
</div>
<div class="paragraph">
<p>The minimum miplevel size is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>1 for one-dimensional images,</p>
</li>
<li>
<p>1x1 for two-dimensional images, and</p>
</li>
<li>
<p>1x1x1 for three-dimensional images.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The number of levels in a complete mipmap chain is:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">⌊log<sub>2</sub>(max(<code>width</code><sub>0</sub>, <code>height</code><sub>0</sub>,
<code>depth</code><sub>0</sub>))⌋ +  1</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>where <span class="eq"><code>width</code><sub>0</sub></span>, <span class="eq"><code>height</code><sub>0</sub></span>, and <span class="eq"><code>depth</code><sub>0</sub></span>
are the dimensions of the largest (most detailed) miplevel, <code>0</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_corner_sampled_images"><a class="anchor" href="chap12.html#_corner_sampled_images"></a>Corner-Sampled Images</h5>
<div class="paragraph">
<p>For corner-sampled images, the dimensions of each successive miplevel,
<span class="eq">n+1</span>, are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>width</code><sub>n+1</sub> = max(⌈<code>width</code><sub>n</sub>/2⌉, 2)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>height</code><sub>n+1</sub> = max(⌈<code>height</code><sub>n</sub>/2⌉,
2)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq"><code>depth</code><sub>n+1</sub> = max(⌈<code>depth</code><sub>n</sub>/2⌉, 2)</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>where <span class="eq"><code>width</code><sub>n</sub></span>, <span class="eq"><code>height</code><sub>n</sub></span>, and <span class="eq"><code>depth</code><sub>n</sub></span>
are the dimensions of the next larger miplevel, <span class="eq">n</span>.</p>
</div>
<div class="paragraph">
<p>The minimum miplevel size is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>2x2 for two-dimensional images, and</p>
</li>
<li>
<p>2x2x2 for three-dimensional images.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The number of levels in a complete mipmap chain is:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">⌈log<sub>2</sub>(max(<code>width</code><sub>0</sub>, <code>height</code><sub>0</sub>,
<code>depth</code><sub>0</sub>))⌉</span></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>where <span class="eq"><code>width</code><sub>0</sub></span>, <span class="eq"><code>height</code><sub>0</sub></span>, and <span class="eq"><code>depth</code><sub>0</sub></span>
are the dimensions of the largest (most detailed) miplevel, <code>0</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-image-layouts"><a class="anchor" href="chap12.html#resources-image-layouts"></a>12.4. Image Layouts</h3>
<div class="paragraph">
<p>Images are stored in implementation-dependent opaque layouts in memory.
Each layout has limitations on what kinds of operations are supported for
image subresources using the layout.
At any given time, the data representing an image subresource in memory
exists in a particular layout which is determined by the most recent layout
transition that was performed on that image subresource.
Applications have control over which layout each image subresource uses, and
<strong class="purple">can</strong> transition an image subresource from one layout to another.
Transitions <strong class="purple">can</strong> happen with an image memory barrier, included as part of a
<a href="chap7.html#vkCmdPipelineBarrier">vkCmdPipelineBarrier</a> or a <a href="chap7.html#vkCmdWaitEvents">vkCmdWaitEvents</a> command buffer command
(see <a href="chap7.html#synchronization-image-memory-barriers">Image Memory Barriers</a>), or as part of a subpass
dependency within a render pass (see <code>VkSubpassDependency</code>).</p>
</div>
<div class="paragraph">
<p>Image layout is per-image subresource.
Separate image subresources of the same image <strong class="purple">can</strong> be in different layouts
at the same time, with the exception that depth and stencil aspects of a
given image subresource <strong class="purple">can</strong> only be in different layouts if the
<a href="chap41.html#features-separateDepthStencilLayouts"><code>separateDepthStencilLayouts</code></a>
feature is enabled.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Each layout <strong class="purple">may</strong> offer optimal performance for a specific usage of image
memory.
For example, an image with a layout of
<code>VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL</code> <strong class="purple">may</strong> provide optimal
performance for use as a color attachment, but be unsupported for use in
transfer commands.
Applications <strong class="purple">can</strong> transition an image subresource from one layout to another
in order to achieve optimal performance when the image subresource is used
for multiple kinds of operations.
After initialization, applications need not use any layout other than the
general layout, though this <strong class="purple">may</strong> produce suboptimal performance on some
implementations.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Upon creation, all image subresources of an image are initially in the same
layout, where that layout is selected by the
<code>VkImageCreateInfo</code>::<code>initialLayout</code> member.
The <code>initialLayout</code> <strong class="purple">must</strong> be either <code>VK_IMAGE_LAYOUT_UNDEFINED</code> or
<code>VK_IMAGE_LAYOUT_PREINITIALIZED</code>.
If it is <code>VK_IMAGE_LAYOUT_PREINITIALIZED</code>, then the image data <strong class="purple">can</strong> be
preinitialized by the host while using this layout, and the transition away
from this layout will preserve that data.
If it is <code>VK_IMAGE_LAYOUT_UNDEFINED</code>, then the contents of the data are
considered to be undefined, and the transition away from this layout is not
guaranteed to preserve that data.
For either of these initial layouts, any image subresources <strong class="purple">must</strong> be
transitioned to another layout before they are accessed by the device.</p>
</div>
<div class="paragraph">
<p>Host access to image memory is only well-defined for
<a href="chap53.html#glossary-linear-resource">linear</a> images and for image subresources of
those images which are currently in either the
<code>VK_IMAGE_LAYOUT_PREINITIALIZED</code> or <code>VK_IMAGE_LAYOUT_GENERAL</code>
layout.
Calling <a href="chap12.html#vkGetImageSubresourceLayout">vkGetImageSubresourceLayout</a> for a linear image returns a
subresource layout mapping that is valid for either of those image layouts.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The set of image layouts consists of:</p>
</div>
<div id="VkImageLayout" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkImageLayout</span> <span class="p">{</span>
    <span class="n">VK_IMAGE_LAYOUT_UNDEFINED</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_IMAGE_LAYOUT_GENERAL</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
    <span class="n">VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
    <span class="n">VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
    <span class="n">VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
    <span class="n">VK_IMAGE_LAYOUT_PREINITIALIZED</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
  <span class="c1">// Provided by VK_VERSION_1_1</span>
    <span class="n">VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</span> <span class="o">=</span> <span class="mi">1000117000</span><span class="p">,</span>
  <span class="c1">// Provided by VK_VERSION_1_1</span>
    <span class="n">VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</span> <span class="o">=</span> <span class="mi">1000117001</span><span class="p">,</span>
    <span class="n">VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</span> <span class="o">=</span> <span class="mi">1000241000</span><span class="p">,</span>
    <span class="n">VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</span> <span class="o">=</span> <span class="mi">1000241001</span><span class="p">,</span>
    <span class="n">VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</span> <span class="o">=</span> <span class="mi">1000241002</span><span class="p">,</span>
    <span class="n">VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</span> <span class="o">=</span> <span class="mi">1000241003</span><span class="p">,</span>
    <span class="n">VK_IMAGE_LAYOUT_READ_ONLY_OPTIMAL</span> <span class="o">=</span> <span class="mi">1000314000</span><span class="p">,</span>
    <span class="n">VK_IMAGE_LAYOUT_ATTACHMENT_OPTIMAL</span> <span class="o">=</span> <span class="mi">1000314001</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_swapchain</span>
    <span class="n">VK_IMAGE_LAYOUT_PRESENT_SRC_KHR</span> <span class="o">=</span> <span class="mi">1000001002</span><span class="p">,</span>
<span class="cp">#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_KHR_video_decode_queue</span>
    <span class="n">VK_IMAGE_LAYOUT_VIDEO_DECODE_DST_KHR</span> <span class="o">=</span> <span class="mi">1000024000</span><span class="p">,</span>
<span class="cp">#endif
#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_KHR_video_decode_queue</span>
    <span class="n">VK_IMAGE_LAYOUT_VIDEO_DECODE_SRC_KHR</span> <span class="o">=</span> <span class="mi">1000024001</span><span class="p">,</span>
<span class="cp">#endif
#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_KHR_video_decode_queue</span>
    <span class="n">VK_IMAGE_LAYOUT_VIDEO_DECODE_DPB_KHR</span> <span class="o">=</span> <span class="mi">1000024002</span><span class="p">,</span>
<span class="cp">#endif
</span>  <span class="c1">// Provided by VK_KHR_shared_presentable_image</span>
    <span class="n">VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</span> <span class="o">=</span> <span class="mi">1000111000</span><span class="p">,</span>
  <span class="c1">// Provided by VK_EXT_fragment_density_map</span>
    <span class="n">VK_IMAGE_LAYOUT_FRAGMENT_DENSITY_MAP_OPTIMAL_EXT</span> <span class="o">=</span> <span class="mi">1000218000</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_fragment_shading_rate</span>
    <span class="n">VK_IMAGE_LAYOUT_FRAGMENT_SHADING_RATE_ATTACHMENT_OPTIMAL_KHR</span> <span class="o">=</span> <span class="mi">1000164003</span><span class="p">,</span>
<span class="cp">#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_KHR_video_encode_queue</span>
    <span class="n">VK_IMAGE_LAYOUT_VIDEO_ENCODE_DST_KHR</span> <span class="o">=</span> <span class="mi">1000299000</span><span class="p">,</span>
<span class="cp">#endif
#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_KHR_video_encode_queue</span>
    <span class="n">VK_IMAGE_LAYOUT_VIDEO_ENCODE_SRC_KHR</span> <span class="o">=</span> <span class="mi">1000299001</span><span class="p">,</span>
<span class="cp">#endif
#ifdef VK_ENABLE_BETA_EXTENSIONS
</span>  <span class="c1">// Provided by VK_KHR_video_encode_queue</span>
    <span class="n">VK_IMAGE_LAYOUT_VIDEO_ENCODE_DPB_KHR</span> <span class="o">=</span> <span class="mi">1000299002</span><span class="p">,</span>
<span class="cp">#endif
</span>  <span class="c1">// Provided by VK_KHR_maintenance2</span>
    <span class="n">VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL_KHR</span> <span class="o">=</span> <span class="n">VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_maintenance2</span>
    <span class="n">VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL_KHR</span> <span class="o">=</span> <span class="n">VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</span><span class="p">,</span>
  <span class="c1">// Provided by VK_NV_shading_rate_image</span>
    <span class="n">VK_IMAGE_LAYOUT_SHADING_RATE_OPTIMAL_NV</span> <span class="o">=</span> <span class="n">VK_IMAGE_LAYOUT_FRAGMENT_SHADING_RATE_ATTACHMENT_OPTIMAL_KHR</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_separate_depth_stencil_layouts</span>
    <span class="n">VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL_KHR</span> <span class="o">=</span> <span class="n">VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_separate_depth_stencil_layouts</span>
    <span class="n">VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL_KHR</span> <span class="o">=</span> <span class="n">VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_separate_depth_stencil_layouts</span>
    <span class="n">VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL_KHR</span> <span class="o">=</span> <span class="n">VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_separate_depth_stencil_layouts</span>
    <span class="n">VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL_KHR</span> <span class="o">=</span> <span class="n">VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_synchronization2</span>
    <span class="n">VK_IMAGE_LAYOUT_READ_ONLY_OPTIMAL_KHR</span> <span class="o">=</span> <span class="n">VK_IMAGE_LAYOUT_READ_ONLY_OPTIMAL</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_synchronization2</span>
    <span class="n">VK_IMAGE_LAYOUT_ATTACHMENT_OPTIMAL_KHR</span> <span class="o">=</span> <span class="n">VK_IMAGE_LAYOUT_ATTACHMENT_OPTIMAL</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkImageLayout</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The type(s) of device access supported by each layout are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_LAYOUT_UNDEFINED</code> specifies that the layout is unknown.
Image memory <strong class="purple">cannot</strong> be transitioned into this layout.
This layout <strong class="purple">can</strong> be used as the <code>initialLayout</code> member of
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>.
This layout <strong class="purple">can</strong> be used in place of the current image layout in a
layout transition, but doing so will cause the contents of the image’s
memory to be undefined.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_PREINITIALIZED</code> specifies that an image’s memory is
in a defined layout and <strong class="purple">can</strong> be populated by data, but that it has not
yet been initialized by the driver.
Image memory <strong class="purple">cannot</strong> be transitioned into this layout.
This layout <strong class="purple">can</strong> be used as the <code>initialLayout</code> member of
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>.
This layout is intended to be used as the initial layout for an image
whose contents are written by the host, and hence the data <strong class="purple">can</strong> be
written to memory immediately, without first executing a layout
transition.
Currently, <code>VK_IMAGE_LAYOUT_PREINITIALIZED</code> is only useful with
<a href="chap53.html#glossary-linear-resource">linear</a> images because there is not a
standard layout defined for <code>VK_IMAGE_TILING_OPTIMAL</code> images.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_GENERAL</code> supports all types of device access.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_ATTACHMENT_OPTIMAL</code> specifies a layout that <strong class="purple">must</strong>
only be used with attachment accesses in the graphics pipeline.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_READ_ONLY_OPTIMAL</code> specifies a layout allowing read
only access as an attachment, or in shaders as a sampled image, combined
image/sampler, or input attachment.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL</code> <strong class="purple">must</strong> only be used as a
color or resolve attachment in a <code>VkFramebuffer</code>.
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code> usage bit enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL</code> specifies a
layout for both the depth and stencil aspects of a depth/stencil format
image allowing read and write access as a depth/stencil attachment.
It is equivalent to <code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code> and
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code> specifies a layout
for both the depth and stencil aspects of a depth/stencil format image
allowing read only access as a depth/stencil attachment or in shaders as
a sampled image, combined image/sampler, or input attachment.
It is equivalent to <code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code> and
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</code>
specifies a layout for depth/stencil format images allowing read and
write access to the stencil aspect as a stencil attachment, and read
only access to the depth aspect as a depth attachment or in shaders as a
sampled image, combined image/sampler, or input attachment.
It is equivalent to <code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code> and
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</code>
specifies a layout for depth/stencil format images allowing read and
write access to the depth aspect as a depth attachment, and read only
access to the stencil aspect as a stencil attachment or in shaders as a
sampled image, combined image/sampler, or input attachment.
It is equivalent to <code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code> and
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code>.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code> specifies a layout for
the depth aspect of a depth/stencil format image allowing read and write
access as a depth attachment.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code> specifies a layout for the
depth aspect of a depth/stencil format image allowing read-only access
as a depth attachment or in shaders as a sampled image, combined
image/sampler, or input attachment.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code> specifies a layout for
the stencil aspect of a depth/stencil format image allowing read and
write access as a stencil attachment.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code> specifies a layout for
the stencil aspect of a depth/stencil format image allowing read-only
access as a stencil attachment or in shaders as a sampled image,
combined image/sampler, or input attachment.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL</code> specifies a layout
allowing read-only access in a shader as a sampled image, combined
image/sampler, or input attachment.
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_SAMPLED_BIT</code> or
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code> usage bits enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code> <strong class="purple">must</strong> only be used as a
source image of a transfer command (see the definition of
<a href="chap7.html#synchronization-pipeline-stages-transfer"><code>VK_PIPELINE_STAGE_TRANSFER_BIT</code></a>).
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage bit enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> <strong class="purple">must</strong> only be used as a
destination image of a transfer command.
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage bit enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_PRESENT_SRC_KHR</code> <strong class="purple">must</strong> only be used for presenting
a presentable image for display.
A swapchain’s image <strong class="purple">must</strong> be transitioned to this layout before calling
<a href="chap33.html#vkQueuePresentKHR">vkQueuePresentKHR</a>, and <strong class="purple">must</strong> be transitioned away from this layout
after calling <a href="chap33.html#vkAcquireNextImageKHR">vkAcquireNextImageKHR</a>.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code> is valid only for shared
presentable images, and <strong class="purple">must</strong> be used for any usage the image supports.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_FRAGMENT_SHADING_RATE_ATTACHMENT_OPTIMAL_KHR</code> <strong class="purple">must</strong>
    only be used as a
    <a href="chap27.html#primsrast-fragment-shading-rate-attachment">fragment shading rate
    attachment</a>
or
    <a href="chap27.html#primsrast-shading-rate-image">shading rate image</a>.
    This layout is valid only for image subresources of images created with
    the <code>VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code> usage
    bit enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_FRAGMENT_DENSITY_MAP_OPTIMAL_EXT</code> <strong class="purple">must</strong> only be
used as a fragment density map attachment in a <code>VkRenderPass</code>.
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_FRAGMENT_DENSITY_MAP_BIT_EXT</code> usage bit enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_VIDEO_DECODE_DST_KHR</code> <strong class="purple">must</strong> only be used as a
decode output image of a <a href="chap39.html#video-decode-operations">video decode
operation</a>.
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code> usage bit enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_VIDEO_DECODE_SRC_KHR</code> is reserved for future use.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_VIDEO_DECODE_DPB_KHR</code> <strong class="purple">must</strong> only be used as a
decode source or destination image of a <a href="chap39.html#video-decode-operations">video
decode operation</a>.
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code> usage bit enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_VIDEO_ENCODE_DST_KHR</code> is reserved for future use.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_VIDEO_ENCODE_SRC_KHR</code> <strong class="purple">must</strong> only be used as a
encode source image of a <a href="chap39.html#video-encode-operations">video encode
operation</a>.
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code> usage bit enabled.</p>
</li>
<li>
<p><code>VK_IMAGE_LAYOUT_VIDEO_ENCODE_DPB_KHR</code> <strong class="purple">must</strong> only be used as a
encode source or destination image of a <a href="chap39.html#video-encode-operations">video
encode operation</a>.
This layout is valid only for image subresources of images created with
the <code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code> usage bit enabled.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The layout of each image subresource is not a state of the image subresource
itself, but is rather a property of how the data in memory is organized, and
thus for each mechanism of accessing an image in the API the application
<strong class="purple">must</strong> specify a parameter or structure member that indicates which image
layout the image subresource(s) are considered to be in when the image will
be accessed.
For transfer commands, this is a parameter to the command (see <a href="chap19.html">Clear Commands</a>
and <a href="chap20.html">Copy Commands</a>).
For use as a framebuffer attachment, this is a member in the substructures
of the <a href="chap8.html#VkRenderPassCreateInfo">VkRenderPassCreateInfo</a> (see <a href="chap8.html">Render Pass</a>).
For use in a descriptor set, this is a member in the
<code>VkDescriptorImageInfo</code> structure (see <a href="chap14.html#descriptorsets-updates">Descriptor Set Updates</a>).</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-image-layouts-matching-rule"><a class="anchor" href="chap12.html#resources-image-layouts-matching-rule"></a>12.4.1. Image Layout Matching Rules</h4>
<div class="paragraph">
<p>At the time that any command buffer command accessing an image executes on
any queue, the layouts of the image subresources that are accessed <strong class="purple">must</strong> all
match exactly the layout specified via the API controlling those
accesses,
except in case of accesses to an image with a depth/stencil format performed
through descriptors referring to only a single aspect of the image, where
the following relaxed matching rules apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Descriptors referring just to the depth aspect of a depth/stencil image
only need to match in the image layout of the depth aspect, thus
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code> and
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</code> are
considered to match.</p>
</li>
<li>
<p>Descriptors referring just to the stencil aspect of a depth/stencil
image only need to match in the image layout of the stencil aspect, thus
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code> and
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</code> are
considered to match.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When performing a layout transition on an image subresource, the old layout
value <strong class="purple">must</strong> either equal the current layout of the image subresource (at the
time the transition executes), or else be <code>VK_IMAGE_LAYOUT_UNDEFINED</code>
(implying that the contents of the image subresource need not be preserved).
The new layout used in a transition <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_UNDEFINED</code> or <code>VK_IMAGE_LAYOUT_PREINITIALIZED</code>.</p>
</div>
<div class="paragraph">
<p>The image layout of each image subresource of a depth/stencil image created
with <code>VK_IMAGE_CREATE_SAMPLE_LOCATIONS_COMPATIBLE_DEPTH_BIT_EXT</code> is
dependent on the last sample locations used to render to the image
subresource as a depth/stencil attachment, thus applications <strong class="purple">must</strong> provide
the same sample locations that were last used to render to the given image
subresource whenever a layout transition of the image subresource happens,
otherwise the contents of the depth aspect of the image subresource become
undefined.</p>
</div>
<div class="paragraph">
<p>In addition, depth reads from a depth/stencil attachment referring to an
image subresource range of a depth/stencil image created with
<code>VK_IMAGE_CREATE_SAMPLE_LOCATIONS_COMPATIBLE_DEPTH_BIT_EXT</code> using
different sample locations than what have been last used to perform depth
writes to the image subresources of the same image subresource range return
undefined values.</p>
</div>
<div class="paragraph">
<p>Similarly, depth writes to a depth/stencil attachment referring to an image
subresource range of a depth/stencil image created with
<code>VK_IMAGE_CREATE_SAMPLE_LOCATIONS_COMPATIBLE_DEPTH_BIT_EXT</code> using
different sample locations than what have been last used to perform depth
writes to the image subresources of the same image subresource range make
the contents of the depth aspect of those image subresources undefined.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-image-views"><a class="anchor" href="chap12.html#resources-image-views"></a>12.5. Image Views</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Image objects are not directly accessed by pipeline shaders for reading or
writing image data.
Instead, <em>image views</em> representing contiguous ranges of the image
subresources and containing additional metadata are used for that purpose.
Views <strong class="purple">must</strong> be created on images of compatible types, and <strong class="purple">must</strong> represent a
valid subset of image subresources.</p>
</div>
<div class="paragraph">
<p>Image views are represented by <code>VkImageView</code> handles:</p>
</div>
<div id="VkImageView" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="n">VK_DEFINE_NON_DISPATCHABLE_HANDLE</span><span class="p">(</span><span class="n">VkImageView</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><code>VK_REMAINING_ARRAY_LAYERS</code> is a special constant value used for image
views to indicate that all remaining array layers in an image after the base
layer should be included in the view.</p>
</div>
<div id="VK_REMAINING_ARRAY_LAYERS" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="cp">#define VK_REMAINING_ARRAY_LAYERS         (~0U)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><code>VK_REMAINING_MIP_LEVELS</code> is a special constant value used for image
views to indicate that all remaining mipmap levels in an image after the
base level should be included in the view.</p>
</div>
<div id="VK_REMAINING_MIP_LEVELS" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="cp">#define VK_REMAINING_MIP_LEVELS           (~0U)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The types of image views that <strong class="purple">can</strong> be created are:</p>
</div>
<div id="VkImageViewType" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkImageViewType</span> <span class="p">{</span>
    <span class="n">VK_IMAGE_VIEW_TYPE_1D</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_IMAGE_VIEW_TYPE_2D</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">VK_IMAGE_VIEW_TYPE_3D</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">VK_IMAGE_VIEW_TYPE_CUBE</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
    <span class="n">VK_IMAGE_VIEW_TYPE_1D_ARRAY</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
    <span class="n">VK_IMAGE_VIEW_TYPE_2D_ARRAY</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkImageViewType</span><span class="p">;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create an image view, call:</p>
</div>
<div id="vkCreateImageView" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="n">VkResult</span> <span class="nf">vkCreateImageView</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkImageViewCreateInfo</span><span class="o">*</span>                <span class="n">pCreateInfo</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">,</span>
    <span class="n">VkImageView</span><span class="o">*</span>                                <span class="n">pView</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the image view.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <code>VkImageViewCreateInfo</code>
structure containing parameters to be used to create the image view.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pView</code> is a pointer to a <a href="chap12.html#VkImageView">VkImageView</a> handle in which the
resulting image view object is returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateImageView-device-parameter" href="chap12.html#VUID-vkCreateImageView-device-parameter"></a> <span class="vuid">VUID-vkCreateImageView-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateImageView-pCreateInfo-parameter" href="chap12.html#VUID-vkCreateImageView-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateImageView-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateImageView-pAllocator-parameter" href="chap12.html#VUID-vkCreateImageView-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateImageView-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateImageView-pView-parameter" href="chap12.html#VUID-vkCreateImageView-pView-parameter"></a> <span class="vuid">VUID-vkCreateImageView-pView-parameter</span><br>
 <code>pView</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkImageView">VkImageView</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageViewCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkImageViewCreateInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageViewCreateInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>            <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImageViewCreateFlags</span>     <span class="n">flags</span><span class="p">;</span>
    <span class="n">VkImage</span>                    <span class="n">image</span><span class="p">;</span>
    <span class="n">VkImageViewType</span>            <span class="n">viewType</span><span class="p">;</span>
    <span class="n">VkFormat</span>                   <span class="n">format</span><span class="p">;</span>
    <span class="n">VkComponentMapping</span>         <span class="n">components</span><span class="p">;</span>
    <span class="n">VkImageSubresourceRange</span>    <span class="n">subresourceRange</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageViewCreateInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap12.html#VkImageViewCreateFlagBits">VkImageViewCreateFlagBits</a> describing
additional parameters of the image view.</p>
</li>
<li>
<p><code>image</code> is a <a href="chap12.html#VkImage">VkImage</a> on which the view will be created.</p>
</li>
<li>
<p><code>viewType</code> is a <a href="chap12.html#VkImageViewType">VkImageViewType</a> value specifying the type of
the image view.</p>
</li>
<li>
<p><code>format</code> is a <a href="chap43.html#VkFormat">VkFormat</a> describing the format and type used to
interpret texel blocks in the image.</p>
</li>
<li>
<p><code>components</code> is a <a href="chap12.html#VkComponentMapping">VkComponentMapping</a> structure specifying a
remapping of color components (or of depth or stencil components after
they have been converted into color components).</p>
</li>
<li>
<p><code>subresourceRange</code> is a <a href="chap12.html#VkImageSubresourceRange">VkImageSubresourceRange</a> structure
selecting the set of mipmap levels and array layers to be accessible to
the view.</p>
</li>
</ul>
</div>
<div id="resources-image-inherited-usage" class="paragraph">
<p>Some of the <code>image</code> creation parameters are inherited by the view.
In particular, image view creation inherits the implicit parameter
<code>usage</code> specifying the allowed usages of the image view that, by
default, takes the value of the corresponding <code>usage</code> parameter
specified in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> at image creation time.
The implicit <code>usage</code> <strong class="purple">can</strong> be overriden by adding a
<a href="chap12.html#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a> structure to the <code>pNext</code> chain, but the
view usage <strong class="purple">must</strong> be a subset of the image usage.
If <code>image</code> has a depth-stencil format and was created with a
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure included in the <code>pNext</code>
chain of <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>, the usage is calculated based on the
<code>subresource.aspectMask</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <code>aspectMask</code> includes only <code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, the
implicit <code>usage</code> is equal to
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code>.</p>
</li>
<li>
<p>If <code>aspectMask</code> includes only <code>VK_IMAGE_ASPECT_DEPTH_BIT</code>, the
implicit <code>usage</code> is equal to <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code>.</p>
</li>
<li>
<p>If both aspects are included in <code>aspectMask</code>, the implicit
<code>usage</code> is equal to the intersection of
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code> and
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>image</code> was created with the <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code>
flag,
and if the <code>format</code> of the image is not
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar</a>,
<code>format</code> <strong class="purple">can</strong> be different from the image’s format, but if
<code>image</code> was created without the
<code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code> flag and
they are not equal they <strong class="purple">must</strong> be <em>compatible</em>.
Image format compatibility is defined in the
<a href="chap43.html#formats-compatibility-classes">Format Compatibility Classes</a> section.
Views of compatible formats will have the same mapping between texel
coordinates and memory locations irrespective of the <code>format</code>, with only
the interpretation of the bit pattern changing.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Values intended to be used with one view format <strong class="purple">may</strong> not be exactly
preserved when written or read through a different format.
For example, an integer value that happens to have the bit pattern of a
floating point denorm or NaN <strong class="purple">may</strong> be flushed or canonicalized when written
or read through a view with a floating point format.
Similarly, a value written through a signed normalized format that has a bit
pattern exactly equal to <span class="eq">-2<sup>b</sup></span> <strong class="purple">may</strong> be changed to <span class="eq">-2<sup>b</sup> +  1</span>
as described in <a href="chap3.html#fundamentals-fixedfpconv">Conversion from Normalized
Fixed-Point to Floating-Point</a>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>If <code>image</code> was created with the
<code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code> flag, <code>format</code>
<strong class="purple">must</strong> be <em>compatible</em> with the image’s format as described above, or <strong class="purple">must</strong>
be an uncompressed format in which case it <strong class="purple">must</strong> be <em>size-compatible</em> with
the image’s format, as defined for
<a href="chap20.html#copies-images-format-size-compatibility">copying data between images</a>.
In this case, the resulting image view’s texel dimensions equal the
dimensions of the selected mip level divided by the compressed texel block
size and rounded up.</p>
</div>
<div class="paragraph">
<p>The <a href="chap12.html#VkComponentMapping">VkComponentMapping</a> <code>components</code> member describes a remapping
from components of the image to components of the vector returned by shader
image instructions.
This remapping <strong class="purple">must</strong> be the identity swizzle for storage image descriptors,
input attachment descriptors,
framebuffer attachments, and any <code>VkImageView</code> used with a combined
image sampler that enables <a href="chap13.html#samplers-YCbCr-conversion">sampler Y′C<sub>B</sub>C<sub>R</sub>
conversion</a>.</p>
</div>
<div class="paragraph">
<p>If the image view is to be used with a sampler which supports
<a href="chap13.html#samplers-YCbCr-conversion">sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>, an <em>identically
defined object</em> of type <a href="chap13.html#VkSamplerYcbcrConversion">VkSamplerYcbcrConversion</a> to that used to
create the sampler <strong class="purple">must</strong> be passed to <a href="chap12.html#vkCreateImageView">vkCreateImageView</a> in a
<a href="chap13.html#VkSamplerYcbcrConversionInfo">VkSamplerYcbcrConversionInfo</a> included in the <code>pNext</code> chain of
<a href="chap12.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>.
Conversely, if a <a href="chap13.html#VkSamplerYcbcrConversion">VkSamplerYcbcrConversion</a> object is passed to
<a href="chap12.html#vkCreateImageView">vkCreateImageView</a>, an identically defined
<a href="chap13.html#VkSamplerYcbcrConversion">VkSamplerYcbcrConversion</a> object <strong class="purple">must</strong> be used when sampling the image.</p>
</div>
<div id="image-views-requiring-sampler-ycbcr-conversion" class="paragraph">
<p>If the image has a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar</a> <code>format</code> and
<code>subresourceRange.aspectMask</code> is <code>VK_IMAGE_ASPECT_COLOR_BIT</code>,
    and it was created with <code>usage</code> value containing flags other than
    <code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code>,
    <code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code>
    , <code>VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code>,
    <code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code>,
then the <code>format</code> <strong class="purple">must</strong> be identical to the image <code>format</code>, and the
sampler to be used with the image view <strong class="purple">must</strong> enable
<a href="chap13.html#samplers-YCbCr-conversion">sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>.</p>
</div>
<div class="paragraph">
<p>If the image has a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar</a> <code>format</code> and
the <code>image</code> has been created with a <code>usage</code> value containing any of
the <code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code>,
<code>VK_IMAGE_USAGE_VIDEO_DECODE_SRC_BIT_KHR</code>, and
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code> flags, then all of the
<a href="chap39.html#video-decode-operations">video decode operations</a> would ignore the
<a href="chap13.html#VkSamplerYcbcrConversionInfo">VkSamplerYcbcrConversionInfo</a> structure and/or
<a href="chap13.html#samplers-YCbCr-conversion">sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a> object, associated
with the image view.
If the image has a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar</a> <code>format</code> and
the <code>image</code> has been created with a <code>usage</code> value containing any of
the <code>VK_IMAGE_USAGE_VIDEO_ENCODE_DST_BIT_KHR</code>,
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code>, and
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code> flags, then all of the
<a href="chap39.html#video-encode-operations">video encode operations</a> would ignore the
<a href="chap13.html#VkSamplerYcbcrConversionInfo">VkSamplerYcbcrConversionInfo</a> structure and/or
<a href="chap13.html#samplers-YCbCr-conversion">sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a> object, associated
with the image view.</p>
</div>
<div class="paragraph">
<p>If <code>image</code> was created with the <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code>
and the image has a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar</a> <code>format</code>,
and if <code>subresourceRange.aspectMask</code> is
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or
<code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>, <code>format</code> <strong class="purple">must</strong> be
<a href="chap43.html#formats-compatible-planes">compatible</a> with the corresponding plane of the
image, and the sampler to be used with the image view <strong class="purple">must</strong> not enable
<a href="chap13.html#samplers-YCbCr-conversion">sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>.
The <code>width</code> and <code>height</code> of the single-plane image view <strong class="purple">must</strong> be
derived from the multi-planar image’s dimensions in the manner listed for
<a href="chap43.html#formats-compatible-planes">plane compatibility</a> for the plane.</p>
</div>
<div class="paragraph">
<p>Any view of an image plane will have the same mapping between texel
coordinates and memory locations as used by the components of the color
aspect, subject to the formulae relating texel coordinates to
lower-resolution planes as described in <a href="chap16.html#textures-chroma-reconstruction">Chroma Reconstruction</a>.
That is, if an R or B plane has a reduced resolution relative to the G plane
of the multi-planar image, the image view operates using the (<em>u<sub>plane</sub></em>,
<em>v<sub>plane</sub></em>) unnormalized coordinates of the reduced-resolution plane, and
these coordinates access the same memory locations as the (<em>u<sub>color</sub></em>,
<em>v<sub>color</sub></em>) unnormalized coordinates of the color aspect for which chroma
reconstruction operations operate on the same (<em>u<sub>plane</sub></em>, <em>v<sub>plane</sub></em>) or
(<em>i<sub>plane</sub></em>, <em>j<sub>plane</sub></em>) coordinates.</p>
</div>
<table id="resources-image-views-compatibility" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 15. Image type and image view type compatibility requirements</caption>
<colgroup>
<col style="width: 41.1764%;">
<col style="width: 58.8236%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Image View Type</th>
<th class="tableblock halign-left valign-top">Compatible Image Types</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_VIEW_TYPE_1D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_TYPE_1D</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_VIEW_TYPE_1D_ARRAY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_TYPE_1D</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_VIEW_TYPE_2D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_TYPE_2D</code>
, <code>VK_IMAGE_TYPE_3D</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_TYPE_2D</code>
, <code>VK_IMAGE_TYPE_3D</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_VIEW_TYPE_CUBE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_TYPE_2D</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_TYPE_2D</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_VIEW_TYPE_3D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_IMAGE_TYPE_3D</code></p></td>
</tr>
</tbody>
</table>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-01003" href="chap12.html#VUID-VkImageViewCreateInfo-image-01003"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-01003</span><br>

If <code>image</code> was not created with
<code>VK_IMAGE_CREATE_CUBE_COMPATIBLE_BIT</code> then <code>viewType</code> <strong class="purple">must</strong> not
be <code>VK_IMAGE_VIEW_TYPE_CUBE</code> or <code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-viewType-01004" href="chap12.html#VUID-VkImageViewCreateInfo-viewType-01004"></a> <span class="vuid">VUID-VkImageViewCreateInfo-viewType-01004</span><br>

If the <a href="chap41.html#features-imageCubeArray"><code>imageCubeArray</code></a> feature is not
enabled, <code>viewType</code> <strong class="purple">must</strong> not be <code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-06723" href="chap12.html#VUID-VkImageViewCreateInfo-image-06723"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-06723</span><br>

If <code>image</code> was created with <code>VK_IMAGE_TYPE_3D</code> but without
<code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> set then <code>viewType</code>
<strong class="purple">must</strong> not be <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-06728" href="chap12.html#VUID-VkImageViewCreateInfo-image-06728"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-06728</span><br>

If <code>image</code> was created with <code>VK_IMAGE_TYPE_3D</code> but without
<code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> or
<code>VK_IMAGE_CREATE_2D_VIEW_COMPATIBLE_BIT_EXT</code> set, then
<code>viewType</code> <strong class="purple">must</strong> not be <code>VK_IMAGE_VIEW_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-04970" href="chap12.html#VUID-VkImageViewCreateInfo-image-04970"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-04970</span><br>

If <code>image</code> was created with <code>VK_IMAGE_TYPE_3D</code> and
<code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_2D</code> or
<code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code> then <code>subresourceRange.levelCount</code>
<strong class="purple">must</strong> be 1</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-04971" href="chap12.html#VUID-VkImageViewCreateInfo-image-04971"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-04971</span><br>

If <code>image</code> was created with <code>VK_IMAGE_TYPE_3D</code> and
<code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_2D</code> or
<code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code> then
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>flags</code> <strong class="purple">must</strong> not contain any of
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>,
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>, and
<code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-04972" href="chap12.html#VUID-VkImageViewCreateInfo-image-04972"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-04972</span><br>

If <code>image</code> was created with a <code>samples</code> value not equal to
<code>VK_SAMPLE_COUNT_1_BIT</code> then <code>viewType</code> <strong class="purple">must</strong> be either
<code>VK_IMAGE_VIEW_TYPE_2D</code> or <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-04441" href="chap12.html#VUID-VkImageViewCreateInfo-image-04441"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-04441</span><br>

<code>image</code> <strong class="purple">must</strong> have been created with a <code>usage</code> value containing
at least one of the usages defined in the <a href="chap12.html#valid-imageview-imageusage">valid image usage</a> list for image views</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-None-02273" href="chap12.html#VUID-VkImageViewCreateInfo-None-02273"></a> <span class="vuid">VUID-VkImageViewCreateInfo-None-02273</span><br>

The <a href="chap12.html#resources-image-view-format-features">format features</a> of the
resultant image view <strong class="purple">must</strong> contain at least one bit</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-usage-02274" href="chap12.html#VUID-VkImageViewCreateInfo-usage-02274"></a> <span class="vuid">VUID-VkImageViewCreateInfo-usage-02274</span><br>

If <code>usage</code> contains <code>VK_IMAGE_USAGE_SAMPLED_BIT</code>, then the
<a href="chap12.html#resources-image-view-format-features">format features</a> of the
resultant image view <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-usage-02275" href="chap12.html#VUID-VkImageViewCreateInfo-usage-02275"></a> <span class="vuid">VUID-VkImageViewCreateInfo-usage-02275</span><br>

If <code>usage</code> contains <code>VK_IMAGE_USAGE_STORAGE_BIT</code>, then the image
view’s <a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong>
contain <code>VK_FORMAT_FEATURE_STORAGE_IMAGE_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-usage-02276" href="chap12.html#VUID-VkImageViewCreateInfo-usage-02276"></a> <span class="vuid">VUID-VkImageViewCreateInfo-usage-02276</span><br>

If <code>usage</code> contains <code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code>, then
the image view’s <a href="chap12.html#resources-image-view-format-features">format
features</a> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-usage-02277" href="chap12.html#VUID-VkImageViewCreateInfo-usage-02277"></a> <span class="vuid">VUID-VkImageViewCreateInfo-usage-02277</span><br>

If <code>usage</code> contains
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>, then the image view’s
<a href="chap12.html#resources-image-view-format-features">format features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-usage-06516" href="chap12.html#VUID-VkImageViewCreateInfo-usage-06516"></a> <span class="vuid">VUID-VkImageViewCreateInfo-usage-06516</span><br>

If <code>usage</code> contains <code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code>, then
the image view’s <a href="chap12.html#resources-image-view-format-features">format
features</a> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_2_LINEAR_COLOR_ATTACHMENT_BIT_NV</code>, if the image
is created with <code>VK_IMAGE_TILING_LINEAR</code> and the
<a href="chap41.html#features-linearColorAttachment"><code>linearColorAttachment</code></a> feature
is enabled</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-usage-06517" href="chap12.html#VUID-VkImageViewCreateInfo-usage-06517"></a> <span class="vuid">VUID-VkImageViewCreateInfo-usage-06517</span><br>

If <code>usage</code> contains <code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code>, then
the image view’s <a href="chap12.html#resources-image-view-format-features">format
features</a> must contain
<code>VK_FORMAT_FEATURE_2_LINEAR_COLOR_ATTACHMENT_BIT_NV</code>, if the image
is created with <code>VK_IMAGE_TILING_LINEAR</code> and the
<a href="chap41.html#features-linearColorAttachment"><code>linearColorAttachment</code></a> feature
is enabled</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-usage-02652" href="chap12.html#VUID-VkImageViewCreateInfo-usage-02652"></a> <span class="vuid">VUID-VkImageViewCreateInfo-usage-02652</span><br>

If <code>usage</code> contains <code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code>, then
the image view’s <a href="chap12.html#resources-image-view-format-features">format
features</a> <strong class="purple">must</strong> contain at least one of
<code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code> or
<code>VK_FORMAT_FEATURE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subresourceRange-01478" href="chap12.html#VUID-VkImageViewCreateInfo-subresourceRange-01478"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subresourceRange-01478</span><br>

<code>subresourceRange.baseMipLevel</code> <strong class="purple">must</strong> be less than the
<code>mipLevels</code> specified in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code>
was created</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subresourceRange-01718" href="chap12.html#VUID-VkImageViewCreateInfo-subresourceRange-01718"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subresourceRange-01718</span><br>

If <code>subresourceRange.levelCount</code> is not
<code>VK_REMAINING_MIP_LEVELS</code>, <span class="eq"><code>subresourceRange.baseMipLevel</code>
+  <code>subresourceRange.levelCount</code></span> <strong class="purple">must</strong> be less than or equal to
the <code>mipLevels</code> specified in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when
<code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-02571" href="chap12.html#VUID-VkImageViewCreateInfo-image-02571"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-02571</span><br>

If <code>image</code> was created with <code>usage</code> containing
<code>VK_IMAGE_USAGE_FRAGMENT_DENSITY_MAP_BIT_EXT</code>,
<code>subresourceRange.levelCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-06724" href="chap12.html#VUID-VkImageViewCreateInfo-image-06724"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-06724</span><br>

If <code>image</code> is not a 3D image created with
<code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> or
<code>VK_IMAGE_CREATE_2D_VIEW_COMPATIBLE_BIT_EXT</code> set, or <code>viewType</code>
is not <code>VK_IMAGE_VIEW_TYPE_2D</code> or <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>,
<code>subresourceRange.baseArrayLayer</code> <strong class="purple">must</strong> be less than the
<code>arrayLayers</code> specified in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code>
was created</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subresourceRange-06725" href="chap12.html#VUID-VkImageViewCreateInfo-subresourceRange-06725"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subresourceRange-06725</span><br>

If <code>subresourceRange.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>, <code>image</code> is not a 3D image created
with <code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> or
<code>VK_IMAGE_CREATE_2D_VIEW_COMPATIBLE_BIT_EXT</code> set, or <code>viewType</code>
is not <code>VK_IMAGE_VIEW_TYPE_2D</code> or <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>,
<code>subresourceRange.layerCount</code> <strong class="purple">must</strong> be non-zero and
<span class="eq"><code>subresourceRange.baseArrayLayer</code> + 
<code>subresourceRange.layerCount</code></span> <strong class="purple">must</strong> be less than or equal to the
<code>arrayLayers</code> specified in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code>
was created</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-02724" href="chap12.html#VUID-VkImageViewCreateInfo-image-02724"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-02724</span><br>

If <code>image</code> is a 3D image created with
<code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> set, and <code>viewType</code> is
<code>VK_IMAGE_VIEW_TYPE_2D</code> or <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>,
<code>subresourceRange.baseArrayLayer</code> <strong class="purple">must</strong> be less than the depth
computed from <code>baseMipLevel</code> and <code>extent.depth</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code> was created, according to the
formula defined in <a href="chap12.html#resources-image-miplevel-sizing">Image Miplevel
Sizing</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subresourceRange-02725" href="chap12.html#VUID-VkImageViewCreateInfo-subresourceRange-02725"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subresourceRange-02725</span><br>

If <code>subresourceRange.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>, <code>image</code> is a 3D image created with
<code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code> set, and <code>viewType</code> is
<code>VK_IMAGE_VIEW_TYPE_2D</code> or <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>,
<code>subresourceRange.layerCount</code> <strong class="purple">must</strong> be non-zero and
<span class="eq"><code>subresourceRange.baseArrayLayer</code> + 
<code>subresourceRange.layerCount</code></span> <strong class="purple">must</strong> be less than or equal to the
depth computed from <code>baseMipLevel</code> and <code>extent.depth</code> specified
in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>image</code> was created, according to
the formula defined in <a href="chap12.html#resources-image-miplevel-sizing">Image Miplevel
Sizing</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-01761" href="chap12.html#VUID-VkImageViewCreateInfo-image-01761"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-01761</span><br>

If <code>image</code> was created with the
<code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code> flag,
but without the <code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code>
flag,
and if the <code>format</code> of the <code>image</code> is not a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar</a> format,
<code>format</code> <strong class="purple">must</strong> be compatible with the <code>format</code> used to create
<code>image</code>, as defined in <a href="chap43.html#formats-compatibility-classes">Format
Compatibility Classes</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-01583" href="chap12.html#VUID-VkImageViewCreateInfo-image-01583"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-01583</span><br>

If <code>image</code> was created with the
<code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code> flag, <code>format</code>
<strong class="purple">must</strong> be compatible with, or <strong class="purple">must</strong> be an uncompressed format that is
size-compatible with, the <code>format</code> used to create <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-01584" href="chap12.html#VUID-VkImageViewCreateInfo-image-01584"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-01584</span><br>

If <code>image</code> was created with the
<code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code> flag, the
<code>levelCount</code> and <code>layerCount</code> members of <code>subresourceRange</code>
<strong class="purple">must</strong> both be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-04739" href="chap12.html#VUID-VkImageViewCreateInfo-image-04739"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-04739</span><br>

If <code>image</code> was created with the
<code>VK_IMAGE_CREATE_BLOCK_TEXEL_VIEW_COMPATIBLE_BIT</code> flag and
<code>format</code> is a non-compressed format, <code>viewType</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_VIEW_TYPE_3D</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-01585" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-01585"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-01585</span><br>

If a <a href="chap12.html#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a> structure was included in the
<code>pNext</code> chain of the <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> structure used when
creating <code>image</code> and
<a href="chap12.html#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>::<code>viewFormatCount</code> is not zero
then <code>format</code> <strong class="purple">must</strong> be one of the formats in
<a href="chap12.html#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>::<code>pViewFormats</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-01586" href="chap12.html#VUID-VkImageViewCreateInfo-image-01586"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-01586</span><br>

If <code>image</code> was created with the
<code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code> flag, if the <code>format</code> of
the <code>image</code> is a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar</a> format, and
if <code>subresourceRange.aspectMask</code> is one of
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or
<code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>, then <code>format</code> <strong class="purple">must</strong> be compatible
with the <a href="chap43.html#VkFormat">VkFormat</a> for the plane of the <code>image</code> <code>format</code>
indicated by <code>subresourceRange.aspectMask</code>, as defined in
<a href="chap43.html#formats-compatible-planes">Compatible formats of planes of multi-planar formats</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-01762" href="chap12.html#VUID-VkImageViewCreateInfo-image-01762"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-01762</span><br>

If <code>image</code> was not created with the
<code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code> flag,
or if the <code>format</code> of the <code>image</code> is a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar</a> format and
if <code>subresourceRange.aspectMask</code> is <code>VK_IMAGE_ASPECT_COLOR_BIT</code>,
<code>format</code> <strong class="purple">must</strong> be identical to the <code>format</code> used to create
<code>image</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-format-06415" href="chap12.html#VUID-VkImageViewCreateInfo-format-06415"></a> <span class="vuid">VUID-VkImageViewCreateInfo-format-06415</span><br>

If the image view <a href="chap12.html#image-views-requiring-sampler-ycbcr-conversion">requires a sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a>, the <code>pNext</code> chain must
include a <a href="chap13.html#VkSamplerYcbcrConversionInfo">VkSamplerYcbcrConversionInfo</a> structure with a conversion
value other than <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-format-04714" href="chap12.html#VUID-VkImageViewCreateInfo-format-04714"></a> <span class="vuid">VUID-VkImageViewCreateInfo-format-04714</span><br>

If <code>format</code> has a <code>_422</code> or <code>_420</code> suffix then <code>image</code>
<strong class="purple">must</strong> have been created with a width that is a multiple of 2</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-format-04715" href="chap12.html#VUID-VkImageViewCreateInfo-format-04715"></a> <span class="vuid">VUID-VkImageViewCreateInfo-format-04715</span><br>

If <code>format</code> has a <code>_420</code> suffix then <code>image</code> <strong class="purple">must</strong> have been
created with a height that is a multiple of 2</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-01970" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-01970"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-01970</span><br>

If the <code>pNext</code> chain includes a <a href="chap13.html#VkSamplerYcbcrConversionInfo">VkSamplerYcbcrConversionInfo</a>
structure with a <code>conversion</code> value other than <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>,
all members of <code>components</code> <strong class="purple">must</strong> have the
<a href="chap12.html#resources-image-views-identity-mappings">identity swizzle</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06658" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-06658"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06658</span><br>

If the <code>pNext</code> chain includes a <a href="chap13.html#VkSamplerYcbcrConversionInfo">VkSamplerYcbcrConversionInfo</a>
structure with a <code>conversion</code> value other than <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>,
<code>format</code> <strong class="purple">must</strong> be the same used in
<a href="chap13.html#VkSamplerYcbcrConversionCreateInfo">VkSamplerYcbcrConversionCreateInfo</a>::<code>format</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-01020" href="chap12.html#VUID-VkImageViewCreateInfo-image-01020"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-01020</span><br>

If <code>image</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subResourceRange-01021" href="chap12.html#VUID-VkImageViewCreateInfo-subResourceRange-01021"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subResourceRange-01021</span><br>

<code>viewType</code> <strong class="purple">must</strong> be compatible with the type of <code>image</code> as shown
in the <a href="chap12.html#resources-image-views-compatibility">view type compatibility
table</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-02399" href="chap12.html#VUID-VkImageViewCreateInfo-image-02399"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-02399</span><br>

If <code>image</code> has an
<a href="chap11.html#memory-external-android-hardware-buffer-external-formats">external
format</a>, <code>format</code> <strong class="purple">must</strong> be <code>VK_FORMAT_UNDEFINED</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-02400" href="chap12.html#VUID-VkImageViewCreateInfo-image-02400"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-02400</span><br>

If <code>image</code> has an
<a href="chap11.html#memory-external-android-hardware-buffer-external-formats">external
format</a>, the <code>pNext</code> chain <strong class="purple">must</strong> include a
<a href="chap13.html#VkSamplerYcbcrConversionInfo">VkSamplerYcbcrConversionInfo</a> structure with a <code>conversion</code>
object created with the same external format as <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-02401" href="chap12.html#VUID-VkImageViewCreateInfo-image-02401"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-02401</span><br>

If <code>image</code> has an
<a href="chap11.html#memory-external-android-hardware-buffer-external-formats">external
format</a>, all members of <code>components</code> <strong class="purple">must</strong> be the
<a href="chap12.html#resources-image-views-identity-mappings">identity swizzle</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-02086" href="chap12.html#VUID-VkImageViewCreateInfo-image-02086"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-02086</span><br>

If <code>image</code> was created with <code>usage</code> containing
<code>VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code>,
<code>viewType</code> <strong class="purple">must</strong> be <code>VK_IMAGE_VIEW_TYPE_2D</code> or
<code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-02087" href="chap12.html#VUID-VkImageViewCreateInfo-image-02087"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-02087</span><br>

If the <a href="chap41.html#features-shadingRateImage"><code>shadingRateImage</code></a> feature is
enabled, and If <code>image</code> was created with <code>usage</code> containing
<code>VK_IMAGE_USAGE_SHADING_RATE_IMAGE_BIT_NV</code>, <code>format</code> <strong class="purple">must</strong> be
<code>VK_FORMAT_R8_UINT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-usage-04550" href="chap12.html#VUID-VkImageViewCreateInfo-usage-04550"></a> <span class="vuid">VUID-VkImageViewCreateInfo-usage-04550</span><br>

If the <a href="chap41.html#features-attachmentFragmentShadingRate"><code>attachmentFragmentShadingRate</code></a> feature is enabled, and the
<code>usage</code> for the image view includes
<code>VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code>, then the
image view’s <a href="chap12.html#resources-image-view-format-features">format features</a>
<strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-usage-04551" href="chap12.html#VUID-VkImageViewCreateInfo-usage-04551"></a> <span class="vuid">VUID-VkImageViewCreateInfo-usage-04551</span><br>

If the <a href="chap41.html#features-attachmentFragmentShadingRate"><code>attachmentFragmentShadingRate</code></a> feature is enabled, the
<code>usage</code> for the image view includes
<code>VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code>, and
<a href="chap42.html#limits-layeredShadingRateAttachments"><code>layeredShadingRateAttachments</code></a> is <code>VK_FALSE</code>,
<code>subresourceRange.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-flags-02572" href="chap12.html#VUID-VkImageViewCreateInfo-flags-02572"></a> <span class="vuid">VUID-VkImageViewCreateInfo-flags-02572</span><br>

If the <a href="chap41.html#features-fragmentDensityMapDynamic"><code>fragmentDensityMapDynamic</code></a> feature is not enabled, <code>flags</code>
<strong class="purple">must</strong> not contain
<code>VK_IMAGE_VIEW_CREATE_FRAGMENT_DENSITY_MAP_DYNAMIC_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-flags-03567" href="chap12.html#VUID-VkImageViewCreateInfo-flags-03567"></a> <span class="vuid">VUID-VkImageViewCreateInfo-flags-03567</span><br>

If the <a href="chap41.html#features-fragmentDensityMapDeferred"><code>fragmentDensityMapDeferred</code></a> feature is not enabled, <code>flags</code>
<strong class="purple">must</strong> not contain
<code>VK_IMAGE_VIEW_CREATE_FRAGMENT_DENSITY_MAP_DEFERRED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-flags-03568" href="chap12.html#VUID-VkImageViewCreateInfo-flags-03568"></a> <span class="vuid">VUID-VkImageViewCreateInfo-flags-03568</span><br>

If <code>flags</code> contains
<code>VK_IMAGE_VIEW_CREATE_FRAGMENT_DENSITY_MAP_DEFERRED_BIT_EXT</code>,
<code>flags</code> <strong class="purple">must</strong> not contain
<code>VK_IMAGE_VIEW_CREATE_FRAGMENT_DENSITY_MAP_DYNAMIC_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-03569" href="chap12.html#VUID-VkImageViewCreateInfo-image-03569"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-03569</span><br>

If <code>image</code> was created with <code>flags</code> containing
<code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code> and <code>usage</code> containing
<code>VK_IMAGE_USAGE_SAMPLED_BIT</code>, <code>subresourceRange.layerCount</code>
<strong class="purple">must</strong> be less than or equal to <a href="chap42.html#limits-maxSubsampledArrayLayers"><code>VkPhysicalDeviceFragmentDensityMap2PropertiesEXT</code>::<code>maxSubsampledArrayLayers</code></a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-invocationMask-04993" href="chap12.html#VUID-VkImageViewCreateInfo-invocationMask-04993"></a> <span class="vuid">VUID-VkImageViewCreateInfo-invocationMask-04993</span><br>

If the <a href="chap41.html#features-invocationMask"><code>invocationMask</code></a> feature is
enabled, and if <code>image</code> was created with <code>usage</code> containing
<code>VK_IMAGE_USAGE_INVOCATION_MASK_BIT_HUAWEI</code>, <code>format</code> <strong class="purple">must</strong> be
<code>VK_FORMAT_R8_UINT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-flags-04116" href="chap12.html#VUID-VkImageViewCreateInfo-flags-04116"></a> <span class="vuid">VUID-VkImageViewCreateInfo-flags-04116</span><br>

If <code>flags</code> does not contain
<code>VK_IMAGE_VIEW_CREATE_FRAGMENT_DENSITY_MAP_DYNAMIC_BIT_EXT</code> and
<code>image</code> was created with <code>usage</code> containing
<code>VK_IMAGE_USAGE_FRAGMENT_DENSITY_MAP_BIT_EXT</code>, its <code>flags</code> <strong class="purple">must</strong>
not contain any of <code>VK_IMAGE_CREATE_PROTECTED_BIT</code>,
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code>,
<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code>, or
<code>VK_IMAGE_CREATE_SPARSE_ALIASED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-02662" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-02662"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-02662</span><br>

If the <code>pNext</code> chain includes a <a href="chap12.html#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a>
structure, and <code>image</code> was not created with a
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure included in the
<code>pNext</code> chain of <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>, its <code>usage</code> member
<strong class="purple">must</strong> not include any bits that were not set in the <code>usage</code> member
of the <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> structure used to create <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-02663" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-02663"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-02663</span><br>

If the <code>pNext</code> chain includes a <a href="chap12.html#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a>
structure, <code>image</code> was created with a
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure included in the
<code>pNext</code> chain of <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>, and
<code>subresourceRange.aspectMask</code> includes
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, the <code>usage</code> member of the
<a href="chap12.html#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a> structure <strong class="purple">must</strong> not include any bits
that were not set in the <code>usage</code> member of the
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure used to create <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-02664" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-02664"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-02664</span><br>

If the <code>pNext</code> chain includes a <a href="chap12.html#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a>
structure, <code>image</code> was created with a
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a> structure included in the
<code>pNext</code> chain of <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>, and
<code>subresourceRange.aspectMask</code> includes bits other than
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, the <code>usage</code> member of the
<a href="chap12.html#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a> structure <strong class="purple">must</strong> not include any bits
that were not set in the <code>usage</code> member of the
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> structure used to create <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-imageViewType-04973" href="chap12.html#VUID-VkImageViewCreateInfo-imageViewType-04973"></a> <span class="vuid">VUID-VkImageViewCreateInfo-imageViewType-04973</span><br>

If <code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_1D</code>,
<code>VK_IMAGE_VIEW_TYPE_2D</code>, or <code>VK_IMAGE_VIEW_TYPE_3D</code>; and
<code>subresourceRange.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>, then <code>subresourceRange.layerCount</code>
<strong class="purple">must</strong> be 1</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-imageViewType-04974" href="chap12.html#VUID-VkImageViewCreateInfo-imageViewType-04974"></a> <span class="vuid">VUID-VkImageViewCreateInfo-imageViewType-04974</span><br>

If <code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_1D</code>,
<code>VK_IMAGE_VIEW_TYPE_2D</code>, or <code>VK_IMAGE_VIEW_TYPE_3D</code>; and
<code>subresourceRange.layerCount</code> is <code>VK_REMAINING_ARRAY_LAYERS</code>,
then the remaining number of layers <strong class="purple">must</strong> be 1</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-viewType-02960" href="chap12.html#VUID-VkImageViewCreateInfo-viewType-02960"></a> <span class="vuid">VUID-VkImageViewCreateInfo-viewType-02960</span><br>

If <code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_CUBE</code> and
<code>subresourceRange.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>, <code>subresourceRange.layerCount</code> <strong class="purple">must</strong>
be <code>6</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-viewType-02961" href="chap12.html#VUID-VkImageViewCreateInfo-viewType-02961"></a> <span class="vuid">VUID-VkImageViewCreateInfo-viewType-02961</span><br>

If <code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code> and
<code>subresourceRange.layerCount</code> is not
<code>VK_REMAINING_ARRAY_LAYERS</code>, <code>subresourceRange.layerCount</code> <strong class="purple">must</strong>
be a multiple of <code>6</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-viewType-02962" href="chap12.html#VUID-VkImageViewCreateInfo-viewType-02962"></a> <span class="vuid">VUID-VkImageViewCreateInfo-viewType-02962</span><br>

If <code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_CUBE</code> and
<code>subresourceRange.layerCount</code> is <code>VK_REMAINING_ARRAY_LAYERS</code>,
the remaining number of layers <strong class="purple">must</strong> be <code>6</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-viewType-02963" href="chap12.html#VUID-VkImageViewCreateInfo-viewType-02963"></a> <span class="vuid">VUID-VkImageViewCreateInfo-viewType-02963</span><br>

If <code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_CUBE_ARRAY</code> and
<code>subresourceRange.layerCount</code> is <code>VK_REMAINING_ARRAY_LAYERS</code>,
the remaining number of layers <strong class="purple">must</strong> be a multiple of <code>6</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-imageViewFormatSwizzle-04465" href="chap12.html#VUID-VkImageViewCreateInfo-imageViewFormatSwizzle-04465"></a> <span class="vuid">VUID-VkImageViewCreateInfo-imageViewFormatSwizzle-04465</span><br>

If the <code><a href="chap50.html#VK_KHR_portability_subset">VK_KHR_portability_subset</a></code> extension is enabled, and
<a href="chap41.html#VkPhysicalDevicePortabilitySubsetFeaturesKHR">VkPhysicalDevicePortabilitySubsetFeaturesKHR</a>::<code>imageViewFormatSwizzle</code>
is <code>VK_FALSE</code>, all elements of <code>components</code> <strong class="purple">must</strong> have the
<a href="chap12.html#resources-image-views-identity-mappings">identity swizzle</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-imageViewFormatReinterpretation-04466" href="chap12.html#VUID-VkImageViewCreateInfo-imageViewFormatReinterpretation-04466"></a> <span class="vuid">VUID-VkImageViewCreateInfo-imageViewFormatReinterpretation-04466</span><br>

If the <code><a href="chap50.html#VK_KHR_portability_subset">VK_KHR_portability_subset</a></code> extension is enabled, and
<a href="chap41.html#VkPhysicalDevicePortabilitySubsetFeaturesKHR">VkPhysicalDevicePortabilitySubsetFeaturesKHR</a>::<code>imageViewFormatReinterpretation</code>
is <code>VK_FALSE</code>, the <a href="chap43.html#VkFormat">VkFormat</a> in <code>format</code> <strong class="purple">must</strong> not contain
a different number of components, or a different number of bits in each
component, than the format of the <code>VkImage</code> in <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-04817" href="chap12.html#VUID-VkImageViewCreateInfo-image-04817"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-04817</span><br>

If <code>image</code> was created with <code>usage</code> containing
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code>,
<code>VK_IMAGE_USAGE_VIDEO_DECODE_SRC_BIT_KHR</code>,
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code>, then the <code>viewType</code>
<strong class="purple">must</strong> be <code>VK_IMAGE_VIEW_TYPE_2D</code> or
<code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code> and all members of <code>components</code>
<strong class="purple">must</strong> have the <a href="chap12.html#resources-image-views-identity-mappings">identity
swizzle</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-04818" href="chap12.html#VUID-VkImageViewCreateInfo-image-04818"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-04818</span><br>

If <code>image</code> was created with <code>usage</code> containing
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_DST_BIT_KHR</code>,
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code>,
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code>, then the <code>viewType</code>
<strong class="purple">must</strong> be <code>VK_IMAGE_VIEW_TYPE_2D</code> or
<code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code> and all members of <code>components</code>
<strong class="purple">must</strong> have the <a href="chap12.html#resources-image-views-identity-mappings">identity
swizzle</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06787" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-06787"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06787</span><br>

If the <code>pNext</code> chain includes a
<a href="chap11.html#VkExportMetalObjectCreateInfoEXT">VkExportMetalObjectCreateInfoEXT</a> structure, its
<code>exportObjectType</code> member <strong class="purple">must</strong> be
<code>VK_EXPORT_METAL_OBJECT_TYPE_METAL_TEXTURE_BIT_EXT</code>.</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06944" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-06944"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06944</span><br>

If the <code>pNext</code> chain includes
<a href="chap12.html#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure, then
<a href="chap41.html#features-textureSampleWeighted"><code>textureSampleWeighted</code></a> feature
<strong class="purple">must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06945" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-06945"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06945</span><br>

If the <code>pNext</code> chain includes
<a href="chap12.html#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure, then <code>image</code>
<strong class="purple">must</strong> have been created with <code>usage</code> containing
<code>VK_IMAGE_USAGE_SAMPLE_WEIGHT_BIT_QCOM</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06946" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-06946"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06946</span><br>

If the <code>pNext</code> chain includes
<a href="chap12.html#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure, then
<code>components</code> <strong class="purple">must</strong> be <code>VK_COMPONENT_SWIZZLE_IDENTITY</code> for all
components</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06947" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-06947"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06947</span><br>

If the <code>pNext</code> chain includes
<a href="chap12.html#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure, then
<code>subresourceRange.aspectMask</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06948" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-06948"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06948</span><br>

If the <code>pNext</code> chain includes
<a href="chap12.html#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure, then
<code>subresourceRange.levelCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06949" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-06949"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06949</span><br>

If the <code>pNext</code> chain includes
<a href="chap12.html#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure, then
<code>viewType</code> <strong class="purple">must</strong> be <code>VK_IMAGE_VIEW_TYPE_1D_ARRAY</code> or
<code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06950" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-06950"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06950</span><br>

If the <code>pNext</code> chain includes
<a href="chap12.html#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure and if
<code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_1D_ARRAY</code>, then <code>image</code>
<strong class="purple">must</strong> have been created with <code>imageType</code> <code>VK_IMAGE_TYPE_1D</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06951" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-06951"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06951</span><br>

If the <code>pNext</code> chain includes
<a href="chap12.html#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure and <code>viewType</code>
is <code>VK_IMAGE_VIEW_TYPE_1D_ARRAY</code>, then
<code>subresourceRange.layerCount</code> <strong class="purple">must</strong> be equal to <code>2</code>.</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06952" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-06952"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06952</span><br>

If the <code>pNext</code> chain includes
<a href="chap12.html#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure and <code>viewType</code>
is <code>VK_IMAGE_VIEW_TYPE_1D_ARRAY</code>, then <code>image</code> <strong class="purple">must</strong> have been
created with <code>width</code> equal to or greater than <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault">u</span><span class="mord mathdefault">m</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault">h</span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">m</span><span class="mord mathdefault">a</span><span class="mord mathdefault">x</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">n</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">t</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord mathdefault">e</span><span class="mord">.</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">i</span><span class="mord mathdefault">d</span><span class="mord mathdefault">t</span><span class="mord mathdefault">h</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">4</span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">t</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mord mathdefault">e</span><span class="mord">.</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">h</span><span class="mord mathdefault">t</span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mclose">)</span></span></span></span></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06953" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-06953"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06953</span><br>

If the <code>pNext</code> chain includes
<a href="chap12.html#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure and if
<code>viewType</code> is <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>, then <code>image</code>
<strong class="purple">must</strong> have been created with <code>imageType</code> <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06954" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-06954"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06954</span><br>

If the <code>pNext</code> chain includes
<a href="chap12.html#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure and <code>viewType</code>
is <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>, then
<code>subresourceRange.layerCount</code> <strong class="purple">must</strong> be equal or greater than
<span class="eq">numPhases</span></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06955" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-06955"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06955</span><br>

If the <code>pNext</code> chain includes
<a href="chap12.html#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure and <code>viewType</code>
is <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>, then <code>image</code> <strong class="purple">must</strong> have been
created with <code>width</code> equal to or greater than <code>filterSize.width</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06956" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-06956"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06956</span><br>

If the <code>pNext</code> chain includes
<a href="chap12.html#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure and <code>viewType</code>
is <code>VK_IMAGE_VIEW_TYPE_2D_ARRAY</code>, then <code>image</code> <strong class="purple">must</strong> have been
created with <code>height</code> equal to or greater than
<code>filterSize.height</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-06957" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-06957"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-06957</span><br>

If the <code>pNext</code> chain includes
<a href="chap12.html#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a> structure then
<a href="chap12.html#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a>::<code>filterSize.height</code>
<strong class="purple">must</strong> be less than or equal to <a href="chap5.html#limits-weightfilter-maxdimension"><code>VkPhysicalDeviceImageProcessingPropertiesQCOM</code>::<code>maxWeightFilterDimension.height</code></a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewCreateInfo-sType-sType" href="chap12.html#VUID-VkImageViewCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkImageViewCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_VIEW_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-pNext-pNext" href="chap12.html#VUID-VkImageViewCreateInfo-pNext-pNext"></a> <span class="vuid">VUID-VkImageViewCreateInfo-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap11.html#VkExportMetalObjectCreateInfoEXT">VkExportMetalObjectCreateInfoEXT</a>, <a href="chap12.html#VkImageViewASTCDecodeModeEXT">VkImageViewASTCDecodeModeEXT</a>, <a href="chap12.html#VkImageViewMinLodCreateInfoEXT">VkImageViewMinLodCreateInfoEXT</a>, <a href="chap12.html#VkImageViewSampleWeightCreateInfoQCOM">VkImageViewSampleWeightCreateInfoQCOM</a>, <a href="chap12.html#VkImageViewUsageCreateInfo">VkImageViewUsageCreateInfo</a>, or <a href="chap13.html#VkSamplerYcbcrConversionInfo">VkSamplerYcbcrConversionInfo</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-sType-unique" href="chap12.html#VUID-VkImageViewCreateInfo-sType-unique"></a> <span class="vuid">VUID-VkImageViewCreateInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique, with the exception of structures of type <a href="chap11.html#VkExportMetalObjectCreateInfoEXT">VkExportMetalObjectCreateInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-flags-parameter" href="chap12.html#VUID-VkImageViewCreateInfo-flags-parameter"></a> <span class="vuid">VUID-VkImageViewCreateInfo-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap12.html#VkImageViewCreateFlagBits">VkImageViewCreateFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-image-parameter" href="chap12.html#VUID-VkImageViewCreateInfo-image-parameter"></a> <span class="vuid">VUID-VkImageViewCreateInfo-image-parameter</span><br>
 <code>image</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-viewType-parameter" href="chap12.html#VUID-VkImageViewCreateInfo-viewType-parameter"></a> <span class="vuid">VUID-VkImageViewCreateInfo-viewType-parameter</span><br>
 <code>viewType</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageViewType">VkImageViewType</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-format-parameter" href="chap12.html#VUID-VkImageViewCreateInfo-format-parameter"></a> <span class="vuid">VUID-VkImageViewCreateInfo-format-parameter</span><br>
 <code>format</code> <strong class="purple">must</strong> be a valid <a href="chap43.html#VkFormat">VkFormat</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-components-parameter" href="chap12.html#VUID-VkImageViewCreateInfo-components-parameter"></a> <span class="vuid">VUID-VkImageViewCreateInfo-components-parameter</span><br>
 <code>components</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkComponentMapping">VkComponentMapping</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageViewCreateInfo-subresourceRange-parameter" href="chap12.html#VUID-VkImageViewCreateInfo-subresourceRange-parameter"></a> <span class="vuid">VUID-VkImageViewCreateInfo-subresourceRange-parameter</span><br>
 <code>subresourceRange</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageSubresourceRange">VkImageSubresourceRange</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in <a href="chap12.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>flags</code>,
specifying additional parameters of an image view, are:</p>
</div>
<div id="VkImageViewCreateFlagBits" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkImageViewCreateFlagBits</span> <span class="p">{</span>
  <span class="c1">// Provided by VK_EXT_fragment_density_map</span>
    <span class="n">VK_IMAGE_VIEW_CREATE_FRAGMENT_DENSITY_MAP_DYNAMIC_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
  <span class="c1">// Provided by VK_EXT_fragment_density_map2</span>
    <span class="n">VK_IMAGE_VIEW_CREATE_FRAGMENT_DENSITY_MAP_DEFERRED_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkImageViewCreateFlagBits</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_VIEW_CREATE_FRAGMENT_DENSITY_MAP_DYNAMIC_BIT_EXT</code>
specifies that the fragment density map will be read by device during
<code>VK_PIPELINE_STAGE_FRAGMENT_DENSITY_PROCESS_BIT_EXT</code></p>
</li>
<li>
<p><code>VK_IMAGE_VIEW_CREATE_FRAGMENT_DENSITY_MAP_DEFERRED_BIT_EXT</code>
specifies that the fragment density map will be read by the host during
<a href="chap6.html#vkEndCommandBuffer">vkEndCommandBuffer</a> for the primary command buffer that the render
pass is recorded into</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkImageViewCreateFlags" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkImageViewCreateFlags</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkImageViewCreateFlags</code> is a bitmask type for setting a mask of zero or
more <a href="chap12.html#VkImageViewCreateFlagBits">VkImageViewCreateFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The set of usages for the created image view <strong class="purple">can</strong> be restricted compared to
the parent image’s <code>usage</code> flags by adding a
<code>VkImageViewUsageCreateInfo</code> structure to the <code>pNext</code> chain of
<a href="chap12.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>.</p>
</div>
<div class="paragraph">
<p>The <code>VkImageViewUsageCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkImageViewUsageCreateInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageViewUsageCreateInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>      <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>          <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImageUsageFlags</span>    <span class="n">usage</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageViewUsageCreateInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkImageViewUsageCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_maintenance2</span>
<span class="k">typedef</span> <span class="n">VkImageViewUsageCreateInfo</span> <span class="n">VkImageViewUsageCreateInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>usage</code> is a bitmask of <a href="chap12.html#VkImageUsageFlagBits">VkImageUsageFlagBits</a> specifying
allowed usages of the image view.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When this structure is chained to <a href="chap12.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a> the
<code>usage</code> field overrides the implicit <code>usage</code> parameter inherited
from image creation time and its value is used instead for the purposes of
determining the valid usage conditions of <a href="chap12.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewUsageCreateInfo-sType-sType" href="chap12.html#VUID-VkImageViewUsageCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkImageViewUsageCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_VIEW_USAGE_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewUsageCreateInfo-usage-parameter" href="chap12.html#VUID-VkImageViewUsageCreateInfo-usage-parameter"></a> <span class="vuid">VUID-VkImageViewUsageCreateInfo-usage-parameter</span><br>
 <code>usage</code> <strong class="purple">must</strong> be a valid combination of <a href="chap12.html#VkImageUsageFlagBits">VkImageUsageFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageViewUsageCreateInfo-usage-requiredbitmask" href="chap12.html#VUID-VkImageViewUsageCreateInfo-usage-requiredbitmask"></a> <span class="vuid">VUID-VkImageViewUsageCreateInfo-usage-requiredbitmask</span><br>
 <code>usage</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageSubresourceRange</code> structure is defined as:</p>
</div>
<div id="VkImageSubresourceRange" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageSubresourceRange</span> <span class="p">{</span>
    <span class="n">VkImageAspectFlags</span>    <span class="n">aspectMask</span><span class="p">;</span>
    <span class="kt">uint32_t</span>              <span class="n">baseMipLevel</span><span class="p">;</span>
    <span class="kt">uint32_t</span>              <span class="n">levelCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>              <span class="n">baseArrayLayer</span><span class="p">;</span>
    <span class="kt">uint32_t</span>              <span class="n">layerCount</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageSubresourceRange</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>aspectMask</code> is a bitmask of <a href="chap12.html#VkImageAspectFlagBits">VkImageAspectFlagBits</a> specifying
which aspect(s) of the image are included in the view.</p>
</li>
<li>
<p><code>baseMipLevel</code> is the first mipmap level accessible to the view.</p>
</li>
<li>
<p><code>levelCount</code> is the number of mipmap levels (starting from
<code>baseMipLevel</code>) accessible to the view.</p>
</li>
<li>
<p><code>baseArrayLayer</code> is the first array layer accessible to the view.</p>
</li>
<li>
<p><code>layerCount</code> is the number of array layers (starting from
<code>baseArrayLayer</code>) accessible to the view.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The number of mipmap levels and array layers <strong class="purple">must</strong> be a subset of the image
subresources in the image.
If an application wants to use all mip levels or layers in an image after
the <code>baseMipLevel</code> or <code>baseArrayLayer</code>, it <strong class="purple">can</strong> set <code>levelCount</code>
and <code>layerCount</code> to the special values <code>VK_REMAINING_MIP_LEVELS</code> and
<code>VK_REMAINING_ARRAY_LAYERS</code> without knowing the exact number of mip
levels or layers.</p>
</div>
<div class="paragraph">
<p>For cube and cube array image views, the layers of the image view starting
at <code>baseArrayLayer</code> correspond to faces in the order +X, -X, +Y, -Y, +Z,
-Z.
For cube arrays, each set of six sequential layers is a single cube, so the
number of cube maps in a cube map array view is <em><code>layerCount</code> / 6</em>, and
image array layer <span class="eq">(<code>baseArrayLayer</code> +  i)</span> is face index
<span class="eq">(i mod 6)</span> of cube <em>i / 6</em>.
If the number of layers in the view, whether set explicitly in
<code>layerCount</code> or implied by <code>VK_REMAINING_ARRAY_LAYERS</code>, is not a
multiple of 6, the last cube map in the array <strong class="purple">must</strong> not be accessed.</p>
</div>
<div class="paragraph">
<p><code>aspectMask</code> <strong class="purple">must</strong> be only <code>VK_IMAGE_ASPECT_COLOR_BIT</code>,
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or <code>VK_IMAGE_ASPECT_STENCIL_BIT</code> if
<code>format</code> is a color, depth-only or stencil-only format,
respectively, except if <code>format</code> is a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a>.
If using a depth/stencil format with both depth and stencil components,
<code>aspectMask</code> <strong class="purple">must</strong> include at least one of
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> and <code>VK_IMAGE_ASPECT_STENCIL_BIT</code>, and
<strong class="purple">can</strong> include both.</p>
</div>
<div class="paragraph">
<p>When the <code>VkImageSubresourceRange</code> structure is used to select a subset
of the slices of a 3D image’s mip level in order to create a 2D or 2D array
image view of a 3D image created with
<code>VK_IMAGE_CREATE_2D_ARRAY_COMPATIBLE_BIT</code>, <code>baseArrayLayer</code> and
<code>layerCount</code> specify the first slice index and the number of slices to
include in the created image view.
Such an image view <strong class="purple">can</strong> be used as a framebuffer attachment that refers only
to the specified range of slices of the selected mip level.
However, any layout transitions performed on such an attachment view during
a render pass instance still apply to the entire subresource referenced
which includes all the slices of the selected mip level.</p>
</div>
<div class="paragraph">
<p>When using an image view of a depth/stencil image to populate a descriptor
set (e.g. for sampling in the shader, or for use as an input attachment),
the <code>aspectMask</code> <strong class="purple">must</strong> only include one bit, which selects whether the
image view is used for depth reads (i.e. using a floating-point sampler or
input attachment in the shader) or stencil reads (i.e. using an unsigned
integer sampler or input attachment in the shader).
When an image view of a depth/stencil image is used as a depth/stencil
framebuffer attachment, the <code>aspectMask</code> is ignored and both depth and
stencil image subresources are used.</p>
</div>
<div class="paragraph">
<p>When creating a <code>VkImageView</code>, if <a href="chap13.html#samplers-YCbCr-conversion">sampler
Y′C<sub>B</sub>C<sub>R</sub> conversion</a> is enabled in the sampler, the <code>aspectMask</code> of a
<code>subresourceRange</code> used by the <code>VkImageView</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_COLOR_BIT</code>.</p>
</div>
<div class="paragraph">
<p>When creating a <code>VkImageView</code>, if sampler Y′C<sub>B</sub>C<sub>R</sub> conversion is not
enabled in the sampler and the image <code>format</code> is
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar</a>, the image <strong class="purple">must</strong>
have been created with <code>VK_IMAGE_CREATE_MUTABLE_FORMAT_BIT</code>, and the
<code>aspectMask</code> of the <code>VkImageView</code>’s <code>subresourceRange</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code> or
<code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSubresourceRange-levelCount-01720" href="chap12.html#VUID-VkImageSubresourceRange-levelCount-01720"></a> <span class="vuid">VUID-VkImageSubresourceRange-levelCount-01720</span><br>

If <code>levelCount</code> is not <code>VK_REMAINING_MIP_LEVELS</code>, it <strong class="purple">must</strong> be
greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceRange-layerCount-01721" href="chap12.html#VUID-VkImageSubresourceRange-layerCount-01721"></a> <span class="vuid">VUID-VkImageSubresourceRange-layerCount-01721</span><br>

If <code>layerCount</code> is not <code>VK_REMAINING_ARRAY_LAYERS</code>, it <strong class="purple">must</strong> be
greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceRange-aspectMask-01670" href="chap12.html#VUID-VkImageSubresourceRange-aspectMask-01670"></a> <span class="vuid">VUID-VkImageSubresourceRange-aspectMask-01670</span><br>

If <code>aspectMask</code> includes <code>VK_IMAGE_ASPECT_COLOR_BIT</code>, then it
<strong class="purple">must</strong> not include any of <code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>,
<code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or <code>VK_IMAGE_ASPECT_PLANE_2_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceRange-aspectMask-02278" href="chap12.html#VUID-VkImageSubresourceRange-aspectMask-02278"></a> <span class="vuid">VUID-VkImageSubresourceRange-aspectMask-02278</span><br>

<code>aspectMask</code> <strong class="purple">must</strong> not include
<code>VK_IMAGE_ASPECT_MEMORY_PLANE<em>_i_</em>BIT_EXT</code> for any index <em>i</em></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSubresourceRange-aspectMask-parameter" href="chap12.html#VUID-VkImageSubresourceRange-aspectMask-parameter"></a> <span class="vuid">VUID-VkImageSubresourceRange-aspectMask-parameter</span><br>
 <code>aspectMask</code> <strong class="purple">must</strong> be a valid combination of <a href="chap12.html#VkImageAspectFlagBits">VkImageAspectFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceRange-aspectMask-requiredbitmask" href="chap12.html#VUID-VkImageSubresourceRange-aspectMask-requiredbitmask"></a> <span class="vuid">VUID-VkImageSubresourceRange-aspectMask-requiredbitmask</span><br>
 <code>aspectMask</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in an aspect mask to specify aspects of an image for
purposes such as identifying a subresource, are:</p>
</div>
<div id="VkImageAspectFlagBits" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkImageAspectFlagBits</span> <span class="p">{</span>
    <span class="n">VK_IMAGE_ASPECT_COLOR_BIT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_IMAGE_ASPECT_DEPTH_BIT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_IMAGE_ASPECT_STENCIL_BIT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
    <span class="n">VK_IMAGE_ASPECT_METADATA_BIT</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
  <span class="c1">// Provided by VK_VERSION_1_1</span>
    <span class="n">VK_IMAGE_ASPECT_PLANE_0_BIT</span> <span class="o">=</span> <span class="mh">0x00000010</span><span class="p">,</span>
  <span class="c1">// Provided by VK_VERSION_1_1</span>
    <span class="n">VK_IMAGE_ASPECT_PLANE_1_BIT</span> <span class="o">=</span> <span class="mh">0x00000020</span><span class="p">,</span>
  <span class="c1">// Provided by VK_VERSION_1_1</span>
    <span class="n">VK_IMAGE_ASPECT_PLANE_2_BIT</span> <span class="o">=</span> <span class="mh">0x00000040</span><span class="p">,</span>
    <span class="n">VK_IMAGE_ASPECT_NONE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="c1">// Provided by VK_EXT_image_drm_format_modifier</span>
    <span class="n">VK_IMAGE_ASPECT_MEMORY_PLANE_0_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000080</span><span class="p">,</span>
  <span class="c1">// Provided by VK_EXT_image_drm_format_modifier</span>
    <span class="n">VK_IMAGE_ASPECT_MEMORY_PLANE_1_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000100</span><span class="p">,</span>
  <span class="c1">// Provided by VK_EXT_image_drm_format_modifier</span>
    <span class="n">VK_IMAGE_ASPECT_MEMORY_PLANE_2_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000200</span><span class="p">,</span>
  <span class="c1">// Provided by VK_EXT_image_drm_format_modifier</span>
    <span class="n">VK_IMAGE_ASPECT_MEMORY_PLANE_3_BIT_EXT</span> <span class="o">=</span> <span class="mh">0x00000400</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_sampler_ycbcr_conversion</span>
    <span class="n">VK_IMAGE_ASPECT_PLANE_0_BIT_KHR</span> <span class="o">=</span> <span class="n">VK_IMAGE_ASPECT_PLANE_0_BIT</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_sampler_ycbcr_conversion</span>
    <span class="n">VK_IMAGE_ASPECT_PLANE_1_BIT_KHR</span> <span class="o">=</span> <span class="n">VK_IMAGE_ASPECT_PLANE_1_BIT</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_sampler_ycbcr_conversion</span>
    <span class="n">VK_IMAGE_ASPECT_PLANE_2_BIT_KHR</span> <span class="o">=</span> <span class="n">VK_IMAGE_ASPECT_PLANE_2_BIT</span><span class="p">,</span>
  <span class="c1">// Provided by VK_KHR_maintenance4</span>
    <span class="n">VK_IMAGE_ASPECT_NONE_KHR</span> <span class="o">=</span> <span class="n">VK_IMAGE_ASPECT_NONE</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkImageAspectFlagBits</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_ASPECT_NONE</code> specifies no image aspect, or the image
aspect is not applicable.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_COLOR_BIT</code> specifies the color aspect.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_DEPTH_BIT</code> specifies the depth aspect.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_STENCIL_BIT</code> specifies the stencil aspect.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_METADATA_BIT</code> specifies the metadata aspect, used
for <a href="chap32.html">sparse resource</a> operations.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_PLANE_0_BIT</code> specifies plane 0 of a <em>multi-planar</em>
image format.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_PLANE_1_BIT</code> specifies plane 1 of a <em>multi-planar</em>
image format.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_PLANE_2_BIT</code> specifies plane 2 of a <em>multi-planar</em>
image format.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_MEMORY_PLANE_0_BIT_EXT</code> specifies <em>memory plane</em> 0.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_MEMORY_PLANE_1_BIT_EXT</code> specifies <em>memory plane</em> 1.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_MEMORY_PLANE_2_BIT_EXT</code> specifies <em>memory plane</em> 2.</p>
</li>
<li>
<p><code>VK_IMAGE_ASPECT_MEMORY_PLANE_3_BIT_EXT</code> specifies <em>memory plane</em> 3.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkImageAspectFlags" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkImageAspectFlags</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkImageAspectFlags</code> is a bitmask type for setting a mask of zero or
more <a href="chap12.html#VkImageAspectFlagBits">VkImageAspectFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkComponentMapping</code> structure is defined as:</p>
</div>
<div id="VkComponentMapping" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkComponentMapping</span> <span class="p">{</span>
    <span class="n">VkComponentSwizzle</span>    <span class="n">r</span><span class="p">;</span>
    <span class="n">VkComponentSwizzle</span>    <span class="n">g</span><span class="p">;</span>
    <span class="n">VkComponentSwizzle</span>    <span class="n">b</span><span class="p">;</span>
    <span class="n">VkComponentSwizzle</span>    <span class="n">a</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkComponentMapping</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>r</code> is a <a href="chap12.html#VkComponentSwizzle">VkComponentSwizzle</a> specifying the component value
placed in the R component of the output vector.</p>
</li>
<li>
<p><code>g</code> is a <a href="chap12.html#VkComponentSwizzle">VkComponentSwizzle</a> specifying the component value
placed in the G component of the output vector.</p>
</li>
<li>
<p><code>b</code> is a <a href="chap12.html#VkComponentSwizzle">VkComponentSwizzle</a> specifying the component value
placed in the B component of the output vector.</p>
</li>
<li>
<p><code>a</code> is a <a href="chap12.html#VkComponentSwizzle">VkComponentSwizzle</a> specifying the component value
placed in the A component of the output vector.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkComponentMapping-r-parameter" href="chap12.html#VUID-VkComponentMapping-r-parameter"></a> <span class="vuid">VUID-VkComponentMapping-r-parameter</span><br>
 <code>r</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkComponentSwizzle">VkComponentSwizzle</a> value</p>
</li>
<li>
<p><a id="VUID-VkComponentMapping-g-parameter" href="chap12.html#VUID-VkComponentMapping-g-parameter"></a> <span class="vuid">VUID-VkComponentMapping-g-parameter</span><br>
 <code>g</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkComponentSwizzle">VkComponentSwizzle</a> value</p>
</li>
<li>
<p><a id="VUID-VkComponentMapping-b-parameter" href="chap12.html#VUID-VkComponentMapping-b-parameter"></a> <span class="vuid">VUID-VkComponentMapping-b-parameter</span><br>
 <code>b</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkComponentSwizzle">VkComponentSwizzle</a> value</p>
</li>
<li>
<p><a id="VUID-VkComponentMapping-a-parameter" href="chap12.html#VUID-VkComponentMapping-a-parameter"></a> <span class="vuid">VUID-VkComponentMapping-a-parameter</span><br>
 <code>a</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkComponentSwizzle">VkComponentSwizzle</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of the members of <a href="chap12.html#VkComponentMapping">VkComponentMapping</a>, specifying the
component values placed in each component of the output vector, are:</p>
</div>
<div id="VkComponentSwizzle" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkComponentSwizzle</span> <span class="p">{</span>
    <span class="n">VK_COMPONENT_SWIZZLE_IDENTITY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_COMPONENT_SWIZZLE_ZERO</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">VK_COMPONENT_SWIZZLE_ONE</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">VK_COMPONENT_SWIZZLE_R</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
    <span class="n">VK_COMPONENT_SWIZZLE_G</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
    <span class="n">VK_COMPONENT_SWIZZLE_B</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">VK_COMPONENT_SWIZZLE_A</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkComponentSwizzle</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_COMPONENT_SWIZZLE_IDENTITY</code> specifies that the component is set
to the identity swizzle.</p>
</li>
<li>
<p><code>VK_COMPONENT_SWIZZLE_ZERO</code> specifies that the component is set to
zero.</p>
</li>
<li>
<p><code>VK_COMPONENT_SWIZZLE_ONE</code> specifies that the component is set to
either 1 or 1.0, depending on whether the type of the image view format
is integer or floating-point respectively, as determined by the
<a href="chap43.html#formats-definition">Format Definition</a> section for each
<a href="chap43.html#VkFormat">VkFormat</a>.</p>
</li>
<li>
<p><code>VK_COMPONENT_SWIZZLE_R</code> specifies that the component is set to the
value of the R component of the image.</p>
</li>
<li>
<p><code>VK_COMPONENT_SWIZZLE_G</code> specifies that the component is set to the
value of the G component of the image.</p>
</li>
<li>
<p><code>VK_COMPONENT_SWIZZLE_B</code> specifies that the component is set to the
value of the B component of the image.</p>
</li>
<li>
<p><code>VK_COMPONENT_SWIZZLE_A</code> specifies that the component is set to the
value of the A component of the image.</p>
</li>
</ul>
</div>
<div id="resources-image-views-identity-mappings" class="paragraph">
<p>Setting the identity swizzle on a component is equivalent to setting the
identity mapping on that component.
That is:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 16. Component Mappings Equivalent To <code>VK_COMPONENT_SWIZZLE_IDENTITY</code></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Component</th>
<th class="tableblock halign-left valign-top">Identity Mapping</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>components.r</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_COMPONENT_SWIZZLE_R</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>components.g</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_COMPONENT_SWIZZLE_G</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>components.b</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_COMPONENT_SWIZZLE_B</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>components.a</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VK_COMPONENT_SWIZZLE_A</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain includes a <code>VkImageViewASTCDecodeModeEXT</code>
structure, then that structure includes a parameter specifying the decode
mode for image views using ASTC compressed formats.</p>
</div>
<div class="paragraph">
<p>The <code>VkImageViewASTCDecodeModeEXT</code> structure is defined as:</p>
</div>
<div id="VkImageViewASTCDecodeModeEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_astc_decode_mode</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageViewASTCDecodeModeEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkFormat</span>           <span class="n">decodeMode</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageViewASTCDecodeModeEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>decodeMode</code> is the intermediate format used to decode ASTC
compressed formats.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewASTCDecodeModeEXT-decodeMode-02230" href="chap12.html#VUID-VkImageViewASTCDecodeModeEXT-decodeMode-02230"></a> <span class="vuid">VUID-VkImageViewASTCDecodeModeEXT-decodeMode-02230</span><br>

<code>decodeMode</code> <strong class="purple">must</strong> be one of <code>VK_FORMAT_R16G16B16A16_SFLOAT</code>,
<code>VK_FORMAT_R8G8B8A8_UNORM</code>, or
<code>VK_FORMAT_E5B9G9R9_UFLOAT_PACK32</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewASTCDecodeModeEXT-decodeMode-02231" href="chap12.html#VUID-VkImageViewASTCDecodeModeEXT-decodeMode-02231"></a> <span class="vuid">VUID-VkImageViewASTCDecodeModeEXT-decodeMode-02231</span><br>

If the <a href="chap41.html#features-astc-decodeModeSharedExponent"><code>decodeModeSharedExponent</code></a> feature is not enabled,
<code>decodeMode</code> <strong class="purple">must</strong> not be <code>VK_FORMAT_E5B9G9R9_UFLOAT_PACK32</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewASTCDecodeModeEXT-decodeMode-02232" href="chap12.html#VUID-VkImageViewASTCDecodeModeEXT-decodeMode-02232"></a> <span class="vuid">VUID-VkImageViewASTCDecodeModeEXT-decodeMode-02232</span><br>

If <code>decodeMode</code> is <code>VK_FORMAT_R8G8B8A8_UNORM</code> the image view
<strong class="purple">must</strong> not include blocks using any of the ASTC HDR modes</p>
</li>
<li>
<p><a id="VUID-VkImageViewASTCDecodeModeEXT-format-04084" href="chap12.html#VUID-VkImageViewASTCDecodeModeEXT-format-04084"></a> <span class="vuid">VUID-VkImageViewASTCDecodeModeEXT-format-04084</span><br>

<code>format</code> of the image view <strong class="purple">must</strong> be one of the
<a href="chap48.html#appendix-compressedtex-astc">ASTC Compressed Image Formats</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>If <code>format</code> uses sRGB encoding then the <code>decodeMode</code> has no effect.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewASTCDecodeModeEXT-sType-sType" href="chap12.html#VUID-VkImageViewASTCDecodeModeEXT-sType-sType"></a> <span class="vuid">VUID-VkImageViewASTCDecodeModeEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_VIEW_ASTC_DECODE_MODE_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewASTCDecodeModeEXT-decodeMode-parameter" href="chap12.html#VUID-VkImageViewASTCDecodeModeEXT-decodeMode-parameter"></a> <span class="vuid">VUID-VkImageViewASTCDecodeModeEXT-decodeMode-parameter</span><br>
 <code>decodeMode</code> <strong class="purple">must</strong> be a valid <a href="chap43.html#VkFormat">VkFormat</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain includes a
<code>VkImageViewSampleWeightCreateInfoQCOM</code> structure, then that structure
includes a parameter specifying the parameters for weight image views used
in <a href="chap16.html#textures-weightimage">weight image sampling</a>.</p>
</div>
<div class="paragraph">
<p>The <code>VkImageViewSampleWeightCreateInfoQCOM</code> structure is defined as:</p>
</div>
<div id="VkImageViewSampleWeightCreateInfoQCOM" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_QCOM_image_processing</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageViewSampleWeightCreateInfoQCOM</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkOffset2D</span>         <span class="n">filterCenter</span><span class="p">;</span>
    <span class="n">VkExtent2D</span>         <span class="n">filterSize</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">numPhases</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageViewSampleWeightCreateInfoQCOM</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>filterCenter</code> is a <a href="chap3.html#VkOffset2D">VkOffset2D</a> describing the location of the
weight filter origin.</p>
</li>
<li>
<p><code>filterSize</code> is a <a href="chap3.html#VkExtent2D">VkExtent2D</a> specifying weight filter
dimensions.</p>
</li>
<li>
<p><code>numPhases</code> is number of sub-pixel filter phases.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>filterCenter</code> specifies the origin or center of the filter kernel,
as described in <a href="chap16.html#textures-weightimage-filteroperation">Weight Sampling
Operation</a>.
The <code>numPhases</code> describes the number of sub-pixel filter phases as
described in <a href="chap16.html#textures-weightimage-filterphases">Weight Sampling Phases</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewSampleWeightCreateInfoQCOM-filterSize-06958" href="chap12.html#VUID-VkImageViewSampleWeightCreateInfoQCOM-filterSize-06958"></a> <span class="vuid">VUID-VkImageViewSampleWeightCreateInfoQCOM-filterSize-06958</span><br>

<code>filterSize.width</code> <strong class="purple">must</strong> be less than or equal to
<a href="chap5.html#limits-weightfilter-maxdimension"><code>VkPhysicalDeviceImageProcessingPropertiesQCOM</code>::<code>maxWeightFilterDimension.width</code></a></p>
</li>
<li>
<p><a id="VUID-VkImageViewSampleWeightCreateInfoQCOM-filterSize-06959" href="chap12.html#VUID-VkImageViewSampleWeightCreateInfoQCOM-filterSize-06959"></a> <span class="vuid">VUID-VkImageViewSampleWeightCreateInfoQCOM-filterSize-06959</span><br>

<code>filterSize.height</code> <strong class="purple">must</strong> be less than or equal to
<a href="chap5.html#limits-weightfilter-maxdimension"><code>VkPhysicalDeviceImageProcessingPropertiesQCOM</code>::<code>maxWeightFilterDimension.height</code></a></p>
</li>
<li>
<p><a id="VUID-VkImageViewSampleWeightCreateInfoQCOM-filterCenter-06960" href="chap12.html#VUID-VkImageViewSampleWeightCreateInfoQCOM-filterCenter-06960"></a> <span class="vuid">VUID-VkImageViewSampleWeightCreateInfoQCOM-filterCenter-06960</span><br>

<code>filterCenter.x</code> <strong class="purple">must</strong> be less than or equal to
<span class="eq">(filterSize.width - 1)</span></p>
</li>
<li>
<p><a id="VUID-VkImageViewSampleWeightCreateInfoQCOM-filterCenter-06961" href="chap12.html#VUID-VkImageViewSampleWeightCreateInfoQCOM-filterCenter-06961"></a> <span class="vuid">VUID-VkImageViewSampleWeightCreateInfoQCOM-filterCenter-06961</span><br>

<code>filterCenter.y</code> <strong class="purple">must</strong> be less than or equal to
<span class="eq">(filterSize.height - 1)</span></p>
</li>
<li>
<p><a id="VUID-VkImageViewSampleWeightCreateInfoQCOM-numPhases-06962" href="chap12.html#VUID-VkImageViewSampleWeightCreateInfoQCOM-numPhases-06962"></a> <span class="vuid">VUID-VkImageViewSampleWeightCreateInfoQCOM-numPhases-06962</span><br>

<code>numPhases</code> <strong class="purple">must</strong> be a power of two squared value (i.e., 1, 4, 16,
64, 256, etc.)</p>
</li>
<li>
<p><a id="VUID-VkImageViewSampleWeightCreateInfoQCOM-numPhases-06963" href="chap12.html#VUID-VkImageViewSampleWeightCreateInfoQCOM-numPhases-06963"></a> <span class="vuid">VUID-VkImageViewSampleWeightCreateInfoQCOM-numPhases-06963</span><br>

<code>numPhases</code> <strong class="purple">must</strong> be less than or equal to
<a href="chap5.html#limits-weightfilter-phases"><code>VkPhysicalDeviceImageProcessingPropertiesQCOM</code>::<code>maxWeightFilterPhases</code></a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewSampleWeightCreateInfoQCOM-sType-sType" href="chap12.html#VUID-VkImageViewSampleWeightCreateInfoQCOM-sType-sType"></a> <span class="vuid">VUID-VkImageViewSampleWeightCreateInfoQCOM-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_VIEW_SAMPLE_WEIGHT_CREATE_INFO_QCOM</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy an image view, call:</p>
</div>
<div id="vkDestroyImageView" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkDestroyImageView</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkImageView</span>                                 <span class="n">imageView</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the image view.</p>
</li>
<li>
<p><code>imageView</code> is the image view to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyImageView-imageView-01026" href="chap12.html#VUID-vkDestroyImageView-imageView-01026"></a> <span class="vuid">VUID-vkDestroyImageView-imageView-01026</span><br>

All submitted commands that refer to <code>imageView</code> <strong class="purple">must</strong> have
completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyImageView-imageView-01027" href="chap12.html#VUID-vkDestroyImageView-imageView-01027"></a> <span class="vuid">VUID-vkDestroyImageView-imageView-01027</span><br>

If <code>VkAllocationCallbacks</code> were provided when <code>imageView</code> was
created, a compatible set of callbacks <strong class="purple">must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyImageView-imageView-01028" href="chap12.html#VUID-vkDestroyImageView-imageView-01028"></a> <span class="vuid">VUID-vkDestroyImageView-imageView-01028</span><br>

If no <code>VkAllocationCallbacks</code> were provided when <code>imageView</code> was
created, <code>pAllocator</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyImageView-device-parameter" href="chap12.html#VUID-vkDestroyImageView-device-parameter"></a> <span class="vuid">VUID-vkDestroyImageView-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyImageView-imageView-parameter" href="chap12.html#VUID-vkDestroyImageView-imageView-parameter"></a> <span class="vuid">VUID-vkDestroyImageView-imageView-parameter</span><br>
 If <code>imageView</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>imageView</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageView">VkImageView</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyImageView-pAllocator-parameter" href="chap12.html#VUID-vkDestroyImageView-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyImageView-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyImageView-imageView-parent" href="chap12.html#VUID-vkDestroyImageView-imageView-parent"></a> <span class="vuid">VUID-vkDestroyImageView-imageView-parent</span><br>
 If <code>imageView</code> is a valid handle, it <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>imageView</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To get the handle for an image view, call:</p>
</div>
<div id="vkGetImageViewHandleNVX" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NVX_image_view_handle</span>
<span class="kt">uint32_t</span> <span class="nf">vkGetImageViewHandleNVX</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkImageViewHandleInfoNVX</span><span class="o">*</span>             <span class="n">pInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image view.</p>
</li>
<li>
<p><code>pInfo</code> describes the image view to query and type of handle.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageViewHandleNVX-device-parameter" href="chap12.html#VUID-vkGetImageViewHandleNVX-device-parameter"></a> <span class="vuid">VUID-vkGetImageViewHandleNVX-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageViewHandleNVX-pInfo-parameter" href="chap12.html#VUID-vkGetImageViewHandleNVX-pInfo-parameter"></a> <span class="vuid">VUID-vkGetImageViewHandleNVX-pInfo-parameter</span><br>
 <code>pInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkImageViewHandleInfoNVX">VkImageViewHandleInfoNVX</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageViewHandleInfoNVX</code> structure is defined as:</p>
</div>
<div id="VkImageViewHandleInfoNVX" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NVX_image_view_handle</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageViewHandleInfoNVX</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>     <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>         <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImageView</span>         <span class="n">imageView</span><span class="p">;</span>
    <span class="n">VkDescriptorType</span>    <span class="n">descriptorType</span><span class="p">;</span>
    <span class="n">VkSampler</span>           <span class="n">sampler</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageViewHandleInfoNVX</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>imageView</code> is the image view to query.</p>
</li>
<li>
<p><code>descriptorType</code> is the type of descriptor for which to query a
handle.</p>
</li>
<li>
<p><code>sampler</code> is the sampler to combine with the image view when
generating the handle.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewHandleInfoNVX-descriptorType-02654" href="chap12.html#VUID-VkImageViewHandleInfoNVX-descriptorType-02654"></a> <span class="vuid">VUID-VkImageViewHandleInfoNVX-descriptorType-02654</span><br>

<code>descriptorType</code> <strong class="purple">must</strong> be <code>VK_DESCRIPTOR_TYPE_SAMPLED_IMAGE</code>,
<code>VK_DESCRIPTOR_TYPE_STORAGE_IMAGE</code>, or
<code>VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewHandleInfoNVX-sampler-02655" href="chap12.html#VUID-VkImageViewHandleInfoNVX-sampler-02655"></a> <span class="vuid">VUID-VkImageViewHandleInfoNVX-sampler-02655</span><br>

<code>sampler</code> <strong class="purple">must</strong> be a valid <a href="chap13.html#VkSampler">VkSampler</a> if <code>descriptorType</code>
is <code>VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewHandleInfoNVX-imageView-02656" href="chap12.html#VUID-VkImageViewHandleInfoNVX-imageView-02656"></a> <span class="vuid">VUID-VkImageViewHandleInfoNVX-imageView-02656</span><br>

If descriptorType is <code>VK_DESCRIPTOR_TYPE_SAMPLED_IMAGE</code> or
<code>VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER</code>, the image that
<code>imageView</code> was created from <strong class="purple">must</strong> have been created with the
<code>VK_IMAGE_USAGE_SAMPLED_BIT</code> usage bit set</p>
</li>
<li>
<p><a id="VUID-VkImageViewHandleInfoNVX-imageView-02657" href="chap12.html#VUID-VkImageViewHandleInfoNVX-imageView-02657"></a> <span class="vuid">VUID-VkImageViewHandleInfoNVX-imageView-02657</span><br>

If descriptorType is <code>VK_DESCRIPTOR_TYPE_STORAGE_IMAGE</code>, the image
that <code>imageView</code> was created from <strong class="purple">must</strong> have been created with the
<code>VK_IMAGE_USAGE_STORAGE_BIT</code> usage bit set</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewHandleInfoNVX-sType-sType" href="chap12.html#VUID-VkImageViewHandleInfoNVX-sType-sType"></a> <span class="vuid">VUID-VkImageViewHandleInfoNVX-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_VIEW_HANDLE_INFO_NVX</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewHandleInfoNVX-pNext-pNext" href="chap12.html#VUID-VkImageViewHandleInfoNVX-pNext-pNext"></a> <span class="vuid">VUID-VkImageViewHandleInfoNVX-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewHandleInfoNVX-imageView-parameter" href="chap12.html#VUID-VkImageViewHandleInfoNVX-imageView-parameter"></a> <span class="vuid">VUID-VkImageViewHandleInfoNVX-imageView-parameter</span><br>
 <code>imageView</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageView">VkImageView</a> handle</p>
</li>
<li>
<p><a id="VUID-VkImageViewHandleInfoNVX-descriptorType-parameter" href="chap12.html#VUID-VkImageViewHandleInfoNVX-descriptorType-parameter"></a> <span class="vuid">VUID-VkImageViewHandleInfoNVX-descriptorType-parameter</span><br>
 <code>descriptorType</code> <strong class="purple">must</strong> be a valid <a href="chap14.html#VkDescriptorType">VkDescriptorType</a> value</p>
</li>
<li>
<p><a id="VUID-VkImageViewHandleInfoNVX-sampler-parameter" href="chap12.html#VUID-VkImageViewHandleInfoNVX-sampler-parameter"></a> <span class="vuid">VUID-VkImageViewHandleInfoNVX-sampler-parameter</span><br>
 If <code>sampler</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>sampler</code> <strong class="purple">must</strong> be a valid <a href="chap13.html#VkSampler">VkSampler</a> handle</p>
</li>
<li>
<p><a id="VUID-VkImageViewHandleInfoNVX-commonparent" href="chap12.html#VUID-VkImageViewHandleInfoNVX-commonparent"></a> <span class="vuid">VUID-VkImageViewHandleInfoNVX-commonparent</span><br>
 Both of <code>imageView</code>, and <code>sampler</code> that are valid handles of non-ignored parameters <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To get the device address for an image view, call:</p>
</div>
<div id="vkGetImageViewAddressNVX" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NVX_image_view_handle</span>
<span class="n">VkResult</span> <span class="nf">vkGetImageViewAddressNVX</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkImageView</span>                                 <span class="n">imageView</span><span class="p">,</span>
    <span class="n">VkImageViewAddressPropertiesNVX</span><span class="o">*</span>            <span class="n">pProperties</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image view.</p>
</li>
<li>
<p><code>imageView</code> is a handle to the image view.</p>
</li>
<li>
<p><code>pProperties</code> contains the device address and size when the call
returns.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageViewAddressNVX-device-parameter" href="chap12.html#VUID-vkGetImageViewAddressNVX-device-parameter"></a> <span class="vuid">VUID-vkGetImageViewAddressNVX-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageViewAddressNVX-imageView-parameter" href="chap12.html#VUID-vkGetImageViewAddressNVX-imageView-parameter"></a> <span class="vuid">VUID-vkGetImageViewAddressNVX-imageView-parameter</span><br>
 <code>imageView</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageView">VkImageView</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageViewAddressNVX-pProperties-parameter" href="chap12.html#VUID-vkGetImageViewAddressNVX-pProperties-parameter"></a> <span class="vuid">VUID-vkGetImageViewAddressNVX-pProperties-parameter</span><br>
 <code>pProperties</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkImageViewAddressPropertiesNVX">VkImageViewAddressPropertiesNVX</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetImageViewAddressNVX-imageView-parent" href="chap12.html#VUID-vkGetImageViewAddressNVX-imageView-parent"></a> <span class="vuid">VUID-vkGetImageViewAddressNVX-imageView-parent</span><br>
 <code>imageView</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_UNKNOWN</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageViewAddressPropertiesNVX</code> structure is defined as:</p>
</div>
<div id="VkImageViewAddressPropertiesNVX" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NVX_image_view_handle</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageViewAddressPropertiesNVX</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>              <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkDeviceAddress</span>    <span class="n">deviceAddress</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">size</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageViewAddressPropertiesNVX</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>deviceAddress</code> is the device address of the image view.</p>
</li>
<li>
<p><code>size</code> is the size in bytes of the image view device memory.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewAddressPropertiesNVX-sType-sType" href="chap12.html#VUID-VkImageViewAddressPropertiesNVX-sType-sType"></a> <span class="vuid">VUID-VkImageViewAddressPropertiesNVX-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_VIEW_ADDRESS_PROPERTIES_NVX</code></p>
</li>
<li>
<p><a id="VUID-VkImageViewAddressPropertiesNVX-pNext-pNext" href="chap12.html#VUID-VkImageViewAddressPropertiesNVX-pNext-pNext"></a> <span class="vuid">VUID-VkImageViewAddressPropertiesNVX-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-image-view-format-features"><a class="anchor" href="chap12.html#resources-image-view-format-features"></a>12.5.1. Image View Format Features</h4>
<div class="paragraph">
<p>Valid uses of a <a href="chap12.html#VkImageView">VkImageView</a> <strong class="purple">may</strong> depend on the image view’s <em>format
features</em>, defined below.
Such constraints are documented in the affected valid usage statement.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If Vulkan 1.3 is supported or the <code><a href="chap50.html#VK_KHR_format_feature_flags2">VK_KHR_format_feature_flags2</a></code>
extension is enabled, and <a href="chap12.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> was
created with <code>VK_IMAGE_TILING_LINEAR</code>, then the image view’s set of
<em>format features</em> is the value of
<a href="chap43.html#VkFormatProperties3">VkFormatProperties3</a>::<code>linearTilingFeatures</code> found by calling
<a href="chap43.html#vkGetPhysicalDeviceFormatProperties2">vkGetPhysicalDeviceFormatProperties2</a> on the same <code>format</code> as
<a href="chap12.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>format</code>.</p>
</li>
<li>
<p>If Vulkan 1.3 is not supported and the
<code><a href="chap50.html#VK_KHR_format_feature_flags2">VK_KHR_format_feature_flags2</a></code> extension is not enabled, and
<a href="chap12.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> was created with
<code>VK_IMAGE_TILING_LINEAR</code>, then the image view’s set of <em>format
features</em> is the union of the value of
<a href="chap43.html#VkFormatProperties">VkFormatProperties</a>::<code>linearTilingFeatures</code> found by calling
<a href="chap43.html#vkGetPhysicalDeviceFormatProperties">vkGetPhysicalDeviceFormatProperties</a> on the same <code>format</code> as
<a href="chap12.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>format</code>, with:</p>
<div class="ulist">
<ul>
<li>
<p><code>VK_FORMAT_FEATURE_2_SAMPLED_IMAGE_DEPTH_COMPARISON_BIT</code> if the
format is a depth/stencil format and the image view features also
contain <code>VK_FORMAT_FEATURE_2_SAMPLED_IMAGE_BIT</code>.</p>
</li>
<li>
<p><code>VK_FORMAT_FEATURE_2_STORAGE_READ_WITHOUT_FORMAT_BIT</code> if the format
is one of the <a href="chap43.html#formats-without-shader-storage-format">extended storage
formats</a> and <code>shaderStorageImageReadWithoutFormat</code> is enabled on
the device.</p>
</li>
<li>
<p><code>VK_FORMAT_FEATURE_2_STORAGE_WRITE_WITHOUT_FORMAT_BIT</code> if the
format is one of the <a href="chap43.html#formats-without-shader-storage-format">extended
storage formats</a> and <code>shaderStorageImageWriteWithoutFormat</code> is
enabled on the device.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If Vulkan 1.3 is supported or the <code><a href="chap50.html#VK_KHR_format_feature_flags2">VK_KHR_format_feature_flags2</a></code>
extension is enabled, and <a href="chap12.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> was
created with <code>VK_IMAGE_TILING_OPTIMAL</code>,
but without an
<a href="chap11.html#memory-external-android-hardware-buffer-external-formats">Android
hardware buffer external format</a>,
then the image view’s set of <em>format features</em> is the value of
<a href="chap43.html#VkFormatProperties">VkFormatProperties</a>::<code>optimalTilingFeatures</code> or
<a href="chap43.html#VkFormatProperties3">VkFormatProperties3</a>::<code>optimalTilingFeatures</code> found by calling
<a href="chap43.html#vkGetPhysicalDeviceFormatProperties">vkGetPhysicalDeviceFormatProperties</a> or
<a href="chap44.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a> on the same <code>format</code>
as <a href="chap12.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>format</code>.</p>
</li>
<li>
<p>If Vulkan 1.3 is not supported and the
<code><a href="chap50.html#VK_KHR_format_feature_flags2">VK_KHR_format_feature_flags2</a></code> extension is not enabled, and
<a href="chap12.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> was created with
<code>VK_IMAGE_TILING_OPTIMAL</code>,
but without an
<a href="chap11.html#memory-external-android-hardware-buffer-external-formats">Android
hardware buffer external format</a>,
then the image view’s set of <em>format features</em> is the union of the value
of <a href="chap43.html#VkFormatProperties">VkFormatProperties</a>::<code>optimalTilingFeatures</code> found by
calling <a href="chap43.html#vkGetPhysicalDeviceFormatProperties">vkGetPhysicalDeviceFormatProperties</a> on the same
<code>format</code> as <a href="chap12.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>format</code>, with:</p>
<div class="ulist">
<ul>
<li>
<p><code>VK_FORMAT_FEATURE_2_SAMPLED_IMAGE_DEPTH_COMPARISON_BIT</code> if the
format is a depth/stencil format and the image view features also
contain <code>VK_FORMAT_FEATURE_2_SAMPLED_IMAGE_BIT</code>.</p>
</li>
<li>
<p><code>VK_FORMAT_FEATURE_2_STORAGE_READ_WITHOUT_FORMAT_BIT</code> if the format
is one of the <a href="chap43.html#formats-without-shader-storage-format">extended storage
formats</a> and <code>shaderStorageImageReadWithoutFormat</code> is enabled on
the device.</p>
</li>
<li>
<p><code>VK_FORMAT_FEATURE_2_STORAGE_WRITE_WITHOUT_FORMAT_BIT</code> if the
format is one of the <a href="chap43.html#formats-without-shader-storage-format">extended
storage formats</a> and <code>shaderStorageImageWriteWithoutFormat</code> is
enabled on the device.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If <a href="chap12.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> was created with an
<a href="chap11.html#memory-external-android-hardware-buffer-external-formats">Android
hardware buffer external format</a>, then the image views’s set of <em>format
features</em> is the value of
<a href="chap11.html#VkAndroidHardwareBufferFormatPropertiesANDROID">VkAndroidHardwareBufferFormatPropertiesANDROID</a>::<code>formatFeatures</code>
found by calling <a href="chap11.html#vkGetAndroidHardwareBufferPropertiesANDROID">vkGetAndroidHardwareBufferPropertiesANDROID</a> on
the Android hardware buffer that was imported to the
<a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> to which the
<a href="chap12.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> is bound.</p>
</li>
<li>
<p>If <a href="chap12.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> was created with a chained
<a href="chap12.html#VkBufferCollectionImageCreateInfoFUCHSIA">VkBufferCollectionImageCreateInfoFUCHSIA</a>, then the image view’s
set of <em>format features</em> is the value of
<a href="chap12.html#VkBufferCollectionPropertiesFUCHSIA">VkBufferCollectionPropertiesFUCHSIA</a>::<code>formatFeatures</code> found by
calling <a href="chap12.html#vkGetBufferCollectionPropertiesFUCHSIA">vkGetBufferCollectionPropertiesFUCHSIA</a> on the buffer
collection passed as
<a href="chap12.html#VkBufferCollectionImageCreateInfoFUCHSIA">VkBufferCollectionImageCreateInfoFUCHSIA</a>::<code>collection</code> when
the image was created.</p>
</li>
<li>
<p>If <a href="chap12.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>image</code> was created with
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then:</p>
<div class="ulist">
<ul>
<li>
<p>The image’s DRM format modifier is the value of
<a href="chap12.html#VkImageDrmFormatModifierPropertiesEXT">VkImageDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifier</code>
found by calling <a href="chap12.html#vkGetImageDrmFormatModifierPropertiesEXT">vkGetImageDrmFormatModifierPropertiesEXT</a>.</p>
</li>
<li>
<p>Let
<a href="chap43.html#VkDrmFormatModifierPropertiesListEXT">VkDrmFormatModifierPropertiesListEXT</a>::<code>pDrmFormatModifierProperties</code>
be the array found by calling
<a href="chap43.html#vkGetPhysicalDeviceFormatProperties2">vkGetPhysicalDeviceFormatProperties2</a> on the same <code>format</code> as
<a href="chap12.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>format</code>.</p>
</li>
<li>
<p>Let <code>VkDrmFormatModifierPropertiesEXT prop</code> be the array element whose
<code>drmFormatModifier</code> member is the value of the image’s DRM format
modifier.</p>
</li>
<li>
<p>Then the image view’s set of <em>format features</em> is
<code>prop</code>::<code>drmFormatModifierTilingFeatures</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain includes a <code>VkImageViewMinLodCreateInfoEXT</code>
structure, then that structure includes a parameter specifying a value to
clamp the minimum LOD value during <a href="chap16.html#textures-image-level-selection">Image
Level(s) Selection</a> and <a href="chap16.html#textures-integer-coordinate-operations">Integer
Texel Coordinate Operations</a>.</p>
</div>
<div class="paragraph">
<p>The <code>VkImageViewMinLodCreateInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkImageViewMinLodCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_EXT_image_view_min_lod</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageViewMinLodCreateInfoEXT</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">float</span>              <span class="n">minLod</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageViewMinLodCreateInfoEXT</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>minLod</code> is the value to clamp the minimum LOD accessible by this
<a href="chap12.html#VkImageView">VkImageView</a>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewMinLodCreateInfoEXT-minLod-06455" href="chap12.html#VUID-VkImageViewMinLodCreateInfoEXT-minLod-06455"></a> <span class="vuid">VUID-VkImageViewMinLodCreateInfoEXT-minLod-06455</span><br>

If the <a href="chap41.html#features-minLod"><code>minLod</code></a> feature is not enabled,
<code>minLod</code> <strong class="purple">must</strong> be <code>0.0</code>.</p>
</li>
<li>
<p><a id="VUID-VkImageViewMinLodCreateInfoEXT-minLod-06456" href="chap12.html#VUID-VkImageViewMinLodCreateInfoEXT-minLod-06456"></a> <span class="vuid">VUID-VkImageViewMinLodCreateInfoEXT-minLod-06456</span><br>

<code>minLod</code> <strong class="purple">must</strong> be less or equal to the index of the last mipmap
level accessible to the view.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageViewMinLodCreateInfoEXT-sType-sType" href="chap12.html#VUID-VkImageViewMinLodCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkImageViewMinLodCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_VIEW_MIN_LOD_CREATE_INFO_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-acceleration-structures"><a class="anchor" href="chap12.html#resources-acceleration-structures"></a>12.6. Acceleration Structures</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Acceleration structures are opaque data structures that are built by the
implementation to more efficiently perform spatial queries on the provided
geometric data.
For this extension, an acceleration structure is either a top-level
acceleration structure containing a set of bottom-level acceleration
structures or a bottom-level acceleration structure containing either a set
of axis-aligned bounding boxes for custom geometry or a set of triangles.</p>
</div>
<div class="paragraph">
<p>Each instance in the top-level acceleration structure contains a reference
to a bottom-level acceleration structure as well as an instance transform
plus information required to index into the shader bindings.
The top-level acceleration structure is what is bound to the acceleration
descriptor, for example to trace inside the shader in the ray tracing
pipeline.</p>
</div>
<div class="paragraph">
<p>Acceleration structures are represented by <code>VkAccelerationStructureKHR</code>
handles:</p>
</div>
<div id="VkAccelerationStructureKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_acceleration_structure</span>
<span class="n">VK_DEFINE_NON_DISPATCHABLE_HANDLE</span><span class="p">(</span><span class="n">VkAccelerationStructureKHR</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Acceleration structures for the <code><a href="chap50.html#VK_NV_ray_tracing">VK_NV_ray_tracing</a> extension</code> are
represented by the similar <code>VkAccelerationStructureNV</code> handles:</p>
</div>
<div id="VkAccelerationStructureNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing</span>
<span class="n">VK_DEFINE_NON_DISPATCHABLE_HANDLE</span><span class="p">(</span><span class="n">VkAccelerationStructureNV</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create acceleration structures, call:</p>
</div>
<div id="vkCreateAccelerationStructureNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing</span>
<span class="n">VkResult</span> <span class="nf">vkCreateAccelerationStructureNV</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAccelerationStructureCreateInfoNV</span><span class="o">*</span>  <span class="n">pCreateInfo</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">,</span>
    <span class="n">VkAccelerationStructureNV</span><span class="o">*</span>                  <span class="n">pAccelerationStructure</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the buffer object.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a
<a href="chap12.html#VkAccelerationStructureCreateInfoNV">VkAccelerationStructureCreateInfoNV</a> structure containing
parameters affecting creation of the acceleration structure.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pAccelerationStructure</code> is a pointer to a
<a href="chap12.html#VkAccelerationStructureNV">VkAccelerationStructureNV</a> handle in which the resulting
acceleration structure object is returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Similarly to other objects in Vulkan, the acceleration structure creation
merely creates an object with a specific “shape” as specified by the
information in <a href="chap12.html#VkAccelerationStructureInfoNV">VkAccelerationStructureInfoNV</a> and <code>compactedSize</code>
in <code>pCreateInfo</code>.
Populating the data in the object after allocating and binding memory is
done with <a href="chap36.html#vkCmdBuildAccelerationStructureNV">vkCmdBuildAccelerationStructureNV</a> and
<a href="chap36.html#vkCmdCopyAccelerationStructureNV">vkCmdCopyAccelerationStructureNV</a>.</p>
</div>
<div class="paragraph">
<p>Acceleration structure creation uses the count and type information from the
geometries, but does not use the data references in the structures.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateAccelerationStructureNV-device-parameter" href="chap12.html#VUID-vkCreateAccelerationStructureNV-device-parameter"></a> <span class="vuid">VUID-vkCreateAccelerationStructureNV-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateAccelerationStructureNV-pCreateInfo-parameter" href="chap12.html#VUID-vkCreateAccelerationStructureNV-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateAccelerationStructureNV-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkAccelerationStructureCreateInfoNV">VkAccelerationStructureCreateInfoNV</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateAccelerationStructureNV-pAllocator-parameter" href="chap12.html#VUID-vkCreateAccelerationStructureNV-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateAccelerationStructureNV-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateAccelerationStructureNV-pAccelerationStructure-parameter" href="chap12.html#VUID-vkCreateAccelerationStructureNV-pAccelerationStructure-parameter"></a> <span class="vuid">VUID-vkCreateAccelerationStructureNV-pAccelerationStructure-parameter</span><br>
 <code>pAccelerationStructure</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkAccelerationStructureNV">VkAccelerationStructureNV</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAccelerationStructureCreateInfoNV</code> structure is defined as:</p>
</div>
<div id="VkAccelerationStructureCreateInfoNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkAccelerationStructureCreateInfoNV</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                  <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                      <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>                     <span class="n">compactedSize</span><span class="p">;</span>
    <span class="n">VkAccelerationStructureInfoNV</span>    <span class="n">info</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkAccelerationStructureCreateInfoNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>compactedSize</code> is the size from the result of
<a href="chap36.html#vkCmdWriteAccelerationStructuresPropertiesNV">vkCmdWriteAccelerationStructuresPropertiesNV</a> if this acceleration
structure is going to be the target of a compacting copy.</p>
</li>
<li>
<p><code>info</code> is the <a href="chap12.html#VkAccelerationStructureInfoNV">VkAccelerationStructureInfoNV</a> structure
specifying further parameters of the created acceleration structure.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoNV-compactedSize-02421" href="chap12.html#VUID-VkAccelerationStructureCreateInfoNV-compactedSize-02421"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoNV-compactedSize-02421</span><br>

If <code>compactedSize</code> is not <code>0</code> then both <code>info.geometryCount</code> and
<code>info.instanceCount</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoNV-sType-sType" href="chap12.html#VUID-VkAccelerationStructureCreateInfoNV-sType-sType"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoNV-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_ACCELERATION_STRUCTURE_CREATE_INFO_NV</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoNV-pNext-pNext" href="chap12.html#VUID-VkAccelerationStructureCreateInfoNV-pNext-pNext"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoNV-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoNV-info-parameter" href="chap12.html#VUID-VkAccelerationStructureCreateInfoNV-info-parameter"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoNV-info-parameter</span><br>
 <code>info</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkAccelerationStructureInfoNV">VkAccelerationStructureInfoNV</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAccelerationStructureInfoNV</code> structure is defined as:</p>
</div>
<div id="VkAccelerationStructureInfoNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkAccelerationStructureInfoNV</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                        <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                            <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkAccelerationStructureTypeNV</span>          <span class="n">type</span><span class="p">;</span>
    <span class="n">VkBuildAccelerationStructureFlagsNV</span>    <span class="n">flags</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                               <span class="n">instanceCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                               <span class="n">geometryCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkGeometryNV</span><span class="o">*</span>                    <span class="n">pGeometries</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkAccelerationStructureInfoNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>type</code> is a <a href="chap12.html#VkAccelerationStructureTypeNV">VkAccelerationStructureTypeNV</a> value specifying the
type of acceleration structure that will be created.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap12.html#VkBuildAccelerationStructureFlagBitsNV">VkBuildAccelerationStructureFlagBitsNV</a>
specifying additional parameters of the acceleration structure.</p>
</li>
<li>
<p><code>instanceCount</code> specifies the number of instances that will be in
the new acceleration structure.</p>
</li>
<li>
<p><code>geometryCount</code> specifies the number of geometries that will be in
the new acceleration structure.</p>
</li>
<li>
<p><code>pGeometries</code> is a pointer to an array of <code>geometryCount</code>
<a href="chap12.html#VkGeometryNV">VkGeometryNV</a> structures containing the scene data being passed
into the acceleration structure.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>VkAccelerationStructureInfoNV</code> contains information that is used both
for acceleration structure creation with
<a href="chap12.html#vkCreateAccelerationStructureNV">vkCreateAccelerationStructureNV</a> and in combination with the actual
geometric data to build the acceleration structure with
<a href="chap36.html#vkCmdBuildAccelerationStructureNV">vkCmdBuildAccelerationStructureNV</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-geometryCount-02422" href="chap12.html#VUID-VkAccelerationStructureInfoNV-geometryCount-02422"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-geometryCount-02422</span><br>

<code>geometryCount</code> <strong class="purple">must</strong> be less than or equal to
<a href="chap42.html#VkPhysicalDeviceRayTracingPropertiesNV">VkPhysicalDeviceRayTracingPropertiesNV</a>::<code>maxGeometryCount</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-instanceCount-02423" href="chap12.html#VUID-VkAccelerationStructureInfoNV-instanceCount-02423"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-instanceCount-02423</span><br>

<code>instanceCount</code> <strong class="purple">must</strong> be less than or equal to
<a href="chap42.html#VkPhysicalDeviceRayTracingPropertiesNV">VkPhysicalDeviceRayTracingPropertiesNV</a>::<code>maxInstanceCount</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-maxTriangleCount-02424" href="chap12.html#VUID-VkAccelerationStructureInfoNV-maxTriangleCount-02424"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-maxTriangleCount-02424</span><br>

The total number of triangles in all geometries <strong class="purple">must</strong> be less than or
equal to
<a href="chap42.html#VkPhysicalDeviceRayTracingPropertiesNV">VkPhysicalDeviceRayTracingPropertiesNV</a>::<code>maxTriangleCount</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-type-02425" href="chap12.html#VUID-VkAccelerationStructureInfoNV-type-02425"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-type-02425</span><br>

If <code>type</code> is <code>VK_ACCELERATION_STRUCTURE_TYPE_TOP_LEVEL_NV</code> then
<code>geometryCount</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-type-02426" href="chap12.html#VUID-VkAccelerationStructureInfoNV-type-02426"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-type-02426</span><br>

If <code>type</code> is <code>VK_ACCELERATION_STRUCTURE_TYPE_BOTTOM_LEVEL_NV</code>
then <code>instanceCount</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-type-02786" href="chap12.html#VUID-VkAccelerationStructureInfoNV-type-02786"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-type-02786</span><br>

If <code>type</code> is <code>VK_ACCELERATION_STRUCTURE_TYPE_BOTTOM_LEVEL_NV</code>
then the <code>geometryType</code> member of each geometry in <code>pGeometries</code>
<strong class="purple">must</strong> be the same</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-type-04623" href="chap12.html#VUID-VkAccelerationStructureInfoNV-type-04623"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-type-04623</span><br>

<code>type</code> <strong class="purple">must</strong> not be <code>VK_ACCELERATION_STRUCTURE_TYPE_GENERIC_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-flags-02592" href="chap12.html#VUID-VkAccelerationStructureInfoNV-flags-02592"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-flags-02592</span><br>

If <code>flags</code> has the
<code>VK_BUILD_ACCELERATION_STRUCTURE_PREFER_FAST_TRACE_BIT_NV</code> bit set,
then it <strong class="purple">must</strong> not have the
<code>VK_BUILD_ACCELERATION_STRUCTURE_PREFER_FAST_BUILD_BIT_NV</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-scratch-02781" href="chap12.html#VUID-VkAccelerationStructureInfoNV-scratch-02781"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-scratch-02781</span><br>

<code>scratch</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_RAY_TRACING_BIT_NV</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-instanceData-02782" href="chap12.html#VUID-VkAccelerationStructureInfoNV-instanceData-02782"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-instanceData-02782</span><br>

If <code>instanceData</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>instanceData</code>
<strong class="purple">must</strong> have been created with <code>VK_BUFFER_USAGE_RAY_TRACING_BIT_NV</code>
usage flag</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-sType-sType" href="chap12.html#VUID-VkAccelerationStructureInfoNV-sType-sType"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_ACCELERATION_STRUCTURE_INFO_NV</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-pNext-pNext" href="chap12.html#VUID-VkAccelerationStructureInfoNV-pNext-pNext"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-type-parameter" href="chap12.html#VUID-VkAccelerationStructureInfoNV-type-parameter"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-type-parameter</span><br>
 <code>type</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkAccelerationStructureTypeNV">VkAccelerationStructureTypeNV</a> value</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-flags-parameter" href="chap12.html#VUID-VkAccelerationStructureInfoNV-flags-parameter"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap12.html#VkBuildAccelerationStructureFlagBitsNV">VkBuildAccelerationStructureFlagBitsNV</a> values</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureInfoNV-pGeometries-parameter" href="chap12.html#VUID-VkAccelerationStructureInfoNV-pGeometries-parameter"></a> <span class="vuid">VUID-VkAccelerationStructureInfoNV-pGeometries-parameter</span><br>
 If <code>geometryCount</code> is not <code>0</code>, <code>pGeometries</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>geometryCount</code> valid <a href="chap12.html#VkGeometryNV">VkGeometryNV</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create an acceleration structure, call:</p>
</div>
<div id="vkCreateAccelerationStructureKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_acceleration_structure</span>
<span class="n">VkResult</span> <span class="nf">vkCreateAccelerationStructureKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAccelerationStructureCreateInfoKHR</span><span class="o">*</span> <span class="n">pCreateInfo</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">,</span>
    <span class="n">VkAccelerationStructureKHR</span><span class="o">*</span>                 <span class="n">pAccelerationStructure</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the acceleration
structure object.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a
<a href="chap12.html#VkAccelerationStructureCreateInfoKHR">VkAccelerationStructureCreateInfoKHR</a> structure containing
parameters affecting creation of the acceleration structure.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pAccelerationStructure</code> is a pointer to a
<code>VkAccelerationStructureKHR</code> handle in which the resulting
acceleration structure object is returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Similar to other objects in Vulkan, the acceleration structure creation
merely creates an object with a specific “shape”.
The type and quantity of geometry that can be built into an acceleration
structure is determined by the parameters of
<a href="chap12.html#VkAccelerationStructureCreateInfoKHR">VkAccelerationStructureCreateInfoKHR</a>.</p>
</div>
<div class="paragraph">
<p>Populating the data in the object after allocating and binding memory is
done with commands such as <a href="chap36.html#vkCmdBuildAccelerationStructuresKHR">vkCmdBuildAccelerationStructuresKHR</a>,
<a href="chap36.html#vkBuildAccelerationStructuresKHR">vkBuildAccelerationStructuresKHR</a>,
<a href="chap36.html#vkCmdCopyAccelerationStructureKHR">vkCmdCopyAccelerationStructureKHR</a>, and
<a href="chap36.html#vkCopyAccelerationStructureKHR">vkCopyAccelerationStructureKHR</a>.</p>
</div>
<div class="paragraph">
<p>The input buffers passed to acceleration structure build commands will be
referenced by the implementation for the duration of the command.
After the command completes, the acceleration structure <strong class="purple">may</strong> hold a
reference to any acceleration structure specified by an active instance
contained therein.
Apart from this referencing, acceleration structures <strong class="purple">must</strong> be fully
self-contained.
The application <strong class="purple">may</strong> re-use or free any memory which was used by the command
as an input or as scratch without affecting the results of ray traversal.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateAccelerationStructureKHR-accelerationStructure-03611" href="chap12.html#VUID-vkCreateAccelerationStructureKHR-accelerationStructure-03611"></a> <span class="vuid">VUID-vkCreateAccelerationStructureKHR-accelerationStructure-03611</span><br>

The <a href="chap41.html#features-accelerationStructure"><code>accelerationStructure</code></a>
feature <strong class="purple">must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-vkCreateAccelerationStructureKHR-deviceAddress-03488" href="chap12.html#VUID-vkCreateAccelerationStructureKHR-deviceAddress-03488"></a> <span class="vuid">VUID-vkCreateAccelerationStructureKHR-deviceAddress-03488</span><br>

If <a href="chap12.html#VkAccelerationStructureCreateInfoKHR">VkAccelerationStructureCreateInfoKHR</a>::<code>deviceAddress</code> is
not zero, the <a href="chap41.html#features-accelerationStructureCaptureReplay"><code>accelerationStructureCaptureReplay</code></a> feature <strong class="purple">must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-vkCreateAccelerationStructureKHR-device-03489" href="chap12.html#VUID-vkCreateAccelerationStructureKHR-device-03489"></a> <span class="vuid">VUID-vkCreateAccelerationStructureKHR-device-03489</span><br>

If <code>device</code> was created with multiple physical devices, then the
<a href="chap41.html#features-bufferDeviceAddressMultiDevice"><code>bufferDeviceAddressMultiDevice</code></a> feature <strong class="purple">must</strong> be enabled</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateAccelerationStructureKHR-device-parameter" href="chap12.html#VUID-vkCreateAccelerationStructureKHR-device-parameter"></a> <span class="vuid">VUID-vkCreateAccelerationStructureKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateAccelerationStructureKHR-pCreateInfo-parameter" href="chap12.html#VUID-vkCreateAccelerationStructureKHR-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateAccelerationStructureKHR-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkAccelerationStructureCreateInfoKHR">VkAccelerationStructureCreateInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateAccelerationStructureKHR-pAllocator-parameter" href="chap12.html#VUID-vkCreateAccelerationStructureKHR-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateAccelerationStructureKHR-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateAccelerationStructureKHR-pAccelerationStructure-parameter" href="chap12.html#VUID-vkCreateAccelerationStructureKHR-pAccelerationStructure-parameter"></a> <span class="vuid">VUID-vkCreateAccelerationStructureKHR-pAccelerationStructure-parameter</span><br>
 <code>pAccelerationStructure</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkAccelerationStructureKHR">VkAccelerationStructureKHR</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INVALID_OPAQUE_CAPTURE_ADDRESS_KHR</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAccelerationStructureCreateInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkAccelerationStructureCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_acceleration_structure</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkAccelerationStructureCreateInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                          <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                              <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkAccelerationStructureCreateFlagsKHR</span>    <span class="n">createFlags</span><span class="p">;</span>
    <span class="n">VkBuffer</span>                                 <span class="n">buffer</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>                             <span class="n">offset</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>                             <span class="n">size</span><span class="p">;</span>
    <span class="n">VkAccelerationStructureTypeKHR</span>           <span class="n">type</span><span class="p">;</span>
    <span class="n">VkDeviceAddress</span>                          <span class="n">deviceAddress</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkAccelerationStructureCreateInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>createFlags</code> is a bitmask of
<a href="chap12.html#VkAccelerationStructureCreateFlagBitsKHR">VkAccelerationStructureCreateFlagBitsKHR</a> specifying additional
creation parameters of the acceleration structure.</p>
</li>
<li>
<p><code>buffer</code> is the buffer on which the acceleration structure will be
stored.</p>
</li>
<li>
<p><code>offset</code> is an offset in bytes from the base address of the buffer
at which the acceleration structure will be stored, and <strong class="purple">must</strong> be a
multiple of <code>256</code>.</p>
</li>
<li>
<p><code>size</code> is the size required for the acceleration structure.</p>
</li>
<li>
<p><code>type</code> is a <a href="chap12.html#VkAccelerationStructureTypeKHR">VkAccelerationStructureTypeKHR</a> value specifying
the type of acceleration structure that will be created.</p>
</li>
<li>
<p><code>deviceAddress</code> is the device address requested for the acceleration
structure if the <a href="chap41.html#features-accelerationStructureCaptureReplay"><code>accelerationStructureCaptureReplay</code></a> feature is being used.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>deviceAddress</code> is zero, no specific address is requested.</p>
</div>
<div class="paragraph">
<p>If <code>deviceAddress</code> is not zero, <code>deviceAddress</code> <strong class="purple">must</strong> be an address
retrieved from an identically created acceleration structure on the same
implementation.
The acceleration structure <strong class="purple">must</strong> also be placed on an identically created
<code>buffer</code> and at the same <code>offset</code>.</p>
</div>
<div class="paragraph">
<p>Applications <strong class="purple">should</strong> avoid creating acceleration structures with
application-provided addresses and implementation-provided addresses in the
same process, to reduce the likelihood of
<code>VK_ERROR_INVALID_OPAQUE_CAPTURE_ADDRESS_KHR</code> errors.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The expected usage for this is that a trace capture/replay tool will add the
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code> flag to all buffers
that use <code>VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</code>, and will add
<code>VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</code> to all buffers used as
storage for an acceleration structure where <code>deviceAddress</code> is not zero.
This also means that the tool will need to add
<code>VK_MEMORY_ALLOCATE_DEVICE_ADDRESS_BIT</code> to memory allocations to allow
the flag to be set where the application may not have otherwise required it.
During capture the tool will save the queried opaque device addresses in the
trace.
During replay, the buffers will be created specifying the original address
so any address values stored in the trace data will remain valid.</p>
</div>
<div class="paragraph">
<p>Implementations are expected to separate such buffers in the GPU address
space so normal allocations will avoid using these addresses.
Apps/tools should avoid mixing app-provided and implementation-provided
addresses for buffers created with
<code>VK_BUFFER_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT</code>, to avoid address
space allocation conflicts.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Applications <strong class="purple">should</strong> create an acceleration structure with a specific
<a href="chap12.html#VkAccelerationStructureTypeKHR">VkAccelerationStructureTypeKHR</a> other than
<code>VK_ACCELERATION_STRUCTURE_TYPE_GENERIC_KHR</code>.</p>
</div>
<div class="paragraph">
<p>If the acceleration structure will be the target of a build operation, the
required size for an acceleration structure <strong class="purple">can</strong> be queried with
<a href="chap12.html#vkGetAccelerationStructureBuildSizesKHR">vkGetAccelerationStructureBuildSizesKHR</a>.
If the acceleration structure is going to be the target of a compacting
copy, <a href="chap36.html#vkCmdWriteAccelerationStructuresPropertiesKHR">vkCmdWriteAccelerationStructuresPropertiesKHR</a> or
<a href="chap36.html#vkWriteAccelerationStructuresPropertiesKHR">vkWriteAccelerationStructuresPropertiesKHR</a> <strong class="purple">can</strong> be used to obtain the
compacted size required.</p>
</div>
<div class="paragraph">
<p>If the acceleration structure will be the target of a build operation with
<code>VK_BUILD_ACCELERATION_STRUCTURE_MOTION_BIT_NV</code> it <strong class="purple">must</strong> include
<code>VK_ACCELERATION_STRUCTURE_CREATE_MOTION_BIT_NV</code> in <code>flags</code> and
include <a href="chap12.html#VkAccelerationStructureMotionInfoNV">VkAccelerationStructureMotionInfoNV</a> as an extension structure
in <code>pNext</code> with the number of instances as metadata for the object.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-deviceAddress-03612" href="chap12.html#VUID-VkAccelerationStructureCreateInfoKHR-deviceAddress-03612"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-deviceAddress-03612</span><br>

If <code>deviceAddress</code> is not zero, <code>createFlags</code> <strong class="purple">must</strong> include
<code>VK_ACCELERATION_STRUCTURE_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-createFlags-03613" href="chap12.html#VUID-VkAccelerationStructureCreateInfoKHR-createFlags-03613"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-createFlags-03613</span><br>

If <code>createFlags</code> includes
<code>VK_ACCELERATION_STRUCTURE_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT_KHR</code>,
<a href="chap41.html#VkPhysicalDeviceAccelerationStructureFeaturesKHR">VkPhysicalDeviceAccelerationStructureFeaturesKHR</a>::<code>accelerationStructureCaptureReplay</code>
<strong class="purple">must</strong> be <code>VK_TRUE</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-buffer-03614" href="chap12.html#VUID-VkAccelerationStructureCreateInfoKHR-buffer-03614"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-buffer-03614</span><br>

<code>buffer</code> <strong class="purple">must</strong> have been created with a <code>usage</code> value containing
<code>VK_BUFFER_USAGE_ACCELERATION_STRUCTURE_STORAGE_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-buffer-03615" href="chap12.html#VUID-VkAccelerationStructureCreateInfoKHR-buffer-03615"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-buffer-03615</span><br>

<code>buffer</code> <strong class="purple">must</strong> not have been created with
<code>VK_BUFFER_CREATE_SPARSE_RESIDENCY_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-offset-03616" href="chap12.html#VUID-VkAccelerationStructureCreateInfoKHR-offset-03616"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-offset-03616</span><br>

The sum of <code>offset</code> and <code>size</code> <strong class="purple">must</strong> be less than the size of
<code>buffer</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-offset-03734" href="chap12.html#VUID-VkAccelerationStructureCreateInfoKHR-offset-03734"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-offset-03734</span><br>

<code>offset</code> <strong class="purple">must</strong> be a multiple of <code>256</code> bytes</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-flags-04954" href="chap12.html#VUID-VkAccelerationStructureCreateInfoKHR-flags-04954"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-flags-04954</span><br>

   If <code>VK_ACCELERATION_STRUCTURE_CREATE_MOTION_BIT_NV</code> is set in
   <code>flags</code> and <code>type</code> is
   <code>VK_ACCELERATION_STRUCTURE_TYPE_TOP_LEVEL_KHR</code>,
one member of the <code>pNext</code> chain <strong class="purple">must</strong> be a pointer to a valid instance
of <a href="chap12.html#VkAccelerationStructureMotionInfoNV">VkAccelerationStructureMotionInfoNV</a></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-flags-04955" href="chap12.html#VUID-VkAccelerationStructureCreateInfoKHR-flags-04955"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-flags-04955</span><br>

If any geometry includes
<code>VkAccelerationStructureGeometryMotionTrianglesDataNV</code> then
<code>flags</code> <strong class="purple">must</strong> contain
<code>VK_ACCELERATION_STRUCTURE_CREATE_MOTION_BIT_NV</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-sType-sType" href="chap12.html#VUID-VkAccelerationStructureCreateInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_ACCELERATION_STRUCTURE_CREATE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-pNext-pNext" href="chap12.html#VUID-VkAccelerationStructureCreateInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="chap12.html#VkAccelerationStructureMotionInfoNV">VkAccelerationStructureMotionInfoNV</a></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-sType-unique" href="chap12.html#VUID-VkAccelerationStructureCreateInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-createFlags-parameter" href="chap12.html#VUID-VkAccelerationStructureCreateInfoKHR-createFlags-parameter"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-createFlags-parameter</span><br>
 <code>createFlags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap12.html#VkAccelerationStructureCreateFlagBitsKHR">VkAccelerationStructureCreateFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-buffer-parameter" href="chap12.html#VUID-VkAccelerationStructureCreateInfoKHR-buffer-parameter"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-buffer-parameter</span><br>
 <code>buffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureCreateInfoKHR-type-parameter" href="chap12.html#VUID-VkAccelerationStructureCreateInfoKHR-type-parameter"></a> <span class="vuid">VUID-VkAccelerationStructureCreateInfoKHR-type-parameter</span><br>
 <code>type</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkAccelerationStructureTypeKHR">VkAccelerationStructureTypeKHR</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAccelerationStructureMotionInfoNV</code> structure is defined as:</p>
</div>
<div id="VkAccelerationStructureMotionInfoNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing_motion_blur</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkAccelerationStructureMotionInfoNV</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                 <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                    <span class="n">maxInstances</span><span class="p">;</span>
    <span class="n">VkAccelerationStructureMotionInfoFlagsNV</span>    <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkAccelerationStructureMotionInfoNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>maxInstances</code> is the maximum number of instances that <strong class="purple">may</strong> be used
in the motion top-level acceleration structure.</p>
</li>
<li>
<p><code>flags</code> is 0 and reserved for future use.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAccelerationStructureMotionInfoNV-sType-sType" href="chap12.html#VUID-VkAccelerationStructureMotionInfoNV-sType-sType"></a> <span class="vuid">VUID-VkAccelerationStructureMotionInfoNV-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_ACCELERATION_STRUCTURE_MOTION_INFO_NV</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureMotionInfoNV-flags-zerobitmask" href="chap12.html#VUID-VkAccelerationStructureMotionInfoNV-flags-zerobitmask"></a> <span class="vuid">VUID-VkAccelerationStructureMotionInfoNV-flags-zerobitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkAccelerationStructureMotionInfoFlagsNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing_motion_blur</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkAccelerationStructureMotionInfoFlagsNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkAccelerationStructureMotionInfoFlagsNV</code> is a bitmask type for setting
a mask, but is currently reserved for future use.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To get the build sizes for an acceleration structure, call:</p>
</div>
<div id="vkGetAccelerationStructureBuildSizesKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_acceleration_structure</span>
<span class="kt">void</span> <span class="nf">vkGetAccelerationStructureBuildSizesKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkAccelerationStructureBuildTypeKHR</span>         <span class="n">buildType</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAccelerationStructureBuildGeometryInfoKHR</span><span class="o">*</span> <span class="n">pBuildInfo</span><span class="p">,</span>
    <span class="k">const</span> <span class="kt">uint32_t</span><span class="o">*</span>                             <span class="n">pMaxPrimitiveCounts</span><span class="p">,</span>
    <span class="n">VkAccelerationStructureBuildSizesInfoKHR</span><span class="o">*</span>   <span class="n">pSizeInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that will be used for creating the
acceleration structure.</p>
</li>
<li>
<p><code>buildType</code> defines whether host or device operations (or both) are
being queried for.</p>
</li>
<li>
<p><code>pBuildInfo</code> is a pointer to a
<a href="chap36.html#VkAccelerationStructureBuildGeometryInfoKHR">VkAccelerationStructureBuildGeometryInfoKHR</a> structure describing
parameters of a build operation.</p>
</li>
<li>
<p><code>pMaxPrimitiveCounts</code> is a pointer to an array of
<code>pBuildInfo-&gt;geometryCount</code> <code>uint32_t</code> values defining the number
of primitives built into each geometry.</p>
</li>
<li>
<p><code>pSizeInfo</code> is a pointer to a
<a href="chap12.html#VkAccelerationStructureBuildSizesInfoKHR">VkAccelerationStructureBuildSizesInfoKHR</a> structure which returns
the size required for an acceleration structure and the sizes required
for the scratch buffers, given the build parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>srcAccelerationStructure</code>, <code>dstAccelerationStructure</code>, and
<code>mode</code> members of <code>pBuildInfo</code> are ignored.
Any <a href="chap36.html#VkDeviceOrHostAddressKHR">VkDeviceOrHostAddressKHR</a> members of <code>pBuildInfo</code> are ignored
by this command, except that the <code>hostAddress</code> member of
<a href="chap36.html#VkAccelerationStructureGeometryTrianglesDataKHR">VkAccelerationStructureGeometryTrianglesDataKHR</a>::<code>transformData</code>
will be examined to check if it is <code>NULL</code>.</p>
</div>
<div class="paragraph">
<p>An acceleration structure created with the <code>accelerationStructureSize</code>
returned by this command supports any build or update with a
<a href="chap36.html#VkAccelerationStructureBuildGeometryInfoKHR">VkAccelerationStructureBuildGeometryInfoKHR</a> structure and array of
<a href="chap36.html#VkAccelerationStructureBuildRangeInfoKHR">VkAccelerationStructureBuildRangeInfoKHR</a> structures subject to the
following properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The build command is a host build command, and <code>buildType</code> is
<code>VK_ACCELERATION_STRUCTURE_BUILD_TYPE_HOST_KHR</code> or
<code>VK_ACCELERATION_STRUCTURE_BUILD_TYPE_HOST_OR_DEVICE_KHR</code></p>
</li>
<li>
<p>The build command is a device build command, and <code>buildType</code> is
<code>VK_ACCELERATION_STRUCTURE_BUILD_TYPE_DEVICE_KHR</code> or
<code>VK_ACCELERATION_STRUCTURE_BUILD_TYPE_HOST_OR_DEVICE_KHR</code></p>
</li>
<li>
<p>For <a href="chap36.html#VkAccelerationStructureBuildGeometryInfoKHR">VkAccelerationStructureBuildGeometryInfoKHR</a>:</p>
<div class="ulist">
<ul>
<li>
<p>Its <code>type</code>, and <code>flags</code> members are equal to
<code>pBuildInfo-&gt;type</code> and <code>pBuildInfo-&gt;flags</code>, respectively.</p>
</li>
<li>
<p><code>geometryCount</code> is less than or equal to
<code>pBuildInfo-&gt;geometryCount</code>.</p>
</li>
<li>
<p>For each element of either <code>pGeometries</code> or <code>ppGeometries</code> at a
given index, its <code>geometryType</code> member is equal to
<code>pBuildInfo-&gt;geometryType</code>.</p>
</li>
<li>
<p>For each element of either <code>pGeometries</code> or <code>ppGeometries</code> at a
given index, its <code>flags</code> member is equal to the corresponding
member of the same element in <code>pBuildInfo</code>.</p>
</li>
<li>
<p>For each element of either <code>pGeometries</code> or <code>ppGeometries</code> at a
given index, with a <code>geometryType</code> member equal to
<code>VK_GEOMETRY_TYPE_TRIANGLES_KHR</code>, the <code>vertexFormat</code> and
<code>indexType</code> members of <code>geometry.triangles</code> are equal to the
corresponding members of the same element in <code>pBuildInfo</code>.</p>
</li>
<li>
<p>For each element of either <code>pGeometries</code> or <code>ppGeometries</code> at a
given index, with a <code>geometryType</code> member equal to
<code>VK_GEOMETRY_TYPE_TRIANGLES_KHR</code>, the <code>maxVertex</code> member of
<code>geometry.triangles</code> is less than or equal to the corresponding
member of the same element in <code>pBuildInfo</code>.</p>
</li>
<li>
<p>For each element of either <code>pGeometries</code> or <code>ppGeometries</code> at a
given index, with a <code>geometryType</code> member equal to
<code>VK_GEOMETRY_TYPE_TRIANGLES_KHR</code>, if the applicable address in the
<code>transformData</code> member of <code>geometry.triangles</code> is not <code>NULL</code>,
the corresponding <code>transformData.hostAddress</code> parameter in
<code>pBuildInfo</code> is not <code>NULL</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>For each <a href="chap36.html#VkAccelerationStructureBuildRangeInfoKHR">VkAccelerationStructureBuildRangeInfoKHR</a> corresponding to
the <a href="chap36.html#VkAccelerationStructureBuildGeometryInfoKHR">VkAccelerationStructureBuildGeometryInfoKHR</a>:</p>
<div class="ulist">
<ul>
<li>
<p>Its <code>primitiveCount</code> member is less than or equal to the
corresponding element of <code>pMaxPrimitiveCounts</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Similarly, the <code>updateScratchSize</code> value will support any build command
specifying the <code>VK_BUILD_ACCELERATION_STRUCTURE_MODE_UPDATE_KHR</code>
<code>mode</code> under the above conditions, and the <code>buildScratchSize</code> value
will support any build command specifying the
<code>VK_BUILD_ACCELERATION_STRUCTURE_MODE_BUILD_KHR</code> <code>mode</code> under the
above conditions.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetAccelerationStructureBuildSizesKHR-rayTracingPipeline-03617" href="chap12.html#VUID-vkGetAccelerationStructureBuildSizesKHR-rayTracingPipeline-03617"></a> <span class="vuid">VUID-vkGetAccelerationStructureBuildSizesKHR-rayTracingPipeline-03617</span><br>

The <a href="chap41.html#features-rayTracingPipeline"><code>rayTracingPipeline</code></a> or
<a href="chap41.html#features-rayQuery"><code>rayQuery</code></a> feature <strong class="purple">must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureBuildSizesKHR-device-03618" href="chap12.html#VUID-vkGetAccelerationStructureBuildSizesKHR-device-03618"></a> <span class="vuid">VUID-vkGetAccelerationStructureBuildSizesKHR-device-03618</span><br>

If <code>device</code> was created with multiple physical devices, then the
<a href="chap41.html#features-bufferDeviceAddressMultiDevice"><code>bufferDeviceAddressMultiDevice</code></a> feature <strong class="purple">must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureBuildSizesKHR-pBuildInfo-03619" href="chap12.html#VUID-vkGetAccelerationStructureBuildSizesKHR-pBuildInfo-03619"></a> <span class="vuid">VUID-vkGetAccelerationStructureBuildSizesKHR-pBuildInfo-03619</span><br>

If <code>pBuildInfo-&gt;geometryCount</code> is not <code>0</code>, <code>pMaxPrimitiveCounts</code>
<strong class="purple">must</strong> be a valid pointer to an array of <code>pBuildInfo-&gt;geometryCount</code>
<code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureBuildSizesKHR-pBuildInfo-03785" href="chap12.html#VUID-vkGetAccelerationStructureBuildSizesKHR-pBuildInfo-03785"></a> <span class="vuid">VUID-vkGetAccelerationStructureBuildSizesKHR-pBuildInfo-03785</span><br>

If <code>pBuildInfo-&gt;pGeometries</code> or <code>pBuildInfo-&gt;ppGeometries</code> has a
<code>geometryType</code> of <code>VK_GEOMETRY_TYPE_INSTANCES_KHR</code>, each
<code>pMaxPrimitiveCounts</code>[i] <strong class="purple">must</strong> be less than or equal to
<a href="chap42.html#VkPhysicalDeviceAccelerationStructurePropertiesKHR">VkPhysicalDeviceAccelerationStructurePropertiesKHR</a>::<code>maxInstanceCount</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetAccelerationStructureBuildSizesKHR-device-parameter" href="chap12.html#VUID-vkGetAccelerationStructureBuildSizesKHR-device-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureBuildSizesKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureBuildSizesKHR-buildType-parameter" href="chap12.html#VUID-vkGetAccelerationStructureBuildSizesKHR-buildType-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureBuildSizesKHR-buildType-parameter</span><br>
 <code>buildType</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkAccelerationStructureBuildTypeKHR">VkAccelerationStructureBuildTypeKHR</a> value</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureBuildSizesKHR-pBuildInfo-parameter" href="chap12.html#VUID-vkGetAccelerationStructureBuildSizesKHR-pBuildInfo-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureBuildSizesKHR-pBuildInfo-parameter</span><br>
 <code>pBuildInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap36.html#VkAccelerationStructureBuildGeometryInfoKHR">VkAccelerationStructureBuildGeometryInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureBuildSizesKHR-pMaxPrimitiveCounts-parameter" href="chap12.html#VUID-vkGetAccelerationStructureBuildSizesKHR-pMaxPrimitiveCounts-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureBuildSizesKHR-pMaxPrimitiveCounts-parameter</span><br>
 If <code>pMaxPrimitiveCounts</code> is not <code>NULL</code>, <code>pMaxPrimitiveCounts</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>pBuildInfo-&gt;geometryCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureBuildSizesKHR-pSizeInfo-parameter" href="chap12.html#VUID-vkGetAccelerationStructureBuildSizesKHR-pSizeInfo-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureBuildSizesKHR-pSizeInfo-parameter</span><br>
 <code>pSizeInfo</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkAccelerationStructureBuildSizesInfoKHR">VkAccelerationStructureBuildSizesInfoKHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAccelerationStructureBuildSizesInfoKHR</code> structure describes the
required build sizes for an acceleration structure and scratch buffers and
is defined as:</p>
</div>
<div id="VkAccelerationStructureBuildSizesInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_acceleration_structure</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkAccelerationStructureBuildSizesInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">accelerationStructureSize</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">updateScratchSize</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">buildScratchSize</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkAccelerationStructureBuildSizesInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>accelerationStructureSize</code> is the size in bytes required in a
<a href="chap12.html#VkAccelerationStructureKHR">VkAccelerationStructureKHR</a> for a build or update operation.</p>
</li>
<li>
<p><code>updateScratchSize</code> is the size in bytes required in a scratch
buffer for an update operation.</p>
</li>
<li>
<p><code>buildScratchSize</code> is the size in bytes required in a scratch buffer
for a build operation.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAccelerationStructureBuildSizesInfoKHR-sType-sType" href="chap12.html#VUID-VkAccelerationStructureBuildSizesInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkAccelerationStructureBuildSizesInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_ACCELERATION_STRUCTURE_BUILD_SIZES_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureBuildSizesInfoKHR-pNext-pNext" href="chap12.html#VUID-VkAccelerationStructureBuildSizesInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkAccelerationStructureBuildSizesInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Values which <strong class="purple">can</strong> be set in
<a href="chap12.html#VkAccelerationStructureCreateInfoKHR">VkAccelerationStructureCreateInfoKHR</a>::<code>type</code>
or
<a href="chap12.html#VkAccelerationStructureInfoNV">VkAccelerationStructureInfoNV</a>::<code>type</code>
specifying the type of acceleration structure, are:</p>
</div>
<div id="VkAccelerationStructureTypeKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_acceleration_structure</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkAccelerationStructureTypeKHR</span> <span class="p">{</span>
    <span class="n">VK_ACCELERATION_STRUCTURE_TYPE_TOP_LEVEL_KHR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_ACCELERATION_STRUCTURE_TYPE_BOTTOM_LEVEL_KHR</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">VK_ACCELERATION_STRUCTURE_TYPE_GENERIC_KHR</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="c1">// Provided by VK_NV_ray_tracing</span>
    <span class="n">VK_ACCELERATION_STRUCTURE_TYPE_TOP_LEVEL_NV</span> <span class="o">=</span> <span class="n">VK_ACCELERATION_STRUCTURE_TYPE_TOP_LEVEL_KHR</span><span class="p">,</span>
  <span class="c1">// Provided by VK_NV_ray_tracing</span>
    <span class="n">VK_ACCELERATION_STRUCTURE_TYPE_BOTTOM_LEVEL_NV</span> <span class="o">=</span> <span class="n">VK_ACCELERATION_STRUCTURE_TYPE_BOTTOM_LEVEL_KHR</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkAccelerationStructureTypeKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkAccelerationStructureTypeNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing</span>
<span class="k">typedef</span> <span class="n">VkAccelerationStructureTypeKHR</span> <span class="n">VkAccelerationStructureTypeNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_ACCELERATION_STRUCTURE_TYPE_TOP_LEVEL_KHR</code> is a top-level
acceleration structure containing instance data referring to
bottom-level acceleration structures.</p>
</li>
<li>
<p><code>VK_ACCELERATION_STRUCTURE_TYPE_BOTTOM_LEVEL_KHR</code> is a bottom-level
acceleration structure containing the AABBs or geometry to be
intersected.</p>
</li>
<li>
<p><code>VK_ACCELERATION_STRUCTURE_TYPE_GENERIC_KHR</code> is an acceleration
structure whose type is determined at build time used for special
circumstances.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in
<a href="chap12.html#VkAccelerationStructureCreateInfoKHR">VkAccelerationStructureCreateInfoKHR</a>::<code>createFlags</code>, specifying
additional creation parameters for acceleration structures, are:</p>
</div>
<div id="VkAccelerationStructureCreateFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_acceleration_structure</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkAccelerationStructureCreateFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_ACCELERATION_STRUCTURE_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
  <span class="c1">// Provided by VK_NV_ray_tracing_motion_blur</span>
    <span class="n">VK_ACCELERATION_STRUCTURE_CREATE_MOTION_BIT_NV</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkAccelerationStructureCreateFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_ACCELERATION_STRUCTURE_CREATE_DEVICE_ADDRESS_CAPTURE_REPLAY_BIT_KHR</code>
specifies that the acceleration structure’s address <strong class="purple">can</strong> be saved and
reused on a subsequent run.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkAccelerationStructureCreateFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_acceleration_structure</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkAccelerationStructureCreateFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkAccelerationStructureCreateFlagsKHR</code> is a bitmask type for setting a
mask of zero or more <a href="chap12.html#VkAccelerationStructureCreateFlagBitsKHR">VkAccelerationStructureCreateFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in
<a href="chap36.html#VkAccelerationStructureBuildGeometryInfoKHR">VkAccelerationStructureBuildGeometryInfoKHR</a>::<code>flags</code>
or
<a href="chap12.html#VkAccelerationStructureInfoNV">VkAccelerationStructureInfoNV</a>::<code>flags</code>
specifying additional parameters for acceleration structure builds, are:</p>
</div>
<div id="VkBuildAccelerationStructureFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_acceleration_structure</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkBuildAccelerationStructureFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_UPDATE_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_COMPACTION_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_BUILD_ACCELERATION_STRUCTURE_PREFER_FAST_TRACE_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
    <span class="n">VK_BUILD_ACCELERATION_STRUCTURE_PREFER_FAST_BUILD_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
    <span class="n">VK_BUILD_ACCELERATION_STRUCTURE_LOW_MEMORY_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000010</span><span class="p">,</span>
  <span class="c1">// Provided by VK_NV_ray_tracing_motion_blur</span>
    <span class="n">VK_BUILD_ACCELERATION_STRUCTURE_MOTION_BIT_NV</span> <span class="o">=</span> <span class="mh">0x00000020</span><span class="p">,</span>
  <span class="c1">// Provided by VK_NV_ray_tracing</span>
    <span class="n">VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_UPDATE_BIT_NV</span> <span class="o">=</span> <span class="n">VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_UPDATE_BIT_KHR</span><span class="p">,</span>
  <span class="c1">// Provided by VK_NV_ray_tracing</span>
    <span class="n">VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_COMPACTION_BIT_NV</span> <span class="o">=</span> <span class="n">VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_COMPACTION_BIT_KHR</span><span class="p">,</span>
  <span class="c1">// Provided by VK_NV_ray_tracing</span>
    <span class="n">VK_BUILD_ACCELERATION_STRUCTURE_PREFER_FAST_TRACE_BIT_NV</span> <span class="o">=</span> <span class="n">VK_BUILD_ACCELERATION_STRUCTURE_PREFER_FAST_TRACE_BIT_KHR</span><span class="p">,</span>
  <span class="c1">// Provided by VK_NV_ray_tracing</span>
    <span class="n">VK_BUILD_ACCELERATION_STRUCTURE_PREFER_FAST_BUILD_BIT_NV</span> <span class="o">=</span> <span class="n">VK_BUILD_ACCELERATION_STRUCTURE_PREFER_FAST_BUILD_BIT_KHR</span><span class="p">,</span>
  <span class="c1">// Provided by VK_NV_ray_tracing</span>
    <span class="n">VK_BUILD_ACCELERATION_STRUCTURE_LOW_MEMORY_BIT_NV</span> <span class="o">=</span> <span class="n">VK_BUILD_ACCELERATION_STRUCTURE_LOW_MEMORY_BIT_KHR</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkBuildAccelerationStructureFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBuildAccelerationStructureFlagBitsNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing</span>
<span class="k">typedef</span> <span class="n">VkBuildAccelerationStructureFlagBitsKHR</span> <span class="n">VkBuildAccelerationStructureFlagBitsNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_UPDATE_BIT_KHR</code> indicates
    that the specified acceleration structure <strong class="purple">can</strong> be updated with
    a <code>mode</code> of <code>VK_BUILD_ACCELERATION_STRUCTURE_MODE_UPDATE_KHR</code> in
    <a href="chap36.html#VkAccelerationStructureBuildGeometryInfoKHR">VkAccelerationStructureBuildGeometryInfoKHR</a>
or
    an <code>update</code> of <code>VK_TRUE</code> in
    <a href="chap36.html#vkCmdBuildAccelerationStructureNV">vkCmdBuildAccelerationStructureNV</a>
    .</p>
</li>
<li>
<p><code>VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_COMPACTION_BIT_KHR</code> indicates
that the specified acceleration structure <strong class="purple">can</strong> act as the source for a
copy acceleration structure command with <code>mode</code> of
<code>VK_COPY_ACCELERATION_STRUCTURE_MODE_COMPACT_KHR</code> to produce a
compacted acceleration structure.</p>
</li>
<li>
<p><code>VK_BUILD_ACCELERATION_STRUCTURE_PREFER_FAST_TRACE_BIT_KHR</code>
indicates that the given acceleration structure build <strong class="purple">should</strong> prioritize
trace performance over build time.</p>
</li>
<li>
<p><code>VK_BUILD_ACCELERATION_STRUCTURE_PREFER_FAST_BUILD_BIT_KHR</code>
indicates that the given acceleration structure build <strong class="purple">should</strong> prioritize
build time over trace performance.</p>
</li>
<li>
<p><code>VK_BUILD_ACCELERATION_STRUCTURE_LOW_MEMORY_BIT_KHR</code> indicates that
this acceleration structure <strong class="purple">should</strong> minimize the size of the scratch
memory and the final result acceleration structure, potentially at the
expense of build time or trace performance.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p><code>VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_UPDATE_BIT_KHR</code> and
<code>VK_BUILD_ACCELERATION_STRUCTURE_ALLOW_COMPACTION_BIT_KHR</code> <strong class="purple">may</strong> take
more time and memory than a normal build, and so <strong class="purple">should</strong> only be used when
those features are needed.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkBuildAccelerationStructureFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_acceleration_structure</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkBuildAccelerationStructureFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBuildAccelerationStructureFlagsNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing</span>
<span class="k">typedef</span> <span class="n">VkBuildAccelerationStructureFlagsKHR</span> <span class="n">VkBuildAccelerationStructureFlagsNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkBuildAccelerationStructureFlagsKHR</code> is a bitmask type for setting a
mask of zero or more <a href="chap12.html#VkBuildAccelerationStructureFlagBitsKHR">VkBuildAccelerationStructureFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkGeometryNV</code> structure describes geometry in a bottom-level
acceleration structure and is defined as:</p>
</div>
<div id="VkGeometryNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkGeometryNV</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>       <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>           <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkGeometryTypeKHR</span>     <span class="n">geometryType</span><span class="p">;</span>
    <span class="n">VkGeometryDataNV</span>      <span class="n">geometry</span><span class="p">;</span>
    <span class="n">VkGeometryFlagsKHR</span>    <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkGeometryNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>geometryType</code> specifies the <a href="chap12.html#VkGeometryTypeKHR">VkGeometryTypeKHR</a> which this
geometry refers to.</p>
</li>
<li>
<p><code>geometry</code> contains the geometry data as described in
<a href="chap12.html#VkGeometryDataNV">VkGeometryDataNV</a>.</p>
</li>
<li>
<p><code>flags</code> has <a href="chap12.html#VkGeometryFlagBitsKHR">VkGeometryFlagBitsKHR</a> describing options for this
geometry.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkGeometryNV-geometryType-03503" href="chap12.html#VUID-VkGeometryNV-geometryType-03503"></a> <span class="vuid">VUID-VkGeometryNV-geometryType-03503</span><br>

<code>geometryType</code> <strong class="purple">must</strong> be <code>VK_GEOMETRY_TYPE_TRIANGLES_NV</code> or
<code>VK_GEOMETRY_TYPE_AABBS_NV</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkGeometryNV-sType-sType" href="chap12.html#VUID-VkGeometryNV-sType-sType"></a> <span class="vuid">VUID-VkGeometryNV-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_GEOMETRY_NV</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryNV-pNext-pNext" href="chap12.html#VUID-VkGeometryNV-pNext-pNext"></a> <span class="vuid">VUID-VkGeometryNV-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryNV-geometryType-parameter" href="chap12.html#VUID-VkGeometryNV-geometryType-parameter"></a> <span class="vuid">VUID-VkGeometryNV-geometryType-parameter</span><br>
 <code>geometryType</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkGeometryTypeKHR">VkGeometryTypeKHR</a> value</p>
</li>
<li>
<p><a id="VUID-VkGeometryNV-geometry-parameter" href="chap12.html#VUID-VkGeometryNV-geometry-parameter"></a> <span class="vuid">VUID-VkGeometryNV-geometry-parameter</span><br>
 <code>geometry</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkGeometryDataNV">VkGeometryDataNV</a> structure</p>
</li>
<li>
<p><a id="VUID-VkGeometryNV-flags-parameter" href="chap12.html#VUID-VkGeometryNV-flags-parameter"></a> <span class="vuid">VUID-VkGeometryNV-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap12.html#VkGeometryFlagBitsKHR">VkGeometryFlagBitsKHR</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Geometry types are specified by <a href="chap12.html#VkGeometryTypeKHR">VkGeometryTypeKHR</a>, which takes values:</p>
</div>
<div id="VkGeometryTypeKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_acceleration_structure</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkGeometryTypeKHR</span> <span class="p">{</span>
    <span class="n">VK_GEOMETRY_TYPE_TRIANGLES_KHR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_GEOMETRY_TYPE_AABBS_KHR</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">VK_GEOMETRY_TYPE_INSTANCES_KHR</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="c1">// Provided by VK_NV_ray_tracing</span>
    <span class="n">VK_GEOMETRY_TYPE_TRIANGLES_NV</span> <span class="o">=</span> <span class="n">VK_GEOMETRY_TYPE_TRIANGLES_KHR</span><span class="p">,</span>
  <span class="c1">// Provided by VK_NV_ray_tracing</span>
    <span class="n">VK_GEOMETRY_TYPE_AABBS_NV</span> <span class="o">=</span> <span class="n">VK_GEOMETRY_TYPE_AABBS_KHR</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkGeometryTypeKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkGeometryTypeNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing</span>
<span class="k">typedef</span> <span class="n">VkGeometryTypeKHR</span> <span class="n">VkGeometryTypeNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_GEOMETRY_TYPE_TRIANGLES_KHR</code> specifies a geometry type
consisting of triangles.</p>
</li>
<li>
<p><code>VK_GEOMETRY_TYPE_AABBS_KHR</code> specifies a geometry type consisting of
axis-aligned bounding boxes.</p>
</li>
<li>
<p><code>VK_GEOMETRY_TYPE_INSTANCES_KHR</code> specifies a geometry type
consisting of acceleration structure instances.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits specifying additional parameters for geometries in acceleration
structure builds, are:</p>
</div>
<div id="VkGeometryFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_acceleration_structure</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkGeometryFlagBitsKHR</span> <span class="p">{</span>
    <span class="n">VK_GEOMETRY_OPAQUE_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_GEOMETRY_NO_DUPLICATE_ANY_HIT_INVOCATION_BIT_KHR</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
  <span class="c1">// Provided by VK_NV_ray_tracing</span>
    <span class="n">VK_GEOMETRY_OPAQUE_BIT_NV</span> <span class="o">=</span> <span class="n">VK_GEOMETRY_OPAQUE_BIT_KHR</span><span class="p">,</span>
  <span class="c1">// Provided by VK_NV_ray_tracing</span>
    <span class="n">VK_GEOMETRY_NO_DUPLICATE_ANY_HIT_INVOCATION_BIT_NV</span> <span class="o">=</span> <span class="n">VK_GEOMETRY_NO_DUPLICATE_ANY_HIT_INVOCATION_BIT_KHR</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkGeometryFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkGeometryFlagBitsNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing</span>
<span class="k">typedef</span> <span class="n">VkGeometryFlagBitsKHR</span> <span class="n">VkGeometryFlagBitsNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_GEOMETRY_OPAQUE_BIT_KHR</code> indicates that this geometry does not
invoke the any-hit shaders even if present in a hit group.</p>
</li>
<li>
<p><code>VK_GEOMETRY_NO_DUPLICATE_ANY_HIT_INVOCATION_BIT_KHR</code> indicates that
the implementation <strong class="purple">must</strong> only call the any-hit shader a single time for
each primitive in this geometry.
If this bit is absent an implementation <strong class="purple">may</strong> invoke the any-hit shader
more than once for this geometry.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkGeometryFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_acceleration_structure</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkGeometryFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkGeometryFlagsNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing</span>
<span class="k">typedef</span> <span class="n">VkGeometryFlagsKHR</span> <span class="n">VkGeometryFlagsNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkGeometryFlagsKHR</code> is a bitmask type for setting a mask of zero or
more <a href="chap12.html#VkGeometryFlagBitsKHR">VkGeometryFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkGeometryDataNV</code> structure specifes geometry in a bottom-level
acceleration structure and is defined as:</p>
</div>
<div id="VkGeometryDataNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkGeometryDataNV</span> <span class="p">{</span>
    <span class="n">VkGeometryTrianglesNV</span>    <span class="n">triangles</span><span class="p">;</span>
    <span class="n">VkGeometryAABBNV</span>         <span class="n">aabbs</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkGeometryDataNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>triangles</code> contains triangle data if
<a href="chap12.html#VkGeometryNV">VkGeometryNV</a>::<code>geometryType</code> is
<code>VK_GEOMETRY_TYPE_TRIANGLES_NV</code>.</p>
</li>
<li>
<p><code>aabbs</code> contains axis-aligned bounding box data if
<a href="chap12.html#VkGeometryNV">VkGeometryNV</a>::<code>geometryType</code> is
<code>VK_GEOMETRY_TYPE_AABBS_NV</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkGeometryDataNV-triangles-parameter" href="chap12.html#VUID-VkGeometryDataNV-triangles-parameter"></a> <span class="vuid">VUID-VkGeometryDataNV-triangles-parameter</span><br>
 <code>triangles</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkGeometryTrianglesNV">VkGeometryTrianglesNV</a> structure</p>
</li>
<li>
<p><a id="VUID-VkGeometryDataNV-aabbs-parameter" href="chap12.html#VUID-VkGeometryDataNV-aabbs-parameter"></a> <span class="vuid">VUID-VkGeometryDataNV-aabbs-parameter</span><br>
 <code>aabbs</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkGeometryAABBNV">VkGeometryAABBNV</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkGeometryTrianglesNV</code> structure specifies triangle geometry in a
bottom-level acceleration structure and is defined as:</p>
</div>
<div id="VkGeometryTrianglesNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkGeometryTrianglesNV</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkBuffer</span>           <span class="n">vertexData</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">vertexOffset</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">vertexCount</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">vertexStride</span><span class="p">;</span>
    <span class="n">VkFormat</span>           <span class="n">vertexFormat</span><span class="p">;</span>
    <span class="n">VkBuffer</span>           <span class="n">indexData</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">indexOffset</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">indexCount</span><span class="p">;</span>
    <span class="n">VkIndexType</span>        <span class="n">indexType</span><span class="p">;</span>
    <span class="n">VkBuffer</span>           <span class="n">transformData</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">transformOffset</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkGeometryTrianglesNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>vertexData</code> is the buffer containing vertex data for this geometry.</p>
</li>
<li>
<p><code>vertexOffset</code> is the offset in bytes within <code>vertexData</code>
containing vertex data for this geometry.</p>
</li>
<li>
<p><code>vertexCount</code> is the number of valid vertices.</p>
</li>
<li>
<p><code>vertexStride</code> is the stride in bytes between each vertex.</p>
</li>
<li>
<p><code>vertexFormat</code> is a <a href="chap43.html#VkFormat">VkFormat</a> describing the format of each
vertex element.</p>
</li>
<li>
<p><code>indexData</code> is the buffer containing index data for this geometry.</p>
</li>
<li>
<p><code>indexOffset</code> is the offset in bytes within <code>indexData</code>
containing index data for this geometry.</p>
</li>
<li>
<p><code>indexCount</code> is the number of indices to include in this geometry.</p>
</li>
<li>
<p><code>indexType</code> is a <a href="chap21.html#VkIndexType">VkIndexType</a> describing the format of each
index.</p>
</li>
<li>
<p><code>transformData</code> is an optional buffer containing an
<a href="chap36.html#VkTransformMatrixNV">VkTransformMatrixNV</a> structure defining a transformation to be
applied to this geometry.</p>
</li>
<li>
<p><code>transformOffset</code> is the offset in bytes in <code>transformData</code> of
the transform information described above.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>indexType</code> is <code>VK_INDEX_TYPE_NONE_NV</code>, then this structure
describes a set of triangles determined by <code>vertexCount</code>.
Otherwise, this structure describes a set of indexed triangles determined by
<code>indexCount</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-vertexOffset-02428" href="chap12.html#VUID-VkGeometryTrianglesNV-vertexOffset-02428"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-vertexOffset-02428</span><br>

<code>vertexOffset</code> <strong class="purple">must</strong> be less than the size of <code>vertexData</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-vertexOffset-02429" href="chap12.html#VUID-VkGeometryTrianglesNV-vertexOffset-02429"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-vertexOffset-02429</span><br>

<code>vertexOffset</code> <strong class="purple">must</strong> be a multiple of the component size of
<code>vertexFormat</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-vertexFormat-02430" href="chap12.html#VUID-VkGeometryTrianglesNV-vertexFormat-02430"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-vertexFormat-02430</span><br>

<code>vertexFormat</code> <strong class="purple">must</strong> be one of <code>VK_FORMAT_R32G32B32_SFLOAT</code>,
<code>VK_FORMAT_R32G32_SFLOAT</code>, <code>VK_FORMAT_R16G16B16_SFLOAT</code>,
<code>VK_FORMAT_R16G16_SFLOAT</code>, <code>VK_FORMAT_R16G16_SNORM</code>, or
<code>VK_FORMAT_R16G16B16_SNORM</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-vertexStride-03818" href="chap12.html#VUID-VkGeometryTrianglesNV-vertexStride-03818"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-vertexStride-03818</span><br>

<code>vertexStride</code> <strong class="purple">must</strong> be less than or equal to <span class="eq">2<sup>32</sup>-1</span></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-indexOffset-02431" href="chap12.html#VUID-VkGeometryTrianglesNV-indexOffset-02431"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-indexOffset-02431</span><br>

<code>indexOffset</code> <strong class="purple">must</strong> be less than the size of <code>indexData</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-indexOffset-02432" href="chap12.html#VUID-VkGeometryTrianglesNV-indexOffset-02432"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-indexOffset-02432</span><br>

<code>indexOffset</code> <strong class="purple">must</strong> be a multiple of the element size of
<code>indexType</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-indexType-02433" href="chap12.html#VUID-VkGeometryTrianglesNV-indexType-02433"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-indexType-02433</span><br>

<code>indexType</code> <strong class="purple">must</strong> be <code>VK_INDEX_TYPE_UINT16</code>,
<code>VK_INDEX_TYPE_UINT32</code>, or <code>VK_INDEX_TYPE_NONE_NV</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-indexData-02434" href="chap12.html#VUID-VkGeometryTrianglesNV-indexData-02434"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-indexData-02434</span><br>

<code>indexData</code> <strong class="purple">must</strong> be <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a> if <code>indexType</code> is
<code>VK_INDEX_TYPE_NONE_NV</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-indexData-02435" href="chap12.html#VUID-VkGeometryTrianglesNV-indexData-02435"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-indexData-02435</span><br>

<code>indexData</code> <strong class="purple">must</strong> be a valid <code>VkBuffer</code> handle if
<code>indexType</code> is not <code>VK_INDEX_TYPE_NONE_NV</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-indexCount-02436" href="chap12.html#VUID-VkGeometryTrianglesNV-indexCount-02436"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-indexCount-02436</span><br>

<code>indexCount</code> <strong class="purple">must</strong> be <code>0</code> if <code>indexType</code> is
<code>VK_INDEX_TYPE_NONE_NV</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-transformOffset-02437" href="chap12.html#VUID-VkGeometryTrianglesNV-transformOffset-02437"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-transformOffset-02437</span><br>

<code>transformOffset</code> <strong class="purple">must</strong> be less than the size of <code>transformData</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-transformOffset-02438" href="chap12.html#VUID-VkGeometryTrianglesNV-transformOffset-02438"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-transformOffset-02438</span><br>

<code>transformOffset</code> <strong class="purple">must</strong> be a multiple of <code>16</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-sType-sType" href="chap12.html#VUID-VkGeometryTrianglesNV-sType-sType"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_GEOMETRY_TRIANGLES_NV</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-pNext-pNext" href="chap12.html#VUID-VkGeometryTrianglesNV-pNext-pNext"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-vertexData-parameter" href="chap12.html#VUID-VkGeometryTrianglesNV-vertexData-parameter"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-vertexData-parameter</span><br>
 If <code>vertexData</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>vertexData</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-vertexFormat-parameter" href="chap12.html#VUID-VkGeometryTrianglesNV-vertexFormat-parameter"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-vertexFormat-parameter</span><br>
 <code>vertexFormat</code> <strong class="purple">must</strong> be a valid <a href="chap43.html#VkFormat">VkFormat</a> value</p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-indexData-parameter" href="chap12.html#VUID-VkGeometryTrianglesNV-indexData-parameter"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-indexData-parameter</span><br>
 If <code>indexData</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>indexData</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-indexType-parameter" href="chap12.html#VUID-VkGeometryTrianglesNV-indexType-parameter"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-indexType-parameter</span><br>
 <code>indexType</code> <strong class="purple">must</strong> be a valid <a href="chap21.html#VkIndexType">VkIndexType</a> value</p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-transformData-parameter" href="chap12.html#VUID-VkGeometryTrianglesNV-transformData-parameter"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-transformData-parameter</span><br>
 If <code>transformData</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>transformData</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkGeometryTrianglesNV-commonparent" href="chap12.html#VUID-VkGeometryTrianglesNV-commonparent"></a> <span class="vuid">VUID-VkGeometryTrianglesNV-commonparent</span><br>
 Each of <code>indexData</code>, <code>transformData</code>, and <code>vertexData</code> that are valid handles of non-ignored parameters <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkGeometryAABBNV</code> structure specifies axis-aligned bounding box
geometry in a bottom-level acceleration structure, and is defined as:</p>
</div>
<div id="VkGeometryAABBNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkGeometryAABBNV</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkBuffer</span>           <span class="n">aabbData</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">numAABBs</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">stride</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">offset</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkGeometryAABBNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>aabbData</code> is the buffer containing axis-aligned bounding box data.</p>
</li>
<li>
<p><code>numAABBs</code> is the number of AABBs in this geometry.</p>
</li>
<li>
<p><code>stride</code> is the stride in bytes between AABBs in <code>aabbData</code>.</p>
</li>
<li>
<p><code>offset</code> is the offset in bytes of the first AABB in <code>aabbData</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The AABB data in memory is six 32-bit floats consisting of the minimum x, y,
and z values followed by the maximum x, y, and z values.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkGeometryAABBNV-offset-02439" href="chap12.html#VUID-VkGeometryAABBNV-offset-02439"></a> <span class="vuid">VUID-VkGeometryAABBNV-offset-02439</span><br>

<code>offset</code> <strong class="purple">must</strong> be less than the size of <code>aabbData</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryAABBNV-offset-02440" href="chap12.html#VUID-VkGeometryAABBNV-offset-02440"></a> <span class="vuid">VUID-VkGeometryAABBNV-offset-02440</span><br>

<code>offset</code> <strong class="purple">must</strong> be a multiple of <code>8</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryAABBNV-stride-02441" href="chap12.html#VUID-VkGeometryAABBNV-stride-02441"></a> <span class="vuid">VUID-VkGeometryAABBNV-stride-02441</span><br>

<code>stride</code> <strong class="purple">must</strong> be a multiple of <code>8</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkGeometryAABBNV-sType-sType" href="chap12.html#VUID-VkGeometryAABBNV-sType-sType"></a> <span class="vuid">VUID-VkGeometryAABBNV-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_GEOMETRY_AABB_NV</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryAABBNV-pNext-pNext" href="chap12.html#VUID-VkGeometryAABBNV-pNext-pNext"></a> <span class="vuid">VUID-VkGeometryAABBNV-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkGeometryAABBNV-aabbData-parameter" href="chap12.html#VUID-VkGeometryAABBNV-aabbData-parameter"></a> <span class="vuid">VUID-VkGeometryAABBNV-aabbData-parameter</span><br>
 If <code>aabbData</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>aabbData</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy an acceleration structure, call:</p>
</div>
<div id="vkDestroyAccelerationStructureKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_acceleration_structure</span>
<span class="kt">void</span> <span class="nf">vkDestroyAccelerationStructureKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkAccelerationStructureKHR</span>                  <span class="n">accelerationStructure</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the acceleration
structure.</p>
</li>
<li>
<p><code>accelerationStructure</code> is the acceleration structure to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-02442" href="chap12.html#VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-02442"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-02442</span><br>

All submitted commands that refer to <code>accelerationStructure</code> <strong class="purple">must</strong>
have completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-02443" href="chap12.html#VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-02443"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-02443</span><br>

If <code>VkAllocationCallbacks</code> were provided when
<code>accelerationStructure</code> was created, a compatible set of callbacks
<strong class="purple">must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-02444" href="chap12.html#VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-02444"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-02444</span><br>

If no <code>VkAllocationCallbacks</code> were provided when
<code>accelerationStructure</code> was created, <code>pAllocator</code> <strong class="purple">must</strong> be
<code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureKHR-device-parameter" href="chap12.html#VUID-vkDestroyAccelerationStructureKHR-device-parameter"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-parameter" href="chap12.html#VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-parameter"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-parameter</span><br>
 If <code>accelerationStructure</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>accelerationStructure</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkAccelerationStructureKHR">VkAccelerationStructureKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureKHR-pAllocator-parameter" href="chap12.html#VUID-vkDestroyAccelerationStructureKHR-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureKHR-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-parent" href="chap12.html#VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-parent"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureKHR-accelerationStructure-parent</span><br>
 If <code>accelerationStructure</code> is a valid handle, it <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>accelerationStructure</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy an acceleration structure, call:</p>
</div>
<div id="vkDestroyAccelerationStructureNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing</span>
<span class="kt">void</span> <span class="nf">vkDestroyAccelerationStructureNV</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkAccelerationStructureNV</span>                   <span class="n">accelerationStructure</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the buffer.</p>
</li>
<li>
<p><code>accelerationStructure</code> is the acceleration structure to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureNV-accelerationStructure-03752" href="chap12.html#VUID-vkDestroyAccelerationStructureNV-accelerationStructure-03752"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureNV-accelerationStructure-03752</span><br>

All submitted commands that refer to <code>accelerationStructure</code> <strong class="purple">must</strong>
have completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureNV-accelerationStructure-03753" href="chap12.html#VUID-vkDestroyAccelerationStructureNV-accelerationStructure-03753"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureNV-accelerationStructure-03753</span><br>

If <code>VkAllocationCallbacks</code> were provided when
<code>accelerationStructure</code> was created, a compatible set of callbacks
<strong class="purple">must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureNV-accelerationStructure-03754" href="chap12.html#VUID-vkDestroyAccelerationStructureNV-accelerationStructure-03754"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureNV-accelerationStructure-03754</span><br>

If no <code>VkAllocationCallbacks</code> were provided when
<code>accelerationStructure</code> was created, <code>pAllocator</code> <strong class="purple">must</strong> be
<code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureNV-device-parameter" href="chap12.html#VUID-vkDestroyAccelerationStructureNV-device-parameter"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureNV-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureNV-accelerationStructure-parameter" href="chap12.html#VUID-vkDestroyAccelerationStructureNV-accelerationStructure-parameter"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureNV-accelerationStructure-parameter</span><br>
 If <code>accelerationStructure</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>accelerationStructure</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkAccelerationStructureNV">VkAccelerationStructureNV</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureNV-pAllocator-parameter" href="chap12.html#VUID-vkDestroyAccelerationStructureNV-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureNV-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyAccelerationStructureNV-accelerationStructure-parent" href="chap12.html#VUID-vkDestroyAccelerationStructureNV-accelerationStructure-parent"></a> <span class="vuid">VUID-vkDestroyAccelerationStructureNV-accelerationStructure-parent</span><br>
 If <code>accelerationStructure</code> is a valid handle, it <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>accelerationStructure</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>An acceleration structure has memory requirements for the structure object
itself, scratch space for the build, and scratch space for the update.</p>
</div>
<div class="paragraph">
<p>Scratch space is allocated as a <code>VkBuffer</code>, so for
<code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_BUILD_SCRATCH_NV</code>
and
<code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_UPDATE_SCRATCH_NV</code>
the <code>pMemoryRequirements-&gt;alignment</code> and
<code>pMemoryRequirements-&gt;memoryTypeBits</code> values returned by this call <strong class="purple">must</strong>
be filled with zero, and <strong class="purple">should</strong> be ignored by the application.</p>
</div>
<div class="paragraph">
<p>To query the memory requirements, call:</p>
</div>
<div id="vkGetAccelerationStructureMemoryRequirementsNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing</span>
<span class="kt">void</span> <span class="nf">vkGetAccelerationStructureMemoryRequirementsNV</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAccelerationStructureMemoryRequirementsInfoNV</span><span class="o">*</span> <span class="n">pInfo</span><span class="p">,</span>
    <span class="n">VkMemoryRequirements2KHR</span><span class="o">*</span>                   <span class="n">pMemoryRequirements</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device on which the acceleration structure
was created.</p>
</li>
<li>
<p><code>pInfo</code> is a pointer to a
<a href="chap12.html#VkAccelerationStructureMemoryRequirementsInfoNV">VkAccelerationStructureMemoryRequirementsInfoNV</a> structure
specifying the acceleration structure to get memory requirements for.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a
<a href="chap12.html#VkMemoryRequirements2KHR">VkMemoryRequirements2KHR</a> structure in which the requested
acceleration structure memory requirements are returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetAccelerationStructureMemoryRequirementsNV-device-parameter" href="chap12.html#VUID-vkGetAccelerationStructureMemoryRequirementsNV-device-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureMemoryRequirementsNV-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureMemoryRequirementsNV-pInfo-parameter" href="chap12.html#VUID-vkGetAccelerationStructureMemoryRequirementsNV-pInfo-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureMemoryRequirementsNV-pInfo-parameter</span><br>
 <code>pInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkAccelerationStructureMemoryRequirementsInfoNV">VkAccelerationStructureMemoryRequirementsInfoNV</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureMemoryRequirementsNV-pMemoryRequirements-parameter" href="chap12.html#VUID-vkGetAccelerationStructureMemoryRequirementsNV-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureMemoryRequirementsNV-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkMemoryRequirements2KHR">VkMemoryRequirements2KHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAccelerationStructureMemoryRequirementsInfoNV</code> structure is
defined as:</p>
</div>
<div id="VkAccelerationStructureMemoryRequirementsInfoNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkAccelerationStructureMemoryRequirementsInfoNV</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                                    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkAccelerationStructureMemoryRequirementsTypeNV</span>    <span class="n">type</span><span class="p">;</span>
    <span class="n">VkAccelerationStructureNV</span>                          <span class="n">accelerationStructure</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkAccelerationStructureMemoryRequirementsInfoNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>type</code> selects the type of memory requirement being queried.
<code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_OBJECT_NV</code>
returns the memory requirements for the object itself.
<code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_BUILD_SCRATCH_NV</code>
returns the memory requirements for the scratch memory when doing a
build.
<code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_UPDATE_SCRATCH_NV</code>
returns the memory requirements for the scratch memory when doing an
update.</p>
</li>
<li>
<p><code>accelerationStructure</code> is the acceleration structure to be queried
for memory requirements.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAccelerationStructureMemoryRequirementsInfoNV-sType-sType" href="chap12.html#VUID-VkAccelerationStructureMemoryRequirementsInfoNV-sType-sType"></a> <span class="vuid">VUID-VkAccelerationStructureMemoryRequirementsInfoNV-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_INFO_NV</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureMemoryRequirementsInfoNV-pNext-pNext" href="chap12.html#VUID-VkAccelerationStructureMemoryRequirementsInfoNV-pNext-pNext"></a> <span class="vuid">VUID-VkAccelerationStructureMemoryRequirementsInfoNV-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureMemoryRequirementsInfoNV-type-parameter" href="chap12.html#VUID-VkAccelerationStructureMemoryRequirementsInfoNV-type-parameter"></a> <span class="vuid">VUID-VkAccelerationStructureMemoryRequirementsInfoNV-type-parameter</span><br>
 <code>type</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkAccelerationStructureMemoryRequirementsTypeNV">VkAccelerationStructureMemoryRequirementsTypeNV</a> value</p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureMemoryRequirementsInfoNV-accelerationStructure-parameter" href="chap12.html#VUID-VkAccelerationStructureMemoryRequirementsInfoNV-accelerationStructure-parameter"></a> <span class="vuid">VUID-VkAccelerationStructureMemoryRequirementsInfoNV-accelerationStructure-parameter</span><br>
 <code>accelerationStructure</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkAccelerationStructureNV">VkAccelerationStructureNV</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of <code>type</code> in
<code>VkAccelerationStructureMemoryRequirementsInfoNV</code> are:,</p>
</div>
<div id="VkAccelerationStructureMemoryRequirementsTypeNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkAccelerationStructureMemoryRequirementsTypeNV</span> <span class="p">{</span>
    <span class="n">VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_OBJECT_NV</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_BUILD_SCRATCH_NV</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_UPDATE_SCRATCH_NV</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkAccelerationStructureMemoryRequirementsTypeNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_OBJECT_NV</code>
requests the memory requirement for the <code>VkAccelerationStructureNV</code>
backing store.</p>
</li>
<li>
<p><code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_BUILD_SCRATCH_NV</code>
requests the memory requirement for scratch space during the initial
build.</p>
</li>
<li>
<p><code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_UPDATE_SCRATCH_NV</code>
requests the memory requirement for scratch space during an update.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of <code>buildType</code> in
<a href="chap12.html#vkGetAccelerationStructureBuildSizesKHR">vkGetAccelerationStructureBuildSizesKHR</a> are:</p>
</div>
<div id="VkAccelerationStructureBuildTypeKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_acceleration_structure</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkAccelerationStructureBuildTypeKHR</span> <span class="p">{</span>
    <span class="n">VK_ACCELERATION_STRUCTURE_BUILD_TYPE_HOST_KHR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_ACCELERATION_STRUCTURE_BUILD_TYPE_DEVICE_KHR</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">VK_ACCELERATION_STRUCTURE_BUILD_TYPE_HOST_OR_DEVICE_KHR</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkAccelerationStructureBuildTypeKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_ACCELERATION_STRUCTURE_BUILD_TYPE_HOST_KHR</code> requests the memory
requirement for operations performed by the host.</p>
</li>
<li>
<p><code>VK_ACCELERATION_STRUCTURE_BUILD_TYPE_DEVICE_KHR</code> requests the
memory requirement for operations performed by the device.</p>
</li>
<li>
<p><code>VK_ACCELERATION_STRUCTURE_BUILD_TYPE_HOST_OR_DEVICE_KHR</code> requests
the memory requirement for operations performed by either the host, or
the device.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To attach memory to one or more acceleration structures at a time, call:</p>
</div>
<div id="vkBindAccelerationStructureMemoryNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing</span>
<span class="n">VkResult</span> <span class="nf">vkBindAccelerationStructureMemoryNV</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">bindInfoCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBindAccelerationStructureMemoryInfoNV</span><span class="o">*</span> <span class="n">pBindInfos</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the acceleration structures
and memory.</p>
</li>
<li>
<p><code>bindInfoCount</code> is the number of elements in <code>pBindInfos</code>.</p>
</li>
<li>
<p><code>pBindInfos</code> is a pointer to an array of
<a href="chap12.html#VkBindAccelerationStructureMemoryInfoNV">VkBindAccelerationStructureMemoryInfoNV</a> structures describing
acceleration structures and memory to bind.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindAccelerationStructureMemoryNV-device-parameter" href="chap12.html#VUID-vkBindAccelerationStructureMemoryNV-device-parameter"></a> <span class="vuid">VUID-vkBindAccelerationStructureMemoryNV-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindAccelerationStructureMemoryNV-pBindInfos-parameter" href="chap12.html#VUID-vkBindAccelerationStructureMemoryNV-pBindInfos-parameter"></a> <span class="vuid">VUID-vkBindAccelerationStructureMemoryNV-pBindInfos-parameter</span><br>
 <code>pBindInfos</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>bindInfoCount</code> valid <a href="chap12.html#VkBindAccelerationStructureMemoryInfoNV">VkBindAccelerationStructureMemoryInfoNV</a> structures</p>
</li>
<li>
<p><a id="VUID-vkBindAccelerationStructureMemoryNV-bindInfoCount-arraylength" href="chap12.html#VUID-vkBindAccelerationStructureMemoryNV-bindInfoCount-arraylength"></a> <span class="vuid">VUID-vkBindAccelerationStructureMemoryNV-bindInfoCount-arraylength</span><br>
 <code>bindInfoCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBindAccelerationStructureMemoryInfoNV</code> structure is defined as:</p>
</div>
<div id="VkBindAccelerationStructureMemoryInfoNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBindAccelerationStructureMemoryInfoNV</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>              <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                  <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkAccelerationStructureNV</span>    <span class="n">accelerationStructure</span><span class="p">;</span>
    <span class="n">VkDeviceMemory</span>               <span class="n">memory</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>                 <span class="n">memoryOffset</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                     <span class="n">deviceIndexCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint32_t</span><span class="o">*</span>              <span class="n">pDeviceIndices</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBindAccelerationStructureMemoryInfoNV</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>accelerationStructure</code> is the acceleration structure to be attached
to memory.</p>
</li>
<li>
<p><code>memory</code> is a <code>VkDeviceMemory</code> object describing the device
memory to attach.</p>
</li>
<li>
<p><code>memoryOffset</code> is the start offset of the region of memory that is
to be bound to the acceleration structure.
The number of bytes returned in the
<a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a>::<code>size</code> member in <code>memory</code>, starting
from <code>memoryOffset</code> bytes, will be bound to the specified
acceleration structure.</p>
</li>
<li>
<p><code>deviceIndexCount</code> is the number of elements in
<code>pDeviceIndices</code>.</p>
</li>
<li>
<p><code>pDeviceIndices</code> is a pointer to an array of device indices.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-accelerationStructure-03620" href="chap12.html#VUID-VkBindAccelerationStructureMemoryInfoNV-accelerationStructure-03620"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-accelerationStructure-03620</span><br>

<code>accelerationStructure</code> <strong class="purple">must</strong> not already be backed by a memory
object</p>
</li>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-memoryOffset-03621" href="chap12.html#VUID-VkBindAccelerationStructureMemoryInfoNV-memoryOffset-03621"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-memoryOffset-03621</span><br>

<code>memoryOffset</code> <strong class="purple">must</strong> be less than the size of <code>memory</code></p>
</li>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-memory-03622" href="chap12.html#VUID-VkBindAccelerationStructureMemoryInfoNV-memory-03622"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-memory-03622</span><br>

<code>memory</code> <strong class="purple">must</strong> have been allocated using one of the memory types
allowed in the <code>memoryTypeBits</code> member of the
<a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure returned from a call to
<a href="chap12.html#vkGetAccelerationStructureMemoryRequirementsNV">vkGetAccelerationStructureMemoryRequirementsNV</a> with
<code>accelerationStructure</code> and <code>type</code> of
<code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_OBJECT_NV</code></p>
</li>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-memoryOffset-03623" href="chap12.html#VUID-VkBindAccelerationStructureMemoryInfoNV-memoryOffset-03623"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-memoryOffset-03623</span><br>

<code>memoryOffset</code> <strong class="purple">must</strong> be an integer multiple of the <code>alignment</code>
member of the <a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure returned from a call
to <a href="chap12.html#vkGetAccelerationStructureMemoryRequirementsNV">vkGetAccelerationStructureMemoryRequirementsNV</a> with
<code>accelerationStructure</code> and <code>type</code> of
<code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_OBJECT_NV</code></p>
</li>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-size-03624" href="chap12.html#VUID-VkBindAccelerationStructureMemoryInfoNV-size-03624"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-size-03624</span><br>

The <code>size</code> member of the <code>VkMemoryRequirements</code> structure
returned from a call to
<a href="chap12.html#vkGetAccelerationStructureMemoryRequirementsNV">vkGetAccelerationStructureMemoryRequirementsNV</a> with
<code>accelerationStructure</code> and <code>type</code> of
<code>VK_ACCELERATION_STRUCTURE_MEMORY_REQUIREMENTS_TYPE_OBJECT_NV</code> <strong class="purple">must</strong>
be less than or equal to the size of <code>memory</code> minus
<code>memoryOffset</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-sType-sType" href="chap12.html#VUID-VkBindAccelerationStructureMemoryInfoNV-sType-sType"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BIND_ACCELERATION_STRUCTURE_MEMORY_INFO_NV</code></p>
</li>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-pNext-pNext" href="chap12.html#VUID-VkBindAccelerationStructureMemoryInfoNV-pNext-pNext"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-accelerationStructure-parameter" href="chap12.html#VUID-VkBindAccelerationStructureMemoryInfoNV-accelerationStructure-parameter"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-accelerationStructure-parameter</span><br>
 <code>accelerationStructure</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkAccelerationStructureNV">VkAccelerationStructureNV</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-memory-parameter" href="chap12.html#VUID-VkBindAccelerationStructureMemoryInfoNV-memory-parameter"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-memory-parameter</span><br>
 <code>memory</code> <strong class="purple">must</strong> be a valid <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-pDeviceIndices-parameter" href="chap12.html#VUID-VkBindAccelerationStructureMemoryInfoNV-pDeviceIndices-parameter"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-pDeviceIndices-parameter</span><br>
 If <code>deviceIndexCount</code> is not <code>0</code>, <code>pDeviceIndices</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>deviceIndexCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkBindAccelerationStructureMemoryInfoNV-commonparent" href="chap12.html#VUID-VkBindAccelerationStructureMemoryInfoNV-commonparent"></a> <span class="vuid">VUID-VkBindAccelerationStructureMemoryInfoNV-commonparent</span><br>
 Both of <code>accelerationStructure</code>, and <code>memory</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To allow constructing geometry instances with device code if desired, we
need to be able to query a opaque handle for an acceleration structure.
This handle is a value of 8 bytes.
To get this handle, call:</p>
</div>
<div id="vkGetAccelerationStructureHandleNV" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_NV_ray_tracing</span>
<span class="n">VkResult</span> <span class="nf">vkGetAccelerationStructureHandleNV</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkAccelerationStructureNV</span>                   <span class="n">accelerationStructure</span><span class="p">,</span>
    <span class="kt">size_t</span>                                      <span class="n">dataSize</span><span class="p">,</span>
    <span class="kt">void</span><span class="o">*</span>                                       <span class="n">pData</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the acceleration
structures.</p>
</li>
<li>
<p><code>accelerationStructure</code> is the acceleration structure.</p>
</li>
<li>
<p><code>dataSize</code> is the size in bytes of the buffer pointed to by
<code>pData</code>.</p>
</li>
<li>
<p><code>pData</code> is a pointer to a user-allocated buffer where the results
will be written.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetAccelerationStructureHandleNV-dataSize-02240" href="chap12.html#VUID-vkGetAccelerationStructureHandleNV-dataSize-02240"></a> <span class="vuid">VUID-vkGetAccelerationStructureHandleNV-dataSize-02240</span><br>

<code>dataSize</code> <strong class="purple">must</strong> be large enough to contain the result of the query,
as described above</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureHandleNV-accelerationStructure-02787" href="chap12.html#VUID-vkGetAccelerationStructureHandleNV-accelerationStructure-02787"></a> <span class="vuid">VUID-vkGetAccelerationStructureHandleNV-accelerationStructure-02787</span><br>

<code>accelerationStructure</code> <strong class="purple">must</strong> be bound completely and contiguously
to a single <code>VkDeviceMemory</code> object via
<a href="chap12.html#vkBindAccelerationStructureMemoryNV">vkBindAccelerationStructureMemoryNV</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetAccelerationStructureHandleNV-device-parameter" href="chap12.html#VUID-vkGetAccelerationStructureHandleNV-device-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureHandleNV-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureHandleNV-accelerationStructure-parameter" href="chap12.html#VUID-vkGetAccelerationStructureHandleNV-accelerationStructure-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureHandleNV-accelerationStructure-parameter</span><br>
 <code>accelerationStructure</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkAccelerationStructureNV">VkAccelerationStructureNV</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureHandleNV-pData-parameter" href="chap12.html#VUID-vkGetAccelerationStructureHandleNV-pData-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureHandleNV-pData-parameter</span><br>
 <code>pData</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>dataSize</code> bytes</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureHandleNV-dataSize-arraylength" href="chap12.html#VUID-vkGetAccelerationStructureHandleNV-dataSize-arraylength"></a> <span class="vuid">VUID-vkGetAccelerationStructureHandleNV-dataSize-arraylength</span><br>
 <code>dataSize</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureHandleNV-accelerationStructure-parent" href="chap12.html#VUID-vkGetAccelerationStructureHandleNV-accelerationStructure-parent"></a> <span class="vuid">VUID-vkGetAccelerationStructureHandleNV-accelerationStructure-parent</span><br>
 <code>accelerationStructure</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To query the 64-bit device address for an acceleration structure, call:</p>
</div>
<div id="vkGetAccelerationStructureDeviceAddressKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_acceleration_structure</span>
<span class="n">VkDeviceAddress</span> <span class="nf">vkGetAccelerationStructureDeviceAddressKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAccelerationStructureDeviceAddressInfoKHR</span><span class="o">*</span> <span class="n">pInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that the acceleration structure was
created on.</p>
</li>
<li>
<p><code>pInfo</code> is a pointer to a
<a href="chap12.html#VkAccelerationStructureDeviceAddressInfoKHR">VkAccelerationStructureDeviceAddressInfoKHR</a> structure specifying
the acceleration structure to retrieve an address for.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The 64-bit return value is an address of the acceleration structure, which
can be used for device and shader operations that involve acceleration
structures, such as
ray traversal and
acceleration structure building.</p>
</div>
<div class="paragraph">
<p>If the acceleration structure was created with a non-zero value of
<a href="chap12.html#VkAccelerationStructureCreateInfoKHR">VkAccelerationStructureCreateInfoKHR</a>::<code>deviceAddress</code>, the return
value will be the same address.</p>
</div>
<div class="paragraph">
<p>If the acceleration structure was created with a <code>type</code> of
<code>VK_ACCELERATION_STRUCTURE_TYPE_GENERIC_KHR</code>, the returned address <strong class="purple">must</strong>
be consistent with the relative offset to other acceleration structures with
<code>type</code> <code>VK_ACCELERATION_STRUCTURE_TYPE_GENERIC_KHR</code> allocated with
the same <a href="chap12.html#VkBuffer">VkBuffer</a>.
That is, the difference in returned addresses between the two <strong class="purple">must</strong> be the
same as the difference in offsets provided at acceleration structure
creation.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The acceleration structure device address <strong class="purple">may</strong> be different from the buffer
device address corresponding to the acceleration structure’s start offset in
its storage buffer for acceleration structure types other than
<code>VK_ACCELERATION_STRUCTURE_TYPE_GENERIC_KHR</code>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetAccelerationStructureDeviceAddressKHR-device-03504" href="chap12.html#VUID-vkGetAccelerationStructureDeviceAddressKHR-device-03504"></a> <span class="vuid">VUID-vkGetAccelerationStructureDeviceAddressKHR-device-03504</span><br>

If <code>device</code> was created with multiple physical devices, then the
<a href="chap41.html#features-bufferDeviceAddressMultiDevice"><code>bufferDeviceAddressMultiDevice</code></a> feature <strong class="purple">must</strong> be enabled</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetAccelerationStructureDeviceAddressKHR-device-parameter" href="chap12.html#VUID-vkGetAccelerationStructureDeviceAddressKHR-device-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureDeviceAddressKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetAccelerationStructureDeviceAddressKHR-pInfo-parameter" href="chap12.html#VUID-vkGetAccelerationStructureDeviceAddressKHR-pInfo-parameter"></a> <span class="vuid">VUID-vkGetAccelerationStructureDeviceAddressKHR-pInfo-parameter</span><br>
 <code>pInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkAccelerationStructureDeviceAddressInfoKHR">VkAccelerationStructureDeviceAddressInfoKHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAccelerationStructureDeviceAddressInfoKHR</code> structure is defined
as:</p>
</div>
<div id="VkAccelerationStructureDeviceAddressInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_acceleration_structure</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkAccelerationStructureDeviceAddressInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>               <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                   <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkAccelerationStructureKHR</span>    <span class="n">accelerationStructure</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkAccelerationStructureDeviceAddressInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>accelerationStructure</code> specifies the acceleration structure whose
address is being queried.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAccelerationStructureDeviceAddressInfoKHR-sType-sType" href="chap12.html#VUID-VkAccelerationStructureDeviceAddressInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkAccelerationStructureDeviceAddressInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_ACCELERATION_STRUCTURE_DEVICE_ADDRESS_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureDeviceAddressInfoKHR-pNext-pNext" href="chap12.html#VUID-VkAccelerationStructureDeviceAddressInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkAccelerationStructureDeviceAddressInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkAccelerationStructureDeviceAddressInfoKHR-accelerationStructure-parameter" href="chap12.html#VUID-VkAccelerationStructureDeviceAddressInfoKHR-accelerationStructure-parameter"></a> <span class="vuid">VUID-VkAccelerationStructureDeviceAddressInfoKHR-accelerationStructure-parameter</span><br>
 <code>accelerationStructure</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkAccelerationStructureKHR">VkAccelerationStructureKHR</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-association"><a class="anchor" href="chap12.html#resources-association"></a>12.7. Resource Memory Association</h3>
<div class="paragraph">
<p>Resources are initially created as <em>virtual allocations</em> with no backing
memory.
Device memory is allocated separately (see <a href="chap11.html#memory-device">Device Memory</a>) and then
associated with the resource.
This association is done differently for sparse and non-sparse resources.</p>
</div>
<div class="paragraph">
<p>Resources created with any of the sparse creation flags are considered
sparse resources.
Resources created without these flags are non-sparse.
The details on resource memory association for sparse resources is described
in <a href="chap32.html">Sparse Resources</a>.</p>
</div>
<div class="paragraph">
<p>Non-sparse resources <strong class="purple">must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object before the resource is passed as a parameter to
any of the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>creating image or buffer views</p>
</li>
<li>
<p>updating descriptor sets</p>
</li>
<li>
<p>recording commands in a command buffer</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once bound, the memory binding is immutable for the lifetime of the
resource.</p>
</div>
<div class="paragraph">
<p>In a logical device representing more than one physical device, buffer and
image resources exist on all physical devices but <strong class="purple">can</strong> be bound to memory
differently on each.
Each such replicated resource is an <em>instance</em> of the resource.
For sparse resources, each instance <strong class="purple">can</strong> be bound to memory arbitrarily
differently.
For non-sparse resources, each instance <strong class="purple">can</strong> either be bound to the local or
a peer instance of the memory, or for images <strong class="purple">can</strong> be bound to rectangular
regions from the local and/or peer instances.
When a resource is used in a descriptor set, each physical device interprets
the descriptor according to its own instance’s binding to memory.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>There are no new copy commands to transfer data between physical devices.
Instead, an application <strong class="purple">can</strong> create a resource with a peer mapping and use
it as the source or destination of a transfer command executed by a single
physical device to copy the data from one physical device to another.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for a buffer resource, call:</p>
</div>
<div id="vkGetBufferMemoryRequirements" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkGetBufferMemoryRequirements</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkBuffer</span>                                    <span class="n">buffer</span><span class="p">,</span>
    <span class="n">VkMemoryRequirements</span><span class="o">*</span>                       <span class="n">pMemoryRequirements</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the buffer.</p>
</li>
<li>
<p><code>buffer</code> is the buffer to query.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a <a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a>
structure in which the memory requirements of the buffer object are
returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetBufferMemoryRequirements-device-parameter" href="chap12.html#VUID-vkGetBufferMemoryRequirements-device-parameter"></a> <span class="vuid">VUID-vkGetBufferMemoryRequirements-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetBufferMemoryRequirements-buffer-parameter" href="chap12.html#VUID-vkGetBufferMemoryRequirements-buffer-parameter"></a> <span class="vuid">VUID-vkGetBufferMemoryRequirements-buffer-parameter</span><br>
 <code>buffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetBufferMemoryRequirements-pMemoryRequirements-parameter" href="chap12.html#VUID-vkGetBufferMemoryRequirements-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetBufferMemoryRequirements-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetBufferMemoryRequirements-buffer-parent" href="chap12.html#VUID-vkGetBufferMemoryRequirements-buffer-parent"></a> <span class="vuid">VUID-vkGetBufferMemoryRequirements-buffer-parent</span><br>
 <code>buffer</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for an image resource which is not
created with the <code>VK_IMAGE_CREATE_DISJOINT_BIT</code> flag set, call:</p>
</div>
<div id="vkGetImageMemoryRequirements" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkGetImageMemoryRequirements</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">image</span><span class="p">,</span>
    <span class="n">VkMemoryRequirements</span><span class="o">*</span>                       <span class="n">pMemoryRequirements</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image.</p>
</li>
<li>
<p><code>image</code> is the image to query.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a <a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a>
structure in which the memory requirements of the image object are
returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements-image-01588" href="chap12.html#VUID-vkGetImageMemoryRequirements-image-01588"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements-image-01588</span><br>

<code>image</code> <strong class="purple">must</strong> not have been created with the
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code> flag set</p>
</li>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements-image-04004" href="chap12.html#VUID-vkGetImageMemoryRequirements-image-04004"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements-image-04004</span><br>

If <code>image</code> was created with the
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_ANDROID_HARDWARE_BUFFER_BIT_ANDROID</code>
external memory handle type, then <code>image</code> <strong class="purple">must</strong> be bound to memory</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements-device-parameter" href="chap12.html#VUID-vkGetImageMemoryRequirements-device-parameter"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements-image-parameter" href="chap12.html#VUID-vkGetImageMemoryRequirements-image-parameter"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements-image-parameter</span><br>
 <code>image</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements-pMemoryRequirements-parameter" href="chap12.html#VUID-vkGetImageMemoryRequirements-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements-image-parent" href="chap12.html#VUID-vkGetImageMemoryRequirements-image-parent"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements-image-parent</span><br>
 <code>image</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkMemoryRequirements</code> structure is defined as:</p>
</div>
<div id="VkMemoryRequirements" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkMemoryRequirements</span> <span class="p">{</span>
    <span class="n">VkDeviceSize</span>    <span class="n">size</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>    <span class="n">alignment</span><span class="p">;</span>
    <span class="kt">uint32_t</span>        <span class="n">memoryTypeBits</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkMemoryRequirements</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>size</code> is the size, in bytes, of the memory allocation <strong class="purple">required</strong> for
the resource.</p>
</li>
<li>
<p><code>alignment</code> is the alignment, in bytes, of the offset within the
allocation <strong class="purple">required</strong> for the resource.</p>
</li>
<li>
<p><code>memoryTypeBits</code> is a bitmask and contains one bit set for every
supported memory type for the resource.
Bit <code>i</code> is set if and only if the memory type <code>i</code> in the
<code>VkPhysicalDeviceMemoryProperties</code> structure for the physical device
is supported for the resource.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>The precise size of images that will be bound to external Android hardware
buffer memory is unknown until the memory has been imported or allocated, so
applications <strong class="purple">must</strong> not call <a href="chap12.html#vkGetImageMemoryRequirements">vkGetImageMemoryRequirements</a> or
<a href="chap12.html#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> with such an <a href="chap12.html#VkImage">VkImage</a> before it has
been bound to memory.
For this reason, applications also <strong class="purple">must</strong> not call
<a href="chap12.html#vkGetDeviceImageMemoryRequirementsKHR">vkGetDeviceImageMemoryRequirementsKHR</a> with a <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>
describing an external Android hardware buffer.
When importing Android hardware buffer memory, the <code>allocationSize</code> <strong class="purple">can</strong>
be determined by calling <a href="chap11.html#vkGetAndroidHardwareBufferPropertiesANDROID">vkGetAndroidHardwareBufferPropertiesANDROID</a>.
When allocating new memory for a <a href="chap12.html#VkImage">VkImage</a> that <strong class="purple">can</strong> be exported to an
Android hardware buffer, the memory’s <code>allocationSize</code> <strong class="purple">must</strong> be zero;
the actual size will be determined by the dedicated image’s parameters.
After the memory has been allocated, the amount of space allocated from the
memory’s heap <strong class="purple">can</strong> be obtained by getting the image’s memory requirements or
by calling <a href="chap11.html#vkGetAndroidHardwareBufferPropertiesANDROID">vkGetAndroidHardwareBufferPropertiesANDROID</a> with the
Android hardware buffer exported from the memory.</p>
</div>
<div class="paragraph">
<p>When allocating new memory for a <a href="chap12.html#VkBuffer">VkBuffer</a> that <strong class="purple">can</strong> be exported to an
Android hardware buffer an application <strong class="purple">may</strong> still call
<a href="chap12.html#vkGetBufferMemoryRequirements">vkGetBufferMemoryRequirements</a> or <a href="chap12.html#vkGetBufferMemoryRequirements2">vkGetBufferMemoryRequirements2</a>
with <a href="chap12.html#VkBuffer">VkBuffer</a> before it has been bound to memory.</p>
</div>
<div class="paragraph">
<p>If the resource being queried was created with the
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_D3D11_TEXTURE_BIT</code>,
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_D3D11_TEXTURE_KMT_BIT</code>, or
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_D3D12_RESOURCE_BIT</code> external memory
handle type, the value of <code>size</code> has no meaning and <strong class="purple">should</strong> be ignored.</p>
</div>
<div class="paragraph">
<p>The implementation guarantees certain properties about the memory
requirements returned by
<a href="chap12.html#vkGetBufferMemoryRequirements2">vkGetBufferMemoryRequirements2</a>, <a href="chap12.html#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a>,
<a href="chap12.html#vkGetDeviceBufferMemoryRequirementsKHR">vkGetDeviceBufferMemoryRequirementsKHR</a>,
<a href="chap12.html#vkGetDeviceImageMemoryRequirementsKHR">vkGetDeviceImageMemoryRequirementsKHR</a>,
<a href="chap12.html#vkGetBufferMemoryRequirements">vkGetBufferMemoryRequirements</a> and <a href="chap12.html#vkGetImageMemoryRequirements">vkGetImageMemoryRequirements</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>memoryTypeBits</code> member always contains at least one bit set.</p>
</li>
<li>
<p>If <code>buffer</code> is a <code>VkBuffer</code> not created with the
<code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code> bit set, or if <code>image</code> is
<a href="chap53.html#glossary-linear-resource">linear</a> image, then the <code>memoryTypeBits</code>
member always contains at least one bit set corresponding to a
<code>VkMemoryType</code> with a <code>propertyFlags</code> that has both the
<code>VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT</code> bit and the
<code>VK_MEMORY_PROPERTY_HOST_COHERENT_BIT</code> bit set.
In other words, mappable coherent memory <strong class="purple">can</strong> always be attached to
these objects.</p>
</li>
<li>
<p>If <code>buffer</code> was created with
<a href="chap12.html#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> set to <code>0</code> or
<code>image</code> was created with
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> set to <code>0</code>, the
<code>memoryTypeBits</code> member always contains at least one bit set
corresponding to a <code>VkMemoryType</code> with a <code>propertyFlags</code> that
has the <code>VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT</code> bit set.</p>
</li>
<li>
<p>The <code>memoryTypeBits</code> member is identical for all <code>VkBuffer</code>
objects created with the same value for the <code>flags</code> and <code>usage</code>
members in the <a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a> structure
and the <code>handleTypes</code> member of the
<a href="chap12.html#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a> structure
passed to <a href="chap12.html#vkCreateBuffer">vkCreateBuffer</a>.
Further, if <code>usage1</code> and <code>usage2</code> of type <a href="chap12.html#VkBufferUsageFlags">VkBufferUsageFlags</a>
are such that the bits set in <code>usage2</code> are a subset of the bits set
in <code>usage1</code>, and they have the same
<code>flags</code> and
<a href="chap12.html#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code>,
then the bits set in <code>memoryTypeBits</code> returned for <code>usage1</code> <strong class="purple">must</strong>
be a subset of the bits set in <code>memoryTypeBits</code> returned for
<code>usage2</code>, for all values of <code>flags</code>.</p>
</li>
<li>
<p>The <code>alignment</code> member is a power of two.</p>
</li>
<li>
<p>The <code>alignment</code> member is identical for all <code>VkBuffer</code> objects
created with the same combination of values for the <code>usage</code> and
<code>flags</code> members in the <a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a> structure passed to
<a href="chap12.html#vkCreateBuffer">vkCreateBuffer</a>.</p>
</li>
<li>
<p>If the <a href="chap41.html#features-maintenance4"><code>maintenance4</code></a> feature is enabled,
then the <code>alignment</code> member is identical for all <code>VkImage</code>
objects created with the same combination of values for the <code>flags</code>,
<code>imageType</code>, <code>format</code>, <code>extent</code>, <code>mipLevels</code>,
<code>arrayLayers</code>, <code>samples</code>, <code>tiling</code> and <code>usage</code> members
in the <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> structure passed to <a href="chap12.html#vkCreateImage">vkCreateImage</a>.</p>
</li>
<li>
<p>The <code>alignment</code> member satisfies the buffer descriptor offset
alignment requirements associated with the <code>VkBuffer</code>’s <code>usage</code>:</p>
<div class="ulist">
<ul>
<li>
<p>If <code>usage</code> included <code>VK_BUFFER_USAGE_UNIFORM_TEXEL_BUFFER_BIT</code>
or <code>VK_BUFFER_USAGE_STORAGE_TEXEL_BUFFER_BIT</code>, <code>alignment</code>
<strong class="purple">must</strong> be an integer multiple of
<code>VkPhysicalDeviceLimits</code>::<code>minTexelBufferOffsetAlignment</code>.</p>
</li>
<li>
<p>If <code>usage</code> included <code>VK_BUFFER_USAGE_UNIFORM_BUFFER_BIT</code>,
<code>alignment</code> <strong class="purple">must</strong> be an integer multiple of
<code>VkPhysicalDeviceLimits</code>::<code>minUniformBufferOffsetAlignment</code>.</p>
</li>
<li>
<p>If <code>usage</code> included <code>VK_BUFFER_USAGE_STORAGE_BUFFER_BIT</code>,
<code>alignment</code> <strong class="purple">must</strong> be an integer multiple of
<code>VkPhysicalDeviceLimits</code>::<code>minStorageBufferOffsetAlignment</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>For images created with a color format, the <code>memoryTypeBits</code> member
is identical for all <code>VkImage</code> objects created with the same
combination of values for the <code>tiling</code> member, the
<code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> bit of the <code>flags</code> member,
the <code>VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT</code> bit of the
<code>flags</code> member,
<code>handleTypes</code> member of <a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>,
and the <code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code> of the <code>usage</code>
member in the <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> structure passed to
<a href="chap12.html#vkCreateImage">vkCreateImage</a>.</p>
</li>
<li>
<p>For images created with a depth/stencil format, the <code>memoryTypeBits</code>
member is identical for all <code>VkImage</code> objects created with the same
combination of values for the <code>format</code> member, the <code>tiling</code>
member, the <code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> bit of the
<code>flags</code> member,
the <code>VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT</code> bit of the
<code>flags</code> member,
<code>handleTypes</code> member of <a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>,
and the <code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code> of the <code>usage</code>
member in the <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> structure passed to
<a href="chap12.html#vkCreateImage">vkCreateImage</a>.</p>
</li>
<li>
<p>If the memory requirements are for a <code>VkImage</code>, the
<code>memoryTypeBits</code> member <strong class="purple">must</strong> not refer to a <code>VkMemoryType</code> with
a <code>propertyFlags</code> that has the
<code>VK_MEMORY_PROPERTY_LAZILY_ALLOCATED_BIT</code> bit set if the <code>image</code>
did not have <code>VK_IMAGE_USAGE_TRANSIENT_ATTACHMENT_BIT</code> bit set in
the <code>usage</code> member of the <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> structure passed
to <a href="chap12.html#vkCreateImage">vkCreateImage</a>.</p>
</li>
<li>
<p>If the memory requirements are for a <code>VkBuffer</code>, the
<code>memoryTypeBits</code> member <strong class="purple">must</strong> not refer to a <code>VkMemoryType</code> with
a <code>propertyFlags</code> that has the
<code>VK_MEMORY_PROPERTY_LAZILY_ALLOCATED_BIT</code> bit set.</p>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The implication of this requirement is that lazily allocated memory is
disallowed for buffers in all cases.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</li>
<li>
<p>The <code>size</code> member is identical for all <code>VkBuffer</code> objects
created with the same combination of creation parameters specified in
<a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a> and its <code>pNext</code> chain.</p>
</li>
<li>
<p>The <code>size</code> member is identical for all <code>VkImage</code> objects created
with the same combination of creation parameters specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> and its <code>pNext</code> chain.</p>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>This, however, does not imply that they interpret the contents of the bound
memory identically with each other.
That additional guarantee, however, <strong class="purple">can</strong> be explicitly requested using
<code>VK_IMAGE_CREATE_ALIAS_BIT</code>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</li>
<li>
<p>If the <a href="chap41.html#features-maintenance4"><code>maintenance4</code></a> feature is enabled,
these additional guarantees apply:</p>
<div class="ulist">
<ul>
<li>
<p>For a <code>VkBuffer</code>, the <code>size</code> memory requirement is never
greater than that of another <code>VkBuffer</code> created with a greater or
equal <code>size</code> specified in <a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a>, all other
creation parameters being identical.</p>
</li>
<li>
<p>For a <code>VkBuffer</code>, the <code>size</code> memory requirement is never
greater than the result of aligning
<a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>size</code> with the <code>alignment</code> memory
requirement.</p>
</li>
<li>
<p>For a <a href="chap12.html#VkImage">VkImage</a>, the <code>size</code> memory requirement is never greater
than that of another <a href="chap12.html#VkImage">VkImage</a> created with a greater or equal
value in each of <code>extent.width</code>, <code>extent.height</code>, and
<code>extent.depth</code>; all other creation parameters being identical.</p>
</li>
<li>
<p>The memory requirements returned by
<a href="chap12.html#vkGetDeviceBufferMemoryRequirementsKHR">vkGetDeviceBufferMemoryRequirementsKHR</a> are identical to those that
would be returned by <a href="chap12.html#vkGetBufferMemoryRequirements2">vkGetBufferMemoryRequirements2</a> if it were
called with a <code>VkBuffer</code> created with the same
<a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a> values.</p>
</li>
<li>
<p>The memory requirements returned by
<a href="chap12.html#vkGetDeviceImageMemoryRequirementsKHR">vkGetDeviceImageMemoryRequirementsKHR</a> are identical to those that
would be returned by <a href="chap12.html#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> if it were
called with a <code>VkImage</code> created with the same
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> values.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for a buffer resource, call:</p>
</div>
<div id="vkGetBufferMemoryRequirements2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="kt">void</span> <span class="nf">vkGetBufferMemoryRequirements2</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBufferMemoryRequirementsInfo2</span><span class="o">*</span>      <span class="n">pInfo</span><span class="p">,</span>
    <span class="n">VkMemoryRequirements2</span><span class="o">*</span>                      <span class="n">pMemoryRequirements</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkGetBufferMemoryRequirements2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_get_memory_requirements2</span>
<span class="kt">void</span> <span class="nf">vkGetBufferMemoryRequirements2KHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBufferMemoryRequirementsInfo2</span><span class="o">*</span>      <span class="n">pInfo</span><span class="p">,</span>
    <span class="n">VkMemoryRequirements2</span><span class="o">*</span>                      <span class="n">pMemoryRequirements</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the buffer.</p>
</li>
<li>
<p><code>pInfo</code> is a pointer to a <a href="chap12.html#VkBufferMemoryRequirementsInfo2">VkBufferMemoryRequirementsInfo2</a>
structure containing parameters required for the memory requirements
query.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a <a href="chap12.html#VkMemoryRequirements2">VkMemoryRequirements2</a>
structure in which the memory requirements of the buffer object are
returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetBufferMemoryRequirements2-device-parameter" href="chap12.html#VUID-vkGetBufferMemoryRequirements2-device-parameter"></a> <span class="vuid">VUID-vkGetBufferMemoryRequirements2-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetBufferMemoryRequirements2-pInfo-parameter" href="chap12.html#VUID-vkGetBufferMemoryRequirements2-pInfo-parameter"></a> <span class="vuid">VUID-vkGetBufferMemoryRequirements2-pInfo-parameter</span><br>
 <code>pInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkBufferMemoryRequirementsInfo2">VkBufferMemoryRequirementsInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetBufferMemoryRequirements2-pMemoryRequirements-parameter" href="chap12.html#VUID-vkGetBufferMemoryRequirements2-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetBufferMemoryRequirements2-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkMemoryRequirements2">VkMemoryRequirements2</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for a buffer resource without creating
an object, call:</p>
</div>
<div id="vkGetDeviceBufferMemoryRequirementsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_maintenance4</span>
<span class="kt">void</span> <span class="nf">vkGetDeviceBufferMemoryRequirementsKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkDeviceBufferMemoryRequirements</span><span class="o">*</span>     <span class="n">pInfo</span><span class="p">,</span>
    <span class="n">VkMemoryRequirements2</span><span class="o">*</span>                      <span class="n">pMemoryRequirements</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device intended to own the buffer.</p>
</li>
<li>
<p><code>pInfo</code> is a pointer to a <a href="chap12.html#VkDeviceBufferMemoryRequirements">VkDeviceBufferMemoryRequirements</a>
structure containing parameters required for the memory requirements
query.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a <a href="chap12.html#VkMemoryRequirements2">VkMemoryRequirements2</a>
structure in which the memory requirements of the buffer object are
returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetDeviceBufferMemoryRequirements-device-parameter" href="chap12.html#VUID-vkGetDeviceBufferMemoryRequirements-device-parameter"></a> <span class="vuid">VUID-vkGetDeviceBufferMemoryRequirements-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetDeviceBufferMemoryRequirements-pInfo-parameter" href="chap12.html#VUID-vkGetDeviceBufferMemoryRequirements-pInfo-parameter"></a> <span class="vuid">VUID-vkGetDeviceBufferMemoryRequirements-pInfo-parameter</span><br>
 <code>pInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkDeviceBufferMemoryRequirements">VkDeviceBufferMemoryRequirements</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetDeviceBufferMemoryRequirements-pMemoryRequirements-parameter" href="chap12.html#VUID-vkGetDeviceBufferMemoryRequirements-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetDeviceBufferMemoryRequirements-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkMemoryRequirements2">VkMemoryRequirements2</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferMemoryRequirementsInfo2</code> structure is defined as:</p>
</div>
<div id="VkBufferMemoryRequirementsInfo2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBufferMemoryRequirementsInfo2</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkBuffer</span>           <span class="n">buffer</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBufferMemoryRequirementsInfo2</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBufferMemoryRequirementsInfo2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_get_memory_requirements2</span>
<span class="k">typedef</span> <span class="n">VkBufferMemoryRequirementsInfo2</span> <span class="n">VkBufferMemoryRequirementsInfo2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>buffer</code> is the buffer to query.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferMemoryRequirementsInfo2-sType-sType" href="chap12.html#VUID-VkBufferMemoryRequirementsInfo2-sType-sType"></a> <span class="vuid">VUID-VkBufferMemoryRequirementsInfo2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_MEMORY_REQUIREMENTS_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkBufferMemoryRequirementsInfo2-pNext-pNext" href="chap12.html#VUID-VkBufferMemoryRequirementsInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkBufferMemoryRequirementsInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkBufferMemoryRequirementsInfo2-buffer-parameter" href="chap12.html#VUID-VkBufferMemoryRequirementsInfo2-buffer-parameter"></a> <span class="vuid">VUID-VkBufferMemoryRequirementsInfo2-buffer-parameter</span><br>
 <code>buffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkDeviceBufferMemoryRequirements</code> structure is defined as:</p>
</div>
<div id="VkDeviceBufferMemoryRequirements" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkDeviceBufferMemoryRequirements</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>              <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                  <span class="n">pNext</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkBufferCreateInfo</span><span class="o">*</span>    <span class="n">pCreateInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkDeviceBufferMemoryRequirements</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkDeviceBufferMemoryRequirementsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_maintenance4</span>
<span class="k">typedef</span> <span class="n">VkDeviceBufferMemoryRequirements</span> <span class="n">VkDeviceBufferMemoryRequirementsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a> structure
containing parameters affecting creation of the buffer to query.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDeviceBufferMemoryRequirements-sType-sType" href="chap12.html#VUID-VkDeviceBufferMemoryRequirements-sType-sType"></a> <span class="vuid">VUID-VkDeviceBufferMemoryRequirements-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_DEVICE_BUFFER_MEMORY_REQUIREMENTS</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceBufferMemoryRequirements-pNext-pNext" href="chap12.html#VUID-VkDeviceBufferMemoryRequirements-pNext-pNext"></a> <span class="vuid">VUID-VkDeviceBufferMemoryRequirements-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceBufferMemoryRequirements-pCreateInfo-parameter" href="chap12.html#VUID-VkDeviceBufferMemoryRequirements-pCreateInfo-parameter"></a> <span class="vuid">VUID-VkDeviceBufferMemoryRequirements-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for an image resource, call:</p>
</div>
<div id="vkGetImageMemoryRequirements2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="kt">void</span> <span class="nf">vkGetImageMemoryRequirements2</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkImageMemoryRequirementsInfo2</span><span class="o">*</span>       <span class="n">pInfo</span><span class="p">,</span>
    <span class="n">VkMemoryRequirements2</span><span class="o">*</span>                      <span class="n">pMemoryRequirements</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkGetImageMemoryRequirements2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_get_memory_requirements2</span>
<span class="kt">void</span> <span class="nf">vkGetImageMemoryRequirements2KHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkImageMemoryRequirementsInfo2</span><span class="o">*</span>       <span class="n">pInfo</span><span class="p">,</span>
    <span class="n">VkMemoryRequirements2</span><span class="o">*</span>                      <span class="n">pMemoryRequirements</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image.</p>
</li>
<li>
<p><code>pInfo</code> is a pointer to a <a href="chap12.html#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a>
structure containing parameters required for the memory requirements
query.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a <a href="chap12.html#VkMemoryRequirements2">VkMemoryRequirements2</a>
structure in which the memory requirements of the image object are
returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements2-device-parameter" href="chap12.html#VUID-vkGetImageMemoryRequirements2-device-parameter"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements2-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements2-pInfo-parameter" href="chap12.html#VUID-vkGetImageMemoryRequirements2-pInfo-parameter"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements2-pInfo-parameter</span><br>
 <code>pInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetImageMemoryRequirements2-pMemoryRequirements-parameter" href="chap12.html#VUID-vkGetImageMemoryRequirements2-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetImageMemoryRequirements2-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkMemoryRequirements2">VkMemoryRequirements2</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for an image resource without creating
an object, call:</p>
</div>
<div id="vkGetDeviceImageMemoryRequirementsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_maintenance4</span>
<span class="kt">void</span> <span class="nf">vkGetDeviceImageMemoryRequirementsKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkDeviceImageMemoryRequirements</span><span class="o">*</span>      <span class="n">pInfo</span><span class="p">,</span>
    <span class="n">VkMemoryRequirements2</span><span class="o">*</span>                      <span class="n">pMemoryRequirements</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device intended to own the image.</p>
</li>
<li>
<p><code>pInfo</code> is a pointer to a <a href="chap12.html#VkDeviceImageMemoryRequirements">VkDeviceImageMemoryRequirements</a>
structure containing parameters required for the memory requirements
query.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a <a href="chap12.html#VkMemoryRequirements2">VkMemoryRequirements2</a>
structure in which the memory requirements of the image object are
returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetDeviceImageMemoryRequirements-device-parameter" href="chap12.html#VUID-vkGetDeviceImageMemoryRequirements-device-parameter"></a> <span class="vuid">VUID-vkGetDeviceImageMemoryRequirements-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetDeviceImageMemoryRequirements-pInfo-parameter" href="chap12.html#VUID-vkGetDeviceImageMemoryRequirements-pInfo-parameter"></a> <span class="vuid">VUID-vkGetDeviceImageMemoryRequirements-pInfo-parameter</span><br>
 <code>pInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkDeviceImageMemoryRequirements">VkDeviceImageMemoryRequirements</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetDeviceImageMemoryRequirements-pMemoryRequirements-parameter" href="chap12.html#VUID-vkGetDeviceImageMemoryRequirements-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetDeviceImageMemoryRequirements-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkMemoryRequirements2">VkMemoryRequirements2</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageMemoryRequirementsInfo2</code> structure is defined as:</p>
</div>
<div id="VkImageMemoryRequirementsInfo2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageMemoryRequirementsInfo2</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImage</span>            <span class="n">image</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageMemoryRequirementsInfo2</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkImageMemoryRequirementsInfo2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_get_memory_requirements2</span>
<span class="k">typedef</span> <span class="n">VkImageMemoryRequirementsInfo2</span> <span class="n">VkImageMemoryRequirementsInfo2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>image</code> is the image to query.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-image-01589" href="chap12.html#VUID-VkImageMemoryRequirementsInfo2-image-01589"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-image-01589</span><br>

If <code>image</code> was created with a <em>multi-planar</em> format and the
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code> flag, there <strong class="purple">must</strong> be a
<a href="chap12.html#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a> included in the <code>pNext</code>
chain of the <a href="chap12.html#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-image-02279" href="chap12.html#VUID-VkImageMemoryRequirementsInfo2-image-02279"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-image-02279</span><br>

If <code>image</code> was created with <code>VK_IMAGE_CREATE_DISJOINT_BIT</code> and
with <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then there <strong class="purple">must</strong> be
a <a href="chap12.html#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a> included in the <code>pNext</code>
chain of the <a href="chap12.html#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-image-01590" href="chap12.html#VUID-VkImageMemoryRequirementsInfo2-image-01590"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-image-01590</span><br>

If <code>image</code> was not created with the
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code> flag, there <strong class="purple">must</strong> not be a
<a href="chap12.html#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a> included in the <code>pNext</code>
chain of the <a href="chap12.html#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-image-02280" href="chap12.html#VUID-VkImageMemoryRequirementsInfo2-image-02280"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-image-02280</span><br>

If <code>image</code> was created with a single-plane format and with any
<code>tiling</code> other than <code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>,
then there <strong class="purple">must</strong> not be a <a href="chap12.html#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a>
included in the <code>pNext</code> chain of the
<a href="chap12.html#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-image-01897" href="chap12.html#VUID-VkImageMemoryRequirementsInfo2-image-01897"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-image-01897</span><br>

If <code>image</code> was created with the
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_ANDROID_HARDWARE_BUFFER_BIT_ANDROID</code>
external memory handle type, then <code>image</code> <strong class="purple">must</strong> be bound to memory</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-sType-sType" href="chap12.html#VUID-VkImageMemoryRequirementsInfo2-sType-sType"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_MEMORY_REQUIREMENTS_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-pNext-pNext" href="chap12.html#VUID-VkImageMemoryRequirementsInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="chap12.html#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a></p>
</li>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-sType-unique" href="chap12.html#VUID-VkImageMemoryRequirementsInfo2-sType-unique"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkImageMemoryRequirementsInfo2-image-parameter" href="chap12.html#VUID-VkImageMemoryRequirementsInfo2-image-parameter"></a> <span class="vuid">VUID-VkImageMemoryRequirementsInfo2-image-parameter</span><br>
 <code>image</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkDeviceImageMemoryRequirements</code> structure is defined as:</p>
</div>
<div id="VkDeviceImageMemoryRequirements" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkDeviceImageMemoryRequirements</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                 <span class="n">pNext</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkImageCreateInfo</span><span class="o">*</span>    <span class="n">pCreateInfo</span><span class="p">;</span>
    <span class="n">VkImageAspectFlagBits</span>       <span class="n">planeAspect</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkDeviceImageMemoryRequirements</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkDeviceImageMemoryRequirementsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_maintenance4</span>
<span class="k">typedef</span> <span class="n">VkDeviceImageMemoryRequirements</span> <span class="n">VkDeviceImageMemoryRequirementsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> structure
containing parameters affecting creation of the image to query.</p>
</li>
<li>
<p><code>planeAspect</code> is a <a href="chap12.html#VkImageAspectFlagBits">VkImageAspectFlagBits</a> value specifying the
aspect corresponding to the image plane to query.
This parameter is ignored unless
<code>pCreateInfo</code>::<code>tiling</code> is
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, or
<code>pCreateInfo</code>::<code>flags</code> has <code>VK_IMAGE_CREATE_DISJOINT_BIT</code>
set.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirementsKHR-pCreateInfo-06416" href="chap12.html#VUID-VkDeviceImageMemoryRequirementsKHR-pCreateInfo-06416"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirementsKHR-pCreateInfo-06416</span><br>

The <code>pCreateInfo</code>::<code>pNext</code> chain <strong class="purple">must</strong> not contain a
<a href="chap12.html#VkImageSwapchainCreateInfoKHR">VkImageSwapchainCreateInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06776" href="chap12.html#VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06776"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-pCreateInfo-06776</span><br>

The <code>pCreateInfo</code>::<code>pNext</code> chain <strong class="purple">must</strong> not contain a
<a href="chap12.html#VkImageDrmFormatModifierExplicitCreateInfoEXT">VkImageDrmFormatModifierExplicitCreateInfoEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirementsKHR-pCreateInfo-06417" href="chap12.html#VUID-VkDeviceImageMemoryRequirementsKHR-pCreateInfo-06417"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirementsKHR-pCreateInfo-06417</span><br>

If <code>pCreateInfo</code>::<code>format</code> specifies a <em>multi-planar</em> format and
<code>pCreateInfo</code>::<code>flags</code> has <code>VK_IMAGE_CREATE_DISJOINT_BIT</code>
set then <code>planeAspect</code> <strong class="purple">must</strong> not be <code>VK_IMAGE_ASPECT_NONE_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirementsKHR-pCreateInfo-06419" href="chap12.html#VUID-VkDeviceImageMemoryRequirementsKHR-pCreateInfo-06419"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirementsKHR-pCreateInfo-06419</span><br>

If <code>pCreateInfo</code>::<code>flags</code> has <code>VK_IMAGE_CREATE_DISJOINT_BIT</code>
set and if the <code>pCreateInfo</code>::<code>tiling</code> is
<code>VK_IMAGE_TILING_LINEAR</code> or <code>VK_IMAGE_TILING_OPTIMAL</code>, then
<code>planeAspect</code> <strong class="purple">must</strong> be a single valid <em>format plane</em> for the image
(that is, for a two-plane image <code>planeAspect</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code> or <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>,
and for a three-plane image <code>planeAspect</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code> or
<code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>)</p>
</li>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirementsKHR-pCreateInfo-06420" href="chap12.html#VUID-VkDeviceImageMemoryRequirementsKHR-pCreateInfo-06420"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirementsKHR-pCreateInfo-06420</span><br>

If <code>pCreateInfo</code>::<code>tiling</code> is
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then <code>planeAspect</code>
<strong class="purple">must</strong> be a single valid <em>memory plane</em> for the image (that is,
<code>aspectMask</code> <strong class="purple">must</strong> specify a plane index that is less than the
<a href="chap43.html#VkDrmFormatModifierPropertiesEXT">VkDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifierPlaneCount</code>
associated with the image’s <code>format</code> and
<a href="chap12.html#VkImageDrmFormatModifierPropertiesEXT">VkImageDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifier</code>)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-sType-sType" href="chap12.html#VUID-VkDeviceImageMemoryRequirements-sType-sType"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_DEVICE_IMAGE_MEMORY_REQUIREMENTS</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-pNext-pNext" href="chap12.html#VUID-VkDeviceImageMemoryRequirements-pNext-pNext"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-pCreateInfo-parameter" href="chap12.html#VUID-VkDeviceImageMemoryRequirements-pCreateInfo-parameter"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-VkDeviceImageMemoryRequirements-planeAspect-parameter" href="chap12.html#VUID-VkDeviceImageMemoryRequirements-planeAspect-parameter"></a> <span class="vuid">VUID-VkDeviceImageMemoryRequirements-planeAspect-parameter</span><br>
 If <code>planeAspect</code> is not <code>0</code>, <code>planeAspect</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageAspectFlagBits">VkImageAspectFlagBits</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To determine the memory requirements for a plane of a disjoint image, add a
<code>VkImagePlaneMemoryRequirementsInfo</code> structure to the <code>pNext</code> chain
of the <code>VkImageMemoryRequirementsInfo2</code> structure.</p>
</div>
<div class="paragraph">
<p>The <code>VkImagePlaneMemoryRequirementsInfo</code> structure is defined as:</p>
</div>
<div id="VkImagePlaneMemoryRequirementsInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImagePlaneMemoryRequirementsInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>          <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>              <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImageAspectFlagBits</span>    <span class="n">planeAspect</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImagePlaneMemoryRequirementsInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkImagePlaneMemoryRequirementsInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_sampler_ycbcr_conversion</span>
<span class="k">typedef</span> <span class="n">VkImagePlaneMemoryRequirementsInfo</span> <span class="n">VkImagePlaneMemoryRequirementsInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>planeAspect</code> is a <a href="chap12.html#VkImageAspectFlagBits">VkImageAspectFlagBits</a> value specifying the
aspect corresponding to the image plane to query.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-02281" href="chap12.html#VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-02281"></a> <span class="vuid">VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-02281</span><br>

If the image’s <code>tiling</code> is <code>VK_IMAGE_TILING_LINEAR</code> or
<code>VK_IMAGE_TILING_OPTIMAL</code>, then <code>planeAspect</code> <strong class="purple">must</strong> be a single
valid <em>format plane</em> for the image (that is, for a two-plane image
<code>planeAspect</code> <strong class="purple">must</strong> be <code>VK_IMAGE_ASPECT_PLANE_0_BIT</code> or
<code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, and for a three-plane image
<code>planeAspect</code> <strong class="purple">must</strong> be <code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>,
<code>VK_IMAGE_ASPECT_PLANE_1_BIT</code> or <code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>)</p>
</li>
<li>
<p><a id="VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-02282" href="chap12.html#VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-02282"></a> <span class="vuid">VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-02282</span><br>

If the image’s <code>tiling</code> is
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then <code>planeAspect</code>
<strong class="purple">must</strong> be a single valid <em>memory plane</em> for the image (that is,
<code>aspectMask</code> <strong class="purple">must</strong> specify a plane index that is less than the
<a href="chap43.html#VkDrmFormatModifierPropertiesEXT">VkDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifierPlaneCount</code>
associated with the image’s <code>format</code> and
<a href="chap12.html#VkImageDrmFormatModifierPropertiesEXT">VkImageDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifier</code>)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImagePlaneMemoryRequirementsInfo-sType-sType" href="chap12.html#VUID-VkImagePlaneMemoryRequirementsInfo-sType-sType"></a> <span class="vuid">VUID-VkImagePlaneMemoryRequirementsInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_PLANE_MEMORY_REQUIREMENTS_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-parameter" href="chap12.html#VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-parameter"></a> <span class="vuid">VUID-VkImagePlaneMemoryRequirementsInfo-planeAspect-parameter</span><br>
 <code>planeAspect</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageAspectFlagBits">VkImageAspectFlagBits</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkMemoryRequirements2</code> structure is defined as:</p>
</div>
<div id="VkMemoryRequirements2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkMemoryRequirements2</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>         <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                   <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkMemoryRequirements</span>    <span class="n">memoryRequirements</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkMemoryRequirements2</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkMemoryRequirements2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_get_memory_requirements2, VK_NV_ray_tracing</span>
<span class="k">typedef</span> <span class="n">VkMemoryRequirements2</span> <span class="n">VkMemoryRequirements2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>memoryRequirements</code> is a <a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure
describing the memory requirements of the resource.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkMemoryRequirements2-sType-sType" href="chap12.html#VUID-VkMemoryRequirements2-sType-sType"></a> <span class="vuid">VUID-VkMemoryRequirements2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_MEMORY_REQUIREMENTS_2</code></p>
</li>
<li>
<p><a id="VUID-VkMemoryRequirements2-pNext-pNext" href="chap12.html#VUID-VkMemoryRequirements2-pNext-pNext"></a> <span class="vuid">VUID-VkMemoryRequirements2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="chap12.html#VkMemoryDedicatedRequirements">VkMemoryDedicatedRequirements</a></p>
</li>
<li>
<p><a id="VUID-VkMemoryRequirements2-sType-unique" href="chap12.html#VUID-VkMemoryRequirements2-sType-unique"></a> <span class="vuid">VUID-VkMemoryRequirements2-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkMemoryDedicatedRequirements</code> structure is defined as:</p>
</div>
<div id="VkMemoryDedicatedRequirements" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkMemoryDedicatedRequirements</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>              <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkBool32</span>           <span class="n">prefersDedicatedAllocation</span><span class="p">;</span>
    <span class="n">VkBool32</span>           <span class="n">requiresDedicatedAllocation</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkMemoryDedicatedRequirements</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkMemoryDedicatedRequirementsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_dedicated_allocation</span>
<span class="k">typedef</span> <span class="n">VkMemoryDedicatedRequirements</span> <span class="n">VkMemoryDedicatedRequirementsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>prefersDedicatedAllocation</code> specifies that the implementation would
prefer a dedicated allocation for this resource.
The application is still free to suballocate the resource but it <strong class="purple">may</strong>
get better performance if a dedicated allocation is used.</p>
</li>
<li>
<p><code>requiresDedicatedAllocation</code> specifies that a dedicated allocation
is required for this resource.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To determine the dedicated allocation requirements of a buffer or image
resource, add a <a href="chap12.html#VkMemoryDedicatedRequirements">VkMemoryDedicatedRequirements</a> structure to the
<code>pNext</code> chain of the <a href="chap12.html#VkMemoryRequirements2">VkMemoryRequirements2</a> structure passed as the
<code>pMemoryRequirements</code> parameter of <a href="chap12.html#vkGetBufferMemoryRequirements2">vkGetBufferMemoryRequirements2</a>
or <a href="chap12.html#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a>, respectively.</p>
</div>
<div class="paragraph">
<p>Constraints on the values returned for buffer resources are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>requiresDedicatedAllocation</code> <strong class="purple">may</strong> be <code>VK_TRUE</code> if the
<code>pNext</code> chain of <a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a> for the call to
<code>vkCreateBuffer</code> used to create the buffer being queried included a
<a href="chap12.html#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a> structure, and any of the handle
types specified in
<a href="chap12.html#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> requires
dedicated allocation, as reported by
<a href="chap44.html#vkGetPhysicalDeviceExternalBufferProperties">vkGetPhysicalDeviceExternalBufferProperties</a> in
<code>VkExternalBufferProperties</code>::<code>externalMemoryProperties.externalMemoryFeatures</code>.
Otherwise, <code>requiresDedicatedAllocation</code> will be <code>VK_FALSE</code>.</p>
</li>
<li>
<p>When the implementation sets <code>requiresDedicatedAllocation</code> to
<code>VK_TRUE</code>, it <strong class="purple">must</strong> also set <code>prefersDedicatedAllocation</code> to
<code>VK_TRUE</code>.</p>
</li>
<li>
<p>If <code>VK_BUFFER_CREATE_SPARSE_BINDING_BIT</code> was set in
<a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>flags</code> when <code>buffer</code> was created,
then both <code>prefersDedicatedAllocation</code> and
<code>requiresDedicatedAllocation</code> will be <code>VK_FALSE</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Constraints on the values returned for image resources are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>requiresDedicatedAllocation</code> <strong class="purple">may</strong> be <code>VK_TRUE</code> if the
<code>pNext</code> chain of <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> for the call to
<a href="chap12.html#vkCreateImage">vkCreateImage</a> used to create the image being queried included a
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a> structure, and any of the handle
types specified in
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> requires
dedicated allocation, as reported by
<a href="chap44.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a> in
<code>VkExternalImageFormatProperties</code>::<code>externalMemoryProperties.externalMemoryFeatures</code>.
Otherwise, <code>requiresDedicatedAllocation</code> will be <code>VK_FALSE</code>.</p>
</li>
<li>
<p>If <code>VK_IMAGE_CREATE_SPARSE_BINDING_BIT</code> was set in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>flags</code> when <code>image</code> was created, then
both <code>prefersDedicatedAllocation</code> and
<code>requiresDedicatedAllocation</code> will be <code>VK_FALSE</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkMemoryDedicatedRequirements-sType-sType" href="chap12.html#VUID-VkMemoryDedicatedRequirements-sType-sType"></a> <span class="vuid">VUID-VkMemoryDedicatedRequirements-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_MEMORY_DEDICATED_REQUIREMENTS</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To attach memory to a buffer object, call:</p>
</div>
<div id="vkBindBufferMemory" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="n">VkResult</span> <span class="nf">vkBindBufferMemory</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkBuffer</span>                                    <span class="n">buffer</span><span class="p">,</span>
    <span class="n">VkDeviceMemory</span>                              <span class="n">memory</span><span class="p">,</span>
    <span class="n">VkDeviceSize</span>                                <span class="n">memoryOffset</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the buffer and memory.</p>
</li>
<li>
<p><code>buffer</code> is the buffer to be attached to memory.</p>
</li>
<li>
<p><code>memory</code> is a <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> object describing the device
memory to attach.</p>
</li>
<li>
<p><code>memoryOffset</code> is the start offset of the region of <code>memory</code>
which is to be bound to the buffer.
The number of bytes returned in the
<code>VkMemoryRequirements</code>::<code>size</code> member in <code>memory</code>, starting
from <code>memoryOffset</code> bytes, will be bound to the specified buffer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkBindBufferMemory</code> is equivalent to passing the same parameters
through <a href="chap12.html#VkBindBufferMemoryInfo">VkBindBufferMemoryInfo</a> to <a href="chap12.html#vkBindBufferMemory2">vkBindBufferMemory2</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindBufferMemory-buffer-01029" href="chap12.html#VUID-vkBindBufferMemory-buffer-01029"></a> <span class="vuid">VUID-vkBindBufferMemory-buffer-01029</span><br>

<code>buffer</code> <strong class="purple">must</strong> not already be backed by a memory object</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-buffer-01030" href="chap12.html#VUID-vkBindBufferMemory-buffer-01030"></a> <span class="vuid">VUID-vkBindBufferMemory-buffer-01030</span><br>

<code>buffer</code> <strong class="purple">must</strong> not have been created with any sparse memory binding
flags</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memoryOffset-01031" href="chap12.html#VUID-vkBindBufferMemory-memoryOffset-01031"></a> <span class="vuid">VUID-vkBindBufferMemory-memoryOffset-01031</span><br>

<code>memoryOffset</code> <strong class="purple">must</strong> be less than the size of <code>memory</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memory-01035" href="chap12.html#VUID-vkBindBufferMemory-memory-01035"></a> <span class="vuid">VUID-vkBindBufferMemory-memory-01035</span><br>

<code>memory</code> <strong class="purple">must</strong> have been allocated using one of the memory types
allowed in the <code>memoryTypeBits</code> member of the
<code>VkMemoryRequirements</code> structure returned from a call to
<code>vkGetBufferMemoryRequirements</code> with <code>buffer</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memoryOffset-01036" href="chap12.html#VUID-vkBindBufferMemory-memoryOffset-01036"></a> <span class="vuid">VUID-vkBindBufferMemory-memoryOffset-01036</span><br>

<code>memoryOffset</code> <strong class="purple">must</strong> be an integer multiple of the <code>alignment</code>
member of the <code>VkMemoryRequirements</code> structure returned from a call
to <code>vkGetBufferMemoryRequirements</code> with <code>buffer</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-size-01037" href="chap12.html#VUID-vkBindBufferMemory-size-01037"></a> <span class="vuid">VUID-vkBindBufferMemory-size-01037</span><br>

The <code>size</code> member of the <code>VkMemoryRequirements</code> structure
returned from a call to <code>vkGetBufferMemoryRequirements</code> with
<code>buffer</code> <strong class="purple">must</strong> be less than or equal to the size of <code>memory</code>
minus <code>memoryOffset</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-buffer-01444" href="chap12.html#VUID-vkBindBufferMemory-buffer-01444"></a> <span class="vuid">VUID-vkBindBufferMemory-buffer-01444</span><br>

If <code>buffer</code> requires a dedicated allocation (as reported by
<a href="chap12.html#vkGetBufferMemoryRequirements2">vkGetBufferMemoryRequirements2</a> in
<a href="chap12.html#VkMemoryDedicatedRequirements">VkMemoryDedicatedRequirements</a>::<code>requiresDedicatedAllocation</code>
for <code>buffer</code>), <code>memory</code> <strong class="purple">must</strong> have been allocated with
<a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a>::<code>buffer</code> equal to <code>buffer</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memory-01508" href="chap12.html#VUID-vkBindBufferMemory-memory-01508"></a> <span class="vuid">VUID-vkBindBufferMemory-memory-01508</span><br>

If the <code>VkMemoryAllocateInfo</code> provided when <code>memory</code> was
allocated included a <a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a> structure in
its <code>pNext</code> chain, and
<a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a>::<code>buffer</code> was not
<a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, then <code>buffer</code> <strong class="purple">must</strong> equal
<a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a>::<code>buffer</code>, and
<code>memoryOffset</code> <strong class="purple">must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-None-01898" href="chap12.html#VUID-vkBindBufferMemory-None-01898"></a> <span class="vuid">VUID-vkBindBufferMemory-None-01898</span><br>

If <code>buffer</code> was created with the
<code>VK_BUFFER_CREATE_PROTECTED_BIT</code> bit set, the buffer <strong class="purple">must</strong> be bound
to a memory object allocated with a memory type that reports
<code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-None-01899" href="chap12.html#VUID-vkBindBufferMemory-None-01899"></a> <span class="vuid">VUID-vkBindBufferMemory-None-01899</span><br>

If <code>buffer</code> was created with the
<code>VK_BUFFER_CREATE_PROTECTED_BIT</code> bit not set, the buffer <strong class="purple">must</strong> not
be bound to a memory object allocated with a memory type that reports
<code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-buffer-01038" href="chap12.html#VUID-vkBindBufferMemory-buffer-01038"></a> <span class="vuid">VUID-vkBindBufferMemory-buffer-01038</span><br>

If <code>buffer</code> was created with
<a href="chap12.html#VkDedicatedAllocationBufferCreateInfoNV">VkDedicatedAllocationBufferCreateInfoNV</a>::<code>dedicatedAllocation</code>
equal to <code>VK_TRUE</code>, <code>memory</code> <strong class="purple">must</strong> have been allocated with
<a href="chap11.html#VkDedicatedAllocationMemoryAllocateInfoNV">VkDedicatedAllocationMemoryAllocateInfoNV</a>::<code>buffer</code> equal to a
buffer handle created with identical creation parameters to <code>buffer</code>
and <code>memoryOffset</code> <strong class="purple">must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memory-02726" href="chap12.html#VUID-vkBindBufferMemory-memory-02726"></a> <span class="vuid">VUID-vkBindBufferMemory-memory-02726</span><br>

If the value of <a href="chap11.html#VkExportMemoryAllocateInfo">VkExportMemoryAllocateInfo</a>::<code>handleTypes</code> used
to allocate <code>memory</code> is not <code>0</code>, it <strong class="purple">must</strong> include at least one of
the handles set in
<a href="chap12.html#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> when
<code>buffer</code> was created</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memory-02985" href="chap12.html#VUID-vkBindBufferMemory-memory-02985"></a> <span class="vuid">VUID-vkBindBufferMemory-memory-02985</span><br>

If <code>memory</code> was allocated by a memory import operation, that is not
<a href="chap11.html#VkImportAndroidHardwareBufferInfoANDROID">VkImportAndroidHardwareBufferInfoANDROID</a> with a non-<code>NULL</code>
<code>buffer</code> value, the external handle type of the imported memory
<strong class="purple">must</strong> also have been set in
<a href="chap12.html#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> when
<code>buffer</code> was created</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memory-02986" href="chap12.html#VUID-vkBindBufferMemory-memory-02986"></a> <span class="vuid">VUID-vkBindBufferMemory-memory-02986</span><br>

If <code>memory</code> was allocated with the
<a href="chap11.html#VkImportAndroidHardwareBufferInfoANDROID">VkImportAndroidHardwareBufferInfoANDROID</a> memory import operation
with a non-<code>NULL</code> <code>buffer</code> value,
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_ANDROID_HARDWARE_BUFFER_BIT_ANDROID</code>
<strong class="purple">must</strong> also have been set in
<a href="chap12.html#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> when
<code>buffer</code> was created</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-bufferDeviceAddress-03339" href="chap12.html#VUID-vkBindBufferMemory-bufferDeviceAddress-03339"></a> <span class="vuid">VUID-vkBindBufferMemory-bufferDeviceAddress-03339</span><br>

If the
<a href="chap41.html#VkPhysicalDeviceBufferDeviceAddressFeatures">VkPhysicalDeviceBufferDeviceAddressFeatures</a>::<code>bufferDeviceAddress</code>
feature is enabled and <code>buffer</code> was created with the
<code>VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</code> bit set, <code>memory</code>
<strong class="purple">must</strong> have been allocated with the
<code>VK_MEMORY_ALLOCATE_DEVICE_ADDRESS_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-buffer-06408" href="chap12.html#VUID-vkBindBufferMemory-buffer-06408"></a> <span class="vuid">VUID-vkBindBufferMemory-buffer-06408</span><br>

If <code>buffer</code> was created with
<a href="chap12.html#VkBufferCollectionBufferCreateInfoFUCHSIA">VkBufferCollectionBufferCreateInfoFUCHSIA</a> chained to
<a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>pNext</code>, <code>memory</code> <strong class="purple">must</strong> be allocated
with a <a href="chap12.html#VkImportMemoryBufferCollectionFUCHSIA">VkImportMemoryBufferCollectionFUCHSIA</a> chained to
<a href="chap11.html#VkMemoryAllocateInfo">VkMemoryAllocateInfo</a>::<code>pNext</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindBufferMemory-device-parameter" href="chap12.html#VUID-vkBindBufferMemory-device-parameter"></a> <span class="vuid">VUID-vkBindBufferMemory-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-buffer-parameter" href="chap12.html#VUID-vkBindBufferMemory-buffer-parameter"></a> <span class="vuid">VUID-vkBindBufferMemory-buffer-parameter</span><br>
 <code>buffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memory-parameter" href="chap12.html#VUID-vkBindBufferMemory-memory-parameter"></a> <span class="vuid">VUID-vkBindBufferMemory-memory-parameter</span><br>
 <code>memory</code> <strong class="purple">must</strong> be a valid <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-buffer-parent" href="chap12.html#VUID-vkBindBufferMemory-buffer-parent"></a> <span class="vuid">VUID-vkBindBufferMemory-buffer-parent</span><br>
 <code>buffer</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory-memory-parent" href="chap12.html#VUID-vkBindBufferMemory-memory-parent"></a> <span class="vuid">VUID-vkBindBufferMemory-memory-parent</span><br>
 <code>memory</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>buffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INVALID_OPAQUE_CAPTURE_ADDRESS_KHR</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To attach memory to buffer objects for one or more buffers at a time, call:</p>
</div>
<div id="vkBindBufferMemory2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="n">VkResult</span> <span class="nf">vkBindBufferMemory2</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">bindInfoCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBindBufferMemoryInfo</span><span class="o">*</span>               <span class="n">pBindInfos</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkBindBufferMemory2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_bind_memory2</span>
<span class="n">VkResult</span> <span class="nf">vkBindBufferMemory2KHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">bindInfoCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBindBufferMemoryInfo</span><span class="o">*</span>               <span class="n">pBindInfos</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the buffers and memory.</p>
</li>
<li>
<p><code>bindInfoCount</code> is the number of elements in <code>pBindInfos</code>.</p>
</li>
<li>
<p><code>pBindInfos</code> is a pointer to an array of <code>bindInfoCount</code>
<a href="chap12.html#VkBindBufferMemoryInfo">VkBindBufferMemoryInfo</a> structures describing buffers and memory to
bind.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On some implementations, it <strong class="purple">may</strong> be more efficient to batch memory bindings
into a single command.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindBufferMemory2-device-parameter" href="chap12.html#VUID-vkBindBufferMemory2-device-parameter"></a> <span class="vuid">VUID-vkBindBufferMemory2-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory2-pBindInfos-parameter" href="chap12.html#VUID-vkBindBufferMemory2-pBindInfos-parameter"></a> <span class="vuid">VUID-vkBindBufferMemory2-pBindInfos-parameter</span><br>
 <code>pBindInfos</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>bindInfoCount</code> valid <a href="chap12.html#VkBindBufferMemoryInfo">VkBindBufferMemoryInfo</a> structures</p>
</li>
<li>
<p><a id="VUID-vkBindBufferMemory2-bindInfoCount-arraylength" href="chap12.html#VUID-vkBindBufferMemory2-bindInfoCount-arraylength"></a> <span class="vuid">VUID-vkBindBufferMemory2-bindInfoCount-arraylength</span><br>
 <code>bindInfoCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INVALID_OPAQUE_CAPTURE_ADDRESS_KHR</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><code>VkBindBufferMemoryInfo</code> contains members corresponding to the
parameters of <a href="chap12.html#vkBindBufferMemory">vkBindBufferMemory</a>.</p>
</div>
<div class="paragraph">
<p>The <code>VkBindBufferMemoryInfo</code> structure is defined as:</p>
</div>
<div id="VkBindBufferMemoryInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBindBufferMemoryInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkBuffer</span>           <span class="n">buffer</span><span class="p">;</span>
    <span class="n">VkDeviceMemory</span>     <span class="n">memory</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">memoryOffset</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBindBufferMemoryInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBindBufferMemoryInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_bind_memory2</span>
<span class="k">typedef</span> <span class="n">VkBindBufferMemoryInfo</span> <span class="n">VkBindBufferMemoryInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>buffer</code> is the buffer to be attached to memory.</p>
</li>
<li>
<p><code>memory</code> is a <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> object describing the device
memory to attach.</p>
</li>
<li>
<p><code>memoryOffset</code> is the start offset of the region of <code>memory</code>
which is to be bound to the buffer.
The number of bytes returned in the
<code>VkMemoryRequirements</code>::<code>size</code> member in <code>memory</code>, starting
from <code>memoryOffset</code> bytes, will be bound to the specified buffer.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-buffer-01029" href="chap12.html#VUID-VkBindBufferMemoryInfo-buffer-01029"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-buffer-01029</span><br>

<code>buffer</code> <strong class="purple">must</strong> not already be backed by a memory object</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-buffer-01030" href="chap12.html#VUID-VkBindBufferMemoryInfo-buffer-01030"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-buffer-01030</span><br>

<code>buffer</code> <strong class="purple">must</strong> not have been created with any sparse memory binding
flags</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memoryOffset-01031" href="chap12.html#VUID-VkBindBufferMemoryInfo-memoryOffset-01031"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memoryOffset-01031</span><br>

<code>memoryOffset</code> <strong class="purple">must</strong> be less than the size of <code>memory</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memory-01035" href="chap12.html#VUID-VkBindBufferMemoryInfo-memory-01035"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memory-01035</span><br>

<code>memory</code> <strong class="purple">must</strong> have been allocated using one of the memory types
allowed in the <code>memoryTypeBits</code> member of the
<code>VkMemoryRequirements</code> structure returned from a call to
<code>vkGetBufferMemoryRequirements</code> with <code>buffer</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memoryOffset-01036" href="chap12.html#VUID-VkBindBufferMemoryInfo-memoryOffset-01036"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memoryOffset-01036</span><br>

<code>memoryOffset</code> <strong class="purple">must</strong> be an integer multiple of the <code>alignment</code>
member of the <code>VkMemoryRequirements</code> structure returned from a call
to <code>vkGetBufferMemoryRequirements</code> with <code>buffer</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-size-01037" href="chap12.html#VUID-VkBindBufferMemoryInfo-size-01037"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-size-01037</span><br>

The <code>size</code> member of the <code>VkMemoryRequirements</code> structure
returned from a call to <code>vkGetBufferMemoryRequirements</code> with
<code>buffer</code> <strong class="purple">must</strong> be less than or equal to the size of <code>memory</code>
minus <code>memoryOffset</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-buffer-01444" href="chap12.html#VUID-VkBindBufferMemoryInfo-buffer-01444"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-buffer-01444</span><br>

If <code>buffer</code> requires a dedicated allocation (as reported by
<a href="chap12.html#vkGetBufferMemoryRequirements2">vkGetBufferMemoryRequirements2</a> in
<a href="chap12.html#VkMemoryDedicatedRequirements">VkMemoryDedicatedRequirements</a>::<code>requiresDedicatedAllocation</code>
for <code>buffer</code>), <code>memory</code> <strong class="purple">must</strong> have been allocated with
<a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a>::<code>buffer</code> equal to <code>buffer</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memory-01508" href="chap12.html#VUID-VkBindBufferMemoryInfo-memory-01508"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memory-01508</span><br>

If the <code>VkMemoryAllocateInfo</code> provided when <code>memory</code> was
allocated included a <a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a> structure in
its <code>pNext</code> chain, and
<a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a>::<code>buffer</code> was not
<a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, then <code>buffer</code> <strong class="purple">must</strong> equal
<a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a>::<code>buffer</code>, and
<code>memoryOffset</code> <strong class="purple">must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-None-01898" href="chap12.html#VUID-VkBindBufferMemoryInfo-None-01898"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-None-01898</span><br>

If <code>buffer</code> was created with the
<code>VK_BUFFER_CREATE_PROTECTED_BIT</code> bit set, the buffer <strong class="purple">must</strong> be bound
to a memory object allocated with a memory type that reports
<code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-None-01899" href="chap12.html#VUID-VkBindBufferMemoryInfo-None-01899"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-None-01899</span><br>

If <code>buffer</code> was created with the
<code>VK_BUFFER_CREATE_PROTECTED_BIT</code> bit not set, the buffer <strong class="purple">must</strong> not
be bound to a memory object allocated with a memory type that reports
<code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-buffer-01038" href="chap12.html#VUID-VkBindBufferMemoryInfo-buffer-01038"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-buffer-01038</span><br>

If <code>buffer</code> was created with
<a href="chap12.html#VkDedicatedAllocationBufferCreateInfoNV">VkDedicatedAllocationBufferCreateInfoNV</a>::<code>dedicatedAllocation</code>
equal to <code>VK_TRUE</code>, <code>memory</code> <strong class="purple">must</strong> have been allocated with
<a href="chap11.html#VkDedicatedAllocationMemoryAllocateInfoNV">VkDedicatedAllocationMemoryAllocateInfoNV</a>::<code>buffer</code> equal to a
buffer handle created with identical creation parameters to <code>buffer</code>
and <code>memoryOffset</code> <strong class="purple">must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memory-02726" href="chap12.html#VUID-VkBindBufferMemoryInfo-memory-02726"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memory-02726</span><br>

If the value of <a href="chap11.html#VkExportMemoryAllocateInfo">VkExportMemoryAllocateInfo</a>::<code>handleTypes</code> used
to allocate <code>memory</code> is not <code>0</code>, it <strong class="purple">must</strong> include at least one of
the handles set in
<a href="chap12.html#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> when
<code>buffer</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memory-02985" href="chap12.html#VUID-VkBindBufferMemoryInfo-memory-02985"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memory-02985</span><br>

If <code>memory</code> was allocated by a memory import operation, that is not
<a href="chap11.html#VkImportAndroidHardwareBufferInfoANDROID">VkImportAndroidHardwareBufferInfoANDROID</a> with a non-<code>NULL</code>
<code>buffer</code> value, the external handle type of the imported memory
<strong class="purple">must</strong> also have been set in
<a href="chap12.html#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> when
<code>buffer</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memory-02986" href="chap12.html#VUID-VkBindBufferMemoryInfo-memory-02986"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memory-02986</span><br>

If <code>memory</code> was allocated with the
<a href="chap11.html#VkImportAndroidHardwareBufferInfoANDROID">VkImportAndroidHardwareBufferInfoANDROID</a> memory import operation
with a non-<code>NULL</code> <code>buffer</code> value,
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_ANDROID_HARDWARE_BUFFER_BIT_ANDROID</code>
<strong class="purple">must</strong> also have been set in
<a href="chap12.html#VkExternalMemoryBufferCreateInfo">VkExternalMemoryBufferCreateInfo</a>::<code>handleTypes</code> when
<code>buffer</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-bufferDeviceAddress-03339" href="chap12.html#VUID-VkBindBufferMemoryInfo-bufferDeviceAddress-03339"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-bufferDeviceAddress-03339</span><br>

If the
<a href="chap41.html#VkPhysicalDeviceBufferDeviceAddressFeatures">VkPhysicalDeviceBufferDeviceAddressFeatures</a>::<code>bufferDeviceAddress</code>
feature is enabled and <code>buffer</code> was created with the
<code>VK_BUFFER_USAGE_SHADER_DEVICE_ADDRESS_BIT</code> bit set, <code>memory</code>
<strong class="purple">must</strong> have been allocated with the
<code>VK_MEMORY_ALLOCATE_DEVICE_ADDRESS_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-buffer-06408" href="chap12.html#VUID-VkBindBufferMemoryInfo-buffer-06408"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-buffer-06408</span><br>

If <code>buffer</code> was created with
<a href="chap12.html#VkBufferCollectionBufferCreateInfoFUCHSIA">VkBufferCollectionBufferCreateInfoFUCHSIA</a> chained to
<a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a>::<code>pNext</code>, <code>memory</code> <strong class="purple">must</strong> be allocated
with a <a href="chap12.html#VkImportMemoryBufferCollectionFUCHSIA">VkImportMemoryBufferCollectionFUCHSIA</a> chained to
<a href="chap11.html#VkMemoryAllocateInfo">VkMemoryAllocateInfo</a>::<code>pNext</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-pNext-01605" href="chap12.html#VUID-VkBindBufferMemoryInfo-pNext-01605"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-pNext-01605</span><br>

If the <code>pNext</code> chain includes a
<a href="chap12.html#VkBindBufferMemoryDeviceGroupInfo">VkBindBufferMemoryDeviceGroupInfo</a> structure, all instances of
<code>memory</code> specified by
<a href="chap12.html#VkBindBufferMemoryDeviceGroupInfo">VkBindBufferMemoryDeviceGroupInfo</a>::<code>pDeviceIndices</code> <strong class="purple">must</strong> have
been allocated</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-sType-sType" href="chap12.html#VUID-VkBindBufferMemoryInfo-sType-sType"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BIND_BUFFER_MEMORY_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-pNext-pNext" href="chap12.html#VUID-VkBindBufferMemoryInfo-pNext-pNext"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="chap12.html#VkBindBufferMemoryDeviceGroupInfo">VkBindBufferMemoryDeviceGroupInfo</a></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-sType-unique" href="chap12.html#VUID-VkBindBufferMemoryInfo-sType-unique"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-buffer-parameter" href="chap12.html#VUID-VkBindBufferMemoryInfo-buffer-parameter"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-buffer-parameter</span><br>
 <code>buffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-memory-parameter" href="chap12.html#VUID-VkBindBufferMemoryInfo-memory-parameter"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-memory-parameter</span><br>
 <code>memory</code> <strong class="purple">must</strong> be a valid <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryInfo-commonparent" href="chap12.html#VUID-VkBindBufferMemoryInfo-commonparent"></a> <span class="vuid">VUID-VkBindBufferMemoryInfo-commonparent</span><br>
 Both of <code>buffer</code>, and <code>memory</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBindBufferMemoryDeviceGroupInfo</code> structure is defined as:</p>
</div>
<div id="VkBindBufferMemoryDeviceGroupInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBindBufferMemoryDeviceGroupInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">deviceIndexCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint32_t</span><span class="o">*</span>    <span class="n">pDeviceIndices</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBindBufferMemoryDeviceGroupInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBindBufferMemoryDeviceGroupInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_bind_memory2 with VK_KHR_device_group</span>
<span class="k">typedef</span> <span class="n">VkBindBufferMemoryDeviceGroupInfo</span> <span class="n">VkBindBufferMemoryDeviceGroupInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>deviceIndexCount</code> is the number of elements in
<code>pDeviceIndices</code>.</p>
</li>
<li>
<p><code>pDeviceIndices</code> is a pointer to an array of device indices.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="chap12.html#VkBindBufferMemoryInfo">VkBindBufferMemoryInfo</a> includes a
<code>VkBindBufferMemoryDeviceGroupInfo</code> structure, then that structure
determines how memory is bound to buffers across multiple devices in a
device group.</p>
</div>
<div class="paragraph">
<p>If <code>deviceIndexCount</code> is greater than zero, then on device index <span class="eq">i</span>
the buffer is attached to the instance of <code>memory</code> on the physical
device with device index <span class="eq"><code>pDeviceIndices</code>[i]</span>.</p>
</div>
<div class="paragraph">
<p>If <code>deviceIndexCount</code> is zero and <code>memory</code> comes from a memory heap
with the <code>VK_MEMORY_HEAP_MULTI_INSTANCE_BIT</code> bit set, then it is as if
<code>pDeviceIndices</code> contains consecutive indices from zero to the number of
physical devices in the logical device, minus one.
In other words, by default each physical device attaches to its own instance
of <code>memory</code>.</p>
</div>
<div class="paragraph">
<p>If <code>deviceIndexCount</code> is zero and <code>memory</code> comes from a memory heap
without the <code>VK_MEMORY_HEAP_MULTI_INSTANCE_BIT</code> bit set, then it is as
if <code>pDeviceIndices</code> contains an array of zeros.
In other words, by default each physical device attaches to instance zero.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindBufferMemoryDeviceGroupInfo-deviceIndexCount-01606" href="chap12.html#VUID-VkBindBufferMemoryDeviceGroupInfo-deviceIndexCount-01606"></a> <span class="vuid">VUID-VkBindBufferMemoryDeviceGroupInfo-deviceIndexCount-01606</span><br>

<code>deviceIndexCount</code> <strong class="purple">must</strong> either be zero or equal to the number of
physical devices in the logical device</p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryDeviceGroupInfo-pDeviceIndices-01607" href="chap12.html#VUID-VkBindBufferMemoryDeviceGroupInfo-pDeviceIndices-01607"></a> <span class="vuid">VUID-VkBindBufferMemoryDeviceGroupInfo-pDeviceIndices-01607</span><br>

All elements of <code>pDeviceIndices</code> <strong class="purple">must</strong> be valid device indices</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindBufferMemoryDeviceGroupInfo-sType-sType" href="chap12.html#VUID-VkBindBufferMemoryDeviceGroupInfo-sType-sType"></a> <span class="vuid">VUID-VkBindBufferMemoryDeviceGroupInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BIND_BUFFER_MEMORY_DEVICE_GROUP_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBindBufferMemoryDeviceGroupInfo-pDeviceIndices-parameter" href="chap12.html#VUID-VkBindBufferMemoryDeviceGroupInfo-pDeviceIndices-parameter"></a> <span class="vuid">VUID-VkBindBufferMemoryDeviceGroupInfo-pDeviceIndices-parameter</span><br>
 If <code>deviceIndexCount</code> is not <code>0</code>, <code>pDeviceIndices</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>deviceIndexCount</code> <code>uint32_t</code> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To attach memory to a <code>VkImage</code> object created without the
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code> set, call:</p>
</div>
<div id="vkBindImageMemory" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="n">VkResult</span> <span class="nf">vkBindImageMemory</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">image</span><span class="p">,</span>
    <span class="n">VkDeviceMemory</span>                              <span class="n">memory</span><span class="p">,</span>
    <span class="n">VkDeviceSize</span>                                <span class="n">memoryOffset</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the image and memory.</p>
</li>
<li>
<p><code>image</code> is the image.</p>
</li>
<li>
<p><code>memory</code> is the <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> object describing the device
memory to attach.</p>
</li>
<li>
<p><code>memoryOffset</code> is the start offset of the region of <code>memory</code>
which is to be bound to the image.
The number of bytes returned in the
<code>VkMemoryRequirements</code>::<code>size</code> member in <code>memory</code>, starting
from <code>memoryOffset</code> bytes, will be bound to the specified image.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkBindImageMemory</code> is equivalent to passing the same parameters through
<a href="chap12.html#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a> to <a href="chap12.html#vkBindImageMemory2">vkBindImageMemory2</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindImageMemory-image-01044" href="chap12.html#VUID-vkBindImageMemory-image-01044"></a> <span class="vuid">VUID-vkBindImageMemory-image-01044</span><br>

<code>image</code> <strong class="purple">must</strong> not already be backed by a memory object</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-image-01045" href="chap12.html#VUID-vkBindImageMemory-image-01045"></a> <span class="vuid">VUID-vkBindImageMemory-image-01045</span><br>

<code>image</code> <strong class="purple">must</strong> not have been created with any sparse memory binding
flags</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memoryOffset-01046" href="chap12.html#VUID-vkBindImageMemory-memoryOffset-01046"></a> <span class="vuid">VUID-vkBindImageMemory-memoryOffset-01046</span><br>

<code>memoryOffset</code> <strong class="purple">must</strong> be less than the size of <code>memory</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-image-01445" href="chap12.html#VUID-vkBindImageMemory-image-01445"></a> <span class="vuid">VUID-vkBindImageMemory-image-01445</span><br>

If <code>image</code> requires a dedicated allocation (as reported by
<a href="chap12.html#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> in
<a href="chap12.html#VkMemoryDedicatedRequirements">VkMemoryDedicatedRequirements</a>::<code>requiresDedicatedAllocation</code>
for <code>image</code>), <code>memory</code> <strong class="purple">must</strong> have been created with
<a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a>::<code>image</code> equal to <code>image</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-02628" href="chap12.html#VUID-vkBindImageMemory-memory-02628"></a> <span class="vuid">VUID-vkBindImageMemory-memory-02628</span><br>

If the <a href="chap41.html#features-dedicatedAllocationImageAliasing"><code>dedicatedAllocationImageAliasing</code></a> feature is not enabled, and the
<code>VkMemoryAllocateInfo</code> provided when <code>memory</code> was allocated
included a <a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a> structure in its
<code>pNext</code> chain, and <a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a>::<code>image</code>
was not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, then <code>image</code> <strong class="purple">must</strong> equal
<a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a>::<code>image</code> and <code>memoryOffset</code>
<strong class="purple">must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-02629" href="chap12.html#VUID-vkBindImageMemory-memory-02629"></a> <span class="vuid">VUID-vkBindImageMemory-memory-02629</span><br>

If the <a href="chap41.html#features-dedicatedAllocationImageAliasing"><code>dedicatedAllocationImageAliasing</code></a> feature is enabled, and the
<code>VkMemoryAllocateInfo</code> provided when <code>memory</code> was allocated
included a <a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a> structure in its
<code>pNext</code> chain, and <a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a>::<code>image</code>
was not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, then <code>memoryOffset</code> <strong class="purple">must</strong> be zero, and
<code>image</code> <strong class="purple">must</strong> be either equal to
<a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a>::<code>image</code> or an image that was
created using the same parameters in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>, with the
exception that <code>extent</code> and <code>arrayLayers</code> <strong class="purple">may</strong> differ subject to
the following restrictions: every dimension in the <code>extent</code>
parameter of the image being bound <strong class="purple">must</strong> be equal to or smaller than the
original image for which the allocation was created; and the
<code>arrayLayers</code> parameter of the image being bound <strong class="purple">must</strong> be equal to
or smaller than the original image for which the allocation was created</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-None-01901" href="chap12.html#VUID-vkBindImageMemory-None-01901"></a> <span class="vuid">VUID-vkBindImageMemory-None-01901</span><br>

If image was created with the <code>VK_IMAGE_CREATE_PROTECTED_BIT</code> bit
set, the image <strong class="purple">must</strong> be bound to a memory object allocated with a memory
type that reports <code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-None-01902" href="chap12.html#VUID-vkBindImageMemory-None-01902"></a> <span class="vuid">VUID-vkBindImageMemory-None-01902</span><br>

If image was created with the <code>VK_IMAGE_CREATE_PROTECTED_BIT</code> bit
not set, the image <strong class="purple">must</strong> not be bound to a memory object created with a
memory type that reports <code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-image-01050" href="chap12.html#VUID-vkBindImageMemory-image-01050"></a> <span class="vuid">VUID-vkBindImageMemory-image-01050</span><br>

If <code>image</code> was created with
<a href="chap12.html#VkDedicatedAllocationImageCreateInfoNV">VkDedicatedAllocationImageCreateInfoNV</a>::<code>dedicatedAllocation</code>
equal to <code>VK_TRUE</code>, <code>memory</code> <strong class="purple">must</strong> have been created with
<a href="chap11.html#VkDedicatedAllocationMemoryAllocateInfoNV">VkDedicatedAllocationMemoryAllocateInfoNV</a>::<code>image</code> equal to an
image handle created with identical creation parameters to <code>image</code>
and <code>memoryOffset</code> <strong class="purple">must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-02728" href="chap12.html#VUID-vkBindImageMemory-memory-02728"></a> <span class="vuid">VUID-vkBindImageMemory-memory-02728</span><br>

If the value of <a href="chap11.html#VkExportMemoryAllocateInfo">VkExportMemoryAllocateInfo</a>::<code>handleTypes</code> used
to allocate <code>memory</code> is not <code>0</code>, it <strong class="purple">must</strong> include at least one of
the handles set in
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> when
<code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-02989" href="chap12.html#VUID-vkBindImageMemory-memory-02989"></a> <span class="vuid">VUID-vkBindImageMemory-memory-02989</span><br>

If <code>memory</code> was created by a memory import operation, that is not
<a href="chap11.html#VkImportAndroidHardwareBufferInfoANDROID">VkImportAndroidHardwareBufferInfoANDROID</a> with a non-<code>NULL</code>
<code>buffer</code> value, the external handle type of the imported memory
<strong class="purple">must</strong> also have been set in
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> when
<code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-02990" href="chap12.html#VUID-vkBindImageMemory-memory-02990"></a> <span class="vuid">VUID-vkBindImageMemory-memory-02990</span><br>

If <code>memory</code> was created with the
<a href="chap11.html#VkImportAndroidHardwareBufferInfoANDROID">VkImportAndroidHardwareBufferInfoANDROID</a> memory import operation
with a non-<code>NULL</code> <code>buffer</code> value,
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_ANDROID_HARDWARE_BUFFER_BIT_ANDROID</code>
<strong class="purple">must</strong> also have been set in
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> when
<code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-image-01608" href="chap12.html#VUID-vkBindImageMemory-image-01608"></a> <span class="vuid">VUID-vkBindImageMemory-image-01608</span><br>

<code>image</code> <strong class="purple">must</strong> not have been created with the
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code> set</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-01047" href="chap12.html#VUID-vkBindImageMemory-memory-01047"></a> <span class="vuid">VUID-vkBindImageMemory-memory-01047</span><br>

<code>memory</code> <strong class="purple">must</strong> have been allocated using one of the memory types
allowed in the <code>memoryTypeBits</code> member of the
<code>VkMemoryRequirements</code> structure returned from a call to
<a href="chap12.html#vkGetImageMemoryRequirements">vkGetImageMemoryRequirements</a> with <code>image</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memoryOffset-01048" href="chap12.html#VUID-vkBindImageMemory-memoryOffset-01048"></a> <span class="vuid">VUID-vkBindImageMemory-memoryOffset-01048</span><br>

<code>memoryOffset</code> <strong class="purple">must</strong> be an integer multiple of the <code>alignment</code>
member of the <code>VkMemoryRequirements</code> structure returned from a call
to <a href="chap12.html#vkGetImageMemoryRequirements">vkGetImageMemoryRequirements</a> with <code>image</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-size-01049" href="chap12.html#VUID-vkBindImageMemory-size-01049"></a> <span class="vuid">VUID-vkBindImageMemory-size-01049</span><br>

The difference of the size of <code>memory</code> and <code>memoryOffset</code> <strong class="purple">must</strong>
be greater than or equal to the <code>size</code> member of the
<a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure returned from a call to
<a href="chap12.html#vkGetImageMemoryRequirements">vkGetImageMemoryRequirements</a> with the same <code>image</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-image-06392" href="chap12.html#VUID-vkBindImageMemory-image-06392"></a> <span class="vuid">VUID-vkBindImageMemory-image-06392</span><br>

If <code>image</code> was created with
<a href="chap12.html#VkBufferCollectionImageCreateInfoFUCHSIA">VkBufferCollectionImageCreateInfoFUCHSIA</a> chained to
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>pNext</code>, <code>memory</code> <strong class="purple">must</strong> be allocated
with a <a href="chap12.html#VkImportMemoryBufferCollectionFUCHSIA">VkImportMemoryBufferCollectionFUCHSIA</a> chained to
<a href="chap11.html#VkMemoryAllocateInfo">VkMemoryAllocateInfo</a>::<code>pNext</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindImageMemory-device-parameter" href="chap12.html#VUID-vkBindImageMemory-device-parameter"></a> <span class="vuid">VUID-vkBindImageMemory-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-image-parameter" href="chap12.html#VUID-vkBindImageMemory-image-parameter"></a> <span class="vuid">VUID-vkBindImageMemory-image-parameter</span><br>
 <code>image</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-parameter" href="chap12.html#VUID-vkBindImageMemory-memory-parameter"></a> <span class="vuid">VUID-vkBindImageMemory-memory-parameter</span><br>
 <code>memory</code> <strong class="purple">must</strong> be a valid <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-image-parent" href="chap12.html#VUID-vkBindImageMemory-image-parent"></a> <span class="vuid">VUID-vkBindImageMemory-image-parent</span><br>
 <code>image</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory-memory-parent" href="chap12.html#VUID-vkBindImageMemory-memory-parent"></a> <span class="vuid">VUID-vkBindImageMemory-memory-parent</span><br>
 <code>memory</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>image</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To attach memory to image objects for one or more images at a time, call:</p>
</div>
<div id="vkBindImageMemory2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="n">VkResult</span> <span class="nf">vkBindImageMemory2</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">bindInfoCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBindImageMemoryInfo</span><span class="o">*</span>                <span class="n">pBindInfos</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkBindImageMemory2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_bind_memory2</span>
<span class="n">VkResult</span> <span class="nf">vkBindImageMemory2KHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">bindInfoCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBindImageMemoryInfo</span><span class="o">*</span>                <span class="n">pBindInfos</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the images and memory.</p>
</li>
<li>
<p><code>bindInfoCount</code> is the number of elements in <code>pBindInfos</code>.</p>
</li>
<li>
<p><code>pBindInfos</code> is a pointer to an array of <a href="chap12.html#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a>
structures, describing images and memory to bind.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On some implementations, it <strong class="purple">may</strong> be more efficient to batch memory bindings
into a single command.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindImageMemory2-pBindInfos-02858" href="chap12.html#VUID-vkBindImageMemory2-pBindInfos-02858"></a> <span class="vuid">VUID-vkBindImageMemory2-pBindInfos-02858</span><br>

If any <a href="chap12.html#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a>::<code>image</code> was created with
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code> then all planes of
<a href="chap12.html#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a>::<code>image</code> <strong class="purple">must</strong> be bound individually in
separate <code>pBindInfos</code></p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory2-pBindInfos-04006" href="chap12.html#VUID-vkBindImageMemory2-pBindInfos-04006"></a> <span class="vuid">VUID-vkBindImageMemory2-pBindInfos-04006</span><br>

<code>pBindInfos</code> <strong class="purple">must</strong> not refer to the same image subresource more than
once</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindImageMemory2-device-parameter" href="chap12.html#VUID-vkBindImageMemory2-device-parameter"></a> <span class="vuid">VUID-vkBindImageMemory2-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory2-pBindInfos-parameter" href="chap12.html#VUID-vkBindImageMemory2-pBindInfos-parameter"></a> <span class="vuid">VUID-vkBindImageMemory2-pBindInfos-parameter</span><br>
 <code>pBindInfos</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>bindInfoCount</code> valid <a href="chap12.html#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a> structures</p>
</li>
<li>
<p><a id="VUID-vkBindImageMemory2-bindInfoCount-arraylength" href="chap12.html#VUID-vkBindImageMemory2-bindInfoCount-arraylength"></a> <span class="vuid">VUID-vkBindImageMemory2-bindInfoCount-arraylength</span><br>
 <code>bindInfoCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><code>VkBindImageMemoryInfo</code> contains members corresponding to the parameters
of <a href="chap12.html#vkBindImageMemory">vkBindImageMemory</a>.</p>
</div>
<div class="paragraph">
<p>The <code>VkBindImageMemoryInfo</code> structure is defined as:</p>
</div>
<div id="VkBindImageMemoryInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBindImageMemoryInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImage</span>            <span class="n">image</span><span class="p">;</span>
    <span class="n">VkDeviceMemory</span>     <span class="n">memory</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">memoryOffset</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBindImageMemoryInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBindImageMemoryInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_bind_memory2</span>
<span class="k">typedef</span> <span class="n">VkBindImageMemoryInfo</span> <span class="n">VkBindImageMemoryInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>image</code> is the image to be attached to memory.</p>
</li>
<li>
<p><code>memory</code> is a <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> object describing the device
memory to attach.</p>
</li>
<li>
<p><code>memoryOffset</code> is the start offset of the region of <code>memory</code>
which is to be bound to the image.
The number of bytes returned in the
<code>VkMemoryRequirements</code>::<code>size</code> member in <code>memory</code>, starting
from <code>memoryOffset</code> bytes, will be bound to the specified image.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-image-01044" href="chap12.html#VUID-VkBindImageMemoryInfo-image-01044"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-image-01044</span><br>

<code>image</code> <strong class="purple">must</strong> not already be backed by a memory object</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-image-01045" href="chap12.html#VUID-VkBindImageMemoryInfo-image-01045"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-image-01045</span><br>

<code>image</code> <strong class="purple">must</strong> not have been created with any sparse memory binding
flags</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-memoryOffset-01046" href="chap12.html#VUID-VkBindImageMemoryInfo-memoryOffset-01046"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-memoryOffset-01046</span><br>

<code>memoryOffset</code> <strong class="purple">must</strong> be less than the size of <code>memory</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-image-01445" href="chap12.html#VUID-VkBindImageMemoryInfo-image-01445"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-image-01445</span><br>

If <code>image</code> requires a dedicated allocation (as reported by
<a href="chap12.html#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> in
<a href="chap12.html#VkMemoryDedicatedRequirements">VkMemoryDedicatedRequirements</a>::<code>requiresDedicatedAllocation</code>
for <code>image</code>), <code>memory</code> <strong class="purple">must</strong> have been created with
<a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a>::<code>image</code> equal to <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-memory-02628" href="chap12.html#VUID-VkBindImageMemoryInfo-memory-02628"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-memory-02628</span><br>

If the <a href="chap41.html#features-dedicatedAllocationImageAliasing"><code>dedicatedAllocationImageAliasing</code></a> feature is not enabled, and the
<code>VkMemoryAllocateInfo</code> provided when <code>memory</code> was allocated
included a <a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a> structure in its
<code>pNext</code> chain, and <a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a>::<code>image</code>
was not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, then <code>image</code> <strong class="purple">must</strong> equal
<a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a>::<code>image</code> and <code>memoryOffset</code>
<strong class="purple">must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-memory-02629" href="chap12.html#VUID-VkBindImageMemoryInfo-memory-02629"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-memory-02629</span><br>

If the <a href="chap41.html#features-dedicatedAllocationImageAliasing"><code>dedicatedAllocationImageAliasing</code></a> feature is enabled, and the
<code>VkMemoryAllocateInfo</code> provided when <code>memory</code> was allocated
included a <a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a> structure in its
<code>pNext</code> chain, and <a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a>::<code>image</code>
was not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, then <code>memoryOffset</code> <strong class="purple">must</strong> be zero, and
<code>image</code> <strong class="purple">must</strong> be either equal to
<a href="chap11.html#VkMemoryDedicatedAllocateInfo">VkMemoryDedicatedAllocateInfo</a>::<code>image</code> or an image that was
created using the same parameters in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>, with the
exception that <code>extent</code> and <code>arrayLayers</code> <strong class="purple">may</strong> differ subject to
the following restrictions: every dimension in the <code>extent</code>
parameter of the image being bound <strong class="purple">must</strong> be equal to or smaller than the
original image for which the allocation was created; and the
<code>arrayLayers</code> parameter of the image being bound <strong class="purple">must</strong> be equal to
or smaller than the original image for which the allocation was created</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-None-01901" href="chap12.html#VUID-VkBindImageMemoryInfo-None-01901"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-None-01901</span><br>

If image was created with the <code>VK_IMAGE_CREATE_PROTECTED_BIT</code> bit
set, the image <strong class="purple">must</strong> be bound to a memory object allocated with a memory
type that reports <code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-None-01902" href="chap12.html#VUID-VkBindImageMemoryInfo-None-01902"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-None-01902</span><br>

If image was created with the <code>VK_IMAGE_CREATE_PROTECTED_BIT</code> bit
not set, the image <strong class="purple">must</strong> not be bound to a memory object created with a
memory type that reports <code>VK_MEMORY_PROPERTY_PROTECTED_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-image-01050" href="chap12.html#VUID-VkBindImageMemoryInfo-image-01050"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-image-01050</span><br>

If <code>image</code> was created with
<a href="chap12.html#VkDedicatedAllocationImageCreateInfoNV">VkDedicatedAllocationImageCreateInfoNV</a>::<code>dedicatedAllocation</code>
equal to <code>VK_TRUE</code>, <code>memory</code> <strong class="purple">must</strong> have been created with
<a href="chap11.html#VkDedicatedAllocationMemoryAllocateInfoNV">VkDedicatedAllocationMemoryAllocateInfoNV</a>::<code>image</code> equal to an
image handle created with identical creation parameters to <code>image</code>
and <code>memoryOffset</code> <strong class="purple">must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-memory-02728" href="chap12.html#VUID-VkBindImageMemoryInfo-memory-02728"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-memory-02728</span><br>

If the value of <a href="chap11.html#VkExportMemoryAllocateInfo">VkExportMemoryAllocateInfo</a>::<code>handleTypes</code> used
to allocate <code>memory</code> is not <code>0</code>, it <strong class="purple">must</strong> include at least one of
the handles set in
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> when
<code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-memory-02989" href="chap12.html#VUID-VkBindImageMemoryInfo-memory-02989"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-memory-02989</span><br>

If <code>memory</code> was created by a memory import operation, that is not
<a href="chap11.html#VkImportAndroidHardwareBufferInfoANDROID">VkImportAndroidHardwareBufferInfoANDROID</a> with a non-<code>NULL</code>
<code>buffer</code> value, the external handle type of the imported memory
<strong class="purple">must</strong> also have been set in
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> when
<code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-memory-02990" href="chap12.html#VUID-VkBindImageMemoryInfo-memory-02990"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-memory-02990</span><br>

If <code>memory</code> was created with the
<a href="chap11.html#VkImportAndroidHardwareBufferInfoANDROID">VkImportAndroidHardwareBufferInfoANDROID</a> memory import operation
with a non-<code>NULL</code> <code>buffer</code> value,
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_ANDROID_HARDWARE_BUFFER_BIT_ANDROID</code>
<strong class="purple">must</strong> also have been set in
<a href="chap12.html#VkExternalMemoryImageCreateInfo">VkExternalMemoryImageCreateInfo</a>::<code>handleTypes</code> when
<code>image</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01615" href="chap12.html#VUID-VkBindImageMemoryInfo-pNext-01615"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01615</span><br>

If the <code>pNext</code> chain does not include a
<a href="chap12.html#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a> structure, <code>memory</code> <strong class="purple">must</strong> have been
allocated using one of the memory types allowed in the
<code>memoryTypeBits</code> member of the <a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure
returned from a call to <a href="chap12.html#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> with
<code>image</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01616" href="chap12.html#VUID-VkBindImageMemoryInfo-pNext-01616"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01616</span><br>

If the <code>pNext</code> chain does not include a
<a href="chap12.html#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a> structure, <code>memoryOffset</code> <strong class="purple">must</strong> be
an integer multiple of the <code>alignment</code> member of the
<a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure returned from a call to
<a href="chap12.html#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> with <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01617" href="chap12.html#VUID-VkBindImageMemoryInfo-pNext-01617"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01617</span><br>

If the <code>pNext</code> chain does not include a
<a href="chap12.html#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a> structure, the difference of the size
of <code>memory</code> and <code>memoryOffset</code> <strong class="purple">must</strong> be greater than or equal to
the <code>size</code> member of the <a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure
returned from a call to <a href="chap12.html#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> with the
same <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01618" href="chap12.html#VUID-VkBindImageMemoryInfo-pNext-01618"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01618</span><br>

If the <code>pNext</code> chain includes a <a href="chap12.html#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>
structure, <code>image</code> <strong class="purple">must</strong> have been created with the
<code>VK_IMAGE_CREATE_DISJOINT_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01619" href="chap12.html#VUID-VkBindImageMemoryInfo-pNext-01619"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01619</span><br>

If the <code>pNext</code> chain includes a <a href="chap12.html#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>
structure, <code>memory</code> <strong class="purple">must</strong> have been allocated using one of the
memory types allowed in the <code>memoryTypeBits</code> member of the
<a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure returned from a call to
<a href="chap12.html#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> with <code>image</code> and where
<a href="chap12.html#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>::<code>planeAspect</code> corresponds to the
<a href="chap12.html#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a>::<code>planeAspect</code> in the
<a href="chap12.html#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure’s <code>pNext</code> chain</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01620" href="chap12.html#VUID-VkBindImageMemoryInfo-pNext-01620"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01620</span><br>

If the <code>pNext</code> chain includes a <a href="chap12.html#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>
structure, <code>memoryOffset</code> <strong class="purple">must</strong> be an integer multiple of the
<code>alignment</code> member of the <a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure
returned from a call to <a href="chap12.html#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> with
<code>image</code> and where
<a href="chap12.html#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>::<code>planeAspect</code> corresponds to the
<a href="chap12.html#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a>::<code>planeAspect</code> in the
<a href="chap12.html#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure’s <code>pNext</code> chain</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01621" href="chap12.html#VUID-VkBindImageMemoryInfo-pNext-01621"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01621</span><br>

If the <code>pNext</code> chain includes a <a href="chap12.html#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>
structure, the difference of the size of <code>memory</code> and
<code>memoryOffset</code> <strong class="purple">must</strong> be greater than or equal to the <code>size</code>
member of the <a href="chap12.html#VkMemoryRequirements">VkMemoryRequirements</a> structure returned from a call
to <a href="chap12.html#vkGetImageMemoryRequirements2">vkGetImageMemoryRequirements2</a> with the same <code>image</code> and
where <a href="chap12.html#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a>::<code>planeAspect</code> corresponds to
the <a href="chap12.html#VkImagePlaneMemoryRequirementsInfo">VkImagePlaneMemoryRequirementsInfo</a>::<code>planeAspect</code> in the
<a href="chap12.html#VkImageMemoryRequirementsInfo2">VkImageMemoryRequirementsInfo2</a> structure’s <code>pNext</code> chain</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01626" href="chap12.html#VUID-VkBindImageMemoryInfo-pNext-01626"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01626</span><br>

If the <code>pNext</code> chain includes a
<a href="chap12.html#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a> structure, all instances of
<code>memory</code> specified by
<a href="chap12.html#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>pDeviceIndices</code> <strong class="purple">must</strong> have
been allocated</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01627" href="chap12.html#VUID-VkBindImageMemoryInfo-pNext-01627"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01627</span><br>

If the <code>pNext</code> chain includes a
<a href="chap12.html#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a> structure, and
<a href="chap12.html#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>splitInstanceBindRegionCount</code>
is not zero, then <code>image</code> <strong class="purple">must</strong> have been created with the
<code>VK_IMAGE_CREATE_SPLIT_INSTANCE_BIND_REGIONS_BIT</code> bit set</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01628" href="chap12.html#VUID-VkBindImageMemoryInfo-pNext-01628"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01628</span><br>

If the <code>pNext</code> chain includes a
<a href="chap12.html#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a> structure, all elements of
<a href="chap12.html#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>pSplitInstanceBindRegions</code>
<strong class="purple">must</strong> be valid rectangles contained within the dimensions of <code>image</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01629" href="chap12.html#VUID-VkBindImageMemoryInfo-pNext-01629"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01629</span><br>

If the <code>pNext</code> chain includes a
<a href="chap12.html#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a> structure, the union of the areas
of all elements of
<a href="chap12.html#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>pSplitInstanceBindRegions</code>
that correspond to the same instance of <code>image</code> <strong class="purple">must</strong> cover the
entire image</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-image-01630" href="chap12.html#VUID-VkBindImageMemoryInfo-image-01630"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-image-01630</span><br>

If <code>image</code> was created with a valid swapchain handle in
<a href="chap12.html#VkImageSwapchainCreateInfoKHR">VkImageSwapchainCreateInfoKHR</a>::<code>swapchain</code>, then the
<code>pNext</code> chain <strong class="purple">must</strong> include a
<a href="chap12.html#VkBindImageMemorySwapchainInfoKHR">VkBindImageMemorySwapchainInfoKHR</a> structure containing the same
swapchain handle</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01631" href="chap12.html#VUID-VkBindImageMemoryInfo-pNext-01631"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01631</span><br>

If the <code>pNext</code> chain includes a
<a href="chap12.html#VkBindImageMemorySwapchainInfoKHR">VkBindImageMemorySwapchainInfoKHR</a> structure, <code>memory</code> <strong class="purple">must</strong> be
<a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-01632" href="chap12.html#VUID-VkBindImageMemoryInfo-pNext-01632"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-01632</span><br>

If the <code>pNext</code> chain does not include a
<a href="chap12.html#VkBindImageMemorySwapchainInfoKHR">VkBindImageMemorySwapchainInfoKHR</a> structure, <code>memory</code> <strong class="purple">must</strong> be
a valid <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-sType-sType" href="chap12.html#VUID-VkBindImageMemoryInfo-sType-sType"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BIND_IMAGE_MEMORY_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-pNext-pNext" href="chap12.html#VUID-VkBindImageMemoryInfo-pNext-pNext"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap12.html#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>, <a href="chap12.html#VkBindImageMemorySwapchainInfoKHR">VkBindImageMemorySwapchainInfoKHR</a>, or <a href="chap12.html#VkBindImagePlaneMemoryInfo">VkBindImagePlaneMemoryInfo</a></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-sType-unique" href="chap12.html#VUID-VkBindImageMemoryInfo-sType-unique"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-image-parameter" href="chap12.html#VUID-VkBindImageMemoryInfo-image-parameter"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-image-parameter</span><br>
 <code>image</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryInfo-commonparent" href="chap12.html#VUID-VkBindImageMemoryInfo-commonparent"></a> <span class="vuid">VUID-VkBindImageMemoryInfo-commonparent</span><br>
 Both of <code>image</code>, and <code>memory</code> that are valid handles of non-ignored parameters <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBindImageMemoryDeviceGroupInfo</code> structure is defined as:</p>
</div>
<div id="VkBindImageMemoryDeviceGroupInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBindImageMemoryDeviceGroupInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">deviceIndexCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint32_t</span><span class="o">*</span>    <span class="n">pDeviceIndices</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">splitInstanceBindRegionCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkRect2D</span><span class="o">*</span>    <span class="n">pSplitInstanceBindRegions</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBindImageMemoryDeviceGroupInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBindImageMemoryDeviceGroupInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_bind_memory2 with VK_KHR_device_group</span>
<span class="k">typedef</span> <span class="n">VkBindImageMemoryDeviceGroupInfo</span> <span class="n">VkBindImageMemoryDeviceGroupInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>deviceIndexCount</code> is the number of elements in
<code>pDeviceIndices</code>.</p>
</li>
<li>
<p><code>pDeviceIndices</code> is a pointer to an array of device indices.</p>
</li>
<li>
<p><code>splitInstanceBindRegionCount</code> is the number of elements in
<code>pSplitInstanceBindRegions</code>.</p>
</li>
<li>
<p><code>pSplitInstanceBindRegions</code> is a pointer to an array of
<a href="chap3.html#VkRect2D">VkRect2D</a> structures describing which regions of the image are
attached to each instance of memory.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="chap12.html#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a> includes a
<code>VkBindImageMemoryDeviceGroupInfo</code> structure, then that structure
determines how memory is bound to images across multiple devices in a device
group.</p>
</div>
<div class="paragraph">
<p>If <code>deviceIndexCount</code> is greater than zero, then on device index <span class="eq">i</span>
<code>image</code> is attached to the instance of the memory on the physical device
with device index <span class="eq">pDeviceIndices[i]</span>.</p>
</div>
<div class="paragraph">
<p>Let <span class="eq">N</span> be the number of physical devices in the logical device.
If <code>splitInstanceBindRegionCount</code> is greater than zero, then
<code>pSplitInstanceBindRegions</code> is a pointer to an array of <span class="eq">N<sup>2</sup></span>
rectangles, where the image region specified by the rectangle at element
<span class="eq">i*N+j</span> in resource instance <span class="eq">i</span> is bound to the memory instance
<span class="eq">j</span>.
The blocks of the memory that are bound to each sparse image block region
use an offset in memory, relative to <code>memoryOffset</code>, computed as if the
whole image was being bound to a contiguous range of memory.
In other words, horizontally adjacent image blocks use consecutive blocks of
memory, vertically adjacent image blocks are separated by the number of
bytes per block multiplied by the width in blocks of <code>image</code>, and the
block at <span class="eq">(0,0)</span> corresponds to memory starting at <code>memoryOffset</code>.</p>
</div>
<div class="paragraph">
<p>If <code>splitInstanceBindRegionCount</code> and <code>deviceIndexCount</code> are zero
and the memory comes from a memory heap with the
<code>VK_MEMORY_HEAP_MULTI_INSTANCE_BIT</code> bit set, then it is as if
<code>pDeviceIndices</code> contains consecutive indices from zero to the number of
physical devices in the logical device, minus one.
In other words, by default each physical device attaches to its own instance
of the memory.</p>
</div>
<div class="paragraph">
<p>If <code>splitInstanceBindRegionCount</code> and <code>deviceIndexCount</code> are zero
and the memory comes from a memory heap without the
<code>VK_MEMORY_HEAP_MULTI_INSTANCE_BIT</code> bit set, then it is as if
<code>pDeviceIndices</code> contains an array of zeros.
In other words, by default each physical device attaches to instance zero.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-deviceIndexCount-01633" href="chap12.html#VUID-VkBindImageMemoryDeviceGroupInfo-deviceIndexCount-01633"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-deviceIndexCount-01633</span><br>

At least one of <code>deviceIndexCount</code> and
<code>splitInstanceBindRegionCount</code> <strong class="purple">must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-deviceIndexCount-01634" href="chap12.html#VUID-VkBindImageMemoryDeviceGroupInfo-deviceIndexCount-01634"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-deviceIndexCount-01634</span><br>

<code>deviceIndexCount</code> <strong class="purple">must</strong> either be zero or equal to the number of
physical devices in the logical device</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-pDeviceIndices-01635" href="chap12.html#VUID-VkBindImageMemoryDeviceGroupInfo-pDeviceIndices-01635"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-pDeviceIndices-01635</span><br>

All elements of <code>pDeviceIndices</code> <strong class="purple">must</strong> be valid device indices</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-splitInstanceBindRegionCount-01636" href="chap12.html#VUID-VkBindImageMemoryDeviceGroupInfo-splitInstanceBindRegionCount-01636"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-splitInstanceBindRegionCount-01636</span><br>

<code>splitInstanceBindRegionCount</code> <strong class="purple">must</strong> either be zero or equal to the
number of physical devices in the logical device squared</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-pSplitInstanceBindRegions-01637" href="chap12.html#VUID-VkBindImageMemoryDeviceGroupInfo-pSplitInstanceBindRegions-01637"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-pSplitInstanceBindRegions-01637</span><br>

Elements of <code>pSplitInstanceBindRegions</code> that correspond to the same
instance of an image <strong class="purple">must</strong> not overlap</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-offset-01638" href="chap12.html#VUID-VkBindImageMemoryDeviceGroupInfo-offset-01638"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-offset-01638</span><br>

The <code>offset.x</code> member of any element of
<code>pSplitInstanceBindRegions</code> <strong class="purple">must</strong> be a multiple of the sparse image
block width
(<code>VkSparseImageFormatProperties</code>::<code>imageGranularity.width</code>) of
all non-metadata aspects of the image</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-offset-01639" href="chap12.html#VUID-VkBindImageMemoryDeviceGroupInfo-offset-01639"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-offset-01639</span><br>

The <code>offset.y</code> member of any element of
<code>pSplitInstanceBindRegions</code> <strong class="purple">must</strong> be a multiple of the sparse image
block height
(<code>VkSparseImageFormatProperties</code>::<code>imageGranularity.height</code>) of
all non-metadata aspects of the image</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-extent-01640" href="chap12.html#VUID-VkBindImageMemoryDeviceGroupInfo-extent-01640"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-extent-01640</span><br>

The <code>extent.width</code> member of any element of
<code>pSplitInstanceBindRegions</code> <strong class="purple">must</strong> either be a multiple of the sparse
image block width of all non-metadata aspects of the image, or else
<code>extent.width</code> +  <code>offset.x</code> <strong class="purple">must</strong> equal the width of the
image subresource</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-extent-01641" href="chap12.html#VUID-VkBindImageMemoryDeviceGroupInfo-extent-01641"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-extent-01641</span><br>

The <code>extent.height</code> member of any element of
<code>pSplitInstanceBindRegions</code> <strong class="purple">must</strong> either be a multiple of the sparse
image block height of all non-metadata aspects of the image, or else
<code>extent.height</code> +  <code>offset.y</code> <strong class="purple">must</strong> equal the height of the
image subresource</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-sType-sType" href="chap12.html#VUID-VkBindImageMemoryDeviceGroupInfo-sType-sType"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BIND_IMAGE_MEMORY_DEVICE_GROUP_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-pDeviceIndices-parameter" href="chap12.html#VUID-VkBindImageMemoryDeviceGroupInfo-pDeviceIndices-parameter"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-pDeviceIndices-parameter</span><br>
 If <code>deviceIndexCount</code> is not <code>0</code>, <code>pDeviceIndices</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>deviceIndexCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkBindImageMemoryDeviceGroupInfo-pSplitInstanceBindRegions-parameter" href="chap12.html#VUID-VkBindImageMemoryDeviceGroupInfo-pSplitInstanceBindRegions-parameter"></a> <span class="vuid">VUID-VkBindImageMemoryDeviceGroupInfo-pSplitInstanceBindRegions-parameter</span><br>
 If <code>splitInstanceBindRegionCount</code> is not <code>0</code>, <code>pSplitInstanceBindRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>splitInstanceBindRegionCount</code> <a href="chap3.html#VkRect2D">VkRect2D</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="chap12.html#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a> includes a
<code>VkBindImageMemorySwapchainInfoKHR</code> structure, then that structure
includes a swapchain handle and image index indicating that the image will
be bound to memory from that swapchain.</p>
</div>
<div class="paragraph">
<p>The <code>VkBindImageMemorySwapchainInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkBindImageMemorySwapchainInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1 with VK_KHR_swapchain, VK_KHR_device_group with VK_KHR_swapchain</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBindImageMemorySwapchainInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkSwapchainKHR</span>     <span class="n">swapchain</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">imageIndex</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBindImageMemorySwapchainInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>swapchain</code> is <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a> or a swapchain handle.</p>
</li>
<li>
<p><code>imageIndex</code> is an image index within <code>swapchain</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>swapchain</code> is not <code>NULL</code>, the <code>swapchain</code> and <code>imageIndex</code>
are used to determine the memory that the image is bound to, instead of
<code>memory</code> and <code>memoryOffset</code>.</p>
</div>
<div class="paragraph">
<p>Memory <strong class="purple">can</strong> be bound to a swapchain and use the <code>pDeviceIndices</code> or
<code>pSplitInstanceBindRegions</code> members of
<a href="chap12.html#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImageMemorySwapchainInfoKHR-imageIndex-01644" href="chap12.html#VUID-VkBindImageMemorySwapchainInfoKHR-imageIndex-01644"></a> <span class="vuid">VUID-VkBindImageMemorySwapchainInfoKHR-imageIndex-01644</span><br>

<code>imageIndex</code> <strong class="purple">must</strong> be less than the number of images in
<code>swapchain</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImageMemorySwapchainInfoKHR-sType-sType" href="chap12.html#VUID-VkBindImageMemorySwapchainInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkBindImageMemorySwapchainInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BIND_IMAGE_MEMORY_SWAPCHAIN_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkBindImageMemorySwapchainInfoKHR-swapchain-parameter" href="chap12.html#VUID-VkBindImageMemorySwapchainInfoKHR-swapchain-parameter"></a> <span class="vuid">VUID-VkBindImageMemorySwapchainInfoKHR-swapchain-parameter</span><br>
 <code>swapchain</code> <strong class="purple">must</strong> be a valid <a href="chap33.html#VkSwapchainKHR">VkSwapchainKHR</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>swapchain</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>In order to bind <em>planes</em> of a <em>disjoint image</em>, add a
<code>VkBindImagePlaneMemoryInfo</code> structure to the <code>pNext</code> chain of
<a href="chap12.html#VkBindImageMemoryInfo">VkBindImageMemoryInfo</a>.</p>
</div>
<div class="paragraph">
<p>The <code>VkBindImagePlaneMemoryInfo</code> structure is defined as:</p>
</div>
<div id="VkBindImagePlaneMemoryInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBindImagePlaneMemoryInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>          <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>              <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImageAspectFlagBits</span>    <span class="n">planeAspect</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBindImagePlaneMemoryInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkBindImagePlaneMemoryInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_sampler_ycbcr_conversion</span>
<span class="k">typedef</span> <span class="n">VkBindImagePlaneMemoryInfo</span> <span class="n">VkBindImagePlaneMemoryInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>planeAspect</code> is a <code>VkImageAspectFlagBits</code> value specifying the
aspect of the disjoint image plane to bind.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImagePlaneMemoryInfo-planeAspect-02283" href="chap12.html#VUID-VkBindImagePlaneMemoryInfo-planeAspect-02283"></a> <span class="vuid">VUID-VkBindImagePlaneMemoryInfo-planeAspect-02283</span><br>

If the image’s <code>tiling</code> is <code>VK_IMAGE_TILING_LINEAR</code> or
<code>VK_IMAGE_TILING_OPTIMAL</code>, then <code>planeAspect</code> <strong class="purple">must</strong> be a single
valid <em>format plane</em> for the image (that is, for a two-plane image
<code>planeAspect</code> <strong class="purple">must</strong> be <code>VK_IMAGE_ASPECT_PLANE_0_BIT</code> or
<code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, and for a three-plane image
<code>planeAspect</code> <strong class="purple">must</strong> be <code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>,
<code>VK_IMAGE_ASPECT_PLANE_1_BIT</code> or <code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>)</p>
</li>
<li>
<p><a id="VUID-VkBindImagePlaneMemoryInfo-planeAspect-02284" href="chap12.html#VUID-VkBindImagePlaneMemoryInfo-planeAspect-02284"></a> <span class="vuid">VUID-VkBindImagePlaneMemoryInfo-planeAspect-02284</span><br>

If the image’s <code>tiling</code> is
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then <code>planeAspect</code>
<strong class="purple">must</strong> be a single valid <em>memory plane</em> for the image (that is,
<code>aspectMask</code> <strong class="purple">must</strong> specify a plane index that is less than the
<a href="chap43.html#VkDrmFormatModifierPropertiesEXT">VkDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifierPlaneCount</code>
associated with the image’s <code>format</code> and
<a href="chap12.html#VkImageDrmFormatModifierPropertiesEXT">VkImageDrmFormatModifierPropertiesEXT</a>::<code>drmFormatModifier</code>)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBindImagePlaneMemoryInfo-sType-sType" href="chap12.html#VUID-VkBindImagePlaneMemoryInfo-sType-sType"></a> <span class="vuid">VUID-VkBindImagePlaneMemoryInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BIND_IMAGE_PLANE_MEMORY_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkBindImagePlaneMemoryInfo-planeAspect-parameter" href="chap12.html#VUID-VkBindImagePlaneMemoryInfo-planeAspect-parameter"></a> <span class="vuid">VUID-VkBindImagePlaneMemoryInfo-planeAspect-parameter</span><br>
 <code>planeAspect</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageAspectFlagBits">VkImageAspectFlagBits</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="resources-bufferimagegranularity" class="paragraph">
<div class="title">Buffer-Image Granularity</div>
<p>The implementation-dependent limit <a href="chap42.html#limits-bufferImageGranularity"><code>bufferImageGranularity</code></a> specifies a page-like granularity at which
linear and non-linear resources <strong class="purple">must</strong> be placed in adjacent memory locations
to avoid aliasing.
Two resources which do not satisfy this granularity requirement are said to
<a href="chap12.html#resources-memory-aliasing">alias</a>.
<code>bufferImageGranularity</code> is specified in bytes, and <strong class="purple">must</strong> be a power of
two.
Implementations which do not impose a granularity restriction <strong class="purple">may</strong> report a
<code>bufferImageGranularity</code> value of one.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Despite its name, <code>bufferImageGranularity</code> is really a granularity
between “linear” and “non-linear” resources.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Given resourceA at the lower memory offset and resourceB at the higher
memory offset in the same <code>VkDeviceMemory</code> object, where one resource is
linear and the other is non-linear (as defined in the
<a href="chap53.html#glossary-linear-resource">Glossary</a>), and the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c"><span class="n">resourceA</span><span class="p">.</span><span class="n">end</span>       <span class="o">=</span> <span class="n">resourceA</span><span class="p">.</span><span class="n">memoryOffset</span> <span class="o">+</span> <span class="n">resourceA</span><span class="p">.</span><span class="n">size</span> <span class="o">-</span> <span class="mi">1</span>
<span class="n">resourceA</span><span class="p">.</span><span class="n">endPage</span>   <span class="o">=</span> <span class="n">resourceA</span><span class="p">.</span><span class="n">end</span> <span class="o">&amp;</span> <span class="o">~</span><span class="p">(</span><span class="n">bufferImageGranularity</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">resourceB</span><span class="p">.</span><span class="n">start</span>     <span class="o">=</span> <span class="n">resourceB</span><span class="p">.</span><span class="n">memoryOffset</span>
<span class="n">resourceB</span><span class="p">.</span><span class="n">startPage</span> <span class="o">=</span> <span class="n">resourceB</span><span class="p">.</span><span class="n">start</span> <span class="o">&amp;</span> <span class="o">~</span><span class="p">(</span><span class="n">bufferImageGranularity</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following property <strong class="purple">must</strong> hold:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c"><span class="n">resourceA</span><span class="p">.</span><span class="n">endPage</span> <span class="o">&lt;</span> <span class="n">resourceB</span><span class="p">.</span><span class="n">startPage</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>That is, the end of the first resource (A) and the beginning of the second
resource (B) <strong class="purple">must</strong> be on separate “pages” of size
<code>bufferImageGranularity</code>.
<code>bufferImageGranularity</code> <strong class="purple">may</strong> be different than the physical page size
of the memory heap.
This restriction is only needed when a linear resource and a non-linear
resource are adjacent in memory and will be used simultaneously.
The memory ranges of adjacent resources <strong class="purple">can</strong> be closer than
<code>bufferImageGranularity</code>, provided they meet the <code>alignment</code>
requirement for the objects in question.</p>
</div>
<div class="paragraph">
<p>Sparse block size in bytes and sparse image and buffer memory alignments
<strong class="purple">must</strong> all be multiples of the <code>bufferImageGranularity</code>.
Therefore, memory bound to sparse resources naturally satisfies the
<code>bufferImageGranularity</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="resources-sharing"><a class="anchor" href="chap12.html#resources-sharing"></a>12.8. Resource Sharing Mode</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Buffer and image objects are created with a <em>sharing mode</em> controlling how
they <strong class="purple">can</strong> be accessed from queues.
The supported sharing modes are:</p>
</div>
<div id="VkSharingMode" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkSharingMode</span> <span class="p">{</span>
    <span class="n">VK_SHARING_MODE_EXCLUSIVE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_SHARING_MODE_CONCURRENT</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkSharingMode</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_SHARING_MODE_EXCLUSIVE</code> specifies that access to any range or
image subresource of the object will be exclusive to a single queue
family at a time.</p>
</li>
<li>
<p><code>VK_SHARING_MODE_CONCURRENT</code> specifies that concurrent access to any
range or image subresource of the object from multiple queue families is
supported.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p><code>VK_SHARING_MODE_CONCURRENT</code> <strong class="purple">may</strong> result in lower performance access to
the buffer or image than <code>VK_SHARING_MODE_EXCLUSIVE</code>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Ranges of buffers and image subresources of image objects created using
<code>VK_SHARING_MODE_EXCLUSIVE</code> <strong class="purple">must</strong> only be accessed by queues in the
queue family that has <em>ownership</em> of the resource.
Upon creation, such resources are not owned by any queue family; ownership
is implicitly acquired upon first use within a queue.
Once a resource using <code>VK_SHARING_MODE_EXCLUSIVE</code> is owned by some queue
family, the application <strong class="purple">must</strong> perform a
<a href="chap7.html#synchronization-queue-transfers">queue family ownership transfer</a> to make
the memory contents of a range or image subresource accessible to a
different queue family.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Images still require a <a href="chap12.html#resources-image-layouts">layout transition</a> from
<code>VK_IMAGE_LAYOUT_UNDEFINED</code> or <code>VK_IMAGE_LAYOUT_PREINITIALIZED</code>
before being used on the first queue.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>A queue family <strong class="purple">can</strong> take ownership of an image subresource or buffer range
of a resource created with <code>VK_SHARING_MODE_EXCLUSIVE</code>, without an
ownership transfer, in the same way as for a resource that was just created;
however, taking ownership in this way has the effect that the contents of
the image subresource or buffer range are undefined.</p>
</div>
<div class="paragraph">
<p>Ranges of buffers and image subresources of image objects created using
<code>VK_SHARING_MODE_CONCURRENT</code> <strong class="purple">must</strong> only be accessed by queues from the
queue families specified through the <code>queueFamilyIndexCount</code> and
<code>pQueueFamilyIndices</code> members of the corresponding create info
structures.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-external-sharing"><a class="anchor" href="chap12.html#resources-external-sharing"></a>12.8.1. External Resource Sharing</h4>
<div class="paragraph">
<p>Resources <strong class="purple">should</strong> only be accessed in the Vulkan instance that has exclusive
ownership of their underlying memory.
Only one Vulkan instance has exclusive ownership of a resource’s underlying
memory at a given time, regardless of whether the resource was created using
<code>VK_SHARING_MODE_EXCLUSIVE</code> or <code>VK_SHARING_MODE_CONCURRENT</code>.
Applications can transfer ownership of a resource’s underlying memory only
if the memory has been imported from or exported to another instance or
external API using external memory handles.
The semantics for transferring ownership outside of the instance are similar
to those used for transferring ownership of <code>VK_SHARING_MODE_EXCLUSIVE</code>
resources between queues, and is also accomplished using
<a href="chap7.html#VkBufferMemoryBarrier">VkBufferMemoryBarrier</a> or <a href="chap7.html#VkImageMemoryBarrier">VkImageMemoryBarrier</a> operations.
To make the contents of the underlying memory accessible in the destination
instance or API, applications <strong class="purple">must</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Release exclusive ownership from the source instance or API.</p>
</li>
<li>
<p>Ensure the release operation has completed using semaphores or fences.</p>
</li>
<li>
<p>Acquire exclusive ownership in the destination instance or API</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Unlike queue ownership transfers, the destination instance or API is not
specified explicitly when releasing ownership, nor is the source instance or
API specified when acquiring ownership.
Instead, the image or memory barrier’s <code>dstQueueFamilyIndex</code> or
<code>srcQueueFamilyIndex</code> parameters are set to the reserved queue family
index <code>VK_QUEUE_FAMILY_EXTERNAL</code>
or <code>VK_QUEUE_FAMILY_FOREIGN_EXT</code>
to represent the external destination or source respectively.</p>
</div>
<div class="paragraph">
<p>Binding a resource to a memory object shared between multiple Vulkan
instances or other APIs does not change the ownership of the underlying
memory.
The first entity to access the resource implicitly acquires ownership.
An entity <strong class="purple">can</strong> also implicitly take ownership from another entity in the
same way without an explicit ownership transfer.
However, taking ownership in this way has the effect that the contents of
the underlying memory are undefined.</p>
</div>
<div class="paragraph">
<p>Accessing a resource backed by memory that is owned by a particular instance
or API has the same semantics as accessing a <code>VK_SHARING_MODE_EXCLUSIVE</code>
resource, with one exception: Implementations <strong class="purple">must</strong> ensure layout
transitions performed on one member of a set of identical subresources of
identical images that alias the same range of an underlying memory object
affect the layout of all the subresources in the set.</p>
</div>
<div class="paragraph">
<p>As a corollary, writes to any image subresources in such a set <strong class="purple">must</strong> not
make the contents of memory used by other subresources in the set
undefined.
An application <strong class="purple">can</strong> define the content of a subresource of one image by
performing device writes to an identical subresource of another image
provided both images are bound to the same region of external memory.
Applications <strong class="purple">may</strong> also add resources to such a set after the content of the
existing set members has been defined without making the content undefined
by creating a new image with the initial layout
<code>VK_IMAGE_LAYOUT_UNDEFINED</code> and binding it to the same region of
external memory as the existing images.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Because layout transitions apply to all identical images aliasing the same
region of external memory, the actual layout of the memory backing a new
image as well as an existing image with defined content will not be
undefined.
Such an image is not usable until it acquires ownership of its memory from
the existing owner.
Therefore, the layout specified as part of this transition will be the true
initial layout of the image.
The undefined layout specified when creating it is a placeholder to
simplify valid usage requirements.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-memory-aliasing"><a class="anchor" href="chap12.html#resources-memory-aliasing"></a>12.9. Memory Aliasing</h3>
<div class="paragraph">
<p>A range of a <code>VkDeviceMemory</code> allocation is <em>aliased</em> if it is bound to
multiple resources simultaneously, as described below, via
<a href="chap12.html#vkBindImageMemory">vkBindImageMemory</a>, <a href="chap12.html#vkBindBufferMemory">vkBindBufferMemory</a>,
<a href="chap12.html#vkBindAccelerationStructureMemoryNV">vkBindAccelerationStructureMemoryNV</a>,
via <a href="chap32.html#sparsememory-resource-binding">sparse memory bindings</a>, or by binding
the memory to resources in multiple Vulkan instances or external APIs using
external memory handle export and import mechanisms.</p>
</div>
<div class="paragraph">
<p>Consider two resources, resource<sub>A</sub> and resource<sub>B</sub>, bound respectively to
memory range<sub>A</sub> and range<sub>B</sub>.
Let paddedRange<sub>A</sub> and paddedRange<sub>B</sub> be, respectively, range<sub>A</sub> and
range<sub>B</sub> aligned to <code>bufferImageGranularity</code>.
If the resources are both linear or both non-linear (as defined in the
<a href="chap53.html#glossary-linear-resource">Glossary</a>), then the resources <em>alias</em> the
memory in the intersection of range<sub>A</sub> and range<sub>B</sub>.
If one resource is linear and the other is non-linear, then the resources
<em>alias</em> the memory in the intersection of paddedRange<sub>A</sub> and paddedRange<sub>B</sub>.</p>
</div>
<div class="paragraph">
<p>Applications <strong class="purple">can</strong> alias memory, but use of multiple aliases is subject to
several constraints.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Memory aliasing <strong class="purple">can</strong> be useful to reduce the total device memory footprint
of an application, if some large resources are used for disjoint periods of
time.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>When a <a href="chap53.html#glossary-linear-resource">non-linear</a>,
non-<code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> image is bound to an aliased
range, all image subresources of the image <em>overlap</em> the range.
When a linear image is bound to an aliased range, the image subresources
that (according to the image’s advertised layout) include bytes from the
aliased range overlap the range.
When a <code>VK_IMAGE_CREATE_SPARSE_RESIDENCY_BIT</code> image has sparse image
blocks bound to an aliased range, only image subresources including those
sparse image blocks overlap the range, and when the memory bound to the
image’s mip tail overlaps an aliased range all image subresources in the mip
tail overlap the range.</p>
</div>
<div class="paragraph">
<p>Buffers, and linear image subresources in either the
<code>VK_IMAGE_LAYOUT_PREINITIALIZED</code> or <code>VK_IMAGE_LAYOUT_GENERAL</code>
layouts, are <em>host-accessible subresources</em>.
That is, the host has a well-defined addressing scheme to interpret the
contents, and thus the layout of the data in memory <strong class="purple">can</strong> be consistently
interpreted across aliases if each of those aliases is a host-accessible
subresource.
Non-linear images, and linear image subresources in other layouts, are not
host-accessible.</p>
</div>
<div class="paragraph">
<p>If two aliases are both host-accessible, then they interpret the contents of
the memory in consistent ways, and data written to one alias <strong class="purple">can</strong> be read by
the other alias.</p>
</div>
<div id="resources-memory-aliasing-consistency" class="paragraph">
<p>If two aliases are both images that were created with identical creation
parameters, both were created with the <code>VK_IMAGE_CREATE_ALIAS_BIT</code> flag
set, and both are bound identically to memory
except for <a href="chap12.html#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>pDeviceIndices</code> and
<a href="chap12.html#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>pSplitInstanceBindRegions</code>,
then they interpret the contents of the memory in consistent ways, and data
written to one alias <strong class="purple">can</strong> be read by the other alias.</p>
</div>
<div id="resources-memory-aliasing-consistency-planes" class="paragraph">
<p>Additionally, if an individual plane of a multi-planar image and a
single-plane image alias the same memory, then they also interpret the
contents of the memory in consistent ways under the same conditions, but
with the following modifications:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Both <strong class="purple">must</strong> have been created with the <code>VK_IMAGE_CREATE_DISJOINT_BIT</code>
flag.</p>
</li>
<li>
<p>The single-plane image <strong class="purple">must</strong> have a <a href="chap43.html#VkFormat">VkFormat</a> that is
<a href="chap43.html#formats-compatible-planes">equivalent</a> to that of the multi-planar
image’s individual plane.</p>
</li>
<li>
<p>The single-plane image and the individual plane of the multi-planar
image <strong class="purple">must</strong> be bound identically to memory
except for <a href="chap12.html#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>pDeviceIndices</code>
and
<a href="chap12.html#VkBindImageMemoryDeviceGroupInfo">VkBindImageMemoryDeviceGroupInfo</a>::<code>pSplitInstanceBindRegions</code>.</p>
</li>
<li>
<p>The <code>width</code> and <code>height</code> of the single-plane image are derived
from the multi-planar image’s dimensions in the manner listed for
<a href="chap43.html#formats-compatible-planes">plane compatibility</a> for the aliased plane.</p>
</li>
<li>
<p>If either image’s <code>tiling</code> is
<code>VK_IMAGE_TILING_DRM_FORMAT_MODIFIER_EXT</code>, then both images <strong class="purple">must</strong> be
<a href="chap53.html#glossary-linear-resource">linear</a>.</p>
</li>
<li>
<p>All other creation parameters <strong class="purple">must</strong> be identical</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Aliases created by binding the same memory to resources in multiple Vulkan
instances or external APIs using external memory handle export and import
mechanisms interpret the contents of the memory in consistent ways, and data
written to one alias <strong class="purple">can</strong> be read by the other alias.</p>
</div>
<div class="paragraph">
<p>Otherwise, the aliases interpret the contents of the memory differently, and
writes via one alias make the contents of memory partially or completely
undefined to the other alias.
If the first alias is a host-accessible subresource, then the bytes affected
are those written by the memory operations according to its addressing
scheme.
If the first alias is not host-accessible, then the bytes affected are those
overlapped by the image subresources that were written.
If the second alias is a host-accessible subresource, the affected bytes
become undefined.
If the second alias is not host-accessible, all sparse image blocks (for
sparse partially-resident images) or all image subresources (for non-sparse
image and fully resident sparse images) that overlap the affected bytes
become undefined.</p>
</div>
<div class="paragraph">
<p>If any image subresources are made undefined due to writes to an alias,
then each of those image subresources <strong class="purple">must</strong> have its layout transitioned
from <code>VK_IMAGE_LAYOUT_UNDEFINED</code> to a valid layout before it is used, or
from <code>VK_IMAGE_LAYOUT_PREINITIALIZED</code> if the memory has been written by
the host.
If any sparse blocks of a sparse image have been made undefined, then only
the image subresources containing them <strong class="purple">must</strong> be transitioned.</p>
</div>
<div class="paragraph">
<p>Use of an overlapping range by two aliases <strong class="purple">must</strong> be separated by a memory
dependency using the appropriate <a href="chap7.html#synchronization-access-types">access
types</a> if at least one of those uses performs writes, whether the aliases
interpret memory consistently or not.
If buffer or image memory barriers are used, the scope of the barrier <strong class="purple">must</strong>
contain the entire range and/or set of image subresources that overlap.</p>
</div>
<div class="paragraph">
<p>If two aliasing image views are used in the same framebuffer, then the
render pass <strong class="purple">must</strong> declare the attachments using the
<a href="chap8.html#renderpass-aliasing"><code>VK_ATTACHMENT_DESCRIPTION_MAY_ALIAS_BIT</code></a>, and
follow the other rules listed in that section.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Memory recycled via an application suballocator (i.e. without freeing and
reallocating the memory objects) is not substantially different from memory
aliasing.
However, a suballocator usually waits on a fence before recycling a region
of memory, and signaling a fence involves sufficient implicit dependencies
to satisfy all the above requirements.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="resources-buffer-collection-fuchsia"><a class="anchor" href="chap12.html#resources-buffer-collection-fuchsia"></a>12.10. Buffer Collections</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Fuchsia’s FIDL-based Sysmem service interoperates with Vulkan via the
<code><a href="chap50.html#VK_FUCHSIA_buffer_collection">VK_FUCHSIA_buffer_collection</a></code> extension.</p>
</div>
<div class="paragraph">
<p>A buffer collection is a set of one or more buffers which were allocated
together as a group and which all have the same properties.
These properties describe the buffers' internal representation, such as its
dimensions and memory layout.
This ensures that all of the buffers can be used interchangeably by tasks
that require swapping among multiple buffers, such as double-buffered
graphics rendering.</p>
</div>
<div class="paragraph">
<p>On Fuchsia, the Sysmem service uses buffer collections as a core construct
in its design.</p>
</div>
<div class="paragraph">
<p>Buffer collections are represented by <code>VkBufferCollectionFUCHSIA</code>
handles:</p>
</div>
<div id="VkBufferCollectionFUCHSIA" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_FUCHSIA_buffer_collection</span>
<span class="n">VK_DEFINE_NON_DISPATCHABLE_HANDLE</span><span class="p">(</span><span class="n">VkBufferCollectionFUCHSIA</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_definitions"><a class="anchor" href="chap12.html#_definitions"></a>12.10.1. Definitions</h4>
<div class="ulist">
<ul>
<li>
<p>FIDL - Fuchsia Interface Definition Language.
The declarative language used to define FIDL interprocess communication
interfaces on Fuchsia.
FIDL files use the <code>fidl</code> extension.
FIDL is also used to refer to the services defined by interfaces
declared in the FIDL language</p>
</li>
<li>
<p>Sysmem - The FIDL service that facilitates optimal buffer sharing and
reuse on Fuchsia</p>
</li>
<li>
<p>client - Any participant of the buffer collection e.g. the Vulkan
application</p>
</li>
<li>
<p>token - A <code>zx_handle_t</code> Zircon channel object that allows
participation in the buffer collection</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_platform_initialization_for_buffer_collections"><a class="anchor" href="chap12.html#_platform_initialization_for_buffer_collections"></a>12.10.2. Platform initialization for buffer collections</h4>
<div class="paragraph">
<p>To initialize a buffer collection on Fuchsia:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Connect to the Sysmem service to initialize a Sysmem allocator</p>
</li>
<li>
<p>Create an initial buffer collection token using the Sysmem allocator</p>
</li>
<li>
<p>Duplicate the token for each participant beyond the initiator</p>
</li>
<li>
<p>See the Sysmem Overview and fuchsia.sysmem FIDL documentation on
fuchsia.dev for more detailed information</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_create_the_buffer_collection"><a class="anchor" href="chap12.html#_create_the_buffer_collection"></a>12.10.3. Create the buffer collection</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create an <a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> for Vulkan to participate in
the buffer collection:</p>
</div>
<div id="vkCreateBufferCollectionFUCHSIA" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_FUCHSIA_buffer_collection</span>
<span class="n">VkResult</span> <span class="nf">vkCreateBufferCollectionFUCHSIA</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBufferCollectionCreateInfoFUCHSIA</span><span class="o">*</span>  <span class="n">pCreateInfo</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">,</span>
    <span class="n">VkBufferCollectionFUCHSIA</span><span class="o">*</span>                  <span class="n">pCollection</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the
<code>VkBufferCollectionFUCHSIA</code></p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a
<a href="chap12.html#VkBufferCollectionCreateInfoFUCHSIA">VkBufferCollectionCreateInfoFUCHSIA</a> structure containing
parameters affecting creation of the buffer collection</p>
</li>
<li>
<p><code>pAllocator</code> is a pointer to a <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure
controlling host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter</p>
</li>
<li>
<p><code>pBufferCollection</code> is a pointer to a
<a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle in which the resulting buffer
collection object is returned</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateBufferCollectionFUCHSIA-device-parameter" href="chap12.html#VUID-vkCreateBufferCollectionFUCHSIA-device-parameter"></a> <span class="vuid">VUID-vkCreateBufferCollectionFUCHSIA-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateBufferCollectionFUCHSIA-pCreateInfo-parameter" href="chap12.html#VUID-vkCreateBufferCollectionFUCHSIA-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateBufferCollectionFUCHSIA-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkBufferCollectionCreateInfoFUCHSIA">VkBufferCollectionCreateInfoFUCHSIA</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateBufferCollectionFUCHSIA-pAllocator-parameter" href="chap12.html#VUID-vkCreateBufferCollectionFUCHSIA-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateBufferCollectionFUCHSIA-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateBufferCollectionFUCHSIA-pCollection-parameter" href="chap12.html#VUID-vkCreateBufferCollectionFUCHSIA-pCollection-parameter"></a> <span class="vuid">VUID-vkCreateBufferCollectionFUCHSIA-pCollection-parameter</span><br>
 <code>pCollection</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INVALID_EXTERNAL_HANDLE</code></p>
</li>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Access</div>
<div class="paragraph">
<p>All functions referencing a <a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> <strong class="purple">must</strong> be
externally synchronized with the exception of
<code>vkCreateBufferCollectionFUCHSIA</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferCollectionCreateInfoFUCHSIA</code> structure is defined as:</p>
</div>
<div id="VkBufferCollectionCreateInfoFUCHSIA" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_FUCHSIA_buffer_collection</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBufferCollectionCreateInfoFUCHSIA</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">zx_handle_t</span>        <span class="n">collectionToken</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBufferCollectionCreateInfoFUCHSIA</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure</p>
</li>
<li>
<p><code>collectionToken</code> is a <code>zx_handle_t</code> containing the Sysmem
client’s buffer collection token</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCollectionCreateInfoFUCHSIA-collectionToken-06393" href="chap12.html#VUID-VkBufferCollectionCreateInfoFUCHSIA-collectionToken-06393"></a> <span class="vuid">VUID-VkBufferCollectionCreateInfoFUCHSIA-collectionToken-06393</span><br>

<code>collectionToken</code> <strong class="purple">must</strong> be a valid <code>zx_handle_t</code> to a Zircon
channel allocated from Sysmem
(<code>fuchsia.sysmem.Allocator</code>/AllocateSharedCollection) with
<code>ZX_DEFAULT_CHANNEL_RIGHTS</code> rights</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCollectionCreateInfoFUCHSIA-sType-sType" href="chap12.html#VUID-VkBufferCollectionCreateInfoFUCHSIA-sType-sType"></a> <span class="vuid">VUID-VkBufferCollectionCreateInfoFUCHSIA-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_COLLECTION_CREATE_INFO_FUCHSIA</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCollectionCreateInfoFUCHSIA-pNext-pNext" href="chap12.html#VUID-VkBufferCollectionCreateInfoFUCHSIA-pNext-pNext"></a> <span class="vuid">VUID-VkBufferCollectionCreateInfoFUCHSIA-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_set_the_constraints"><a class="anchor" href="chap12.html#_set_the_constraints"></a>12.10.4. Set the constraints</h4>
<div class="paragraph">
<p>Buffer collections can be established for <a href="chap12.html#VkImage">VkImage</a> allocations or
<a href="chap12.html#VkBuffer">VkBuffer</a> allocations.</p>
</div>
<div class="sect4">
<h5 id="_set_image_based_buffer_collection_constraints"><a class="anchor" href="chap12.html#_set_image_based_buffer_collection_constraints"></a>Set image-based buffer collection constraints</h5>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Setting the constraints on the buffer collection initiates the format
negotiation and allocation of the buffer collection.
To set the constraints on a <a href="chap12.html#VkImage">VkImage</a> buffer collection, call:</p>
</div>
<div id="vkSetBufferCollectionImageConstraintsFUCHSIA" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_FUCHSIA_buffer_collection</span>
<span class="n">VkResult</span> <span class="nf">vkSetBufferCollectionImageConstraintsFUCHSIA</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkBufferCollectionFUCHSIA</span>                   <span class="n">collection</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkImageConstraintsInfoFUCHSIA</span><span class="o">*</span>        <span class="n">pImageConstraintsInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device</p>
</li>
<li>
<p><code>collection</code> is the <a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><code>pImageConstraintsInfo</code> is a pointer to a
<a href="chap12.html#VkImageConstraintsInfoFUCHSIA">VkImageConstraintsInfoFUCHSIA</a> structure</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkSetBufferCollectionImageConstraintsFUCHSIA</code> <strong class="purple">may</strong> fail if
<code>pImageConstraintsInfo</code>::<code>formatConstraintsCount</code> is larger than the
implementation-defined limit.
If that occurs, <a href="chap12.html#vkSetBufferCollectionImageConstraintsFUCHSIA">vkSetBufferCollectionImageConstraintsFUCHSIA</a> will
return <code>VK_ERROR_INITIALIZATION_FAILED</code>.</p>
</div>
<div class="paragraph">
<p><code>vkSetBufferCollectionImageConstraintsFUCHSIA</code> <strong class="purple">may</strong> fail if the
implementation does not support any of the formats described by the
<code>pImageConstraintsInfo</code> structure.
If that occurs, <a href="chap12.html#vkSetBufferCollectionImageConstraintsFUCHSIA">vkSetBufferCollectionImageConstraintsFUCHSIA</a> will
return <code>VK_ERROR_FORMAT_NOT_SUPPORTED</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-collection-06394" href="chap12.html#VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-collection-06394"></a> <span class="vuid">VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-collection-06394</span><br>

<code>vkSetBufferCollectionImageConstraintsFUCHSIA</code> or
<code>vkSetBufferCollectionBufferConstraintsFUCHSIA</code> <strong class="purple">must</strong> not have
already been called on <code>collection</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-device-parameter" href="chap12.html#VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-device-parameter"></a> <span class="vuid">VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-collection-parameter" href="chap12.html#VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-collection-parameter"></a> <span class="vuid">VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-collection-parameter</span><br>
 <code>collection</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><a id="VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-pImageConstraintsInfo-parameter" href="chap12.html#VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-pImageConstraintsInfo-parameter"></a> <span class="vuid">VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-pImageConstraintsInfo-parameter</span><br>
 <code>pImageConstraintsInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkImageConstraintsInfoFUCHSIA">VkImageConstraintsInfoFUCHSIA</a> structure</p>
</li>
<li>
<p><a id="VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-collection-parent" href="chap12.html#VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-collection-parent"></a> <span class="vuid">VUID-vkSetBufferCollectionImageConstraintsFUCHSIA-collection-parent</span><br>
 <code>collection</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_FORMAT_NOT_SUPPORTED</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageConstraintsInfoFUCHSIA</code> structure is defined as:</p>
</div>
<div id="VkImageConstraintsInfoFUCHSIA" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_FUCHSIA_buffer_collection</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageConstraintsInfoFUCHSIA</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                               <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                   <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                      <span class="n">formatConstraintsCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkImageFormatConstraintsInfoFUCHSIA</span><span class="o">*</span>    <span class="n">pFormatConstraints</span><span class="p">;</span>
    <span class="n">VkBufferCollectionConstraintsInfoFUCHSIA</span>      <span class="n">bufferCollectionConstraints</span><span class="p">;</span>
    <span class="n">VkImageConstraintsInfoFlagsFUCHSIA</span>            <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageConstraintsInfoFUCHSIA</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>formatConstraintsCount</code> is the number of elements in
<code>pFormatConstraints</code>.</p>
</li>
<li>
<p><code>pFormatConstraints</code> is a pointer to an array of
<a href="chap12.html#VkImageFormatConstraintsInfoFUCHSIA">VkImageFormatConstraintsInfoFUCHSIA</a> structures of size
<code>formatConstraintsCount</code> that is used to further constrain buffer
collection format selection for image-based buffer collections.</p>
</li>
<li>
<p><code>bufferCollectionConstraints</code> is a
<a href="chap12.html#VkBufferCollectionConstraintsInfoFUCHSIA">VkBufferCollectionConstraintsInfoFUCHSIA</a> structure used to supply
parameters for the negotiation and allocation for buffer-based buffer
collections.</p>
</li>
<li>
<p><code>flags</code> is a <a href="chap12.html#VkImageConstraintsInfoFlagBitsFUCHSIA">VkImageConstraintsInfoFlagBitsFUCHSIA</a> value
specifying hints about the type of memory Sysmem should allocate for the
buffer collection.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06395" href="chap12.html#VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06395"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06395</span><br>

All elements of <code>pFormatConstraints</code> <strong class="purple">must</strong> have at least one bit set
in its
<a href="chap12.html#VkImageFormatConstraintsInfoFUCHSIA">VkImageFormatConstraintsInfoFUCHSIA</a>::<code>requiredFormatFeatures</code></p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06396" href="chap12.html#VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06396"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06396</span><br>

If <code>pFormatConstraints</code>::<code>imageCreateInfo</code>::<code>usage</code> contains
<code>VK_IMAGE_USAGE_SAMPLED_BIT</code>, then
<code>pFormatConstraints</code>::<code>requiredFormatFeatures</code> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06397" href="chap12.html#VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06397"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06397</span><br>

If <code>pFormatConstraints</code>::<code>imageCreateInfo</code>::<code>usage</code> contains
<code>VK_IMAGE_USAGE_STORAGE_BIT</code>, then
<code>pFormatConstraints</code>::<code>requiredFormatFeatures</code> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_STORAGE_IMAGE_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06398" href="chap12.html#VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06398"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06398</span><br>

If <code>pFormatConstraints</code>::<code>imageCreateInfo</code>::<code>usage</code> contains
<code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code>, then
<code>pFormatConstraints</code>::<code>requiredFormatFeatures</code> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06399" href="chap12.html#VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06399"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06399</span><br>

If <code>pFormatConstraints</code>::<code>imageCreateInfo</code>::<code>usage</code> contains
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code>, then
<code>pFormatConstraints</code>::<code>requiredFormatFeatures</code> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06400" href="chap12.html#VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06400"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-06400</span><br>

If <code>pFormatConstraints</code>::<code>imageCreateInfo</code>::<code>usage</code> contains
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code>, then
<code>pFormatConstraints</code>::<code>requiredFormatFeatures</code> <strong class="purple">must</strong> contain at
least one of <code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code> or
<code>VK_FORMAT_FEATURE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-attachmentFragmentShadingRate-06401" href="chap12.html#VUID-VkImageConstraintsInfoFUCHSIA-attachmentFragmentShadingRate-06401"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-attachmentFragmentShadingRate-06401</span><br>

If the <a href="chap41.html#features-attachmentFragmentShadingRate"><code>attachmentFragmentShadingRate</code></a> feature is enabled, and
<code>pFormatConstraints</code>::<code>imageCreateInfo</code>::<code>usage</code> contains
<code>VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code>, then
<code>pFormatConstraints</code>::<code>requiredFormatFeatures</code> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-sType-sType" href="chap12.html#VUID-VkImageConstraintsInfoFUCHSIA-sType-sType"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_CONSTRAINTS_INFO_FUCHSIA</code></p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-pNext-pNext" href="chap12.html#VUID-VkImageConstraintsInfoFUCHSIA-pNext-pNext"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-parameter" href="chap12.html#VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-parameter"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-pFormatConstraints-parameter</span><br>
 <code>pFormatConstraints</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>formatConstraintsCount</code> valid <a href="chap12.html#VkImageFormatConstraintsInfoFUCHSIA">VkImageFormatConstraintsInfoFUCHSIA</a> structures</p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-bufferCollectionConstraints-parameter" href="chap12.html#VUID-VkImageConstraintsInfoFUCHSIA-bufferCollectionConstraints-parameter"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-bufferCollectionConstraints-parameter</span><br>
 <code>bufferCollectionConstraints</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBufferCollectionConstraintsInfoFUCHSIA">VkBufferCollectionConstraintsInfoFUCHSIA</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-flags-parameter" href="chap12.html#VUID-VkImageConstraintsInfoFUCHSIA-flags-parameter"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap12.html#VkImageConstraintsInfoFlagBitsFUCHSIA">VkImageConstraintsInfoFlagBitsFUCHSIA</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageConstraintsInfoFUCHSIA-formatConstraintsCount-arraylength" href="chap12.html#VUID-VkImageConstraintsInfoFUCHSIA-formatConstraintsCount-arraylength"></a> <span class="vuid">VUID-VkImageConstraintsInfoFUCHSIA-formatConstraintsCount-arraylength</span><br>
 <code>formatConstraintsCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkImageConstraintsInfoFlagsFUCHSIA" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_FUCHSIA_buffer_collection</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkImageConstraintsInfoFlagsFUCHSIA</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkImageConstraintsInfoFlagsFUCHSIA</code> is a bitmask type for setting a
mask of zero or more <a href="chap12.html#VkImageConstraintsInfoFlagBitsFUCHSIA">VkImageConstraintsInfoFlagBitsFUCHSIA</a> bits.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in
<a href="chap12.html#VkImageConstraintsInfoFlagBitsFUCHSIA">VkImageConstraintsInfoFlagBitsFUCHSIA</a>::<code>flags</code> include:</p>
</div>
<div id="VkImageConstraintsInfoFlagBitsFUCHSIA" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_FUCHSIA_buffer_collection</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkImageConstraintsInfoFlagBitsFUCHSIA</span> <span class="p">{</span>
    <span class="n">VK_IMAGE_CONSTRAINTS_INFO_CPU_READ_RARELY_FUCHSIA</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_IMAGE_CONSTRAINTS_INFO_CPU_READ_OFTEN_FUCHSIA</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_IMAGE_CONSTRAINTS_INFO_CPU_WRITE_RARELY_FUCHSIA</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
    <span class="n">VK_IMAGE_CONSTRAINTS_INFO_CPU_WRITE_OFTEN_FUCHSIA</span> <span class="o">=</span> <span class="mh">0x00000008</span><span class="p">,</span>
    <span class="n">VK_IMAGE_CONSTRAINTS_INFO_PROTECTED_OPTIONAL_FUCHSIA</span> <span class="o">=</span> <span class="mh">0x00000010</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkImageConstraintsInfoFlagBitsFUCHSIA</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>General hints about the type of memory that should be allocated by Sysmem
based on the expected usage of the images in the buffer collection include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_CONSTRAINTS_INFO_CPU_READ_RARELY_FUCHSIA</code></p>
</li>
<li>
<p><code>VK_IMAGE_CONSTRAINTS_INFO_CPU_READ_OFTEN_FUCHSIA</code></p>
</li>
<li>
<p><code>VK_IMAGE_CONSTRAINTS_INFO_CPU_WRITE_RARELY_FUCHSIA</code></p>
</li>
<li>
<p><code>VK_IMAGE_CONSTRAINTS_INFO_CPU_WRITE_OFTEN_FUCHSIA</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For protected memory:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_CONSTRAINTS_INFO_PROTECTED_OPTIONAL_FUCHSIA</code> specifies
that protected memory is optional for the buffer collection.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that if all participants in the buffer collection (Vulkan or otherwise)
specify that protected memory is optional, Sysmem will not allocate
protected memory.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageFormatConstraintsInfoFUCHSIA</code> structure is defined as:</p>
</div>
<div id="VkImageFormatConstraintsInfoFUCHSIA" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_FUCHSIA_buffer_collection</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageFormatConstraintsInfoFUCHSIA</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                         <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                             <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImageCreateInfo</span>                       <span class="n">imageCreateInfo</span><span class="p">;</span>
    <span class="n">VkFormatFeatureFlags</span>                    <span class="n">requiredFormatFeatures</span><span class="p">;</span>
    <span class="n">VkImageFormatConstraintsFlagsFUCHSIA</span>    <span class="n">flags</span><span class="p">;</span>
    <span class="kt">uint64_t</span>                                <span class="n">sysmemPixelFormat</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                                <span class="n">colorSpaceCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkSysmemColorSpaceFUCHSIA</span><span class="o">*</span>        <span class="n">pColorSpaces</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageFormatConstraintsInfoFUCHSIA</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure</p>
</li>
<li>
<p><code>imageCreateInfo</code> is the <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> used to create a
<a href="chap12.html#VkImage">VkImage</a> that is to use memory from the
<a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a></p>
</li>
<li>
<p><code>requiredFormatFeatures</code> is a bitmask of
<code>VkFormatFeatureFlagBits</code> specifying required features of the
buffers in the buffer collection</p>
</li>
<li>
<p><code>flags</code> is reserved for future use</p>
</li>
<li>
<p><code>sysmemPixelFormat</code> is a <code>PixelFormatType</code> value from the
<code>fuchsia.sysmem/image_formats.fidl</code> FIDL interface</p>
</li>
<li>
<p><code>colorSpaceCount</code> the element count of <code>pColorSpaces</code></p>
</li>
<li>
<p><code>pColorSpaces</code> is a pointer to an array of
<a href="chap12.html#VkSysmemColorSpaceFUCHSIA">VkSysmemColorSpaceFUCHSIA</a> structs of size <code>colorSpaceCount</code></p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageFormatConstraintsInfoFUCHSIA-sType-sType" href="chap12.html#VUID-VkImageFormatConstraintsInfoFUCHSIA-sType-sType"></a> <span class="vuid">VUID-VkImageFormatConstraintsInfoFUCHSIA-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_FORMAT_CONSTRAINTS_INFO_FUCHSIA</code></p>
</li>
<li>
<p><a id="VUID-VkImageFormatConstraintsInfoFUCHSIA-pNext-pNext" href="chap12.html#VUID-VkImageFormatConstraintsInfoFUCHSIA-pNext-pNext"></a> <span class="vuid">VUID-VkImageFormatConstraintsInfoFUCHSIA-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkImageFormatConstraintsInfoFUCHSIA-imageCreateInfo-parameter" href="chap12.html#VUID-VkImageFormatConstraintsInfoFUCHSIA-imageCreateInfo-parameter"></a> <span class="vuid">VUID-VkImageFormatConstraintsInfoFUCHSIA-imageCreateInfo-parameter</span><br>
 <code>imageCreateInfo</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageFormatConstraintsInfoFUCHSIA-requiredFormatFeatures-parameter" href="chap12.html#VUID-VkImageFormatConstraintsInfoFUCHSIA-requiredFormatFeatures-parameter"></a> <span class="vuid">VUID-VkImageFormatConstraintsInfoFUCHSIA-requiredFormatFeatures-parameter</span><br>
 <code>requiredFormatFeatures</code> <strong class="purple">must</strong> be a valid combination of <a href="chap43.html#VkFormatFeatureFlagBits">VkFormatFeatureFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageFormatConstraintsInfoFUCHSIA-requiredFormatFeatures-requiredbitmask" href="chap12.html#VUID-VkImageFormatConstraintsInfoFUCHSIA-requiredFormatFeatures-requiredbitmask"></a> <span class="vuid">VUID-VkImageFormatConstraintsInfoFUCHSIA-requiredFormatFeatures-requiredbitmask</span><br>
 <code>requiredFormatFeatures</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageFormatConstraintsInfoFUCHSIA-flags-zerobitmask" href="chap12.html#VUID-VkImageFormatConstraintsInfoFUCHSIA-flags-zerobitmask"></a> <span class="vuid">VUID-VkImageFormatConstraintsInfoFUCHSIA-flags-zerobitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkImageFormatConstraintsInfoFUCHSIA-pColorSpaces-parameter" href="chap12.html#VUID-VkImageFormatConstraintsInfoFUCHSIA-pColorSpaces-parameter"></a> <span class="vuid">VUID-VkImageFormatConstraintsInfoFUCHSIA-pColorSpaces-parameter</span><br>
 <code>pColorSpaces</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>colorSpaceCount</code> valid <a href="chap12.html#VkSysmemColorSpaceFUCHSIA">VkSysmemColorSpaceFUCHSIA</a> structures</p>
</li>
<li>
<p><a id="VUID-VkImageFormatConstraintsInfoFUCHSIA-colorSpaceCount-arraylength" href="chap12.html#VUID-VkImageFormatConstraintsInfoFUCHSIA-colorSpaceCount-arraylength"></a> <span class="vuid">VUID-VkImageFormatConstraintsInfoFUCHSIA-colorSpaceCount-arraylength</span><br>
 <code>colorSpaceCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkImageFormatConstraintsFlagsFUCHSIA" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_FUCHSIA_buffer_collection</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkImageFormatConstraintsFlagsFUCHSIA</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkImageFormatConstraintsFlagsFUCHSIA</code> is a bitmask type for setting a
mask, but is currently reserved for future use.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferCollectionConstraintsInfoFUCHSIA</code> structure is defined as:</p>
</div>
<div id="VkBufferCollectionConstraintsInfoFUCHSIA" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_FUCHSIA_buffer_collection</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBufferCollectionConstraintsInfoFUCHSIA</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">minBufferCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">maxBufferCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">minBufferCountForCamping</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">minBufferCountForDedicatedSlack</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">minBufferCountForSharedSlack</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBufferCollectionConstraintsInfoFUCHSIA</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure</p>
</li>
<li>
<p><code>minBufferCount</code> is the minimum number of buffers available in the
collection</p>
</li>
<li>
<p><code>maxBufferCount</code> is the maximum number of buffers allowed in the
collection</p>
</li>
<li>
<p><code>minBufferCountForCamping</code> is the per-participant minimum buffers
for camping</p>
</li>
<li>
<p><code>minBufferCountForDedicatedSlack</code> is the per-participant minimum
buffers for dedicated slack</p>
</li>
<li>
<p><code>minBufferCountForSharedSlack</code> is the per-participant minimum
buffers for shared slack</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Sysmem uses all buffer count parameters in combination to determine the
number of buffers it will allocate.
Sysmem defines buffer count constraints in
<code>fuchsia.sysmem/constraints.fidl</code>.</p>
</div>
<div class="paragraph">
<p><em>Camping</em> as referred to by <code>minBufferCountForCamping</code>, is the number of
buffers that should be available for the participant that are not for
transient use.
This number of buffers is required for the participant to logically operate.</p>
</div>
<div class="paragraph">
<p><em>Slack</em> as referred to by <code>minBufferCountForDedicatedSlack</code> and
<code>minBufferCountForSharedSlack</code>, refers to the number of buffers desired
by participants for optimal performance.
<code>minBufferCountForDedicatedSlack</code> refers to the current participant.
<code>minBufferCountForSharedSlack</code> refers to buffer slack for all
participants in the collection.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCollectionConstraintsInfoFUCHSIA-sType-sType" href="chap12.html#VUID-VkBufferCollectionConstraintsInfoFUCHSIA-sType-sType"></a> <span class="vuid">VUID-VkBufferCollectionConstraintsInfoFUCHSIA-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_COLLECTION_CONSTRAINTS_INFO_FUCHSIA</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCollectionConstraintsInfoFUCHSIA-pNext-pNext" href="chap12.html#VUID-VkBufferCollectionConstraintsInfoFUCHSIA-pNext-pNext"></a> <span class="vuid">VUID-VkBufferCollectionConstraintsInfoFUCHSIA-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkSysmemColorSpaceFUCHSIA</code> structure is defined as:</p>
</div>
<div id="VkSysmemColorSpaceFUCHSIA" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_FUCHSIA_buffer_collection</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkSysmemColorSpaceFUCHSIA</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">colorSpace</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkSysmemColorSpaceFUCHSIA</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure</p>
</li>
<li>
<p><code>colorSpace</code> value of the Sysmem <code>ColorSpaceType</code></p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSysmemColorSpaceFUCHSIA-colorSpace-06402" href="chap12.html#VUID-VkSysmemColorSpaceFUCHSIA-colorSpace-06402"></a> <span class="vuid">VUID-VkSysmemColorSpaceFUCHSIA-colorSpace-06402</span><br>

<code>colorSpace</code> <strong class="purple">must</strong> be a <code>ColorSpaceType</code> as defined in
<code>fuchsia.sysmem/image_formats.fidl</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSysmemColorSpaceFUCHSIA-sType-sType" href="chap12.html#VUID-VkSysmemColorSpaceFUCHSIA-sType-sType"></a> <span class="vuid">VUID-VkSysmemColorSpaceFUCHSIA-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_SYSMEM_COLOR_SPACE_FUCHSIA</code></p>
</li>
<li>
<p><a id="VUID-VkSysmemColorSpaceFUCHSIA-pNext-pNext" href="chap12.html#VUID-VkSysmemColorSpaceFUCHSIA-pNext-pNext"></a> <span class="vuid">VUID-VkSysmemColorSpaceFUCHSIA-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_set_buffer_based_buffer_collection_constraints"><a class="anchor" href="chap12.html#_set_buffer_based_buffer_collection_constraints"></a>Set buffer-based buffer collection constraints</h5>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To set the constraints on a <a href="chap12.html#VkBuffer">VkBuffer</a> buffer collection, call:</p>
</div>
<div id="vkSetBufferCollectionBufferConstraintsFUCHSIA" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_FUCHSIA_buffer_collection</span>
<span class="n">VkResult</span> <span class="nf">vkSetBufferCollectionBufferConstraintsFUCHSIA</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkBufferCollectionFUCHSIA</span>                   <span class="n">collection</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBufferConstraintsInfoFUCHSIA</span><span class="o">*</span>       <span class="n">pBufferConstraintsInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device</p>
</li>
<li>
<p><code>collection</code> is the <a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><code>pBufferConstraintsInfo</code> is a pointer to a
<a href="chap12.html#VkBufferConstraintsInfoFUCHSIA">VkBufferConstraintsInfoFUCHSIA</a> structure</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkSetBufferCollectionBufferConstraintsFUCHSIA</code> <strong class="purple">may</strong> fail if the
implementation does not support the constraints specified in the
<code>bufferCollectionConstraints</code> structure.
If that occurs, <a href="chap12.html#vkSetBufferCollectionBufferConstraintsFUCHSIA">vkSetBufferCollectionBufferConstraintsFUCHSIA</a> will
return <code>VK_ERROR_FORMAT_NOT_SUPPORTED</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-collection-06403" href="chap12.html#VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-collection-06403"></a> <span class="vuid">VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-collection-06403</span><br>

<code>vkSetBufferCollectionImageConstraintsFUCHSIA</code> or
<code>vkSetBufferCollectionBufferConstraintsFUCHSIA</code> <strong class="purple">must</strong> not have
already been called on <code>collection</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-device-parameter" href="chap12.html#VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-device-parameter"></a> <span class="vuid">VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-collection-parameter" href="chap12.html#VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-collection-parameter"></a> <span class="vuid">VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-collection-parameter</span><br>
 <code>collection</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><a id="VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-pBufferConstraintsInfo-parameter" href="chap12.html#VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-pBufferConstraintsInfo-parameter"></a> <span class="vuid">VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-pBufferConstraintsInfo-parameter</span><br>
 <code>pBufferConstraintsInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkBufferConstraintsInfoFUCHSIA">VkBufferConstraintsInfoFUCHSIA</a> structure</p>
</li>
<li>
<p><a id="VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-collection-parent" href="chap12.html#VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-collection-parent"></a> <span class="vuid">VUID-vkSetBufferCollectionBufferConstraintsFUCHSIA-collection-parent</span><br>
 <code>collection</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_FORMAT_NOT_SUPPORTED</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferConstraintsInfoFUCHSIA</code> structure is defined as:</p>
</div>
<div id="VkBufferConstraintsInfoFUCHSIA" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_FUCHSIA_buffer_collection</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBufferConstraintsInfoFUCHSIA</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                                 <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkBufferCreateInfo</span>                          <span class="n">createInfo</span><span class="p">;</span>
    <span class="n">VkFormatFeatureFlags</span>                        <span class="n">requiredFormatFeatures</span><span class="p">;</span>
    <span class="n">VkBufferCollectionConstraintsInfoFUCHSIA</span>    <span class="n">bufferCollectionConstraints</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBufferConstraintsInfoFUCHSIA</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure</p>
</li>
<li>
<p><code>pBufferCreateInfo</code> a pointer to a <a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a> struct
describing the buffer attributes for the buffer collection</p>
</li>
<li>
<p><code>requiredFormatFeatures</code> bitmask of <code>VkFormatFeatureFlagBits</code>
required features of the buffers in the buffer collection</p>
</li>
<li>
<p><code>bufferCollectionConstraints</code> is used to supply parameters for the
negotiation and allocation of the buffer collection</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferConstraintsInfoFUCHSIA-requiredFormatFeatures-06404" href="chap12.html#VUID-VkBufferConstraintsInfoFUCHSIA-requiredFormatFeatures-06404"></a> <span class="vuid">VUID-VkBufferConstraintsInfoFUCHSIA-requiredFormatFeatures-06404</span><br>

The <code>requiredFormatFeatures</code> bitmask of
<code>VkFormatFeatureFlagBits</code> <strong class="purple">must</strong> be chosen from among the buffer
compatible format features listed in
<a href="chap43.html#buffer-compatible-format-features">buffer compatible format features</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferConstraintsInfoFUCHSIA-sType-sType" href="chap12.html#VUID-VkBufferConstraintsInfoFUCHSIA-sType-sType"></a> <span class="vuid">VUID-VkBufferConstraintsInfoFUCHSIA-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_CONSTRAINTS_INFO_FUCHSIA</code></p>
</li>
<li>
<p><a id="VUID-VkBufferConstraintsInfoFUCHSIA-pNext-pNext" href="chap12.html#VUID-VkBufferConstraintsInfoFUCHSIA-pNext-pNext"></a> <span class="vuid">VUID-VkBufferConstraintsInfoFUCHSIA-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkBufferConstraintsInfoFUCHSIA-createInfo-parameter" href="chap12.html#VUID-VkBufferConstraintsInfoFUCHSIA-createInfo-parameter"></a> <span class="vuid">VUID-VkBufferConstraintsInfoFUCHSIA-createInfo-parameter</span><br>
 <code>createInfo</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-VkBufferConstraintsInfoFUCHSIA-requiredFormatFeatures-parameter" href="chap12.html#VUID-VkBufferConstraintsInfoFUCHSIA-requiredFormatFeatures-parameter"></a> <span class="vuid">VUID-VkBufferConstraintsInfoFUCHSIA-requiredFormatFeatures-parameter</span><br>
 <code>requiredFormatFeatures</code> <strong class="purple">must</strong> be a valid combination of <a href="chap43.html#VkFormatFeatureFlagBits">VkFormatFeatureFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkBufferConstraintsInfoFUCHSIA-bufferCollectionConstraints-parameter" href="chap12.html#VUID-VkBufferConstraintsInfoFUCHSIA-bufferCollectionConstraints-parameter"></a> <span class="vuid">VUID-VkBufferConstraintsInfoFUCHSIA-bufferCollectionConstraints-parameter</span><br>
 <code>bufferCollectionConstraints</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBufferCollectionConstraintsInfoFUCHSIA">VkBufferCollectionConstraintsInfoFUCHSIA</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_retrieve_buffer_collection_properties"><a class="anchor" href="chap12.html#_retrieve_buffer_collection_properties"></a>12.10.5. Retrieve buffer collection properties</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>After constraints have been set on the buffer collection by calling
<a href="chap12.html#vkSetBufferCollectionImageConstraintsFUCHSIA">vkSetBufferCollectionImageConstraintsFUCHSIA</a> or
<a href="chap12.html#vkSetBufferCollectionBufferConstraintsFUCHSIA">vkSetBufferCollectionBufferConstraintsFUCHSIA</a>, call
<code>vkGetBufferCollectionPropertiesFUCHSIA</code> to retrieve the negotiated and
finalized properties of the buffer collection.</p>
</div>
<div class="paragraph">
<p>The call to <code>vkGetBufferCollectionPropertiesFUCHSIA</code> is synchronous.
It waits for the Sysmem format negotiation and buffer collection allocation
to complete before returning.</p>
</div>
<div id="vkGetBufferCollectionPropertiesFUCHSIA" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_FUCHSIA_buffer_collection</span>
<span class="n">VkResult</span> <span class="nf">vkGetBufferCollectionPropertiesFUCHSIA</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkBufferCollectionFUCHSIA</span>                   <span class="n">collection</span><span class="p">,</span>
    <span class="n">VkBufferCollectionPropertiesFUCHSIA</span><span class="o">*</span>        <span class="n">pProperties</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device handle</p>
</li>
<li>
<p><code>collection</code> is the <a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><code>pProperties</code> is a pointer to the retrieved
<a href="chap12.html#VkBufferCollectionPropertiesFUCHSIA">VkBufferCollectionPropertiesFUCHSIA</a> struct</p>
</li>
</ul>
</div>
<div id="sysmem-chosen-create-infos" class="paragraph">
<p>For image-based buffer collections, upon calling
<code>vkGetBufferCollectionPropertiesFUCHSIA</code>, Sysmem will choose an element
of the <a href="chap12.html#VkImageConstraintsInfoFUCHSIA">VkImageConstraintsInfoFUCHSIA</a>::<code>pImageCreateInfos</code>
established by the preceding call to
<a href="chap12.html#vkSetBufferCollectionImageConstraintsFUCHSIA">vkSetBufferCollectionImageConstraintsFUCHSIA</a>.
The index of the element chosen is stored in and can be retrieved from
<a href="chap12.html#VkBufferCollectionPropertiesFUCHSIA">VkBufferCollectionPropertiesFUCHSIA</a>::<code>createInfoIndex</code>.</p>
</div>
<div class="paragraph">
<p>For buffer-based buffer collections, a single <a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a> is
specified as <a href="chap12.html#VkBufferConstraintsInfoFUCHSIA">VkBufferConstraintsInfoFUCHSIA</a>::<code>createInfo</code>.
<a href="chap12.html#VkBufferCollectionPropertiesFUCHSIA">VkBufferCollectionPropertiesFUCHSIA</a>::<code>createInfoIndex</code> will
therefore always be zero.</p>
</div>
<div class="paragraph">
<p><code>vkGetBufferCollectionPropertiesFUCHSIA</code> <strong class="purple">may</strong> fail if Sysmem is unable
to resolve the constraints of all of the participants in the buffer
collection.
If that occurs, <code>vkGetBufferCollectionPropertiesFUCHSIA</code> will return
<code>VK_ERROR_INITIALIZATION_FAILED</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetBufferCollectionPropertiesFUCHSIA-None-06405" href="chap12.html#VUID-vkGetBufferCollectionPropertiesFUCHSIA-None-06405"></a> <span class="vuid">VUID-vkGetBufferCollectionPropertiesFUCHSIA-None-06405</span><br>

Prior to calling <a href="chap12.html#vkGetBufferCollectionPropertiesFUCHSIA">vkGetBufferCollectionPropertiesFUCHSIA</a>, the
constraints on the buffer collection <strong class="purple">must</strong> have been set by either
<a href="chap12.html#vkSetBufferCollectionImageConstraintsFUCHSIA">vkSetBufferCollectionImageConstraintsFUCHSIA</a> or
<a href="chap12.html#vkSetBufferCollectionBufferConstraintsFUCHSIA">vkSetBufferCollectionBufferConstraintsFUCHSIA</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetBufferCollectionPropertiesFUCHSIA-device-parameter" href="chap12.html#VUID-vkGetBufferCollectionPropertiesFUCHSIA-device-parameter"></a> <span class="vuid">VUID-vkGetBufferCollectionPropertiesFUCHSIA-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetBufferCollectionPropertiesFUCHSIA-collection-parameter" href="chap12.html#VUID-vkGetBufferCollectionPropertiesFUCHSIA-collection-parameter"></a> <span class="vuid">VUID-vkGetBufferCollectionPropertiesFUCHSIA-collection-parameter</span><br>
 <code>collection</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetBufferCollectionPropertiesFUCHSIA-pProperties-parameter" href="chap12.html#VUID-vkGetBufferCollectionPropertiesFUCHSIA-pProperties-parameter"></a> <span class="vuid">VUID-vkGetBufferCollectionPropertiesFUCHSIA-pProperties-parameter</span><br>
 <code>pProperties</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkBufferCollectionPropertiesFUCHSIA">VkBufferCollectionPropertiesFUCHSIA</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetBufferCollectionPropertiesFUCHSIA-collection-parent" href="chap12.html#VUID-vkGetBufferCollectionPropertiesFUCHSIA-collection-parent"></a> <span class="vuid">VUID-vkGetBufferCollectionPropertiesFUCHSIA-collection-parent</span><br>
 <code>collection</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferCollectionPropertiesFUCHSIA</code> structure is defined as:</p>
</div>
<div id="VkBufferCollectionPropertiesFUCHSIA" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_FUCHSIA_buffer_collection</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBufferCollectionPropertiesFUCHSIA</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                  <span class="n">sType</span><span class="p">;</span>
    <span class="kt">void</span><span class="o">*</span>                            <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                         <span class="n">memoryTypeBits</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                         <span class="n">bufferCount</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                         <span class="n">createInfoIndex</span><span class="p">;</span>
    <span class="kt">uint64_t</span>                         <span class="n">sysmemPixelFormat</span><span class="p">;</span>
    <span class="n">VkFormatFeatureFlags</span>             <span class="n">formatFeatures</span><span class="p">;</span>
    <span class="n">VkSysmemColorSpaceFUCHSIA</span>        <span class="n">sysmemColorSpaceIndex</span><span class="p">;</span>
    <span class="n">VkComponentMapping</span>               <span class="n">samplerYcbcrConversionComponents</span><span class="p">;</span>
    <span class="n">VkSamplerYcbcrModelConversion</span>    <span class="n">suggestedYcbcrModel</span><span class="p">;</span>
    <span class="n">VkSamplerYcbcrRange</span>              <span class="n">suggestedYcbcrRange</span><span class="p">;</span>
    <span class="n">VkChromaLocation</span>                 <span class="n">suggestedXChromaOffset</span><span class="p">;</span>
    <span class="n">VkChromaLocation</span>                 <span class="n">suggestedYChromaOffset</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBufferCollectionPropertiesFUCHSIA</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure</p>
</li>
<li>
<p><code>memoryTypeBits</code> is a bitmask containing one bit set for every
memory type which the buffer collection can be imported as buffer
collection</p>
</li>
<li>
<p><code>bufferCount</code> is the number of buffers in the collection</p>
</li>
<li>
<p><code>createInfoIndex</code> as described in <a href="chap12.html#sysmem-chosen-create-infos">Sysmem chosen create infos</a></p>
</li>
<li>
<p><code>sysmemPixelFormat</code> is the Sysmem <code>PixelFormatType</code> as defined in
<code>fuchsia.sysmem/image_formats.fidl</code></p>
</li>
<li>
<p><code>formatFeatures</code> is a bitmask of <a href="chap43.html#VkFormatFeatureFlagBits">VkFormatFeatureFlagBits</a>
shared by the buffer collection</p>
</li>
<li>
<p><code>sysmemColorSpaceIndex</code> is a <a href="chap12.html#VkSysmemColorSpaceFUCHSIA">VkSysmemColorSpaceFUCHSIA</a> struct
specifying the color space</p>
</li>
<li>
<p><code>samplerYcbcrConversionComponents</code> is a <a href="chap12.html#VkComponentMapping">VkComponentMapping</a>
struct specifying the component mapping</p>
</li>
<li>
<p><code>suggestedYcbcrModel</code> is a <a href="chap13.html#VkSamplerYcbcrModelConversion">VkSamplerYcbcrModelConversion</a> value
specifying the suggested Y′C<sub>B</sub>C<sub>R</sub> model</p>
</li>
<li>
<p><code>suggestedYcbcrRange</code> is a <a href="chap13.html#VkSamplerYcbcrRange">VkSamplerYcbcrRange</a> value
specifying the suggested Y′C<sub>B</sub>C<sub>R</sub> range</p>
</li>
<li>
<p><code>suggestedXChromaOffset</code> is a <a href="chap13.html#VkChromaLocation">VkChromaLocation</a> value
specifying the suggested X chroma offset</p>
</li>
<li>
<p><code>suggestedYChromaOffset</code> is a <a href="chap13.html#VkChromaLocation">VkChromaLocation</a> value
specifying the suggested Y chroma offset</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>sysmemColorSpace</code> is only set for image-based buffer collections where
the constraints were specified using <a href="chap12.html#VkImageConstraintsInfoFUCHSIA">VkImageConstraintsInfoFUCHSIA</a> in
a call to <a href="chap12.html#vkSetBufferCollectionImageConstraintsFUCHSIA">vkSetBufferCollectionImageConstraintsFUCHSIA</a>.</p>
</div>
<div class="paragraph">
<p>For image-based buffer collections, <code>createInfoIndex</code> will identify both
the <a href="chap12.html#VkImageConstraintsInfoFUCHSIA">VkImageConstraintsInfoFUCHSIA</a>::<code>pImageCreateInfos</code> element and
the <a href="chap12.html#VkImageConstraintsInfoFUCHSIA">VkImageConstraintsInfoFUCHSIA</a>::<code>pFormatConstraints</code> element
chosen by Sysmem when <a href="chap12.html#vkSetBufferCollectionImageConstraintsFUCHSIA">vkSetBufferCollectionImageConstraintsFUCHSIA</a> was
called.
The value of <code>sysmemColorSpaceIndex</code> will be an index to one of the
color spaces provided in the
<a href="chap12.html#VkImageFormatConstraintsInfoFUCHSIA">VkImageFormatConstraintsInfoFUCHSIA</a>::<code>pColorSpaces</code> array.</p>
</div>
<div class="paragraph">
<p>The implementation must have <code>formatFeatures</code> with all bits set that
were set in
<a href="chap12.html#VkImageFormatConstraintsInfoFUCHSIA">VkImageFormatConstraintsInfoFUCHSIA</a>::<code>requiredFormatFeatures</code>, by
the call to <a href="chap12.html#vkSetBufferCollectionImageConstraintsFUCHSIA">vkSetBufferCollectionImageConstraintsFUCHSIA</a>, at
<code>createInfoIndex</code> (other bits could be set as well).</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCollectionPropertiesFUCHSIA-sType-sType" href="chap12.html#VUID-VkBufferCollectionPropertiesFUCHSIA-sType-sType"></a> <span class="vuid">VUID-VkBufferCollectionPropertiesFUCHSIA-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_COLLECTION_PROPERTIES_FUCHSIA</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCollectionPropertiesFUCHSIA-pNext-pNext" href="chap12.html#VUID-VkBufferCollectionPropertiesFUCHSIA-pNext-pNext"></a> <span class="vuid">VUID-VkBufferCollectionPropertiesFUCHSIA-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCollectionPropertiesFUCHSIA-formatFeatures-parameter" href="chap12.html#VUID-VkBufferCollectionPropertiesFUCHSIA-formatFeatures-parameter"></a> <span class="vuid">VUID-VkBufferCollectionPropertiesFUCHSIA-formatFeatures-parameter</span><br>
 <code>formatFeatures</code> <strong class="purple">must</strong> be a valid combination of <a href="chap43.html#VkFormatFeatureFlagBits">VkFormatFeatureFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkBufferCollectionPropertiesFUCHSIA-formatFeatures-requiredbitmask" href="chap12.html#VUID-VkBufferCollectionPropertiesFUCHSIA-formatFeatures-requiredbitmask"></a> <span class="vuid">VUID-VkBufferCollectionPropertiesFUCHSIA-formatFeatures-requiredbitmask</span><br>
 <code>formatFeatures</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCollectionPropertiesFUCHSIA-sysmemColorSpaceIndex-parameter" href="chap12.html#VUID-VkBufferCollectionPropertiesFUCHSIA-sysmemColorSpaceIndex-parameter"></a> <span class="vuid">VUID-VkBufferCollectionPropertiesFUCHSIA-sysmemColorSpaceIndex-parameter</span><br>
 <code>sysmemColorSpaceIndex</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkSysmemColorSpaceFUCHSIA">VkSysmemColorSpaceFUCHSIA</a> structure</p>
</li>
<li>
<p><a id="VUID-VkBufferCollectionPropertiesFUCHSIA-samplerYcbcrConversionComponents-parameter" href="chap12.html#VUID-VkBufferCollectionPropertiesFUCHSIA-samplerYcbcrConversionComponents-parameter"></a> <span class="vuid">VUID-VkBufferCollectionPropertiesFUCHSIA-samplerYcbcrConversionComponents-parameter</span><br>
 <code>samplerYcbcrConversionComponents</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkComponentMapping">VkComponentMapping</a> structure</p>
</li>
<li>
<p><a id="VUID-VkBufferCollectionPropertiesFUCHSIA-suggestedYcbcrModel-parameter" href="chap12.html#VUID-VkBufferCollectionPropertiesFUCHSIA-suggestedYcbcrModel-parameter"></a> <span class="vuid">VUID-VkBufferCollectionPropertiesFUCHSIA-suggestedYcbcrModel-parameter</span><br>
 <code>suggestedYcbcrModel</code> <strong class="purple">must</strong> be a valid <a href="chap13.html#VkSamplerYcbcrModelConversion">VkSamplerYcbcrModelConversion</a> value</p>
</li>
<li>
<p><a id="VUID-VkBufferCollectionPropertiesFUCHSIA-suggestedYcbcrRange-parameter" href="chap12.html#VUID-VkBufferCollectionPropertiesFUCHSIA-suggestedYcbcrRange-parameter"></a> <span class="vuid">VUID-VkBufferCollectionPropertiesFUCHSIA-suggestedYcbcrRange-parameter</span><br>
 <code>suggestedYcbcrRange</code> <strong class="purple">must</strong> be a valid <a href="chap13.html#VkSamplerYcbcrRange">VkSamplerYcbcrRange</a> value</p>
</li>
<li>
<p><a id="VUID-VkBufferCollectionPropertiesFUCHSIA-suggestedXChromaOffset-parameter" href="chap12.html#VUID-VkBufferCollectionPropertiesFUCHSIA-suggestedXChromaOffset-parameter"></a> <span class="vuid">VUID-VkBufferCollectionPropertiesFUCHSIA-suggestedXChromaOffset-parameter</span><br>
 <code>suggestedXChromaOffset</code> <strong class="purple">must</strong> be a valid <a href="chap13.html#VkChromaLocation">VkChromaLocation</a> value</p>
</li>
<li>
<p><a id="VUID-VkBufferCollectionPropertiesFUCHSIA-suggestedYChromaOffset-parameter" href="chap12.html#VUID-VkBufferCollectionPropertiesFUCHSIA-suggestedYChromaOffset-parameter"></a> <span class="vuid">VUID-VkBufferCollectionPropertiesFUCHSIA-suggestedYChromaOffset-parameter</span><br>
 <code>suggestedYChromaOffset</code> <strong class="purple">must</strong> be a valid <a href="chap13.html#VkChromaLocation">VkChromaLocation</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_memory_allocation"><a class="anchor" href="chap12.html#_memory_allocation"></a>12.10.6. Memory allocation</h4>
<div class="paragraph">
<p>To import memory from a buffer collection into a <a href="chap12.html#VkImage">VkImage</a> or a
<a href="chap12.html#VkBuffer">VkBuffer</a>, chain a <a href="chap12.html#VkImportMemoryBufferCollectionFUCHSIA">VkImportMemoryBufferCollectionFUCHSIA</a>
structure to the <code>pNext</code> member of the <a href="chap11.html#VkMemoryAllocateInfo">VkMemoryAllocateInfo</a> in the
call to <a href="chap11.html#vkAllocateMemory">vkAllocateMemory</a>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImportMemoryBufferCollectionFUCHSIA</code> structure is defined as:</p>
</div>
<div id="VkImportMemoryBufferCollectionFUCHSIA" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_FUCHSIA_buffer_collection</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImportMemoryBufferCollectionFUCHSIA</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>              <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                  <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkBufferCollectionFUCHSIA</span>    <span class="n">collection</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                     <span class="n">index</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImportMemoryBufferCollectionFUCHSIA</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure</p>
</li>
<li>
<p><code>collection</code> is the <a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><code>index</code> the index of the buffer to import from <code>collection</code></p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImportMemoryBufferCollectionFUCHSIA-index-06406" href="chap12.html#VUID-VkImportMemoryBufferCollectionFUCHSIA-index-06406"></a> <span class="vuid">VUID-VkImportMemoryBufferCollectionFUCHSIA-index-06406</span><br>

<code>index</code> <strong class="purple">must</strong> be less than the value retrieved as
<a href="chap12.html#VkBufferCollectionPropertiesFUCHSIA">VkBufferCollectionPropertiesFUCHSIA</a>:bufferCount</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImportMemoryBufferCollectionFUCHSIA-sType-sType" href="chap12.html#VUID-VkImportMemoryBufferCollectionFUCHSIA-sType-sType"></a> <span class="vuid">VUID-VkImportMemoryBufferCollectionFUCHSIA-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMPORT_MEMORY_BUFFER_COLLECTION_FUCHSIA</code></p>
</li>
<li>
<p><a id="VUID-VkImportMemoryBufferCollectionFUCHSIA-collection-parameter" href="chap12.html#VUID-VkImportMemoryBufferCollectionFUCHSIA-collection-parameter"></a> <span class="vuid">VUID-VkImportMemoryBufferCollectionFUCHSIA-collection-parameter</span><br>
 <code>collection</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To release a <a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a>:</p>
</div>
<div id="vkDestroyBufferCollectionFUCHSIA" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_FUCHSIA_buffer_collection</span>
<span class="kt">void</span> <span class="nf">vkDestroyBufferCollectionFUCHSIA</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkBufferCollectionFUCHSIA</span>                   <span class="n">collection</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the
<code>VkBufferCollectionFUCHSIA</code></p>
</li>
<li>
<p><code>collection</code> is the <a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><code>pAllocator</code> is a pointer to a <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure
controlling host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyBufferCollectionFUCHSIA-collection-06407" href="chap12.html#VUID-vkDestroyBufferCollectionFUCHSIA-collection-06407"></a> <span class="vuid">VUID-vkDestroyBufferCollectionFUCHSIA-collection-06407</span><br>

<a href="chap12.html#VkImage">VkImage</a> and <a href="chap12.html#VkBuffer">VkBuffer</a> objects that referenced
<code>collection</code> upon creation by inclusion of a
<a href="chap12.html#VkBufferCollectionImageCreateInfoFUCHSIA">VkBufferCollectionImageCreateInfoFUCHSIA</a> or
<a href="chap12.html#VkBufferCollectionBufferCreateInfoFUCHSIA">VkBufferCollectionBufferCreateInfoFUCHSIA</a> chained to their
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> or <a href="chap12.html#VkBufferCreateInfo">VkBufferCreateInfo</a> structures
respectively, <strong class="purple">may</strong> outlive <code>collection</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyBufferCollectionFUCHSIA-device-parameter" href="chap12.html#VUID-vkDestroyBufferCollectionFUCHSIA-device-parameter"></a> <span class="vuid">VUID-vkDestroyBufferCollectionFUCHSIA-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyBufferCollectionFUCHSIA-collection-parameter" href="chap12.html#VUID-vkDestroyBufferCollectionFUCHSIA-collection-parameter"></a> <span class="vuid">VUID-vkDestroyBufferCollectionFUCHSIA-collection-parameter</span><br>
 <code>collection</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBufferCollectionFUCHSIA">VkBufferCollectionFUCHSIA</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyBufferCollectionFUCHSIA-pAllocator-parameter" href="chap12.html#VUID-vkDestroyBufferCollectionFUCHSIA-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyBufferCollectionFUCHSIA-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyBufferCollectionFUCHSIA-collection-parent" href="chap12.html#VUID-vkDestroyBufferCollectionFUCHSIA-collection-parent"></a> <span class="vuid">VUID-vkDestroyBufferCollectionFUCHSIA-collection-parent</span><br>
 <code>collection</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div></div>

<nav>
  <a rel="prev" href="chap11.html" class="nav nav-prev" title="Previous page" aria-label="Previous page" aria-keyshortcuts="Left">
        <i class="fa fa-angle-left"></i>
     </a>
  <a rel="next" href="chap13.html" class="nav nav-next" title="Next page" aria-label="Next page" aria-keyshortcuts="Right">
        <i class="fa fa-angle-right"></i>
     </a>
  <div style="clear: both"></div>
</nav>
<div id="footer">
<div id="footer-text">
Version 1.1.222<br>
Last updated 2022-06-15 23:17:00 -0700
</div>
</div>



</body>
  <script>
  function isInViewport(ele) {
    const rect = ele.getBoundingClientRect();
    return (
        rect.top >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight)
    );
  }
  function yPosition (ele) {
    const rect = ele.getBoundingClientRect();
    return (rect.top - 20); // 20px above
  }
  let curr = document.getElementsByClassName('current');
  if (!isInViewport(curr[curr.length - 1])) {
    document.getElementById('toc').scrollTo({
      top: yPosition(curr[0]),
      left: 0,
      behavior: 'smooth'
    });
  }

  /* For page navigation */
  function gotoPage(selector) {
    const button = document.querySelector(selector);
    if (button)
      window.location.href = button.href;
  }
  document.addEventListener('keydown', e => {
    switch (e.key) {
      case 'ArrowRight':
        e.preventDefault();
        gotoPage('.nav-next');
        break;
      case 'ArrowLeft':
        e.preventDefault();
        gotoPage('.nav-prev');
        break;
    }
  });
  </script>
  </html>