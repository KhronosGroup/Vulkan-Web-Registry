<!DOCTYPE html><html lang="en"><head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<meta name="author" content="The Khronos® Vulkan Working Group">
<title>Vulkan® 1.1.192 - A Specification (with all registered Vulkan extensions)</title>
<link rel="stylesheet" href="style0.css" type="text/css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="style1.css" type="text/css">
<link rel="stylesheet" href="style2.css" type="text/css">

<!-- dragged in by font-awesome css included by asciidoctor, but preloaded in this extension for convenience -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0" as="font" type="font/woff2" crossorigin="">

<!-- Note: Chrome needs crossorigin="" even for same-origin fonts -->
<link rel="preload" href="../katex/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Typewriter-Regular.woff2" as="font" type="font/woff2" crossorigin=""><link rel="stylesheet" href="../katex/katex.min.css">
<!--ChunkedSearchJSMarker-->
<link href="chunked.css?4" rel="stylesheet">
<script>var searchindexurl = 'search.index.js?4' + (document.title.replace(/[^0-9.]/g, ''));</script>
<script src="chunked.js?4"></script>
<link rel="stylesheet" href="style3.css" type="text/css">
<script>
    function hideElement(e){
        e.setAttribute("hidden", "");
        e.classList.add("hidden");
    }

    function unhideElement(e){
        e.classList.remove("hidden");
        e.removeAttribute("hidden");
    }

    function hideLoadableContent(){
        unhideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) hideElement(loadable);
    }

    function unhideLoadableContent(){
        hideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) unhideElement(loadable);
    }

    window.addEventListener("load", unhideLoadableContent);
</script>
<link rel="stylesheet" href="asciidoctor-chunker.css" type="text/css"></head>
<body class="book toc2 toc-left">
<div id="header" style="max-width: 100%;">
<h1>Vulkan<sup>®</sup> 1.1.192 - A Specification (with all registered Vulkan extensions)</h1>
<div class="details">
<span id="author" class="author">The Khronos<sup>®</sup> Vulkan Working Group</span><br>
<span id="revnumber">version 1.1.192,</span>
<span id="revdate">2021-09-14 10:25:18Z</span>
<br><span id="revremark">from git branch: github-main commit: a09f9efe488cdd97c0362622fc1187f09302689e</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="index.html">Titlepage</a></li><li><a href="chap1.html">1. Preamble</a></li>
<li><a href="chap2.html">2. Introduction</a>
<ul class="sectlevel2">
<li><a href="chap2.html#introduction-conventions">2.1. Document Conventions</a></li>
</ul>
</li>
<li><a href="chap3.html">3. Fundamentals</a>
<ul class="sectlevel2">
<li><a href="chap3.html#fundamentals-host-environment">3.1. Host and Device Environment</a></li>
<li><a href="chap3.html#fundamentals-execmodel">3.2. Execution Model</a></li>
<li><a href="chap3.html#fundamentals-objectmodel-overview">3.3. Object Model</a></li>
<li><a href="chap3.html#fundamentals-abi">3.4. Application Binary Interface</a></li>
<li><a href="chap3.html#fundamentals-commandsyntax">3.5. Command Syntax and Duration</a></li>
<li><a href="chap3.html#fundamentals-threadingbehavior">3.6. Threading Behavior</a></li>
<li><a href="chap3.html#fundamentals-validusage">3.7. Valid Usage</a></li>
<li><a href="chap3.html#fundamentals-returncodes">3.8. <code>VkResult</code> Return Codes</a></li>
<li><a href="chap3.html#fundamentals-numerics">3.9. Numeric Representation and Computation</a></li>
<li><a href="chap3.html#fundamentals-fixedconv">3.10. Fixed-Point Data Conversions</a></li>
<li><a href="chap3.html#fundamentals-common-objects">3.11. Common Object Types</a></li>
</ul>
</li>
<li><a href="chap4.html">4. Initialization</a>
<ul class="sectlevel2">
<li><a href="chap4.html#initialization-functionpointers">4.1. Command Function Pointers</a></li>
<li><a href="chap4.html#initialization-instances">4.2. Instances</a></li>
</ul>
</li>
<li><a href="chap5.html">5. Devices and Queues</a>
<ul class="sectlevel2">
<li><a href="chap5.html#devsandqueues-physical-device-enumeration">5.1. Physical Devices</a></li>
<li><a href="chap5.html#devsandqueues-devices">5.2. Devices</a></li>
<li><a href="chap5.html#devsandqueues-queues">5.3. Queues</a></li>
</ul>
</li>
<li><a href="chap6.html">6. Command Buffers</a>
<ul class="sectlevel2">
<li><a href="chap6.html#commandbuffers-lifecycle">6.1. Command Buffer Lifecycle</a></li>
<li><a href="chap6.html#commandbuffers-pools">6.2. Command Pools</a></li>
<li><a href="chap6.html#commandbuffer-allocation">6.3. Command Buffer Allocation and Management</a></li>
<li><a href="chap6.html#commandbuffers-recording">6.4. Command Buffer Recording</a></li>
<li><a href="chap6.html#commandbuffers-submission">6.5. Command Buffer Submission</a></li>
<li><a href="chap6.html#commandbuffers-submission-progress">6.6. Queue Forward Progress</a></li>
<li><a href="chap6.html#commandbuffers-secondary">6.7. Secondary Command Buffer Execution</a></li>
<li><a href="chap6.html#commandbuffers-devicemask">6.8. Command Buffer Device Mask</a></li>
</ul>
</li>
<li><a href="chap7.html">7. Synchronization and Cache Control</a>
<ul class="sectlevel2">
<li><a href="chap7.html#synchronization-dependencies">7.1. Execution and Memory Dependencies</a></li>
<li><a href="chap7.html#synchronization-implicit">7.2. Implicit Synchronization Guarantees</a></li>
<li><a href="chap7.html#synchronization-fences">7.3. Fences</a></li>
<li><a href="chap7.html#synchronization-semaphores">7.4. Semaphores</a></li>
<li><a href="chap7.html#synchronization-events">7.5. Events</a></li>
<li><a href="chap7.html#synchronization-pipeline-barriers">7.6. Pipeline Barriers</a></li>
<li><a href="chap7.html#synchronization-memory-barriers">7.7. Memory Barriers</a></li>
<li><a href="chap7.html#synchronization-wait-idle">7.8. Wait Idle Operations</a></li>
<li><a href="chap7.html#synchronization-submission-host-writes">7.9. Host Write Ordering Guarantees</a></li>
<li><a href="chap7.html#synchronization-device-group">7.10. Synchronization and Multiple Physical Devices</a></li>
<li><a href="chap7.html#calibrated-timestamps">7.11. Calibrated timestamps</a></li>
</ul>
</li>
<li><a href="chap8.html">8. Render Pass</a>
<ul class="sectlevel2">
<li><a href="chap8.html#renderpass-creation">8.1. Render Pass Creation</a></li>
<li><a href="chap8.html#renderpass-compatibility">8.2. Render Pass Compatibility</a></li>
<li><a href="chap8.html#_framebuffers">8.3. Framebuffers</a></li>
<li><a href="chap8.html#renderpass-commands">8.4. Render Pass Commands</a></li>
</ul>
</li>
<li><a href="chap9.html">9. Shaders</a>
<ul class="sectlevel2">
<li><a href="chap9.html#shader-modules">9.1. Shader Modules</a></li>
<li><a href="chap9.html#shaders-execution">9.2. Shader Execution</a></li>
<li><a href="chap9.html#shaders-execution-memory-ordering">9.3. Shader Memory Access Ordering</a></li>
<li><a href="chap9.html#shaders-inputs">9.4. Shader Inputs and Outputs</a></li>
<li><a href="chap9.html#shaders-task">9.5. Task Shaders</a></li>
<li><a href="chap9.html#shaders-mesh">9.6. Mesh Shaders</a></li>
<li><a href="chap9.html#shaders-vertex">9.7. Vertex Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-control">9.8. Tessellation Control Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-evaluation">9.9. Tessellation Evaluation Shaders</a></li>
<li><a href="chap9.html#shaders-geometry">9.10. Geometry Shaders</a></li>
<li><a href="chap9.html#shaders-fragment">9.11. Fragment Shaders</a></li>
<li><a href="chap9.html#shaders-compute">9.12. Compute Shaders</a></li>
<li><a href="chap9.html#shaders-ray-generation">9.13. Ray Generation Shaders</a></li>
<li><a href="chap9.html#shaders-intersection">9.14. Intersection Shaders</a></li>
<li><a href="chap9.html#shaders-any-hit">9.15. Any-Hit Shaders</a></li>
<li><a href="chap9.html#shaders-closest-hit">9.16. Closest Hit Shaders</a></li>
<li><a href="chap9.html#shaders-miss">9.17. Miss Shaders</a></li>
<li><a href="chap9.html#shaders-callable">9.18. Callable Shaders</a></li>
<li><a href="chap9.html#shaders-interpolation-decorations">9.19. Interpolation Decorations</a></li>
<li><a href="chap9.html#shaders-staticuse">9.20. Static Use</a></li>
<li><a href="chap9.html#shaders-scope">9.21. Scope</a></li>
<li><a href="chap9.html#shaders-group-operations">9.22. Group Operations</a></li>
<li><a href="chap9.html#shaders-quad-operations">9.23. Quad Group Operations</a></li>
<li><a href="chap9.html#shaders-derivative-operations">9.24. Derivative Operations</a></li>
<li><a href="chap9.html#shaders-helper-invocations">9.25. Helper Invocations</a></li>
<li><a href="chap9.html#_cooperative_matrices">9.26. Cooperative Matrices</a></li>
<li><a href="chap9.html#shaders-validation-cache">9.27. Validation Cache</a></li>
</ul>
</li>
<li><a href="chap10.html">10. Pipelines</a>
<ul class="sectlevel2">
<li><a href="chap10.html#pipelines-compute">10.1. Compute Pipelines</a></li>
<li><a href="chap10.html#pipelines-graphics">10.2. Graphics Pipelines</a></li>
<li><a href="chap10.html#pipelines-ray-tracing">10.3. Ray Tracing Pipelines</a></li>
<li><a href="chap10.html#pipelines-destruction">10.4. Pipeline Destruction</a></li>
<li><a href="chap10.html#pipelines-multiple">10.5. Multiple Pipeline Creation</a></li>
<li><a href="chap10.html#pipelines-pipeline-derivatives">10.6. Pipeline Derivatives</a></li>
<li><a href="chap10.html#pipelines-cache">10.7. Pipeline Cache</a></li>
<li><a href="chap10.html#pipelines-specialization-constants">10.8. Specialization Constants</a></li>
<li><a href="chap10.html#pipeline-library">10.9. Pipeline Libraries</a></li>
<li><a href="chap10.html#pipelines-binding">10.10. Pipeline Binding</a></li>
<li><a href="chap10.html#pipelines-dynamic-state">10.11. Dynamic State</a></li>
<li><a href="chap10.html#pipelines-shader-information">10.12. Pipeline Shader Information</a></li>
<li><a href="chap10.html#pipelines-compiler-control">10.13. Pipeline Compiler Control</a></li>
<li><a href="chap10.html#pipelines-creation-feedback">10.14. Pipeline Creation Feedback</a></li>
</ul>
</li>
<li><a href="chap11.html">11. Memory Allocation</a>
<ul class="sectlevel2">
<li><a href="chap11.html#memory-host">11.1. Host Memory</a></li>
<li><a href="chap11.html#memory-device">11.2. Device Memory</a></li>
</ul>
</li>
<li><a href="chap12.html">12. Resource Creation</a>
<ul class="sectlevel2">
<li><a href="chap12.html#resources-buffers">12.1. Buffers</a></li>
<li><a href="chap12.html#resources-buffer-views">12.2. Buffer Views</a></li>
<li><a href="chap12.html#resources-images">12.3. Images</a></li>
<li><a href="chap12.html#resources-image-layouts">12.4. Image Layouts</a></li>
<li><a href="chap12.html#resources-image-views">12.5. Image Views</a></li>
<li><a href="chap12.html#resources-acceleration-structures">12.6. Acceleration Structures</a></li>
<li><a href="chap12.html#resources-association">12.7. Resource Memory Association</a></li>
<li><a href="chap12.html#resources-sharing">12.8. Resource Sharing Mode</a></li>
<li><a href="chap12.html#resources-memory-aliasing">12.9. Memory Aliasing</a></li>
</ul>
</li>
<li><a href="chap13.html">13. Samplers</a>
<ul class="sectlevel2">
<li><a href="chap13.html#samplers-YCbCr-conversion">13.1. Sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></li>
</ul>
</li>
<li><a href="chap14.html">14. Resource Descriptors</a>
<ul class="sectlevel2">
<li><a href="chap14.html#descriptorsets-types">14.1. Descriptor Types</a></li>
<li><a href="chap14.html#descriptorsets-sets">14.2. Descriptor Sets</a></li>
<li><a href="chap14.html#descriptorsets-physical-storage-buffer">14.3. Physical Storage Buffer Access</a></li>
</ul>
</li>
<li><a href="chap15.html">15. Shader Interfaces</a>
<ul class="sectlevel2">
<li><a href="chap15.html#interfaces-iointerfaces">15.1. Shader Input and Output Interfaces</a></li>
<li><a href="chap15.html#interfaces-vertexinput">15.2. Vertex Input Interface</a></li>
<li><a href="chap15.html#interfaces-fragmentoutput">15.3. Fragment Output Interface</a></li>
<li><a href="chap15.html#interfaces-inputattachment">15.4. Fragment Input Attachment Interface</a></li>
<li><a href="chap15.html#interfaces-raypipeline">15.5. Ray Tracing Pipeline Interface</a></li>
<li><a href="chap15.html#interfaces-resources">15.6. Shader Resource Interface</a></li>
<li><a href="chap15.html#interfaces-builtin-variables">15.7. Built-In Variables</a></li>
</ul>
</li>
<li><a href="chap16.html">16. Image Operations</a>
<ul class="sectlevel2">
<li><a href="chap16.html#_image_operations_overview">16.1. Image Operations Overview</a></li>
<li><a href="chap16.html#_conversion_formulas">16.2. Conversion Formulas</a></li>
<li><a href="chap16.html#_texel_input_operations">16.3. Texel Input Operations</a></li>
<li><a href="chap16.html#_texel_output_operations">16.4. Texel Output Operations</a></li>
<li><a href="chap16.html#textures-normalized-operations">16.5. Normalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#_unnormalized_texel_coordinate_operations">16.6. Unnormalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-integer-coordinate-operations">16.7. Integer Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-sample-operations">16.8. Image Sample Operations</a></li>
<li><a href="chap16.html#textures-footprint">16.9. Texel Footprint Evaluation</a></li>
<li><a href="chap16.html#textures-instructions">16.10. Image Operation Steps</a></li>
<li><a href="chap16.html#textures-queries">16.11. Image Query Instructions</a></li>
</ul>
</li>
<li><a href="chap17.html">17. Fragment Density Map Operations</a>
<ul class="sectlevel2">
<li><a href="chap17.html#_fragment_density_map_operations_overview">17.1. Fragment Density Map Operations Overview</a></li>
<li><a href="chap17.html#fragmentdensitymap-fetch-density-value">17.2. Fetch Density Value</a></li>
<li><a href="chap17.html#fragmentdensitymap-conversion-to-fragment-area">17.3. Fragment Area Conversion</a></li>
</ul>
</li>
<li><a href="chap18.html">18. Queries</a>
<ul class="sectlevel2">
<li><a href="chap18.html#queries-pools">18.1. Query Pools</a></li>
<li><a href="chap18.html#queries-operation">18.2. Query Operation</a></li>
<li><a href="chap18.html#queries-occlusion">18.3. Occlusion Queries</a></li>
<li><a href="chap18.html#queries-pipestats">18.4. Pipeline Statistics Queries</a></li>
<li><a href="chap18.html#queries-timestamps">18.5. Timestamp Queries</a></li>
<li><a href="chap18.html#queries-performance">18.6. Performance Queries</a></li>
<li><a href="chap18.html#queries-transform-feedback">18.7. Transform Feedback Queries</a></li>
<li><a href="chap18.html#queries-performance-intel">18.8. Intel performance queries</a></li>
<li><a href="chap18.html#queries-result-status-only">18.9. Result Status Queries</a></li>
<li><a href="chap18.html#queries-video-encode-bitstream-buffer-range">18.10. Video Encode Bitstream Buffer Range</a></li>
</ul>
</li>
<li><a href="chap19.html">19. Clear Commands</a>
<ul class="sectlevel2">
<li><a href="chap19.html#clears-outside">19.1. Clearing Images Outside A Render Pass Instance</a></li>
<li><a href="chap19.html#clears-inside">19.2. Clearing Images Inside A Render Pass Instance</a></li>
<li><a href="chap19.html#clears-values">19.3. Clear Values</a></li>
<li><a href="chap19.html#clears-filling-buffers">19.4. Filling Buffers</a></li>
<li><a href="chap19.html#clears-updating-buffers">19.5. Updating Buffers</a></li>
</ul>
</li>
<li class="current"><a href="chap20.html">20. Copy Commands</a>
<ul class="sectlevel2">
<li class="current"><a href="chap20.html#_common_operation">20.1. Common Operation</a></li>
<li class="current"><a href="chap20.html#copies-buffers">20.2. Copying Data Between Buffers</a></li>
<li class="current"><a href="chap20.html#copies-images">20.3. Copying Data Between Images</a></li>
<li class="current"><a href="chap20.html#copies-buffers-images">20.4. Copying Data Between Buffers and Images</a></li>
<li class="current"><a href="chap20.html#copies-imagescaling">20.5. Image Copies with Scaling</a></li>
<li class="current"><a href="chap20.html#copies-resolve">20.6. Resolving Multisample Images</a></li>
<li class="current"><a href="chap20.html#copies-buffer-markers">20.7. Buffer Markers</a></li>
</ul>
</li>
<li><a href="chap21.html">21. Drawing Commands</a>
<ul class="sectlevel2">
<li><a href="chap21.html#drawing-primitive-topologies">21.1. Primitive Topologies</a></li>
<li><a href="chap21.html#drawing-primitive-order">21.2. Primitive Order</a></li>
<li><a href="chap21.html#drawing-primitive-shading">21.3. Programmable Primitive Shading</a></li>
<li><a href="chap21.html#drawing-conditional-rendering">21.4. Conditional Rendering</a></li>
<li><a href="chap21.html#drawing-mesh-shading">21.5. Programmable Mesh Shading</a></li>
</ul>
</li>
<li><a href="chap22.html">22. Fixed-Function Vertex Processing</a>
<ul class="sectlevel2">
<li><a href="chap22.html#fxvertex-attrib">22.1. Vertex Attributes</a></li>
<li><a href="chap22.html#fxvertex-input">22.2. Vertex Input Description</a></li>
<li><a href="chap22.html#_vertex_attribute_divisor_in_instanced_rendering">22.3. Vertex Attribute Divisor in Instanced Rendering</a></li>
</ul>
</li>
<li><a href="chap23.html">23. Tessellation</a>
<ul class="sectlevel2">
<li><a href="chap23.html#_tessellator">23.1. Tessellator</a></li>
<li><a href="chap23.html#_tessellator_patch_discard">23.2. Tessellator Patch Discard</a></li>
<li><a href="chap23.html#tessellation-tessellator-spacing">23.3. Tessellator Spacing</a></li>
<li><a href="chap23.html#tessellation-primitive-order">23.4. Tessellation Primitive Ordering</a></li>
<li><a href="chap23.html#tessellation-vertex-winding-order">23.5. Tessellator Vertex Winding Order</a></li>
<li><a href="chap23.html#tessellation-triangle-tessellation">23.6. Triangle Tessellation</a></li>
<li><a href="chap23.html#tessellation-quad-tessellation">23.7. Quad Tessellation</a></li>
<li><a href="chap23.html#tessellation-isoline-tessellation">23.8. Isoline Tessellation</a></li>
<li><a href="chap23.html#tessellation-point-mode">23.9. Tessellation Point Mode</a></li>
<li><a href="chap23.html#_tessellation_pipeline_state">23.10. Tessellation Pipeline State</a></li>
</ul>
</li>
<li><a href="chap24.html">24. Geometry Shading</a>
<ul class="sectlevel2">
<li><a href="chap24.html#geometry-input">24.1. Geometry Shader Input Primitives</a></li>
<li><a href="chap24.html#geometry-output">24.2. Geometry Shader Output Primitives</a></li>
<li><a href="chap24.html#geometry-invocations">24.3. Multiple Invocations of Geometry Shaders</a></li>
<li><a href="chap24.html#geometry-ordering">24.4. Geometry Shader Primitive Ordering</a></li>
<li><a href="chap24.html#geometry-passthrough">24.5. Geometry Shader Passthrough</a></li>
</ul>
</li>
<li><a href="chap25.html">25. Mesh Shading</a>
<ul class="sectlevel2">
<li><a href="chap25.html#mesh-task-input">25.1. Task Shader Input</a></li>
<li><a href="chap25.html#mesh-task-output">25.2. Task Shader Output</a></li>
<li><a href="chap25.html#mesh-generation">25.3. Mesh Generation</a></li>
<li><a href="chap25.html#mesh-input">25.4. Mesh Shader Input</a></li>
<li><a href="chap25.html#mesh-output">25.5. Mesh Shader Output Primitives</a></li>
<li><a href="chap25.html#mesh-output-perview">25.6. Mesh Shader Per-View Outputs</a></li>
<li><a href="chap25.html#mesh-ordering">25.7. Mesh Shader Primitive Ordering</a></li>
</ul>
</li>
<li><a href="chap26.html">26. Fixed-Function Vertex Post-Processing</a>
<ul class="sectlevel2">
<li><a href="chap26.html#vertexpostproc-transform-feedback">26.1. Transform Feedback</a></li>
<li><a href="chap26.html#vertexpostproc-viewport-swizzle">26.2. Viewport Swizzle</a></li>
<li><a href="chap26.html#vertexpostproc-flatshading">26.3. Flat Shading</a></li>
<li><a href="chap26.html#vertexpostproc-clipping">26.4. Primitive Clipping</a></li>
<li><a href="chap26.html#vertexpostproc-clipping-shader-outputs">26.5. Clipping Shader Outputs</a></li>
<li><a href="chap26.html#vertexpostproc-viewportwscaling">26.6. Controlling Viewport W Scaling</a></li>
<li><a href="chap26.html#vertexpostproc-coord-transform">26.7. Coordinate Transformations</a></li>
<li><a href="chap26.html#vertexpostproc-renderpass-transform">26.8. Render Pass Transform</a></li>
<li><a href="chap26.html#vertexpostproc-viewport">26.9. Controlling the Viewport</a></li>
</ul>
</li>
<li><a href="chap27.html">27. Rasterization</a>
<ul class="sectlevel2">
<li><a href="chap27.html#primsrast-discard">27.1. Discarding Primitives Before Rasterization</a></li>
<li><a href="chap27.html#primsrast-stream">27.2. Controlling the Vertex Stream Used for Rasterization</a></li>
<li><a href="chap27.html#primrast-order">27.3. Rasterization Order</a></li>
<li><a href="chap27.html#primsrast-multisampling">27.4. Multisampling</a></li>
<li><a href="chap27.html#primrast-samplelocations">27.5. Custom Sample Locations</a></li>
<li><a href="chap27.html#primsrast-fragment-shading-rate">27.6. Fragment Shading Rates</a></li>
<li><a href="chap27.html#primsrast-shading-rate-image">27.7. Shading Rate Image</a></li>
<li><a href="chap27.html#primsrast-sampleshading">27.8. Sample Shading</a></li>
<li><a href="chap27.html#primsrast-barycentric">27.9. Barycentric Interpolation</a></li>
<li><a href="chap27.html#primsrast-points">27.10. Points</a></li>
<li><a href="chap27.html#primsrast-lines">27.11. Line Segments</a></li>
<li><a href="chap27.html#primsrast-polygons">27.12. Polygons</a></li>
</ul>
</li>
<li><a href="chap28.html">28. Fragment Operations</a>
<ul class="sectlevel2">
<li><a href="chap28.html#fragops-discard-rectangles">28.1. Discard Rectangles Test</a></li>
<li><a href="chap28.html#fragops-scissor">28.2. Scissor Test</a></li>
<li><a href="chap28.html#fragops-exclusive-scissor">28.3. Exclusive Scissor Test</a></li>
<li><a href="chap28.html#fragops-samplemask">28.4. Sample Mask Test</a></li>
<li><a href="chap28.html#fragops-shader">28.5. Fragment Shading</a></li>
<li><a href="chap28.html#fragops-covg">28.6. Multisample Coverage</a></li>
<li><a href="chap28.html#fragops-ds-state">28.7. Depth and Stencil Operations</a></li>
<li><a href="chap28.html#fragops-dbt">28.8. Depth Bounds Test</a></li>
<li><a href="chap28.html#fragops-stencil">28.9. Stencil Test</a></li>
<li><a href="chap28.html#fragops-depth">28.10. Depth Test</a></li>
<li><a href="chap28.html#fragops-rep-frag-test">28.11. Representative Fragment Test</a></li>
<li><a href="chap28.html#fragops-samplecount">28.12. Sample Counting</a></li>
<li><a href="chap28.html#fragops-coverage-to-color">28.13. Fragment Coverage To Color</a></li>
<li><a href="chap28.html#fragops-coverage-reduction">28.14. Coverage Reduction</a></li>
</ul>
</li>
<li><a href="chap29.html">29. The Framebuffer</a>
<ul class="sectlevel2">
<li><a href="chap29.html#framebuffer-blending">29.1. Blending</a></li>
<li><a href="chap29.html#framebuffer-logicop">29.2. Logical Operations</a></li>
<li><a href="chap29.html#framebuffer-color-write-mask">29.3. Color Write Mask</a></li>
<li><a href="chap29.html#framebuffer-color-write-enable">29.4. Color Write Enable</a></li>
</ul>
</li>
<li><a href="chap30.html">30. Dispatching Commands</a></li>
<li><a href="chap31.html">31. Device-Generated Commands</a>
<ul class="sectlevel2">
<li><a href="chap31.html#indirectmdslayout">31.1. Indirect Commands Layout</a></li>
<li><a href="chap31.html#_indirect_commands_generation_and_execution">31.2. Indirect Commands Generation And Execution</a></li>
</ul>
</li>
<li><a href="chap32.html">32. Sparse Resources</a>
<ul class="sectlevel2">
<li><a href="chap32.html#sparsememory-sparseresourcefeatures">32.1. Sparse Resource Features</a></li>
<li><a href="chap32.html#sparsememory-fully-resident">32.2. Sparse Buffers and Fully-Resident Images</a></li>
<li><a href="chap32.html#sparsememory-partially-resident-buffers">32.3. Sparse Partially-Resident Buffers</a></li>
<li><a href="chap32.html#sparsememory-partially-resident-images">32.4. Sparse Partially-Resident Images</a></li>
<li><a href="chap32.html#sparsememory-sparse-memory-aliasing">32.5. Sparse Memory Aliasing</a></li>
<li><a href="chap32.html#_sparse_resource_implementation_guidelines_informative">32.6. Sparse Resource Implementation Guidelines (Informative)</a></li>
<li><a href="chap32.html#sparsememory-resourceapi">32.7. Sparse Resource API</a></li>
</ul>
</li>
<li><a href="chap33.html">33. Window System Integration (WSI)</a>
<ul class="sectlevel2">
<li><a href="chap33.html#_wsi_platform">33.1. WSI Platform</a></li>
<li><a href="chap33.html#_wsi_surface">33.2. WSI Surface</a></li>
<li><a href="chap33.html#display">33.3. Presenting Directly to Display Devices</a></li>
<li><a href="chap33.html#_querying_for_wsi_support">33.4. Querying for WSI Support</a></li>
<li><a href="chap33.html#_surface_queries">33.5. Surface Queries</a></li>
<li><a href="chap33.html#_full_screen_exclusive_control">33.6. Full Screen Exclusive Control</a></li>
<li><a href="chap33.html#_device_group_queries">33.7. Device Group Queries</a></li>
<li><a href="chap33.html#_display_timing_queries">33.8. Display Timing Queries</a></li>
<li><a href="chap33.html#present-wait">33.9. Present Wait</a></li>
<li><a href="chap33.html#_wsi_swapchain">33.10. WSI Swapchain</a></li>
<li><a href="chap33.html#_hdr_metadata">33.11. Hdr Metadata</a></li>
</ul>
</li>
<li><a href="chap34.html">34. Deferred Host Operations</a>
<ul class="sectlevel2">
<li><a href="chap34.html#deferred-host-operations-requesting">34.1. Requesting Deferral</a></li>
<li><a href="chap34.html#_deferred_host_operations_api">34.2. Deferred Host Operations API</a></li>
</ul>
</li>
<li><a href="chap35.html">35. Private Data</a></li>
<li><a href="chap36.html">36. Acceleration Structures</a>
<ul class="sectlevel2">
<li><a href="chap36.html#acceleration-structure-def">36.1. Acceleration Structures</a></li>
<li><a href="chap36.html#host-acceleration-structure">36.2. Host Acceleration Structure Operations</a></li>
</ul>
</li>
<li><a href="chap37.html">37. Ray Traversal</a>
<ul class="sectlevel2">
<li><a href="chap37.html#ray-intersection-candidate-determination">37.1. Ray Intersection Candidate Determination</a></li>
<li><a href="chap37.html#ray-intersection-culling">37.2. Ray Intersection Culling</a></li>
<li><a href="chap37.html#ray-intersection-confirmation">37.3. Ray Intersection Confirmation</a></li>
<li><a href="chap37.html#ray-closest-hit-determination">37.4. Ray Closest Hit Determination</a></li>
<li><a href="chap37.html#ray-result-determination">37.5. Ray Result Determination</a></li>
</ul>
</li>
<li><a href="chap38.html">38. Ray Tracing</a>
<ul class="sectlevel2">
<li><a href="chap38.html#ray-tracing-shader-call">38.1. Shader Call Instructions</a></li>
<li><a href="chap38.html#ray-tracing-commands">38.2. Ray Tracing Commands</a></li>
<li><a href="chap38.html#shader-binding-table">38.3. Shader Binding Table</a></li>
<li><a href="chap38.html#ray-tracing-pipeline-stack">38.4. Ray Tracing Pipeline Stack</a></li>
</ul>
</li>
<li><a href="chap39.html">39. Video Decode and Encode Operations</a>
<ul class="sectlevel2">
<li><a href="chap39.html#_technical_terminology_and_semantics">39.1. Technical Terminology and Semantics</a></li>
<li><a href="chap39.html#_introduction">39.2. Introduction</a></li>
<li><a href="chap39.html#video-physical-device-capabilities">39.3. Video Physical Device Capabilities</a></li>
<li><a href="chap39.html#video-session-objects">39.4. Video Session Objects</a></li>
<li><a href="chap39.html#video-decode-operations">39.5. Video Decode Operations</a></li>
<li><a href="chap39.html#decode-h264">39.6. Video Decode of AVC (ITU-T H.264)</a></li>
<li><a href="chap39.html#decode-h265">39.7. Video Decode of HEVC (ITU-T H.265)</a></li>
<li><a href="chap39.html#video-encode-operations">39.8. Video Encode Operations</a></li>
<li><a href="chap39.html#encode-h264">39.9. Encode H.264</a></li>
</ul>
</li>
<li><a href="chap40.html">40. Extending Vulkan</a>
<ul class="sectlevel2">
<li><a href="chap40.html#extendingvulkan-instanceanddevicefunctionality">40.1. Instance and Device Functionality</a></li>
<li><a href="chap40.html#extendingvulkan-coreversions">40.2. Core Versions</a></li>
<li><a href="chap40.html#extendingvulkan-layers">40.3. Layers</a></li>
<li><a href="chap40.html#extendingvulkan-extensions">40.4. Extensions</a></li>
<li><a href="chap40.html#extendingvulkan-extensions-extensiondependencies">40.5. Extension Dependencies</a></li>
<li><a href="chap40.html#_compatibility_guarantees_informative">40.6. Compatibility Guarantees (Informative)</a></li>
</ul>
</li>
<li><a href="chap41.html">41. Features</a>
<ul class="sectlevel2">
<li><a href="chap41.html#features-requirements">41.1. Feature Requirements</a></li>
</ul>
</li>
<li><a href="chap42.html">42. Limits</a>
<ul class="sectlevel2">
<li><a href="chap42.html#limits-minmax">42.1. Limit Requirements</a></li>
<li><a href="chap42.html#limits-multisample">42.2. Additional Multisampling Capabilities</a></li>
</ul>
</li>
<li><a href="chap43.html">43. Formats</a>
<ul class="sectlevel2">
<li><a href="chap43.html#formats-definition">43.1. Format Definition</a></li>
<li><a href="chap43.html#formats-properties">43.2. Format Properties</a></li>
<li><a href="chap43.html#features-required-format-support">43.3. Required Format Support</a></li>
</ul>
</li>
<li><a href="chap44.html">44. Additional Capabilities</a>
<ul class="sectlevel2">
<li><a href="chap44.html#capabilities-image">44.1. Additional Image Capabilities</a></li>
<li><a href="chap44.html#capabilities-buffer">44.2. Additional Buffer Capabilities</a></li>
<li><a href="chap44.html#capabilities-semaphore">44.3. Optional Semaphore Capabilities</a></li>
<li><a href="chap44.html#capabilities-fence">44.4. Optional Fence Capabilities</a></li>
<li><a href="chap44.html#features-timestamp-calibration">44.5. Timestamp Calibration Capabilities</a></li>
</ul>
</li>
<li><a href="chap45.html">45. Debugging</a>
<ul class="sectlevel2">
<li><a href="chap45.html#debugging-debug-utils">45.1. Debug Utilities</a></li>
<li><a href="chap45.html#debugging-debug-markers">45.2. Debug Markers</a></li>
<li><a href="chap45.html#debugging-debug-report-callbacks">45.3. Debug Report Callbacks</a></li>
<li><a href="chap45.html#_device_loss_debugging">45.4. Device Loss Debugging</a></li>
<li><a href="chap45.html#debugging-tooling-info">45.5. Active Tooling Information</a></li>
</ul>
</li>
<li><a href="chap46.html">Appendix A: Vulkan Environment for SPIR-V</a>
<ul class="sectlevel2">
<li><a href="chap46.html#_versions_and_formats">Versions and Formats</a></li>
<li><a href="chap46.html#spirvenv-capabilities">Capabilities</a></li>
<li><a href="chap46.html#spirvenv-module-validation">Validation Rules within a Module</a></li>
<li><a href="chap46.html#spirvenv-precision-operation">Precision and Operation of SPIR-V Instructions</a></li>
<li><a href="chap46.html#spirvenv-image-signedness">Signedness of SPIR-V Image Accesses</a></li>
<li><a href="chap46.html#spirvenv-format-type-matching">Image Format and Type Matching</a></li>
<li><a href="chap46.html#spirvenv-image-formats">Compatibility Between SPIR-V Image Formats And Vulkan Formats</a></li>
</ul>
</li>
<li><a href="chap47.html">Appendix B: Memory Model</a>
<ul class="sectlevel2">
<li><a href="chap47.html#memory-model-agent">Agent</a></li>
<li><a href="chap47.html#memory-model-memory-location">Memory Location</a></li>
<li><a href="chap47.html#memory-model-allocation">Allocation</a></li>
<li><a href="chap47.html#memory-model-memory-operation">Memory Operation</a></li>
<li><a href="chap47.html#memory-model-references">Reference</a></li>
<li><a href="chap47.html#memory-model-program-order">Program-Order</a></li>
<li><a href="chap47.html#shader-call-related">Shader Call Related</a></li>
<li><a href="chap47.html#shader-call-order">Shader Call Order</a></li>
<li><a href="chap47.html#memory-model-scope">Scope</a></li>
<li><a href="chap47.html#memory-model-atomic-operation">Atomic Operation</a></li>
<li><a href="chap47.html#memory-model-scoped-modification-order">Scoped Modification Order</a></li>
<li><a href="chap47.html#memory-model-memory-semantics">Memory Semantics</a></li>
<li><a href="chap47.html#memory-model-release-sequence">Release Sequence</a></li>
<li><a href="chap47.html#memory-model-synchronizes-with">Synchronizes-With</a></li>
<li><a href="chap47.html#memory-model-system-synchronizes-with">System-Synchronizes-With</a></li>
<li><a href="chap47.html#memory-model-non-private">Private vs. Non-Private</a></li>
<li><a href="chap47.html#memory-model-inter-thread-happens-before">Inter-Thread-Happens-Before</a></li>
<li><a href="chap47.html#memory-model-happens-before">Happens-Before</a></li>
<li><a href="chap47.html#memory-model-availability-visibility">Availability and Visibility</a></li>
<li><a href="chap47.html#memory-model-vulkan-availability-visibility">Availability, Visibility, and Domain Operations</a></li>
<li><a href="chap47.html#memory-model-availability-visibility-semantics">Availability and Visibility Semantics</a></li>
<li><a href="chap47.html#memory-model-instruction-av-vis">Per-Instruction Availability and Visibility Semantics</a></li>
<li><a href="chap47.html#memory-model-location-ordered">Location-Ordered</a></li>
<li><a href="chap47.html#memory-model-access-data-race">Data Race</a></li>
<li><a href="chap47.html#memory-model-visible-to">Visible-To</a></li>
<li><a href="chap47.html#memory-model-acyclicity">Acyclicity</a></li>
<li><a href="chap47.html#memory-model-shader-io">Shader I/O</a></li>
<li><a href="chap47.html#memory-model-deallocation">Deallocation</a></li>
<li><a href="chap47.html#memory-model-informative-descriptions">Descriptions (Informative)</a></li>
<li><a href="chap47.html#memory-model-tessellation-output-ordering">Tessellation Output Ordering</a></li>
<li><a href="chap47.html#memory-model-cooperative-matrix">Cooperative Matrix Memory Access</a></li>
</ul>
</li>
<li><a href="chap48.html">Appendix C: Compressed Image Formats</a>
<ul class="sectlevel2">
<li><a href="chap48.html#appendix-compressedtex-bc">Block-Compressed Image Formats</a></li>
<li><a href="chap48.html#appendix-compressedtex-etc2">ETC Compressed Image Formats</a></li>
<li><a href="chap48.html#appendix-compressedtex-astc">ASTC Compressed Image Formats</a></li>
<li><a href="chap48.html#appendix-compressedtex-pvrtc">PVRTC Compressed Image Formats</a></li>
</ul>
</li>
<li><a href="chap49.html">Appendix D: Core Revisions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap49.html#versions-1.1">Version 1.1</a></li>
<li><a href="chap49.html#versions-1.0">Version 1.0</a></li>
</ul>
</li>
<li><a href="chap50.html">Appendix E: Layers &amp; Extensions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap50.html#extension-appendices-list">List of Current Extensions</a></li>
<li><a href="chap50.html#provisional-extension-appendices-list">List of Provisional Extensions</a></li>
<li><a href="chap50.html#deprecated-extension-appendices-list">List of Deprecated Extensions</a></li>
</ul>
</li>
<li><a href="chap51.html">Appendix F: API Boilerplate</a>
<ul class="sectlevel2">
<li><a href="chap51.html#boilerplate-headers">Vulkan Header Files</a></li>
<li><a href="chap51.html#boilerplate-wsi-header">Window System-Specific Header Control (Informative)</a></li>
<li><a href="chap51.html#boilerplate-provisional-header">Provisional Extension Header Control (Informative)</a></li>
</ul>
</li>
<li><a href="chap52.html">Appendix G: Invariance</a>
<ul class="sectlevel2">
<li><a href="chap52.html#_repeatability">Repeatability</a></li>
<li><a href="chap52.html#_multi_pass_algorithms">Multi-pass Algorithms</a></li>
<li><a href="chap52.html#_invariance_rules">Invariance Rules</a></li>
<li><a href="chap52.html#_tessellation_invariance">Tessellation Invariance</a></li>
</ul>
</li>
<li><a href="chap53.html">Appendix H: Lexicon</a>
<ul class="sectlevel2">
<li><a href="chap53.html#glossary">Glossary</a></li>
<li><a href="chap53.html#lexicon-common-abbreviations">Common Abbreviations</a></li>
<li><a href="chap53.html#lexicon-prefixes">Prefixes</a></li>
</ul>
</li>
<li><a href="chap54.html">Appendix I: Credits (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap54.html#_working_group_contributors_to_vulkan">Working Group Contributors to Vulkan</a></li>
<li><a href="chap54.html#_other_credits">Other Credits</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="loading_msg" class="hidden" hidden=""><p>Loading… please wait.</p></div>
<!--ChunkedSearchboxMarker-->
<div class="searchbox"><label for="searchbox">Search: </label><input id="searchbox" type="text" disabled="disabled" value="Loading Search Data"><div id="resultsdiv"><ol id="results"></ol></div></div>
<div id="content" class="loadable" style="max-width: 100%;"><div class="sect1">
<h2 id="copies"><a class="anchor" href="chap20.html"></a>20. Copy Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An application <strong class="purple">can</strong> copy buffer and image data using several methods
depending on the type of data transfer.
Data <strong class="purple">can</strong> be copied between buffer objects with
<code>vkCmdCopyBuffer2KHR</code> and
<code>vkCmdCopyBuffer</code> and a portion of an image <strong class="purple">can</strong> be copied to another
image with
<code>vkCmdCopyImage2KHR</code> and
<code>vkCmdCopyImage</code>.
Image data <strong class="purple">can</strong> also be copied to and from buffer memory using
<code>vkCmdCopyImageToBuffer2KHR</code>, <code>vkCmdCopyImageToBuffer</code>,
<code>vkCmdCopyBufferToImage2KHR</code>, and <code>vkCmdCopyBufferToImage</code>.
Image data <strong class="purple">can</strong> be blitted (with or without scaling and filtering) with
<code>vkCmdBlitImage2KHR</code> and
<code>vkCmdBlitImage</code>.
Multisampled images <strong class="purple">can</strong> be resolved to a non-multisampled image with
<code>vkCmdResolveImage2KHR</code> and
<code>vkCmdResolveImage</code>.</p>
</div>
<div class="sect2">
<h3 id="_common_operation"><a class="anchor" href="chap20.html#_common_operation"></a>20.1. Common Operation</h3>
<div class="paragraph">
<p>The following valid usage rules apply to all copy commands:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Copy commands <strong class="purple">must</strong> be recorded outside of a render pass instance.</p>
</li>
<li>
<p>The set of all bytes bound to all the source regions <strong class="purple">must</strong> not overlap
the set of all bytes bound to the destination regions.</p>
</li>
<li>
<p>The set of all bytes bound to each destination region <strong class="purple">must</strong> not overlap
the set of all bytes bound to another destination region.</p>
</li>
<li>
<p>Copy regions <strong class="purple">must</strong> be non-empty.</p>
</li>
<li>
<p>Regions <strong class="purple">must</strong> not extend outside the bounds of the buffer or image
level, except that regions of compressed images <strong class="purple">can</strong> extend as far as
the dimension of the image level rounded up to a complete compressed
texel block.</p>
</li>
<li>
<p>Source image subresources <strong class="purple">must</strong> be in either the
<code>VK_IMAGE_LAYOUT_GENERAL</code> or
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code> layout.
Destination image subresources <strong class="purple">must</strong> be in the
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_GENERAL</code> or
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> layout.
As a consequence, if an image subresource is used as both source and
destination of a copy, it <strong class="purple">must</strong> be in the <code>VK_IMAGE_LAYOUT_GENERAL</code>
layout.</p>
</li>
<li>
<p>Source images <strong class="purple">must</strong> have <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code> in
their <a href="chap12.html#resources-image-format-features">format features</a>.</p>
</li>
<li>
<p>Destination images <strong class="purple">must</strong> have <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code>
in their <a href="chap12.html#resources-image-format-features">format features</a>.</p>
</li>
<li>
<p>Source buffers <strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_TRANSFER_SRC_BIT</code> usage bit enabled and destination
buffers <strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage bit enabled.</p>
</li>
<li>
<p>Source images <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> set in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p>Destination images <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> set in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p>If the stencil aspect of source image is accessed, and the source image
was not created with <a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil
usage</a>, the source image <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> set in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p>If the stencil aspect of destination image is accessed, and the
destination image was not created with
<a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil usage</a>, the
destination image <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> set in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p>If the stencil aspect of source image is accessed, and the source image
was created with <a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil
usage</a>, the source image <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> set in
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code></p>
</li>
<li>
<p>If the stencil aspect of destination image is accessed, and the
destination image was created with
<a href="chap12.html#VkImageStencilUsageCreateInfo">separate stencil usage</a>, the
destination image <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> set in
<a href="chap12.html#VkImageStencilUsageCreateInfo">VkImageStencilUsageCreateInfo</a>::<code>stencilUsage</code></p>
</li>
<li>
<p>If non-stencil aspects of a source image are accessed, the source image
<strong class="purple">must</strong> have been created with <code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> set
in <a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
<li>
<p>If non-stencil aspects of a destination image are accessed, the
destination image <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> set in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All copy commands are treated as “transfer” operations for the purposes of
synchronization barriers.</p>
</div>
<div class="paragraph">
<p>All copy commands that have a source format with an X component in its
format description read undefined values from those bits.</p>
</div>
<div class="paragraph">
<p>All copy commands that have a destination format with an X component in its
format description write undefined values to those bits.</p>
</div>
</div>
<div class="sect2">
<h3 id="copies-buffers"><a class="anchor" href="chap20.html#copies-buffers"></a>20.2. Copying Data Between Buffers</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data between buffer objects, call:</p>
</div>
<div id="vkCmdCopyBuffer" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyBuffer</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkBuffer</span>                                    <span class="n">srcBuffer</span><span class="p">,</span>
    <span class="n">VkBuffer</span>                                    <span class="n">dstBuffer</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">regionCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBufferCopy</span><span class="o">*</span>                         <span class="n">pRegions</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcBuffer</code> is the source buffer.</p>
</li>
<li>
<p><code>dstBuffer</code> is the destination buffer.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap20.html#VkBufferCopy">VkBufferCopy</a> structures
specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each region in <code>pRegions</code> is copied from the source buffer to the same
region of the destination buffer.
<code>srcBuffer</code> and <code>dstBuffer</code> <strong class="purple">can</strong> be the same buffer or alias the
same memory, but the resulting values are undefined if the copy regions
overlap in memory.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-01822" href="chap20.html#VUID-vkCmdCopyBuffer-commandBuffer-01822"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-01822</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>srcBuffer</code> <strong class="purple">must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-01823" href="chap20.html#VUID-vkCmdCopyBuffer-commandBuffer-01823"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-01823</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>dstBuffer</code> <strong class="purple">must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-01824" href="chap20.html#VUID-vkCmdCopyBuffer-commandBuffer-01824"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-01824</span><br>

If <code>commandBuffer</code> is a protected command buffer, then
<code>dstBuffer</code> <strong class="purple">must</strong> not be an unprotected buffer</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBuffer-srcOffset-00113" href="chap20.html#VUID-vkCmdCopyBuffer-srcOffset-00113"></a> <span class="vuid">VUID-vkCmdCopyBuffer-srcOffset-00113</span><br>

The <code>srcOffset</code> member of each element of <code>pRegions</code> <strong class="purple">must</strong> be
less than the size of <code>srcBuffer</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-dstOffset-00114" href="chap20.html#VUID-vkCmdCopyBuffer-dstOffset-00114"></a> <span class="vuid">VUID-vkCmdCopyBuffer-dstOffset-00114</span><br>

The <code>dstOffset</code> member of each element of <code>pRegions</code> <strong class="purple">must</strong> be
less than the size of <code>dstBuffer</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-size-00115" href="chap20.html#VUID-vkCmdCopyBuffer-size-00115"></a> <span class="vuid">VUID-vkCmdCopyBuffer-size-00115</span><br>

The <code>size</code> member of each element of <code>pRegions</code> <strong class="purple">must</strong> be less
than or equal to the size of <code>srcBuffer</code> minus <code>srcOffset</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-size-00116" href="chap20.html#VUID-vkCmdCopyBuffer-size-00116"></a> <span class="vuid">VUID-vkCmdCopyBuffer-size-00116</span><br>

The <code>size</code> member of each element of <code>pRegions</code> <strong class="purple">must</strong> be less
than or equal to the size of <code>dstBuffer</code> minus <code>dstOffset</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-pRegions-00117" href="chap20.html#VUID-vkCmdCopyBuffer-pRegions-00117"></a> <span class="vuid">VUID-vkCmdCopyBuffer-pRegions-00117</span><br>

The union of the source regions, and the union of the destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-srcBuffer-00118" href="chap20.html#VUID-vkCmdCopyBuffer-srcBuffer-00118"></a> <span class="vuid">VUID-vkCmdCopyBuffer-srcBuffer-00118</span><br>

<code>srcBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-srcBuffer-00119" href="chap20.html#VUID-vkCmdCopyBuffer-srcBuffer-00119"></a> <span class="vuid">VUID-vkCmdCopyBuffer-srcBuffer-00119</span><br>

If <code>srcBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-dstBuffer-00120" href="chap20.html#VUID-vkCmdCopyBuffer-dstBuffer-00120"></a> <span class="vuid">VUID-vkCmdCopyBuffer-dstBuffer-00120</span><br>

<code>dstBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-dstBuffer-00121" href="chap20.html#VUID-vkCmdCopyBuffer-dstBuffer-00121"></a> <span class="vuid">VUID-vkCmdCopyBuffer-dstBuffer-00121</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-parameter" href="chap20.html#VUID-vkCmdCopyBuffer-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-srcBuffer-parameter" href="chap20.html#VUID-vkCmdCopyBuffer-srcBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer-srcBuffer-parameter</span><br>
 <code>srcBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-dstBuffer-parameter" href="chap20.html#VUID-vkCmdCopyBuffer-dstBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-pRegions-parameter" href="chap20.html#VUID-vkCmdCopyBuffer-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap20.html#VkBufferCopy">VkBufferCopy</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-recording" href="chap20.html#VUID-vkCmdCopyBuffer-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commandBuffer-cmdpool" href="chap20.html#VUID-vkCmdCopyBuffer-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-renderpass" href="chap20.html#VUID-vkCmdCopyBuffer-renderpass"></a> <span class="vuid">VUID-vkCmdCopyBuffer-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-regionCount-arraylength" href="chap20.html#VUID-vkCmdCopyBuffer-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdCopyBuffer-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer-commonparent" href="chap20.html#VUID-vkCmdCopyBuffer-commonparent"></a> <span class="vuid">VUID-vkCmdCopyBuffer-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstBuffer</code>, and <code>srcBuffer</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferCopy</code> structure is defined as:</p>
</div>
<div id="VkBufferCopy" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBufferCopy</span> <span class="p">{</span>
    <span class="n">VkDeviceSize</span>    <span class="n">srcOffset</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>    <span class="n">dstOffset</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>    <span class="n">size</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBufferCopy</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcOffset</code> is the starting offset in bytes from the start of
<code>srcBuffer</code>.</p>
</li>
<li>
<p><code>dstOffset</code> is the starting offset in bytes from the start of
<code>dstBuffer</code>.</p>
</li>
<li>
<p><code>size</code> is the number of bytes to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCopy-size-01988" href="chap20.html#VUID-VkBufferCopy-size-01988"></a> <span class="vuid">VUID-VkBufferCopy-size-01988</span><br>

The <code>size</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A more extensible version of the copy buffer command is defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data between buffer objects, call:</p>
</div>
<div id="vkCmdCopyBuffer2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyBuffer2KHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCopyBufferInfo2KHR</span><span class="o">*</span>                 <span class="n">pCopyBufferInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pCopyBufferInfo</code> is a pointer to a <a href="chap20.html#VkCopyBufferInfo2KHR">VkCopyBufferInfo2KHR</a>
structure describing the copy parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="chap20.html#vkCmdCopyBuffer">vkCmdCopyBuffer</a>, but
includes extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBuffer2KHR-commandBuffer-01822" href="chap20.html#VUID-vkCmdCopyBuffer2KHR-commandBuffer-01822"></a> <span class="vuid">VUID-vkCmdCopyBuffer2KHR-commandBuffer-01822</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>srcBuffer</code> <strong class="purple">must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2KHR-commandBuffer-01823" href="chap20.html#VUID-vkCmdCopyBuffer2KHR-commandBuffer-01823"></a> <span class="vuid">VUID-vkCmdCopyBuffer2KHR-commandBuffer-01823</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>dstBuffer</code> <strong class="purple">must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2KHR-commandBuffer-01824" href="chap20.html#VUID-vkCmdCopyBuffer2KHR-commandBuffer-01824"></a> <span class="vuid">VUID-vkCmdCopyBuffer2KHR-commandBuffer-01824</span><br>

If <code>commandBuffer</code> is a protected command buffer, then
<code>dstBuffer</code> <strong class="purple">must</strong> not be an unprotected buffer</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBuffer2KHR-commandBuffer-parameter" href="chap20.html#VUID-vkCmdCopyBuffer2KHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer2KHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2KHR-pCopyBufferInfo-parameter" href="chap20.html#VUID-vkCmdCopyBuffer2KHR-pCopyBufferInfo-parameter"></a> <span class="vuid">VUID-vkCmdCopyBuffer2KHR-pCopyBufferInfo-parameter</span><br>
 <code>pCopyBufferInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap20.html#VkCopyBufferInfo2KHR">VkCopyBufferInfo2KHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2KHR-commandBuffer-recording" href="chap20.html#VUID-vkCmdCopyBuffer2KHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyBuffer2KHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2KHR-commandBuffer-cmdpool" href="chap20.html#VUID-vkCmdCopyBuffer2KHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyBuffer2KHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBuffer2KHR-renderpass" href="chap20.html#VUID-vkCmdCopyBuffer2KHR-renderpass"></a> <span class="vuid">VUID-vkCmdCopyBuffer2KHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyBufferInfo2KHR</code> structure is defined as:</p>
</div>
<div id="VkCopyBufferInfo2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCopyBufferInfo2KHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>            <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkBuffer</span>                   <span class="n">srcBuffer</span><span class="p">;</span>
    <span class="n">VkBuffer</span>                   <span class="n">dstBuffer</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                   <span class="n">regionCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkBufferCopy2KHR</span><span class="o">*</span>    <span class="n">pRegions</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCopyBufferInfo2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcBuffer</code> is the source buffer.</p>
</li>
<li>
<p><code>dstBuffer</code> is the destination buffer.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap20.html#VkBufferCopy2KHR">VkBufferCopy2KHR</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Members defined by this structure with the same name as parameters in
<a href="chap20.html#vkCmdCopyBuffer">vkCmdCopyBuffer</a> have the identical effect to those parameters; the
child structure <a href="chap20.html#VkBufferCopy2KHR">VkBufferCopy2KHR</a> is a variant of <a href="chap20.html#VkBufferCopy">VkBufferCopy</a>
which includes <code>sType</code> and <code>pNext</code> parameters, allowing it to be
extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferInfo2KHR-srcOffset-00113" href="chap20.html#VUID-VkCopyBufferInfo2KHR-srcOffset-00113"></a> <span class="vuid">VUID-VkCopyBufferInfo2KHR-srcOffset-00113</span><br>

The <code>srcOffset</code> member of each element of <code>pRegions</code> <strong class="purple">must</strong> be
less than the size of <code>srcBuffer</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2KHR-dstOffset-00114" href="chap20.html#VUID-VkCopyBufferInfo2KHR-dstOffset-00114"></a> <span class="vuid">VUID-VkCopyBufferInfo2KHR-dstOffset-00114</span><br>

The <code>dstOffset</code> member of each element of <code>pRegions</code> <strong class="purple">must</strong> be
less than the size of <code>dstBuffer</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2KHR-size-00115" href="chap20.html#VUID-VkCopyBufferInfo2KHR-size-00115"></a> <span class="vuid">VUID-VkCopyBufferInfo2KHR-size-00115</span><br>

The <code>size</code> member of each element of <code>pRegions</code> <strong class="purple">must</strong> be less
than or equal to the size of <code>srcBuffer</code> minus <code>srcOffset</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2KHR-size-00116" href="chap20.html#VUID-VkCopyBufferInfo2KHR-size-00116"></a> <span class="vuid">VUID-VkCopyBufferInfo2KHR-size-00116</span><br>

The <code>size</code> member of each element of <code>pRegions</code> <strong class="purple">must</strong> be less
than or equal to the size of <code>dstBuffer</code> minus <code>dstOffset</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2KHR-pRegions-00117" href="chap20.html#VUID-VkCopyBufferInfo2KHR-pRegions-00117"></a> <span class="vuid">VUID-VkCopyBufferInfo2KHR-pRegions-00117</span><br>

The union of the source regions, and the union of the destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2KHR-srcBuffer-00118" href="chap20.html#VUID-VkCopyBufferInfo2KHR-srcBuffer-00118"></a> <span class="vuid">VUID-VkCopyBufferInfo2KHR-srcBuffer-00118</span><br>

<code>srcBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2KHR-srcBuffer-00119" href="chap20.html#VUID-VkCopyBufferInfo2KHR-srcBuffer-00119"></a> <span class="vuid">VUID-VkCopyBufferInfo2KHR-srcBuffer-00119</span><br>

If <code>srcBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2KHR-dstBuffer-00120" href="chap20.html#VUID-VkCopyBufferInfo2KHR-dstBuffer-00120"></a> <span class="vuid">VUID-VkCopyBufferInfo2KHR-dstBuffer-00120</span><br>

<code>dstBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2KHR-dstBuffer-00121" href="chap20.html#VUID-VkCopyBufferInfo2KHR-dstBuffer-00121"></a> <span class="vuid">VUID-VkCopyBufferInfo2KHR-dstBuffer-00121</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferInfo2KHR-sType-sType" href="chap20.html#VUID-VkCopyBufferInfo2KHR-sType-sType"></a> <span class="vuid">VUID-VkCopyBufferInfo2KHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COPY_BUFFER_INFO_2_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2KHR-pNext-pNext" href="chap20.html#VUID-VkCopyBufferInfo2KHR-pNext-pNext"></a> <span class="vuid">VUID-VkCopyBufferInfo2KHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2KHR-srcBuffer-parameter" href="chap20.html#VUID-VkCopyBufferInfo2KHR-srcBuffer-parameter"></a> <span class="vuid">VUID-VkCopyBufferInfo2KHR-srcBuffer-parameter</span><br>
 <code>srcBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2KHR-dstBuffer-parameter" href="chap20.html#VUID-VkCopyBufferInfo2KHR-dstBuffer-parameter"></a> <span class="vuid">VUID-VkCopyBufferInfo2KHR-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2KHR-pRegions-parameter" href="chap20.html#VUID-VkCopyBufferInfo2KHR-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyBufferInfo2KHR-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap20.html#VkBufferCopy2KHR">VkBufferCopy2KHR</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2KHR-regionCount-arraylength" href="chap20.html#VUID-VkCopyBufferInfo2KHR-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyBufferInfo2KHR-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferInfo2KHR-commonparent" href="chap20.html#VUID-VkCopyBufferInfo2KHR-commonparent"></a> <span class="vuid">VUID-VkCopyBufferInfo2KHR-commonparent</span><br>
 Both of <code>dstBuffer</code>, and <code>srcBuffer</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBufferCopy2KHR</code> structure is defined as:</p>
</div>
<div id="VkBufferCopy2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBufferCopy2KHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">srcOffset</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">dstOffset</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>       <span class="n">size</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBufferCopy2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcOffset</code> is the starting offset in bytes from the start of
<code>srcBuffer</code>.</p>
</li>
<li>
<p><code>dstOffset</code> is the starting offset in bytes from the start of
<code>dstBuffer</code>.</p>
</li>
<li>
<p><code>size</code> is the number of bytes to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCopy2KHR-size-01988" href="chap20.html#VUID-VkBufferCopy2KHR-size-01988"></a> <span class="vuid">VUID-VkBufferCopy2KHR-size-01988</span><br>

The <code>size</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferCopy2KHR-sType-sType" href="chap20.html#VUID-VkBufferCopy2KHR-sType-sType"></a> <span class="vuid">VUID-VkBufferCopy2KHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_COPY_2_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkBufferCopy2KHR-pNext-pNext" href="chap20.html#VUID-VkBufferCopy2KHR-pNext-pNext"></a> <span class="vuid">VUID-VkBufferCopy2KHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="copies-images"><a class="anchor" href="chap20.html#copies-images"></a>20.3. Copying Data Between Images</h3>
<div class="paragraph">
<p><code>vkCmdCopyImage</code> performs image copies in a similar manner to a host
memcpy.
It does not perform general-purpose conversions such as scaling, resizing,
blending, color-space conversion, or format conversions.
Rather, it simply copies raw image data.
<code>vkCmdCopyImage</code> <strong class="purple">can</strong> copy between images with different formats,
provided the formats are compatible as defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data between image objects, call:</p>
</div>
<div id="vkCmdCopyImage" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyImage</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">srcImage</span><span class="p">,</span>
    <span class="n">VkImageLayout</span>                               <span class="n">srcImageLayout</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">dstImage</span><span class="p">,</span>
    <span class="n">VkImageLayout</span>                               <span class="n">dstImageLayout</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">regionCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkImageCopy</span><span class="o">*</span>                          <span class="n">pRegions</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the current layout of the source image
subresource.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the current layout of the destination image
subresource.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap20.html#VkImageCopy">VkImageCopy</a> structures
specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each region in <code>pRegions</code> is copied from the source image to the same
region of the destination image.
<code>srcImage</code> and <code>dstImage</code> <strong class="purple">can</strong> be the same image or alias the same
memory.</p>
</div>
<div id="copies-images-format-compatibility" class="paragraph">
<p>The formats of <code>srcImage</code> and <code>dstImage</code> <strong class="purple">must</strong> be compatible.
Formats are compatible if they share the same class, as shown in the
<a href="chap43.html#formats-compatibility">Compatible Formats</a> table.
Depth/stencil formats <strong class="purple">must</strong> match exactly.</p>
</div>
<div class="paragraph">
<p>If either <code>srcImage</code> or <code>dstImage</code> has a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion"><em>multi-planar</em> format</a>,
regions of each plane to be copied <strong class="purple">must</strong> be specified separately using the
<code>srcSubresource</code> and <code>dstSubresource</code> members of the
<a href="chap20.html#VkImageCopy">VkImageCopy</a> structure.
In this case, the <code>aspectMask</code> of the <code>srcSubresource</code> or
<code>dstSubresource</code> that refers to the multi-planar image <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or
<code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>.
For the purposes of <code>vkCmdCopyImage</code>, each plane of a multi-planar image
is treated as having the format listed in <a href="chap43.html#formats-compatible-planes">Compatible formats of planes of multi-planar formats</a> for
the plane identified by the <code>aspectMask</code> of the corresponding
subresource.
This applies both to <a href="chap43.html#VkFormat">VkFormat</a> and to coordinates used in the copy,
which correspond to texels in the <em>plane</em> rather than how these texels map
to coordinates in the image as a whole.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>For example, the <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code> plane of a
<code>VK_FORMAT_G8_B8R8_2PLANE_420_UNORM</code> image is compatible with an image
of format <code>VK_FORMAT_R8G8_UNORM</code> and (less usefully) with the
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code> plane of an image of format
<code>VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16</code>, as each texel is
2 bytes in size.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div id="copies-images-format-size-compatibility" class="paragraph">
<p><code>vkCmdCopyImage</code> allows copying between <em>size-compatible</em> compressed and
uncompressed internal formats.
Formats are size-compatible if the texel block size of the uncompressed
format is equal to the texel block size of the compressed format.
Such a copy does not perform on-the-fly compression or decompression.
When copying from an uncompressed format to a compressed format, each texel
of uncompressed data of the source image is copied as a raw value to the
corresponding compressed texel block of the destination image.
When copying from a compressed format to an uncompressed format, each
compressed texel block of the source image is copied as a raw value to the
corresponding texel of uncompressed data in the destination image.
Thus, for example, it is legal to copy between a 128-bit uncompressed format
and a compressed format which has a 128-bit sized compressed texel block
representing 4×4 texels (using 8 bits per texel), or between a 64-bit
uncompressed format and a compressed format which has a 64-bit sized
compressed texel block representing 4×4 texels (using 4 bits per
texel).</p>
</div>
<div class="paragraph">
<p>When copying between compressed and uncompressed formats the <code>extent</code>
members represent the texel dimensions of the source image and not the
destination.
When copying from a compressed image to an uncompressed image the image
texel dimensions written to the uncompressed image will be source extent
divided by the compressed texel block dimensions.
When copying from an uncompressed image to a compressed image the image
texel dimensions written to the compressed image will be the source extent
multiplied by the compressed texel block dimensions.
In both cases the number of bytes read and the number of bytes written will
be identical.</p>
</div>
<div class="paragraph">
<p>Copying to or from block-compressed images is typically done in multiples of
the compressed texel block size.
For this reason the <code>extent</code> <strong class="purple">must</strong> be a multiple of the compressed texel
block dimension.
There is one exception to this rule which is <strong class="purple">required</strong> to handle compressed
images created with dimensions that are not a multiple of the compressed
texel block dimensions: if the <code>srcImage</code> is compressed, then:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <code>extent.width</code> is not a multiple of the compressed texel block
width, then <span class="eq">(<code>extent.width</code> +  <code>srcOffset.x</code>)</span> <strong class="purple">must</strong>
equal the image subresource width.</p>
</li>
<li>
<p>If <code>extent.height</code> is not a multiple of the compressed texel block
height, then <span class="eq">(<code>extent.height</code> +  <code>srcOffset.y</code>)</span> <strong class="purple">must</strong>
equal the image subresource height.</p>
</li>
<li>
<p>If <code>extent.depth</code> is not a multiple of the compressed texel block
depth, then <span class="eq">(<code>extent.depth</code> +  <code>srcOffset.z</code>)</span> <strong class="purple">must</strong>
equal the image subresource depth.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Similarly, if the <code>dstImage</code> is compressed, then:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <code>extent.width</code> is not a multiple of the compressed texel block
width, then <span class="eq">(<code>extent.width</code> +  <code>dstOffset.x</code>)</span> <strong class="purple">must</strong>
equal the image subresource width.</p>
</li>
<li>
<p>If <code>extent.height</code> is not a multiple of the compressed texel block
height, then <span class="eq">(<code>extent.height</code> +  <code>dstOffset.y</code>)</span> <strong class="purple">must</strong>
equal the image subresource height.</p>
</li>
<li>
<p>If <code>extent.depth</code> is not a multiple of the compressed texel block
depth, then <span class="eq">(<code>extent.depth</code> +  <code>dstOffset.z</code>)</span> <strong class="purple">must</strong>
equal the image subresource depth.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This allows the last compressed texel block of the image in each
non-multiple dimension to be included as a source or destination of the
copy.</p>
</div>
<div class="paragraph">
<p>“<code>_422</code>” image formats that are not
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion"><em>multi-planar</em></a> are treated as
having a 2×1 compressed texel block for the purposes of these rules.</p>
</div>
<div class="paragraph">
<p><code>vkCmdCopyImage</code> <strong class="purple">can</strong> be used to copy image data between multisample
images, but both images <strong class="purple">must</strong> have the same number of samples.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-01825" href="chap20.html#VUID-vkCmdCopyImage-commandBuffer-01825"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-01825</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>srcImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-01826" href="chap20.html#VUID-vkCmdCopyImage-commandBuffer-01826"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-01826</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>dstImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-01827" href="chap20.html#VUID-vkCmdCopyImage-commandBuffer-01827"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-01827</span><br>

If <code>commandBuffer</code> is a protected command buffer, then
<code>dstImage</code> <strong class="purple">must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-00124" href="chap20.html#VUID-vkCmdCopyImage-pRegions-00124"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-00124</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01995" href="chap20.html#VUID-vkCmdCopyImage-srcImage-01995"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01995</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>srcImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-00126" href="chap20.html#VUID-vkCmdCopyImage-srcImage-00126"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-00126</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01546" href="chap20.html#VUID-vkCmdCopyImage-srcImage-01546"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01546</span><br>

If <code>srcImage</code> is non-sparse then the image or <em>disjoint</em> plane to be
copied <strong class="purple">must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImageLayout-00128" href="chap20.html#VUID-vkCmdCopyImage-srcImageLayout-00128"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImageLayout-00128</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImageLayout-01917" href="chap20.html#VUID-vkCmdCopyImage-srcImageLayout-01917"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImageLayout-01917</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_GENERAL</code>, or
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01996" href="chap20.html#VUID-vkCmdCopyImage-dstImage-01996"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01996</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>dstImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-00131" href="chap20.html#VUID-vkCmdCopyImage-dstImage-00131"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-00131</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01547" href="chap20.html#VUID-vkCmdCopyImage-dstImage-01547"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01547</span><br>

If <code>dstImage</code> is non-sparse then the image or <em>disjoint</em> plane that
is the destination of the copy <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImageLayout-00133" href="chap20.html#VUID-vkCmdCopyImage-dstImageLayout-00133"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImageLayout-00133</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImageLayout-01395" href="chap20.html#VUID-vkCmdCopyImage-dstImageLayout-01395"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImageLayout-01395</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_GENERAL</code>, or
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01548" href="chap20.html#VUID-vkCmdCopyImage-srcImage-01548"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01548</span><br>

If the <a href="chap43.html#VkFormat">VkFormat</a> of each of <code>srcImage</code> and <code>dstImage</code> is
not a <a href="chap43.html#formats-requiring-sampler-ycbcr-conversion"><em>multi-planar
format</em></a>, the <a href="chap43.html#VkFormat">VkFormat</a> of each of <code>srcImage</code> and
<code>dstImage</code> <strong class="purple">must</strong> be compatible, as defined
<a href="chap20.html#copies-images-format-compatibility">above</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-None-01549" href="chap20.html#VUID-vkCmdCopyImage-None-01549"></a> <span class="vuid">VUID-vkCmdCopyImage-None-01549</span><br>

In a copy to or from a plane of a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar image</a>, the
<a href="chap43.html#VkFormat">VkFormat</a> of the image and plane <strong class="purple">must</strong> be compatible according to
<a href="chap43.html#formats-compatible-planes">the description of compatible planes</a> for
the plane being copied</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-00136" href="chap20.html#VUID-vkCmdCopyImage-srcImage-00136"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-00136</span><br>

The sample count of <code>srcImage</code> and <code>dstImage</code> <strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcSubresource-01696" href="chap20.html#VUID-vkCmdCopyImage-srcSubresource-01696"></a> <span class="vuid">VUID-vkCmdCopyImage-srcSubresource-01696</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstSubresource-01697" href="chap20.html#VUID-vkCmdCopyImage-dstSubresource-01697"></a> <span class="vuid">VUID-vkCmdCopyImage-dstSubresource-01697</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcSubresource-01698" href="chap20.html#VUID-vkCmdCopyImage-srcSubresource-01698"></a> <span class="vuid">VUID-vkCmdCopyImage-srcSubresource-01698</span><br>

The <span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong class="purple">must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstSubresource-01699" href="chap20.html#VUID-vkCmdCopyImage-dstSubresource-01699"></a> <span class="vuid">VUID-vkCmdCopyImage-dstSubresource-01699</span><br>

The <span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong class="purple">must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcOffset-01783" href="chap20.html#VUID-vkCmdCopyImage-srcOffset-01783"></a> <span class="vuid">VUID-vkCmdCopyImage-srcOffset-01783</span><br>

The <code>srcOffset</code> and <code>extent</code> members of each element of
<code>pRegions</code> <strong class="purple">must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>’s command pool’s queue family, as described in
<a href="chap5.html#VkQueueFamilyProperties">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstOffset-01784" href="chap20.html#VUID-vkCmdCopyImage-dstOffset-01784"></a> <span class="vuid">VUID-vkCmdCopyImage-dstOffset-01784</span><br>

The <code>dstOffset</code> and <code>extent</code> members of each element of
<code>pRegions</code> <strong class="purple">must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>’s command pool’s queue family, as described in
<a href="chap5.html#VkQueueFamilyProperties">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-02542" href="chap20.html#VUID-vkCmdCopyImage-dstImage-02542"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-02542</span><br>

<code>dstImage</code> and <code>srcImage</code> <strong class="purple">must</strong> not have been created with
<code>flags</code> containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01551" href="chap20.html#VUID-vkCmdCopyImage-srcImage-01551"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01551</span><br>

If neither <code>srcImage</code> nor <code>dstImage</code> has a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar image
format</a> then for each element of <code>pRegions</code>,
<code>srcSubresource.aspectMask</code> and <code>dstSubresource.aspectMask</code>
<strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01552" href="chap20.html#VUID-vkCmdCopyImage-srcImage-01552"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01552</span><br>

If <code>srcImage</code> has a <a href="chap43.html#VkFormat">VkFormat</a> with
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">two planes</a> then for each
element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code> or <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01553" href="chap20.html#VUID-vkCmdCopyImage-srcImage-01553"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01553</span><br>

If <code>srcImage</code> has a <a href="chap43.html#VkFormat">VkFormat</a> with
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">three planes</a> then for
each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or
<code>VK_IMAGE_ASPECT_PLANE_2_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01554" href="chap20.html#VUID-vkCmdCopyImage-dstImage-01554"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01554</span><br>

If <code>dstImage</code> has a <a href="chap43.html#VkFormat">VkFormat</a> with
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">two planes</a> then for each
element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code> or <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01555" href="chap20.html#VUID-vkCmdCopyImage-dstImage-01555"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01555</span><br>

If <code>dstImage</code> has a <a href="chap43.html#VkFormat">VkFormat</a> with
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">three planes</a> then for
each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or
<code>VK_IMAGE_ASPECT_PLANE_2_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01556" href="chap20.html#VUID-vkCmdCopyImage-srcImage-01556"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01556</span><br>

If <code>srcImage</code> has a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar image format</a>
and the <code>dstImage</code> does not have a multi-planar image format, then
for each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong class="purple">must</strong> be <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01557" href="chap20.html#VUID-vkCmdCopyImage-dstImage-01557"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01557</span><br>

If <code>dstImage</code> has a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar image format</a>
and the <code>srcImage</code> does not have a multi-planar image format, then
for each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong class="purple">must</strong> be <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-04443" href="chap20.html#VUID-vkCmdCopyImage-srcImage-04443"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-04443</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be
<code>0</code> and <code>srcSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-04444" href="chap20.html#VUID-vkCmdCopyImage-dstImage-04444"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-04444</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be
<code>0</code> and <code>dstSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-aspectMask-00142" href="chap20.html#VUID-vkCmdCopyImage-aspectMask-00142"></a> <span class="vuid">VUID-vkCmdCopyImage-aspectMask-00142</span><br>

For each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-aspectMask-00143" href="chap20.html#VUID-vkCmdCopyImage-aspectMask-00143"></a> <span class="vuid">VUID-vkCmdCopyImage-aspectMask-00143</span><br>

For each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcOffset-00144" href="chap20.html#VUID-vkCmdCopyImage-srcOffset-00144"></a> <span class="vuid">VUID-vkCmdCopyImage-srcOffset-00144</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>srcOffset.x</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcOffset-00145" href="chap20.html#VUID-vkCmdCopyImage-srcOffset-00145"></a> <span class="vuid">VUID-vkCmdCopyImage-srcOffset-00145</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>srcOffset.y</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-00146" href="chap20.html#VUID-vkCmdCopyImage-srcImage-00146"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-00146</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcOffset-00147" href="chap20.html#VUID-vkCmdCopyImage-srcOffset-00147"></a> <span class="vuid">VUID-vkCmdCopyImage-srcOffset-00147</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>srcOffset.z</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01785" href="chap20.html#VUID-vkCmdCopyImage-srcImage-01785"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01785</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01786" href="chap20.html#VUID-vkCmdCopyImage-dstImage-01786"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01786</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01787" href="chap20.html#VUID-vkCmdCopyImage-srcImage-01787"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01787</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01788" href="chap20.html#VUID-vkCmdCopyImage-dstImage-01788"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01788</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01790" href="chap20.html#VUID-vkCmdCopyImage-srcImage-01790"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01790</span><br>

If <code>srcImage</code> and <code>dstImage</code> are both of type
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01791" href="chap20.html#VUID-vkCmdCopyImage-srcImage-01791"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01791</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, and <code>dstImage</code>
is of type <code>VK_IMAGE_TYPE_3D</code>, then for each element of
<code>pRegions</code>, <code>extent.depth</code> <strong class="purple">must</strong> equal
<code>srcSubresource.layerCount</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01792" href="chap20.html#VUID-vkCmdCopyImage-dstImage-01792"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01792</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, and <code>srcImage</code>
is of type <code>VK_IMAGE_TYPE_3D</code>, then for each element of
<code>pRegions</code>, <code>extent.depth</code> <strong class="purple">must</strong> equal
<code>dstSubresource.layerCount</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstOffset-00150" href="chap20.html#VUID-vkCmdCopyImage-dstOffset-00150"></a> <span class="vuid">VUID-vkCmdCopyImage-dstOffset-00150</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>dstOffset.x</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstOffset-00151" href="chap20.html#VUID-vkCmdCopyImage-dstOffset-00151"></a> <span class="vuid">VUID-vkCmdCopyImage-dstOffset-00151</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>dstOffset.y</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-00152" href="chap20.html#VUID-vkCmdCopyImage-dstImage-00152"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-00152</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstOffset-00153" href="chap20.html#VUID-vkCmdCopyImage-dstOffset-00153"></a> <span class="vuid">VUID-vkCmdCopyImage-dstOffset-00153</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>dstOffset.z</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01727" href="chap20.html#VUID-vkCmdCopyImage-srcImage-01727"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01727</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, then for each
element of <code>pRegions</code>, all members of <code>srcOffset</code> <strong class="purple">must</strong> be a
multiple of the corresponding dimensions of the compressed texel block</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01728" href="chap20.html#VUID-vkCmdCopyImage-srcImage-01728"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01728</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, then for each
element of <code>pRegions</code>, <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block width or <span class="eq">(<code>extent.width</code> + 
<code>srcOffset.x</code>)</span> <strong class="purple">must</strong> equal the width of the specified
<code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01729" href="chap20.html#VUID-vkCmdCopyImage-srcImage-01729"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01729</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, then for each
element of <code>pRegions</code>, <code>extent.height</code> <strong class="purple">must</strong> be a multiple of
the compressed texel block height or <span class="eq">(<code>extent.height</code> + 
<code>srcOffset.y</code>)</span> <strong class="purple">must</strong> equal the height of the specified
<code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-01730" href="chap20.html#VUID-vkCmdCopyImage-srcImage-01730"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-01730</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, then for each
element of <code>pRegions</code>, <code>extent.depth</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block depth or <span class="eq">(<code>extent.depth</code> + 
<code>srcOffset.z</code>)</span> <strong class="purple">must</strong> equal the depth of the specified
<code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01731" href="chap20.html#VUID-vkCmdCopyImage-dstImage-01731"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01731</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, then for each
element of <code>pRegions</code>, all members of <code>dstOffset</code> <strong class="purple">must</strong> be a
multiple of the corresponding dimensions of the compressed texel block</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01732" href="chap20.html#VUID-vkCmdCopyImage-dstImage-01732"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01732</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, then for each
element of <code>pRegions</code>, <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block width or <span class="eq">(<code>extent.width</code> + 
<code>dstOffset.x</code>)</span> <strong class="purple">must</strong> equal the width of the specified
<code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01733" href="chap20.html#VUID-vkCmdCopyImage-dstImage-01733"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01733</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, then for each
element of <code>pRegions</code>, <code>extent.height</code> <strong class="purple">must</strong> be a multiple of
the compressed texel block height or <span class="eq">(<code>extent.height</code> + 
<code>dstOffset.y</code>)</span> <strong class="purple">must</strong> equal the height of the specified
<code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-01734" href="chap20.html#VUID-vkCmdCopyImage-dstImage-01734"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-01734</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, then for each
element of <code>pRegions</code>, <code>extent.depth</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block depth or <span class="eq">(<code>extent.depth</code> + 
<code>dstOffset.z</code>)</span> <strong class="purple">must</strong> equal the depth of the specified
<code>dstSubresource</code> of <code>dstImage</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-parameter" href="chap20.html#VUID-vkCmdCopyImage-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImage-parameter" href="chap20.html#VUID-vkCmdCopyImage-srcImage-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImage-parameter</span><br>
 <code>srcImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-srcImageLayout-parameter" href="chap20.html#VUID-vkCmdCopyImage-srcImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImage-parameter" href="chap20.html#VUID-vkCmdCopyImage-dstImage-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImage-parameter</span><br>
 <code>dstImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-dstImageLayout-parameter" href="chap20.html#VUID-vkCmdCopyImage-dstImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-pRegions-parameter" href="chap20.html#VUID-vkCmdCopyImage-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap20.html#VkImageCopy">VkImageCopy</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-recording" href="chap20.html#VUID-vkCmdCopyImage-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commandBuffer-cmdpool" href="chap20.html#VUID-vkCmdCopyImage-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyImage-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-renderpass" href="chap20.html#VUID-vkCmdCopyImage-renderpass"></a> <span class="vuid">VUID-vkCmdCopyImage-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-regionCount-arraylength" href="chap20.html#VUID-vkCmdCopyImage-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdCopyImage-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage-commonparent" href="chap20.html#VUID-vkCmdCopyImage-commonparent"></a> <span class="vuid">VUID-vkCmdCopyImage-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstImage</code>, and <code>srcImage</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageCopy</code> structure is defined as:</p>
</div>
<div id="VkImageCopy" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageCopy</span> <span class="p">{</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">srcSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">srcOffset</span><span class="p">;</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">dstSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">dstOffset</span><span class="p">;</span>
    <span class="n">VkExtent3D</span>                  <span class="n">extent</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageCopy</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcSubresource</code> and <code>dstSubresource</code> are
<a href="chap20.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structures specifying the image
subresources of the images used for the source and destination image
data, respectively.</p>
</li>
<li>
<p><code>srcOffset</code> and <code>dstOffset</code> select the initial <code>x</code>, <code>y</code>,
and <code>z</code> offsets in texels of the sub-regions of the source and
destination image data.</p>
</li>
<li>
<p><code>extent</code> is the size in texels of the image to copy in <code>width</code>,
<code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For <code>VK_IMAGE_TYPE_3D</code> images, copies are performed slice by slice
starting with the <code>z</code> member of the <code>srcOffset</code> or <code>dstOffset</code>,
and copying <code>depth</code> slices.
For images with multiple layers, copies are performed layer by layer
starting with the <code>baseArrayLayer</code> member of the <code>srcSubresource</code> or
<code>dstSubresource</code> and copying <code>layerCount</code> layers.
Image data <strong class="purple">can</strong> be copied between images with different image types.
If one image is <code>VK_IMAGE_TYPE_3D</code> and the other image is
<code>VK_IMAGE_TYPE_2D</code> with multiple layers, then each slice is copied to or
from a different layer.</p>
</div>
<div class="paragraph">
<p>Copies involving a <a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar image format</a> specify the region to be copied in terms of the
<em>plane</em> to be copied, not the coordinates of the multi-planar image.
This means that copies accessing the R/B planes of “<code>_422</code>” format
images <strong class="purple">must</strong> fit the copied region within half the <code>width</code> of the parent
image, and that copies accessing the R/B planes of “<code>_420</code>” format
images <strong class="purple">must</strong> fit the copied region within half the <code>width</code> and
<code>height</code> of the parent image.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCopy-extent-00140" href="chap20.html#VUID-VkImageCopy-extent-00140"></a> <span class="vuid">VUID-VkImageCopy-extent-00140</span><br>

The number of slices of the <code>extent</code> (for 3D) or layers of the
<code>srcSubresource</code> (for non-3D) <strong class="purple">must</strong> match the number of slices of
the <code>extent</code> (for 3D) or layers of the <code>dstSubresource</code> (for
non-3D)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCopy-srcSubresource-parameter" href="chap20.html#VUID-VkImageCopy-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageCopy-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap20.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageCopy-dstSubresource-parameter" href="chap20.html#VUID-VkImageCopy-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageCopy-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap20.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageSubresourceLayers</code> structure is defined as:</p>
</div>
<div id="VkImageSubresourceLayers" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageSubresourceLayers</span> <span class="p">{</span>
    <span class="n">VkImageAspectFlags</span>    <span class="n">aspectMask</span><span class="p">;</span>
    <span class="kt">uint32_t</span>              <span class="n">mipLevel</span><span class="p">;</span>
    <span class="kt">uint32_t</span>              <span class="n">baseArrayLayer</span><span class="p">;</span>
    <span class="kt">uint32_t</span>              <span class="n">layerCount</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageSubresourceLayers</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>aspectMask</code> is a combination of <a href="chap12.html#VkImageAspectFlagBits">VkImageAspectFlagBits</a>,
selecting the color, depth and/or stencil aspects to be copied.</p>
</li>
<li>
<p><code>mipLevel</code> is the mipmap level to copy</p>
</li>
<li>
<p><code>baseArrayLayer</code> and <code>layerCount</code> are the starting layer and
number of layers to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSubresourceLayers-aspectMask-00167" href="chap20.html#VUID-VkImageSubresourceLayers-aspectMask-00167"></a> <span class="vuid">VUID-VkImageSubresourceLayers-aspectMask-00167</span><br>

If <code>aspectMask</code> contains <code>VK_IMAGE_ASPECT_COLOR_BIT</code>, it <strong class="purple">must</strong>
not contain either of <code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or
<code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceLayers-aspectMask-00168" href="chap20.html#VUID-VkImageSubresourceLayers-aspectMask-00168"></a> <span class="vuid">VUID-VkImageSubresourceLayers-aspectMask-00168</span><br>

<code>aspectMask</code> <strong class="purple">must</strong> not contain <code>VK_IMAGE_ASPECT_METADATA_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceLayers-aspectMask-02247" href="chap20.html#VUID-VkImageSubresourceLayers-aspectMask-02247"></a> <span class="vuid">VUID-VkImageSubresourceLayers-aspectMask-02247</span><br>

<code>aspectMask</code> <strong class="purple">must</strong> not include
<code>VK_IMAGE_ASPECT_MEMORY_PLANE<em>_i_</em>BIT_EXT</code> for any index <em>i</em></p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceLayers-layerCount-01700" href="chap20.html#VUID-VkImageSubresourceLayers-layerCount-01700"></a> <span class="vuid">VUID-VkImageSubresourceLayers-layerCount-01700</span><br>

<code>layerCount</code> <strong class="purple">must</strong> be greater than 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageSubresourceLayers-aspectMask-parameter" href="chap20.html#VUID-VkImageSubresourceLayers-aspectMask-parameter"></a> <span class="vuid">VUID-VkImageSubresourceLayers-aspectMask-parameter</span><br>
 <code>aspectMask</code> <strong class="purple">must</strong> be a valid combination of <a href="chap12.html#VkImageAspectFlagBits">VkImageAspectFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkImageSubresourceLayers-aspectMask-requiredbitmask" href="chap20.html#VUID-VkImageSubresourceLayers-aspectMask-requiredbitmask"></a> <span class="vuid">VUID-VkImageSubresourceLayers-aspectMask-requiredbitmask</span><br>
 <code>aspectMask</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A more extensible version of the copy image command is defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data between image objects, call:</p>
</div>
<div id="vkCmdCopyImage2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyImage2KHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCopyImageInfo2KHR</span><span class="o">*</span>                  <span class="n">pCopyImageInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pCopyImageInfo</code> is a pointer to a <a href="chap20.html#VkCopyImageInfo2KHR">VkCopyImageInfo2KHR</a>
structure describing the copy parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="chap20.html#vkCmdCopyImage">vkCmdCopyImage</a>, but includes
extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage2KHR-commandBuffer-01825" href="chap20.html#VUID-vkCmdCopyImage2KHR-commandBuffer-01825"></a> <span class="vuid">VUID-vkCmdCopyImage2KHR-commandBuffer-01825</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>srcImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2KHR-commandBuffer-01826" href="chap20.html#VUID-vkCmdCopyImage2KHR-commandBuffer-01826"></a> <span class="vuid">VUID-vkCmdCopyImage2KHR-commandBuffer-01826</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>dstImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2KHR-commandBuffer-01827" href="chap20.html#VUID-vkCmdCopyImage2KHR-commandBuffer-01827"></a> <span class="vuid">VUID-vkCmdCopyImage2KHR-commandBuffer-01827</span><br>

If <code>commandBuffer</code> is a protected command buffer, then
<code>dstImage</code> <strong class="purple">must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImage2KHR-commandBuffer-parameter" href="chap20.html#VUID-vkCmdCopyImage2KHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage2KHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2KHR-pCopyImageInfo-parameter" href="chap20.html#VUID-vkCmdCopyImage2KHR-pCopyImageInfo-parameter"></a> <span class="vuid">VUID-vkCmdCopyImage2KHR-pCopyImageInfo-parameter</span><br>
 <code>pCopyImageInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap20.html#VkCopyImageInfo2KHR">VkCopyImageInfo2KHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2KHR-commandBuffer-recording" href="chap20.html#VUID-vkCmdCopyImage2KHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyImage2KHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2KHR-commandBuffer-cmdpool" href="chap20.html#VUID-vkCmdCopyImage2KHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyImage2KHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImage2KHR-renderpass" href="chap20.html#VUID-vkCmdCopyImage2KHR-renderpass"></a> <span class="vuid">VUID-vkCmdCopyImage2KHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyImageInfo2KHR</code> structure is defined as:</p>
</div>
<div id="VkCopyImageInfo2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCopyImageInfo2KHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>           <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>               <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImage</span>                   <span class="n">srcImage</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>             <span class="n">srcImageLayout</span><span class="p">;</span>
    <span class="n">VkImage</span>                   <span class="n">dstImage</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>             <span class="n">dstImageLayout</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                  <span class="n">regionCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkImageCopy2KHR</span><span class="o">*</span>    <span class="n">pRegions</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCopyImageInfo2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the current layout of the source image
subresource.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the current layout of the destination image
subresource.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap20.html#VkImageCopy2KHR">VkImageCopy2KHR</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-pRegions-00124" href="chap20.html#VUID-VkCopyImageInfo2KHR-pRegions-00124"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-pRegions-00124</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImage-01995" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImage-01995"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImage-01995</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>srcImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImage-00126" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImage-00126"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImage-00126</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImage-01546" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImage-01546"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImage-01546</span><br>

If <code>srcImage</code> is non-sparse then the image or <em>disjoint</em> plane to be
copied <strong class="purple">must</strong> be bound completely and contiguously to a single
<code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImageLayout-00128" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImageLayout-00128"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImageLayout-00128</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImageLayout-01917" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImageLayout-01917"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImageLayout-01917</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_GENERAL</code>, or
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstImage-01996" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstImage-01996"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstImage-01996</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>dstImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstImage-00131" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstImage-00131"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstImage-00131</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstImage-01547" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstImage-01547"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstImage-01547</span><br>

If <code>dstImage</code> is non-sparse then the image or <em>disjoint</em> plane that
is the destination of the copy <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstImageLayout-00133" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstImageLayout-00133"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstImageLayout-00133</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstImageLayout-01395" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstImageLayout-01395"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstImageLayout-01395</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_GENERAL</code>, or
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImage-01548" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImage-01548"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImage-01548</span><br>

If the <a href="chap43.html#VkFormat">VkFormat</a> of each of <code>srcImage</code> and <code>dstImage</code> is
not a <a href="chap43.html#formats-requiring-sampler-ycbcr-conversion"><em>multi-planar
format</em></a>, the <a href="chap43.html#VkFormat">VkFormat</a> of each of <code>srcImage</code> and
<code>dstImage</code> <strong class="purple">must</strong> be compatible, as defined
<a href="chap20.html#copies-images-format-compatibility">above</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-None-01549" href="chap20.html#VUID-VkCopyImageInfo2KHR-None-01549"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-None-01549</span><br>

In a copy to or from a plane of a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar image</a>, the
<a href="chap43.html#VkFormat">VkFormat</a> of the image and plane <strong class="purple">must</strong> be compatible according to
<a href="chap43.html#formats-compatible-planes">the description of compatible planes</a> for
the plane being copied</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImage-00136" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImage-00136"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImage-00136</span><br>

The sample count of <code>srcImage</code> and <code>dstImage</code> <strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcSubresource-01696" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcSubresource-01696"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcSubresource-01696</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstSubresource-01697" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstSubresource-01697"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstSubresource-01697</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcSubresource-01698" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcSubresource-01698"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcSubresource-01698</span><br>

The <span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong class="purple">must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstSubresource-01699" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstSubresource-01699"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstSubresource-01699</span><br>

The <span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong class="purple">must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcOffset-01783" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcOffset-01783"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcOffset-01783</span><br>

The <code>srcOffset</code> and <code>extent</code> members of each element of
<code>pRegions</code> <strong class="purple">must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>’s command pool’s queue family, as described in
<a href="chap5.html#VkQueueFamilyProperties">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstOffset-01784" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstOffset-01784"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstOffset-01784</span><br>

The <code>dstOffset</code> and <code>extent</code> members of each element of
<code>pRegions</code> <strong class="purple">must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>’s command pool’s queue family, as described in
<a href="chap5.html#VkQueueFamilyProperties">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstImage-02542" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstImage-02542"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstImage-02542</span><br>

<code>dstImage</code> and <code>srcImage</code> <strong class="purple">must</strong> not have been created with
<code>flags</code> containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImage-01551" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImage-01551"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImage-01551</span><br>

If neither <code>srcImage</code> nor <code>dstImage</code> has a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar image
format</a> then for each element of <code>pRegions</code>,
<code>srcSubresource.aspectMask</code> and <code>dstSubresource.aspectMask</code>
<strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImage-01552" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImage-01552"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImage-01552</span><br>

If <code>srcImage</code> has a <a href="chap43.html#VkFormat">VkFormat</a> with
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">two planes</a> then for each
element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code> or <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImage-01553" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImage-01553"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImage-01553</span><br>

If <code>srcImage</code> has a <a href="chap43.html#VkFormat">VkFormat</a> with
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">three planes</a> then for
each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or
<code>VK_IMAGE_ASPECT_PLANE_2_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstImage-01554" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstImage-01554"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstImage-01554</span><br>

If <code>dstImage</code> has a <a href="chap43.html#VkFormat">VkFormat</a> with
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">two planes</a> then for each
element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code> or <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstImage-01555" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstImage-01555"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstImage-01555</span><br>

If <code>dstImage</code> has a <a href="chap43.html#VkFormat">VkFormat</a> with
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">three planes</a> then for
each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or
<code>VK_IMAGE_ASPECT_PLANE_2_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImage-01556" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImage-01556"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImage-01556</span><br>

If <code>srcImage</code> has a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar image format</a>
and the <code>dstImage</code> does not have a multi-planar image format, then
for each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong class="purple">must</strong> be <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstImage-01557" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstImage-01557"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstImage-01557</span><br>

If <code>dstImage</code> has a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar image format</a>
and the <code>srcImage</code> does not have a multi-planar image format, then
for each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong class="purple">must</strong> be <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImage-04443" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImage-04443"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImage-04443</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>srcSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be
<code>0</code> and <code>srcSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstImage-04444" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstImage-04444"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstImage-04444</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, then for each
element of <code>pRegions</code>, <code>dstSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be
<code>0</code> and <code>dstSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-aspectMask-00142" href="chap20.html#VUID-VkCopyImageInfo2KHR-aspectMask-00142"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-aspectMask-00142</span><br>

For each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-aspectMask-00143" href="chap20.html#VUID-VkCopyImageInfo2KHR-aspectMask-00143"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-aspectMask-00143</span><br>

For each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcOffset-00144" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcOffset-00144"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcOffset-00144</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>srcOffset.x</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcOffset-00145" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcOffset-00145"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcOffset-00145</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>srcOffset.y</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImage-00146" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImage-00146"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImage-00146</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcOffset-00147" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcOffset-00147"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcOffset-00147</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>srcOffset.z</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImage-01785" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImage-01785"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImage-01785</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstImage-01786" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstImage-01786"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstImage-01786</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImage-01787" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImage-01787"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImage-01787</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.z</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstImage-01788" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstImage-01788"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstImage-01788</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.z</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImage-01790" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImage-01790"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImage-01790</span><br>

If <code>srcImage</code> and <code>dstImage</code> are both of type
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImage-01791" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImage-01791"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImage-01791</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, and <code>dstImage</code>
is of type <code>VK_IMAGE_TYPE_3D</code>, then for each element of
<code>pRegions</code>, <code>extent.depth</code> <strong class="purple">must</strong> equal
<code>srcSubresource.layerCount</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstImage-01792" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstImage-01792"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstImage-01792</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_2D</code>, and <code>srcImage</code>
is of type <code>VK_IMAGE_TYPE_3D</code>, then for each element of
<code>pRegions</code>, <code>extent.depth</code> <strong class="purple">must</strong> equal
<code>dstSubresource.layerCount</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstOffset-00150" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstOffset-00150"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstOffset-00150</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>dstOffset.x</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstOffset-00151" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstOffset-00151"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstOffset-00151</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>dstOffset.y</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstImage-00152" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstImage-00152"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstImage-00152</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstOffset-00153" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstOffset-00153"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstOffset-00153</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>dstOffset.z</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImage-01727" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImage-01727"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImage-01727</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, then for each
element of <code>pRegions</code>, all members of <code>srcOffset</code> <strong class="purple">must</strong> be a
multiple of the corresponding dimensions of the compressed texel block</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImage-01728" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImage-01728"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImage-01728</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, then for each
element of <code>pRegions</code>, <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block width or <span class="eq">(<code>extent.width</code> + 
<code>srcOffset.x</code>)</span> <strong class="purple">must</strong> equal the width of the specified
<code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImage-01729" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImage-01729"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImage-01729</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, then for each
element of <code>pRegions</code>, <code>extent.height</code> <strong class="purple">must</strong> be a multiple of
the compressed texel block height or <span class="eq">(<code>extent.height</code> + 
<code>srcOffset.y</code>)</span> <strong class="purple">must</strong> equal the height of the specified
<code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImage-01730" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImage-01730"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImage-01730</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, then for each
element of <code>pRegions</code>, <code>extent.depth</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block depth or <span class="eq">(<code>extent.depth</code> + 
<code>srcOffset.z</code>)</span> <strong class="purple">must</strong> equal the depth of the specified
<code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstImage-01731" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstImage-01731"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstImage-01731</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, then for each
element of <code>pRegions</code>, all members of <code>dstOffset</code> <strong class="purple">must</strong> be a
multiple of the corresponding dimensions of the compressed texel block</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstImage-01732" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstImage-01732"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstImage-01732</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, then for each
element of <code>pRegions</code>, <code>extent.width</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block width or <span class="eq">(<code>extent.width</code> + 
<code>dstOffset.x</code>)</span> <strong class="purple">must</strong> equal the width of the specified
<code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstImage-01733" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstImage-01733"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstImage-01733</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, then for each
element of <code>pRegions</code>, <code>extent.height</code> <strong class="purple">must</strong> be a multiple of
the compressed texel block height or <span class="eq">(<code>extent.height</code> + 
<code>dstOffset.y</code>)</span> <strong class="purple">must</strong> equal the height of the specified
<code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstImage-01734" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstImage-01734"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstImage-01734</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, then for each
element of <code>pRegions</code>, <code>extent.depth</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block depth or <span class="eq">(<code>extent.depth</code> + 
<code>dstOffset.z</code>)</span> <strong class="purple">must</strong> equal the depth of the specified
<code>dstSubresource</code> of <code>dstImage</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-sType-sType" href="chap20.html#VUID-VkCopyImageInfo2KHR-sType-sType"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COPY_IMAGE_INFO_2_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-pNext-pNext" href="chap20.html#VUID-VkCopyImageInfo2KHR-pNext-pNext"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImage-parameter" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImage-parameter"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImage-parameter</span><br>
 <code>srcImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-srcImageLayout-parameter" href="chap20.html#VUID-VkCopyImageInfo2KHR-srcImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstImage-parameter" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstImage-parameter"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstImage-parameter</span><br>
 <code>dstImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-dstImageLayout-parameter" href="chap20.html#VUID-VkCopyImageInfo2KHR-dstImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-pRegions-parameter" href="chap20.html#VUID-VkCopyImageInfo2KHR-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap20.html#VkImageCopy2KHR">VkImageCopy2KHR</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-regionCount-arraylength" href="chap20.html#VUID-VkCopyImageInfo2KHR-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageInfo2KHR-commonparent" href="chap20.html#VUID-VkCopyImageInfo2KHR-commonparent"></a> <span class="vuid">VUID-VkCopyImageInfo2KHR-commonparent</span><br>
 Both of <code>dstImage</code>, and <code>srcImage</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageCopy2KHR</code> structure is defined as:</p>
</div>
<div id="VkImageCopy2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageCopy2KHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                 <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">srcSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">srcOffset</span><span class="p">;</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">dstSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">dstOffset</span><span class="p">;</span>
    <span class="n">VkExtent3D</span>                  <span class="n">extent</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageCopy2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcSubresource</code> and <code>dstSubresource</code> are
<a href="chap20.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structures specifying the image
subresources of the images used for the source and destination image
data, respectively.</p>
</li>
<li>
<p><code>srcOffset</code> and <code>dstOffset</code> select the initial <code>x</code>, <code>y</code>,
and <code>z</code> offsets in texels of the sub-regions of the source and
destination image data.</p>
</li>
<li>
<p><code>extent</code> is the size in texels of the image to copy in <code>width</code>,
<code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCopy2KHR-extent-00140" href="chap20.html#VUID-VkImageCopy2KHR-extent-00140"></a> <span class="vuid">VUID-VkImageCopy2KHR-extent-00140</span><br>

The number of slices of the <code>extent</code> (for 3D) or layers of the
<code>srcSubresource</code> (for non-3D) <strong class="purple">must</strong> match the number of slices of
the <code>extent</code> (for 3D) or layers of the <code>dstSubresource</code> (for
non-3D)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageCopy2KHR-sType-sType" href="chap20.html#VUID-VkImageCopy2KHR-sType-sType"></a> <span class="vuid">VUID-VkImageCopy2KHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_COPY_2_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkImageCopy2KHR-pNext-pNext" href="chap20.html#VUID-VkImageCopy2KHR-pNext-pNext"></a> <span class="vuid">VUID-VkImageCopy2KHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkImageCopy2KHR-srcSubresource-parameter" href="chap20.html#VUID-VkImageCopy2KHR-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageCopy2KHR-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap20.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageCopy2KHR-dstSubresource-parameter" href="chap20.html#VUID-VkImageCopy2KHR-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageCopy2KHR-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap20.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="copies-buffers-images"><a class="anchor" href="chap20.html#copies-buffers-images"></a>20.4. Copying Data Between Buffers and Images</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from a buffer object to an image object, call:</p>
</div>
<div id="vkCmdCopyBufferToImage" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyBufferToImage</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkBuffer</span>                                    <span class="n">srcBuffer</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">dstImage</span><span class="p">,</span>
    <span class="n">VkImageLayout</span>                               <span class="n">dstImageLayout</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">regionCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBufferImageCopy</span><span class="o">*</span>                    <span class="n">pRegions</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcBuffer</code> is the source buffer.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the copy.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap20.html#VkBufferImageCopy">VkBufferImageCopy</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each region in <code>pRegions</code> is copied from the specified region of the
source buffer to the specified region of the destination image.</p>
</div>
<div class="paragraph">
<p>If <code>dstImage</code> has a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a>, regions
of each plane to be a target of a copy <strong class="purple">must</strong> be specified separately using
the <code>pRegions</code> member of the <a href="chap20.html#VkBufferImageCopy">VkBufferImageCopy</a> structure.
In this case, the <code>aspectMask</code> of <code>imageSubresource</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or
<code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>.
For the purposes of <code>vkCmdCopyBufferToImage</code>, each plane of a
multi-planar image is treated as having the format listed in
<a href="chap43.html#formats-compatible-planes">Compatible formats of planes of multi-planar formats</a> for the plane identified by the
<code>aspectMask</code> of the corresponding subresource.
This applies both to <a href="chap43.html#VkFormat">VkFormat</a> and to coordinates used in the copy,
which correspond to texels in the <em>plane</em> rather than how these texels map
to coordinates in the image as a whole.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-01828" href="chap20.html#VUID-vkCmdCopyBufferToImage-commandBuffer-01828"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-01828</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>srcBuffer</code> <strong class="purple">must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-01829" href="chap20.html#VUID-vkCmdCopyBufferToImage-commandBuffer-01829"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-01829</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>dstImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-01830" href="chap20.html#VUID-vkCmdCopyBufferToImage-commandBuffer-01830"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-01830</span><br>

If <code>commandBuffer</code> is a protected command buffer, then
<code>dstImage</code> <strong class="purple">must</strong> not be an unprotected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-pRegions-06217" href="chap20.html#VUID-vkCmdCopyBufferToImage-pRegions-06217"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-pRegions-06217</span><br>

The image region specified by each element of <code>pRegions</code> <strong class="purple">must</strong> be
contained within the specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-pRegions-00171" href="chap20.html#VUID-vkCmdCopyBufferToImage-pRegions-00171"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-pRegions-00171</span><br>

<code>srcBuffer</code> <strong class="purple">must</strong> be large enough to contain all buffer locations
that are accessed according to <a href="chap20.html#copies-buffers-images-addressing">Buffer
and Image Addressing</a>, for each element of <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-pRegions-00173" href="chap20.html#VUID-vkCmdCopyBufferToImage-pRegions-00173"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-pRegions-00173</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-srcBuffer-00174" href="chap20.html#VUID-vkCmdCopyBufferToImage-srcBuffer-00174"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-srcBuffer-00174</span><br>

<code>srcBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-01997" href="chap20.html#VUID-vkCmdCopyBufferToImage-dstImage-01997"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-01997</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>dstImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-srcBuffer-00176" href="chap20.html#VUID-vkCmdCopyBufferToImage-srcBuffer-00176"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-srcBuffer-00176</span><br>

If <code>srcBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-00177" href="chap20.html#VUID-vkCmdCopyBufferToImage-dstImage-00177"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-00177</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-00178" href="chap20.html#VUID-vkCmdCopyBufferToImage-dstImage-00178"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-00178</span><br>

If <code>dstImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-00179" href="chap20.html#VUID-vkCmdCopyBufferToImage-dstImage-00179"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-00179</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImageLayout-00180" href="chap20.html#VUID-vkCmdCopyBufferToImage-dstImageLayout-00180"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImageLayout-00180</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImageLayout-01396" href="chap20.html#VUID-vkCmdCopyBufferToImage-dstImageLayout-01396"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImageLayout-01396</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_GENERAL</code>, or
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageSubresource-01701" href="chap20.html#VUID-vkCmdCopyBufferToImage-imageSubresource-01701"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageSubresource-01701</span><br>

The <code>imageSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageSubresource-01702" href="chap20.html#VUID-vkCmdCopyBufferToImage-imageSubresource-01702"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageSubresource-01702</span><br>

The <span class="eq"><code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong class="purple">must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageOffset-01793" href="chap20.html#VUID-vkCmdCopyBufferToImage-imageOffset-01793"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageOffset-01793</span><br>

The <code>imageOffset</code> and <code>imageExtent</code> members of each element of
<code>pRegions</code> <strong class="purple">must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>’s command pool’s queue family, as described in
<a href="chap5.html#VkQueueFamilyProperties">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-02543" href="chap20.html#VUID-vkCmdCopyBufferToImage-dstImage-02543"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-02543</span><br>

<code>dstImage</code> <strong class="purple">must</strong> not have been created with <code>flags</code> containing
<code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-04477" href="chap20.html#VUID-vkCmdCopyBufferToImage-commandBuffer-04477"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-04477</span><br>

If the queue family used to create the <a href="chap6.html#VkCommandPool">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code>, for each element of <code>pRegions</code>, the
<code>aspectMask</code> member of <code>imageSubresource</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-pRegions-06218" href="chap20.html#VUID-vkCmdCopyBufferToImage-pRegions-06218"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-pRegions-06218</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.x</code> and
<span class="eq">(<code>imageExtent.width</code> +  <code>imageOffset.x</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-pRegions-06219" href="chap20.html#VUID-vkCmdCopyBufferToImage-pRegions-06219"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-pRegions-06219</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.y</code> and
<span class="eq">(<code>imageExtent.height</code> +  <code>imageOffset.y</code>)</span> <strong class="purple">must</strong> both
be greater than or equal to <code>0</code> and less than or equal to the height of
the specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-bufferOffset-01558" href="chap20.html#VUID-vkCmdCopyBufferToImage-bufferOffset-01558"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-bufferOffset-01558</span><br>

If <code>dstImage</code> does not have either a depth/stencil or a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong class="purple">must</strong> be a
multiple of the format’s texel block size</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-bufferOffset-01559" href="chap20.html#VUID-vkCmdCopyBufferToImage-bufferOffset-01559"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-bufferOffset-01559</span><br>

If <code>dstImage</code> has a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong class="purple">must</strong> be a
multiple of the element size of the compatible format for the format and
the <code>aspectMask</code> of the <code>imageSubresource</code> as defined in
<a href="chap43.html#formats-compatible-planes">Compatible formats of planes of multi-planar formats</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-srcImage-00199" href="chap20.html#VUID-vkCmdCopyBufferToImage-srcImage-00199"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-srcImage-00199</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each element
of <code>pRegions</code>, <code>imageOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>imageExtent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageOffset-00200" href="chap20.html#VUID-vkCmdCopyBufferToImage-imageOffset-00200"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageOffset-00200</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> and
<span class="eq">(<code>imageExtent.depth</code> +  <code>imageOffset.z</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-srcImage-00201" href="chap20.html#VUID-vkCmdCopyBufferToImage-srcImage-00201"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-srcImage-00201</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>imageOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and <code>imageExtent.depth</code> <strong class="purple">must</strong> be
<code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-bufferRowLength-00203" href="chap20.html#VUID-vkCmdCopyBufferToImage-bufferRowLength-00203"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-bufferRowLength-00203</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>bufferRowLength</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block width</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-bufferImageHeight-00204" href="chap20.html#VUID-vkCmdCopyBufferToImage-bufferImageHeight-00204"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-bufferImageHeight-00204</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>bufferImageHeight</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block height</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageOffset-00205" href="chap20.html#VUID-vkCmdCopyBufferToImage-imageOffset-00205"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageOffset-00205</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, all members of <code>imageOffset</code> <strong class="purple">must</strong> be a multiple
of the corresponding dimensions of the compressed texel block</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-bufferOffset-00206" href="chap20.html#VUID-vkCmdCopyBufferToImage-bufferOffset-00206"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-bufferOffset-00206</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>bufferOffset</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block size in bytes</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageExtent-00207" href="chap20.html#VUID-vkCmdCopyBufferToImage-imageExtent-00207"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageExtent-00207</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>imageExtent.width</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block width or <span class="eq">(<code>imageExtent.width</code> + 
<code>imageOffset.x</code>)</span> <strong class="purple">must</strong> equal the width of the specified
<code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageExtent-00208" href="chap20.html#VUID-vkCmdCopyBufferToImage-imageExtent-00208"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageExtent-00208</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>imageExtent.height</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block height or <span class="eq">(<code>imageExtent.height</code> + 
<code>imageOffset.y</code>)</span> <strong class="purple">must</strong> equal the height of the specified
<code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-imageExtent-00209" href="chap20.html#VUID-vkCmdCopyBufferToImage-imageExtent-00209"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-imageExtent-00209</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>imageExtent.depth</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block depth or <span class="eq">(<code>imageExtent.depth</code> + 
<code>imageOffset.z</code>)</span> <strong class="purple">must</strong> equal the depth of the specified
<code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-aspectMask-00211" href="chap20.html#VUID-vkCmdCopyBufferToImage-aspectMask-00211"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-aspectMask-00211</span><br>

For each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-aspectMask-01560" href="chap20.html#VUID-vkCmdCopyBufferToImage-aspectMask-01560"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-aspectMask-01560</span><br>

If <code>dstImage</code> has a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong class="purple">must</strong> be <code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>,
<code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or <code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>
(with <code>VK_IMAGE_ASPECT_PLANE_2_BIT</code> valid only for image formats
with three planes)</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-baseArrayLayer-00213" href="chap20.html#VUID-vkCmdCopyBufferToImage-baseArrayLayer-00213"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-baseArrayLayer-00213</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each element of
<code>pRegions</code>, <code>imageSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be <code>0</code> and
<code>imageSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-pRegions-04725" href="chap20.html#VUID-vkCmdCopyBufferToImage-pRegions-04725"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-pRegions-04725</span><br>

If <code>dstImage</code> is not a <a href="chap20.html#blocked-image">blocked image</a>, for each
element of <code>pRegions</code>, <code>bufferRowLength</code> multiplied by the texel
block size of <code>dstImage</code> <strong class="purple">must</strong> be less than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-pRegions-04726" href="chap20.html#VUID-vkCmdCopyBufferToImage-pRegions-04726"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-pRegions-04726</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>bufferRowLength</code> divided by the compressed texel
block width and then multiplied by the texel block size of <code>dstImage</code>
<strong class="purple">must</strong> be less than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-04052" href="chap20.html#VUID-vkCmdCopyBufferToImage-commandBuffer-04052"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-04052</span><br>

If the queue family used to create the <a href="chap6.html#VkCommandPool">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code> or <code>VK_QUEUE_COMPUTE_BIT</code>, the
<code>bufferOffset</code> member of any element of <code>pRegions</code> <strong class="purple">must</strong> be a
multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-srcImage-04053" href="chap20.html#VUID-vkCmdCopyBufferToImage-srcImage-04053"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-srcImage-04053</span><br>

If <code>dstImage</code> has a depth/stencil format, the <code>bufferOffset</code>
member of any element of <code>pRegions</code> <strong class="purple">must</strong> be a multiple of <code>4</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-parameter" href="chap20.html#VUID-vkCmdCopyBufferToImage-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-srcBuffer-parameter" href="chap20.html#VUID-vkCmdCopyBufferToImage-srcBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-srcBuffer-parameter</span><br>
 <code>srcBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImage-parameter" href="chap20.html#VUID-vkCmdCopyBufferToImage-dstImage-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImage-parameter</span><br>
 <code>dstImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-dstImageLayout-parameter" href="chap20.html#VUID-vkCmdCopyBufferToImage-dstImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-pRegions-parameter" href="chap20.html#VUID-vkCmdCopyBufferToImage-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap20.html#VkBufferImageCopy">VkBufferImageCopy</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-recording" href="chap20.html#VUID-vkCmdCopyBufferToImage-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commandBuffer-cmdpool" href="chap20.html#VUID-vkCmdCopyBufferToImage-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-renderpass" href="chap20.html#VUID-vkCmdCopyBufferToImage-renderpass"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-regionCount-arraylength" href="chap20.html#VUID-vkCmdCopyBufferToImage-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage-commonparent" href="chap20.html#VUID-vkCmdCopyBufferToImage-commonparent"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstImage</code>, and <code>srcBuffer</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from an image object to a buffer object, call:</p>
</div>
<div id="vkCmdCopyImageToBuffer" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyImageToBuffer</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">srcImage</span><span class="p">,</span>
    <span class="n">VkImageLayout</span>                               <span class="n">srcImageLayout</span><span class="p">,</span>
    <span class="n">VkBuffer</span>                                    <span class="n">dstBuffer</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">regionCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBufferImageCopy</span><span class="o">*</span>                    <span class="n">pRegions</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the copy.</p>
</li>
<li>
<p><code>dstBuffer</code> is the destination buffer.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap20.html#VkBufferImageCopy">VkBufferImageCopy</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each region in <code>pRegions</code> is copied from the specified region of the
source image to the specified region of the destination buffer.</p>
</div>
<div class="paragraph">
<p>If <code>srcImage</code> has a <a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a>, regions of each plane to be a source of a copy <strong class="purple">must</strong>
be specified separately using the <code>pRegions</code> member of the
<a href="chap20.html#VkBufferImageCopy">VkBufferImageCopy</a> structure.
In this case, the <code>aspectMask</code> of <code>imageSubresource</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>, <code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or
<code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>.
For the purposes of <code>vkCmdCopyBufferToImage</code>, each plane of a
multi-planar image is treated as having the format listed in
<a href="chap43.html#formats-compatible-planes">Compatible formats of planes of multi-planar formats</a> for the plane identified by the
<code>aspectMask</code> of the corresponding subresource.
This applies both to <a href="chap43.html#VkFormat">VkFormat</a> and to coordinates used in the copy,
which correspond to texels in the <em>plane</em> rather than how these texels map
to coordinates in the image as a whole.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-01831" href="chap20.html#VUID-vkCmdCopyImageToBuffer-commandBuffer-01831"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-01831</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>srcImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-01832" href="chap20.html#VUID-vkCmdCopyImageToBuffer-commandBuffer-01832"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-01832</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>dstBuffer</code> <strong class="purple">must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-01833" href="chap20.html#VUID-vkCmdCopyImageToBuffer-commandBuffer-01833"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-01833</span><br>

If <code>commandBuffer</code> is a protected command buffer, then
<code>dstBuffer</code> <strong class="purple">must</strong> not be an unprotected buffer</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-pRegions-06220" href="chap20.html#VUID-vkCmdCopyImageToBuffer-pRegions-06220"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-pRegions-06220</span><br>

The image region specified by each element of <code>pRegions</code> <strong class="purple">must</strong> be
contained within the specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-pRegions-00183" href="chap20.html#VUID-vkCmdCopyImageToBuffer-pRegions-00183"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-pRegions-00183</span><br>

<code>dstBuffer</code> <strong class="purple">must</strong> be large enough to contain all buffer locations
that are accessed according to <a href="chap20.html#copies-buffers-images-addressing">Buffer
and Image Addressing</a>, for each element of <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-pRegions-00184" href="chap20.html#VUID-vkCmdCopyImageToBuffer-pRegions-00184"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-pRegions-00184</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-00186" href="chap20.html#VUID-vkCmdCopyImageToBuffer-srcImage-00186"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-00186</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-01998" href="chap20.html#VUID-vkCmdCopyImageToBuffer-srcImage-01998"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-01998</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>srcImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-00187" href="chap20.html#VUID-vkCmdCopyImageToBuffer-srcImage-00187"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-00187</span><br>

If <code>srcImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-dstBuffer-00191" href="chap20.html#VUID-vkCmdCopyImageToBuffer-dstBuffer-00191"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-dstBuffer-00191</span><br>

<code>dstBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-dstBuffer-00192" href="chap20.html#VUID-vkCmdCopyImageToBuffer-dstBuffer-00192"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-dstBuffer-00192</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-00188" href="chap20.html#VUID-vkCmdCopyImageToBuffer-srcImage-00188"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-00188</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImageLayout-00189" href="chap20.html#VUID-vkCmdCopyImageToBuffer-srcImageLayout-00189"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImageLayout-00189</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImageLayout-01397" href="chap20.html#VUID-vkCmdCopyImageToBuffer-srcImageLayout-01397"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImageLayout-01397</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_GENERAL</code>, or
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageSubresource-01703" href="chap20.html#VUID-vkCmdCopyImageToBuffer-imageSubresource-01703"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageSubresource-01703</span><br>

The <code>imageSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageSubresource-01704" href="chap20.html#VUID-vkCmdCopyImageToBuffer-imageSubresource-01704"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageSubresource-01704</span><br>

The <span class="eq"><code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong class="purple">must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageOffset-01794" href="chap20.html#VUID-vkCmdCopyImageToBuffer-imageOffset-01794"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageOffset-01794</span><br>

The <code>imageOffset</code> and <code>imageExtent</code> members of each element of
<code>pRegions</code> <strong class="purple">must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>’s command pool’s queue family, as described in
<a href="chap5.html#VkQueueFamilyProperties">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-02544" href="chap20.html#VUID-vkCmdCopyImageToBuffer-srcImage-02544"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-02544</span><br>

<code>srcImage</code> <strong class="purple">must</strong> not have been created with <code>flags</code> containing
<code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-pRegions-06221" href="chap20.html#VUID-vkCmdCopyImageToBuffer-pRegions-06221"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-pRegions-06221</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.x</code> and
<span class="eq">(<code>imageExtent.width</code> +  <code>imageOffset.x</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-pRegions-06222" href="chap20.html#VUID-vkCmdCopyImageToBuffer-pRegions-06222"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-pRegions-06222</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.y</code> and
<span class="eq">(imageExtent.height +  <code>imageOffset.y</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-bufferOffset-01558" href="chap20.html#VUID-vkCmdCopyImageToBuffer-bufferOffset-01558"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-bufferOffset-01558</span><br>

If <code>srcImage</code> does not have either a depth/stencil or a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong class="purple">must</strong> be a
multiple of the format’s texel block size</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-bufferOffset-01559" href="chap20.html#VUID-vkCmdCopyImageToBuffer-bufferOffset-01559"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-bufferOffset-01559</span><br>

If <code>srcImage</code> has a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong class="purple">must</strong> be a
multiple of the element size of the compatible format for the format and
the <code>aspectMask</code> of the <code>imageSubresource</code> as defined in
<a href="chap43.html#formats-compatible-planes">Compatible formats of planes of multi-planar formats</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-00199" href="chap20.html#VUID-vkCmdCopyImageToBuffer-srcImage-00199"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-00199</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each element
of <code>pRegions</code>, <code>imageOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>imageExtent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageOffset-00200" href="chap20.html#VUID-vkCmdCopyImageToBuffer-imageOffset-00200"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageOffset-00200</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> and
<span class="eq">(<code>imageExtent.depth</code> +  <code>imageOffset.z</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-00201" href="chap20.html#VUID-vkCmdCopyImageToBuffer-srcImage-00201"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-00201</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>imageOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and <code>imageExtent.depth</code> <strong class="purple">must</strong> be
<code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-bufferRowLength-00203" href="chap20.html#VUID-vkCmdCopyImageToBuffer-bufferRowLength-00203"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-bufferRowLength-00203</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>bufferRowLength</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block width</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-bufferImageHeight-00204" href="chap20.html#VUID-vkCmdCopyImageToBuffer-bufferImageHeight-00204"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-bufferImageHeight-00204</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>bufferImageHeight</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block height</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageOffset-00205" href="chap20.html#VUID-vkCmdCopyImageToBuffer-imageOffset-00205"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageOffset-00205</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, all members of <code>imageOffset</code> <strong class="purple">must</strong> be a multiple
of the corresponding dimensions of the compressed texel block</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-bufferOffset-00206" href="chap20.html#VUID-vkCmdCopyImageToBuffer-bufferOffset-00206"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-bufferOffset-00206</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>bufferOffset</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block size in bytes</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageExtent-00207" href="chap20.html#VUID-vkCmdCopyImageToBuffer-imageExtent-00207"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageExtent-00207</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>imageExtent.width</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block width or <span class="eq">(<code>imageExtent.width</code> + 
<code>imageOffset.x</code>)</span> <strong class="purple">must</strong> equal the width of the specified
<code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageExtent-00208" href="chap20.html#VUID-vkCmdCopyImageToBuffer-imageExtent-00208"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageExtent-00208</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>imageExtent.height</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block height or <span class="eq">(<code>imageExtent.height</code> + 
<code>imageOffset.y</code>)</span> <strong class="purple">must</strong> equal the height of the specified
<code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-imageExtent-00209" href="chap20.html#VUID-vkCmdCopyImageToBuffer-imageExtent-00209"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-imageExtent-00209</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>imageExtent.depth</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block depth or <span class="eq">(<code>imageExtent.depth</code> + 
<code>imageOffset.z</code>)</span> <strong class="purple">must</strong> equal the depth of the specified
<code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-aspectMask-00211" href="chap20.html#VUID-vkCmdCopyImageToBuffer-aspectMask-00211"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-aspectMask-00211</span><br>

For each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-aspectMask-01560" href="chap20.html#VUID-vkCmdCopyImageToBuffer-aspectMask-01560"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-aspectMask-01560</span><br>

If <code>srcImage</code> has a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong class="purple">must</strong> be <code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>,
<code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or <code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>
(with <code>VK_IMAGE_ASPECT_PLANE_2_BIT</code> valid only for image formats
with three planes)</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-baseArrayLayer-00213" href="chap20.html#VUID-vkCmdCopyImageToBuffer-baseArrayLayer-00213"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-baseArrayLayer-00213</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each element of
<code>pRegions</code>, <code>imageSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be <code>0</code> and
<code>imageSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-pRegions-04725" href="chap20.html#VUID-vkCmdCopyImageToBuffer-pRegions-04725"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-pRegions-04725</span><br>

If <code>srcImage</code> is not a <a href="chap20.html#blocked-image">blocked image</a>, for each
element of <code>pRegions</code>, <code>bufferRowLength</code> multiplied by the texel
block size of <code>srcImage</code> <strong class="purple">must</strong> be less than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-pRegions-04726" href="chap20.html#VUID-vkCmdCopyImageToBuffer-pRegions-04726"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-pRegions-04726</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>bufferRowLength</code> divided by the compressed texel
block width and then multiplied by the texel block size of <code>srcImage</code>
<strong class="purple">must</strong> be less than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-04052" href="chap20.html#VUID-vkCmdCopyImageToBuffer-commandBuffer-04052"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-04052</span><br>

If the queue family used to create the <a href="chap6.html#VkCommandPool">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code> or <code>VK_QUEUE_COMPUTE_BIT</code>, the
<code>bufferOffset</code> member of any element of <code>pRegions</code> <strong class="purple">must</strong> be a
multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-04053" href="chap20.html#VUID-vkCmdCopyImageToBuffer-srcImage-04053"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-04053</span><br>

If <code>srcImage</code> has a depth/stencil format, the <code>bufferOffset</code>
member of any element of <code>pRegions</code> <strong class="purple">must</strong> be a multiple of <code>4</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-parameter" href="chap20.html#VUID-vkCmdCopyImageToBuffer-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImage-parameter" href="chap20.html#VUID-vkCmdCopyImageToBuffer-srcImage-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImage-parameter</span><br>
 <code>srcImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-srcImageLayout-parameter" href="chap20.html#VUID-vkCmdCopyImageToBuffer-srcImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-dstBuffer-parameter" href="chap20.html#VUID-vkCmdCopyImageToBuffer-dstBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-pRegions-parameter" href="chap20.html#VUID-vkCmdCopyImageToBuffer-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap20.html#VkBufferImageCopy">VkBufferImageCopy</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-recording" href="chap20.html#VUID-vkCmdCopyImageToBuffer-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commandBuffer-cmdpool" href="chap20.html#VUID-vkCmdCopyImageToBuffer-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-renderpass" href="chap20.html#VUID-vkCmdCopyImageToBuffer-renderpass"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-regionCount-arraylength" href="chap20.html#VUID-vkCmdCopyImageToBuffer-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer-commonparent" href="chap20.html#VUID-vkCmdCopyImageToBuffer-commonparent"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstBuffer</code>, and <code>srcImage</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>For both <a href="chap20.html#vkCmdCopyBufferToImage">vkCmdCopyBufferToImage</a> and <a href="chap20.html#vkCmdCopyImageToBuffer">vkCmdCopyImageToBuffer</a>, each
element of <code>pRegions</code> is a structure defined as:</p>
</div>
<div id="VkBufferImageCopy" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBufferImageCopy</span> <span class="p">{</span>
    <span class="n">VkDeviceSize</span>                <span class="n">bufferOffset</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                    <span class="n">bufferRowLength</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                    <span class="n">bufferImageHeight</span><span class="p">;</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">imageSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">imageOffset</span><span class="p">;</span>
    <span class="n">VkExtent3D</span>                  <span class="n">imageExtent</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBufferImageCopy</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>bufferOffset</code> is the offset in bytes from the start of the buffer
object where the image data is copied from or to.</p>
</li>
<li>
<p><code>bufferRowLength</code> and <code>bufferImageHeight</code> specify in texels a
subregion of a larger two- or three-dimensional image in buffer memory,
and control the addressing calculations.
If either of these values is zero, that aspect of the buffer memory is
considered to be tightly packed according to the <code>imageExtent</code>.</p>
</li>
<li>
<p><code>imageSubresource</code> is a <a href="chap20.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> used to
specify the specific image subresources of the image used for the source
or destination image data.</p>
</li>
<li>
<p><code>imageOffset</code> selects the initial <code>x</code>, <code>y</code>, <code>z</code> offsets
in texels of the sub-region of the source or destination image data.</p>
</li>
<li>
<p><code>imageExtent</code> is the size in texels of the image to copy in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When copying to or from a depth or stencil aspect, the data in buffer memory
uses a layout that is a (mostly) tightly packed representation of the depth
or stencil data.
Specifically:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>data copied to or from the stencil aspect of any depth/stencil format is
tightly packed with one <code>VK_FORMAT_S8_UINT</code> value per texel.</p>
</li>
<li>
<p>data copied to or from the depth aspect of a <code>VK_FORMAT_D16_UNORM</code>
or <code>VK_FORMAT_D16_UNORM_S8_UINT</code> format is tightly packed with one
<code>VK_FORMAT_D16_UNORM</code> value per texel.</p>
</li>
<li>
<p>data copied to or from the depth aspect of a <code>VK_FORMAT_D32_SFLOAT</code>
or <code>VK_FORMAT_D32_SFLOAT_S8_UINT</code> format is tightly packed with one
<code>VK_FORMAT_D32_SFLOAT</code> value per texel.</p>
</li>
<li>
<p>data copied to or from the depth aspect of a
<code>VK_FORMAT_X8_D24_UNORM_PACK32</code> or <code>VK_FORMAT_D24_UNORM_S8_UINT</code>
format is packed with one 32-bit word per texel with the D24 value in
the LSBs of the word, and undefined values in the eight MSBs.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>To copy both the depth and stencil aspects of a depth/stencil format, two
entries in <code>pRegions</code> <strong class="purple">can</strong> be used, where one specifies the depth aspect
in <code>imageSubresource</code>, and the other specifies the stencil aspect.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Because depth or stencil aspect buffer to image copies <strong class="purple">may</strong> require format
conversions on some implementations, they are not supported on queues that
do not support graphics.</p>
</div>
<div class="paragraph">
<p>When copying to a depth aspect,
and the <code><a href="chap50.html#VK_EXT_depth_range_unrestricted">VK_EXT_depth_range_unrestricted</a></code> extension is not enabled,
the data in buffer memory <strong class="purple">must</strong> be in the range <span class="eq">[0,1]</span>, or the
resulting values are undefined.</p>
</div>
<div class="paragraph">
<p>Copies are done layer by layer starting with image layer
<code>baseArrayLayer</code> member of <code>imageSubresource</code>.
<code>layerCount</code> layers are copied from the source image or to the
destination image.</p>
</div>
<div id="blocked-image" class="paragraph">
<p>For purpose of valid usage statements here and in related copy commands, a
<em>blocked image</em> is defined as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>an image with a <em>single-plane</em>, “<code>_422</code>” format, which is treated
as a format with a 2 × 1 compressed texel block, or</p>
</li>
<li>
<p>a compressed image.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferImageCopy-bufferRowLength-00195" href="chap20.html#VUID-VkBufferImageCopy-bufferRowLength-00195"></a> <span class="vuid">VUID-VkBufferImageCopy-bufferRowLength-00195</span><br>

<code>bufferRowLength</code> <strong class="purple">must</strong> be <code>0</code>, or greater than or equal to the
<code>width</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy-bufferImageHeight-00196" href="chap20.html#VUID-VkBufferImageCopy-bufferImageHeight-00196"></a> <span class="vuid">VUID-VkBufferImageCopy-bufferImageHeight-00196</span><br>

<code>bufferImageHeight</code> <strong class="purple">must</strong> be <code>0</code>, or greater than or equal to the
<code>height</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy-aspectMask-00212" href="chap20.html#VUID-VkBufferImageCopy-aspectMask-00212"></a> <span class="vuid">VUID-VkBufferImageCopy-aspectMask-00212</span><br>

The <code>aspectMask</code> member of <code>imageSubresource</code> <strong class="purple">must</strong> only have a
single bit set</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferImageCopy-imageSubresource-parameter" href="chap20.html#VUID-VkBufferImageCopy-imageSubresource-parameter"></a> <span class="vuid">VUID-VkBufferImageCopy-imageSubresource-parameter</span><br>
 <code>imageSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap20.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>More extensible versions of the commands to copy between buffers and images
are defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from a buffer object to an image object, call:</p>
</div>
<div id="vkCmdCopyBufferToImage2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyBufferToImage2KHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCopyBufferToImageInfo2KHR</span><span class="o">*</span>          <span class="n">pCopyBufferToImageInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pCopyBufferToImageInfo</code> is a pointer to a
<a href="chap20.html#VkCopyBufferToImageInfo2KHR">VkCopyBufferToImageInfo2KHR</a> structure describing the copy
parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="chap20.html#vkCmdCopyBufferToImage">vkCmdCopyBufferToImage</a>, but
includes extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2KHR-commandBuffer-01828" href="chap20.html#VUID-vkCmdCopyBufferToImage2KHR-commandBuffer-01828"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2KHR-commandBuffer-01828</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>srcBuffer</code> <strong class="purple">must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2KHR-commandBuffer-01829" href="chap20.html#VUID-vkCmdCopyBufferToImage2KHR-commandBuffer-01829"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2KHR-commandBuffer-01829</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>dstImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2KHR-commandBuffer-01830" href="chap20.html#VUID-vkCmdCopyBufferToImage2KHR-commandBuffer-01830"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2KHR-commandBuffer-01830</span><br>

If <code>commandBuffer</code> is a protected command buffer, then
<code>dstImage</code> <strong class="purple">must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2KHR-commandBuffer-parameter" href="chap20.html#VUID-vkCmdCopyBufferToImage2KHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2KHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2KHR-pCopyBufferToImageInfo-parameter" href="chap20.html#VUID-vkCmdCopyBufferToImage2KHR-pCopyBufferToImageInfo-parameter"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2KHR-pCopyBufferToImageInfo-parameter</span><br>
 <code>pCopyBufferToImageInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap20.html#VkCopyBufferToImageInfo2KHR">VkCopyBufferToImageInfo2KHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2KHR-commandBuffer-recording" href="chap20.html#VUID-vkCmdCopyBufferToImage2KHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2KHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2KHR-commandBuffer-cmdpool" href="chap20.html#VUID-vkCmdCopyBufferToImage2KHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2KHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyBufferToImage2KHR-renderpass" href="chap20.html#VUID-vkCmdCopyBufferToImage2KHR-renderpass"></a> <span class="vuid">VUID-vkCmdCopyBufferToImage2KHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyBufferToImageInfo2KHR</code> structure is defined as:</p>
</div>
<div id="VkCopyBufferToImageInfo2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCopyBufferToImageInfo2KHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                 <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                     <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkBuffer</span>                        <span class="n">srcBuffer</span><span class="p">;</span>
    <span class="n">VkImage</span>                         <span class="n">dstImage</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>                   <span class="n">dstImageLayout</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                        <span class="n">regionCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkBufferImageCopy2KHR</span><span class="o">*</span>    <span class="n">pRegions</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCopyBufferToImageInfo2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcBuffer</code> is the source buffer.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the copy.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap20.html#VkBufferImageCopy2KHR">VkBufferImageCopy2KHR</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-pRegions-04565" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-pRegions-04565"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-pRegions-04565</span><br>

If the image region specified by each element of <code>pRegions</code> does not
contain <a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain,
it <strong class="purple">must</strong> be a region that is contained within the specified
<code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-pRegions-04554" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-pRegions-04554"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-pRegions-04554</span><br>

If the image region specified by each element of <code>pRegions</code> contains
<a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, the
rotated destination region as described in
<a href="chap20.html#copies-buffers-images-rotation-addressing">Buffer and Image Addressing with Rotation</a> <strong class="purple">must</strong> be contained within
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-pRegions-04555" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-pRegions-04555"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-pRegions-04555</span><br>

If any element of <code>pRegions</code> contains
<a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>dstImage</code> <strong class="purple">must</strong> not be a <a href="chap20.html#blocked-image">blocked image</a></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-pRegions-06203" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-pRegions-06203"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-pRegions-06203</span><br>

If any element of <code>pRegions</code> contains
<a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>dstImage</code> <strong class="purple">must</strong> be of type <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-pRegions-06204" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-pRegions-06204"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-pRegions-06204</span><br>

If any element of <code>pRegions</code> contains
<a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>dstImage</code> <strong class="purple">must</strong> not have a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-pRegions-00171" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-pRegions-00171"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-pRegions-00171</span><br>

<code>srcBuffer</code> <strong class="purple">must</strong> be large enough to contain all buffer locations
that are accessed according to <a href="chap20.html#copies-buffers-images-addressing">Buffer
and Image Addressing</a>, for each element of <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-pRegions-00173" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-pRegions-00173"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-pRegions-00173</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-srcBuffer-00174" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-srcBuffer-00174"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-srcBuffer-00174</span><br>

<code>srcBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-dstImage-01997" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-dstImage-01997"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-dstImage-01997</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>dstImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-srcBuffer-00176" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-srcBuffer-00176"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-srcBuffer-00176</span><br>

If <code>srcBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-dstImage-00177" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-dstImage-00177"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-dstImage-00177</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-dstImage-00178" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-dstImage-00178"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-dstImage-00178</span><br>

If <code>dstImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-dstImage-00179" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-dstImage-00179"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-dstImage-00179</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-dstImageLayout-00180" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-dstImageLayout-00180"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-dstImageLayout-00180</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-dstImageLayout-01396" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-dstImageLayout-01396"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-dstImageLayout-01396</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_GENERAL</code>, or
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-imageSubresource-01701" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-imageSubresource-01701"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-imageSubresource-01701</span><br>

The <code>imageSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-imageSubresource-01702" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-imageSubresource-01702"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-imageSubresource-01702</span><br>

The <span class="eq"><code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong class="purple">must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-imageOffset-01793" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-imageOffset-01793"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-imageOffset-01793</span><br>

The <code>imageOffset</code> and <code>imageExtent</code> members of each element of
<code>pRegions</code> <strong class="purple">must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>’s command pool’s queue family, as described in
<a href="chap5.html#VkQueueFamilyProperties">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-dstImage-02543" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-dstImage-02543"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-dstImage-02543</span><br>

<code>dstImage</code> <strong class="purple">must</strong> not have been created with <code>flags</code> containing
<code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-commandBuffer-04477" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-commandBuffer-04477"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-commandBuffer-04477</span><br>

If the queue family used to create the <a href="chap6.html#VkCommandPool">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code>, for each element of <code>pRegions</code>, the
<code>aspectMask</code> member of <code>imageSubresource</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_ASPECT_DEPTH_BIT</code> or <code>VK_IMAGE_ASPECT_STENCIL_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-pRegions-06223" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-pRegions-06223"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-pRegions-06223</span><br>

For each element of <code>pRegions</code> not containing
<a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain,
<code>imageOffset.x</code> and <span class="eq">(<code>imageExtent.width</code> + 
<code>imageOffset.x</code>)</span> <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>imageSubresource</code>
of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-pRegions-06224" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-pRegions-06224"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-pRegions-06224</span><br>

For each element of <code>pRegions</code> not containing
<a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain,
<code>imageOffset.y</code> and <span class="eq">(<code>imageExtent.height</code> + 
<code>imageOffset.y</code>)</span> <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>imageSubresource</code>
of <code>dstImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-bufferOffset-01558" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-bufferOffset-01558"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-bufferOffset-01558</span><br>

If <code>dstImage</code> does not have either a depth/stencil or a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong class="purple">must</strong> be a
multiple of the format’s texel block size</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-bufferOffset-01559" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-bufferOffset-01559"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-bufferOffset-01559</span><br>

If <code>dstImage</code> has a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong class="purple">must</strong> be a
multiple of the element size of the compatible format for the format and
the <code>aspectMask</code> of the <code>imageSubresource</code> as defined in
<a href="chap43.html#formats-compatible-planes">Compatible formats of planes of multi-planar formats</a></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-srcImage-00199" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-srcImage-00199"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-srcImage-00199</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each element
of <code>pRegions</code>, <code>imageOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>imageExtent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-imageOffset-00200" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-imageOffset-00200"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-imageOffset-00200</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> and
<span class="eq">(<code>imageExtent.depth</code> +  <code>imageOffset.z</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-srcImage-00201" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-srcImage-00201"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-srcImage-00201</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>imageOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and <code>imageExtent.depth</code> <strong class="purple">must</strong> be
<code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-bufferRowLength-00203" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-bufferRowLength-00203"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-bufferRowLength-00203</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>bufferRowLength</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block width</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-bufferImageHeight-00204" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-bufferImageHeight-00204"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-bufferImageHeight-00204</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>bufferImageHeight</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block height</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-imageOffset-00205" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-imageOffset-00205"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-imageOffset-00205</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, all members of <code>imageOffset</code> <strong class="purple">must</strong> be a multiple
of the corresponding dimensions of the compressed texel block</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-bufferOffset-00206" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-bufferOffset-00206"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-bufferOffset-00206</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>bufferOffset</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block size in bytes</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-imageExtent-00207" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-imageExtent-00207"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-imageExtent-00207</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>imageExtent.width</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block width or <span class="eq">(<code>imageExtent.width</code> + 
<code>imageOffset.x</code>)</span> <strong class="purple">must</strong> equal the width of the specified
<code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-imageExtent-00208" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-imageExtent-00208"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-imageExtent-00208</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>imageExtent.height</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block height or <span class="eq">(<code>imageExtent.height</code> + 
<code>imageOffset.y</code>)</span> <strong class="purple">must</strong> equal the height of the specified
<code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-imageExtent-00209" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-imageExtent-00209"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-imageExtent-00209</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>imageExtent.depth</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block depth or <span class="eq">(<code>imageExtent.depth</code> + 
<code>imageOffset.z</code>)</span> <strong class="purple">must</strong> equal the depth of the specified
<code>imageSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-aspectMask-00211" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-aspectMask-00211"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-aspectMask-00211</span><br>

For each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-aspectMask-01560" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-aspectMask-01560"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-aspectMask-01560</span><br>

If <code>dstImage</code> has a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong class="purple">must</strong> be <code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>,
<code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or <code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>
(with <code>VK_IMAGE_ASPECT_PLANE_2_BIT</code> valid only for image formats
with three planes)</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-baseArrayLayer-00213" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-baseArrayLayer-00213"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-baseArrayLayer-00213</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each element of
<code>pRegions</code>, <code>imageSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be <code>0</code> and
<code>imageSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-pRegions-04725" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-pRegions-04725"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-pRegions-04725</span><br>

If <code>dstImage</code> is not a <a href="chap20.html#blocked-image">blocked image</a>, for each
element of <code>pRegions</code>, <code>bufferRowLength</code> multiplied by the texel
block size of <code>dstImage</code> <strong class="purple">must</strong> be less than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-pRegions-04726" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-pRegions-04726"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-pRegions-04726</span><br>

If <code>dstImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>bufferRowLength</code> divided by the compressed texel
block width and then multiplied by the texel block size of <code>dstImage</code>
<strong class="purple">must</strong> be less than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-commandBuffer-04052" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-commandBuffer-04052"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-commandBuffer-04052</span><br>

If the queue family used to create the <a href="chap6.html#VkCommandPool">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code> or <code>VK_QUEUE_COMPUTE_BIT</code>, the
<code>bufferOffset</code> member of any element of <code>pRegions</code> <strong class="purple">must</strong> be a
multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-srcImage-04053" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-srcImage-04053"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-srcImage-04053</span><br>

If <code>dstImage</code> has a depth/stencil format, the <code>bufferOffset</code>
member of any element of <code>pRegions</code> <strong class="purple">must</strong> be a multiple of <code>4</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-sType-sType" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-sType-sType"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COPY_BUFFER_TO_IMAGE_INFO_2_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-pNext-pNext" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-pNext-pNext"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-srcBuffer-parameter" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-srcBuffer-parameter"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-srcBuffer-parameter</span><br>
 <code>srcBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-dstImage-parameter" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-dstImage-parameter"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-dstImage-parameter</span><br>
 <code>dstImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-dstImageLayout-parameter" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-dstImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-pRegions-parameter" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap20.html#VkBufferImageCopy2KHR">VkBufferImageCopy2KHR</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-regionCount-arraylength" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyBufferToImageInfo2KHR-commonparent" href="chap20.html#VUID-VkCopyBufferToImageInfo2KHR-commonparent"></a> <span class="vuid">VUID-VkCopyBufferToImageInfo2KHR-commonparent</span><br>
 Both of <code>dstImage</code>, and <code>srcBuffer</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy data from an image object to a buffer object, call:</p>
</div>
<div id="vkCmdCopyImageToBuffer2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="kt">void</span> <span class="nf">vkCmdCopyImageToBuffer2KHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCopyImageToBufferInfo2KHR</span><span class="o">*</span>          <span class="n">pCopyImageToBufferInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pCopyImageToBufferInfo</code> is a pointer to a
<a href="chap20.html#VkCopyImageToBufferInfo2KHR">VkCopyImageToBufferInfo2KHR</a> structure describing the copy
parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="chap20.html#vkCmdCopyImageToBuffer">vkCmdCopyImageToBuffer</a>, but
includes extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2KHR-commandBuffer-01831" href="chap20.html#VUID-vkCmdCopyImageToBuffer2KHR-commandBuffer-01831"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2KHR-commandBuffer-01831</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>srcImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2KHR-commandBuffer-01832" href="chap20.html#VUID-vkCmdCopyImageToBuffer2KHR-commandBuffer-01832"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2KHR-commandBuffer-01832</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>dstBuffer</code> <strong class="purple">must</strong> not be a protected buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2KHR-commandBuffer-01833" href="chap20.html#VUID-vkCmdCopyImageToBuffer2KHR-commandBuffer-01833"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2KHR-commandBuffer-01833</span><br>

If <code>commandBuffer</code> is a protected command buffer, then
<code>dstBuffer</code> <strong class="purple">must</strong> not be an unprotected buffer</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2KHR-commandBuffer-parameter" href="chap20.html#VUID-vkCmdCopyImageToBuffer2KHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2KHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2KHR-pCopyImageToBufferInfo-parameter" href="chap20.html#VUID-vkCmdCopyImageToBuffer2KHR-pCopyImageToBufferInfo-parameter"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2KHR-pCopyImageToBufferInfo-parameter</span><br>
 <code>pCopyImageToBufferInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap20.html#VkCopyImageToBufferInfo2KHR">VkCopyImageToBufferInfo2KHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2KHR-commandBuffer-recording" href="chap20.html#VUID-vkCmdCopyImageToBuffer2KHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2KHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2KHR-commandBuffer-cmdpool" href="chap20.html#VUID-vkCmdCopyImageToBuffer2KHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2KHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyImageToBuffer2KHR-renderpass" href="chap20.html#VUID-vkCmdCopyImageToBuffer2KHR-renderpass"></a> <span class="vuid">VUID-vkCmdCopyImageToBuffer2KHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCopyImageToBufferInfo2KHR</code> structure is defined as:</p>
</div>
<div id="VkCopyImageToBufferInfo2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCopyImageToBufferInfo2KHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                 <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                     <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImage</span>                         <span class="n">srcImage</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>                   <span class="n">srcImageLayout</span><span class="p">;</span>
    <span class="n">VkBuffer</span>                        <span class="n">dstBuffer</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                        <span class="n">regionCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkBufferImageCopy2KHR</span><span class="o">*</span>    <span class="n">pRegions</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCopyImageToBufferInfo2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the copy.</p>
</li>
<li>
<p><code>dstBuffer</code> is the destination buffer.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to copy.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap20.html#VkBufferImageCopy2KHR">VkBufferImageCopy2KHR</a>
structures specifying the regions to copy.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-pRegions-04566" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-pRegions-04566"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-pRegions-04566</span><br>

If the image region specified by each element of <code>pRegions</code> does not
contain <a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain,
it <strong class="purple">must</strong> be contained within the specified <code>imageSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-pRegions-04557" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-pRegions-04557"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-pRegions-04557</span><br>

If the image region specified by each element of <code>pRegions</code> contains
<a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, the
rotated source region as described in
<a href="chap20.html#copies-buffers-images-rotation-addressing">Buffer and Image Addressing with Rotation</a> <strong class="purple">must</strong> be contained within
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-pRegions-04558" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-pRegions-04558"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-pRegions-04558</span><br>

If any element of <code>pRegions</code> contains
<a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>srcImage</code> <strong class="purple">must</strong> not be a <a href="chap20.html#blocked-image">blocked image</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-pRegions-06205" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-pRegions-06205"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-pRegions-06205</span><br>

If any element of <code>pRegions</code> contains
<a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>srcImage</code> <strong class="purple">must</strong> be of type <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-pRegions-06206" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-pRegions-06206"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-pRegions-06206</span><br>

If any element of <code>pRegions</code> contains
<a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>srcImage</code> <strong class="purple">must</strong> not have a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-pRegions-00183" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-pRegions-00183"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-pRegions-00183</span><br>

<code>dstBuffer</code> <strong class="purple">must</strong> be large enough to contain all buffer locations
that are accessed according to <a href="chap20.html#copies-buffers-images-addressing">Buffer
and Image Addressing</a>, for each element of <code>pRegions</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-pRegions-00184" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-pRegions-00184"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-pRegions-00184</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-srcImage-00186" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-srcImage-00186"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-srcImage-00186</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-srcImage-01998" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-srcImage-01998"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-srcImage-01998</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>srcImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-srcImage-00187" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-srcImage-00187"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-srcImage-00187</span><br>

If <code>srcImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-dstBuffer-00191" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-dstBuffer-00191"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-dstBuffer-00191</span><br>

<code>dstBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-dstBuffer-00192" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-dstBuffer-00192"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-dstBuffer-00192</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-srcImage-00188" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-srcImage-00188"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-srcImage-00188</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-srcImageLayout-00189" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-srcImageLayout-00189"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-srcImageLayout-00189</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-srcImageLayout-01397" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-srcImageLayout-01397"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-srcImageLayout-01397</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> be
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_GENERAL</code>, or
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-imageSubresource-01703" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-imageSubresource-01703"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-imageSubresource-01703</span><br>

The <code>imageSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-imageSubresource-01704" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-imageSubresource-01704"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-imageSubresource-01704</span><br>

The <span class="eq"><code>imageSubresource.baseArrayLayer</code> + 
<code>imageSubresource.layerCount</code></span> of each element of <code>pRegions</code>
<strong class="purple">must</strong> be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-imageOffset-01794" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-imageOffset-01794"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-imageOffset-01794</span><br>

The <code>imageOffset</code> and <code>imageExtent</code> members of each element of
<code>pRegions</code> <strong class="purple">must</strong> respect the image transfer granularity requirements
of <code>commandBuffer</code>’s command pool’s queue family, as described in
<a href="chap5.html#VkQueueFamilyProperties">VkQueueFamilyProperties</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-srcImage-02544" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-srcImage-02544"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-srcImage-02544</span><br>

<code>srcImage</code> <strong class="purple">must</strong> not have been created with <code>flags</code> containing
<code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-imageOffset-00197" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-imageOffset-00197"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-imageOffset-00197</span><br>

For each element of <code>pRegions</code> not containing
<a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain,
<code>imageOffset.x</code> and <span class="eq">(<code>imageExtent.width</code> + 
<code>imageOffset.x</code>)</span> <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>imageSubresource</code>
of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-imageOffset-00198" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-imageOffset-00198"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-imageOffset-00198</span><br>

For each element of <code>pRegions</code> not containing
<a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain,
<code>imageOffset.y</code> and <span class="eq">(<code>imageExtent.height</code> + 
<code>imageOffset.y</code>)</span> <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>imageSubresource</code>
of <code>srcImage</code></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-bufferOffset-01558" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-bufferOffset-01558"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-bufferOffset-01558</span><br>

If <code>srcImage</code> does not have either a depth/stencil or a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong class="purple">must</strong> be a
multiple of the format’s texel block size</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-bufferOffset-01559" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-bufferOffset-01559"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-bufferOffset-01559</span><br>

If <code>srcImage</code> has a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>bufferOffset</code> <strong class="purple">must</strong> be a
multiple of the element size of the compatible format for the format and
the <code>aspectMask</code> of the <code>imageSubresource</code> as defined in
<a href="chap43.html#formats-compatible-planes">Compatible formats of planes of multi-planar formats</a></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-srcImage-00199" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-srcImage-00199"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-srcImage-00199</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each element
of <code>pRegions</code>, <code>imageOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>imageExtent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-imageOffset-00200" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-imageOffset-00200"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-imageOffset-00200</span><br>

For each element of <code>pRegions</code>, <code>imageOffset.z</code> and
<span class="eq">(<code>imageExtent.depth</code> +  <code>imageOffset.z</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-srcImage-00201" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-srcImage-00201"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-srcImage-00201</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>imageOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and <code>imageExtent.depth</code> <strong class="purple">must</strong> be
<code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-bufferRowLength-00203" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-bufferRowLength-00203"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-bufferRowLength-00203</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>bufferRowLength</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block width</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-bufferImageHeight-00204" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-bufferImageHeight-00204"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-bufferImageHeight-00204</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>bufferImageHeight</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block height</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-imageOffset-00205" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-imageOffset-00205"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-imageOffset-00205</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, all members of <code>imageOffset</code> <strong class="purple">must</strong> be a multiple
of the corresponding dimensions of the compressed texel block</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-bufferOffset-00206" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-bufferOffset-00206"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-bufferOffset-00206</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>bufferOffset</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block size in bytes</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-imageExtent-00207" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-imageExtent-00207"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-imageExtent-00207</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>imageExtent.width</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block width or <span class="eq">(<code>imageExtent.width</code> + 
<code>imageOffset.x</code>)</span> <strong class="purple">must</strong> equal the width of the specified
<code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-imageExtent-00208" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-imageExtent-00208"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-imageExtent-00208</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>imageExtent.height</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block height or <span class="eq">(<code>imageExtent.height</code> + 
<code>imageOffset.y</code>)</span> <strong class="purple">must</strong> equal the height of the specified
<code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-imageExtent-00209" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-imageExtent-00209"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-imageExtent-00209</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>imageExtent.depth</code> <strong class="purple">must</strong> be a multiple of the
compressed texel block depth or <span class="eq">(<code>imageExtent.depth</code> + 
<code>imageOffset.z</code>)</span> <strong class="purple">must</strong> equal the depth of the specified
<code>imageSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-aspectMask-00211" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-aspectMask-00211"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-aspectMask-00211</span><br>

For each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-aspectMask-01560" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-aspectMask-01560"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-aspectMask-01560</span><br>

If <code>srcImage</code> has a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a>, then
for each element of <code>pRegions</code>, <code>imageSubresource.aspectMask</code>
<strong class="purple">must</strong> be <code>VK_IMAGE_ASPECT_PLANE_0_BIT</code>,
<code>VK_IMAGE_ASPECT_PLANE_1_BIT</code>, or <code>VK_IMAGE_ASPECT_PLANE_2_BIT</code>
(with <code>VK_IMAGE_ASPECT_PLANE_2_BIT</code> valid only for image formats
with three planes)</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-baseArrayLayer-00213" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-baseArrayLayer-00213"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-baseArrayLayer-00213</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_3D</code>, for each element of
<code>pRegions</code>, <code>imageSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be <code>0</code> and
<code>imageSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-pRegions-04725" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-pRegions-04725"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-pRegions-04725</span><br>

If <code>srcImage</code> is not a <a href="chap20.html#blocked-image">blocked image</a>, for each
element of <code>pRegions</code>, <code>bufferRowLength</code> multiplied by the texel
block size of <code>srcImage</code> <strong class="purple">must</strong> be less than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-pRegions-04726" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-pRegions-04726"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-pRegions-04726</span><br>

If <code>srcImage</code> is a <a href="chap20.html#blocked-image">blocked image</a>, for each element
of <code>pRegions</code>, <code>bufferRowLength</code> divided by the compressed texel
block width and then multiplied by the texel block size of <code>srcImage</code>
<strong class="purple">must</strong> be less than or equal to <span class="eq">2<sup>31</sup>-1</span></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-commandBuffer-04052" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-commandBuffer-04052"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-commandBuffer-04052</span><br>

If the queue family used to create the <a href="chap6.html#VkCommandPool">VkCommandPool</a> which
<code>commandBuffer</code> was allocated from does not support
<code>VK_QUEUE_GRAPHICS_BIT</code> or <code>VK_QUEUE_COMPUTE_BIT</code>, the
<code>bufferOffset</code> member of any element of <code>pRegions</code> <strong class="purple">must</strong> be a
multiple of <code>4</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-srcImage-04053" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-srcImage-04053"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-srcImage-04053</span><br>

If <code>srcImage</code> has a depth/stencil format, the <code>bufferOffset</code>
member of any element of <code>pRegions</code> <strong class="purple">must</strong> be a multiple of <code>4</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-sType-sType" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-sType-sType"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COPY_IMAGE_TO_BUFFER_INFO_2_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-pNext-pNext" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-pNext-pNext"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-srcImage-parameter" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-srcImage-parameter"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-srcImage-parameter</span><br>
 <code>srcImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-srcImageLayout-parameter" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-srcImageLayout-parameter"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-dstBuffer-parameter" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-dstBuffer-parameter"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-pRegions-parameter" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-pRegions-parameter"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap20.html#VkBufferImageCopy2KHR">VkBufferImageCopy2KHR</a> structures</p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-regionCount-arraylength" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-regionCount-arraylength"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCopyImageToBufferInfo2KHR-commonparent" href="chap20.html#VUID-VkCopyImageToBufferInfo2KHR-commonparent"></a> <span class="vuid">VUID-VkCopyImageToBufferInfo2KHR-commonparent</span><br>
 Both of <code>dstBuffer</code>, and <code>srcImage</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>For both <a href="chap20.html#vkCmdCopyBufferToImage2KHR">vkCmdCopyBufferToImage2KHR</a> and
<a href="chap20.html#vkCmdCopyImageToBuffer2KHR">vkCmdCopyImageToBuffer2KHR</a>, each element of <code>pRegions</code> is a
structure defined as:</p>
</div>
<div id="VkBufferImageCopy2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBufferImageCopy2KHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                 <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkDeviceSize</span>                <span class="n">bufferOffset</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                    <span class="n">bufferRowLength</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                    <span class="n">bufferImageHeight</span><span class="p">;</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">imageSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">imageOffset</span><span class="p">;</span>
    <span class="n">VkExtent3D</span>                  <span class="n">imageExtent</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBufferImageCopy2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>bufferOffset</code> is the offset in bytes from the start of the buffer
object where the image data is copied from or to.</p>
</li>
<li>
<p><code>bufferRowLength</code> and <code>bufferImageHeight</code> specify in texels a
subregion of a larger two- or three-dimensional image in buffer memory,
and control the addressing calculations.
If either of these values is zero, that aspect of the buffer memory is
considered to be tightly packed according to the <code>imageExtent</code>.</p>
</li>
<li>
<p><code>imageSubresource</code> is a <a href="chap20.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> used to
specify the specific image subresources of the image used for the source
or destination image data.</p>
</li>
<li>
<p><code>imageOffset</code> selects the initial <code>x</code>, <code>y</code>, <code>z</code> offsets
in texels of the sub-region of the source or destination image data.</p>
</li>
<li>
<p><code>imageExtent</code> is the size in texels of the image to copy in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This structure is functionally identical to <a href="chap20.html#VkBufferImageCopy">VkBufferImageCopy</a>, but
adds <code>sType</code> and <code>pNext</code> parameters, allowing it to be more easily
extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferImageCopy2KHR-bufferRowLength-00195" href="chap20.html#VUID-VkBufferImageCopy2KHR-bufferRowLength-00195"></a> <span class="vuid">VUID-VkBufferImageCopy2KHR-bufferRowLength-00195</span><br>

<code>bufferRowLength</code> <strong class="purple">must</strong> be <code>0</code>, or greater than or equal to the
<code>width</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2KHR-bufferImageHeight-00196" href="chap20.html#VUID-VkBufferImageCopy2KHR-bufferImageHeight-00196"></a> <span class="vuid">VUID-VkBufferImageCopy2KHR-bufferImageHeight-00196</span><br>

<code>bufferImageHeight</code> <strong class="purple">must</strong> be <code>0</code>, or greater than or equal to the
<code>height</code> member of <code>imageExtent</code></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2KHR-aspectMask-00212" href="chap20.html#VUID-VkBufferImageCopy2KHR-aspectMask-00212"></a> <span class="vuid">VUID-VkBufferImageCopy2KHR-aspectMask-00212</span><br>

The <code>aspectMask</code> member of <code>imageSubresource</code> <strong class="purple">must</strong> only have a
single bit set</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBufferImageCopy2KHR-sType-sType" href="chap20.html#VUID-VkBufferImageCopy2KHR-sType-sType"></a> <span class="vuid">VUID-VkBufferImageCopy2KHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BUFFER_IMAGE_COPY_2_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2KHR-pNext-pNext" href="chap20.html#VUID-VkBufferImageCopy2KHR-pNext-pNext"></a> <span class="vuid">VUID-VkBufferImageCopy2KHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a></p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2KHR-sType-unique" href="chap20.html#VUID-VkBufferImageCopy2KHR-sType-unique"></a> <span class="vuid">VUID-VkBufferImageCopy2KHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkBufferImageCopy2KHR-imageSubresource-parameter" href="chap20.html#VUID-VkBufferImageCopy2KHR-imageSubresource-parameter"></a> <span class="vuid">VUID-VkBufferImageCopy2KHR-imageSubresource-parameter</span><br>
 <code>imageSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap20.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>For both <a href="chap20.html#vkCmdCopyBufferToImage2KHR">vkCmdCopyBufferToImage2KHR</a> and
<a href="chap20.html#vkCmdCopyImageToBuffer2KHR">vkCmdCopyImageToBuffer2KHR</a>, each region copied can include a rotation.
To specify a region with rotation, add the
<a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> to the <code>pNext</code> chain of
<a href="chap20.html#VkBufferImageCopy2KHR">VkBufferImageCopy2KHR</a>.
When a rotation is specified, <a href="chap20.html#copies-buffers-images-rotation-addressing">Buffer and Image Addressing with Rotation</a> specifies how coordinates of
texels in the source region are rotated by <code>transform</code> to produce texel
coordinates in the destination region.
When rotation is specified, the source and destination images <strong class="purple">must</strong> each be
2D images.
They <strong class="purple">must</strong> not be <a href="chap20.html#blocked-image">blocked images</a> or have a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkRenderPassTransformBeginInfoQCOM</code> structure is defined as:</p>
</div>
<div id="VkCopyCommandTransformInfoQCOM" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_QCOM_rotated_copy_commands</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCopyCommandTransformInfoQCOM</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                  <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                      <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkSurfaceTransformFlagBitsKHR</span>    <span class="n">transform</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCopyCommandTransformInfoQCOM</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>transform</code> is a <a href="chap33.html#VkSurfaceTransformFlagBitsKHR">VkSurfaceTransformFlagBitsKHR</a> value
describing the transform to be applied.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyCommandTransformInfoQCOM-transform-04560" href="chap20.html#VUID-VkCopyCommandTransformInfoQCOM-transform-04560"></a> <span class="vuid">VUID-VkCopyCommandTransformInfoQCOM-transform-04560</span><br>

<code>transform</code> <strong class="purple">must</strong> be <code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>,
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>,
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, or
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCopyCommandTransformInfoQCOM-sType-sType" href="chap20.html#VUID-VkCopyCommandTransformInfoQCOM-sType-sType"></a> <span class="vuid">VUID-VkCopyCommandTransformInfoQCOM-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COPY_COMMAND_TRANSFORM_INFO_QCOM</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="copies-buffers-images-addressing"><a class="anchor" href="chap20.html#copies-buffers-images-addressing"></a>20.4.1. Buffer and Image Addressing</h4>
<div class="paragraph">
<p>Pseudocode for image/buffer addressing of uncompressed formats is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c"><span class="n">rowLength</span> <span class="o">=</span> <span class="n">region</span><span class="o">-&gt;</span><span class="n">bufferRowLength</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="n">rowLength</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">rowLength</span> <span class="o">=</span> <span class="n">region</span><span class="o">-&gt;</span><span class="n">imageExtent</span><span class="p">.</span><span class="n">width</span><span class="p">;</span>

<span class="n">imageHeight</span> <span class="o">=</span> <span class="n">region</span><span class="o">-&gt;</span><span class="n">bufferImageHeight</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="n">imageHeight</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">imageHeight</span> <span class="o">=</span> <span class="n">region</span><span class="o">-&gt;</span><span class="n">imageExtent</span><span class="p">.</span><span class="n">height</span><span class="p">;</span>

<span class="n">texelBlockSize</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">texel</span> <span class="n">block</span> <span class="n">size</span> <span class="n">of</span> <span class="n">the</span> <span class="n">format</span> <span class="n">of</span> <span class="n">the</span> <span class="n">src</span><span class="o">/</span><span class="n">dstImage</span><span class="o">&gt;</span><span class="p">;</span>

<span class="n">address</span> <span class="n">of</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)</span> <span class="o">=</span> <span class="n">region</span><span class="o">-&gt;</span><span class="n">bufferOffset</span> <span class="o">+</span> <span class="p">(((</span><span class="n">z</span> <span class="o">*</span> <span class="n">imageHeight</span><span class="p">)</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span> <span class="o">*</span> <span class="n">rowLength</span> <span class="o">+</span> <span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">texelBlockSize</span><span class="p">;</span>

<span class="n">where</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span> <span class="n">range</span> <span class="n">from</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="n">to</span> <span class="n">region</span><span class="o">-&gt;</span><span class="n">imageExtent</span><span class="p">.{</span><span class="n">width</span><span class="p">,</span><span class="n">height</span><span class="p">,</span><span class="n">depth</span><span class="p">}.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that <code>imageOffset</code> does not affect addressing calculations for
buffer memory.
Instead, <code>bufferOffset</code> <strong class="purple">can</strong> be used to select the starting address in
buffer memory.</p>
</div>
<div class="paragraph">
<p>For block-compressed formats, all parameters are still specified in texels
rather than compressed texel blocks, but the addressing math operates on
whole compressed texel blocks.
Pseudocode for compressed copy addressing is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c"><span class="n">rowLength</span> <span class="o">=</span> <span class="n">region</span><span class="o">-&gt;</span><span class="n">bufferRowLength</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="n">rowLength</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">rowLength</span> <span class="o">=</span> <span class="n">region</span><span class="o">-&gt;</span><span class="n">imageExtent</span><span class="p">.</span><span class="n">width</span><span class="p">;</span>

<span class="n">imageHeight</span> <span class="o">=</span> <span class="n">region</span><span class="o">-&gt;</span><span class="n">bufferImageHeight</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="n">imageHeight</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">imageHeight</span> <span class="o">=</span> <span class="n">region</span><span class="o">-&gt;</span><span class="n">imageExtent</span><span class="p">.</span><span class="n">height</span><span class="p">;</span>

<span class="n">compressedTexelBlockSizeInBytes</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">compressed</span> <span class="n">texel</span> <span class="n">block</span> <span class="n">size</span> <span class="n">taken</span> <span class="n">from</span> <span class="n">the</span> <span class="n">src</span><span class="o">/</span><span class="n">dstImage</span><span class="o">&gt;</span><span class="p">;</span>
<span class="n">rowLength</span> <span class="o">=</span> <span class="p">(</span><span class="n">rowLength</span> <span class="o">+</span> <span class="n">compressedTexelBlockWidth</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">compressedTexelBlockWidth</span><span class="p">;</span>
<span class="n">imageHeight</span> <span class="o">=</span> <span class="p">(</span><span class="n">imageHeight</span> <span class="o">+</span> <span class="n">compressedTexelBlockHeight</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">compressedTexelBlockHeight</span><span class="p">;</span>

<span class="n">address</span> <span class="n">of</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)</span> <span class="o">=</span> <span class="n">region</span><span class="o">-&gt;</span><span class="n">bufferOffset</span> <span class="o">+</span> <span class="p">(((</span><span class="n">z</span> <span class="o">*</span> <span class="n">imageHeight</span><span class="p">)</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span> <span class="o">*</span> <span class="n">rowLength</span> <span class="o">+</span> <span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">compressedTexelBlockSizeInBytes</span><span class="p">;</span>

<span class="n">where</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span> <span class="n">range</span> <span class="n">from</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="n">to</span> <span class="n">region</span><span class="o">-&gt;</span><span class="n">imageExtent</span><span class="p">.{</span><span class="n">width</span><span class="o">/</span><span class="n">compressedTexelBlockWidth</span><span class="p">,</span><span class="n">height</span><span class="o">/</span><span class="n">compressedTexelBlockHeight</span><span class="p">,</span><span class="n">depth</span><span class="o">/</span><span class="n">compressedTexelBlockDepth</span><span class="p">}.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Copying to or from block-compressed images is typically done in multiples of
the compressed texel block size.
For this reason the <code>imageExtent</code> <strong class="purple">must</strong> be a multiple of the compressed
texel block dimension.
There is one exception to this rule which is <strong class="purple">required</strong> to handle compressed
images created with dimensions that are not a multiple of the compressed
texel block dimensions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <code>imageExtent.width</code> is not a multiple of the compressed texel
block width, then <span class="eq">(<code>imageExtent.width</code> + 
<code>imageOffset.x</code>)</span> <strong class="purple">must</strong> equal the image subresource width.</p>
</li>
<li>
<p>If <code>imageExtent.height</code> is not a multiple of the compressed texel
block height, then <span class="eq">(<code>imageExtent.height</code> + 
<code>imageOffset.y</code>)</span> <strong class="purple">must</strong> equal the image subresource height.</p>
</li>
<li>
<p>If <code>imageExtent.depth</code> is not a multiple of the compressed texel
block depth, then <span class="eq">(<code>imageExtent.depth</code> + 
<code>imageOffset.z</code>)</span> <strong class="purple">must</strong> equal the image subresource depth.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This allows the last compressed texel block of the image in each
non-multiple dimension to be included as a source or destination of the
copy.</p>
</div>
</div>
<div class="sect3">
<h4 id="copies-buffers-images-rotation-addressing"><a class="anchor" href="chap20.html#copies-buffers-images-rotation-addressing"></a>20.4.2. Buffer and Image Addressing with Rotation</h4>
<div class="paragraph">
<p>When <a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> is in the <code>pNext</code> chain of
<a href="chap20.html#VkBufferImageCopy2KHR">VkBufferImageCopy2KHR</a>, a <em>rotated copy</em> is specified.
For both <a href="chap20.html#vkCmdCopyImageToBuffer2KHR">vkCmdCopyImageToBuffer2KHR</a> and
<a href="chap20.html#vkCmdCopyBufferToImage2KHR">vkCmdCopyBufferToImage2KHR</a>, a rotation is applied to the region used
for image accesses, but a non-rotated region is used for buffer accesses.
In the case of rotated <a href="chap20.html#vkCmdCopyImageToBuffer2KHR">vkCmdCopyImageToBuffer2KHR</a>, the source image
region is rotated.
In the case of rotated <a href="chap20.html#vkCmdCopyBufferToImage2KHR">vkCmdCopyBufferToImage2KHR</a>, the destination
image region is rotated.</p>
</div>
<div class="paragraph">
<p>For a <em>rotated copy</em>, the following description of rotated addressing
replaces the description in <a href="chap20.html#copies-buffers-images-addressing">Buffer and
Image Addressing</a>.</p>
</div>
<div class="paragraph">
<p>The following code computes rotation of unnormalized coordinates.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c"><span class="c1">// Forward rotation of unnormalized coordinates</span>
<span class="n">VkOffset2D</span> <span class="nf">RotateUV</span><span class="p">(</span><span class="n">VkOffset2D</span> <span class="n">in</span><span class="p">,</span> <span class="n">VkSurfaceTransformFlagBitsKHR</span> <span class="n">flags</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">VkOffset2D</span> <span class="n">output</span><span class="p">;</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">flags</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">case</span> <span class="n">VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</span><span class="p">:</span>
            <span class="n">out</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">in</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
            <span class="n">out</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">in</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</span><span class="p">:</span>
            <span class="n">out</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="n">in</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
            <span class="n">out</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">in</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</span><span class="p">:</span>
            <span class="n">out</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="n">in</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
            <span class="n">out</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="n">in</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</span><span class="p">:</span>
            <span class="n">out</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">in</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
            <span class="n">out</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="n">in</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">out</span><span class="p">;</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Pseudocode for image/buffer addressing of uncompressed formats with rotation
is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c"><span class="n">rowLength</span> <span class="o">=</span> <span class="n">region</span><span class="o">-&gt;</span><span class="n">bufferRowLength</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="n">rowLength</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">rowLength</span> <span class="o">=</span> <span class="n">region</span><span class="o">-&gt;</span><span class="n">imageExtent</span><span class="p">.</span><span class="n">width</span><span class="p">;</span>

<span class="n">imageHeight</span> <span class="o">=</span> <span class="n">region</span><span class="o">-&gt;</span><span class="n">bufferImageHeight</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="n">imageHeight</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">imageHeight</span> <span class="o">=</span> <span class="n">region</span><span class="o">-&gt;</span><span class="n">imageExtent</span><span class="p">.</span><span class="n">height</span><span class="p">;</span>

<span class="n">texelBlockSize</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">texel</span> <span class="n">block</span> <span class="n">size</span> <span class="n">of</span> <span class="n">the</span> <span class="n">format</span> <span class="n">of</span> <span class="n">the</span> <span class="n">src</span><span class="o">/</span><span class="n">dstImage</span><span class="o">&gt;</span><span class="p">;</span>

<span class="c1">// Buffer addressing is unaffected by rotation:</span>
<span class="n">address</span> <span class="n">of</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)</span> <span class="o">=</span> <span class="n">region</span><span class="o">-&gt;</span><span class="n">bufferOffset</span> <span class="o">+</span> <span class="p">(((</span><span class="n">z</span> <span class="o">*</span> <span class="n">imageHeight</span><span class="p">)</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span> <span class="o">*</span> <span class="n">rowLength</span> <span class="o">+</span> <span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="n">texelBlockSize</span><span class="p">;</span>

<span class="c1">// When copying from buffer to image, the source buffer coordinates x,y,z range from (0,0,0) to</span>
<span class="c1">// region-&gt;imageExtent.{width,height,depth}.  The source extent is rotated by the specified</span>
<span class="c1">// VK_SURFACE_TRANSFORM, centered on the imageOffset, to define a rotated destination region.</span>
<span class="c1">// For each source buffer texel with coordinates (x,y) the rotated destination image texel has</span>
<span class="c1">// coordinates (x',y') defined as:</span>
<span class="p">(</span><span class="n">x</span><span class="err">'</span><span class="p">,</span><span class="n">y</span><span class="err">'</span><span class="p">)</span><span class="o">=</span> <span class="n">RotateUV</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="o">+</span> <span class="n">ImageOffset</span><span class="p">.{</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">}</span>

<span class="c1">// When copying from image to buffer, the the destination buffer coordinates x,y,z range from (0,0,0) to</span>
<span class="c1">// region-&gt;imageExtent.{width,height,depth}.  The destination extent is rotated by the specified</span>
<span class="c1">//  VK_SURFACE_TRANSFORM, centered on the imageOffset, to define a rotated source region.  For each destination</span>
<span class="c1">// buffer texel with coordinates (x,y) the rotated source image texel has coordinates (x',y') defined as:</span>
<span class="p">(</span><span class="n">x</span><span class="err">'</span><span class="p">,</span><span class="n">y</span><span class="err">'</span><span class="p">)</span><span class="o">=</span> <span class="n">RotateUV</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="o">+</span> <span class="n">ImageOffset</span><span class="p">.{</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that <code>imageOffset</code> does not affect addressing calculations for
buffer memory.
Instead, <code>bufferOffset</code> <strong class="purple">can</strong> be used to select the starting address in
buffer memory.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="copies-imagescaling"><a class="anchor" href="chap20.html#copies-imagescaling"></a>20.5. Image Copies with Scaling</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy regions of a source image into a destination image, potentially
performing format conversion, arbitrary scaling, and filtering, call:</p>
</div>
<div id="vkCmdBlitImage" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdBlitImage</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">srcImage</span><span class="p">,</span>
    <span class="n">VkImageLayout</span>                               <span class="n">srcImageLayout</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">dstImage</span><span class="p">,</span>
    <span class="n">VkImageLayout</span>                               <span class="n">dstImageLayout</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">regionCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkImageBlit</span><span class="o">*</span>                          <span class="n">pRegions</span><span class="p">,</span>
    <span class="n">VkFilter</span>                                    <span class="n">filter</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the blit.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the blit.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to blit.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap20.html#VkImageBlit">VkImageBlit</a> structures
specifying the regions to blit.</p>
</li>
<li>
<p><code>filter</code> is a <a href="chap13.html#VkFilter">VkFilter</a> specifying the filter to apply if the
blits require scaling.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkCmdBlitImage</code> <strong class="purple">must</strong> not be used for multisampled source or
destination images.
Use <a href="chap20.html#vkCmdResolveImage">vkCmdResolveImage</a> for this purpose.</p>
</div>
<div class="paragraph">
<p>As the sizes of the source and destination extents <strong class="purple">can</strong> differ in any
dimension, texels in the source extent are scaled and filtered to the
destination extent.
Scaling occurs via the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For each destination texel, the integer coordinate of that texel is
converted to an unnormalized texture coordinate, using the effective
inverse of the equations described in
<a href="chap16.html#textures-unnormalized-to-integer">unnormalized to integer
conversion</a>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>base</sub> = i +  ½</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>base</sub> = j +  ½</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w<sub>base</sub> = k +  ½</span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>These base coordinates are then offset by the first destination offset:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>offset</sub> = u<sub>base</sub> - x<sub>dst0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>offset</sub> = v<sub>base</sub> - y<sub>dst0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w<sub>offset</sub> = w<sub>base</sub> - z<sub>dst0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">a<sub>offset</sub> = a - <code>baseArrayCount</code><sub>dst</sub></span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>The scale is determined from the source and destination regions, and
applied to the offset coordinates:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">scale<sub>u</sub> = (x<sub>src1</sub> - x<sub>src0</sub>) / (x<sub>dst1</sub> - x<sub>dst0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">scale<sub>v</sub> = (y<sub>src1</sub> - y<sub>src0</sub>) / (y<sub>dst1</sub> - y<sub>dst0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">scale<sub>w</sub> = (z<sub>src1</sub> - z<sub>src0</sub>) / (z<sub>dst1</sub> - z<sub>dst0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>scaled</sub> = u<sub>offset</sub> × scale<sub>u</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>scaled</sub> = v<sub>offset</sub> × scale<sub>v</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w<sub>scaled</sub> = w<sub>offset</sub> × scale<sub>w</sub></span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>Finally the source offset is added to the scaled coordinates, to
determine the final unnormalized coordinates used to sample from
<code>srcImage</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u = u<sub>scaled</sub> +  x<sub>src0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v = v<sub>scaled</sub> +  y<sub>src0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w = w<sub>scaled</sub> +  z<sub>src0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">q = <code>mipLevel</code></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">a = a<sub>offset</sub> +  <code>baseArrayCount</code><sub>src</sub></span></p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>These coordinates are used to sample from the source image, as described in
<a href="chap16.html">Image Operations chapter</a>, with the filter mode equal to that
of <code>filter</code>, a mipmap mode of <code>VK_SAMPLER_MIPMAP_MODE_NEAREST</code> and
an address mode of <code>VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE</code>.
Implementations <strong class="purple">must</strong> clamp at the edge of the source image, and <strong class="purple">may</strong>
additionally clamp to the edge of the source region.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Due to allowable rounding errors in the generation of the source texture
coordinates, it is not always possible to guarantee exactly which source
texels will be sampled for a given blit.
As rounding errors are implementation-dependent, the exact results of a
blitting operation are also implementation-dependent.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Blits are done layer by layer starting with the <code>baseArrayLayer</code> member
of <code>srcSubresource</code> for the source and <code>dstSubresource</code> for the
destination.
<code>layerCount</code> layers are blitted to the destination image.</p>
</div>
<div class="paragraph">
<p>When blitting 3D textures, slices in the destination region bounded by
<code>dstOffsets</code>[0].z and <code>dstOffsets</code>[1].z are sampled from slices in
the source region bounded by <code>srcOffsets</code>[0].z and
<code>srcOffsets</code>[1].z.
If the <code>filter</code> parameter is <code>VK_FILTER_LINEAR</code> then the value
sampled from the source image is taken by doing linear filtering using the
interpolated <strong>z</strong> coordinate represented by <strong>w</strong> in the previous equations.
If the <code>filter</code> parameter is <code>VK_FILTER_NEAREST</code> then the value
sampled from the source image is taken from the single nearest slice, with
an implementation-dependent arithmetic rounding mode.</p>
</div>
<div class="paragraph">
<p>The following filtering and conversion rules apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Integer formats <strong class="purple">can</strong> only be converted to other integer formats with the
same signedness.</p>
</li>
<li>
<p>No format conversion is supported between depth/stencil images.
The formats <strong class="purple">must</strong> match.</p>
</li>
<li>
<p>Format conversions on unorm, snorm, unscaled and packed float formats of
the copied aspect of the image are performed by first converting the
pixels to float values.</p>
</li>
<li>
<p>For sRGB source formats, nonlinear RGB values are converted to linear
representation prior to filtering.</p>
</li>
<li>
<p>After filtering, the float values are first clamped and then cast to the
destination image format.
In case of sRGB destination format, linear RGB values are converted to
nonlinear representation before writing the pixel to the image.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Signed and unsigned integers are converted by first clamping to the
representable range of the destination format, then casting the value.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-01834" href="chap20.html#VUID-vkCmdBlitImage-commandBuffer-01834"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-01834</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>srcImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-01835" href="chap20.html#VUID-vkCmdBlitImage-commandBuffer-01835"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-01835</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>dstImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-01836" href="chap20.html#VUID-vkCmdBlitImage-commandBuffer-01836"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-01836</span><br>

If <code>commandBuffer</code> is a protected command buffer, then
<code>dstImage</code> <strong class="purple">must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBlitImage-pRegions-00215" href="chap20.html#VUID-vkCmdBlitImage-pRegions-00215"></a> <span class="vuid">VUID-vkCmdBlitImage-pRegions-00215</span><br>

The source region specified by each element of <code>pRegions</code> <strong class="purple">must</strong> be a
region that is contained within <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-pRegions-00216" href="chap20.html#VUID-vkCmdBlitImage-pRegions-00216"></a> <span class="vuid">VUID-vkCmdBlitImage-pRegions-00216</span><br>

The destination region specified by each element of <code>pRegions</code> <strong class="purple">must</strong>
be a region that is contained within <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-pRegions-00217" href="chap20.html#VUID-vkCmdBlitImage-pRegions-00217"></a> <span class="vuid">VUID-vkCmdBlitImage-pRegions-00217</span><br>

The union of all destination regions, specified by the elements of
<code>pRegions</code>, <strong class="purple">must</strong> not overlap in memory with any texel that <strong class="purple">may</strong> be
sampled during the blit operation</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-01999" href="chap20.html#VUID-vkCmdBlitImage-srcImage-01999"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-01999</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>srcImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_BLIT_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-01561" href="chap20.html#VUID-vkCmdBlitImage-srcImage-01561"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-01561</span><br>

<code>srcImage</code> <strong class="purple">must</strong> not use a format listed in
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">Formats requiring sampler Y′C<sub>B</sub>C<sub>R</sub> conversion for <code>VK_IMAGE_ASPECT_COLOR_BIT</code> image views</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00219" href="chap20.html#VUID-vkCmdBlitImage-srcImage-00219"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00219</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00220" href="chap20.html#VUID-vkCmdBlitImage-srcImage-00220"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00220</span><br>

If <code>srcImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImageLayout-00221" href="chap20.html#VUID-vkCmdBlitImage-srcImageLayout-00221"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImageLayout-00221</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImageLayout-01398" href="chap20.html#VUID-vkCmdBlitImage-srcImageLayout-01398"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImageLayout-01398</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> be <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-02000" href="chap20.html#VUID-vkCmdBlitImage-dstImage-02000"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-02000</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>dstImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_BLIT_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-01562" href="chap20.html#VUID-vkCmdBlitImage-dstImage-01562"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-01562</span><br>

<code>dstImage</code> <strong class="purple">must</strong> not use a format listed in
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">Formats requiring sampler Y′C<sub>B</sub>C<sub>R</sub> conversion for <code>VK_IMAGE_ASPECT_COLOR_BIT</code> image views</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-00224" href="chap20.html#VUID-vkCmdBlitImage-dstImage-00224"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-00224</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-00225" href="chap20.html#VUID-vkCmdBlitImage-dstImage-00225"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-00225</span><br>

If <code>dstImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImageLayout-00226" href="chap20.html#VUID-vkCmdBlitImage-dstImageLayout-00226"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImageLayout-00226</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImageLayout-01399" href="chap20.html#VUID-vkCmdBlitImage-dstImageLayout-01399"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImageLayout-01399</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> be <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00229" href="chap20.html#VUID-vkCmdBlitImage-srcImage-00229"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00229</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with a signed
integer <a href="chap43.html#VkFormat">VkFormat</a>, the other <strong class="purple">must</strong> also have been created with a
signed integer <a href="chap43.html#VkFormat">VkFormat</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00230" href="chap20.html#VUID-vkCmdBlitImage-srcImage-00230"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00230</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with an
unsigned integer <a href="chap43.html#VkFormat">VkFormat</a>, the other <strong class="purple">must</strong> also have been created
with an unsigned integer <a href="chap43.html#VkFormat">VkFormat</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00231" href="chap20.html#VUID-vkCmdBlitImage-srcImage-00231"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00231</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with a
depth/stencil format, the other <strong class="purple">must</strong> have exactly the same format</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00232" href="chap20.html#VUID-vkCmdBlitImage-srcImage-00232"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00232</span><br>

If <code>srcImage</code> was created with a depth/stencil format, <code>filter</code>
<strong class="purple">must</strong> be <code>VK_FILTER_NEAREST</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00233" href="chap20.html#VUID-vkCmdBlitImage-srcImage-00233"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00233</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have been created with a <code>samples</code> value of
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-00234" href="chap20.html#VUID-vkCmdBlitImage-dstImage-00234"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-00234</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have been created with a <code>samples</code> value of
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-filter-02001" href="chap20.html#VUID-vkCmdBlitImage-filter-02001"></a> <span class="vuid">VUID-vkCmdBlitImage-filter-02001</span><br>

If <code>filter</code> is <code>VK_FILTER_LINEAR</code>, then the
<a href="chap12.html#resources-image-format-features">format features</a> of <code>srcImage</code>
<strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-filter-02002" href="chap20.html#VUID-vkCmdBlitImage-filter-02002"></a> <span class="vuid">VUID-vkCmdBlitImage-filter-02002</span><br>

If <code>filter</code> is <code>VK_FILTER_CUBIC_EXT</code>, then the
<a href="chap12.html#resources-image-format-features">format features</a> of <code>srcImage</code>
<strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_CUBIC_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-filter-00237" href="chap20.html#VUID-vkCmdBlitImage-filter-00237"></a> <span class="vuid">VUID-vkCmdBlitImage-filter-00237</span><br>

If <code>filter</code> is <code>VK_FILTER_CUBIC_EXT</code>, <code>srcImage</code> <strong class="purple">must</strong> be of
type <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcSubresource-01705" href="chap20.html#VUID-vkCmdBlitImage-srcSubresource-01705"></a> <span class="vuid">VUID-vkCmdBlitImage-srcSubresource-01705</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstSubresource-01706" href="chap20.html#VUID-vkCmdBlitImage-dstSubresource-01706"></a> <span class="vuid">VUID-vkCmdBlitImage-dstSubresource-01706</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcSubresource-01707" href="chap20.html#VUID-vkCmdBlitImage-srcSubresource-01707"></a> <span class="vuid">VUID-vkCmdBlitImage-srcSubresource-01707</span><br>

The <span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong class="purple">must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstSubresource-01708" href="chap20.html#VUID-vkCmdBlitImage-dstSubresource-01708"></a> <span class="vuid">VUID-vkCmdBlitImage-dstSubresource-01708</span><br>

The <span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong class="purple">must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-02545" href="chap20.html#VUID-vkCmdBlitImage-dstImage-02545"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-02545</span><br>

<code>dstImage</code> and <code>srcImage</code> <strong class="purple">must</strong> not have been created with
<code>flags</code> containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00240" href="chap20.html#VUID-vkCmdBlitImage-srcImage-00240"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00240</span><br>

If either <code>srcImage</code> or <code>dstImage</code> is of type
<code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
<code>srcSubresource.baseArrayLayer</code> and
<code>dstSubresource.baseArrayLayer</code> <strong class="purple">must</strong> each be <code>0</code>, and
<code>srcSubresource.layerCount</code> and <code>dstSubresource.layerCount</code>
<strong class="purple">must</strong> each be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-aspectMask-00241" href="chap20.html#VUID-vkCmdBlitImage-aspectMask-00241"></a> <span class="vuid">VUID-vkCmdBlitImage-aspectMask-00241</span><br>

For each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-aspectMask-00242" href="chap20.html#VUID-vkCmdBlitImage-aspectMask-00242"></a> <span class="vuid">VUID-vkCmdBlitImage-aspectMask-00242</span><br>

For each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcOffset-00243" href="chap20.html#VUID-vkCmdBlitImage-srcOffset-00243"></a> <span class="vuid">VUID-vkCmdBlitImage-srcOffset-00243</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].x and
<code>srcOffsets</code>[1].x <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>srcSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcOffset-00244" href="chap20.html#VUID-vkCmdBlitImage-srcOffset-00244"></a> <span class="vuid">VUID-vkCmdBlitImage-srcOffset-00244</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].y and
<code>srcOffsets</code>[1].y <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>srcSubresource</code>
of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00245" href="chap20.html#VUID-vkCmdBlitImage-srcImage-00245"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00245</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffsets</code>[0].y <strong class="purple">must</strong> be <code>0</code> and
<code>srcOffsets</code>[1].y <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcOffset-00246" href="chap20.html#VUID-vkCmdBlitImage-srcOffset-00246"></a> <span class="vuid">VUID-vkCmdBlitImage-srcOffset-00246</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].z and
<code>srcOffsets</code>[1].z <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the depth of the specified <code>srcSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-00247" href="chap20.html#VUID-vkCmdBlitImage-srcImage-00247"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-00247</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>srcOffsets</code>[0].z <strong class="purple">must</strong> be <code>0</code> and <code>srcOffsets</code>[1].z <strong class="purple">must</strong> be
<code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstOffset-00248" href="chap20.html#VUID-vkCmdBlitImage-dstOffset-00248"></a> <span class="vuid">VUID-vkCmdBlitImage-dstOffset-00248</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].x and
<code>dstOffsets</code>[1].x <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>dstSubresource</code> of
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstOffset-00249" href="chap20.html#VUID-vkCmdBlitImage-dstOffset-00249"></a> <span class="vuid">VUID-vkCmdBlitImage-dstOffset-00249</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].y and
<code>dstOffsets</code>[1].y <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>dstSubresource</code>
of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-00250" href="chap20.html#VUID-vkCmdBlitImage-dstImage-00250"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-00250</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffsets</code>[0].y <strong class="purple">must</strong> be <code>0</code> and
<code>dstOffsets</code>[1].y <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstOffset-00251" href="chap20.html#VUID-vkCmdBlitImage-dstOffset-00251"></a> <span class="vuid">VUID-vkCmdBlitImage-dstOffset-00251</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].z and
<code>dstOffsets</code>[1].z <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the depth of the specified <code>dstSubresource</code> of
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-00252" href="chap20.html#VUID-vkCmdBlitImage-dstImage-00252"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-00252</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>dstOffsets</code>[0].z <strong class="purple">must</strong> be <code>0</code> and <code>dstOffsets</code>[1].z <strong class="purple">must</strong> be
<code>1</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-parameter" href="chap20.html#VUID-vkCmdBlitImage-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImage-parameter" href="chap20.html#VUID-vkCmdBlitImage-srcImage-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImage-parameter</span><br>
 <code>srcImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-srcImageLayout-parameter" href="chap20.html#VUID-vkCmdBlitImage-srcImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImage-parameter" href="chap20.html#VUID-vkCmdBlitImage-dstImage-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImage-parameter</span><br>
 <code>dstImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-dstImageLayout-parameter" href="chap20.html#VUID-vkCmdBlitImage-dstImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-pRegions-parameter" href="chap20.html#VUID-vkCmdBlitImage-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap20.html#VkImageBlit">VkImageBlit</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-filter-parameter" href="chap20.html#VUID-vkCmdBlitImage-filter-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage-filter-parameter</span><br>
 <code>filter</code> <strong class="purple">must</strong> be a valid <a href="chap13.html#VkFilter">VkFilter</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-recording" href="chap20.html#VUID-vkCmdBlitImage-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-commandBuffer-cmdpool" href="chap20.html#VUID-vkCmdBlitImage-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdBlitImage-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-renderpass" href="chap20.html#VUID-vkCmdBlitImage-renderpass"></a> <span class="vuid">VUID-vkCmdBlitImage-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-regionCount-arraylength" href="chap20.html#VUID-vkCmdBlitImage-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdBlitImage-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage-commonparent" href="chap20.html#VUID-vkCmdBlitImage-commonparent"></a> <span class="vuid">VUID-vkCmdBlitImage-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstImage</code>, and <code>srcImage</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageBlit</code> structure is defined as:</p>
</div>
<div id="VkImageBlit" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageBlit</span> <span class="p">{</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">srcSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">srcOffsets</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">dstSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">dstOffsets</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">}</span> <span class="n">VkImageBlit</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcSubresource</code> is the subresource to blit from.</p>
</li>
<li>
<p><code>srcOffsets</code> is a pointer to an array of two <a href="chap3.html#VkOffset3D">VkOffset3D</a>
structures specifying the bounds of the source region within
<code>srcSubresource</code>.</p>
</li>
<li>
<p><code>dstSubresource</code> is the subresource to blit into.</p>
</li>
<li>
<p><code>dstOffsets</code> is a pointer to an array of two <a href="chap3.html#VkOffset3D">VkOffset3D</a>
structures specifying the bounds of the destination region within
<code>dstSubresource</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For each element of the <code>pRegions</code> array, a blit operation is performed
for the specified source and destination regions.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageBlit-aspectMask-00238" href="chap20.html#VUID-VkImageBlit-aspectMask-00238"></a> <span class="vuid">VUID-VkImageBlit-aspectMask-00238</span><br>

The <code>aspectMask</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageBlit-layerCount-00239" href="chap20.html#VUID-VkImageBlit-layerCount-00239"></a> <span class="vuid">VUID-VkImageBlit-layerCount-00239</span><br>

The <code>layerCount</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong class="purple">must</strong> match</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageBlit-srcSubresource-parameter" href="chap20.html#VUID-VkImageBlit-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageBlit-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap20.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageBlit-dstSubresource-parameter" href="chap20.html#VUID-VkImageBlit-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageBlit-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap20.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A more extensible version of the blit image command is defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy regions of a source image into a destination image, potentially
performing format conversion, arbitrary scaling, and filtering, call:</p>
</div>
<div id="vkCmdBlitImage2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="kt">void</span> <span class="nf">vkCmdBlitImage2KHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkBlitImageInfo2KHR</span><span class="o">*</span>                  <span class="n">pBlitImageInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pBlitImageInfo</code> is a pointer to a <a href="chap20.html#VkBlitImageInfo2KHR">VkBlitImageInfo2KHR</a>
structure describing the blit parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="chap20.html#vkCmdBlitImage">vkCmdBlitImage</a>, but includes
extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBlitImage2KHR-commandBuffer-01834" href="chap20.html#VUID-vkCmdBlitImage2KHR-commandBuffer-01834"></a> <span class="vuid">VUID-vkCmdBlitImage2KHR-commandBuffer-01834</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>srcImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2KHR-commandBuffer-01835" href="chap20.html#VUID-vkCmdBlitImage2KHR-commandBuffer-01835"></a> <span class="vuid">VUID-vkCmdBlitImage2KHR-commandBuffer-01835</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>dstImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2KHR-commandBuffer-01836" href="chap20.html#VUID-vkCmdBlitImage2KHR-commandBuffer-01836"></a> <span class="vuid">VUID-vkCmdBlitImage2KHR-commandBuffer-01836</span><br>

If <code>commandBuffer</code> is a protected command buffer, then
<code>dstImage</code> <strong class="purple">must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBlitImage2KHR-commandBuffer-parameter" href="chap20.html#VUID-vkCmdBlitImage2KHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage2KHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2KHR-pBlitImageInfo-parameter" href="chap20.html#VUID-vkCmdBlitImage2KHR-pBlitImageInfo-parameter"></a> <span class="vuid">VUID-vkCmdBlitImage2KHR-pBlitImageInfo-parameter</span><br>
 <code>pBlitImageInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap20.html#VkBlitImageInfo2KHR">VkBlitImageInfo2KHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2KHR-commandBuffer-recording" href="chap20.html#VUID-vkCmdBlitImage2KHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdBlitImage2KHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2KHR-commandBuffer-cmdpool" href="chap20.html#VUID-vkCmdBlitImage2KHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdBlitImage2KHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdBlitImage2KHR-renderpass" href="chap20.html#VUID-vkCmdBlitImage2KHR-renderpass"></a> <span class="vuid">VUID-vkCmdBlitImage2KHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkBlitImageInfo2KHR</code> structure is defined as:</p>
</div>
<div id="VkBlitImageInfo2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkBlitImageInfo2KHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>           <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>               <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImage</span>                   <span class="n">srcImage</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>             <span class="n">srcImageLayout</span><span class="p">;</span>
    <span class="n">VkImage</span>                   <span class="n">dstImage</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>             <span class="n">dstImageLayout</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                  <span class="n">regionCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkImageBlit2KHR</span><span class="o">*</span>    <span class="n">pRegions</span><span class="p">;</span>
    <span class="n">VkFilter</span>                  <span class="n">filter</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkBlitImageInfo2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the blit.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the blit.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to blit.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap20.html#VkImageBlit2KHR">VkImageBlit2KHR</a>
structures specifying the regions to blit.</p>
</li>
<li>
<p><code>filter</code> is a <a href="chap13.html#VkFilter">VkFilter</a> specifying the filter to apply if the
blits require scaling.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-pRegions-00215" href="chap20.html#VUID-VkBlitImageInfo2KHR-pRegions-00215"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-pRegions-00215</span><br>

The source region specified by each element of <code>pRegions</code> <strong class="purple">must</strong> be a
region that is contained within <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-pRegions-00216" href="chap20.html#VUID-VkBlitImageInfo2KHR-pRegions-00216"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-pRegions-00216</span><br>

The destination region specified by each element of <code>pRegions</code> <strong class="purple">must</strong>
be a region that is contained within <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-pRegions-00217" href="chap20.html#VUID-VkBlitImageInfo2KHR-pRegions-00217"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-pRegions-00217</span><br>

The union of all destination regions, specified by the elements of
<code>pRegions</code>, <strong class="purple">must</strong> not overlap in memory with any texel that <strong class="purple">may</strong> be
sampled during the blit operation</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-srcImage-01999" href="chap20.html#VUID-VkBlitImageInfo2KHR-srcImage-01999"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-srcImage-01999</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>srcImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_BLIT_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-srcImage-01561" href="chap20.html#VUID-VkBlitImageInfo2KHR-srcImage-01561"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-srcImage-01561</span><br>

<code>srcImage</code> <strong class="purple">must</strong> not use a format listed in
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">Formats requiring sampler Y′C<sub>B</sub>C<sub>R</sub> conversion for <code>VK_IMAGE_ASPECT_COLOR_BIT</code> image views</a></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-srcImage-00219" href="chap20.html#VUID-VkBlitImageInfo2KHR-srcImage-00219"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-srcImage-00219</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-srcImage-00220" href="chap20.html#VUID-VkBlitImageInfo2KHR-srcImage-00220"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-srcImage-00220</span><br>

If <code>srcImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-srcImageLayout-00221" href="chap20.html#VUID-VkBlitImageInfo2KHR-srcImageLayout-00221"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-srcImageLayout-00221</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-srcImageLayout-01398" href="chap20.html#VUID-VkBlitImageInfo2KHR-srcImageLayout-01398"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-srcImageLayout-01398</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> be <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-dstImage-02000" href="chap20.html#VUID-VkBlitImageInfo2KHR-dstImage-02000"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-dstImage-02000</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>dstImage</code> <strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_BLIT_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-dstImage-01562" href="chap20.html#VUID-VkBlitImageInfo2KHR-dstImage-01562"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-dstImage-01562</span><br>

<code>dstImage</code> <strong class="purple">must</strong> not use a format listed in
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">Formats requiring sampler Y′C<sub>B</sub>C<sub>R</sub> conversion for <code>VK_IMAGE_ASPECT_COLOR_BIT</code> image views</a></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-dstImage-00224" href="chap20.html#VUID-VkBlitImageInfo2KHR-dstImage-00224"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-dstImage-00224</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have been created with
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-dstImage-00225" href="chap20.html#VUID-VkBlitImageInfo2KHR-dstImage-00225"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-dstImage-00225</span><br>

If <code>dstImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-dstImageLayout-00226" href="chap20.html#VUID-VkBlitImageInfo2KHR-dstImageLayout-00226"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-dstImageLayout-00226</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-dstImageLayout-01399" href="chap20.html#VUID-VkBlitImageInfo2KHR-dstImageLayout-01399"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-dstImageLayout-01399</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> be <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-srcImage-00229" href="chap20.html#VUID-VkBlitImageInfo2KHR-srcImage-00229"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-srcImage-00229</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with a signed
integer <a href="chap43.html#VkFormat">VkFormat</a>, the other <strong class="purple">must</strong> also have been created with a
signed integer <a href="chap43.html#VkFormat">VkFormat</a></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-srcImage-00230" href="chap20.html#VUID-VkBlitImageInfo2KHR-srcImage-00230"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-srcImage-00230</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with an
unsigned integer <a href="chap43.html#VkFormat">VkFormat</a>, the other <strong class="purple">must</strong> also have been created
with an unsigned integer <a href="chap43.html#VkFormat">VkFormat</a></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-srcImage-00231" href="chap20.html#VUID-VkBlitImageInfo2KHR-srcImage-00231"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-srcImage-00231</span><br>

If either of <code>srcImage</code> or <code>dstImage</code> was created with a
depth/stencil format, the other <strong class="purple">must</strong> have exactly the same format</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-srcImage-00232" href="chap20.html#VUID-VkBlitImageInfo2KHR-srcImage-00232"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-srcImage-00232</span><br>

If <code>srcImage</code> was created with a depth/stencil format, <code>filter</code>
<strong class="purple">must</strong> be <code>VK_FILTER_NEAREST</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-srcImage-00233" href="chap20.html#VUID-VkBlitImageInfo2KHR-srcImage-00233"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-srcImage-00233</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have been created with a <code>samples</code> value of
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-dstImage-00234" href="chap20.html#VUID-VkBlitImageInfo2KHR-dstImage-00234"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-dstImage-00234</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have been created with a <code>samples</code> value of
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-filter-02001" href="chap20.html#VUID-VkBlitImageInfo2KHR-filter-02001"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-filter-02001</span><br>

If <code>filter</code> is <code>VK_FILTER_LINEAR</code>, then the
<a href="chap12.html#resources-image-format-features">format features</a> of <code>srcImage</code>
<strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_LINEAR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-filter-02002" href="chap20.html#VUID-VkBlitImageInfo2KHR-filter-02002"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-filter-02002</span><br>

If <code>filter</code> is <code>VK_FILTER_CUBIC_EXT</code>, then the
<a href="chap12.html#resources-image-format-features">format features</a> of <code>srcImage</code>
<strong class="purple">must</strong> contain <code>VK_FORMAT_FEATURE_SAMPLED_IMAGE_FILTER_CUBIC_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-filter-00237" href="chap20.html#VUID-VkBlitImageInfo2KHR-filter-00237"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-filter-00237</span><br>

If <code>filter</code> is <code>VK_FILTER_CUBIC_EXT</code>, <code>srcImage</code> <strong class="purple">must</strong> be of
type <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-srcSubresource-01705" href="chap20.html#VUID-VkBlitImageInfo2KHR-srcSubresource-01705"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-srcSubresource-01705</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-dstSubresource-01706" href="chap20.html#VUID-VkBlitImageInfo2KHR-dstSubresource-01706"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-dstSubresource-01706</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-srcSubresource-01707" href="chap20.html#VUID-VkBlitImageInfo2KHR-srcSubresource-01707"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-srcSubresource-01707</span><br>

The <span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong class="purple">must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-dstSubresource-01708" href="chap20.html#VUID-VkBlitImageInfo2KHR-dstSubresource-01708"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-dstSubresource-01708</span><br>

The <span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong class="purple">must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-dstImage-02545" href="chap20.html#VUID-VkBlitImageInfo2KHR-dstImage-02545"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-dstImage-02545</span><br>

<code>dstImage</code> and <code>srcImage</code> <strong class="purple">must</strong> not have been created with
<code>flags</code> containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-srcImage-00240" href="chap20.html#VUID-VkBlitImageInfo2KHR-srcImage-00240"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-srcImage-00240</span><br>

If either <code>srcImage</code> or <code>dstImage</code> is of type
<code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
<code>srcSubresource.baseArrayLayer</code> and
<code>dstSubresource.baseArrayLayer</code> <strong class="purple">must</strong> each be <code>0</code>, and
<code>srcSubresource.layerCount</code> and <code>dstSubresource.layerCount</code>
<strong class="purple">must</strong> each be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-aspectMask-00241" href="chap20.html#VUID-VkBlitImageInfo2KHR-aspectMask-00241"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-aspectMask-00241</span><br>

For each element of <code>pRegions</code>, <code>srcSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-aspectMask-00242" href="chap20.html#VUID-VkBlitImageInfo2KHR-aspectMask-00242"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-aspectMask-00242</span><br>

For each element of <code>pRegions</code>, <code>dstSubresource.aspectMask</code>
<strong class="purple">must</strong> specify aspects present in <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-srcOffset-00243" href="chap20.html#VUID-VkBlitImageInfo2KHR-srcOffset-00243"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-srcOffset-00243</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].x and
<code>srcOffsets</code>[1].x <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>srcSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-srcOffset-00244" href="chap20.html#VUID-VkBlitImageInfo2KHR-srcOffset-00244"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-srcOffset-00244</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].y and
<code>srcOffsets</code>[1].y <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>srcSubresource</code>
of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-srcImage-00245" href="chap20.html#VUID-VkBlitImageInfo2KHR-srcImage-00245"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-srcImage-00245</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffsets</code>[0].y <strong class="purple">must</strong> be <code>0</code> and
<code>srcOffsets</code>[1].y <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-srcOffset-00246" href="chap20.html#VUID-VkBlitImageInfo2KHR-srcOffset-00246"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-srcOffset-00246</span><br>

For each element of <code>pRegions</code>, <code>srcOffsets</code>[0].z and
<code>srcOffsets</code>[1].z <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the depth of the specified <code>srcSubresource</code> of
<code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-srcImage-00247" href="chap20.html#VUID-VkBlitImageInfo2KHR-srcImage-00247"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-srcImage-00247</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>srcOffsets</code>[0].z <strong class="purple">must</strong> be <code>0</code> and <code>srcOffsets</code>[1].z <strong class="purple">must</strong> be
<code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-dstOffset-00248" href="chap20.html#VUID-VkBlitImageInfo2KHR-dstOffset-00248"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-dstOffset-00248</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].x and
<code>dstOffsets</code>[1].x <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the width of the specified <code>dstSubresource</code> of
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-dstOffset-00249" href="chap20.html#VUID-VkBlitImageInfo2KHR-dstOffset-00249"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-dstOffset-00249</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].y and
<code>dstOffsets</code>[1].y <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the height of the specified <code>dstSubresource</code>
of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-dstImage-00250" href="chap20.html#VUID-VkBlitImageInfo2KHR-dstImage-00250"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-dstImage-00250</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffsets</code>[0].y <strong class="purple">must</strong> be <code>0</code> and
<code>dstOffsets</code>[1].y <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-dstOffset-00251" href="chap20.html#VUID-VkBlitImageInfo2KHR-dstOffset-00251"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-dstOffset-00251</span><br>

For each element of <code>pRegions</code>, <code>dstOffsets</code>[0].z and
<code>dstOffsets</code>[1].z <strong class="purple">must</strong> both be greater than or equal to <code>0</code> and
less than or equal to the depth of the specified <code>dstSubresource</code> of
<code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-dstImage-00252" href="chap20.html#VUID-VkBlitImageInfo2KHR-dstImage-00252"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-dstImage-00252</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>dstOffsets</code>[0].z <strong class="purple">must</strong> be <code>0</code> and <code>dstOffsets</code>[1].z <strong class="purple">must</strong> be
<code>1</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-pRegions-04561" href="chap20.html#VUID-VkBlitImageInfo2KHR-pRegions-04561"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-pRegions-04561</span><br>

If any element of <code>pRegions</code> contains
<a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>srcImage</code> and <code>dstImage</code> <strong class="purple">must</strong> not be block-compressed images</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-pRegions-06207" href="chap20.html#VUID-VkBlitImageInfo2KHR-pRegions-06207"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-pRegions-06207</span><br>

If any element of <code>pRegions</code> contains
<a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>srcImage</code> <strong class="purple">must</strong> be of type <code>VK_IMAGE_TYPE_2D</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-pRegions-06208" href="chap20.html#VUID-VkBlitImageInfo2KHR-pRegions-06208"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-pRegions-06208</span><br>

If any element of <code>pRegions</code> contains
<a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> in its <code>pNext</code> chain, then
<code>srcImage</code> <strong class="purple">must</strong> not have a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-sType-sType" href="chap20.html#VUID-VkBlitImageInfo2KHR-sType-sType"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_BLIT_IMAGE_INFO_2_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-pNext-pNext" href="chap20.html#VUID-VkBlitImageInfo2KHR-pNext-pNext"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-srcImage-parameter" href="chap20.html#VUID-VkBlitImageInfo2KHR-srcImage-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-srcImage-parameter</span><br>
 <code>srcImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-srcImageLayout-parameter" href="chap20.html#VUID-VkBlitImageInfo2KHR-srcImageLayout-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-dstImage-parameter" href="chap20.html#VUID-VkBlitImageInfo2KHR-dstImage-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-dstImage-parameter</span><br>
 <code>dstImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-dstImageLayout-parameter" href="chap20.html#VUID-VkBlitImageInfo2KHR-dstImageLayout-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-pRegions-parameter" href="chap20.html#VUID-VkBlitImageInfo2KHR-pRegions-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap20.html#VkImageBlit2KHR">VkImageBlit2KHR</a> structures</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-filter-parameter" href="chap20.html#VUID-VkBlitImageInfo2KHR-filter-parameter"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-filter-parameter</span><br>
 <code>filter</code> <strong class="purple">must</strong> be a valid <a href="chap13.html#VkFilter">VkFilter</a> value</p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-regionCount-arraylength" href="chap20.html#VUID-VkBlitImageInfo2KHR-regionCount-arraylength"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkBlitImageInfo2KHR-commonparent" href="chap20.html#VUID-VkBlitImageInfo2KHR-commonparent"></a> <span class="vuid">VUID-VkBlitImageInfo2KHR-commonparent</span><br>
 Both of <code>dstImage</code>, and <code>srcImage</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageBlit2KHR</code> structure is defined as:</p>
</div>
<div id="VkImageBlit2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageBlit2KHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                 <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">srcSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">srcOffsets</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">dstSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">dstOffsets</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">}</span> <span class="n">VkImageBlit2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcSubresource</code> is the subresource to blit from.</p>
</li>
<li>
<p><code>srcOffsets</code> is a pointer to an array of two <a href="chap3.html#VkOffset3D">VkOffset3D</a>
structures specifying the bounds of the source region within
<code>srcSubresource</code>.</p>
</li>
<li>
<p><code>dstSubresource</code> is the subresource to blit into.</p>
</li>
<li>
<p><code>dstOffsets</code> is a pointer to an array of two <a href="chap3.html#VkOffset3D">VkOffset3D</a>
structures specifying the bounds of the destination region within
<code>dstSubresource</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For each element of the <code>pRegions</code> array, a blit operation is performed
for the specified source and destination regions.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageBlit2KHR-aspectMask-00238" href="chap20.html#VUID-VkImageBlit2KHR-aspectMask-00238"></a> <span class="vuid">VUID-VkImageBlit2KHR-aspectMask-00238</span><br>

The <code>aspectMask</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong class="purple">must</strong> match</p>
</li>
<li>
<p><a id="VUID-VkImageBlit2KHR-layerCount-00239" href="chap20.html#VUID-VkImageBlit2KHR-layerCount-00239"></a> <span class="vuid">VUID-VkImageBlit2KHR-layerCount-00239</span><br>

The <code>layerCount</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong class="purple">must</strong> match</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageBlit2KHR-sType-sType" href="chap20.html#VUID-VkImageBlit2KHR-sType-sType"></a> <span class="vuid">VUID-VkImageBlit2KHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_BLIT_2_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkImageBlit2KHR-pNext-pNext" href="chap20.html#VUID-VkImageBlit2KHR-pNext-pNext"></a> <span class="vuid">VUID-VkImageBlit2KHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a></p>
</li>
<li>
<p><a id="VUID-VkImageBlit2KHR-sType-unique" href="chap20.html#VUID-VkImageBlit2KHR-sType-unique"></a> <span class="vuid">VUID-VkImageBlit2KHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkImageBlit2KHR-srcSubresource-parameter" href="chap20.html#VUID-VkImageBlit2KHR-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageBlit2KHR-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap20.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageBlit2KHR-dstSubresource-parameter" href="chap20.html#VUID-VkImageBlit2KHR-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageBlit2KHR-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap20.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>For <a href="chap20.html#vkCmdBlitImage2KHR">vkCmdBlitImage2KHR</a>, each region copied can include a rotation.
To specify a rotated region, add <a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> to the
<code>pNext</code> chain of <a href="chap20.html#VkImageBlit2KHR">VkImageBlit2KHR</a>.
For each region with a rotation specified,
<a href="chap20.html#copies-images-scaling-rotation">Image Blits with Scaling and Rotation</a>
specifies how coordinates are rotated prior to sampling from the source
image.
When rotation is specified, the source and destination images <strong class="purple">must</strong> each be
2D images.
They <strong class="purple">must</strong> not be <a href="chap20.html#blocked-image">blocked images</a> or have a
<a href="chap43.html#formats-requiring-sampler-ycbcr-conversion">multi-planar format</a>.</p>
</div>
<div class="sect3">
<h4 id="copies-images-scaling-rotation"><a class="anchor" href="chap20.html#copies-images-scaling-rotation"></a>20.5.1. Image Blits with Scaling and Rotation</h4>
<div class="paragraph">
<p>When <a href="chap20.html#VkCopyCommandTransformInfoQCOM">VkCopyCommandTransformInfoQCOM</a> is in the <code>pNext</code> chain of
<a href="chap20.html#VkImageBlit2KHR">VkImageBlit2KHR</a>, the specified region is rotated during the blit.
The following description of rotated addressing replaces the description in
<a href="chap20.html#vkCmdBlitImage">vkCmdBlitImage</a>.</p>
</div>
<div class="paragraph">
<p>The following code computes rotation of normalized coordinates.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c"><span class="c1">// rotation of normalized coordinates</span>
<span class="n">VkOffset2D</span> <span class="nf">RotateNormUV</span><span class="p">(</span><span class="n">VkOffset2D</span> <span class="n">in</span><span class="p">,</span> <span class="n">VkSurfaceTransformFlagBitsKHR</span> <span class="n">flags</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">VkOffset2D</span> <span class="n">output</span><span class="p">;</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">flags</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">case</span> <span class="n">VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</span><span class="p">:</span>
            <span class="n">out</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">in</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
            <span class="n">out</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">in</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</span><span class="p">:</span>
            <span class="n">out</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">in</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
            <span class="n">out</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span> <span class="o">-</span> <span class="n">in</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</span><span class="p">:</span>
            <span class="n">out</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span> <span class="o">-</span> <span class="n">in</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
            <span class="n">out</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span> <span class="o">-</span> <span class="n">in</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</span><span class="p">:</span>
            <span class="n">out</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span> <span class="o">-</span> <span class="n">in</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
            <span class="n">out</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">in</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">out</span><span class="p">;</span>
<span class="p">}</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>For each destination texel, the integer coordinate of that texel is
converted to an unnormalized texture coordinate, using the effective
inverse of the equations described in
<a href="chap16.html#textures-unnormalized-to-integer">unnormalized to integer
conversion</a>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>base</sub> = i +  ½</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>base</sub> = j +  ½</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w<sub>base</sub> = k +  ½</span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>These base coordinates are then offset by the first destination offset:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>offset</sub> = u<sub>base</sub> - x<sub>dst0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>offset</sub> = v<sub>base</sub> - y<sub>dst0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w<sub>offset</sub> = w<sub>base</sub> - z<sub>dst0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">a<sub>offset</sub> = a - <code>baseArrayCount</code><sub>dst</sub></span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>The UV destination coordinates are scaled by the destination region,
rotated, and scaled by the source region.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>dest_scaled</sub> = u<sub>offset</sub> / (x<sub>dst1</sub> - x<sub>dst0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>dest_scaled</sub> = v<sub>offset</sub> / (y<sub>dst1</sub> - y<sub>dst0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">(u<sub>src_scaled</sub>, v<sub>src_scaled</sub>) =
<code>RotateNormUV</code>(u<sub>dest_scaled</sub>, v<sub>dest_scaled</sub>,
<code>transform</code>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u<sub>scaled</sub> = u<sub>src_scaled</sub> * (x<sub>Src1</sub> - x<sub>Src0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v<sub>scaled</sub> = v<sub>src_scaled</sub> * (y<sub>Src1</sub> - y<sub>Src0</sub>)</span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>The W coordinate is unaffected by rotation.
The scale is determined from the ratio of source and destination
regions, and applied to the offset coordinate:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">scale<sub>w</sub> = (z<sub>Src1</sub> - z<sub>Src0</sub>) / (z<sub>dst1</sub> - z<sub>dst0</sub>)</span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w<sub>scaled</sub> = w<sub>offset</sub> * scale<sub>w</sub></span></p>
</dd>
</dl>
</div>
</li>
<li>
<p>Finally the source offset is added to the scaled source coordinates, to
determine the final unnormalized coordinates used to sample from
<code>srcImage</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">u = u<sub>scaled</sub> +  x<sub>Src0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">v = v<sub>scaled</sub> +  y<sub>Src0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">w = w<sub>scaled</sub> +  z<sub>Src0</sub></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">q = <code>mipLevel</code></span></p>
</dd>
<dt class="hdlist1"></dt>
<dd>
<p><span class="eq">a = a<sub>offset</sub> +  <code>baseArrayCount</code><sub>src</sub></span></p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>These coordinates are used to sample from the source image as described for
<a href="chap16.html">Image Operations</a>, with the filter mode equal to that of
<code>filter</code>; a mipmap mode of <code>VK_SAMPLER_MIPMAP_MODE_NEAREST</code>; and an
address mode of <code>VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE</code>.
Implementations <strong class="purple">must</strong> clamp at the edge of the source image, and <strong class="purple">may</strong>
additionally clamp to the edge of the source region.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="copies-resolve"><a class="anchor" href="chap20.html#copies-resolve"></a>20.6. Resolving Multisample Images</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To resolve a multisample color image to a non-multisample color image, call:</p>
</div>
<div id="vkCmdResolveImage" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdResolveImage</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">srcImage</span><span class="p">,</span>
    <span class="n">VkImageLayout</span>                               <span class="n">srcImageLayout</span><span class="p">,</span>
    <span class="n">VkImage</span>                                     <span class="n">dstImage</span><span class="p">,</span>
    <span class="n">VkImageLayout</span>                               <span class="n">dstImageLayout</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">regionCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkImageResolve</span><span class="o">*</span>                       <span class="n">pRegions</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the resolve.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the resolve.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to resolve.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap20.html#VkImageResolve">VkImageResolve</a>
structures specifying the regions to resolve.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>During the resolve the samples corresponding to each pixel location in the
source are converted to a single sample before being written to the
destination.
If the source formats are floating-point or normalized types, the sample
values for each pixel are resolved in an implementation-dependent manner.
If the source formats are integer types, a single sample’s value is selected
for each pixel.</p>
</div>
<div class="paragraph">
<p><code>srcOffset</code> and <code>dstOffset</code> select the initial <code>x</code>, <code>y</code>, and
<code>z</code> offsets in texels of the sub-regions of the source and destination
image data.
<code>extent</code> is the size in texels of the source image to resolve in
<code>width</code>, <code>height</code> and <code>depth</code>.
Each element of <code>pRegions</code> <strong class="purple">must</strong> be a region that is contained within
its corresponding image.</p>
</div>
<div class="paragraph">
<p>Resolves are done layer by layer starting with <code>baseArrayLayer</code> member
of <code>srcSubresource</code> for the source and <code>dstSubresource</code> for the
destination.
<code>layerCount</code> layers are resolved to the destination image.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-01837" href="chap20.html#VUID-vkCmdResolveImage-commandBuffer-01837"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-01837</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>srcImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-01838" href="chap20.html#VUID-vkCmdResolveImage-commandBuffer-01838"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-01838</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>dstImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-01839" href="chap20.html#VUID-vkCmdResolveImage-commandBuffer-01839"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-01839</span><br>

If <code>commandBuffer</code> is a protected command buffer, then
<code>dstImage</code> <strong class="purple">must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResolveImage-pRegions-00255" href="chap20.html#VUID-vkCmdResolveImage-pRegions-00255"></a> <span class="vuid">VUID-vkCmdResolveImage-pRegions-00255</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-00256" href="chap20.html#VUID-vkCmdResolveImage-srcImage-00256"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-00256</span><br>

If <code>srcImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-00257" href="chap20.html#VUID-vkCmdResolveImage-srcImage-00257"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-00257</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have a sample count equal to any valid sample count
value other than <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-00258" href="chap20.html#VUID-vkCmdResolveImage-dstImage-00258"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-00258</span><br>

If <code>dstImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-00259" href="chap20.html#VUID-vkCmdResolveImage-dstImage-00259"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-00259</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImageLayout-00260" href="chap20.html#VUID-vkCmdResolveImage-srcImageLayout-00260"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImageLayout-00260</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImageLayout-01400" href="chap20.html#VUID-vkCmdResolveImage-srcImageLayout-01400"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImageLayout-01400</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> be <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImageLayout-00262" href="chap20.html#VUID-vkCmdResolveImage-dstImageLayout-00262"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImageLayout-00262</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImageLayout-01401" href="chap20.html#VUID-vkCmdResolveImage-dstImageLayout-01401"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImageLayout-01401</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> be <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-02003" href="chap20.html#VUID-vkCmdResolveImage-dstImage-02003"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-02003</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>dstImage</code> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-01386" href="chap20.html#VUID-vkCmdResolveImage-srcImage-01386"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-01386</span><br>

<code>srcImage</code> and <code>dstImage</code> <strong class="purple">must</strong> have been created with the same
image format</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcSubresource-01709" href="chap20.html#VUID-vkCmdResolveImage-srcSubresource-01709"></a> <span class="vuid">VUID-vkCmdResolveImage-srcSubresource-01709</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstSubresource-01710" href="chap20.html#VUID-vkCmdResolveImage-dstSubresource-01710"></a> <span class="vuid">VUID-vkCmdResolveImage-dstSubresource-01710</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcSubresource-01711" href="chap20.html#VUID-vkCmdResolveImage-srcSubresource-01711"></a> <span class="vuid">VUID-vkCmdResolveImage-srcSubresource-01711</span><br>

The <span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong class="purple">must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstSubresource-01712" href="chap20.html#VUID-vkCmdResolveImage-dstSubresource-01712"></a> <span class="vuid">VUID-vkCmdResolveImage-dstSubresource-01712</span><br>

The <span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong class="purple">must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-02546" href="chap20.html#VUID-vkCmdResolveImage-dstImage-02546"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-02546</span><br>

<code>dstImage</code> and <code>srcImage</code> <strong class="purple">must</strong> not have been created with
<code>flags</code> containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-04446" href="chap20.html#VUID-vkCmdResolveImage-srcImage-04446"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-04446</span><br>

If either <code>srcImage</code> or <code>dstImage</code> are of type
<code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
<code>srcSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be <code>0</code> and
<code>srcSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-04447" href="chap20.html#VUID-vkCmdResolveImage-srcImage-04447"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-04447</span><br>

If either <code>srcImage</code> or <code>dstImage</code> are of type
<code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
<code>dstSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be <code>0</code> and
<code>dstSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcOffset-00269" href="chap20.html#VUID-vkCmdResolveImage-srcOffset-00269"></a> <span class="vuid">VUID-vkCmdResolveImage-srcOffset-00269</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>srcOffset.x</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcOffset-00270" href="chap20.html#VUID-vkCmdResolveImage-srcOffset-00270"></a> <span class="vuid">VUID-vkCmdResolveImage-srcOffset-00270</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>srcOffset.y</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-00271" href="chap20.html#VUID-vkCmdResolveImage-srcImage-00271"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-00271</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcOffset-00272" href="chap20.html#VUID-vkCmdResolveImage-srcOffset-00272"></a> <span class="vuid">VUID-vkCmdResolveImage-srcOffset-00272</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>srcOffset.z</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-00273" href="chap20.html#VUID-vkCmdResolveImage-srcImage-00273"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-00273</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>srcOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and <code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstOffset-00274" href="chap20.html#VUID-vkCmdResolveImage-dstOffset-00274"></a> <span class="vuid">VUID-vkCmdResolveImage-dstOffset-00274</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>dstOffset.x</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstOffset-00275" href="chap20.html#VUID-vkCmdResolveImage-dstOffset-00275"></a> <span class="vuid">VUID-vkCmdResolveImage-dstOffset-00275</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>dstOffset.y</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-00276" href="chap20.html#VUID-vkCmdResolveImage-dstImage-00276"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-00276</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstOffset-00277" href="chap20.html#VUID-vkCmdResolveImage-dstOffset-00277"></a> <span class="vuid">VUID-vkCmdResolveImage-dstOffset-00277</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>dstOffset.z</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-00278" href="chap20.html#VUID-vkCmdResolveImage-dstImage-00278"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-00278</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>dstOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and <code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-parameter" href="chap20.html#VUID-vkCmdResolveImage-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImage-parameter" href="chap20.html#VUID-vkCmdResolveImage-srcImage-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImage-parameter</span><br>
 <code>srcImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-srcImageLayout-parameter" href="chap20.html#VUID-vkCmdResolveImage-srcImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImage-parameter" href="chap20.html#VUID-vkCmdResolveImage-dstImage-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImage-parameter</span><br>
 <code>dstImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-dstImageLayout-parameter" href="chap20.html#VUID-vkCmdResolveImage-dstImageLayout-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-pRegions-parameter" href="chap20.html#VUID-vkCmdResolveImage-pRegions-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap20.html#VkImageResolve">VkImageResolve</a> structures</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-recording" href="chap20.html#VUID-vkCmdResolveImage-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-commandBuffer-cmdpool" href="chap20.html#VUID-vkCmdResolveImage-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdResolveImage-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-renderpass" href="chap20.html#VUID-vkCmdResolveImage-renderpass"></a> <span class="vuid">VUID-vkCmdResolveImage-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-regionCount-arraylength" href="chap20.html#VUID-vkCmdResolveImage-regionCount-arraylength"></a> <span class="vuid">VUID-vkCmdResolveImage-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage-commonparent" href="chap20.html#VUID-vkCmdResolveImage-commonparent"></a> <span class="vuid">VUID-vkCmdResolveImage-commonparent</span><br>
 Each of <code>commandBuffer</code>, <code>dstImage</code>, and <code>srcImage</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageResolve</code> structure is defined as:</p>
</div>
<div id="VkImageResolve" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageResolve</span> <span class="p">{</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">srcSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">srcOffset</span><span class="p">;</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">dstSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">dstOffset</span><span class="p">;</span>
    <span class="n">VkExtent3D</span>                  <span class="n">extent</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageResolve</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcSubresource</code> and <code>dstSubresource</code> are
<a href="chap20.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structures specifying the image
subresources of the images used for the source and destination image
data, respectively.
Resolve of depth/stencil images is not supported.</p>
</li>
<li>
<p><code>srcOffset</code> and <code>dstOffset</code> select the initial <code>x</code>, <code>y</code>,
and <code>z</code> offsets in texels of the sub-regions of the source and
destination image data.</p>
</li>
<li>
<p><code>extent</code> is the size in texels of the source image to resolve in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageResolve-aspectMask-00266" href="chap20.html#VUID-VkImageResolve-aspectMask-00266"></a> <span class="vuid">VUID-VkImageResolve-aspectMask-00266</span><br>

The <code>aspectMask</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong class="purple">must</strong> only contain <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageResolve-layerCount-00267" href="chap20.html#VUID-VkImageResolve-layerCount-00267"></a> <span class="vuid">VUID-VkImageResolve-layerCount-00267</span><br>

The <code>layerCount</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong class="purple">must</strong> match</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageResolve-srcSubresource-parameter" href="chap20.html#VUID-VkImageResolve-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageResolve-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap20.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageResolve-dstSubresource-parameter" href="chap20.html#VUID-VkImageResolve-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageResolve-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap20.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="copies-buffer-markers"><a class="anchor" href="chap20.html#copies-buffer-markers"></a>20.7. Buffer Markers</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To write a 32-bit marker value into a buffer as a pipelined operation, call:</p>
</div>
<div id="vkCmdWriteBufferMarker2AMD" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_synchronization2 with VK_AMD_buffer_marker</span>
<span class="kt">void</span> <span class="nf">vkCmdWriteBufferMarker2AMD</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkPipelineStageFlags2KHR</span>                    <span class="n">stage</span><span class="p">,</span>
    <span class="n">VkBuffer</span>                                    <span class="n">dstBuffer</span><span class="p">,</span>
    <span class="n">VkDeviceSize</span>                                <span class="n">dstOffset</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">marker</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>stage</code> specifies the pipeline stage whose completion triggers the
marker write.</p>
</li>
<li>
<p><code>dstBuffer</code> is the buffer where the marker will be written.</p>
</li>
<li>
<p><code>dstOffset</code> is the byte offset into the buffer where the marker will
be written.</p>
</li>
<li>
<p><code>marker</code> is the 32-bit value of the marker.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The command will write the 32-bit marker value into the buffer only after
all preceding commands have finished executing up to at least the specified
pipeline stage.
This includes the completion of other preceding
<code>vkCmdWriteBufferMarker2AMD</code> commands so long as their specified
pipeline stages occur either at the same time or earlier than this command’s
specified <code>stage</code>.</p>
</div>
<div class="paragraph">
<p>While consecutive buffer marker writes with the same <code>stage</code> parameter
implicitly complete in submission order, memory and execution dependencies
between buffer marker writes and other operations <strong class="purple">must</strong> still be explicitly
ordered using synchronization commands.
The access scope for buffer marker writes falls under the
<code>VK_ACCESS_TRANSFER_WRITE_BIT</code>, and the pipeline stages for identifying
the synchronization scope <strong class="purple">must</strong> include both <code>stage</code> and
<code>VK_PIPELINE_STAGE_TRANSFER_BIT</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Similar to <code>vkCmdWriteTimestamp2KHR</code>, if an implementation is unable to
write a marker at any specific pipeline stage, it <strong class="purple">may</strong> instead do so at any
logically later stage.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Implementations <strong class="purple">may</strong> only support a limited number of pipelined marker write
operations in flight at a given time.
Thus an excessive number of marker write operations <strong class="purple">may</strong> degrade command
execution performance.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03929" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-stage-03929"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03929</span><br>

If the <a href="chap41.html#features-geometryShader">geometry shaders</a> feature is not
enabled, <code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_GEOMETRY_SHADER_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03930" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-stage-03930"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03930</span><br>

If the <a href="chap41.html#features-tessellationShader">tessellation shaders</a> feature is
not enabled, <code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_TESSELLATION_CONTROL_SHADER_BIT_KHR</code> or
<code>VK_PIPELINE_STAGE_2_TESSELLATION_EVALUATION_SHADER_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03931" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-stage-03931"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03931</span><br>

If the <a href="chap41.html#features-conditionalRendering">conditional rendering</a> feature
is not enabled, <code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_CONDITIONAL_RENDERING_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03932" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-stage-03932"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03932</span><br>

If the <a href="chap41.html#features-fragmentDensityMap">fragment density map</a> feature is
not enabled, <code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_FRAGMENT_DENSITY_PROCESS_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03933" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-stage-03933"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03933</span><br>

If the <a href="chap41.html#features-transformFeedback">transform feedback</a> feature is not
enabled, <code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_TRANSFORM_FEEDBACK_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03934" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-stage-03934"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03934</span><br>

If the <a href="chap41.html#features-meshShader">mesh shaders</a> feature is not enabled,
<code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_MESH_SHADER_BIT_NV</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03935" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-stage-03935"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03935</span><br>

If the <a href="chap41.html#features-taskShader">task shaders</a> feature is not enabled,
<code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_TASK_SHADER_BIT_NV</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-04956" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-stage-04956"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-04956</span><br>

If the <a href="chap41.html#features-shadingRateImage">shading rate image</a> feature is not
enabled, <code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_SHADING_RATE_IMAGE_BIT_NV</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-04957" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-stage-04957"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-04957</span><br>

If the <a href="chap41.html#features-subpassShading">subpass shading</a> feature is not
enabled, <code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_SUBPASS_SHADING_BIT_HUAWEI</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-04995" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-stage-04995"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-04995</span><br>

If the <a href="chap41.html#features-invocationMask">invocation mask image</a> feature is not
enabled, <code>stage</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_INVOCATION_MASK_BIT_HUAWEI</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-synchronization2-03893" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-synchronization2-03893"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-synchronization2-03893</span><br>

The <a href="chap41.html#features-synchronization2"><code>synchronization2</code></a> feature <strong class="purple">must</strong>
be enabled</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03894" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-stage-03894"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03894</span><br>

<code>stage</code> <strong class="purple">must</strong> include only a single pipeline stage</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-03895" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-stage-03895"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-03895</span><br>

<code>stage</code> <strong class="purple">must</strong> include only stages that are valid for the queue
family that was used to create the command pool that <code>commandBuffer</code>
was allocated from</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-dstOffset-03896" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-dstOffset-03896"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-dstOffset-03896</span><br>

<code>dstOffset</code> <strong class="purple">must</strong> be less than or equal to the size of
<code>dstBuffer</code> minus <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-03897" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-03897"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-03897</span><br>

<code>dstBuffer</code> <strong class="purple">must</strong> have been created with the
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-03898" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-03898"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-03898</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-dstOffset-03899" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-dstOffset-03899"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-dstOffset-03899</span><br>

<code>dstOffset</code> <strong class="purple">must</strong> be a multiple of <code>4</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-parameter" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-parameter" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-stage-parameter"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-parameter</span><br>
 <code>stage</code> <strong class="purple">must</strong> be a valid combination of <a href="chap7.html#VkPipelineStageFlagBits2KHR">VkPipelineStageFlagBits2KHR</a> values</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-stage-requiredbitmask" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-stage-requiredbitmask"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-stage-requiredbitmask</span><br>
 <code>stage</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-parameter" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-parameter"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-recording" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-cmdpool" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarker2AMD-commonparent" href="chap20.html#VUID-vkCmdWriteBufferMarker2AMD-commonparent"></a> <span class="vuid">VUID-vkCmdWriteBufferMarker2AMD-commonparent</span><br>
 Both of <code>commandBuffer</code>, and <code>dstBuffer</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To write a 32-bit marker value into a buffer as a pipelined operation, call:</p>
</div>
<div id="vkCmdWriteBufferMarkerAMD" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_AMD_buffer_marker</span>
<span class="kt">void</span> <span class="nf">vkCmdWriteBufferMarkerAMD</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkPipelineStageFlagBits</span>                     <span class="n">pipelineStage</span><span class="p">,</span>
    <span class="n">VkBuffer</span>                                    <span class="n">dstBuffer</span><span class="p">,</span>
    <span class="n">VkDeviceSize</span>                                <span class="n">dstOffset</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">marker</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pipelineStage</code> is a <a href="chap7.html#VkPipelineStageFlagBits">VkPipelineStageFlagBits</a> value specifying
the pipeline stage whose completion triggers the marker write.</p>
</li>
<li>
<p><code>dstBuffer</code> is the buffer where the marker will be written to.</p>
</li>
<li>
<p><code>dstOffset</code> is the byte offset into the buffer where the marker will
be written to.</p>
</li>
<li>
<p><code>marker</code> is the 32-bit value of the marker.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The command will write the 32-bit marker value into the buffer only after
all preceding commands have finished executing up to at least the specified
pipeline stage.
This includes the completion of other preceding
<code>vkCmdWriteBufferMarkerAMD</code> commands so long as their specified pipeline
stages occur either at the same time or earlier than this command’s
specified <code>pipelineStage</code>.</p>
</div>
<div class="paragraph">
<p>While consecutive buffer marker writes with the same <code>pipelineStage</code>
parameter are implicitly complete in submission order, memory and execution
dependencies between buffer marker writes and other operations must still be
explicitly ordered using synchronization commands.
The access scope for buffer marker writes falls under the
<code>VK_ACCESS_TRANSFER_WRITE_BIT</code>, and the pipeline stages for identifying
the synchronization scope <strong class="purple">must</strong> include both <code>pipelineStage</code> and
<code>VK_PIPELINE_STAGE_TRANSFER_BIT</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Similar to <code>vkCmdWriteTimestamp</code>, if an implementation is unable to
write a marker at any specific pipeline stage, it <strong class="purple">may</strong> instead do so at any
logically later stage.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Implementations <strong class="purple">may</strong> only support a limited number of pipelined marker write
operations in flight at a given time, thus excessive number of marker write
operations <strong class="purple">may</strong> degrade command execution performance.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04074" href="chap20.html#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04074"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04074</span><br>

<code>pipelineStage</code> <strong class="purple">must</strong> be a
<a href="chap7.html#synchronization-pipeline-stages-supported">valid stage</a> for the queue
family that was used to create the command pool that <code>commandBuffer</code>
was allocated from</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04075" href="chap20.html#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04075"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04075</span><br>

If the <a href="chap41.html#features-geometryShader">geometry shaders</a> feature is not
enabled, <code>pipelineStage</code> <strong class="purple">must</strong> not be
<code>VK_PIPELINE_STAGE_GEOMETRY_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04076" href="chap20.html#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04076"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04076</span><br>

If the <a href="chap41.html#features-tessellationShader">tessellation shaders</a> feature is
not enabled, <code>pipelineStage</code> <strong class="purple">must</strong> not be
<code>VK_PIPELINE_STAGE_TESSELLATION_CONTROL_SHADER_BIT</code> or
<code>VK_PIPELINE_STAGE_TESSELLATION_EVALUATION_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04077" href="chap20.html#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04077"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04077</span><br>

If the <a href="chap41.html#features-conditionalRendering">conditional rendering</a> feature
is not enabled, <code>pipelineStage</code> <strong class="purple">must</strong> not be
<code>VK_PIPELINE_STAGE_CONDITIONAL_RENDERING_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04078" href="chap20.html#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04078"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04078</span><br>

If the <a href="chap41.html#features-fragmentDensityMap">fragment density map</a> feature is
not enabled, <code>pipelineStage</code> <strong class="purple">must</strong> not be
<code>VK_PIPELINE_STAGE_FRAGMENT_DENSITY_PROCESS_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04079" href="chap20.html#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04079"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04079</span><br>

If the <a href="chap41.html#features-transformFeedback">transform feedback</a> feature is not
enabled, <code>pipelineStage</code> <strong class="purple">must</strong> not be
<code>VK_PIPELINE_STAGE_TRANSFORM_FEEDBACK_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04080" href="chap20.html#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04080"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04080</span><br>

If the <a href="chap41.html#features-meshShader">mesh shaders</a> feature is not enabled,
<code>pipelineStage</code> <strong class="purple">must</strong> not be
<code>VK_PIPELINE_STAGE_MESH_SHADER_BIT_NV</code> or
<code>VK_PIPELINE_STAGE_TASK_SHADER_BIT_NV</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04081" href="chap20.html#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04081"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-04081</span><br>

If the <a href="chap41.html#features-shadingRateImage">shading rate image</a> feature is not
enabled, <code>pipelineStage</code> <strong class="purple">must</strong> not be
<code>VK_PIPELINE_STAGE_SHADING_RATE_IMAGE_BIT_NV</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-dstOffset-01798" href="chap20.html#VUID-vkCmdWriteBufferMarkerAMD-dstOffset-01798"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-dstOffset-01798</span><br>

<code>dstOffset</code> <strong class="purple">must</strong> be less than or equal to the size of
<code>dstBuffer</code> minus <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-01799" href="chap20.html#VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-01799"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-01799</span><br>

<code>dstBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-01800" href="chap20.html#VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-01800"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-01800</span><br>

If <code>dstBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-dstOffset-01801" href="chap20.html#VUID-vkCmdWriteBufferMarkerAMD-dstOffset-01801"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-dstOffset-01801</span><br>

<code>dstOffset</code> <strong class="purple">must</strong> be a multiple of <code>4</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-parameter" href="chap20.html#VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-parameter" href="chap20.html#VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-parameter"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-pipelineStage-parameter</span><br>
 <code>pipelineStage</code> <strong class="purple">must</strong> be a valid <a href="chap7.html#VkPipelineStageFlagBits">VkPipelineStageFlagBits</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-parameter" href="chap20.html#VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-parameter"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-dstBuffer-parameter</span><br>
 <code>dstBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-recording" href="chap20.html#VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-cmdpool" href="chap20.html#VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteBufferMarkerAMD-commonparent" href="chap20.html#VUID-vkCmdWriteBufferMarkerAMD-commonparent"></a> <span class="vuid">VUID-vkCmdWriteBufferMarkerAMD-commonparent</span><br>
 Both of <code>commandBuffer</code>, and <code>dstBuffer</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A more extensible version of the resolve image command is defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To resolve a multisample image to a non-multisample image, call:</p>
</div>
<div id="vkCmdResolveImage2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="kt">void</span> <span class="nf">vkCmdResolveImage2KHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkResolveImageInfo2KHR</span><span class="o">*</span>               <span class="n">pResolveImageInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pResolveImageInfo</code> is a pointer to a <a href="chap20.html#VkResolveImageInfo2KHR">VkResolveImageInfo2KHR</a>
structure describing the resolve parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="chap20.html#vkCmdResolveImage">vkCmdResolveImage</a>, but
includes extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResolveImage2KHR-commandBuffer-01837" href="chap20.html#VUID-vkCmdResolveImage2KHR-commandBuffer-01837"></a> <span class="vuid">VUID-vkCmdResolveImage2KHR-commandBuffer-01837</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>srcImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2KHR-commandBuffer-01838" href="chap20.html#VUID-vkCmdResolveImage2KHR-commandBuffer-01838"></a> <span class="vuid">VUID-vkCmdResolveImage2KHR-commandBuffer-01838</span><br>

If <code>commandBuffer</code> is an unprotected command buffer, then
<code>dstImage</code> <strong class="purple">must</strong> not be a protected image</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2KHR-commandBuffer-01839" href="chap20.html#VUID-vkCmdResolveImage2KHR-commandBuffer-01839"></a> <span class="vuid">VUID-vkCmdResolveImage2KHR-commandBuffer-01839</span><br>

If <code>commandBuffer</code> is a protected command buffer, then
<code>dstImage</code> <strong class="purple">must</strong> not be an unprotected image</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResolveImage2KHR-commandBuffer-parameter" href="chap20.html#VUID-vkCmdResolveImage2KHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage2KHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2KHR-pResolveImageInfo-parameter" href="chap20.html#VUID-vkCmdResolveImage2KHR-pResolveImageInfo-parameter"></a> <span class="vuid">VUID-vkCmdResolveImage2KHR-pResolveImageInfo-parameter</span><br>
 <code>pResolveImageInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap20.html#VkResolveImageInfo2KHR">VkResolveImageInfo2KHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2KHR-commandBuffer-recording" href="chap20.html#VUID-vkCmdResolveImage2KHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdResolveImage2KHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2KHR-commandBuffer-cmdpool" href="chap20.html#VUID-vkCmdResolveImage2KHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdResolveImage2KHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdResolveImage2KHR-renderpass" href="chap20.html#VUID-vkCmdResolveImage2KHR-renderpass"></a> <span class="vuid">VUID-vkCmdResolveImage2KHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkResolveImageInfo2KHR</code> structure is defined as:</p>
</div>
<div id="VkResolveImageInfo2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkResolveImageInfo2KHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>              <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                  <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImage</span>                      <span class="n">srcImage</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>                <span class="n">srcImageLayout</span><span class="p">;</span>
    <span class="n">VkImage</span>                      <span class="n">dstImage</span><span class="p">;</span>
    <span class="n">VkImageLayout</span>                <span class="n">dstImageLayout</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                     <span class="n">regionCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkImageResolve2KHR</span><span class="o">*</span>    <span class="n">pRegions</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkResolveImageInfo2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcImage</code> is the source image.</p>
</li>
<li>
<p><code>srcImageLayout</code> is the layout of the source image subresources for
the resolve.</p>
</li>
<li>
<p><code>dstImage</code> is the destination image.</p>
</li>
<li>
<p><code>dstImageLayout</code> is the layout of the destination image subresources
for the resolve.</p>
</li>
<li>
<p><code>regionCount</code> is the number of regions to resolve.</p>
</li>
<li>
<p><code>pRegions</code> is a pointer to an array of <a href="chap20.html#VkImageResolve2KHR">VkImageResolve2KHR</a>
structures specifying the regions to resolve.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-pRegions-00255" href="chap20.html#VUID-VkResolveImageInfo2KHR-pRegions-00255"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-pRegions-00255</span><br>

The union of all source regions, and the union of all destination
regions, specified by the elements of <code>pRegions</code>, <strong class="purple">must</strong> not overlap
in memory</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-srcImage-00256" href="chap20.html#VUID-VkResolveImageInfo2KHR-srcImage-00256"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-srcImage-00256</span><br>

If <code>srcImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-srcImage-00257" href="chap20.html#VUID-VkResolveImageInfo2KHR-srcImage-00257"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-srcImage-00257</span><br>

<code>srcImage</code> <strong class="purple">must</strong> have a sample count equal to any valid sample count
value other than <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-dstImage-00258" href="chap20.html#VUID-VkResolveImageInfo2KHR-dstImage-00258"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-dstImage-00258</span><br>

If <code>dstImage</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-dstImage-00259" href="chap20.html#VUID-VkResolveImageInfo2KHR-dstImage-00259"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-dstImage-00259</span><br>

<code>dstImage</code> <strong class="purple">must</strong> have a sample count equal to
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-srcImageLayout-00260" href="chap20.html#VUID-VkResolveImageInfo2KHR-srcImageLayout-00260"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-srcImageLayout-00260</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>srcImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-srcImageLayout-01400" href="chap20.html#VUID-VkResolveImageInfo2KHR-srcImageLayout-01400"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-srcImageLayout-01400</span><br>

<code>srcImageLayout</code> <strong class="purple">must</strong> be <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-dstImageLayout-00262" href="chap20.html#VUID-VkResolveImageInfo2KHR-dstImageLayout-00262"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-dstImageLayout-00262</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> specify the layout of the image subresources
of <code>dstImage</code> specified in <code>pRegions</code> at the time this command
is executed on a <code>VkDevice</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-dstImageLayout-01401" href="chap20.html#VUID-VkResolveImageInfo2KHR-dstImageLayout-01401"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-dstImageLayout-01401</span><br>

<code>dstImageLayout</code> <strong class="purple">must</strong> be <code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-dstImage-02003" href="chap20.html#VUID-VkResolveImageInfo2KHR-dstImage-02003"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-dstImage-02003</span><br>

The <a href="chap12.html#resources-image-format-features">format features</a> of
<code>dstImage</code> <strong class="purple">must</strong> contain
<code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-srcImage-01386" href="chap20.html#VUID-VkResolveImageInfo2KHR-srcImage-01386"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-srcImage-01386</span><br>

<code>srcImage</code> and <code>dstImage</code> <strong class="purple">must</strong> have been created with the same
image format</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-srcSubresource-01709" href="chap20.html#VUID-VkResolveImageInfo2KHR-srcSubresource-01709"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-srcSubresource-01709</span><br>

The <code>srcSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-dstSubresource-01710" href="chap20.html#VUID-VkResolveImageInfo2KHR-dstSubresource-01710"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-dstSubresource-01710</span><br>

The <code>dstSubresource.mipLevel</code> member of each element of
<code>pRegions</code> <strong class="purple">must</strong> be less than the <code>mipLevels</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-srcSubresource-01711" href="chap20.html#VUID-VkResolveImageInfo2KHR-srcSubresource-01711"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-srcSubresource-01711</span><br>

The <span class="eq"><code>srcSubresource.baseArrayLayer</code> + 
<code>srcSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong class="purple">must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>srcImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-dstSubresource-01712" href="chap20.html#VUID-VkResolveImageInfo2KHR-dstSubresource-01712"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-dstSubresource-01712</span><br>

The <span class="eq"><code>dstSubresource.baseArrayLayer</code> + 
<code>dstSubresource.layerCount</code></span> of each element of <code>pRegions</code> <strong class="purple">must</strong>
be less than or equal to the <code>arrayLayers</code> specified in
<a href="chap12.html#VkImageCreateInfo">VkImageCreateInfo</a> when <code>dstImage</code> was created</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-dstImage-02546" href="chap20.html#VUID-VkResolveImageInfo2KHR-dstImage-02546"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-dstImage-02546</span><br>

<code>dstImage</code> and <code>srcImage</code> <strong class="purple">must</strong> not have been created with
<code>flags</code> containing <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-srcImage-04446" href="chap20.html#VUID-VkResolveImageInfo2KHR-srcImage-04446"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-srcImage-04446</span><br>

If either <code>srcImage</code> or <code>dstImage</code> are of type
<code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
<code>srcSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be <code>0</code> and
<code>srcSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-srcImage-04447" href="chap20.html#VUID-VkResolveImageInfo2KHR-srcImage-04447"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-srcImage-04447</span><br>

If either <code>srcImage</code> or <code>dstImage</code> are of type
<code>VK_IMAGE_TYPE_3D</code>, then for each element of <code>pRegions</code>,
<code>dstSubresource.baseArrayLayer</code> <strong class="purple">must</strong> be <code>0</code> and
<code>dstSubresource.layerCount</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-srcOffset-00269" href="chap20.html#VUID-VkResolveImageInfo2KHR-srcOffset-00269"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-srcOffset-00269</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>srcOffset.x</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-srcOffset-00270" href="chap20.html#VUID-VkResolveImageInfo2KHR-srcOffset-00270"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-srcOffset-00270</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>srcOffset.y</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-srcImage-00271" href="chap20.html#VUID-VkResolveImageInfo2KHR-srcImage-00271"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-srcImage-00271</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>srcOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-srcOffset-00272" href="chap20.html#VUID-VkResolveImageInfo2KHR-srcOffset-00272"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-srcOffset-00272</span><br>

For each element of <code>pRegions</code>, <code>srcOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>srcOffset.z</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>srcSubresource</code> of <code>srcImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-srcImage-00273" href="chap20.html#VUID-VkResolveImageInfo2KHR-srcImage-00273"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-srcImage-00273</span><br>

If <code>srcImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>srcOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and <code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-dstOffset-00274" href="chap20.html#VUID-VkResolveImageInfo2KHR-dstOffset-00274"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-dstOffset-00274</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.x</code> and
<span class="eq">(<code>extent.width</code> +  <code>dstOffset.x</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the width of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-dstOffset-00275" href="chap20.html#VUID-VkResolveImageInfo2KHR-dstOffset-00275"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-dstOffset-00275</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.y</code> and
<span class="eq">(<code>extent.height</code> +  <code>dstOffset.y</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the height of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-dstImage-00276" href="chap20.html#VUID-VkResolveImageInfo2KHR-dstImage-00276"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-dstImage-00276</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code>, then for each
element of <code>pRegions</code>, <code>dstOffset.y</code> <strong class="purple">must</strong> be <code>0</code> and
<code>extent.height</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-dstOffset-00277" href="chap20.html#VUID-VkResolveImageInfo2KHR-dstOffset-00277"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-dstOffset-00277</span><br>

For each element of <code>pRegions</code>, <code>dstOffset.z</code> and
<span class="eq">(<code>extent.depth</code> +  <code>dstOffset.z</code>)</span> <strong class="purple">must</strong> both be
greater than or equal to <code>0</code> and less than or equal to the depth of the
specified <code>dstSubresource</code> of <code>dstImage</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-dstImage-00278" href="chap20.html#VUID-VkResolveImageInfo2KHR-dstImage-00278"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-dstImage-00278</span><br>

If <code>dstImage</code> is of type <code>VK_IMAGE_TYPE_1D</code> or
<code>VK_IMAGE_TYPE_2D</code>, then for each element of <code>pRegions</code>,
<code>dstOffset.z</code> <strong class="purple">must</strong> be <code>0</code> and <code>extent.depth</code> <strong class="purple">must</strong> be <code>1</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-sType-sType" href="chap20.html#VUID-VkResolveImageInfo2KHR-sType-sType"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_RESOLVE_IMAGE_INFO_2_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-pNext-pNext" href="chap20.html#VUID-VkResolveImageInfo2KHR-pNext-pNext"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-srcImage-parameter" href="chap20.html#VUID-VkResolveImageInfo2KHR-srcImage-parameter"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-srcImage-parameter</span><br>
 <code>srcImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-srcImageLayout-parameter" href="chap20.html#VUID-VkResolveImageInfo2KHR-srcImageLayout-parameter"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-srcImageLayout-parameter</span><br>
 <code>srcImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-dstImage-parameter" href="chap20.html#VUID-VkResolveImageInfo2KHR-dstImage-parameter"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-dstImage-parameter</span><br>
 <code>dstImage</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImage">VkImage</a> handle</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-dstImageLayout-parameter" href="chap20.html#VUID-VkResolveImageInfo2KHR-dstImageLayout-parameter"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-dstImageLayout-parameter</span><br>
 <code>dstImageLayout</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-pRegions-parameter" href="chap20.html#VUID-VkResolveImageInfo2KHR-pRegions-parameter"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-pRegions-parameter</span><br>
 <code>pRegions</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>regionCount</code> valid <a href="chap20.html#VkImageResolve2KHR">VkImageResolve2KHR</a> structures</p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-regionCount-arraylength" href="chap20.html#VUID-VkResolveImageInfo2KHR-regionCount-arraylength"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-regionCount-arraylength</span><br>
 <code>regionCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkResolveImageInfo2KHR-commonparent" href="chap20.html#VUID-VkResolveImageInfo2KHR-commonparent"></a> <span class="vuid">VUID-VkResolveImageInfo2KHR-commonparent</span><br>
 Both of <code>dstImage</code>, and <code>srcImage</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkImageResolve2KHR</code> structure is defined as:</p>
</div>
<div id="VkImageResolve2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_copy_commands2</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkImageResolve2KHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                 <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">srcSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">srcOffset</span><span class="p">;</span>
    <span class="n">VkImageSubresourceLayers</span>    <span class="n">dstSubresource</span><span class="p">;</span>
    <span class="n">VkOffset3D</span>                  <span class="n">dstOffset</span><span class="p">;</span>
    <span class="n">VkExtent3D</span>                  <span class="n">extent</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkImageResolve2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcSubresource</code> and <code>dstSubresource</code> are
<a href="chap20.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structures specifying the image
subresources of the images used for the source and destination image
data, respectively.
Resolve of depth/stencil images is not supported.</p>
</li>
<li>
<p><code>srcOffset</code> and <code>dstOffset</code> select the initial <code>x</code>, <code>y</code>,
and <code>z</code> offsets in texels of the sub-regions of the source and
destination image data.</p>
</li>
<li>
<p><code>extent</code> is the size in texels of the source image to resolve in
<code>width</code>, <code>height</code> and <code>depth</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageResolve2KHR-aspectMask-00266" href="chap20.html#VUID-VkImageResolve2KHR-aspectMask-00266"></a> <span class="vuid">VUID-VkImageResolve2KHR-aspectMask-00266</span><br>

The <code>aspectMask</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong class="purple">must</strong> only contain <code>VK_IMAGE_ASPECT_COLOR_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkImageResolve2KHR-layerCount-00267" href="chap20.html#VUID-VkImageResolve2KHR-layerCount-00267"></a> <span class="vuid">VUID-VkImageResolve2KHR-layerCount-00267</span><br>

The <code>layerCount</code> member of <code>srcSubresource</code> and
<code>dstSubresource</code> <strong class="purple">must</strong> match</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkImageResolve2KHR-sType-sType" href="chap20.html#VUID-VkImageResolve2KHR-sType-sType"></a> <span class="vuid">VUID-VkImageResolve2KHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_IMAGE_RESOLVE_2_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkImageResolve2KHR-pNext-pNext" href="chap20.html#VUID-VkImageResolve2KHR-pNext-pNext"></a> <span class="vuid">VUID-VkImageResolve2KHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkImageResolve2KHR-srcSubresource-parameter" href="chap20.html#VUID-VkImageResolve2KHR-srcSubresource-parameter"></a> <span class="vuid">VUID-VkImageResolve2KHR-srcSubresource-parameter</span><br>
 <code>srcSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap20.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
<li>
<p><a id="VUID-VkImageResolve2KHR-dstSubresource-parameter" href="chap20.html#VUID-VkImageResolve2KHR-dstSubresource-parameter"></a> <span class="vuid">VUID-VkImageResolve2KHR-dstSubresource-parameter</span><br>
 <code>dstSubresource</code> <strong class="purple">must</strong> be a valid <a href="chap20.html#VkImageSubresourceLayers">VkImageSubresourceLayers</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div></div>

<nav>
  <a rel="prev" href="chap19.html" class="nav nav-prev" title="Previous page" aria-label="Previous page" aria-keyshortcuts="Left">
        <i class="fa fa-angle-left"></i>
     </a>
  <a rel="next" href="chap21.html" class="nav nav-next" title="Next page" aria-label="Next page" aria-keyshortcuts="Right">
        <i class="fa fa-angle-right"></i>
     </a>
  <div style="clear: both"></div>
</nav>
<div id="footer" style="max-width: 100%;">
<div id="footer-text">
Version 1.1.192<br>
Last updated 2021-08-20 13:37:33 -0700
</div>
</div>



</body>
  <script>
  function isInViewport(ele) {
    const rect = ele.getBoundingClientRect();
    return (
        rect.top >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight)
    );
  }
  function yPosition (ele) {
    const rect = ele.getBoundingClientRect();
    return (rect.top - 20); // 20px above
  }
  let curr = document.getElementsByClassName('current');
  if (!isInViewport(curr[curr.length - 1])) {
    document.getElementById('toc').scrollTo({
      top: yPosition(curr[0]),
      left: 0,
      behavior: 'smooth'
    });
  }

  /* For page navigation */
  function gotoPage(selector) {
    const button = document.querySelector(selector);
    if (button)
      window.location.href = button.href;
  }
  document.addEventListener('keydown', e => {
    switch (e.key) {
      case 'ArrowRight':
        e.preventDefault();
        gotoPage('.nav-next');
        break;
      case 'ArrowLeft':
        e.preventDefault();
        gotoPage('.nav-prev');
        break;
    }
  });
  </script>
  </html>