<!DOCTYPE html><html lang="en"><head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<meta name="author" content="The Khronos® Vulkan Working Group">
<title>Vulkan® 1.1.187 - A Specification (with all registered Vulkan extensions)</title>
<link rel="stylesheet" href="style0.css" type="text/css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="style1.css" type="text/css">

<!-- dragged in by font-awesome css included by asciidoctor, but preloaded in this extension for convenience -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0" as="font" type="font/woff2" crossorigin="">

<!-- Note: Chrome needs crossorigin="" even for same-origin fonts -->
<link rel="preload" href="../katex/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Typewriter-Regular.woff2" as="font" type="font/woff2" crossorigin=""><link rel="stylesheet" href="../katex/katex.min.css">
<!--ChunkedSearchJSMarker-->
<link href="chunked.css?4" rel="stylesheet">
<script>var searchindexurl = 'search.index.js?4' + (document.title.replace(/[^0-9.]/g, ''));</script>
<script src="chunked.js?4"></script>
<link rel="stylesheet" href="style2.css" type="text/css">
<script>
    function hideElement(e){
        e.setAttribute("hidden", "");
        e.classList.add("hidden");
    }

    function unhideElement(e){
        e.classList.remove("hidden");
        e.removeAttribute("hidden");
    }

    function hideLoadableContent(){
        unhideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) hideElement(loadable);
    }

    function unhideLoadableContent(){
        hideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) unhideElement(loadable);
    }

    window.addEventListener("load", unhideLoadableContent);
</script>
<link rel="stylesheet" href="asciidoctor-chunker.css" type="text/css"></head>
<body class="book toc2 toc-left">
<div id="header" style="max-width: 100%;">
<h1>Vulkan<sup>®</sup> 1.1.187 - A Specification (with all registered Vulkan extensions)</h1>
<div class="details">
<span id="author" class="author">The Khronos<sup>®</sup> Vulkan Working Group</span><br>
<span id="revnumber">version 1.1.187,</span>
<span id="revdate">2021-08-03 11:26:52Z</span>
<br><span id="revremark">from git branch: github-main commit: cd8da6a515811c4ff9e1f10a6d6ce4ab968333fb</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="index.html">Titlepage</a></li><li><a href="chap1.html">1. Preamble</a></li>
<li><a href="chap2.html">2. Introduction</a>
<ul class="sectlevel2">
<li><a href="chap2.html#introduction-conventions">2.1. Document Conventions</a></li>
</ul>
</li>
<li><a href="chap3.html">3. Fundamentals</a>
<ul class="sectlevel2">
<li><a href="chap3.html#fundamentals-host-environment">3.1. Host and Device Environment</a></li>
<li><a href="chap3.html#fundamentals-execmodel">3.2. Execution Model</a></li>
<li><a href="chap3.html#fundamentals-objectmodel-overview">3.3. Object Model</a></li>
<li><a href="chap3.html#fundamentals-abi">3.4. Application Binary Interface</a></li>
<li><a href="chap3.html#fundamentals-commandsyntax">3.5. Command Syntax and Duration</a></li>
<li><a href="chap3.html#fundamentals-threadingbehavior">3.6. Threading Behavior</a></li>
<li><a href="chap3.html#fundamentals-validusage">3.7. Valid Usage</a></li>
<li><a href="chap3.html#fundamentals-returncodes">3.8. <code>VkResult</code> Return Codes</a></li>
<li><a href="chap3.html#fundamentals-numerics">3.9. Numeric Representation and Computation</a></li>
<li><a href="chap3.html#fundamentals-fixedconv">3.10. Fixed-Point Data Conversions</a></li>
<li><a href="chap3.html#fundamentals-common-objects">3.11. Common Object Types</a></li>
</ul>
</li>
<li><a href="chap4.html">4. Initialization</a>
<ul class="sectlevel2">
<li><a href="chap4.html#initialization-functionpointers">4.1. Command Function Pointers</a></li>
<li><a href="chap4.html#initialization-instances">4.2. Instances</a></li>
</ul>
</li>
<li><a href="chap5.html">5. Devices and Queues</a>
<ul class="sectlevel2">
<li><a href="chap5.html#devsandqueues-physical-device-enumeration">5.1. Physical Devices</a></li>
<li><a href="chap5.html#devsandqueues-devices">5.2. Devices</a></li>
<li><a href="chap5.html#devsandqueues-queues">5.3. Queues</a></li>
</ul>
</li>
<li><a href="chap6.html">6. Command Buffers</a>
<ul class="sectlevel2">
<li><a href="chap6.html#commandbuffers-lifecycle">6.1. Command Buffer Lifecycle</a></li>
<li><a href="chap6.html#commandbuffers-pools">6.2. Command Pools</a></li>
<li><a href="chap6.html#commandbuffer-allocation">6.3. Command Buffer Allocation and Management</a></li>
<li><a href="chap6.html#commandbuffers-recording">6.4. Command Buffer Recording</a></li>
<li><a href="chap6.html#commandbuffers-submission">6.5. Command Buffer Submission</a></li>
<li><a href="chap6.html#commandbuffers-submission-progress">6.6. Queue Forward Progress</a></li>
<li><a href="chap6.html#commandbuffers-secondary">6.7. Secondary Command Buffer Execution</a></li>
<li><a href="chap6.html#commandbuffers-devicemask">6.8. Command Buffer Device Mask</a></li>
</ul>
</li>
<li><a href="chap7.html">7. Synchronization and Cache Control</a>
<ul class="sectlevel2">
<li><a href="chap7.html#synchronization-dependencies">7.1. Execution and Memory Dependencies</a></li>
<li><a href="chap7.html#synchronization-implicit">7.2. Implicit Synchronization Guarantees</a></li>
<li><a href="chap7.html#synchronization-fences">7.3. Fences</a></li>
<li><a href="chap7.html#synchronization-semaphores">7.4. Semaphores</a></li>
<li><a href="chap7.html#synchronization-events">7.5. Events</a></li>
<li><a href="chap7.html#synchronization-pipeline-barriers">7.6. Pipeline Barriers</a></li>
<li><a href="chap7.html#synchronization-memory-barriers">7.7. Memory Barriers</a></li>
<li><a href="chap7.html#synchronization-wait-idle">7.8. Wait Idle Operations</a></li>
<li><a href="chap7.html#synchronization-submission-host-writes">7.9. Host Write Ordering Guarantees</a></li>
<li><a href="chap7.html#synchronization-device-group">7.10. Synchronization and Multiple Physical Devices</a></li>
<li><a href="chap7.html#calibrated-timestamps">7.11. Calibrated timestamps</a></li>
</ul>
</li>
<li><a href="chap8.html">8. Render Pass</a>
<ul class="sectlevel2">
<li><a href="chap8.html#renderpass-creation">8.1. Render Pass Creation</a></li>
<li><a href="chap8.html#renderpass-compatibility">8.2. Render Pass Compatibility</a></li>
<li><a href="chap8.html#_framebuffers">8.3. Framebuffers</a></li>
<li><a href="chap8.html#renderpass-commands">8.4. Render Pass Commands</a></li>
</ul>
</li>
<li><a href="chap9.html">9. Shaders</a>
<ul class="sectlevel2">
<li><a href="chap9.html#shader-modules">9.1. Shader Modules</a></li>
<li><a href="chap9.html#shaders-execution">9.2. Shader Execution</a></li>
<li><a href="chap9.html#shaders-execution-memory-ordering">9.3. Shader Memory Access Ordering</a></li>
<li><a href="chap9.html#shaders-inputs">9.4. Shader Inputs and Outputs</a></li>
<li><a href="chap9.html#shaders-task">9.5. Task Shaders</a></li>
<li><a href="chap9.html#shaders-mesh">9.6. Mesh Shaders</a></li>
<li><a href="chap9.html#shaders-vertex">9.7. Vertex Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-control">9.8. Tessellation Control Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-evaluation">9.9. Tessellation Evaluation Shaders</a></li>
<li><a href="chap9.html#shaders-geometry">9.10. Geometry Shaders</a></li>
<li><a href="chap9.html#shaders-fragment">9.11. Fragment Shaders</a></li>
<li><a href="chap9.html#shaders-compute">9.12. Compute Shaders</a></li>
<li><a href="chap9.html#shaders-ray-generation">9.13. Ray Generation Shaders</a></li>
<li><a href="chap9.html#shaders-intersection">9.14. Intersection Shaders</a></li>
<li><a href="chap9.html#shaders-any-hit">9.15. Any-Hit Shaders</a></li>
<li><a href="chap9.html#shaders-closest-hit">9.16. Closest Hit Shaders</a></li>
<li><a href="chap9.html#shaders-miss">9.17. Miss Shaders</a></li>
<li><a href="chap9.html#shaders-callable">9.18. Callable Shaders</a></li>
<li><a href="chap9.html#shaders-interpolation-decorations">9.19. Interpolation Decorations</a></li>
<li><a href="chap9.html#shaders-staticuse">9.20. Static Use</a></li>
<li><a href="chap9.html#shaders-scope">9.21. Scope</a></li>
<li><a href="chap9.html#shaders-group-operations">9.22. Group Operations</a></li>
<li><a href="chap9.html#shaders-quad-operations">9.23. Quad Group Operations</a></li>
<li><a href="chap9.html#shaders-derivative-operations">9.24. Derivative Operations</a></li>
<li><a href="chap9.html#shaders-helper-invocations">9.25. Helper Invocations</a></li>
<li><a href="chap9.html#_cooperative_matrices">9.26. Cooperative Matrices</a></li>
<li><a href="chap9.html#shaders-validation-cache">9.27. Validation Cache</a></li>
</ul>
</li>
<li><a href="chap10.html">10. Pipelines</a>
<ul class="sectlevel2">
<li><a href="chap10.html#pipelines-compute">10.1. Compute Pipelines</a></li>
<li><a href="chap10.html#pipelines-graphics">10.2. Graphics Pipelines</a></li>
<li><a href="chap10.html#pipelines-ray-tracing">10.3. Ray Tracing Pipelines</a></li>
<li><a href="chap10.html#pipelines-destruction">10.4. Pipeline Destruction</a></li>
<li><a href="chap10.html#pipelines-multiple">10.5. Multiple Pipeline Creation</a></li>
<li><a href="chap10.html#pipelines-pipeline-derivatives">10.6. Pipeline Derivatives</a></li>
<li><a href="chap10.html#pipelines-cache">10.7. Pipeline Cache</a></li>
<li><a href="chap10.html#pipelines-specialization-constants">10.8. Specialization Constants</a></li>
<li><a href="chap10.html#pipeline-library">10.9. Pipeline Libraries</a></li>
<li><a href="chap10.html#pipelines-binding">10.10. Pipeline Binding</a></li>
<li><a href="chap10.html#pipelines-dynamic-state">10.11. Dynamic State</a></li>
<li><a href="chap10.html#pipelines-shader-information">10.12. Pipeline Shader Information</a></li>
<li><a href="chap10.html#pipelines-compiler-control">10.13. Pipeline Compiler Control</a></li>
<li><a href="chap10.html#pipelines-creation-feedback">10.14. Pipeline Creation Feedback</a></li>
</ul>
</li>
<li><a href="chap11.html">11. Memory Allocation</a>
<ul class="sectlevel2">
<li><a href="chap11.html#memory-host">11.1. Host Memory</a></li>
<li><a href="chap11.html#memory-device">11.2. Device Memory</a></li>
</ul>
</li>
<li><a href="chap12.html">12. Resource Creation</a>
<ul class="sectlevel2">
<li><a href="chap12.html#resources-buffers">12.1. Buffers</a></li>
<li><a href="chap12.html#resources-buffer-views">12.2. Buffer Views</a></li>
<li><a href="chap12.html#resources-images">12.3. Images</a></li>
<li><a href="chap12.html#resources-image-layouts">12.4. Image Layouts</a></li>
<li><a href="chap12.html#resources-image-views">12.5. Image Views</a></li>
<li><a href="chap12.html#resources-acceleration-structures">12.6. Acceleration Structures</a></li>
<li><a href="chap12.html#resources-association">12.7. Resource Memory Association</a></li>
<li><a href="chap12.html#resources-sharing">12.8. Resource Sharing Mode</a></li>
<li><a href="chap12.html#resources-memory-aliasing">12.9. Memory Aliasing</a></li>
</ul>
</li>
<li><a href="chap13.html">13. Samplers</a>
<ul class="sectlevel2">
<li><a href="chap13.html#samplers-YCbCr-conversion">13.1. Sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></li>
</ul>
</li>
<li><a href="chap14.html">14. Resource Descriptors</a>
<ul class="sectlevel2">
<li><a href="chap14.html#descriptorsets-types">14.1. Descriptor Types</a></li>
<li><a href="chap14.html#descriptorsets-sets">14.2. Descriptor Sets</a></li>
<li><a href="chap14.html#descriptorsets-physical-storage-buffer">14.3. Physical Storage Buffer Access</a></li>
</ul>
</li>
<li><a href="chap15.html">15. Shader Interfaces</a>
<ul class="sectlevel2">
<li><a href="chap15.html#interfaces-iointerfaces">15.1. Shader Input and Output Interfaces</a></li>
<li><a href="chap15.html#interfaces-vertexinput">15.2. Vertex Input Interface</a></li>
<li><a href="chap15.html#interfaces-fragmentoutput">15.3. Fragment Output Interface</a></li>
<li><a href="chap15.html#interfaces-inputattachment">15.4. Fragment Input Attachment Interface</a></li>
<li><a href="chap15.html#interfaces-raypipeline">15.5. Ray Tracing Pipeline Interface</a></li>
<li><a href="chap15.html#interfaces-resources">15.6. Shader Resource Interface</a></li>
<li><a href="chap15.html#interfaces-builtin-variables">15.7. Built-In Variables</a></li>
</ul>
</li>
<li><a href="chap16.html">16. Image Operations</a>
<ul class="sectlevel2">
<li><a href="chap16.html#_image_operations_overview">16.1. Image Operations Overview</a></li>
<li><a href="chap16.html#_conversion_formulas">16.2. Conversion Formulas</a></li>
<li><a href="chap16.html#_texel_input_operations">16.3. Texel Input Operations</a></li>
<li><a href="chap16.html#_texel_output_operations">16.4. Texel Output Operations</a></li>
<li><a href="chap16.html#textures-normalized-operations">16.5. Normalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#_unnormalized_texel_coordinate_operations">16.6. Unnormalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-integer-coordinate-operations">16.7. Integer Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-sample-operations">16.8. Image Sample Operations</a></li>
<li><a href="chap16.html#textures-footprint">16.9. Texel Footprint Evaluation</a></li>
<li><a href="chap16.html#textures-instructions">16.10. Image Operation Steps</a></li>
<li><a href="chap16.html#textures-queries">16.11. Image Query Instructions</a></li>
</ul>
</li>
<li><a href="chap17.html">17. Fragment Density Map Operations</a>
<ul class="sectlevel2">
<li><a href="chap17.html#_fragment_density_map_operations_overview">17.1. Fragment Density Map Operations Overview</a></li>
<li><a href="chap17.html#fragmentdensitymap-fetch-density-value">17.2. Fetch Density Value</a></li>
<li><a href="chap17.html#fragmentdensitymap-conversion-to-fragment-area">17.3. Fragment Area Conversion</a></li>
</ul>
</li>
<li><a href="chap18.html">18. Queries</a>
<ul class="sectlevel2">
<li><a href="chap18.html#queries-pools">18.1. Query Pools</a></li>
<li><a href="chap18.html#queries-operation">18.2. Query Operation</a></li>
<li><a href="chap18.html#queries-occlusion">18.3. Occlusion Queries</a></li>
<li><a href="chap18.html#queries-pipestats">18.4. Pipeline Statistics Queries</a></li>
<li><a href="chap18.html#queries-timestamps">18.5. Timestamp Queries</a></li>
<li><a href="chap18.html#queries-performance">18.6. Performance Queries</a></li>
<li><a href="chap18.html#queries-transform-feedback">18.7. Transform Feedback Queries</a></li>
<li><a href="chap18.html#queries-performance-intel">18.8. Intel performance queries</a></li>
<li><a href="chap18.html#queries-result-status-only">18.9. Result Status Queries</a></li>
<li><a href="chap18.html#queries-video-encode-bitstream-buffer-range">18.10. Video Encode Bitstream Buffer Range</a></li>
</ul>
</li>
<li><a href="chap19.html">19. Clear Commands</a>
<ul class="sectlevel2">
<li><a href="chap19.html#clears-outside">19.1. Clearing Images Outside A Render Pass Instance</a></li>
<li><a href="chap19.html#clears-inside">19.2. Clearing Images Inside A Render Pass Instance</a></li>
<li><a href="chap19.html#clears-values">19.3. Clear Values</a></li>
<li><a href="chap19.html#clears-filling-buffers">19.4. Filling Buffers</a></li>
<li><a href="chap19.html#clears-updating-buffers">19.5. Updating Buffers</a></li>
</ul>
</li>
<li><a href="chap20.html">20. Copy Commands</a>
<ul class="sectlevel2">
<li><a href="chap20.html#_common_operation">20.1. Common Operation</a></li>
<li><a href="chap20.html#copies-buffers">20.2. Copying Data Between Buffers</a></li>
<li><a href="chap20.html#copies-images">20.3. Copying Data Between Images</a></li>
<li><a href="chap20.html#copies-buffers-images">20.4. Copying Data Between Buffers and Images</a></li>
<li><a href="chap20.html#copies-imagescaling">20.5. Image Copies with Scaling</a></li>
<li><a href="chap20.html#copies-resolve">20.6. Resolving Multisample Images</a></li>
<li><a href="chap20.html#copies-buffer-markers">20.7. Buffer Markers</a></li>
</ul>
</li>
<li><a href="chap21.html">21. Drawing Commands</a>
<ul class="sectlevel2">
<li><a href="chap21.html#drawing-primitive-topologies">21.1. Primitive Topologies</a></li>
<li><a href="chap21.html#drawing-primitive-order">21.2. Primitive Order</a></li>
<li><a href="chap21.html#drawing-primitive-shading">21.3. Programmable Primitive Shading</a></li>
<li><a href="chap21.html#drawing-conditional-rendering">21.4. Conditional Rendering</a></li>
<li><a href="chap21.html#drawing-mesh-shading">21.5. Programmable Mesh Shading</a></li>
</ul>
</li>
<li><a href="chap22.html">22. Fixed-Function Vertex Processing</a>
<ul class="sectlevel2">
<li><a href="chap22.html#fxvertex-attrib">22.1. Vertex Attributes</a></li>
<li><a href="chap22.html#fxvertex-input">22.2. Vertex Input Description</a></li>
<li><a href="chap22.html#_vertex_attribute_divisor_in_instanced_rendering">22.3. Vertex Attribute Divisor in Instanced Rendering</a></li>
</ul>
</li>
<li><a href="chap23.html">23. Tessellation</a>
<ul class="sectlevel2">
<li><a href="chap23.html#_tessellator">23.1. Tessellator</a></li>
<li><a href="chap23.html#_tessellator_patch_discard">23.2. Tessellator Patch Discard</a></li>
<li><a href="chap23.html#tessellation-tessellator-spacing">23.3. Tessellator Spacing</a></li>
<li><a href="chap23.html#tessellation-primitive-order">23.4. Tessellation Primitive Ordering</a></li>
<li><a href="chap23.html#tessellation-vertex-winding-order">23.5. Tessellator Vertex Winding Order</a></li>
<li><a href="chap23.html#tessellation-triangle-tessellation">23.6. Triangle Tessellation</a></li>
<li><a href="chap23.html#tessellation-quad-tessellation">23.7. Quad Tessellation</a></li>
<li><a href="chap23.html#tessellation-isoline-tessellation">23.8. Isoline Tessellation</a></li>
<li><a href="chap23.html#tessellation-point-mode">23.9. Tessellation Point Mode</a></li>
<li><a href="chap23.html#_tessellation_pipeline_state">23.10. Tessellation Pipeline State</a></li>
</ul>
</li>
<li><a href="chap24.html">24. Geometry Shading</a>
<ul class="sectlevel2">
<li><a href="chap24.html#geometry-input">24.1. Geometry Shader Input Primitives</a></li>
<li><a href="chap24.html#geometry-output">24.2. Geometry Shader Output Primitives</a></li>
<li><a href="chap24.html#geometry-invocations">24.3. Multiple Invocations of Geometry Shaders</a></li>
<li><a href="chap24.html#geometry-ordering">24.4. Geometry Shader Primitive Ordering</a></li>
<li><a href="chap24.html#geometry-passthrough">24.5. Geometry Shader Passthrough</a></li>
</ul>
</li>
<li><a href="chap25.html">25. Mesh Shading</a>
<ul class="sectlevel2">
<li><a href="chap25.html#mesh-task-input">25.1. Task Shader Input</a></li>
<li><a href="chap25.html#mesh-task-output">25.2. Task Shader Output</a></li>
<li><a href="chap25.html#mesh-generation">25.3. Mesh Generation</a></li>
<li><a href="chap25.html#mesh-input">25.4. Mesh Shader Input</a></li>
<li><a href="chap25.html#mesh-output">25.5. Mesh Shader Output Primitives</a></li>
<li><a href="chap25.html#mesh-output-perview">25.6. Mesh Shader Per-View Outputs</a></li>
<li><a href="chap25.html#mesh-ordering">25.7. Mesh Shader Primitive Ordering</a></li>
</ul>
</li>
<li><a href="chap26.html">26. Fixed-Function Vertex Post-Processing</a>
<ul class="sectlevel2">
<li><a href="chap26.html#vertexpostproc-transform-feedback">26.1. Transform Feedback</a></li>
<li><a href="chap26.html#vertexpostproc-viewport-swizzle">26.2. Viewport Swizzle</a></li>
<li><a href="chap26.html#vertexpostproc-flatshading">26.3. Flat Shading</a></li>
<li><a href="chap26.html#vertexpostproc-clipping">26.4. Primitive Clipping</a></li>
<li><a href="chap26.html#vertexpostproc-clipping-shader-outputs">26.5. Clipping Shader Outputs</a></li>
<li><a href="chap26.html#vertexpostproc-viewportwscaling">26.6. Controlling Viewport W Scaling</a></li>
<li><a href="chap26.html#vertexpostproc-coord-transform">26.7. Coordinate Transformations</a></li>
<li><a href="chap26.html#vertexpostproc-renderpass-transform">26.8. Render Pass Transform</a></li>
<li><a href="chap26.html#vertexpostproc-viewport">26.9. Controlling the Viewport</a></li>
</ul>
</li>
<li><a href="chap27.html">27. Rasterization</a>
<ul class="sectlevel2">
<li><a href="chap27.html#primsrast-discard">27.1. Discarding Primitives Before Rasterization</a></li>
<li><a href="chap27.html#primsrast-stream">27.2. Controlling the Vertex Stream Used for Rasterization</a></li>
<li><a href="chap27.html#primrast-order">27.3. Rasterization Order</a></li>
<li><a href="chap27.html#primsrast-multisampling">27.4. Multisampling</a></li>
<li><a href="chap27.html#primrast-samplelocations">27.5. Custom Sample Locations</a></li>
<li><a href="chap27.html#primsrast-fragment-shading-rate">27.6. Fragment Shading Rates</a></li>
<li><a href="chap27.html#primsrast-shading-rate-image">27.7. Shading Rate Image</a></li>
<li><a href="chap27.html#primsrast-sampleshading">27.8. Sample Shading</a></li>
<li><a href="chap27.html#primsrast-barycentric">27.9. Barycentric Interpolation</a></li>
<li><a href="chap27.html#primsrast-points">27.10. Points</a></li>
<li><a href="chap27.html#primsrast-lines">27.11. Line Segments</a></li>
<li><a href="chap27.html#primsrast-polygons">27.12. Polygons</a></li>
</ul>
</li>
<li><a href="chap28.html">28. Fragment Operations</a>
<ul class="sectlevel2">
<li><a href="chap28.html#fragops-discard-rectangles">28.1. Discard Rectangles Test</a></li>
<li><a href="chap28.html#fragops-scissor">28.2. Scissor Test</a></li>
<li><a href="chap28.html#fragops-exclusive-scissor">28.3. Exclusive Scissor Test</a></li>
<li><a href="chap28.html#fragops-samplemask">28.4. Sample Mask Test</a></li>
<li><a href="chap28.html#fragops-covg">28.5. Multisample Coverage</a></li>
<li><a href="chap28.html#fragops-ds-state">28.6. Depth and Stencil Operations</a></li>
<li><a href="chap28.html#fragops-dbt">28.7. Depth Bounds Test</a></li>
<li><a href="chap28.html#fragops-stencil">28.8. Stencil Test</a></li>
<li><a href="chap28.html#fragops-depth">28.9. Depth Test</a></li>
<li><a href="chap28.html#fragops-rep-frag-test">28.10. Representative Fragment Test</a></li>
<li><a href="chap28.html#fragops-samplecount">28.11. Sample Counting</a></li>
<li><a href="chap28.html#fragops-coverage-to-color">28.12. Fragment Coverage To Color</a></li>
<li><a href="chap28.html#fragops-coverage-reduction">28.13. Coverage Reduction</a></li>
</ul>
</li>
<li><a href="chap29.html">29. The Framebuffer</a>
<ul class="sectlevel2">
<li><a href="chap29.html#framebuffer-blending">29.1. Blending</a></li>
<li><a href="chap29.html#framebuffer-logicop">29.2. Logical Operations</a></li>
<li><a href="chap29.html#framebuffer-color-write-mask">29.3. Color Write Mask</a></li>
<li><a href="chap29.html#framebuffer-color-write-enable">29.4. Color Write Enable</a></li>
</ul>
</li>
<li><a href="chap30.html">30. Dispatching Commands</a></li>
<li><a href="chap31.html">31. Device-Generated Commands</a>
<ul class="sectlevel2">
<li><a href="chap31.html#indirectmdslayout">31.1. Indirect Commands Layout</a></li>
<li><a href="chap31.html#_indirect_commands_generation_and_execution">31.2. Indirect Commands Generation And Execution</a></li>
</ul>
</li>
<li><a href="chap32.html">32. Sparse Resources</a>
<ul class="sectlevel2">
<li><a href="chap32.html#sparsememory-sparseresourcefeatures">32.1. Sparse Resource Features</a></li>
<li><a href="chap32.html#sparsememory-fully-resident">32.2. Sparse Buffers and Fully-Resident Images</a></li>
<li><a href="chap32.html#sparsememory-partially-resident-buffers">32.3. Sparse Partially-Resident Buffers</a></li>
<li><a href="chap32.html#sparsememory-partially-resident-images">32.4. Sparse Partially-Resident Images</a></li>
<li><a href="chap32.html#sparsememory-sparse-memory-aliasing">32.5. Sparse Memory Aliasing</a></li>
<li><a href="chap32.html#_sparse_resource_implementation_guidelines_informative">32.6. Sparse Resource Implementation Guidelines (Informative)</a></li>
<li><a href="chap32.html#sparsememory-resourceapi">32.7. Sparse Resource API</a></li>
</ul>
</li>
<li><a href="chap33.html">33. Window System Integration (WSI)</a>
<ul class="sectlevel2">
<li><a href="chap33.html#_wsi_platform">33.1. WSI Platform</a></li>
<li><a href="chap33.html#_wsi_surface">33.2. WSI Surface</a></li>
<li><a href="chap33.html#display">33.3. Presenting Directly to Display Devices</a></li>
<li><a href="chap33.html#_querying_for_wsi_support">33.4. Querying for WSI Support</a></li>
<li><a href="chap33.html#_surface_queries">33.5. Surface Queries</a></li>
<li><a href="chap33.html#_full_screen_exclusive_control">33.6. Full Screen Exclusive Control</a></li>
<li><a href="chap33.html#_device_group_queries">33.7. Device Group Queries</a></li>
<li><a href="chap33.html#_display_timing_queries">33.8. Display Timing Queries</a></li>
<li><a href="chap33.html#present-wait">33.9. Present Wait</a></li>
<li><a href="chap33.html#_wsi_swapchain">33.10. WSI Swapchain</a></li>
<li><a href="chap33.html#_hdr_metadata">33.11. Hdr Metadata</a></li>
</ul>
</li>
<li><a href="chap34.html">34. Deferred Host Operations</a>
<ul class="sectlevel2">
<li><a href="chap34.html#deferred-host-operations-requesting">34.1. Requesting Deferral</a></li>
<li><a href="chap34.html#_deferred_host_operations_api">34.2. Deferred Host Operations API</a></li>
</ul>
</li>
<li><a href="chap35.html">35. Private Data</a></li>
<li><a href="chap36.html">36. Acceleration Structures</a>
<ul class="sectlevel2">
<li><a href="chap36.html#acceleration-structure-def">36.1. Acceleration Structures</a></li>
<li><a href="chap36.html#host-acceleration-structure">36.2. Host Acceleration Structure Operations</a></li>
</ul>
</li>
<li><a href="chap37.html">37. Ray Traversal</a>
<ul class="sectlevel2">
<li><a href="chap37.html#ray-intersection-candidate-determination">37.1. Ray Intersection Candidate Determination</a></li>
<li><a href="chap37.html#ray-intersection-culling">37.2. Ray Intersection Culling</a></li>
<li><a href="chap37.html#ray-intersection-confirmation">37.3. Ray Intersection Confirmation</a></li>
<li><a href="chap37.html#ray-closest-hit-determination">37.4. Ray Closest Hit Determination</a></li>
<li><a href="chap37.html#ray-result-determination">37.5. Ray Result Determination</a></li>
</ul>
</li>
<li><a href="chap38.html">38. Ray Tracing</a>
<ul class="sectlevel2">
<li><a href="chap38.html#ray-tracing-shader-call">38.1. Shader Call Instructions</a></li>
<li><a href="chap38.html#ray-tracing-commands">38.2. Ray Tracing Commands</a></li>
<li><a href="chap38.html#shader-binding-table">38.3. Shader Binding Table</a></li>
<li><a href="chap38.html#ray-tracing-pipeline-stack">38.4. Ray Tracing Pipeline Stack</a></li>
</ul>
</li>
<li class="current"><a href="chap39.html">39. Video Decode and Encode Operations</a>
<ul class="sectlevel2">
<li class="current"><a href="chap39.html#_technical_terminology_and_semantics">39.1. Technical Terminology and Semantics</a></li>
<li class="current"><a href="chap39.html#_introduction">39.2. Introduction</a></li>
<li class="current"><a href="chap39.html#video-physical-device-capabilities">39.3. Video Physical Device Capabilities</a></li>
<li class="current"><a href="chap39.html#video-session-objects">39.4. Video Session Objects</a></li>
<li class="current"><a href="chap39.html#video-decode-operations">39.5. Video Decode Operations</a></li>
<li class="current"><a href="chap39.html#decode-h264">39.6. Video Decode of AVC (ITU-T H.264)</a></li>
<li class="current"><a href="chap39.html#decode-h265">39.7. Video Decode of HEVC (ITU-T H.265)</a></li>
<li class="current"><a href="chap39.html#video-encode-operations">39.8. Video Encode Operations</a></li>
<li class="current"><a href="chap39.html#encode-h264">39.9. Encode H.264</a></li>
</ul>
</li>
<li><a href="chap40.html">40. Extending Vulkan</a>
<ul class="sectlevel2">
<li><a href="chap40.html#extendingvulkan-instanceanddevicefunctionality">40.1. Instance and Device Functionality</a></li>
<li><a href="chap40.html#extendingvulkan-coreversions">40.2. Core Versions</a></li>
<li><a href="chap40.html#extendingvulkan-layers">40.3. Layers</a></li>
<li><a href="chap40.html#extendingvulkan-extensions">40.4. Extensions</a></li>
<li><a href="chap40.html#extendingvulkan-extensions-extensiondependencies">40.5. Extension Dependencies</a></li>
<li><a href="chap40.html#_compatibility_guarantees_informative">40.6. Compatibility Guarantees (Informative)</a></li>
</ul>
</li>
<li><a href="chap41.html">41. Features</a>
<ul class="sectlevel2">
<li><a href="chap41.html#features-requirements">41.1. Feature Requirements</a></li>
</ul>
</li>
<li><a href="chap42.html">42. Limits</a>
<ul class="sectlevel2">
<li><a href="chap42.html#limits-minmax">42.1. Limit Requirements</a></li>
<li><a href="chap42.html#limits-multisample">42.2. Additional Multisampling Capabilities</a></li>
</ul>
</li>
<li><a href="chap43.html">43. Formats</a>
<ul class="sectlevel2">
<li><a href="chap43.html#formats-definition">43.1. Format Definition</a></li>
<li><a href="chap43.html#formats-properties">43.2. Format Properties</a></li>
<li><a href="chap43.html#features-required-format-support">43.3. Required Format Support</a></li>
</ul>
</li>
<li><a href="chap44.html">44. Additional Capabilities</a>
<ul class="sectlevel2">
<li><a href="chap44.html#capabilities-image">44.1. Additional Image Capabilities</a></li>
<li><a href="chap44.html#capabilities-buffer">44.2. Additional Buffer Capabilities</a></li>
<li><a href="chap44.html#capabilities-semaphore">44.3. Optional Semaphore Capabilities</a></li>
<li><a href="chap44.html#capabilities-fence">44.4. Optional Fence Capabilities</a></li>
<li><a href="chap44.html#features-timestamp-calibration">44.5. Timestamp Calibration Capabilities</a></li>
</ul>
</li>
<li><a href="chap45.html">45. Debugging</a>
<ul class="sectlevel2">
<li><a href="chap45.html#debugging-debug-utils">45.1. Debug Utilities</a></li>
<li><a href="chap45.html#debugging-debug-markers">45.2. Debug Markers</a></li>
<li><a href="chap45.html#debugging-debug-report-callbacks">45.3. Debug Report Callbacks</a></li>
<li><a href="chap45.html#_device_loss_debugging">45.4. Device Loss Debugging</a></li>
<li><a href="chap45.html#debugging-tooling-info">45.5. Active Tooling Information</a></li>
</ul>
</li>
<li><a href="chap46.html">Appendix A: Vulkan Environment for SPIR-V</a>
<ul class="sectlevel2">
<li><a href="chap46.html#_versions_and_formats">Versions and Formats</a></li>
<li><a href="chap46.html#spirvenv-capabilities">Capabilities</a></li>
<li><a href="chap46.html#spirvenv-module-validation">Validation Rules within a Module</a></li>
<li><a href="chap46.html#spirvenv-precision-operation">Precision and Operation of SPIR-V Instructions</a></li>
<li><a href="chap46.html#spirvenv-image-signedness">Signedness of SPIR-V Image Accesses</a></li>
<li><a href="chap46.html#spirvenv-format-type-matching">Image Format and Type Matching</a></li>
<li><a href="chap46.html#spirvenv-image-formats">Compatibility Between SPIR-V Image Formats And Vulkan Formats</a></li>
</ul>
</li>
<li><a href="chap47.html">Appendix B: Memory Model</a>
<ul class="sectlevel2">
<li><a href="chap47.html#memory-model-agent">Agent</a></li>
<li><a href="chap47.html#memory-model-memory-location">Memory Location</a></li>
<li><a href="chap47.html#memory-model-allocation">Allocation</a></li>
<li><a href="chap47.html#memory-model-memory-operation">Memory Operation</a></li>
<li><a href="chap47.html#memory-model-references">Reference</a></li>
<li><a href="chap47.html#memory-model-program-order">Program-Order</a></li>
<li><a href="chap47.html#shader-call-related">Shader Call Related</a></li>
<li><a href="chap47.html#shader-call-order">Shader Call Order</a></li>
<li><a href="chap47.html#memory-model-scope">Scope</a></li>
<li><a href="chap47.html#memory-model-atomic-operation">Atomic Operation</a></li>
<li><a href="chap47.html#memory-model-scoped-modification-order">Scoped Modification Order</a></li>
<li><a href="chap47.html#memory-model-memory-semantics">Memory Semantics</a></li>
<li><a href="chap47.html#memory-model-release-sequence">Release Sequence</a></li>
<li><a href="chap47.html#memory-model-synchronizes-with">Synchronizes-With</a></li>
<li><a href="chap47.html#memory-model-system-synchronizes-with">System-Synchronizes-With</a></li>
<li><a href="chap47.html#memory-model-non-private">Private vs. Non-Private</a></li>
<li><a href="chap47.html#memory-model-inter-thread-happens-before">Inter-Thread-Happens-Before</a></li>
<li><a href="chap47.html#memory-model-happens-before">Happens-Before</a></li>
<li><a href="chap47.html#memory-model-availability-visibility">Availability and Visibility</a></li>
<li><a href="chap47.html#memory-model-vulkan-availability-visibility">Availability, Visibility, and Domain Operations</a></li>
<li><a href="chap47.html#memory-model-availability-visibility-semantics">Availability and Visibility Semantics</a></li>
<li><a href="chap47.html#memory-model-instruction-av-vis">Per-Instruction Availability and Visibility Semantics</a></li>
<li><a href="chap47.html#memory-model-location-ordered">Location-Ordered</a></li>
<li><a href="chap47.html#memory-model-access-data-race">Data Race</a></li>
<li><a href="chap47.html#memory-model-visible-to">Visible-To</a></li>
<li><a href="chap47.html#memory-model-acyclicity">Acyclicity</a></li>
<li><a href="chap47.html#memory-model-shader-io">Shader I/O</a></li>
<li><a href="chap47.html#memory-model-deallocation">Deallocation</a></li>
<li><a href="chap47.html#memory-model-informative-descriptions">Descriptions (Informative)</a></li>
<li><a href="chap47.html#memory-model-tessellation-output-ordering">Tessellation Output Ordering</a></li>
<li><a href="chap47.html#memory-model-cooperative-matrix">Cooperative Matrix Memory Access</a></li>
</ul>
</li>
<li><a href="chap48.html">Appendix C: Compressed Image Formats</a>
<ul class="sectlevel2">
<li><a href="chap48.html#appendix-compressedtex-bc">Block-Compressed Image Formats</a></li>
<li><a href="chap48.html#appendix-compressedtex-etc2">ETC Compressed Image Formats</a></li>
<li><a href="chap48.html#appendix-compressedtex-astc">ASTC Compressed Image Formats</a></li>
<li><a href="chap48.html#appendix-compressedtex-pvrtc">PVRTC Compressed Image Formats</a></li>
</ul>
</li>
<li><a href="chap49.html">Appendix D: Core Revisions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap49.html#versions-1.1">Version 1.1</a></li>
</ul>
</li>
<li><a href="chap50.html">Appendix E: Layers &amp; Extensions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap50.html#extension-appendices-list">List of Current Extensions</a></li>
<li><a href="chap50.html#provisional-extension-appendices-list">List of Provisional Extensions</a></li>
<li><a href="chap50.html#deprecated-extension-appendices-list">List of Deprecated Extensions</a></li>
</ul>
</li>
<li><a href="chap51.html">Appendix F: API Boilerplate</a>
<ul class="sectlevel2">
<li><a href="chap51.html#boilerplate-headers">Vulkan Header Files</a></li>
<li><a href="chap51.html#boilerplate-wsi-header">Window System-Specific Header Control (Informative)</a></li>
<li><a href="chap51.html#boilerplate-provisional-header">Provisional Extension Header Control (Informative)</a></li>
</ul>
</li>
<li><a href="chap52.html">Appendix G: Invariance</a>
<ul class="sectlevel2">
<li><a href="chap52.html#_repeatability">Repeatability</a></li>
<li><a href="chap52.html#_multi_pass_algorithms">Multi-pass Algorithms</a></li>
<li><a href="chap52.html#_invariance_rules">Invariance Rules</a></li>
<li><a href="chap52.html#_tessellation_invariance">Tessellation Invariance</a></li>
</ul>
</li>
<li><a href="chap53.html">Appendix H: Lexicon</a>
<ul class="sectlevel2">
<li><a href="chap53.html#glossary">Glossary</a></li>
<li><a href="chap53.html#lexicon-common-abbreviations">Common Abbreviations</a></li>
<li><a href="chap53.html#lexicon-prefixes">Prefixes</a></li>
</ul>
</li>
<li><a href="chap54.html">Appendix I: Credits (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap54.html#_working_group_contributors_to_vulkan">Working Group Contributors to Vulkan</a></li>
<li><a href="chap54.html#_other_credits">Other Credits</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="loading_msg" class="hidden" hidden=""><p>Loading… please wait.</p></div>
<!--ChunkedSearchboxMarker-->
<div class="searchbox"><label for="searchbox">Search: </label><input id="searchbox" type="text" disabled="disabled" value="Loading Search Data"><div id="resultsdiv"><ol id="results"></ol></div></div>
<div id="content" class="loadable" style="max-width: 100%;"><div class="sect1">
<h2 id="video-decode-and-encode-operations"><a class="anchor" href="chap39.html"></a>39. Video Decode and Encode Operations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vulkan implementations <strong class="purple">can</strong> expose video decode and encode engines, which
are independent from the graphics and compute engines.
Video decode and encode is performed by recording video operations and
submitting them to video decode and encode queues.
Vulkan provides core support for video decode and encode and <strong class="purple">can</strong> support a
variety of video codecs through individual extensions built on the core
video support.</p>
</div>
<div class="paragraph">
<p>The subsections below detail the fundamental components and operation of
Vulkan video.</p>
</div>
<div class="sect2">
<h3 id="_technical_terminology_and_semantics"><a class="anchor" href="chap39.html#_technical_terminology_and_semantics"></a>39.1. Technical Terminology and Semantics</h3>
<div class="sect3">
<h4 id="video-picture-resources"><a class="anchor" href="chap39.html#video-picture-resources"></a>39.1.1. Video Picture Resources</h4>
<div class="paragraph">
<p><strong>Video Picture Resources</strong> contain format information, <strong class="purple">can</strong> be
multidimensional and <strong class="purple">may</strong> have associated metadata.
The metadata <strong class="purple">can</strong> include implementation-private details required for the
decode or encode operations and application managed color-space related
information.</p>
</div>
<div class="paragraph">
<p>In Vulkan, a <a href="chap39.html#video-picture-resources">Video Picture Resource</a> is
represented by a <a href="chap12.html#VkImage">VkImage</a>.
The <a href="chap12.html#VkImageView">VkImageView</a>, representing the <a href="chap12.html#VkImage">VkImage</a>, is used with the
decode operations as <a href="chap39.html#decoded-output-picture">Output</a> and <a href="chap39.html#dpb">Decoded
Picture Buffer (DPB)</a>, and with the encode operation as
<a href="chap39.html#input-encode-picture">Input</a> and <a href="chap39.html#reconstructed-pictures">Reconstructed</a>
<a href="chap39.html#video-picture-resources">Video Picture Resource</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="reference-picture"><a class="anchor" href="chap39.html#reference-picture"></a>39.1.2. Reference Picture</h4>
<div class="paragraph">
<p>Video <strong>Reference Picture</strong> is a <a href="chap39.html#video-picture-resources">Video Picture
Resource</a> that <strong class="purple">can</strong> be used in the video decode or encode process to
provide predictions of the values of samples in the subsequently decoded or
encoded pictures.</p>
</div>
</div>
<div class="sect3">
<h4 id="decoded-output-picture"><a class="anchor" href="chap39.html#decoded-output-picture"></a>39.1.3. Decoded Output Picture</h4>
<div class="paragraph">
<p>The pixels resulting from the video decoding process are stored in a
<strong>Decoded Output Picture</strong>, represented by a <a href="chap12.html#VkImageView">VkImageView</a>.
This <strong class="purple">can</strong> be shared with the <a href="chap39.html#dpb">Encoder Reconstructed or Decoder DPB</a>
<a href="chap39.html#video-picture-resources">Video Picture Resources</a>.
It <strong class="purple">can</strong> also be used as an input for Video Encode, Graphics, Compute
processing, or WSI presentation.</p>
</div>
</div>
<div class="sect3">
<h4 id="input-encode-picture"><a class="anchor" href="chap39.html#input-encode-picture"></a>39.1.4. Input Picture to Encode</h4>
<div class="paragraph">
<p>The primary source of input pixels for the video encoding process is the
<strong>Input Picture to Encode</strong>, represented by a <a href="chap12.html#VkImageView">VkImageView</a>.
This <strong class="purple">can</strong> be shared with the <a href="chap39.html#dpb">Encoder Reconstructed or Decoder DPB</a>
<a href="chap39.html#video-picture-resources">Video Picture Resources</a>.
It <strong class="purple">can</strong> be a direct target of Video Decode, Graphics, Compute processing, or
WSI presentation.</p>
</div>
</div>
<div class="sect3">
<h4 id="dpb"><a class="anchor" href="chap39.html#dpb"></a>39.1.5. Decoded Picture Buffer (DPB)</h4>
<div class="paragraph">
<p>Previously decoded pictures are used by video codecs to provide predictions
of the values of samples in the subsequently decoded pictures.
At the decoder, such <a href="chap39.html#video-picture-resources">Video Picture Resources</a> are
stored in a <strong>Decoded Picture Buffer (DPB)</strong> as an indexed set of
<a href="chap39.html#reference-picture">Reference Pictures</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="reconstructed-pictures"><a class="anchor" href="chap39.html#reconstructed-pictures"></a>39.1.6. Reconstructed Pictures</h4>
<div class="paragraph">
<p>An integral part of the video decoding pipeline is the reconstruction of
pictures from the compressed stream.
A similar stage exists in the video encoding pipeline as well.
Such reconstructed pictures <strong class="purple">may</strong> be used as <a href="chap39.html#reference-picture">Reference
Pictures</a> for subsequently decoded or encoded pictures.
The correct use of such <a href="chap39.html#reference-picture">Reference Pictures</a> is driven
by the video compression standard, the implementation, and the
application-specific use cases.</p>
</div>
<div class="paragraph">
<p>This specification refers to the collection of the <strong>Decoded Picture Buffer</strong>
and <strong>Reconstructed Pictures</strong> as <a href="chap39.html#dpb">Decoded Picture Buffer (DPB) Set</a>,
or only, <strong>DPB</strong>.</p>
</div>
</div>
<div class="sect3">
<h4 id="dpb-slot"><a class="anchor" href="chap39.html#dpb-slot"></a>39.1.7. Decoded Picture Buffer (DPB) Slot</h4>
<div class="paragraph">
<p><strong>Decoded Picture Buffer (DPB) Slot</strong> represents a single or multi-layer
indexed <a href="chap39.html#reference-picture">Reference Picture’s</a> entry within the
<a href="chap39.html#video-session">Video Session’s</a> <a href="chap39.html#dpb">DPB Set</a>.
A valid <a href="chap39.html#dpb-slot">DPB Slot</a> index starts from zero and goes up to the
maximum of <strong>N</strong> - 1, where <strong>N</strong> is the number of <a href="chap39.html#reference-picture">Reference
Picture</a> entries requested for a <a href="chap39.html#video-session">Video Session</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="reference-metadata"><a class="anchor" href="chap39.html#reference-metadata"></a>39.1.8. Reference Picture Metadata</h4>
<div class="paragraph">
<p>The opaque <a href="chap39.html#dpb-slot">DPB Slot</a> state managed by the implementation <strong class="purple">may</strong>
contain <strong>Reference Picture Metadata</strong>, present when the
<a href="chap39.html#video-picture-resources">picture resource</a> associated with the
<a href="chap39.html#dpb-slot">DPB Slot</a> is used as a <a href="chap39.html#reference-picture">reference picture</a>
in one or more video decode or encode operations.</p>
</div>
<div class="paragraph">
<p>An implementation or application <strong class="purple">may</strong> have other Picture Metadata related to
the Video Picture Resource or the DPB Slot, but such data is outside the
scope of this specification.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note:</div>
<div class="paragraph">
<p>The video decode or encode implementation does not maintain internal
references to the <a href="chap39.html#reference-picture">Reference Pictures</a>, beyond the
<a href="chap39.html#reference-metadata">Reference Picture Metadata</a>.
It is the responsibility of the Vulkan Application to create, manage, and
destroy, as well as to provide those Video Picture Resources, when required,
during the decoding or encoding process.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="color-space-metadata"><a class="anchor" href="chap39.html#color-space-metadata"></a>39.1.9. Color Space Metadata</h4>
<div class="paragraph">
<p><strong>Color Space Metadata</strong> is the additional static or dynamic state associated
with a <a href="chap39.html#video-picture-resources">Video Picture Resource</a> specifying the
color volume (the color primaries, white point, and luminance range) of the
display that was used in mastering the video content.
The use of <strong>Color Space Metadata</strong> is outside the scope of the current
version of the video core specification.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_introduction"><a class="anchor" href="chap39.html#_introduction"></a>39.2. Introduction</h3>
<div class="paragraph">
<p>This chapter discusses extensions supporting Video Decode or Encode
operations.
Video Decode and Encode operations are supported by queues with an
advertised queue capability of <code>VK_QUEUE_VIDEO_DECODE_BIT_KHR</code> and
<code>VK_QUEUE_VIDEO_ENCODE_BIT_KHR</code>, respectively.
Video Decode or Encode queue operation support allows for Vulkan
applications to cooperate closely with other graphics or compute operations
seamlessly and efficiently, therefore improving the overall application
performance.</p>
</div>
<div class="sect3">
<h4 id="video-decode-queue"><a class="anchor" href="chap39.html#video-decode-queue"></a>39.2.1. Video Decode Queue</h4>
<div class="paragraph">
<p><a href="chap50.html#VK_KHR_video_decode_queue">VK_KHR_video_decode_queue</a> adds a video decode queue type bit
<code>VK_QUEUE_VIDEO_DECODE_BIT_KHR</code> to <a href="chap5.html#VkQueueFlagBits">VkQueueFlagBits</a>.
As in the case of other queue types, an application <strong class="purple">must</strong> use
<a href="chap5.html#vkGetPhysicalDeviceQueueFamilyProperties">vkGetPhysicalDeviceQueueFamilyProperties</a> to query whether the physical
device has support for the Video Decode Queue.
When the implementation reports the <code>VK_QUEUE_VIDEO_DECODE_BIT_KHR</code> bit
for a queue family, it advertises general support for Vulkan queue
operations described in <a href="chap5.html">Devices and Queues</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="video-encode-queue"><a class="anchor" href="chap39.html#video-encode-queue"></a>39.2.2. Video Encode Queue</h4>
<div class="paragraph">
<p><a href="chap50.html#VK_KHR_video_encode_queue">VK_KHR_video_encode_queue</a> adds a video encode queue type bit
<code>VK_QUEUE_VIDEO_ENCODE_BIT_KHR</code> to <a href="chap5.html#VkQueueFlagBits">VkQueueFlagBits</a>.
As in the case of other queue types, an application <strong class="purple">must</strong> use
<a href="chap5.html#vkGetPhysicalDeviceQueueFamilyProperties">vkGetPhysicalDeviceQueueFamilyProperties</a> to query whether the physical
device has support for the Video Encode Queue.
When the implementation reports the <code>VK_QUEUE_VIDEO_ENCODE_BIT_KHR</code> bit
for a queue family, it advertises general support for Vulkan queue
operations described in <a href="chap5.html">Devices and Queues</a>.</p>
</div>
<div class="paragraph">
<p>The rest of the chapter focuses, specifically, on Video Decode and Encode
queue operations.</p>
</div>
</div>
<div class="sect3">
<h4 id="video-session-introduction"><a class="anchor" href="chap39.html#video-session-introduction"></a>39.2.3. Video Session</h4>
<div class="paragraph">
<p>Before performing any video decoding or encoding operations, the application
<strong class="purple">must</strong> create a <a href="chap39.html#video-session">Video Session</a> instance, of type
<a href="chap39.html#VkVideoSessionKHR">VkVideoSessionKHR</a>.
A <a href="chap39.html#video-session">Video Session</a> instance is an immutable object and
supports a single compression standard (for example, H.264, H.265, VP9, AV1,
etc.).
The implementation uses the <a href="chap39.html#VkVideoSessionKHR">VkVideoSessionKHR</a> object to maintain the
video state for the video decode or video encode operation.
A <a href="chap39.html#video-session">Video Session</a> instance is created specifically:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For a particular video compression standard;</p>
</li>
<li>
<p>For video decoding or video encoding;</p>
</li>
<li>
<p>With maximum supported decoded or encoded picture width/height;</p>
</li>
<li>
<p>With the maximum number of supported <a href="chap39.html#dpb">DPB</a> or
<a href="chap39.html#reconstructed-pictures">Reconstructed Pictures</a> slots that can be
allocated;</p>
</li>
<li>
<p>With the maximum number of <a href="chap39.html#reference-picture">Reference Pictures</a> that
<strong class="purple">can</strong> be used simultaneously for video decode or encode operations;</p>
</li>
<li>
<p>Codec color and features profile;</p>
</li>
<li>
<p>Color Space format description (not supported with this version of the
specification);</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="chap39.html#VkVideoSessionKHR">VkVideoSessionKHR</a> represents a single video decode or encode stream.
For each concurrently used stream, a separate instance of
<a href="chap39.html#VkVideoSessionKHR">VkVideoSessionKHR</a> is required.
After the application has finished with the processing of a stream, it can
reuse the <a href="chap39.html#video-session">Video Session</a> instance for another, provided
that the configuration parameters between the two usages are compatible (as
determined by the video compression standard in use).
Once the <a href="chap39.html#VkVideoSessionKHR">VkVideoSessionKHR</a> instance has been created, the video
compression standard and profiles, <a href="chap39.html#input-encode-picture">Input</a> /
<a href="chap39.html#decoded-output-picture">Output</a> / <a href="chap39.html#dpb">DPB</a> formats, and the settings
like the maximum extent <strong class="purple">cannot</strong> be changed.</p>
</div>
<div class="paragraph">
<p>The values of the following <a href="chap39.html#VkVideoSessionKHR">VkVideoSessionKHR</a> parameters <strong class="purple">can</strong> be
updated each frame, subject to the restrictions imposed on parameter updates
by the video compression standard in use:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>decoded or encoded picture size</p>
</li>
<li>
<p>number of active <a href="chap39.html#dpb">DPB</a> or <a href="chap39.html#reconstructed-pictures">Reconstructed
Picture</a> slots</p>
</li>
<li>
<p>number of <a href="chap39.html#reference-picture">Reference Pictures</a> in use,</p>
</li>
<li>
<p>color space and color space metadata</p>
</li>
<li>
<p>color space metadata.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The updated parameters <strong class="purple">must</strong> not exceed the maximum limits specified when
creating the <a href="chap39.html#VkVideoSessionKHR">VkVideoSessionKHR</a> instance.</p>
</div>
</div>
<div class="sect3">
<h4 id="video-session-device-memory-heaps"><a class="anchor" href="chap39.html#video-session-device-memory-heaps"></a>39.2.4. Video Session Device Memory Heaps</h4>
<div class="paragraph">
<p>After creating a <a href="chap39.html#video-session">Video Session</a> instance, and before the
object can be used for any of the decode or encode operations, the
application <strong class="purple">must</strong> allocate and bind device memory resources to the Video
Session object.
An implementation <strong class="purple">may</strong> require one or more device memory heaps of different
memory types, as reported by the
<a href="chap39.html#vkGetVideoSessionMemoryRequirementsKHR">vkGetVideoSessionMemoryRequirementsKHR</a> function, to be bound with the
<a href="chap39.html#vkBindVideoSessionMemoryKHR">vkBindVideoSessionMemoryKHR</a> function to the <a href="chap39.html#video-session">Video
Session</a>, For more information about the <strong>Video Session Device Memory</strong>,
please refer to the <a href="chap39.html#binding-session-memory">Binding the Session Object
Device Memory</a> section, below.</p>
</div>
</div>
<div class="sect3">
<h4 id="video-session-parameters-introduction"><a class="anchor" href="chap39.html#video-session-parameters-introduction"></a>39.2.5. Video Session Parameters</h4>
<div class="paragraph">
<p>A lot of codec standards require parameters that are in use for the entire
video stream.
For example, H.264/AVC and HEVC standards require sequence and picture
parameter sets (SPS and PPS) that apply to multiple Video Decode and Encode
frames, layers, and sub-layers.
Vulkan Video uses <a href="chap39.html#video-session-parameters">Video Session Parameters</a>
objects to store such standard parameters.
The application creates one or more <a href="chap39.html#video-session-parameters">Video Session
Parameters</a> Objects against a <a href="chap39.html#video-session">Video Session</a>, with a set
of common Video Parameters that are required for the processing of the video
content.
During the object creation, the implementation stores the parameters to the
created instance.
During command buffer recording, it is the responsibility of the application
to provide the <a href="chap39.html#video-session-parameters">Video Session Parameters</a> object
containing the parameters that are necessary for the processing the portion
of the stream under consideration.</p>
</div>
</div>
<div class="sect3">
<h4 id="video-picture-subresources"><a class="anchor" href="chap39.html#video-picture-subresources"></a>39.2.6. Video Picture Subresources</h4>
<div class="paragraph">
<p>For <a href="chap39.html#video-picture-resources">Video Picture Resources</a>, an application has
the option to use single or multi-layer <a href="chap12.html#VkImage">images</a> for
<a href="chap12.html#resources-image-views">image views</a>.
The layer to be used during decode or encode operations <strong class="purple">can</strong> be specified
when the <a href="chap12.html#VkImageView">image view</a> is being created with the
<a href="chap12.html#VkImageSubresourceRange">VkImageSubresourceRange</a>::<code>baseArrayLayer</code> parameter, and/or within
the resource binding operations in command buffer by using the
<a href="chap39.html#VkVideoPictureResourceKHR">VkVideoPictureResourceKHR</a>::<code>baseArrayLayer</code> parameter.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note:</div>
<div class="paragraph">
<p>Both Video Decode and Encode operations only work with a single layer at the
time.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The <a href="chap12.html#resources-image-views">Image views</a> representing the
<a href="chap39.html#input-encode-picture">Input</a> / <a href="chap39.html#decoded-output-picture">Output</a> /
<a href="chap39.html#dpb">DPB</a> <a href="chap39.html#video-picture-resources">Video Picture Resources</a> could have
been created with sizes bigger than the coded size that is used with Video
Decode and Encode operations.
This allows for the same Video Picture Resources to be reused when there is
a change in the input video content resolution.
The effective coded size of the <a href="chap39.html#video-picture-resources">Video Picture
Resources</a> used for Video Decode and Encode operations is provided with
<a href="chap39.html#VkVideoPictureResourceKHR">VkVideoPictureResourceKHR</a>::<code>extent</code> parameter of each resource in
use.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note:</div>
<div class="paragraph">
<p>Many codec standards require the coded and <a href="chap39.html#video-picture-resources">Video
Picture Resources'</a> sizes to match.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect4">
<h5 id="dpb-picture-resources"><a class="anchor" href="chap39.html#dpb-picture-resources"></a>Video Session <a href="chap39.html#dpb">DPB and Reconstructed</a> Video Picture Resources</h5>
<div class="paragraph">
<p>The video compression standard chosen <strong class="purple">may</strong> require the use of
<a href="chap39.html#reference-picture">Reference Pictures</a>.
In Vulkan Video, like any other <a href="chap39.html#video-picture-resources">Video Picture
Resources</a>, the <a href="chap39.html#reference-picture">Reference Pictures</a> are represented
with <a href="chap12.html#resources-image-views">Image Views</a>.</p>
</div>
<div class="paragraph">
<p>When an application requires <a href="chap39.html#reference-picture">Reference Picture
Resources</a>, it creates and then associates <a href="chap12.html#VkImageView">image views</a>,
representing these resources, with Video Session <a href="chap39.html#dpb-slot">DPB or
Reconstructed slots</a> while recording the command buffer.</p>
</div>
<div class="paragraph">
<p><a href="chap39.html#decoded-output-picture">Decoded output pictures</a> <strong class="purple">may</strong> be used as
<a href="chap39.html#reference-picture">reference pictures</a> in future video decode operations.
The same pictures <strong class="purple">may</strong> be used in texture sampling operations or in the
(WSI) presentation pipeline.
Representing the <a href="chap39.html#dpb-slot">DPB’s Video Picture Resources</a> by
<a href="chap12.html#VkImageView">image views</a> makes it possible to accommodate all these use
cases in a “zero-copy” fashion.
Also, it provides more fine-grained control of the application over the
efficient usage of the DPB and Reconstructed <a href="chap11.html#VkDeviceMemory">Device Memory
Resources</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="video-session-dpb-slot-resource-management"><a class="anchor" href="chap39.html#video-session-dpb-slot-resource-management"></a>Video Session <a href="chap39.html#dpb-slot">DPB and Reconstructed Slot</a> Resource Management</h5>
<div class="paragraph">
<p>Before <a href="chap39.html#dpb-picture-resources">Video Picture Resources</a> can be used as
<a href="chap39.html#reference-picture">Reference Picture Resources</a>, Video Session
<a href="chap39.html#dpb-slot">DPB or Reconstructed Slots</a> <strong class="purple">must</strong> be associated with those
resources.</p>
</div>
<div class="paragraph">
<p>The application allocates a <a href="chap39.html#dpb-slot">DPB or Reconstructed Slot</a> and
associates it with a <a href="chap39.html#video-picture-resources">Video Picture Resource</a> and
then sets up the resource as a target of decode or encode operation.
After successfully decoding or encoding a picture with the targeted
<a href="chap39.html#dpb-slot">DPB or Reconstructed Slot</a> , in addition to the
<a href="chap39.html#reference-picture">Reference Picture</a> pixel data, the implementation <strong class="purple">may</strong>
generate an opaque <a href="chap39.html#reference-metadata">Reference Picture Metadata</a> for
that video session Slot and its associated <a href="chap39.html#video-picture-resources">Video
Picture Resource</a>.</p>
</div>
<div class="paragraph">
<p>Subsequently, one or more <a href="chap39.html#dpb-slot">DPB or Reconstructed video session
Slots</a>, along with their associated <a href="chap39.html#video-picture-resources">Video Picture
Resources</a>, <strong class="purple">can</strong> be used as <a href="chap39.html#reference-picture">Reference Picture’s</a>
source for the video decode or encode operations.</p>
</div>
<div class="paragraph">
<p>If <a href="chap39.html#reference-picture">Reference Pictures</a> were to be required for decoding
or encoding of the video bitstream, the
<a href="chap39.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>::<code>maxReferencePicturesSlotsCount</code>
<strong class="purple">must</strong> be set to a value bigger than <code>0</code> when the instance of the
<a href="chap39.html#video-session">Video Session</a> object is created.</p>
</div>
<div class="paragraph">
<p>Up to
<a href="chap39.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>::<code>maxReferencePicturesSlotsCount</code>
slots <strong class="purple">can</strong> be activated with <a href="chap39.html#video-picture-resources">Video Picture
Resources</a> for a video session and up to
<a href="chap39.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>::<code>maxReferencePicturesActiveCount</code>
active slots <strong class="purple">can</strong> be used as DPB or Reconstructed
<a href="chap39.html#reference-picture">Reference Pictures</a> within a single decode or encode
operation.</p>
</div>
<div class="paragraph">
<p>When the implementation is associating <a href="chap39.html#reference-metadata">Reference
Picture Metadata</a> with the <a href="chap39.html#video-picture-resources">Video Picture
Resources</a> themselves, such data <strong class="purple">must</strong> be independent of the
<a href="chap39.html#video-session">Video Session</a> to allow for those
<a href="chap39.html#video-picture-resources">Video Picture Resources</a> to be shared with other
Video Session instances.
All of the <a href="chap39.html#video-session">Video Session</a>-dependent
<a href="chap39.html#reference-metadata">Reference Picture Metadata</a> <strong class="purple">must</strong> only be associated
with the <a href="chap39.html#video-session">Video Session</a> <a href="chap39.html#dpb-slot">DPB or Reconstructed
Slots</a>.</p>
</div>
<div class="paragraph">
<p>The application with the help of the implementation is responsible for
managing the individual <a href="chap39.html#dpb-slot">DPB, or Reconstructed Slots</a> that belong
to a single <a href="chap39.html#video-session">Video Session</a> <a href="chap39.html#dpb">DPB set</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The application maintains the Slot allocation and per-slot
<a href="chap39.html#reference-picture">Reference Picture</a>
<a href="chap39.html#video-picture-resources">Resources</a>;</p>
</li>
<li>
<p>Implementation maintains global and per-slot opaque
<a href="chap39.html#reference-metadata">Reference Picture Metadata</a>;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The application also manages the mapping between the codec-specific picture
IDs and <a href="chap39.html#dpb-slot">DPB Slots</a>.</p>
</div>
<div class="paragraph">
<p>When a Video Picture is decoded and is set as a
<a href="chap39.html#reference-picture">Reference Picture</a> against a Video Session
<a href="chap39.html#dpb-slot">DPB Slot</a>, or is encoded and a Reconstructed Video Picture
Resource is associated with a Video Session <a href="chap39.html#dpb-slot">DPB Slot</a> then:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="chap39.html#video-picture-resources">Video Picture Resource</a> associated with
the Slot is filled with the decoded or reconstructed pixel data;</p>
</li>
<li>
<p>The implementation generates the <a href="chap39.html#dpb-slot">DPB Slot’s</a>
<a href="chap39.html#reference-metadata">Reference Picture Metadata</a>;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When a <a href="chap39.html#dpb-slot">DPB’s Slot</a> is deactivated, or a different
<a href="chap39.html#video-picture-resources">Video Picture Resource</a> is used with the Slot, or
the content of the <a href="chap39.html#video-picture-resources">Video Picture Resource</a> is
modified, the <a href="chap39.html#reference-metadata">Reference Picture Metadata</a> associated
with the <a href="chap39.html#dpb-slot">DPB Slot</a> gets invalidated by the implementation.
Subsequent attempts to use such, invalidated, <a href="chap39.html#dpb">DPB</a> Slot as a
<a href="chap39.html#reference-picture">Reference</a> source would produce undefined results.</p>
</div>
</div>
<div class="sect4">
<h5 id="video-session-dpb-picture-size-changes"><a class="anchor" href="chap39.html#video-session-dpb-picture-size-changes"></a>Video Session <a href="chap39.html#dpb-slot">DPB Slot</a> subresources</h5>
<div class="paragraph">
<p>DPB <a href="chap39.html#reference-picture">Reference Picture’s</a> coded width and height <strong class="purple">can</strong>
change, dynamically, via <a href="chap39.html#VkVideoPictureResourceKHR">VkVideoPictureResourceKHR</a>::<code>extent</code>, and
the picture parameters from the codec-specific extensions.
When a <a href="chap39.html#dpb-slot">DPB Slot</a> is activated as a <a href="chap39.html#reference-picture">Reference
Picture</a> and a decode or encode operation is performed against that slot,
the coded extent <strong class="purple">can</strong> be recorded by the implementation to the corresponding
<a href="chap39.html#dpb-slot">DPB Slot’s</a> metadata state.
Subsequently, when the <a href="chap39.html#reference-picture">Reference Pictures</a> are used
with the decoded <a href="chap39.html#decoded-output-picture">Output</a> or encoded
<a href="chap39.html#input-encode-picture">Input Picture</a>, their coded extent can differ.
Decoding or encoding pictures, using picture sizes, different from the
previously produced <a href="chap39.html#reference-picture">Reference Pictures</a> <strong class="purple">should</strong> be used
with care, not to conflict with the codec standard and the implementation’s
support for that.
It is the responsibility of the application to ensure that valid <a href="chap39.html#dpb">DPB
Set</a> of <a href="chap39.html#reference-picture">Reference Pictures</a> are in use, according to
the codec standard.</p>
</div>
<div class="paragraph">
<p>In addition, the <a href="chap39.html#video-picture-resources">Video Picture Resources</a> extent
<strong class="purple">cannot</strong> exceed the <a href="chap39.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>::<code>maxCodedExtent</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note:</div>
<div class="paragraph">
<p>Coding Standards such as VP9 and AV1 allow for images with different sizes
to be used as <a href="chap39.html#reference-picture">Reference Pictures</a>.
Others, like H.264 and H.265, do not support <a href="chap39.html#reference-picture">Reference
Pictures</a> with different sizes.
Using <a href="chap39.html#reference-picture">Reference Pictures</a> with incompatible sizes with
such standards would render undefined results.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="video-resource-management-by-application"><a class="anchor" href="chap39.html#video-resource-management-by-application"></a>The application is in control of the allocation and use of the system resource</h5>
<div class="paragraph">
<p>In Vulkan Video, the application has complete control over how and when
system resources are used.
The Vulkan Video framework provides the following tools to ensure that
device and host memory resources are used in an optimal way:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The video application <strong class="purple">can</strong> allocate or destroy the number of allocated
<a href="chap39.html#decoded-output-picture">Output</a> or <a href="chap39.html#input-encode-picture">Input</a>
Pictures, and <strong class="purple">can</strong> grow, or shrink the DPB set of
<a href="chap39.html#reference-picture">Reference Pictures</a>, dynamically, based on the
changing video content requirement.</p>
</li>
<li>
<p><a href="chap39.html#reference-picture">Reference Pictures</a> <strong class="purple">can</strong> be shared with the decoded
<a href="chap39.html#decoded-output-picture">Output</a> or encoded <a href="chap39.html#input-encode-picture">Input</a> pictures.</p>
</li>
<li>
<p>The application <strong class="purple">can</strong> use <a href="chap32.html">sparse memory</a> for the
<a href="chap12.html#VkImage">images</a>, representing <a href="chap39.html#video-picture-resources">Video Picture
Resources</a>.
The use of sparse memory would allow the application to remove the
<a href="chap11.html#VkDeviceMemory">Device Memory</a> backing of the <a href="chap12.html#resources-images">image resources</a> when the <a href="chap39.html#dpb-slot">DPB Slot</a> is not in active use.
Furthermore, if the <a href="undefined">sparse residency
feature</a> is supported by the implementation (see <a href="chap32.html">Sparse
Resources</a>), then <a href="chap12.html#VkImage">images</a> can be, partially, bound with the
resource memory.
This feature is particularly important when using video content with a
significant change of decoded or encoded resolution.</p>
</li>
<li>
<p>If the implementation supports <a href="chap12.html#VkImage">image arrays</a>, and
<a href="chap32.html">sparse memory resources</a>, then the application <strong class="purple">can</strong>
remove the <a href="chap11.html#VkDeviceMemory">Device Memory</a> backing of <a href="chap12.html#VkImage">image
array</a> layers that are not used by any <a href="chap39.html#dpb-slot">DPB Slots</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="video-session-dpb-binding-reconstructed-slot"><a class="anchor" href="chap39.html#video-session-dpb-binding-reconstructed-slot"></a>Using DPB and Reconstructed Slot’s Associated Resources</h5>
<div class="paragraph">
<p>Before a <a href="chap39.html#dpb-slot">DPB Slot</a> is to become <strong>Valid</strong> for use with a
<a href="chap39.html#reference-picture">Reference Picture</a>, it requires memory resources to be
bound to it.</p>
</div>
<div class="paragraph">
<p>Some of the memory resources required for the <a href="chap39.html#dpb-slot">DPB Slot</a>, are
opaquely managed by the implementation and, internally, allocated from the
<a href="chap39.html#video-session-device-memory-heaps">Session’s Device Memory Heaps</a>.
The application provides the <a href="chap12.html#resources-images">image resources</a> of one or
more <a href="chap39.html#reference-picture">Reference Pictures</a>, in the
<a href="chap39.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>::<code>pReferenceSlots</code> as part of the
<a href="chap39.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command.</p>
</div>
<div class="paragraph">
<p>If a <a href="chap39.html#dpb-slot">DPB Slot</a> was already used with an <a href="chap12.html#resources-image-views">image view</a>, and a new image view or a <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a> handle is used
with that Slot, then the <a href="chap39.html#dpb-slot">DPB Slot’s</a> state will be invalidated
by the implementation.
If a <a href="chap39.html#dpb-slot">DPB Slot</a> were to be reused with the same
<a href="chap12.html#resources-image-views">image view</a>, the state of the Slot would not
change.</p>
</div>
</div>
<div class="sect4">
<h5 id="video-session-activating-dpb-slot"><a class="anchor" href="chap39.html#video-session-activating-dpb-slot"></a>Video Session Activating DPB Slot as a Reference</h5>
<div class="paragraph">
<p>Before a <a href="chap39.html#dpb-slot">DPB Slot</a> is to be used for a
<a href="chap39.html#reference-picture">Reference Pictures</a> index, it <strong class="purple">must</strong> be activated.
The activation of a <a href="chap39.html#dpb-slot">DPB Slot</a> is done within the
<a href="chap39.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a> command’s
<a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>slotIndex</code> field for the decode operations,
and within the <a href="chap39.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a> command’s
<a href="chap39.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>::<code>slotIndex</code> field for the encode operations.</p>
</div>
<div class="paragraph">
<p>While activating a Slot for DPB, it <strong class="purple">must</strong> already have an associated
<a href="chap12.html#resources-image-views">image view</a>, within the
<a href="chap39.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>::<code>pReferenceSlots</code> in the
<a href="chap39.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command and <a href="chap11.html#VkDeviceMemory">Device Memory</a>
backing of the the <a href="chap12.html#resources-images">image resources</a> <strong class="purple">must</strong> be resident.</p>
</div>
<div class="paragraph">
<p>When a <a href="chap39.html#dpb-slot">DPB Slot</a> were to be activated, the
<a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>slotIndex</code> for decode, or
<a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>slotIndex</code> for encode, <strong class="purple">must</strong> be set to the
application’s allocated <a href="chap39.html#dpb-slot">DPB Slot’s index</a>.
When activating a <a href="chap39.html#dpb-slot">DPB Slot</a>, the application will perform a
decode or encode operation against its Slot’s index in order to enable its
state as a <strong>Valid Picture Reference</strong>.
If a <a href="chap39.html#dpb-slot">DPB Slot</a> is activated, but a decode or encode operation is
not performed against that Slot’s index, or the decode or encode operation
was unsuccessful, then the <a href="chap39.html#dpb-slot">DPB Slot</a> would remain in the
<strong>Invalid Picture Reference</strong> state (see below the
<a href="chap39.html#video-session-dpb-slot-states">DPB Slot States</a>).</p>
</div>
<div class="paragraph">
<p>By just providing a <a href="chap39.html#video-picture-resources">Video Picture Resources</a> for
a <a href="chap39.html#dpb-slot">DPB Slot</a> within the
<a href="chap39.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>::<code>pReferenceSlots</code>, and without
successfully performing a decode or encode operation against that Slot, the
<a href="chap39.html#dpb-slot">DPB Slot’s</a> state <strong class="purple">cannot</strong> be changed to <strong>Valid Picture
Reference</strong>.
If the <a href="chap39.html#dpb-slot">DPB Slots</a> were already in <strong>Valid Picture Reference</strong>, and
there is no <a href="chap39.html#video-picture-resources">Video Picture Resources</a> associated
with the <a href="chap39.html#dpb-slot">DPB Slot</a> for a decode or encode operation, the state
<a href="chap39.html#dpb-slot">DPB Slot</a> would not change.
However, if an application is referring to a valid <a href="chap39.html#dpb-slot">DPB Slot</a> in
its current decode or encode operations, then a valid
<a href="chap12.html#resources-image-views">image view</a> <strong class="purple">must</strong> be provided for that Slot within
<a href="chap39.html#VkVideoPictureResourceKHR">VkVideoPictureResourceKHR</a>::<code>imageViewBinding</code> for that decode or
encode operation.</p>
</div>
</div>
<div class="sect4">
<h5 id="video-session-invalidating-dpb-slot"><a class="anchor" href="chap39.html#video-session-invalidating-dpb-slot"></a>Video Session Invalidating DPB Slot’s Reference State</h5>
<div class="paragraph">
<p>When a <a href="chap39.html#dpb-slot">DPB Slot</a> is invalidated, its state is set to <strong>Invalid
Picture Reference</strong>.
Using a <a href="chap39.html#dpb-slot">DPB Slot</a> as a <a href="chap39.html#reference-picture">Reference Picture</a>
index for video decode or encode operations while the Slot is in <strong>Invalid
Picture Reference</strong> state would render undefined results.</p>
</div>
</div>
<div class="sect4">
<h5 id="video-session-dpb-slot-states"><a class="anchor" href="chap39.html#video-session-dpb-slot-states"></a>Video Session <a href="chap39.html#dpb">DPB</a> Slot States</h5>
<div class="paragraph">
<p>To help understand the valid use of the <a href="chap39.html#video-session">Video Session</a>
<a href="chap39.html#dpb">DPB</a> and its resource management, this section aims to explain the
different states and correct usage of <a href="chap39.html#dpb-slot">DPB Slots</a>.</p>
</div>
<div class="paragraph">
<p>There are four (4) states that a <a href="chap39.html#dpb-slot">DPB Slot</a> could be in:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Picture Reference Unused;</p>
</li>
<li>
<p>Invalid Picture Reference;</p>
</li>
<li>
<p>Updating Picture Reference;</p>
</li>
<li>
<p>Valid Picture Reference;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The different states are outlined within the
<a href="chap39.html#video-session-dpb-slot-states-table">DPB Slot States</a> and
<a href="chap39.html#video-session-dpb-slot-states-flow-diagram">DPB Slot States Flow Diagram</a>
below.</p>
</div>
<div class="paragraph">
<p>All DPB Slot management operations are performed via the
<a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>slotIndex</code> or
<a href="chap39.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>::<code>slotIndex</code> field.</p>
</div>
<div class="paragraph">
<p>All DPB resource binding, invalidating, and activating Slot management
operations are performed, by the implementation, <strong>before</strong> the decoding or
encoding commands, based on the <a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>slotIndex</code>
or <a href="chap39.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>::<code>slotIndex</code> field and the entries from
the <a href="chap39.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>::<code>pReferenceSlots</code>.
The application <strong class="purple">cannot</strong> move a DPB Slot from a <strong>Picture Reference Unused</strong> to
<strong>Updating Picture Reference</strong> state, implicitly, within a decode or encode
command operation.
Such a DPB Slot <strong class="purple">must</strong> first be transitioned to an <strong>Invalid Picture
Reference</strong> state using <a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>slotIndex</code> or
<a href="chap39.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>::<code>slotIndex</code>, as part of a decode command.
For more details, see <a href="chap39.html#video-picture-decode-modes">Video Picture Decode
Modes</a>.</p>
</div>
<div class="paragraph">
<p>When using <a href="chap32.html">sparse memory resources</a>, it would be acceptable
and valid behavior for the application to unbind the memory while the DPB
Slot is any of the DPB Slot states, provided the command buffers, in a
<a href="chap6.html#commandbuffers-lifecycle">pending state</a>, do not reference any such
<a href="chap39.html#video-picture-resources">Video Picture Resources</a>.</p>
</div>
<div class="paragraph">
<p>Accessing <a href="chap32.html#sparsememory-accessing-unbound">unbound regions</a> of the
<a href="chap32.html">sparse memory resources</a> by the decoder or encoder,
regardless if those are used as <a href="chap39.html#decoded-output-picture">Output</a>,
<a href="chap39.html#input-encode-picture">Input</a>, <a href="chap39.html#dpb">DPB</a> or
<a href="chap39.html#reconstructed-pictures">Reconstructed</a> <a href="chap39.html#video-picture-resources">Video
Picture Resources</a>, would render undefined results.
The <a href="chap32.html#VkPhysicalDeviceSparseProperties">VkPhysicalDeviceSparseProperties</a>::<code>residencyNonResidentStrict</code>
property reported by the implementation does not offer guarantees on the
behavior of decode or encode operations when it comes to accessing
<a href="chap32.html#sparsememory-accessing-unbound">unbound regions</a>.
However, both reads and writes are still considered safe and will not affect
other resources or populated regions of the image.</p>
</div>
<table id="video-session-dpb-slot-states-table" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 49. Video Session <a href="chap39.html#dpb-slot">DPB Slot</a> States</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 30%;">
<col style="width: 50%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap39.html#dpb-slot">DPB Slot</a> State</th>
<th class="tableblock halign-left valign-top">Moving to <a href="chap39.html#dpb-slot">DPB Slot</a> State</th>
<th class="tableblock halign-left valign-top">Exiting <a href="chap39.html#dpb-slot">DPB Slot</a> State</th>
<th class="tableblock halign-left valign-top">Retain Video Picture Resource Memory</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><strong>Picture Reference Unused</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">* Bind Device Memory;<br>
* Reset decode or encode state;<br>
* Invalidate, delete or unbind memory of a Picture Reference associated with Reference DPB Slot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* Activate Reference DPB Slot → <strong>Invalid Picture Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Controlled</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><strong>Invalid Picture Reference</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">* Activate Reference DPB Slot;<br>
* Unsuccessful video decode or encode operation;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* Start decode or encode operation with an active Reference DPB Slot target → <strong>Updating Picture Reference</strong>;<br>
* Updating a Picture Resource outside the decoder or encoder or deleting or removing the memory binding(sparse) → <strong>Picture Reference Unused</strong>;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Controlled</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><strong>Updating Picture Reference</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Start decode or encode operation with an active Reference DPB Slot target;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decode or encode operation with an active Reference DPB Slot target Completed Successfully → <strong>Valid Picture Reference</strong>;<br>
Unsuccessful video decode or encode operation → <strong>Invalid Picture Reference</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><strong>Valid Picture Reference</strong></p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Video decode or encode operation with an active Reference DPB Slot target Completed Successfully;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* Replace Reference DPB Slot → <strong>Invalid Picture Reference</strong>;<br>
* Invalidate, delete or unbind memory of a Picture Reference of the Reference DPB Slot → <strong>Picture Reference Unused</strong>;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
</tbody>
</table>
<div id="video-session-dpb-slot-states-flow-diagram" class="imageblock text-center">
<div class="content">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" width="1280" height="720" viewBox="0 0 1280 720.00001" id="svg6344" version="1.1">
  <defs id="defs6346">
    <marker orient="auto" refY="0.0" refX="0.0" id="marker5602" style="overflow:visible;">
      <path id="path5604" d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 z " style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1" transform="scale(0.4) rotate(180) translate(10,0)"></path>
    </marker>
    <marker style="overflow:visible;" id="marker12421" refX="0.0" refY="0.0" orient="auto">
      <path transform="scale(0.4) rotate(180) translate(10,0)" style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1" d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 z " id="path12423"></path>
    </marker>
    <marker style="overflow:visible;" id="marker11667" refX="0.0" refY="0.0" orient="auto">
      <path transform="scale(0.4) rotate(180) translate(10,0)" style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1" d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 z " id="path11669"></path>
    </marker>
    <marker style="overflow:visible;" id="marker11475" refX="0.0" refY="0.0" orient="auto">
      <path transform="scale(0.4) rotate(180) translate(10,0)" style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1" d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 z " id="path11477"></path>
    </marker>
    <marker orient="auto" refY="0.0" refX="0.0" id="Arrow1Mend" style="overflow:visible;">
      <path id="path8523" d="M 0.0,0.0 L 5.0,-5.0 L -12.5,0.0 L 5.0,5.0 L 0.0,0.0 z " style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1;fill:#000000;fill-opacity:1" transform="scale(0.4) rotate(180) translate(10,0)"></path>
    </marker>
    <marker orient="auto" refY="0" refX="0" id="Arrow1Mend-7" style="overflow:visible">
      <path id="path8523-9" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)"></path>
    </marker>
    <marker orient="auto" refY="0" refX="0" id="Arrow1Mend-02" style="overflow:visible">
      <path id="path8523-3" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)"></path>
    </marker>
    <marker orient="auto" refY="0" refX="0" id="Arrow1Mend-02-5" style="overflow:visible">
      <path id="path8523-3-9" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)"></path>
    </marker>
  </defs>
  <metadata id="metadata6349">
    <rdf:rdf>
      <cc:work rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc:type>
        <dc:title></dc:title>
      </cc:work>
    </rdf:rdf>
  </metadata>
  <g id="layer1" transform="translate(0,-332.36216)">
    <text xml:space="preserve" style="font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:25px;line-height:125%;font-family:sans-serif;-inkscape-font-specification:'sans-serif Italic';text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="499.45706" y="399.25888" id="text6896"><tspan x="499.35706" y="399.25888" id="tspan7012">New decode session Dpb</tspan></text>
    <text xml:space="preserve" style="font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:25px;line-height:125%;font-family:sans-serif;-inkscape-font-specification:'sans-serif Italic';text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="499.57913" y="539.25891" id="text6904"><tspan x="499.47913" y="539.25891" id="tspan7014">Unused picture reference</tspan></text>
    <text xml:space="preserve" style="font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:25px;line-height:125%;font-family:sans-serif;-inkscape-font-specification:'sans-serif Italic';text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="499.43875" y="679.25891" id="text6904-2"><tspan x="499.33875" y="679.25891" id="tspan7016">Invalid picture reference</tspan></text>
    <text xml:space="preserve" style="font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:25px;line-height:125%;font-family:sans-serif;-inkscape-font-specification:'sans-serif Italic';text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="499.57913" y="819.25891" id="text6904-0"><tspan x="499.47913" y="819.25891" id="tspan7018">Updating picture reference</tspan></text>
    <text xml:space="preserve" style="font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:25px;line-height:125%;font-family:sans-serif;-inkscape-font-specification:'sans-serif Italic';text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="500.5679" y="999.25891" id="text6904-3"><tspan x="500.4679" y="999.25891" id="tspan7020">Valid picture reference</tspan></text>
    <rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect7084" width="360" height="40" x="320.00027" y="372.36191"></rect>
    <rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect7086" width="360" height="40" x="320.00027" y="512.36194"></rect>
    <rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect7088" width="360" height="40" x="320.00027" y="652.36194"></rect>
    <rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect7090" width="360" height="40" x="320.00027" y="792.36194"></rect>
    <rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect7092" width="360" height="40" x="320.00027" y="972.36194"></rect>
    <path style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker-end:url(#Arrow1Mend);color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" d="m 500,412.36188 0,92" id="path8508"></path>
    <path style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker-end:url(#Arrow1Mend-7);color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" d="m 500,552.36188 0,92" id="path8508-2"></path>
    <path style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker-end:url(#Arrow1Mend-02);color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" d="m 500,692.36188 0,92" id="path8508-7"></path>
    <path style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker-end:url(#Arrow1Mend-02-5);color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" d="m 500,832.36188 0,131.99995" id="path8508-7-2"></path>
    <path style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker11475)" d="m 680,992.36189 340,0 0,-320 -332,0" id="path11431"></path>
    <path style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" d="m 680,812.36189 340,0" id="path11851"></path>
    <path style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker11667)" d="m 320,992.36189 -300,0 0,-459.99999 292,0" id="path11853"></path>
    <path style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" d="m 320,672.36189 -300,0" id="path11855"></path>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" x="499.14578" y="469.25885" id="text6990"><tspan x="499.04578" y="469.25885" id="tspan7022">Bind memory</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" x="500.20779" y="609.25891" id="text6994"><tspan id="tspan6996" x="500.10779" y="609.25891">Activate reference Dpb slot</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" x="499.07864" y="749.25891" id="text6998"><tspan id="tspan7000" x="498.97864" y="749.25891">Decode to a reference Dpb slot</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" x="500.46414" y="893.63391" id="text7048"><tspan id="tspan7050" x="500.36414" y="893.63391">On successful decode operation completion,</tspan><tspan x="500.36414" y="924.88391" id="tspan7052">set the slot as a reference picture with valid metadata</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="499.14578" y="469.25885" id="text6990-3"><tspan x="499.04578" y="469.25885" id="tspan7022-1">Bind memory</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="500.20779" y="609.25891" id="text6994-9"><tspan id="tspan6996-4" x="500.10779" y="609.25891">Activate reference Dpb slot</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="499.07864" y="749.25891" id="text6998-7"><tspan id="tspan7000-8" x="498.97864" y="749.25891">Decode to a reference Dpb slot</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="500.46414" y="893.63391" id="text7048-4"><tspan id="tspan7050-5" x="500.36414" y="893.63391">On successful decode operation completion,</tspan><tspan x="500.36414" y="924.88391" id="tspan7052-0">set the slot as a reference picture with valid metadata</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" x="167.46216" y="523.63391" id="text7054-3"><tspan id="tspan7056-6" x="167.36215" y="523.63391">Deactivate</tspan><tspan x="167.36215" y="554.88391" id="tspan7070-1">reference Dpb slot</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" x="863.51117" y="803.63391" id="text7058-0"><tspan id="tspan7060-6" x="863.41119" y="803.63391">Unsuccessful video</tspan><tspan x="863.41119" y="834.88391" id="tspan7074-3">decode operation</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" x="863.09003" y="983.63397" id="text7062-2"><tspan id="tspan7064-0" x="862.99005" y="983.63397">Invalidate</tspan><tspan x="862.99005" y="1014.884" id="tspan7068-6">reference Dpb slot</tspan></text>
    <path style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:12, 12;stroke-dashoffset:0;stroke-opacity:1" d="m 2,572.36216 1268,0" id="path5364"></path>
    <g id="g5966" transform="translate(9.9999974,-20.000007)">
      <path id="path5366" d="m 849.99971,592.36217 0,60" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker5602)"></path>
      <path id="path5368" d="m 849.99971,592.36217 0,-60" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker12421)"></path>
    </g>
    <g id="g6010" transform="translate(0,-13.103047)">
      <text id="text5810" y="552.36218" x="1074" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan id="tspan5814" y="552.36218" x="1073.9">Deactivated reference Dpb slot</tspan></text>
      <text id="text5816" y="632.36218" x="1074" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="632.36218" x="1073.9" id="tspan5818">Activated reference Dpb slot</tspan></text>
    </g>
    <text xml:space="preserve" style="font-style:italic;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:25px;line-height:125%;font-family:sans-serif;-inkscape-font-specification:'sans-serif Italic';text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="1174" y="747.93225" id="text6016"><tspan id="tspan6018" x="1173.9" y="747.93225">The picture</tspan><tspan x="1173.9" y="779.18225" id="tspan6020">resource's</tspan><tspan x="1173.9" y="810.43225" id="tspan6024">memory must</tspan><tspan x="1173.9" y="841.68225" id="tspan6028">be resident</tspan><tspan x="1173.9" y="872.93225" id="tspan6030">within these</tspan><tspan x="1173.9" y="904.18225" id="tspan6032">states of</tspan><tspan x="1173.9" y="935.43225" id="tspan6034">the slot</tspan></text>
    <g id="g6062" transform="translate(0,-20.000007)">
      <path id="path6040" d="m 1040,692.36216 c 40,0 0,160 40,160" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></path>
      <path id="path6040-6" d="m 1040,1012.3622 c 40,0 0,-160.00004 40,-160.00004" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"></path>
    </g>
  </g>
</svg>
</div>
<div class="title">Figure 27. DPB Slot States Flow Diagram</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="video-physical-device-capabilities"><a class="anchor" href="chap39.html#video-physical-device-capabilities"></a>39.3. Video Physical Device Capabilities</h3>
<div class="sect3">
<h4 id="supported-video-codec-operations-enumeration"><a class="anchor" href="chap39.html#supported-video-codec-operations-enumeration"></a>39.3.1. Supported Video Codec Operations Enumeration</h4>
<div class="paragraph">
<p>The structure <a href="chap39.html#VkVideoQueueFamilyProperties2KHR">VkVideoQueueFamilyProperties2KHR</a> <strong class="purple">may</strong> be chained to
<a href="chap5.html#VkQueueFamilyProperties2">VkQueueFamilyProperties2</a> when calling
<a href="chap5.html#vkGetPhysicalDeviceQueueFamilyProperties2">vkGetPhysicalDeviceQueueFamilyProperties2</a> to retrieve the video codec
operations supported for the physical device queue family index.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoQueueFamilyProperties2KHR">VkVideoQueueFamilyProperties2KHR</a> structure is defined as:</p>
</div>
<div id="VkVideoQueueFamilyProperties2KHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoQueueFamilyProperties2KHR {
    VkStructureType                  sType;
    <span class="directive">void</span>*                            pNext;
    VkVideoCodecOperationFlagsKHR    videoCodecOperations;
} VkVideoQueueFamilyProperties2KHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>videoCodecOperations</code> is a bitmask of
<a href="chap39.html#VkVideoCodecOperationFlagBitsKHR">VkVideoCodecOperationFlagBitsKHR</a> specifying supported video codec
operation(s).</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoQueueFamilyProperties2KHR-sType-sType" href="chap39.html#VUID-VkVideoQueueFamilyProperties2KHR-sType-sType"></a> <span class="vuid">VUID-VkVideoQueueFamilyProperties2KHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_QUEUE_FAMILY_PROPERTIES_2_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoQueueFamilyProperties2KHR-videoCodecOperations-parameter" href="chap39.html#VUID-VkVideoQueueFamilyProperties2KHR-videoCodecOperations-parameter"></a> <span class="vuid">VUID-VkVideoQueueFamilyProperties2KHR-videoCodecOperations-parameter</span><br>
 <code>videoCodecOperations</code> <strong class="purple">must</strong> be a valid combination of <a href="chap39.html#VkVideoCodecOperationFlagBitsKHR">VkVideoCodecOperationFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoQueueFamilyProperties2KHR-videoCodecOperations-requiredbitmask" href="chap39.html#VUID-VkVideoQueueFamilyProperties2KHR-videoCodecOperations-requiredbitmask"></a> <span class="vuid">VUID-VkVideoQueueFamilyProperties2KHR-videoCodecOperations-requiredbitmask</span><br>
 <code>videoCodecOperations</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The codec operations are defined with the
<a href="chap39.html#VkVideoCodecOperationFlagBitsKHR">VkVideoCodecOperationFlagBitsKHR</a> enum:</p>
</div>
<div id="VkVideoCodecOperationFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkVideoCodecOperationFlagBitsKHR {
    VK_VIDEO_CODEC_OPERATION_INVALID_BIT_KHR = <span class="integer">0</span>,
<span class="preprocessor">#ifdef</span> VK_ENABLE_BETA_EXTENSIONS
  <span class="comment">// Provided by VK_EXT_video_encode_h264</span>
    VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT = <span class="hex">0x00010000</span>,
<span class="preprocessor">#endif</span>
<span class="preprocessor">#ifdef</span> VK_ENABLE_BETA_EXTENSIONS
  <span class="comment">// Provided by VK_EXT_video_decode_h264</span>
    VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_EXT = <span class="hex">0x00000001</span>,
<span class="preprocessor">#endif</span>
<span class="preprocessor">#ifdef</span> VK_ENABLE_BETA_EXTENSIONS
  <span class="comment">// Provided by VK_EXT_video_decode_h265</span>
    VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_EXT = <span class="hex">0x00000002</span>,
<span class="preprocessor">#endif</span>
} VkVideoCodecOperationFlagBitsKHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each decode or encode codec-specific extension extends this enumeration with
the appropriate bit corresponding to the extension’s codec operation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_CODEC_OPERATION_INVALID_BIT_KHR</code> - No video operations are
supported for this queue family.</p>
</li>
<li>
<p><code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code> - H.264 video encode
operations are supported by this queue family.</p>
</li>
<li>
<p><code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_EXT</code> - H.264 video decode
operations are supported by this queue family.</p>
</li>
<li>
<p><code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_EXT</code> - H.265 video decode
operations are supported by this queue family.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoCodecOperationFlagsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> VkFlags VkVideoCodecOperationFlagsKHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap39.html#VkVideoCodecOperationFlagsKHR">VkVideoCodecOperationFlagsKHR</a> is a bitmask type for setting a mask of
zero or more <a href="chap39.html#VkVideoCodecOperationFlagBitsKHR">VkVideoCodecOperationFlagBitsKHR</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="video-profiles"><a class="anchor" href="chap39.html#video-profiles"></a>39.3.2. Video Profiles</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>A video profile is defined by <a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a> structure as:</p>
</div>
<div id="VkVideoProfileKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoProfileKHR {
    VkStructureType                     sType;
    <span class="directive">void</span>*                               pNext;
    VkVideoCodecOperationFlagBitsKHR    videoCodecOperation;
    VkVideoChromaSubsamplingFlagsKHR    chromaSubsampling;
    VkVideoComponentBitDepthFlagsKHR    lumaBitDepth;
    VkVideoComponentBitDepthFlagsKHR    chromaBitDepth;
} VkVideoProfileKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>videoCodecOperation</code> is a <a href="chap39.html#VkVideoCodecOperationFlagBitsKHR">VkVideoCodecOperationFlagBitsKHR</a>
value specifying a video codec operation.</p>
</li>
<li>
<p><code>chromaSubsampling</code> is a bitmask of
<a href="chap39.html#VkVideoChromaSubsamplingFlagBitsKHR">VkVideoChromaSubsamplingFlagBitsKHR</a> specifying video chroma
subsampling information.</p>
</li>
<li>
<p><code>lumaBitDepth</code> is a bitmask of
<a href="chap39.html#VkVideoComponentBitDepthFlagBitsKHR">VkVideoComponentBitDepthFlagBitsKHR</a> specifying video luma bit
depth information.</p>
</li>
<li>
<p><code>chromaBitDepth</code> is a bitmask of
<a href="chap39.html#VkVideoComponentBitDepthFlagBitsKHR">VkVideoComponentBitDepthFlagBitsKHR</a> specifying video chroma bit
depth information.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoProfileKHR-sType-sType" href="chap39.html#VUID-VkVideoProfileKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoProfileKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_PROFILE_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoProfileKHR-videoCodecOperation-parameter" href="chap39.html#VUID-VkVideoProfileKHR-videoCodecOperation-parameter"></a> <span class="vuid">VUID-VkVideoProfileKHR-videoCodecOperation-parameter</span><br>
 <code>videoCodecOperation</code> <strong class="purple">must</strong> be a valid <a href="chap39.html#VkVideoCodecOperationFlagBitsKHR">VkVideoCodecOperationFlagBitsKHR</a> value</p>
</li>
<li>
<p><a id="VUID-VkVideoProfileKHR-chromaSubsampling-parameter" href="chap39.html#VUID-VkVideoProfileKHR-chromaSubsampling-parameter"></a> <span class="vuid">VUID-VkVideoProfileKHR-chromaSubsampling-parameter</span><br>
 <code>chromaSubsampling</code> <strong class="purple">must</strong> be a valid combination of <a href="chap39.html#VkVideoChromaSubsamplingFlagBitsKHR">VkVideoChromaSubsamplingFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoProfileKHR-chromaSubsampling-requiredbitmask" href="chap39.html#VUID-VkVideoProfileKHR-chromaSubsampling-requiredbitmask"></a> <span class="vuid">VUID-VkVideoProfileKHR-chromaSubsampling-requiredbitmask</span><br>
 <code>chromaSubsampling</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoProfileKHR-lumaBitDepth-parameter" href="chap39.html#VUID-VkVideoProfileKHR-lumaBitDepth-parameter"></a> <span class="vuid">VUID-VkVideoProfileKHR-lumaBitDepth-parameter</span><br>
 <code>lumaBitDepth</code> <strong class="purple">must</strong> be a valid combination of <a href="chap39.html#VkVideoComponentBitDepthFlagBitsKHR">VkVideoComponentBitDepthFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoProfileKHR-lumaBitDepth-requiredbitmask" href="chap39.html#VUID-VkVideoProfileKHR-lumaBitDepth-requiredbitmask"></a> <span class="vuid">VUID-VkVideoProfileKHR-lumaBitDepth-requiredbitmask</span><br>
 <code>lumaBitDepth</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoProfileKHR-chromaBitDepth-parameter" href="chap39.html#VUID-VkVideoProfileKHR-chromaBitDepth-parameter"></a> <span class="vuid">VUID-VkVideoProfileKHR-chromaBitDepth-parameter</span><br>
 <code>chromaBitDepth</code> <strong class="purple">must</strong> be a valid combination of <a href="chap39.html#VkVideoComponentBitDepthFlagBitsKHR">VkVideoComponentBitDepthFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoProfileKHR-chromaBitDepth-requiredbitmask" href="chap39.html#VUID-VkVideoProfileKHR-chromaBitDepth-requiredbitmask"></a> <span class="vuid">VUID-VkVideoProfileKHR-chromaBitDepth-requiredbitmask</span><br>
 <code>chromaBitDepth</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The video format chroma subsampling is defined with the following enums:</p>
</div>
<div id="VkVideoChromaSubsamplingFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkVideoChromaSubsamplingFlagBitsKHR {
    VK_VIDEO_CHROMA_SUBSAMPLING_INVALID_BIT_KHR = <span class="integer">0</span>,
    VK_VIDEO_CHROMA_SUBSAMPLING_MONOCHROME_BIT_KHR = <span class="hex">0x00000001</span>,
    VK_VIDEO_CHROMA_SUBSAMPLING_420_BIT_KHR = <span class="hex">0x00000002</span>,
    VK_VIDEO_CHROMA_SUBSAMPLING_422_BIT_KHR = <span class="hex">0x00000004</span>,
    VK_VIDEO_CHROMA_SUBSAMPLING_444_BIT_KHR = <span class="hex">0x00000008</span>,
} VkVideoChromaSubsamplingFlagBitsKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_CHROMA_SUBSAMPLING_MONOCHROME_BIT_KHR</code> - the format is
monochrome.</p>
</li>
<li>
<p><code>VK_VIDEO_CHROMA_SUBSAMPLING_420_BIT_KHR</code> - the format is 4:2:0
chroma subsampled.
The two chroma components are each subsampled at a factor of 2 both
horizontally and vertically.</p>
</li>
<li>
<p><code>VK_VIDEO_CHROMA_SUBSAMPLING_422_BIT_KHR</code> - the format is 4:2:2
chroma subsampled.
The two chroma components are sampled at half the sample rate of luma.
The horizontal chroma resolution is halved.</p>
</li>
<li>
<p><code>VK_VIDEO_CHROMA_SUBSAMPLING_444_BIT_KHR</code> - the format is 4:4:4
chroma sampled.
Each of the three YCbCr components have the same sample rate, thus there
is no chroma subsampling.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoChromaSubsamplingFlagsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> VkFlags VkVideoChromaSubsamplingFlagsKHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap39.html#VkVideoChromaSubsamplingFlagsKHR">VkVideoChromaSubsamplingFlagsKHR</a> is a bitmask type for setting a mask
of zero or more <a href="chap39.html#VkVideoChromaSubsamplingFlagBitsKHR">VkVideoChromaSubsamplingFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The video format component bit depth is defined with the following enums:</p>
</div>
<div id="VkVideoComponentBitDepthFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkVideoComponentBitDepthFlagBitsKHR {
    VK_VIDEO_COMPONENT_BIT_DEPTH_INVALID_KHR = <span class="integer">0</span>,
    VK_VIDEO_COMPONENT_BIT_DEPTH_8_BIT_KHR = <span class="hex">0x00000001</span>,
    VK_VIDEO_COMPONENT_BIT_DEPTH_10_BIT_KHR = <span class="hex">0x00000004</span>,
    VK_VIDEO_COMPONENT_BIT_DEPTH_12_BIT_KHR = <span class="hex">0x00000010</span>,
} VkVideoComponentBitDepthFlagBitsKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_COMPONENT_BIT_DEPTH_8_BIT_KHR</code> - the format component bit
depth is 8 bits.</p>
</li>
<li>
<p><code>VK_VIDEO_COMPONENT_BIT_DEPTH_10_BIT_KHR</code> - the format component bit
depth is 10 bits.</p>
</li>
<li>
<p><code>VK_VIDEO_COMPONENT_BIT_DEPTH_12_BIT_KHR</code> - the format component bit
depth is 12 bits.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoComponentBitDepthFlagsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> VkFlags VkVideoComponentBitDepthFlagsKHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap39.html#VkVideoComponentBitDepthFlagsKHR">VkVideoComponentBitDepthFlagsKHR</a> is a bitmask type for setting a mask
of zero or more <a href="chap39.html#VkVideoComponentBitDepthFlagBitsKHR">VkVideoComponentBitDepthFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>A video profile is provided when querying capabilities or image formats for
video using <a href="chap39.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> or
<a href="chap39.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a>, respectively.
A video profile is also provided when creating resources (images, video
sessions, etc.) used by video queues.
Each instance of <a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a> <strong class="purple">must</strong> chain a codec-operation
specific video profile extension structure, corresponding to the
codec-operation specified in
<a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a>::<code>videoCodecOperation</code>.
Additional information is provided in each codec-operation-specific video
extension.</p>
</div>
</div>
<div class="sect3">
<h4 id="supported-video-decode-or-encode-capabilities"><a class="anchor" href="chap39.html#supported-video-decode-or-encode-capabilities"></a>39.3.3. Supported Video Decode or Encode Capabilities</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To query video decode or encode capabilities for a specific codec, call:</p>
</div>
<div id="vkGetPhysicalDeviceVideoCapabilitiesKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
VkResult vkGetPhysicalDeviceVideoCapabilitiesKHR(
    VkPhysicalDevice                            physicalDevice,
    <span class="directive">const</span> VkVideoProfileKHR*                    pVideoProfile,
    VkVideoCapabilitiesKHR*                     pCapabilities);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>physicalDevice</code> is the physical device whose video decode or encode
capabilities will be queried.</p>
</li>
<li>
<p><code>pVideoProfile</code> is a pointer to a <a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a> structure
with a chained codec-operation specific video profile structure.</p>
</li>
<li>
<p><code>pCapabilities</code> is a pointer to a <a href="chap39.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>
structure in which the capabilities are returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-physicalDevice-parameter" href="chap39.html#VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-physicalDevice-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-physicalDevice-parameter</span><br>
 <code>physicalDevice</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkPhysicalDevice">VkPhysicalDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-parameter" href="chap39.html#VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pVideoProfile-parameter</span><br>
 <code>pVideoProfile</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pCapabilities-parameter" href="chap39.html#VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pCapabilities-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoCapabilitiesKHR-pCapabilities-parameter</span><br>
 <code>pCapabilities</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap39.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_EXTENSION_NOT_PRESENT</code></p>
</li>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_FEATURE_NOT_PRESENT</code></p>
</li>
<li>
<p><code>VK_ERROR_FORMAT_NOT_SUPPORTED</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If <code>pVideoProfile</code> and chained codec-operation specific profile is not
supported, <code>VK_ERROR_FORMAT_NOT_SUPPORTED</code> is returned.</p>
</div>
<div class="paragraph">
<p>Otherwise, the implementation will fill <code>pCapabilities</code> with
capabilities associated with this video profile.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoCapabilitiesKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoCapabilitiesKHR {
    VkStructureType              sType;
    <span class="directive">void</span>*                        pNext;
    VkVideoCapabilityFlagsKHR    capabilityFlags;
    VkDeviceSize                 minBitstreamBufferOffsetAlignment;
    VkDeviceSize                 minBitstreamBufferSizeAlignment;
    VkExtent2D                   videoPictureExtentGranularity;
    VkExtent2D                   minExtent;
    VkExtent2D                   maxExtent;
    uint32_t                     maxReferencePicturesSlotsCount;
    uint32_t                     maxReferencePicturesActiveCount;
} VkVideoCapabilitiesKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>capabilityFlags</code> is a bitmask of <a href="chap39.html#VkVideoCapabilityFlagBitsKHR">VkVideoCapabilityFlagBitsKHR</a>
specifying capability flags.</p>
</li>
<li>
<p><code>minBitstreamBufferOffsetAlignment</code> is the minimum alignment for the
input or output bitstream buffer offset.</p>
</li>
<li>
<p><code>minBitstreamBufferSizeAlignment</code> is the minimum alignment for the
input or output bitstream buffer size</p>
</li>
<li>
<p><code>videoPictureExtentGranularity</code> is the minimum size alignment of the
extent with the required padding for the decoded or encoded video
images.</p>
</li>
<li>
<p><code>minExtent</code> is the minimum width and height of the decoded or
encoded video.</p>
</li>
<li>
<p><code>maxExtent</code> is the maximum width and height of the decoded or
encoded video.</p>
</li>
<li>
<p><code>maxReferencePicturesSlotsCount</code> is the maximum number of DPB Slots
supported by the implementation for a single video session instance.</p>
</li>
<li>
<p><code>maxReferencePicturesActiveCount</code> is the maximum slots that can be
used as <a href="chap39.html#reference-picture">Reference Pictures</a> with a single decode or
encode operation.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoCapabilitiesKHR-sType-sType" href="chap39.html#VUID-VkVideoCapabilitiesKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoCapabilitiesKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_CAPABILITIES_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoCapabilitiesKHR-pNext-pNext" href="chap39.html#VUID-VkVideoCapabilitiesKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoCapabilitiesKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap39.html#VkVideoDecodeH264CapabilitiesEXT">VkVideoDecodeH264CapabilitiesEXT</a>, <a href="chap39.html#VkVideoDecodeH265CapabilitiesEXT">VkVideoDecodeH265CapabilitiesEXT</a>, or <a href="chap39.html#VkVideoEncodeH264CapabilitiesEXT">VkVideoEncodeH264CapabilitiesEXT</a></p>
</li>
<li>
<p><a id="VUID-VkVideoCapabilitiesKHR-sType-unique" href="chap39.html#VUID-VkVideoCapabilitiesKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoCapabilitiesKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> flags are defined with the following
enumeration:</p>
</div>
<div id="VkVideoCapabilityFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkVideoCapabilityFlagBitsKHR {
    VK_VIDEO_CAPABILITY_PROTECTED_CONTENT_BIT_KHR = <span class="hex">0x00000001</span>,
    VK_VIDEO_CAPABILITY_SEPARATE_REFERENCE_IMAGES_BIT_KHR = <span class="hex">0x00000002</span>,
} VkVideoCapabilityFlagBitsKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_CAPABILITY_PROTECTED_CONTENT_BIT_KHR</code> - the decode or
encode session supports protected content.</p>
</li>
<li>
<p><code>VK_VIDEO_CAPABILITY_SEPARATE_REFERENCE_IMAGES_BIT_KHR</code> - the DPB or
Reconstructed Video Picture Resources for the video session <strong class="purple">may</strong> be
created as a separate <a href="chap12.html#VkImage">VkImage</a> for each DPB picture.
If not supported, the DPB <strong class="purple">must</strong> be created as single multi-layered image
where each layer represents one of the DPB Video Picture Resources.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoCapabilityFlagsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> VkFlags VkVideoCapabilityFlagsKHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap39.html#VkVideoCapabilityFlagsKHR">VkVideoCapabilityFlagsKHR</a> is a bitmask type for setting a mask of zero
or more <a href="chap39.html#VkVideoCapabilityFlagBitsKHR">VkVideoCapabilityFlagBitsKHR</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="supported-video-input-output-dpb-formats-enumeration"><a class="anchor" href="chap39.html#supported-video-input-output-dpb-formats-enumeration"></a>39.3.4. Enumeration of Supported Video Output, Input and DPB Formats</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To enumerate the supported output, input and DPB image formats for a
specific codec operation and video profile, call:</p>
</div>
<div id="vkGetPhysicalDeviceVideoFormatPropertiesKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
VkResult vkGetPhysicalDeviceVideoFormatPropertiesKHR(
    VkPhysicalDevice                            physicalDevice,
    <span class="directive">const</span> VkPhysicalDeviceVideoFormatInfoKHR*   pVideoFormatInfo,
    uint32_t*                                   pVideoFormatPropertyCount,
    VkVideoFormatPropertiesKHR*                 pVideoFormatProperties);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>physicalDevice</code> is the physical device being queried.</p>
</li>
<li>
<p><code>pVideoFormatInfo</code> is a pointer to a
<a href="chap39.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a> structure specifying the codec
and video profile for which information is returned.</p>
</li>
<li>
<p><code>pVideoFormatPropertyCount</code> is a pointer to an integer related to
the number of video format properties available or queried, as described
below.</p>
</li>
<li>
<p><code>pVideoFormatProperties</code> is a pointer to an array of
<a href="chap39.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a> structures in which supported formats
are returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>pVideoFormatProperties</code> is <code>NULL</code>, then the number of video format
properties supported for the given <code>physicalDevice</code> is returned in
<code>pVideoFormatPropertyCount</code>.
Otherwise, <code>pVideoFormatPropertyCount</code> <strong class="purple">must</strong> point to a variable set by
the user to the number of elements in the <code>pVideoFormatProperties</code>
array, and on return the variable is overwritten with the number of values
actually written to <code>pVideoFormatProperties</code>.
If the value of <code>pVideoFormatPropertyCount</code> is less than the number of
video format properties supported, at most <code>pVideoFormatPropertyCount</code>
values will be written to <code>pVideoFormatProperties</code>, and
<code>VK_INCOMPLETE</code> will be returned instead of <code>VK_SUCCESS</code>, to
indicate that not all the available values were returned.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-imageUsage-04844" href="chap39.html#VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-imageUsage-04844"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-imageUsage-04844</span><br>

The <code>imageUsage</code> enum of <a href="chap39.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a>
<strong class="purple">must</strong> contain at least one of the following video image usage bit(s):
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code>,
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code>,
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code>, or
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note:</div>
<div class="paragraph">
<p>For most use cases, only decode or encode related usage flags are going to
be specified.
For a use case such as transcode, if the image were to be shared between
decode and encode session(s), then both decode and encode related usage
flags <strong class="purple">can</strong> be set.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-physicalDevice-parameter" href="chap39.html#VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-physicalDevice-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-physicalDevice-parameter</span><br>
 <code>physicalDevice</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkPhysicalDevice">VkPhysicalDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatInfo-parameter" href="chap39.html#VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatInfo-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatInfo-parameter</span><br>
 <code>pVideoFormatInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap39.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatPropertyCount-parameter" href="chap39.html#VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatPropertyCount-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatPropertyCount-parameter</span><br>
 <code>pVideoFormatPropertyCount</code> <strong class="purple">must</strong> be a valid pointer to a <code>uint32_t</code> value</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatProperties-parameter" href="chap39.html#VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatProperties-parameter"></a> <span class="vuid">VUID-vkGetPhysicalDeviceVideoFormatPropertiesKHR-pVideoFormatProperties-parameter</span><br>
 If the value referenced by <code>pVideoFormatPropertyCount</code> is not <code>0</code>, and <code>pVideoFormatProperties</code> is not <code>NULL</code>, <code>pVideoFormatProperties</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>pVideoFormatPropertyCount</code> <a href="chap39.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
<li>
<p><code>VK_INCOMPLETE</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_EXTENSION_NOT_PRESENT</code></p>
</li>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_FORMAT_NOT_SUPPORTED</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a> input structure is defined as:</p>
</div>
<div id="VkPhysicalDeviceVideoFormatInfoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkPhysicalDeviceVideoFormatInfoKHR {
    VkStructureType              sType;
    <span class="directive">void</span>*                        pNext;
    VkImageUsageFlags            imageUsage;
    <span class="directive">const</span> VkVideoProfilesKHR*    pVideoProfiles;
} VkPhysicalDeviceVideoFormatInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>imageUsage</code> is a bitmask of <a href="chap12.html#VkImageUsageFlagBits">VkImageUsageFlagBits</a> specifying
intended video image usages.</p>
</li>
<li>
<p><code>pVideoProfiles</code> is a pointer to a <a href="chap39.html#VkVideoProfilesKHR">VkVideoProfilesKHR</a>
structure providing the video profile(s) of video session(s) that will
use the image.
For most use cases, the image is used by a single video session and a
single video profile is provided.
For a use case such as transcode, where a decode session output image
<strong class="purple">may</strong> be used as encode input for one or more encode sessions, multiple
video profiles representing the video sessions that will share the image
<strong class="purple">may</strong> be provided.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkPhysicalDeviceVideoFormatInfoKHR-sType-sType" href="chap39.html#VUID-VkPhysicalDeviceVideoFormatInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkPhysicalDeviceVideoFormatInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_PHYSICAL_DEVICE_VIDEO_FORMAT_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkPhysicalDeviceVideoFormatInfoKHR-pNext-pNext" href="chap39.html#VUID-VkPhysicalDeviceVideoFormatInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkPhysicalDeviceVideoFormatInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoProfilesKHR">VkVideoProfilesKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoProfilesKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoProfilesKHR {
    VkStructureType             sType;
    <span class="directive">void</span>*                       pNext;
    uint32_t                    profileCount;
    <span class="directive">const</span> VkVideoProfileKHR*    pProfiles;
} VkVideoProfilesKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>profileCount</code> is an integer which holds the number of video
profiles included in <code>pProfiles</code>.</p>
</li>
<li>
<p><code>pProfiles</code> is a pointer to an array of <a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a>
structures.
Each <a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a> structure <strong class="purple">must</strong> chain the corresponding
codec-operation specific extension video profile structure.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoProfilesKHR-sType-sType" href="chap39.html#VUID-VkVideoProfilesKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoProfilesKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_PROFILES_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoProfilesKHR-pProfiles-parameter" href="chap39.html#VUID-VkVideoProfilesKHR-pProfiles-parameter"></a> <span class="vuid">VUID-VkVideoProfilesKHR-pProfiles-parameter</span><br>
 <code>pProfiles</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a> output structure for
<a href="chap39.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> is defined as:</p>
</div>
<div id="VkVideoFormatPropertiesKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoFormatPropertiesKHR {
    VkStructureType    sType;
    <span class="directive">void</span>*              pNext;
    VkFormat           format;
} VkVideoFormatPropertiesKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>format</code> is one of the supported formats reported by the
implementation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code>pVideoProfiles</code> provided in input structure
<code>pVideoFormatInfo</code> are not supported,
<code>VK_ERROR_FORMAT_NOT_SUPPORTED</code> is returned.
If the implementation requires an opaque video decode or encode DPB, then
when querying with the corresponding video decode or encode DPB image usage
in <code>imageUsage</code>, only one image format is returned:
<code>VK_FORMAT_UNDEFINED</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoFormatPropertiesKHR-sType-sType" href="chap39.html#VUID-VkVideoFormatPropertiesKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoFormatPropertiesKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_FORMAT_PROPERTIES_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoFormatPropertiesKHR-pNext-pNext" href="chap39.html#VUID-VkVideoFormatPropertiesKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoFormatPropertiesKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Before creating an image, the application should obtain the supported image
creation parameters by querying with
<a href="chap43.html#vkGetPhysicalDeviceFormatProperties2">vkGetPhysicalDeviceFormatProperties2</a> or
<a href="chap44.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a> using one of the reported
<code>pImageFormats</code> and adding <a href="chap39.html#VkVideoProfilesKHR">VkVideoProfilesKHR</a> to the <code>pNext</code>
chain of <a href="chap43.html#VkFormatProperties2">VkFormatProperties2</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="video-session-objects"><a class="anchor" href="chap39.html#video-session-objects"></a>39.4. Video Session Objects</h3>
<div class="sect3">
<h4 id="video-session"><a class="anchor" href="chap39.html#video-session"></a>39.4.1. Video Session</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Video session objects are abstracted and represented by
<a href="chap39.html#VkVideoSessionKHR">VkVideoSessionKHR</a> handles:</p>
</div>
<div id="VkVideoSessionKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
VK_DEFINE_NON_DISPATCHABLE_HANDLE(VkVideoSessionKHR)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="video-session-creation"><a class="anchor" href="chap39.html#video-session-creation"></a>Creating a Video Session</h5>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create a video session object, call:</p>
</div>
<div id="vkCreateVideoSessionKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
VkResult vkCreateVideoSessionKHR(
    VkDevice                                    device,
    <span class="directive">const</span> VkVideoSessionCreateInfoKHR*          pCreateInfo,
    <span class="directive">const</span> VkAllocationCallbacks*                pAllocator,
    VkVideoSessionKHR*                          pVideoSession);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the decode or encode
session object.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="chap39.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>
structure containing parameters specifying the creation of the decode or
encode session.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pVideoSession</code> is a pointer to a <a href="chap39.html#VkVideoSessionKHR">VkVideoSessionKHR</a> structure
specifying the decode or encode video session object which will be
created by this function when it returns <code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateVideoSessionKHR-device-parameter" href="chap39.html#VUID-vkCreateVideoSessionKHR-device-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateVideoSessionKHR-pCreateInfo-parameter" href="chap39.html#VUID-vkCreateVideoSessionKHR-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionKHR-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap39.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateVideoSessionKHR-pAllocator-parameter" href="chap39.html#VUID-vkCreateVideoSessionKHR-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionKHR-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateVideoSessionKHR-pVideoSession-parameter" href="chap39.html#VUID-vkCreateVideoSessionKHR-pVideoSession-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionKHR-pVideoSession-parameter</span><br>
 <code>pVideoSession</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap39.html#VkVideoSessionKHR">VkVideoSessionKHR</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_INCOMPATIBLE_DRIVER</code></p>
</li>
<li>
<p><code>VK_ERROR_FEATURE_NOT_PRESENT</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoSessionCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoSessionCreateInfoKHR {
    VkStructureType                 sType;
    <span class="directive">const</span> <span class="directive">void</span>*                     pNext;
    uint32_t                        queueFamilyIndex;
    VkVideoSessionCreateFlagsKHR    flags;
    <span class="directive">const</span> VkVideoProfileKHR*        pVideoProfile;
    VkFormat                        pictureFormat;
    VkExtent2D                      maxCodedExtent;
    VkFormat                        referencePicturesFormat;
    uint32_t                        maxReferencePicturesSlotsCount;
    uint32_t                        maxReferencePicturesActiveCount;
} VkVideoSessionCreateInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>queueFamilyIndex</code> is the queue family of the created video session.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap39.html#VkVideoSessionCreateFlagBitsKHR">VkVideoSessionCreateFlagBitsKHR</a>
specifying creation flags.</p>
</li>
<li>
<p><code>pVideoProfile</code> is a pointer to a <a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a> structure.</p>
</li>
<li>
<p><code>pictureFormat</code> is the format of the <a href="chap12.html#resources-image-views">image
views</a> representing decoded <a href="chap39.html#decoded-output-picture">Output</a> or
encoded <a href="chap39.html#input-encode-picture">Input</a> pictures.</p>
</li>
<li>
<p><code>maxCodedExtent</code> is the maximum width and height of the coded
pictures that this instance will be able to support.</p>
</li>
<li>
<p><code>referencePicturesFormat</code> is the format of the <a href="chap39.html#dpb">DPB</a> image
views representing the <a href="chap39.html#reference-picture">Reference Pictures</a>.</p>
</li>
<li>
<p><code>maxReferencePicturesSlotsCount</code> is the maximum number of
<a href="chap39.html#dpb-slot">DPB Slots</a> that can be activated with associated
<a href="chap39.html#video-picture-resources">Video Picture Resources</a> for the created
video session.</p>
</li>
<li>
<p><code>maxReferencePicturesActiveCount</code> is the maximum number of active
<a href="chap39.html#dpb-slot">DPB Slots</a> that can be used as Dpb or Reconstructed
<a href="chap39.html#reference-picture">Reference Pictures</a> within a single decode or
encode operation for the created video session.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pVideoProfile-04845" href="chap39.html#VUID-VkVideoSessionCreateInfoKHR-pVideoProfile-04845"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pVideoProfile-04845</span><br>

<code>pVideoProfile</code> <strong class="purple">must</strong> be a pointer to a valid
<a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a> structure whose <code>pNext</code> chain <strong class="purple">must</strong> include
a valid codec-specific profile structure.</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-maxReferencePicturesSlotsCount-04846" href="chap39.html#VUID-VkVideoSessionCreateInfoKHR-maxReferencePicturesSlotsCount-04846"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-maxReferencePicturesSlotsCount-04846</span><br>

If <a href="chap39.html#reference-picture">Reference Pictures</a> are required for use with
the created video session, the <code>maxReferencePicturesSlotsCount</code>
<strong class="purple">must</strong> be set to a value bigger than <code>0</code>.</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-maxReferencePicturesSlotsCount-04847" href="chap39.html#VUID-VkVideoSessionCreateInfoKHR-maxReferencePicturesSlotsCount-04847"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-maxReferencePicturesSlotsCount-04847</span><br>

<code>maxReferencePicturesSlotsCount</code> <strong class="purple">cannot</strong> exceed the implementation
reported
<a href="chap39.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>maxReferencePicturesSlotsCount</code>.</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-maxReferencePicturesActiveCount-04848" href="chap39.html#VUID-VkVideoSessionCreateInfoKHR-maxReferencePicturesActiveCount-04848"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-maxReferencePicturesActiveCount-04848</span><br>

If <a href="chap39.html#reference-picture">Reference Pictures</a> are required for use with
the created video session, the <code>maxReferencePicturesActiveCount</code>
<strong class="purple">must</strong> be set to a value bigger than <code>0</code>.</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-maxReferencePicturesActiveCount-04849" href="chap39.html#VUID-VkVideoSessionCreateInfoKHR-maxReferencePicturesActiveCount-04849"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-maxReferencePicturesActiveCount-04849</span><br>

<code>maxReferencePicturesActiveCount</code> <strong class="purple">cannot</strong> exceed the implementation
reported
<a href="chap39.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>maxReferencePicturesActiveCount</code>.</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-maxReferencePicturesActiveCount-04850" href="chap39.html#VUID-VkVideoSessionCreateInfoKHR-maxReferencePicturesActiveCount-04850"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-maxReferencePicturesActiveCount-04850</span><br>

<code>maxReferencePicturesActiveCount</code> <strong class="purple">cannot</strong> exceed the
<code>maxReferencePicturesSlotsCount</code>.</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-maxCodedExtent-04851" href="chap39.html#VUID-VkVideoSessionCreateInfoKHR-maxCodedExtent-04851"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-maxCodedExtent-04851</span><br>

<code>maxCodedExtent</code> <strong class="purple">cannot</strong> be smaller than
<a href="chap39.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>minExtent</code> and bigger than
<a href="chap39.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>maxExtent</code>.</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-referencePicturesFormat-04852" href="chap39.html#VUID-VkVideoSessionCreateInfoKHR-referencePicturesFormat-04852"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-referencePicturesFormat-04852</span><br>

<code>referencePicturesFormat</code> <strong class="purple">must</strong> be one of the supported formats in
<a href="chap39.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a> <code>format</code> returned by the
<a href="chap39.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> when the
<a href="chap39.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a> <code>imageUsage</code> contains
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code> or
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code> depending on the session
codec operation.</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pictureFormat-04853" href="chap39.html#VUID-VkVideoSessionCreateInfoKHR-pictureFormat-04853"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pictureFormat-04853</span><br>

<code>pictureFormat</code> for decode output <strong class="purple">must</strong> be one of the supported
formats in <a href="chap39.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a> <code>format</code> returned by the
<a href="chap39.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> when the
<a href="chap39.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a> <code>imageUsage</code> contains
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code>.</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pictureFormat-04854" href="chap39.html#VUID-VkVideoSessionCreateInfoKHR-pictureFormat-04854"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pictureFormat-04854</span><br>

<code>pictureFormat</code> targeting encode operations <strong class="purple">must</strong> be one of the
supported formats in <a href="chap39.html#VkVideoFormatPropertiesKHR">VkVideoFormatPropertiesKHR</a> <code>format</code>
returned by the <a href="chap39.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> when
the <a href="chap39.html#VkPhysicalDeviceVideoFormatInfoKHR">VkPhysicalDeviceVideoFormatInfoKHR</a> <code>imageUsage</code> contains
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-sType-sType" href="chap39.html#VUID-VkVideoSessionCreateInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_SESSION_CREATE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pNext-pNext" href="chap39.html#VUID-VkVideoSessionCreateInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap39.html#VkVideoDecodeH264SessionCreateInfoEXT">VkVideoDecodeH264SessionCreateInfoEXT</a>, <a href="chap39.html#VkVideoDecodeH265SessionCreateInfoEXT">VkVideoDecodeH265SessionCreateInfoEXT</a>, or <a href="chap39.html#VkVideoEncodeH264SessionCreateInfoEXT">VkVideoEncodeH264SessionCreateInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-sType-unique" href="chap39.html#VUID-VkVideoSessionCreateInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-flags-parameter" href="chap39.html#VUID-VkVideoSessionCreateInfoKHR-flags-parameter"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap39.html#VkVideoSessionCreateFlagBitsKHR">VkVideoSessionCreateFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pVideoProfile-parameter" href="chap39.html#VUID-VkVideoSessionCreateInfoKHR-pVideoProfile-parameter"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pVideoProfile-parameter</span><br>
 <code>pVideoProfile</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-pictureFormat-parameter" href="chap39.html#VUID-VkVideoSessionCreateInfoKHR-pictureFormat-parameter"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-pictureFormat-parameter</span><br>
 <code>pictureFormat</code> <strong class="purple">must</strong> be a valid <a href="chap43.html#VkFormat">VkFormat</a> value</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionCreateInfoKHR-referencePicturesFormat-parameter" href="chap39.html#VUID-VkVideoSessionCreateInfoKHR-referencePicturesFormat-parameter"></a> <span class="vuid">VUID-VkVideoSessionCreateInfoKHR-referencePicturesFormat-parameter</span><br>
 <code>referencePicturesFormat</code> <strong class="purple">must</strong> be a valid <a href="chap43.html#VkFormat">VkFormat</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The decode or encode session creation flags defined with the following
enums:</p>
</div>
<div id="VkVideoSessionCreateFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkVideoSessionCreateFlagBitsKHR {
    VK_VIDEO_SESSION_CREATE_DEFAULT_KHR = <span class="integer">0</span>,
    VK_VIDEO_SESSION_CREATE_PROTECTED_CONTENT_BIT_KHR = <span class="hex">0x00000001</span>,
} VkVideoSessionCreateFlagBitsKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_SESSION_CREATE_PROTECTED_CONTENT_BIT_KHR</code> - create the
video session for use with protected video content</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoSessionCreateFlagsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> VkFlags VkVideoSessionCreateFlagsKHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap39.html#VkVideoSessionCreateFlagsKHR">VkVideoSessionCreateFlagsKHR</a> is a bitmask type for setting a mask of
zero or more <a href="chap39.html#VkVideoSessionCreateFlagBitsKHR">VkVideoSessionCreateFlagBitsKHR</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="video-session-destruction"><a class="anchor" href="chap39.html#video-session-destruction"></a>39.4.2. Destroying a Video Session</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy a decode session object, call:</p>
</div>
<div id="vkDestroyVideoSessionKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="directive">void</span> vkDestroyVideoSessionKHR(
    VkDevice                                    device,
    VkVideoSessionKHR                           videoSession,
    <span class="directive">const</span> VkAllocationCallbacks*                pAllocator);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the device that was used for the creation of the video
session.</p>
</li>
<li>
<p><code>videoSession</code> is the decode or encode video session to be
destroyed.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyVideoSessionKHR-device-parameter" href="chap39.html#VUID-vkDestroyVideoSessionKHR-device-parameter"></a> <span class="vuid">VUID-vkDestroyVideoSessionKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyVideoSessionKHR-videoSession-parameter" href="chap39.html#VUID-vkDestroyVideoSessionKHR-videoSession-parameter"></a> <span class="vuid">VUID-vkDestroyVideoSessionKHR-videoSession-parameter</span><br>
 <code>videoSession</code> <strong class="purple">must</strong> be a valid <a href="chap39.html#VkVideoSessionKHR">VkVideoSessionKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyVideoSessionKHR-pAllocator-parameter" href="chap39.html#VUID-vkDestroyVideoSessionKHR-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyVideoSessionKHR-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyVideoSessionKHR-videoSession-parent" href="chap39.html#VUID-vkDestroyVideoSessionKHR-videoSession-parent"></a> <span class="vuid">VUID-vkDestroyVideoSessionKHR-videoSession-parent</span><br>
 <code>videoSession</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="video-session-memory-resource-management"><a class="anchor" href="chap39.html#video-session-memory-resource-management"></a>39.4.3. Video Session Memory Resource Management</h4>
<div class="sect4">
<h5 id="obtaining-video-session-memory-requirements"><a class="anchor" href="chap39.html#obtaining-video-session-memory-requirements"></a>Obtaining the Video Session Object Device Memory Requirements</h5>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To get memory requirements for a video session, call:</p>
</div>
<div id="vkGetVideoSessionMemoryRequirementsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
VkResult vkGetVideoSessionMemoryRequirementsKHR(
    VkDevice                                    device,
    VkVideoSessionKHR                           videoSession,
    uint32_t*                                   pVideoSessionMemoryRequirementsCount,
    VkVideoGetMemoryPropertiesKHR*              pVideoSessionMemoryRequirements);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the video session.</p>
</li>
<li>
<p><code>videoSession</code> is the video session to query.</p>
</li>
<li>
<p><code>pVideoSessionMemoryRequirementsCount</code> is a pointer to an integer
related to the number of memory heap requirements available or queried,
as described below.</p>
</li>
<li>
<p><code>pVideoSessionMemoryRequirements</code> is <code>NULL</code> or a pointer to an array
of <a href="chap39.html#VkVideoGetMemoryPropertiesKHR">VkVideoGetMemoryPropertiesKHR</a> structures in which the memory
heap requirements of the video session are returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>pVideoSessionMemoryRequirements</code> is <code>NULL</code>, then the number of
memory heap types required for the video session is returned in
<code>pVideoSessionMemoryRequirementsCount</code>.
Otherwise, <code>pVideoSessionMemoryRequirementsCount</code> <strong class="purple">must</strong> point to a
variable set by the user with the number of elements in the
<code>pVideoSessionMemoryRequirements</code> array, and on return the variable is
overwritten with the number of formats actually written to
<code>pVideoSessionMemoryRequirements</code>.
If <code>pVideoSessionMemoryRequirementsCount</code> is less than the number of
memory heap types required for the video session, then at most
<code>pVideoSessionMemoryRequirementsCount</code> elements will be written to
<code>pVideoSessionMemoryRequirements</code>, and <code>VK_INCOMPLETE</code> will be
returned, instead of <code>VK_SUCCESS</code>, to indicate that not all required
memory heap types were returned.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetVideoSessionMemoryRequirementsKHR-device-parameter" href="chap39.html#VUID-vkGetVideoSessionMemoryRequirementsKHR-device-parameter"></a> <span class="vuid">VUID-vkGetVideoSessionMemoryRequirementsKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetVideoSessionMemoryRequirementsKHR-videoSession-parameter" href="chap39.html#VUID-vkGetVideoSessionMemoryRequirementsKHR-videoSession-parameter"></a> <span class="vuid">VUID-vkGetVideoSessionMemoryRequirementsKHR-videoSession-parameter</span><br>
 <code>videoSession</code> <strong class="purple">must</strong> be a valid <a href="chap39.html#VkVideoSessionKHR">VkVideoSessionKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetVideoSessionMemoryRequirementsKHR-pVideoSessionMemoryRequirementsCount-parameter" href="chap39.html#VUID-vkGetVideoSessionMemoryRequirementsKHR-pVideoSessionMemoryRequirementsCount-parameter"></a> <span class="vuid">VUID-vkGetVideoSessionMemoryRequirementsKHR-pVideoSessionMemoryRequirementsCount-parameter</span><br>
 <code>pVideoSessionMemoryRequirementsCount</code> <strong class="purple">must</strong> be a valid pointer to a <code>uint32_t</code> value</p>
</li>
<li>
<p><a id="VUID-vkGetVideoSessionMemoryRequirementsKHR-pVideoSessionMemoryRequirements-parameter" href="chap39.html#VUID-vkGetVideoSessionMemoryRequirementsKHR-pVideoSessionMemoryRequirements-parameter"></a> <span class="vuid">VUID-vkGetVideoSessionMemoryRequirementsKHR-pVideoSessionMemoryRequirements-parameter</span><br>
 If the value referenced by <code>pVideoSessionMemoryRequirementsCount</code> is not <code>0</code>, and <code>pVideoSessionMemoryRequirements</code> is not <code>NULL</code>, <code>pVideoSessionMemoryRequirements</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>pVideoSessionMemoryRequirementsCount</code> <a href="chap39.html#VkVideoGetMemoryPropertiesKHR">VkVideoGetMemoryPropertiesKHR</a> structures</p>
</li>
<li>
<p><a id="VUID-vkGetVideoSessionMemoryRequirementsKHR-videoSession-parent" href="chap39.html#VUID-vkGetVideoSessionMemoryRequirementsKHR-videoSession-parent"></a> <span class="vuid">VUID-vkGetVideoSessionMemoryRequirementsKHR-videoSession-parent</span><br>
 <code>videoSession</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
<li>
<p><code>VK_INCOMPLETE</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoGetMemoryPropertiesKHR">VkVideoGetMemoryPropertiesKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoGetMemoryPropertiesKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoGetMemoryPropertiesKHR {
    VkStructureType           sType;
    <span class="directive">const</span> <span class="directive">void</span>*               pNext;
    uint32_t                  memoryBindIndex;
    VkMemoryRequirements2*    pMemoryRequirements;
} VkVideoGetMemoryPropertiesKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>memoryBindIndex</code> is the memory bind index of the memory heap type
described by the information returned in <code>pMemoryRequirements</code>.</p>
</li>
<li>
<p><code>pMemoryRequirements</code> is a pointer to a <a href="chap12.html#VkMemoryRequirements2">VkMemoryRequirements2</a>
structure in which the requested memory heap requirements for the heap
with index <code>memoryBindIndex</code> are returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoGetMemoryPropertiesKHR-sType-sType" href="chap39.html#VUID-VkVideoGetMemoryPropertiesKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoGetMemoryPropertiesKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_GET_MEMORY_PROPERTIES_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoGetMemoryPropertiesKHR-pNext-pNext" href="chap39.html#VUID-VkVideoGetMemoryPropertiesKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoGetMemoryPropertiesKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoGetMemoryPropertiesKHR-pMemoryRequirements-parameter" href="chap39.html#VUID-VkVideoGetMemoryPropertiesKHR-pMemoryRequirements-parameter"></a> <span class="vuid">VUID-VkVideoGetMemoryPropertiesKHR-pMemoryRequirements-parameter</span><br>
 <code>pMemoryRequirements</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap12.html#VkMemoryRequirements2">VkMemoryRequirements2</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="binding-session-memory"><a class="anchor" href="chap39.html#binding-session-memory"></a>Binding the Session Object Device Memory</h5>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To attach memory to a video session object, call:</p>
</div>
<div id="vkBindVideoSessionMemoryKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
VkResult vkBindVideoSessionMemoryKHR(
    VkDevice                                    device,
    VkVideoSessionKHR                           videoSession,
    uint32_t                                    videoSessionBindMemoryCount,
    <span class="directive">const</span> VkVideoBindMemoryKHR*                 pVideoSessionBindMemories);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the video session’s memory.</p>
</li>
<li>
<p><code>videoSession</code> is the video session to be bound with device memory.</p>
</li>
<li>
<p><code>videoSessionBindMemoryCount</code> is the number of
<code>pVideoSessionBindMemories</code> to be bound.</p>
</li>
<li>
<p><code>pVideoSessionBindMemories</code> is a pointer to an array of
<a href="chap39.html#VkVideoBindMemoryKHR">VkVideoBindMemoryKHR</a> structures specifying memory regions to be
bound to a device memory heap.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBindVideoSessionMemoryKHR-device-parameter" href="chap39.html#VUID-vkBindVideoSessionMemoryKHR-device-parameter"></a> <span class="vuid">VUID-vkBindVideoSessionMemoryKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindVideoSessionMemoryKHR-videoSession-parameter" href="chap39.html#VUID-vkBindVideoSessionMemoryKHR-videoSession-parameter"></a> <span class="vuid">VUID-vkBindVideoSessionMemoryKHR-videoSession-parameter</span><br>
 <code>videoSession</code> <strong class="purple">must</strong> be a valid <a href="chap39.html#VkVideoSessionKHR">VkVideoSessionKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBindVideoSessionMemoryKHR-pVideoSessionBindMemories-parameter" href="chap39.html#VUID-vkBindVideoSessionMemoryKHR-pVideoSessionBindMemories-parameter"></a> <span class="vuid">VUID-vkBindVideoSessionMemoryKHR-pVideoSessionBindMemories-parameter</span><br>
 <code>pVideoSessionBindMemories</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>videoSessionBindMemoryCount</code> valid <a href="chap39.html#VkVideoBindMemoryKHR">VkVideoBindMemoryKHR</a> structures</p>
</li>
<li>
<p><a id="VUID-vkBindVideoSessionMemoryKHR-videoSessionBindMemoryCount-arraylength" href="chap39.html#VUID-vkBindVideoSessionMemoryKHR-videoSessionBindMemoryCount-arraylength"></a> <span class="vuid">VUID-vkBindVideoSessionMemoryKHR-videoSessionBindMemoryCount-arraylength</span><br>
 <code>videoSessionBindMemoryCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkBindVideoSessionMemoryKHR-videoSession-parent" href="chap39.html#VUID-vkBindVideoSessionMemoryKHR-videoSession-parent"></a> <span class="vuid">VUID-vkBindVideoSessionMemoryKHR-videoSession-parent</span><br>
 <code>videoSession</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoBindMemoryKHR">VkVideoBindMemoryKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoBindMemoryKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoBindMemoryKHR {
    VkStructureType    sType;
    <span class="directive">const</span> <span class="directive">void</span>*        pNext;
    uint32_t           memoryBindIndex;
    VkDeviceMemory     memory;
    VkDeviceSize       memoryOffset;
    VkDeviceSize       memorySize;
} VkVideoBindMemoryKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>memoryBindIndex</code> is the index of the device memory heap returned in
<a href="chap39.html#VkVideoGetMemoryPropertiesKHR">VkVideoGetMemoryPropertiesKHR</a>::<code>memoryBindIndex</code> from
<a href="chap39.html#vkGetVideoSessionMemoryRequirementsKHR">vkGetVideoSessionMemoryRequirementsKHR</a>.</p>
</li>
<li>
<p><code>memory</code> is the allocated device memory to be bound to the video
session’s heap with index <code>memoryBindIndex</code>.</p>
</li>
<li>
<p><code>memoryOffset</code> is the start offset of the region of <code>memory</code>
which is to be bound.</p>
</li>
<li>
<p><code>memorySize</code> is the size in bytes of the region of <code>memory</code>,
starting from <code>memoryOffset</code> bytes, to be bound.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoBindMemoryKHR-sType-sType" href="chap39.html#VUID-VkVideoBindMemoryKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoBindMemoryKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_BIND_MEMORY_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBindMemoryKHR-pNext-pNext" href="chap39.html#VUID-VkVideoBindMemoryKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoBindMemoryKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBindMemoryKHR-memory-parameter" href="chap39.html#VUID-VkVideoBindMemoryKHR-memory-parameter"></a> <span class="vuid">VUID-VkVideoBindMemoryKHR-memory-parameter</span><br>
 <code>memory</code> <strong class="purple">must</strong> be a valid <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="video-session-parameters"><a class="anchor" href="chap39.html#video-session-parameters"></a>39.4.4. Video Session Parameters</h4>
<div class="paragraph">
<p>This specification supports several classes of preprocessed parameters
stored in Video Session Parameters objects.
The Video Session Parameters objects reduces the number of parameters being
dispatched and then processed by the implementation while recording video
command buffers.</p>
</div>
</div>
<div class="sect3">
<h4 id="creating-video-session-parameters"><a class="anchor" href="chap39.html#creating-video-session-parameters"></a>39.4.5. Creating Video Session Parameters</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Video session parameter objects are represented by
<a href="chap39.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> handles:</p>
</div>
<div id="VkVideoSessionParametersKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
VK_DEFINE_NON_DISPATCHABLE_HANDLE(VkVideoSessionParametersKHR)</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create a video session parameters object, call:</p>
</div>
<div id="vkCreateVideoSessionParametersKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
VkResult vkCreateVideoSessionParametersKHR(
    VkDevice                                    device,
    <span class="directive">const</span> VkVideoSessionParametersCreateInfoKHR* pCreateInfo,
    <span class="directive">const</span> VkAllocationCallbacks*                pAllocator,
    VkVideoSessionParametersKHR*                pVideoSessionParameters);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that was used for the creation of the
video session object.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to
<a href="chap39.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a> structure specifying the
video session parameters.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pVideoSessionParameters</code> is a pointer to a
<a href="chap39.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> handle in which the video session
parameters object is returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateVideoSessionParametersKHR-device-parameter" href="chap39.html#VUID-vkCreateVideoSessionParametersKHR-device-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionParametersKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateVideoSessionParametersKHR-pCreateInfo-parameter" href="chap39.html#VUID-vkCreateVideoSessionParametersKHR-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionParametersKHR-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap39.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateVideoSessionParametersKHR-pAllocator-parameter" href="chap39.html#VUID-vkCreateVideoSessionParametersKHR-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionParametersKHR-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateVideoSessionParametersKHR-pVideoSessionParameters-parameter" href="chap39.html#VUID-vkCreateVideoSessionParametersKHR-pVideoSessionParameters-parameter"></a> <span class="vuid">VUID-vkCreateVideoSessionParametersKHR-pVideoSessionParameters-parameter</span><br>
 <code>pVideoSessionParameters</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap39.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_TOO_MANY_OBJECTS</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoSessionParametersCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoSessionParametersCreateInfoKHR {
    VkStructureType                sType;
    <span class="directive">const</span> <span class="directive">void</span>*                    pNext;
    VkVideoSessionParametersKHR    videoSessionParametersTemplate;
    VkVideoSessionKHR              videoSession;
} VkVideoSessionParametersCreateInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>videoSessionParametersTemplate</code> is <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a> or a valid
handle to a <a href="chap39.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object.
If this parameter represents a valid handle, then the underlying Video
Session Parameters object will be used as a template for constructing
the new video session parameters object.
All of the template object’s current parameters will be inherited by the
new object in such a case.
Optionally, some of the template’s parameters can be updated or new
parameters added to the newly constructed object via the
extension-specific parameters.</p>
</li>
<li>
<p><code>videoSession</code> is the video session object against which the video
session parameters object is going to be created.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-04855" href="chap39.html#VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-04855"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-04855</span><br>

If <code>videoSessionParametersTemplate</code> represents a valid handle, it
<strong class="purple">must</strong> have been created against <code>videoSession</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-sType-sType" href="chap39.html#VUID-VkVideoSessionParametersCreateInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_SESSION_PARAMETERS_CREATE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-pNext-pNext" href="chap39.html#VUID-VkVideoSessionParametersCreateInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap39.html#VkVideoDecodeH264SessionParametersCreateInfoEXT">VkVideoDecodeH264SessionParametersCreateInfoEXT</a>, <a href="chap39.html#VkVideoDecodeH265SessionParametersCreateInfoEXT">VkVideoDecodeH265SessionParametersCreateInfoEXT</a>, or <a href="chap39.html#VkVideoEncodeH264SessionParametersCreateInfoEXT">VkVideoEncodeH264SessionParametersCreateInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-sType-unique" href="chap39.html#VUID-VkVideoSessionParametersCreateInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-parameter" href="chap39.html#VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-parameter"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-parameter</span><br>
 <code>videoSessionParametersTemplate</code> <strong class="purple">must</strong> be a valid <a href="chap39.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-parameter" href="chap39.html#VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-parameter"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-videoSession-parameter</span><br>
 <code>videoSession</code> <strong class="purple">must</strong> be a valid <a href="chap39.html#VkVideoSessionKHR">VkVideoSessionKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-parent" href="chap39.html#VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-parent"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-videoSessionParametersTemplate-parent</span><br>
 <code>videoSessionParametersTemplate</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>videoSession</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersCreateInfoKHR-commonparent" href="chap39.html#VUID-VkVideoSessionParametersCreateInfoKHR-commonparent"></a> <span class="vuid">VUID-VkVideoSessionParametersCreateInfoKHR-commonparent</span><br>
 Both of <code>videoSession</code>, and <code>videoSessionParametersTemplate</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="UpdatingVideoSessionParameters"><a class="anchor" href="chap39.html#UpdatingVideoSessionParameters"></a>39.4.6. Updating the parameters of the Video Session Parameters object</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To update, add, or remove video session parameters state, call:</p>
</div>
<div id="vkUpdateVideoSessionParametersKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
VkResult vkUpdateVideoSessionParametersKHR(
    VkDevice                                    device,
    VkVideoSessionParametersKHR                 videoSessionParameters,
    <span class="directive">const</span> VkVideoSessionParametersUpdateInfoKHR* pUpdateInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that was used for the creation of the
video session object.</p>
</li>
<li>
<p><code>videoSessionParameters</code> is the video session object that is going
to be updated.</p>
</li>
<li>
<p><code>pUpdateInfo</code> is a pointer to a
<code>VkVideoSessionParametersUpdateInfoKHR</code> structure containing the
session parameters update information.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-device-parameter" href="chap39.html#VUID-vkUpdateVideoSessionParametersKHR-device-parameter"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-parameter" href="chap39.html#VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-parameter"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-videoSessionParameters-parameter</span><br>
 <code>videoSessionParameters</code> <strong class="purple">must</strong> be a valid <a href="chap39.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-vkUpdateVideoSessionParametersKHR-pUpdateInfo-parameter" href="chap39.html#VUID-vkUpdateVideoSessionParametersKHR-pUpdateInfo-parameter"></a> <span class="vuid">VUID-vkUpdateVideoSessionParametersKHR-pUpdateInfo-parameter</span><br>
 <code>pUpdateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap39.html#VkVideoSessionParametersUpdateInfoKHR">VkVideoSessionParametersUpdateInfoKHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_INITIALIZATION_FAILED</code></p>
</li>
<li>
<p><code>VK_ERROR_TOO_MANY_OBJECTS</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkVideoSessionParametersUpdateInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkVideoSessionParametersUpdateInfoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoSessionParametersUpdateInfoKHR {
    VkStructureType    sType;
    <span class="directive">const</span> <span class="directive">void</span>*        pNext;
    uint32_t           updateSequenceCount;
} VkVideoSessionParametersUpdateInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>updateSequenceCount</code> is the sequence number of the object update
with parameters, starting from <code>1</code> and incrementing the value by one
with each subsequent update.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoSessionParametersUpdateInfoKHR-sType-sType" href="chap39.html#VUID-VkVideoSessionParametersUpdateInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoSessionParametersUpdateInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_SESSION_PARAMETERS_UPDATE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersUpdateInfoKHR-pNext-pNext" href="chap39.html#VUID-VkVideoSessionParametersUpdateInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoSessionParametersUpdateInfoKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap39.html#VkVideoDecodeH264SessionParametersAddInfoEXT">VkVideoDecodeH264SessionParametersAddInfoEXT</a>, <a href="chap39.html#VkVideoDecodeH265SessionParametersAddInfoEXT">VkVideoDecodeH265SessionParametersAddInfoEXT</a>, or <a href="chap39.html#VkVideoEncodeH264SessionParametersAddInfoEXT">VkVideoEncodeH264SessionParametersAddInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkVideoSessionParametersUpdateInfoKHR-sType-unique" href="chap39.html#VUID-VkVideoSessionParametersUpdateInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoSessionParametersUpdateInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="destroying-video-session-parameters"><a class="anchor" href="chap39.html#destroying-video-session-parameters"></a>39.4.7. Destroying Video Session Parameters</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy a video session object, call:</p>
</div>
<div id="vkDestroyVideoSessionParametersKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="directive">void</span> vkDestroyVideoSessionParametersKHR(
    VkDevice                                    device,
    VkVideoSessionParametersKHR                 videoSessionParameters,
    <span class="directive">const</span> VkAllocationCallbacks*                pAllocator);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the device the video session was created with.</p>
</li>
<li>
<p><code>videoSessionParameters</code> is the video session parameters object to
be destroyed.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyVideoSessionParametersKHR-device-parameter" href="chap39.html#VUID-vkDestroyVideoSessionParametersKHR-device-parameter"></a> <span class="vuid">VUID-vkDestroyVideoSessionParametersKHR-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyVideoSessionParametersKHR-videoSessionParameters-parameter" href="chap39.html#VUID-vkDestroyVideoSessionParametersKHR-videoSessionParameters-parameter"></a> <span class="vuid">VUID-vkDestroyVideoSessionParametersKHR-videoSessionParameters-parameter</span><br>
 <code>videoSessionParameters</code> <strong class="purple">must</strong> be a valid <a href="chap39.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyVideoSessionParametersKHR-pAllocator-parameter" href="chap39.html#VUID-vkDestroyVideoSessionParametersKHR-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyVideoSessionParametersKHR-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_video_encode_and_decode_commands"><a class="anchor" href="chap39.html#_video_encode_and_decode_commands"></a>39.4.8. Video Encode and Decode commands</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To start video decode or encode operations, call:</p>
</div>
<div id="vkCmdBeginVideoCodingKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="directive">void</span> vkCmdBeginVideoCodingKHR(
    VkCommandBuffer                             commandBuffer,
    <span class="directive">const</span> VkVideoBeginCodingInfoKHR*            pBeginInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer to be used when recording
commands for the video decode or encode operations.</p>
</li>
<li>
<p><code>pBeginInfo</code> is a pointer to a <a href="chap39.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>
structure.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-commandBuffer-parameter" href="chap39.html#VUID-vkCmdBeginVideoCodingKHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-pBeginInfo-parameter" href="chap39.html#VUID-vkCmdBeginVideoCodingKHR-pBeginInfo-parameter"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-pBeginInfo-parameter</span><br>
 <code>pBeginInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap39.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-commandBuffer-recording" href="chap39.html#VUID-vkCmdBeginVideoCodingKHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-commandBuffer-cmdpool" href="chap39.html#VUID-vkCmdBeginVideoCodingKHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support decode, or encode operations</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-renderpass" href="chap39.html#VUID-vkCmdBeginVideoCodingKHR-renderpass"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginVideoCodingKHR-bufferlevel" href="chap39.html#VUID-vkCmdBeginVideoCodingKHR-bufferlevel"></a> <span class="vuid">VUID-vkCmdBeginVideoCodingKHR-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decode<br>
Encode</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoBeginCodingInfoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoBeginCodingInfoKHR {
    VkStructureType                       sType;
    <span class="directive">const</span> <span class="directive">void</span>*                           pNext;
    VkVideoBeginCodingFlagsKHR            flags;
    VkVideoCodingQualityPresetFlagsKHR    codecQualityPreset;
    VkVideoSessionKHR                     videoSession;
    VkVideoSessionParametersKHR           videoSessionParameters;
    uint32_t                              referenceSlotCount;
    <span class="directive">const</span> VkVideoReferenceSlotKHR*        pReferenceSlots;
} VkVideoBeginCodingInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
<li>
<p><code>codecQualityPreset</code> is a bitmask of
<a href="chap39.html#VkVideoCodingQualityPresetFlagBitsKHR">VkVideoCodingQualityPresetFlagBitsKHR</a> specifying the Video Decode
or Encode quality preset.</p>
</li>
<li>
<p><code>videoSession</code> is the video session object to be bound for the
processing of the video commands.</p>
</li>
<li>
<p><code>videoSessionParameters</code> is <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a> or a handle of a
<a href="chap39.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object to be used for the processing
of the video commands.
If <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, then no video session parameters apply to this
command buffer context.</p>
</li>
<li>
<p><code>referenceSlotCount</code> is the number of reference slot entries
provided in <code>pReferenceSlots</code>.</p>
</li>
<li>
<p><code>pReferenceSlots</code> is a pointer to an array of
<a href="chap39.html#VkVideoReferenceSlotKHR">VkVideoReferenceSlotKHR</a> structures specifying reference slots,
used within the video command context between this
<a href="chap39.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command and the
<a href="chap39.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> commmand that follows.
Each reference slot provides a slot index and the
<a href="chap39.html#VkVideoPictureResourceKHR">VkVideoPictureResourceKHR</a> specifying the reference picture
resource bound to this slot index.
A slot index <strong class="purple">must</strong> not appear more than once in <code>pReferenceSlots</code> in
a given command.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-referenceSlotCount-04856" href="chap39.html#VUID-VkVideoBeginCodingInfoKHR-referenceSlotCount-04856"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-referenceSlotCount-04856</span><br>

<a href="chap39.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>::<code>referenceSlotCount</code> <strong class="purple">must</strong> not
exceed the value specified in
<a href="chap39.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>::<code>maxReferencePicturesSlotsCount</code>
when creating the video session object that is being provided in
<code>videoSession</code>.</p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-04857" href="chap39.html#VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-04857"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-04857</span><br>

If <code>videoSessionParameters</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, it <strong class="purple">must</strong>
have been created using <code>videoSession</code> as a parent object.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-sType-sType" href="chap39.html#VUID-VkVideoBeginCodingInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_BEGIN_CODING_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-pNext-pNext" href="chap39.html#VUID-VkVideoBeginCodingInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-flags-zerobitmask" href="chap39.html#VUID-VkVideoBeginCodingInfoKHR-flags-zerobitmask"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-flags-zerobitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-codecQualityPreset-parameter" href="chap39.html#VUID-VkVideoBeginCodingInfoKHR-codecQualityPreset-parameter"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-codecQualityPreset-parameter</span><br>
 <code>codecQualityPreset</code> <strong class="purple">must</strong> be a valid combination of <a href="chap39.html#VkVideoCodingQualityPresetFlagBitsKHR">VkVideoCodingQualityPresetFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-codecQualityPreset-requiredbitmask" href="chap39.html#VUID-VkVideoBeginCodingInfoKHR-codecQualityPreset-requiredbitmask"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-codecQualityPreset-requiredbitmask</span><br>
 <code>codecQualityPreset</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-videoSession-parameter" href="chap39.html#VUID-VkVideoBeginCodingInfoKHR-videoSession-parameter"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-videoSession-parameter</span><br>
 <code>videoSession</code> <strong class="purple">must</strong> be a valid <a href="chap39.html#VkVideoSessionKHR">VkVideoSessionKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-parameter" href="chap39.html#VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-parameter"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-parameter</span><br>
 If <code>videoSessionParameters</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>videoSessionParameters</code> <strong class="purple">must</strong> be a valid <a href="chap39.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> handle</p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-pReferenceSlots-parameter" href="chap39.html#VUID-VkVideoBeginCodingInfoKHR-pReferenceSlots-parameter"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-pReferenceSlots-parameter</span><br>
 <code>pReferenceSlots</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>referenceSlotCount</code> valid <a href="chap39.html#VkVideoReferenceSlotKHR">VkVideoReferenceSlotKHR</a> structures</p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-referenceSlotCount-arraylength" href="chap39.html#VUID-VkVideoBeginCodingInfoKHR-referenceSlotCount-arraylength"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-referenceSlotCount-arraylength</span><br>
 <code>referenceSlotCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-parent" href="chap39.html#VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-parent"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-videoSessionParameters-parent</span><br>
 If <code>videoSessionParameters</code> is a valid handle, it <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>videoSession</code></p>
</li>
<li>
<p><a id="VUID-VkVideoBeginCodingInfoKHR-commonparent" href="chap39.html#VUID-VkVideoBeginCodingInfoKHR-commonparent"></a> <span class="vuid">VUID-VkVideoBeginCodingInfoKHR-commonparent</span><br>
 Both of <code>videoSession</code>, and <code>videoSessionParameters</code> that are valid handles of non-ignored parameters <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The decode preset types are defined with the following:</p>
</div>
<div id="VkVideoCodingQualityPresetFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkVideoCodingQualityPresetFlagBitsKHR {
    VK_VIDEO_CODING_QUALITY_PRESET_DEFAULT_BIT_KHR = <span class="integer">0</span>,
    VK_VIDEO_CODING_QUALITY_PRESET_NORMAL_BIT_KHR = <span class="hex">0x00000001</span>,
    VK_VIDEO_CODING_QUALITY_PRESET_POWER_BIT_KHR = <span class="hex">0x00000002</span>,
    VK_VIDEO_CODING_QUALITY_PRESET_QUALITY_BIT_KHR = <span class="hex">0x00000004</span>,
} VkVideoCodingQualityPresetFlagBitsKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_CODING_QUALITY_PRESET_NORMAL_BIT_KHR</code> defines normal
decode case.</p>
</li>
<li>
<p><code>VK_VIDEO_CODING_QUALITY_PRESET_POWER_BIT_KHR</code> defines power
efficient case.</p>
</li>
<li>
<p><code>VK_VIDEO_CODING_QUALITY_PRESET_QUALITY_BIT_KHR</code> defines quality
focus case.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoCodingQualityPresetFlagsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> VkFlags VkVideoCodingQualityPresetFlagsKHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap39.html#VkVideoCodingQualityPresetFlagsKHR">VkVideoCodingQualityPresetFlagsKHR</a> is a bitmask type for setting a
mask of zero or more <a href="chap39.html#VkVideoCodingQualityPresetFlagBitsKHR">VkVideoCodingQualityPresetFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoReferenceSlotKHR">VkVideoReferenceSlotKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoReferenceSlotKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoReferenceSlotKHR {
    VkStructureType                     sType;
    <span class="directive">const</span> <span class="directive">void</span>*                         pNext;
    int8_t                              slotIndex;
    <span class="directive">const</span> VkVideoPictureResourceKHR*    pPictureResource;
} VkVideoReferenceSlotKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>slotIndex</code> is the unique reference slot index used for the encode
or decode operation.</p>
</li>
<li>
<p><code>pPictureResource</code> is a pointer to a <a href="chap39.html#VkVideoPictureResourceKHR">VkVideoPictureResourceKHR</a>
structure describing the picture resource bound to this slot index.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoReferenceSlotKHR-sType-sType" href="chap39.html#VUID-VkVideoReferenceSlotKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoReferenceSlotKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_REFERENCE_SLOT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoReferenceSlotKHR-pNext-pNext" href="chap39.html#VUID-VkVideoReferenceSlotKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoReferenceSlotKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap39.html#VkVideoDecodeH264DpbSlotInfoEXT">VkVideoDecodeH264DpbSlotInfoEXT</a> or <a href="chap39.html#VkVideoDecodeH265DpbSlotInfoEXT">VkVideoDecodeH265DpbSlotInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkVideoReferenceSlotKHR-sType-unique" href="chap39.html#VUID-VkVideoReferenceSlotKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoReferenceSlotKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkVideoReferenceSlotKHR-pPictureResource-parameter" href="chap39.html#VUID-VkVideoReferenceSlotKHR-pPictureResource-parameter"></a> <span class="vuid">VUID-VkVideoReferenceSlotKHR-pPictureResource-parameter</span><br>
 <code>pPictureResource</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap39.html#VkVideoPictureResourceKHR">VkVideoPictureResourceKHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoPictureResourceKHR">VkVideoPictureResourceKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoPictureResourceKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoPictureResourceKHR {
    VkStructureType    sType;
    <span class="directive">const</span> <span class="directive">void</span>*        pNext;
    VkOffset2D         codedOffset;
    VkExtent2D         codedExtent;
    uint32_t           baseArrayLayer;
    VkImageView        imageViewBinding;
} VkVideoPictureResourceKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>codedOffset</code> is the offset to be used for the picture resource.</p>
</li>
<li>
<p><code>codedExtent</code> is the extent to be used for the picture resource.</p>
</li>
<li>
<p><code>baseArrayLayer</code> is the first array layer to be accessed for the
Decode or Encode Operations.</p>
</li>
<li>
<p><code>imageViewBinding</code> is a <a href="chap12.html#VkImageView">VkImageView</a> image view representing
this picture resource.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoPictureResourceKHR-sType-sType" href="chap39.html#VUID-VkVideoPictureResourceKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoPictureResourceKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_PICTURE_RESOURCE_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoPictureResourceKHR-pNext-pNext" href="chap39.html#VUID-VkVideoPictureResourceKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoPictureResourceKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoPictureResourceKHR-imageViewBinding-parameter" href="chap39.html#VUID-VkVideoPictureResourceKHR-imageViewBinding-parameter"></a> <span class="vuid">VUID-VkVideoPictureResourceKHR-imageViewBinding-parameter</span><br>
 <code>imageViewBinding</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageView">VkImageView</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_end_of_the_video_session"><a class="anchor" href="chap39.html#_end_of_the_video_session"></a>39.4.9. End of the Video Session</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To end video decode or encode operations, call:</p>
</div>
<div id="vkCmdEndVideoCodingKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="directive">void</span> vkCmdEndVideoCodingKHR(
    VkCommandBuffer                             commandBuffer,
    <span class="directive">const</span> VkVideoEndCodingInfoKHR*              pEndCodingInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer to be filled by this function.</p>
</li>
<li>
<p><code>pEndCodingInfo</code> is a pointer to a <a href="chap39.html#VkVideoEndCodingInfoKHR">VkVideoEndCodingInfoKHR</a>
structure.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdEndVideoCodingKHR-commandBuffer-parameter" href="chap39.html#VUID-vkCmdEndVideoCodingKHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdEndVideoCodingKHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdEndVideoCodingKHR-pEndCodingInfo-parameter" href="chap39.html#VUID-vkCmdEndVideoCodingKHR-pEndCodingInfo-parameter"></a> <span class="vuid">VUID-vkCmdEndVideoCodingKHR-pEndCodingInfo-parameter</span><br>
 <code>pEndCodingInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap39.html#VkVideoEndCodingInfoKHR">VkVideoEndCodingInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdEndVideoCodingKHR-commandBuffer-recording" href="chap39.html#VUID-vkCmdEndVideoCodingKHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdEndVideoCodingKHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdEndVideoCodingKHR-commandBuffer-cmdpool" href="chap39.html#VUID-vkCmdEndVideoCodingKHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdEndVideoCodingKHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support decode, or encode operations</p>
</li>
<li>
<p><a id="VUID-vkCmdEndVideoCodingKHR-renderpass" href="chap39.html#VUID-vkCmdEndVideoCodingKHR-renderpass"></a> <span class="vuid">VUID-vkCmdEndVideoCodingKHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdEndVideoCodingKHR-bufferlevel" href="chap39.html#VUID-vkCmdEndVideoCodingKHR-bufferlevel"></a> <span class="vuid">VUID-vkCmdEndVideoCodingKHR-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decode<br>
Encode</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoEndCodingInfoKHR">VkVideoEndCodingInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoEndCodingInfoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoEndCodingInfoKHR {
    VkStructureType             sType;
    <span class="directive">const</span> <span class="directive">void</span>*                 pNext;
    VkVideoEndCodingFlagsKHR    flags;
} VkVideoEndCodingInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEndCodingInfoKHR-sType-sType" href="chap39.html#VUID-VkVideoEndCodingInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoEndCodingInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_END_CODING_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEndCodingInfoKHR-pNext-pNext" href="chap39.html#VUID-VkVideoEndCodingInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoEndCodingInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEndCodingInfoKHR-flags-zerobitmask" href="chap39.html#VUID-VkVideoEndCodingInfoKHR-flags-zerobitmask"></a> <span class="vuid">VUID-VkVideoEndCodingInfoKHR-flags-zerobitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_video_session_control_command"><a class="anchor" href="chap39.html#_video_session_control_command"></a>39.4.10. Video Session Control Command</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To apply dynamic controls to video decode or video operations, call:</p>
</div>
<div id="vkCmdControlVideoCodingKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="directive">void</span> vkCmdControlVideoCodingKHR(
    VkCommandBuffer                             commandBuffer,
    <span class="directive">const</span> VkVideoCodingControlInfoKHR*          pCodingControlInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer to be filled by this function
for setting encode rate control parameters.</p>
</li>
<li>
<p><code>pCodingControlInfo</code> is a pointer to a
<a href="chap39.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a> structure.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdControlVideoCodingKHR-commandBuffer-parameter" href="chap39.html#VUID-vkCmdControlVideoCodingKHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdControlVideoCodingKHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdControlVideoCodingKHR-pCodingControlInfo-parameter" href="chap39.html#VUID-vkCmdControlVideoCodingKHR-pCodingControlInfo-parameter"></a> <span class="vuid">VUID-vkCmdControlVideoCodingKHR-pCodingControlInfo-parameter</span><br>
 <code>pCodingControlInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap39.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdControlVideoCodingKHR-commandBuffer-recording" href="chap39.html#VUID-vkCmdControlVideoCodingKHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdControlVideoCodingKHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdControlVideoCodingKHR-commandBuffer-cmdpool" href="chap39.html#VUID-vkCmdControlVideoCodingKHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdControlVideoCodingKHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support decode, or encode operations</p>
</li>
<li>
<p><a id="VUID-vkCmdControlVideoCodingKHR-renderpass" href="chap39.html#VUID-vkCmdControlVideoCodingKHR-renderpass"></a> <span class="vuid">VUID-vkCmdControlVideoCodingKHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdControlVideoCodingKHR-bufferlevel" href="chap39.html#VUID-vkCmdControlVideoCodingKHR-bufferlevel"></a> <span class="vuid">VUID-vkCmdControlVideoCodingKHR-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decode<br>
Encode</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoCodingControlInfoKHR">VkVideoCodingControlInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoCodingControlInfoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoCodingControlInfoKHR {
    VkStructureType                 sType;
    <span class="directive">const</span> <span class="directive">void</span>*                     pNext;
    VkVideoCodingControlFlagsKHR    flags;
} VkVideoCodingControlInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap39.html#VkVideoCodingControlFlagsKHR">VkVideoCodingControlFlagsKHR</a>
specifying control flags.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-sType-sType" href="chap39.html#VUID-VkVideoCodingControlInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_CODING_CONTROL_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-pNext-pNext" href="chap39.html#VUID-VkVideoCodingControlInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="chap39.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a></p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-sType-unique" href="chap39.html#VUID-VkVideoCodingControlInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkVideoCodingControlInfoKHR-flags-parameter" href="chap39.html#VUID-VkVideoCodingControlInfoKHR-flags-parameter"></a> <span class="vuid">VUID-VkVideoCodingControlInfoKHR-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap39.html#VkVideoCodingControlFlagBitsKHR">VkVideoCodingControlFlagBitsKHR</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a> flags are defined with the following
enumeration:</p>
</div>
<div id="VkVideoCodingControlFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkVideoCodingControlFlagBitsKHR {
    VK_VIDEO_CODING_CONTROL_DEFAULT_KHR = <span class="integer">0</span>,
    VK_VIDEO_CODING_CONTROL_RESET_BIT_KHR = <span class="hex">0x00000001</span>,
} VkVideoCodingControlFlagBitsKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_CODING_CONTROL_RESET_BIT_KHR</code> indicates a request for the
bound video session context to be reset to init state.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoCodingControlFlagsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_queue</span>
<span class="keyword">typedef</span> VkFlags VkVideoCodingControlFlagsKHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap39.html#VkVideoCodingControlFlagsKHR">VkVideoCodingControlFlagsKHR</a> is a bitmask type for setting a mask of
zero or more <a href="chap39.html#VkVideoCodingControlFlagBitsKHR">VkVideoCodingControlFlagBitsKHR</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="video-decode-operations"><a class="anchor" href="chap39.html#video-decode-operations"></a>39.5. Video Decode Operations</h3>
<div class="paragraph">
<p>Before the application can start recording Vulkan command buffers for the
Video Decode Operations, it <strong class="purple">must</strong> do the following, beforehand:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that the implementation can decode the Video Content by querying
the supported codec operations and profiles using
<a href="chap5.html#vkGetPhysicalDeviceQueueFamilyProperties2">vkGetPhysicalDeviceQueueFamilyProperties2</a>.</p>
</li>
<li>
<p>By using <a href="chap39.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> and providing
one or more video profiles, choose the Vulkan formats supported by the
implementation.
The formats for <a href="chap39.html#decoded-output-picture">output</a> and
<a href="undefined">reference</a> pictures <strong class="purple">must</strong> be queried and chosen
separately.
Refer to the section on
<a href="chap39.html#supported-video-input-output-dpb-formats-enumeration">enumeration of
supported video formats</a>.</p>
</li>
<li>
<p>Before creating an image to be used as a video picture resource, obtain
the supported image creation parameters by querying with
<a href="chap43.html#vkGetPhysicalDeviceFormatProperties2">vkGetPhysicalDeviceFormatProperties2</a> and
<a href="chap44.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a> using one of the
reported formats and adding <a href="chap39.html#VkVideoProfilesKHR">VkVideoProfilesKHR</a> to the <code>pNext</code>
chain of <a href="chap43.html#VkFormatProperties2">VkFormatProperties2</a>.
When querying the parameters with
<a href="chap44.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a> for images targeting
decoded <a href="chap39.html#decoded-output-picture">output</a> and
<a href="undefined">reference (DPB)</a> pictures, the
<a href="chap44.html#VkPhysicalDeviceImageFormatInfo2">VkPhysicalDeviceImageFormatInfo2</a>::<code>usage</code> field should contain
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DST_BIT_KHR</code> and
<code>VK_IMAGE_USAGE_VIDEO_DECODE_DPB_BIT_KHR</code>, respectively.</p>
</li>
<li>
<p>Create none, some, or all of the required <a href="chap12.html#VkImage">images</a> for the
<a href="chap39.html#decoded-output-picture">decoded output</a> and
<a href="undefined">reference</a> pictures.
More Video Picture Resources <strong class="purple">can</strong> be created at some later point if
needed while processing the decoded content.
Also, if the decoded picture size is expected to change, the images <strong class="purple">can</strong>
be created based on the maximum decoded content size required.</p>
</li>
<li>
<p>Create the <a href="chap39.html#video-session">video session</a> to be used for video decode
operations.
Before creating the Decode Video Session, the decode capabilities
<strong class="purple">should</strong> be queried with <a href="chap39.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> to
obtain the limits of the parameters allowed by the implementation for a
particular codec profile.</p>
</li>
<li>
<p>Bind memory resources with the decode video session by calling
<a href="chap39.html#vkBindVideoSessionMemoryKHR">vkBindVideoSessionMemoryKHR</a>.
The video session <strong class="purple">cannot</strong> be used until memory resources are allocated
and bound to it.
In order to determine the required memory sizes and heap types of the
device memory allocations, <a href="chap39.html#vkGetVideoSessionMemoryRequirementsKHR">vkGetVideoSessionMemoryRequirementsKHR</a>
<strong class="purple">should</strong> be called.</p>
</li>
<li>
<p>Create one or more <a href="chap39.html#video-session-parameters-introduction">Session
Parameter objects</a> for use across command buffer recording operations,
if required by the codec extension in use.
These objects <strong class="purple">must</strong> be created against a <a href="chap39.html#video-session">video session</a>
with the parameters required by the codec.
Each <a href="chap39.html#video-session-parameters-introduction">Session Parameter object</a>
created is a child object of the associated <a href="chap39.html#video-session">Session
object</a> and <strong class="purple">cannot</strong> be bound in the command buffer with any other
<a href="chap39.html#video-session">Session Object</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The recording of Video Decode Commands against a Vulkan command buffer
consists of the following sequence:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="chap39.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> starts the recording of one or more Video
Decode operations in the command buffer.
For each Video Decode Command operation, a Video Session <strong class="purple">must</strong> be bound
to the command buffer within this command.
This command establishes a Vulkan Video Decode Context that consists of
the bound Video Session Object, Session Parameters Object, and the
required Video Picture Resources.
The established Video Decode Context is in effect until the
<a href="chap39.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> command is recorded.
If more Video Decode operations are to be required after the
<a href="chap39.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> command, another Video Decode Context <strong class="purple">can</strong>
be started with the <a href="chap39.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command.</p>
</li>
<li>
<p><a href="chap39.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a> specifies one or more compressed data buffers
to be decoded.
The <a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a> parameters, and the codec extension
structures chained to this, specify the details of the decode operation.</p>
</li>
<li>
<p><a href="chap39.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a> records operations against the decoded
data, decoding device, or the Video Session state.</p>
</li>
<li>
<p><a href="chap39.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> signals the end of the recording of the
Vulkan Video Decode Context, as established by
<a href="chap39.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In addition to the above, the following commands <strong class="purple">can</strong> be recorded between
<a href="chap39.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> and <a href="chap39.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Query operations</p>
</li>
<li>
<p>Global Memory Barriers</p>
</li>
<li>
<p>Buffer Memory Barriers</p>
</li>
<li>
<p>Image Memory Barriers (these <strong class="purple">must</strong> be used to transition the Video
Picture Resources to the proper
<code>VK_IMAGE_LAYOUT_VIDEO_DECODE_DPB_KHR</code> and
<code>VK_IMAGE_LAYOUT_VIDEO_DECODE_DST_KHR</code> layouts).</p>
</li>
<li>
<p>Pipeline Barriers</p>
</li>
<li>
<p>Events</p>
</li>
<li>
<p>Timestamps</p>
</li>
<li>
<p>Device Groups (device mask)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following Video Decode related commands <strong class="purple">must</strong> be recorded <strong>outside</strong> the
Vulkan Video Decode Context established with the
<a href="chap39.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> and <a href="chap39.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> commands:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sparse Memory Binding</p>
</li>
<li>
<p>Copy Commands</p>
</li>
<li>
<p>Clear Commands</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="video-picture-decode-modes"><a class="anchor" href="chap39.html#video-picture-decode-modes"></a>39.5.1. Video Picture Decode Modes</h4>
<div class="paragraph">
<p>There are a few ways that the <a href="chap39.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a> can be configured
for the Video Picture Decode Operations, based on:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if the <a href="chap39.html#decoded-output-picture">output resource</a> would need to be used
as <a href="chap39.html#reference-picture">Reference Picture</a> for subsequent decode
operations and;</p>
</li>
<li>
<p>if <a href="chap39.html#dpb-slot">DPB Slots</a> are required for use as
<a href="chap39.html#reference-picture">Reference Pictures</a> indexes.</p>
</li>
</ul>
</div>
<div id="video-picture-decode-no-reference-pictures-no-slot-update" class="paragraph">
<p>The most basic Video Picture Decode operation with the
<a href="chap39.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a> command is to output the decoded pixel data
without using any DPB <a href="chap39.html#reference-picture">Reference Pictures</a> and without
updating any <a href="chap39.html#dpb-slot">DPB Slot’s</a> indexes.</p>
</div>
<div class="paragraph">
<p>In this case, the following <a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a> parameters <strong class="purple">must</strong> be
set:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot-&gt;pPictureResource-&gt;imageViewBinding</code>
<strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageView">VkImageView</a>.
This <a href="chap12.html#VkImageView">VkImageView</a> represents the <a href="chap39.html#decoded-output-picture">output
resource</a> where the decoded pixels will be populated after a successful
decode operation.</p>
</li>
<li>
<p><a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot-&gt;slotIndex</code> <strong class="purple">must</strong>
be an invalid <a href="chap39.html#dpb-slot">DPB Slot</a> index (-1) since the decoded picture
is not intended to be used as a reference picture with subsequent video
decode operations.</p>
</li>
<li>
<p>The value of the <a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>referenceSlotCount</code>
<strong class="purple">can</strong> be <code>0</code> and <a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code> <strong class="purple">can</strong>
be <code>NULL</code>.</p>
</li>
<li>
<p>If <a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code> is not <code>NULL</code>, it
<strong class="purple">can</strong> still have entries representing <a href="chap39.html#dpb-slot">DPB Slot</a> indexes with
a <a href="chap39.html#video-session-dpb-slot-states">Valid Picture Reference</a>.
The codec extension selects the actual use of the
<a href="chap39.html#reference-picture">Reference Pictures</a> by referring to a
<a href="chap39.html#dpb-slot">DPB Slot</a> index with a <a href="chap39.html#video-session-dpb-slot-states">Valid Picture Reference</a>.</p>
</li>
</ul>
</div>
<div id="video-picture-decode-with-references-no-slot-update" class="paragraph">
<p>Video Picture Decode operations with the <a href="chap39.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a> command,
requiring one or more <a href="chap39.html#reference-picture">Reference Pictures</a> for the
predictions of the values of samples for the <a href="chap39.html#decoded-output-picture">decoded output picture</a> would require <a href="chap39.html#dpb-slot">DPB Slots</a> with
<a href="chap39.html#video-session-dpb-slot-states">Valid Picture Reference</a>.</p>
</div>
<div class="paragraph">
<p>In this case, the following <a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a> parameters <strong class="purple">must</strong> be
set:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot-&gt;pPictureResource-&gt;imageViewBinding</code>
<strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageView">VkImageView</a>.
This <a href="chap12.html#VkImageView">VkImageView</a> represents the <a href="chap39.html#decoded-output-picture">output
resource</a> where the decoded pixels will be populated after a successful
decode operation.</p>
</li>
<li>
<p><a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot-&gt;slotIndex</code> <strong class="purple">must</strong>
be an invalid <a href="chap39.html#dpb-slot">DPB Slot</a> index (-1) since the decoded picture
is not intended to be used as a reference picture with subsequent video
decode operations.</p>
</li>
<li>
<p>The value of the <a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>referenceSlotCount</code>
<strong class="purple">must</strong> not be <code>0</code> and <a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code>
should represent at least the number of the reference slots required for
the decode operation.
The codec extension selects the actual use of the
<a href="chap39.html#reference-picture">Reference Pictures</a> by referring to a
<a href="chap39.html#dpb-slot">DPB Slot</a> index with a <a href="chap39.html#video-session-dpb-slot-states">Valid Picture Reference</a>.
If the implementation does not use an opaque DPB, each <a href="chap39.html#dpb-slot">DPB
slot</a> representing a <a href="chap39.html#reference-picture">reference picture</a> <strong class="purple">must</strong>
refer to a valid <a href="chap12.html#VkImageView">image view</a>.
The <a href="chap12.html#VkImageView">image views</a> <strong class="purple">must</strong> represent the same
<a href="chap12.html#resources-images">image resources</a> that were used to create the
<a href="chap39.html#reference-picture">reference picture</a> for the corresponding
<a href="chap39.html#dpb-slot">DPB Slot</a> index.</p>
</li>
<li>
<p><a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code> <strong class="purple">can</strong> still have
entries representing <a href="chap39.html#dpb-slot">DPB Slot</a> indexes with a
<a href="chap39.html#video-session-dpb-slot-states">Valid Picture Reference</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After the <a href="chap39.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a> operation is completed successfully, the
<a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot-&gt;pPictureResource-&gt;imageViewBinding</code>
pixel data will be updated with the decoded content.
The operation will not update any <a href="chap39.html#dpb-slot">DPB Slot</a> with
<a href="chap39.html#reference-picture">Reference Pictures</a> data.
However, any <a href="chap39.html#dpb-slot">DPB Slot</a> activation, invalidation, or deactivation
operations requested via <a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code>
are still going to be performed.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="32 80 690 400" height="400" width="690" xml:space="preserve" id="svg2" version="1.1"><metadata id="metadata8"><rdf:rdf><cc:work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc:type><dc:title></dc:title></cc:work></rdf:rdf></metadata><defs id="defs6"><linearGradient id="linearGradient14225"><stop id="stop14227" offset="0" style="stop-color:#000000;stop-opacity:1;"></stop><stop id="stop14229" offset="1" style="stop-color:#000000;stop-opacity:0;"></stop></linearGradient><marker orient="auto" refY="0" refX="0" id="marker10521" style="overflow:visible"><path id="path10523" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.2,0,0,-0.2,-1.2,0)"></path></marker><marker style="overflow:visible" id="marker10431" refX="0" refY="0" orient="auto"><path transform="matrix(-0.2,0,0,-0.2,-1.2,0)" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" id="path10433"></path></marker><marker orient="auto" refY="0" refX="0" id="marker9980" style="overflow:visible"><path id="path9982" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.2,0,0,-0.2,-1.2,0)"></path></marker><marker style="overflow:visible" id="marker9848" refX="0" refY="0" orient="auto"><path transform="matrix(-0.2,0,0,-0.2,-1.2,0)" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" id="path9850"></path></marker><marker orient="auto" refY="0" refX="0" id="marker9520" style="overflow:visible"><path id="path9522" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.2,0,0,-0.2,-1.2,0)"></path></marker><marker style="overflow:visible" id="marker9422" refX="0" refY="0" orient="auto"><path transform="matrix(-0.2,0,0,-0.2,-1.2,0)" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" id="path9424"></path></marker><marker style="overflow:visible" id="marker9412" refX="0" refY="0" orient="auto"><path transform="matrix(-0.2,0,0,-0.2,-1.2,0)" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" id="path9414"></path></marker><marker orient="auto" refY="0" refX="0" id="Arrow1Send" style="overflow:visible"><path id="path8951" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.2,0,0,-0.2,-1.2,0)"></path></marker><clipPath id="clipPath404" clipPathUnits="userSpaceOnUse"><path style="clip-rule:evenodd" id="path402" d="M 1.4305e-5,0 960.00001,0 l 0,540 L 1.4305e-5,540 Z"></path></clipPath><linearGradient gradientTransform="translate(-50,-70.000014)" gradientUnits="userSpaceOnUse" y2="350" x2="592" y1="350" x1="532" id="linearGradient14233" xlink:href="#linearGradient14225"></linearGradient><marker orient="auto" refY="0" refX="0" id="marker9980-1" style="overflow:visible"><path id="path9982-1" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.2,0,0,-0.2,-1.2,0)"></path></marker></defs><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#b3b3b3;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect10661" width="520" height="160" x="42" y="199.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect10415" width="140" height="79.900002" x="572" y="100.1"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8500-7" width="30" height="110" x="332" y="229.99998"></rect><path id="path14627" d="m 562,145 0,5 10,-10 -10,-10 0,5 -250,0 0,10 z" style="fill:#cccccc;fill-rule:evenodd;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"></path><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect9622" width="120" height="100" x="192" y="90"></rect><path style="fill:#ffffff;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" d="m 312,140 -50,-50 0,30 -70,0 0,40 70,0 0,30 50,-50" id="path9624"></path><path id="path14625" d="m 72,230 0,-60 110,0 0,-5 10,10 -10,10 0,-5 -10,0 0,50 -10,0 0,-50 -50,0 0,50 -10,0 0,-50 -20,0 0,50 -10,0" style="fill:#cccccc;fill-rule:evenodd;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"></path><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8498" width="30" height="110" x="62" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8500" width="30" height="110" x="92" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8502" width="30" height="110" x="122" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8504" width="30" height="110" x="152" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8506" width="30" height="110" x="182" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8508" width="30" height="110" x="212" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8510" width="30" height="110" x="242" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8512" width="30" height="110" x="272" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8498-2" width="30" height="110" x="302" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8502-0" width="30" height="110" x="362" y="229.99998" ry="0"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8504-9" width="30" height="110" x="392" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8506-3" width="30" height="110" x="422" y="229.99998"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8508-6" width="30" height="110" x="452" y="229.99998"></rect><path id="rect8510-0" d="m 480,227.99999 0,2 0,112 30,0 4,0 30,0 0,-114 -30,0 -4,0 -30,0 z m 4,4 26,0 0,106 -26,0 0,-106 z m 30,0 26,0 0,106 -26,0 0,-106 z" style="color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;baseline-shift:baseline;text-anchor:start;white-space:normal;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:url(#linearGradient14233);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></path><text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="77.007317" y="329.9996" id="text8569"><tspan id="tspan8571" x="76.907318" y="329.9996">0</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="106.87183" y="329.9996" id="text8577"><tspan id="tspan8579" x="106.77182" y="329.9996">1</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="137.20508" y="329.9996" id="text8581"><tspan id="tspan8583" x="137.10507" y="329.9996">2</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="167.03296" y="329.9996" id="text8585"><tspan id="tspan8587" x="166.93295" y="329.9996">3</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="197.05859" y="329.9996" id="text8589"><tspan id="tspan8591" x="196.95859" y="329.9996">4</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="227.08057" y="329.9996" id="text8593"><tspan id="tspan8595" x="226.98056" y="329.9996">5</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="256.95239" y="329.9996" id="text8597"><tspan id="tspan8599" x="256.85239" y="329.9996">6</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="287.0293" y="329.9996" id="text8601"><tspan id="tspan8603" x="286.92929" y="329.9996">7</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="317.00732" y="329.9996" id="text8605"><tspan id="tspan8607" x="316.90732" y="329.9996">8</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="347.05859" y="329.9996" id="text8609"><tspan id="tspan8611" x="346.95859" y="329.9996">9</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="376.67773" y="329.9996" id="text8613"><tspan id="tspan8615" x="376.57773" y="329.9996">.</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="406.87183" y="329.9996" id="text8617"><tspan id="tspan8619" x="406.77182" y="329.9996">.</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="436.93042" y="329.9996" id="text8621"><tspan id="tspan8623" x="436.83041" y="329.9996" style="letter-spacing:0px">.</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="466.78027" y="329.9996" id="text8625"><tspan id="tspan8627" x="466.6803" y="329.9996" style="letter-spacing:0px">.</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="496.60083" y="329.9996" id="text8629"><tspan id="tspan8631" x="496.50085" y="329.9996" style="letter-spacing:0px">.</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="526.83521" y="329.9996" id="text8633"><tspan id="tspan8635" x="526.73523" y="329.9996" style="letter-spacing:0px">.</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="247.57275" y="219.99998" id="text8871"><tspan id="tspan8873" x="247.47275" y="219.99998" style="font-size:17.5px;letter-spacing:0px">Dpb slots</tspan></text>
<text id="text14174-3" y="270" x="167.56763" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:start;letter-spacing:-0.2px;word-spacing:0px;text-anchor:start;fill:#000000;fill-opacity:1;stroke:#b3b3b3;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;" xml:space="preserve"><tspan style="text-align:center;text-anchor:middle;stroke:#b3b3b3;stroke-width:4;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;stroke-linejoin:round;" y="270" x="167.46762" id="tspan14176-4">Valid picture</tspan><tspan style="text-align:center;text-anchor:middle;stroke:#b3b3b3;stroke-width:4;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;stroke-linejoin:round;" id="tspan14178-0" y="301.25" x="167.46762">references</tspan></text>
<text id="text14174" y="270" x="167.56763" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:start;letter-spacing:-0.2px;word-spacing:0px;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="text-align:center;text-anchor:middle" y="270" x="167.46762" id="tspan14176">Valid picture</tspan><tspan style="text-align:center;text-anchor:middle" id="tspan14178" y="301.25" x="167.46762">references</tspan></text>
<text id="text14180-3" y="269.7695" x="406.57883" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:#ffffff;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;" xml:space="preserve"><tspan y="269.7695" x="406.47882" id="tspan14182-9">Unused picture</tspan><tspan id="tspan14184-1" y="301.0195" x="406.47882">references</tspan></text>
<text id="text14180" y="269.7695" x="406.57886" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="269.7695" x="406.47885" id="tspan14182">Unused picture</tspan><tspan id="tspan14184" y="301.0195" x="406.47885">references</tspan></text>
<g id="g398" transform="matrix(1.3333333,0,0,-1.3333333,-212.33581,674.35391)"><g id="g400" clip-path="url(#clipPath404)"></g></g><text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="142" y="460" id="text8573"><tspan id="tspan8575" x="142" y="460"></tspan></text>
<rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8920" width="30" height="30" x="62" y="380"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8922" width="30" height="30" x="92" y="380"></rect><path style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9422)" d="m 77,379.99999 0,-32" id="path8926"></path><path style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#Arrow1Send)" d="m 107,379.99999 0,-32" id="path8928"></path><path style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9412)" d="m 137,379.99999 0,-10 30,0 0,-22" id="path8930"></path><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect8924" width="30" height="30" x="122" y="380"></rect><text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="295.31128" y="401.5242" id="text9614"><tspan id="tspan9616" x="295.31128" y="401.5242" style="font-size:17.5px;letter-spacing:0px">VkVideoReferenceSlotsKHRs</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="247.53848" y="149.32007" id="text9626"><tspan id="tspan9628" x="247.43848" y="149.32007" style="letter-spacing:0px">Decode</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="222" y="260" id="text9968"><tspan id="tspan9970" x="222" y="260"></tspan></text>
<path style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9980)" d="m 192,434.99998 -115,0 0,-16" id="path9972"></path><text xml:space="preserve" style="color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:17.5px;line-height:125%;font-family:sans-serif;text-indent:0;text-align:center;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:0px;word-spacing:0px;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;baseline-shift:baseline;text-anchor:middle;white-space:normal;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" x="117.51691" y="452.32742" id="text10056"><tspan id="tspan10058" x="117.4169" y="452.32742" style="color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:17.5px;line-height:125%;font-family:sans-serif;text-indent:0;text-align:center;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:0px;word-spacing:0px;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;baseline-shift:baseline;text-anchor:middle;white-space:normal;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate">pReferenceSlots</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="519.72882" y="452.32742" id="text10411"><tspan id="tspan10413" x="519.62885" y="452.32742" style="font-size:17.5px;letter-spacing:0px">dstPictureResource</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="642.00842" y="131.32198" id="text10417"><tspan id="tspan10419" x="641.90845" y="131.32198" style="letter-spacing:0px">Decoded</tspan><tspan x="641.90845" y="162.57198" id="tspan10421" style="letter-spacing:0px">image</tspan></text>
<rect y="420" x="192" height="30" width="240" id="rect14235" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><text id="text14237" y="441.52405" x="312.18799" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="font-size:17.5px;text-align:center;text-anchor:middle" y="441.52405" x="312.08798" id="tspan14239">VkVideoDecodeInfoKHR</tspan></text>
<path id="path14623" d="m 432,435 210,0 0,-247" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker10521)"></path><path id="path14629" d="m 182,100 0,-5 10,10 -10,10 0,-5 -20,0 0,-10 z" style="fill:#cccccc;fill-rule:evenodd;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"></path><g id="g10096" transform="translate(-1.3165542,0)"><path id="path392" style="fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:none" d="m 39.766092,94.146902 c 0,-5.92 27.68666,-10.72 61.839998,-10.72 34.14666,0 61.84,4.8 61.84,10.72 l 0,42.879988 c 0,5.92 -27.69334,10.72 -61.84,10.72 -34.153338,0 -61.839998,-4.8 -61.839998,-10.72 z"></path><path id="path394" style="fill:none;stroke:#000000;stroke-width:1.27999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:8;stroke-dasharray:none;stroke-opacity:1" d="m 163.44609,94.146902 c 0,5.919998 -27.69334,10.719988 -61.84,10.719988 -34.153338,0 -61.839998,-4.79999 -61.839998,-10.719988"></path><path id="path396" style="fill:none;stroke:#000000;stroke-width:1.27999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:8;stroke-dasharray:none;stroke-opacity:1" d="m 39.766092,94.146902 c 0,-5.92 27.68666,-10.72 61.839998,-10.72 34.14666,0 61.84,4.8 61.84,10.72 l 0,42.879988 c 0,5.92 -27.69334,10.72 -61.84,10.72 -34.153338,0 -61.839998,-4.8 -61.839998,-10.72 z"></path><text id="text10060" y="130.51297" x="101.2219" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="130.51297" x="101.1219" id="tspan10062" style="letter-spacing:0px">Bitstream</tspan></text>
</g></svg>
</div>
<div class="title">Figure 28. Decoding a Frame to VkImageView without a slot update for a <strong>Reference Picture</strong></div>
</div>
<div class="sect4">
<h5 id="video-picture-decode-with-reference-pictures-and-slot-update"><a class="anchor" href="chap39.html#video-picture-decode-with-reference-pictures-and-slot-update"></a>Video Picture Decode with a <a href="chap39.html#reference-picture">Reference Picture</a> slot update and using optional <a href="chap39.html#reference-picture">Reference Pictures</a></h5>
<div class="paragraph">
<p>When it is known that the picture to be decoded will be used as a
<a href="chap39.html#reference-picture">reference picture</a> for subsequent decode operations,
one of the available <a href="chap39.html#dpb-slot">DPB Slots</a> needs to be selected for
<a href="chap39.html#video-session-activating-dpb-slot">activation and update</a> operations as
part of the <a href="chap39.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a> command.</p>
</div>
<div class="paragraph">
<p>Based on whether a decode operation
<a href="chap39.html#video-picture-decode-with-references-no-slot-update">with reference
pictures</a> or <a href="chap39.html#video-picture-decode-no-reference-pictures-no-slot-update">without reference pictures</a> is required, the <a href="chap39.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a>
should be configured with parameters as described in the previous sections.
In addition, one of the available <a href="chap39.html#dpb-slot">DPB Slots</a> <strong class="purple">must</strong> be selected
by the application, activated with resources and then set-up for an update
with the decode operation.</p>
</div>
<div class="paragraph">
<p>In this case, the following <a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a> parameters <strong class="purple">must</strong> be
set:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot-&gt;pPictureResource-&gt;imageViewBinding</code>
<strong class="purple">must</strong> be a valid <a href="chap12.html#VkImageView">VkImageView</a>.
This <a href="chap12.html#VkImageView">VkImageView</a> represents the <a href="chap39.html#decoded-output-picture">output
resource</a> where the decoded pixels will be populated after a successful
decode operation.
If the implementation does not use an opaque DPB, both the
<a href="chap39.html#decoded-output-picture">output</a> and <a href="chap39.html#reference-picture">reference
picture</a> resource coincide.</p>
</li>
<li>
<p><a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot-&gt;slotIndex</code> <strong class="purple">must</strong>
be a valid <a href="chap39.html#dpb-slot">DPB Slot</a> index selected by the application,
based on the currently available slots.</p>
</li>
<li>
<p><a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code> <strong class="purple">can</strong> still have
entries representing <a href="chap39.html#dpb-slot">DPB Slot</a> indexes with a
<a href="chap39.html#video-session-dpb-slot-states">Valid Picture Reference</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After the <a href="chap39.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a> operation has completed successfully,
the decoded content will be available in the resource provided for
<a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pSetupReferenceSlot-&gt;pPictureResource-&gt;imageViewBinding</code>.
In addition, this operation will update the selected <a href="chap39.html#dpb-slot">DPB Slot</a>
with <a href="chap39.html#reference-picture">Reference Pictures</a> data.
Any other <a href="chap39.html#dpb-slot">DPB Slot</a> activation,invalidation, or deactivation
operation requested via the
<a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a>::<code>pReferenceSlots</code> are going to be performed
as well.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="svg2" xml:space="preserve" width="690" height="400" viewBox="32 80 690 400"><metadata id="metadata8"><rdf:rdf><cc:work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc:type><dc:title></dc:title></cc:work></rdf:rdf></metadata><defs id="defs6"><linearGradient id="linearGradient14225"><stop style="stop-color:#000000;stop-opacity:1;" offset="0" id="stop14227"></stop><stop style="stop-color:#000000;stop-opacity:0;" offset="1" id="stop14229"></stop></linearGradient><marker style="overflow:visible" id="marker10521" refX="0" refY="0" orient="auto"><path transform="matrix(-0.2,0,0,-0.2,-1.2,0)" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" id="path10523"></path></marker><marker orient="auto" refY="0" refX="0" id="marker10431" style="overflow:visible"><path id="path10433" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.2,0,0,-0.2,-1.2,0)"></path></marker><marker style="overflow:visible" id="marker9980" refX="0" refY="0" orient="auto"><path transform="matrix(-0.2,0,0,-0.2,-1.2,0)" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" id="path9982"></path></marker><marker orient="auto" refY="0" refX="0" id="marker9848" style="overflow:visible"><path id="path9850" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.2,0,0,-0.2,-1.2,0)"></path></marker><marker style="overflow:visible" id="marker9520" refX="0" refY="0" orient="auto"><path transform="matrix(-0.2,0,0,-0.2,-1.2,0)" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" id="path9522"></path></marker><marker orient="auto" refY="0" refX="0" id="marker9422" style="overflow:visible"><path id="path9424" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.2,0,0,-0.2,-1.2,0)"></path></marker><marker orient="auto" refY="0" refX="0" id="marker9412" style="overflow:visible"><path id="path9414" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" transform="matrix(-0.2,0,0,-0.2,-1.2,0)"></path></marker><marker style="overflow:visible" id="Arrow1Send" refX="0" refY="0" orient="auto"><path transform="matrix(-0.2,0,0,-0.2,-1.2,0)" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" id="path8951"></path></marker><clipPath clipPathUnits="userSpaceOnUse" id="clipPath404"><path d="M 1.4305e-5,0 960.00001,0 l 0,540 L 1.4305e-5,540 Z" id="path402" style="clip-rule:evenodd"></path></clipPath><linearGradient xlink:href="#linearGradient14225" id="linearGradient14233" x1="532" y1="350" x2="592" y2="350" gradientUnits="userSpaceOnUse" gradientTransform="translate(-50,-70.000014)"></linearGradient><marker style="overflow:visible" id="marker9980-1" refX="0" refY="0" orient="auto"><path transform="matrix(-0.2,0,0,-0.2,-1.2,0)" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1pt;stroke-opacity:1" d="M 0,0 5,-5 -12.5,0 5,5 0,0 Z" id="path9982-1"></path></marker></defs><rect y="199.99998" x="42" height="160" width="520" id="rect10661" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#b3b3b3;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="100.1" x="572" height="79.900002" width="140" id="rect10415" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="332" height="110" width="30" id="rect8500-7" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><path style="fill:#cccccc;fill-rule:evenodd;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 342,145 0,75 -5,0 10,10 10,-10 -5,0 0,-75 210,0 0,5 10,-10 -10,-10 0,5 -250,0 0,10 z" id="path14627"></path><rect y="90" x="192" height="100" width="120" id="rect9622" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><path id="path9624" d="m 312,140 -50,-50 0,30 -70,0 0,40 70,0 0,30 50,-50" style="fill:#ffffff;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"></path><path style="fill:#cccccc;fill-rule:evenodd;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 72,230 0,-60 110,0 0,-5 10,10 -10,10 0,-5 -10,0 0,50 -10,0 0,-50 -50,0 0,50 -10,0 0,-50 -20,0 0,50 -10,0" id="path14625"></path><rect y="229.99998" x="62" height="110" width="30" id="rect8498" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="92" height="110" width="30" id="rect8500" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="122" height="110" width="30" id="rect8502" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="152" height="110" width="30" id="rect8504" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="182" height="110" width="30" id="rect8506" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="212" height="110" width="30" id="rect8508" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="242" height="110" width="30" id="rect8510" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="272" height="110" width="30" id="rect8512" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="302" height="110" width="30" id="rect8498-2" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect ry="0" y="229.99998" x="362" height="110" width="30" id="rect8502-0" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="392" height="110" width="30" id="rect8504-9" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="422" height="110" width="30" id="rect8506-3" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="229.99998" x="452" height="110" width="30" id="rect8508-6" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#ffffff;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><path style="color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;baseline-shift:baseline;text-anchor:start;white-space:normal;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:url(#linearGradient14233);fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" d="m 480,227.99999 0,2 0,112 30,0 4,0 30,0 0,-114 -30,0 -4,0 -30,0 z m 4,4 26,0 0,106 -26,0 0,-106 z m 30,0 26,0 0,106 -26,0 0,-106 z" id="rect8510-0"></path><text id="text8569" y="329.9996" x="77.007317" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="76.907318" id="tspan8571">0</tspan></text>
<text id="text8577" y="329.9996" x="106.87183" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="106.77182" id="tspan8579">1</tspan></text>
<text id="text8581" y="329.9996" x="137.20508" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="137.10507" id="tspan8583">2</tspan></text>
<text id="text8585" y="329.9996" x="167.03296" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="166.93295" id="tspan8587">3</tspan></text>
<text id="text8589" y="329.9996" x="197.05859" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="196.95859" id="tspan8591">4</tspan></text>
<text id="text8593" y="329.9996" x="227.08057" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="226.98056" id="tspan8595">5</tspan></text>
<text id="text8597" y="329.9996" x="256.95239" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="256.85239" id="tspan8599">6</tspan></text>
<text id="text8601" y="329.9996" x="287.0293" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="286.92929" id="tspan8603">7</tspan></text>
<text id="text8605" y="329.9996" x="317.00732" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="316.90732" id="tspan8607">8</tspan></text>
<text id="text8609" y="329.9996" x="347.05859" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="346.95859" id="tspan8611">9</tspan></text>
<text id="text8613" y="329.9996" x="376.67773" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="376.57773" id="tspan8615">.</tspan></text>
<text id="text8617" y="329.9996" x="406.87183" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="329.9996" x="406.77182" id="tspan8619">.</tspan></text>
<text id="text8621" y="329.9996" x="436.93042" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="letter-spacing:0px" y="329.9996" x="436.83041" id="tspan8623">.</tspan></text>
<text id="text8625" y="329.9996" x="466.78027" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="letter-spacing:0px" y="329.9996" x="466.6803" id="tspan8627">.</tspan></text>
<text id="text8629" y="329.9996" x="496.60083" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="letter-spacing:0px" y="329.9996" x="496.50085" id="tspan8631">.</tspan></text>
<text id="text8633" y="329.9996" x="526.83521" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="letter-spacing:0px" y="329.9996" x="526.73523" id="tspan8635">.</tspan></text>
<text id="text8871" y="219.99998" x="247.57275" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="font-size:17.5px;letter-spacing:0px" y="219.99998" x="247.47275" id="tspan8873">Dpb slots</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:start;letter-spacing:-0.2px;word-spacing:0px;text-anchor:start;fill:#000000;fill-opacity:1;stroke:#b3b3b3;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;" x="167.56763" y="270" id="text14174-3"><tspan id="tspan14176-4" x="167.46762" y="270" style="text-align:center;text-anchor:middle;stroke:#b3b3b3;stroke-width:4;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;stroke-linejoin:round;">Valid picture</tspan><tspan x="167.46762" y="301.25" id="tspan14178-0" style="text-align:center;text-anchor:middle;stroke:#b3b3b3;stroke-width:4;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;stroke-linejoin:round;">references</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:start;letter-spacing:-0.2px;word-spacing:0px;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="167.56763" y="270" id="text14174"><tspan id="tspan14176" x="167.46762" y="270" style="text-align:center;text-anchor:middle">Valid picture</tspan><tspan x="167.46762" y="301.25" id="tspan14178" style="text-align:center;text-anchor:middle">references</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:#ffffff;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;" x="406.57883" y="269.7695" id="text14180-3"><tspan id="tspan14182-9" x="406.47882" y="269.7695">Unused picture</tspan><tspan x="406.47882" y="301.0195" id="tspan14184-1">references</tspan></text>
<text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="406.57886" y="269.7695" id="text14180"><tspan id="tspan14182" x="406.47885" y="269.7695">Unused picture</tspan><tspan x="406.47885" y="301.0195" id="tspan14184">references</tspan></text>
<g transform="matrix(1.3333333,0,0,-1.3333333,-212.33581,674.35391)" id="g398"><g clip-path="url(#clipPath404)" id="g400"></g></g><text id="text8573" y="460" x="142" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="460" x="142" id="tspan8575"></tspan></text>
<rect y="380" x="62" height="30" width="30" id="rect8920" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="380" x="92" height="30" width="30" id="rect8922" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><path id="path8926" d="m 77,379.99999 0,-32" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9422)"></path><path id="path8928" d="m 107,379.99999 0,-32" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#Arrow1Send)"></path><path id="path8930" d="m 137,379.99999 0,-10 30,0 0,-22" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9412)"></path><rect y="380" x="122" height="30" width="30" id="rect8924" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect y="380" x="532.00012" height="30" width="30" id="rect9510" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><path id="path9512" d="m 547,379.99999 0,-10 -200,0 0,-22" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9520)"></path><text id="text9614" y="401.5242" x="295.31128" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="font-size:17.5px;letter-spacing:0px" y="401.5242" x="295.31128" id="tspan9616">VkVideoReferenceSlotsKHRs</tspan></text>
<text id="text9626" y="149.32007" x="247.53848" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="letter-spacing:0px" y="149.32007" x="247.43848" id="tspan9628">Decode</tspan></text>
<text id="text9964" y="388" x="486.00012" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="font-size:17.5px;letter-spacing:0px" y="388" x="485.90012" id="tspan9966">slotIndex</tspan></text>
<text id="text9968" y="260" x="222" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan y="260" x="222" id="tspan9970"></tspan></text>
<path id="path9972" d="m 192,434.99998 -115,0 0,-16" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9980)"></path><text id="text10056" y="452.80588" x="117.51691" style="color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:17.5px;line-height:125%;font-family:sans-serif;text-indent:0;text-align:center;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:0px;word-spacing:0px;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;baseline-shift:baseline;text-anchor:middle;white-space:normal;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" xml:space="preserve"><tspan style="color:#000000;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:17.5px;line-height:125%;font-family:sans-serif;text-indent:0;text-align:center;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000000;letter-spacing:0px;word-spacing:0px;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;baseline-shift:baseline;text-anchor:middle;white-space:normal;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" y="452.80588" x="117.4169" id="tspan10058">pReferenceSlots</tspan></text>
<text id="text10411" y="710.146" x="-323.39304" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve" transform="matrix(0,-1,1,0,0,0)"><tspan style="font-size:17.5px;letter-spacing:0px" y="710.146" x="-323.49304" id="tspan10413">dstPictureResource</tspan></text>
<text id="text10417" y="131.32198" x="642.00842" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="letter-spacing:0px" y="131.32198" x="641.90845" id="tspan10419">Decoded</tspan><tspan style="letter-spacing:0px" id="tspan10421" y="162.57198" x="641.90845">image</tspan></text>
<path id="path10513" d="m 562,395 30,0 0,-206" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:12, 4;stroke-dashoffset:0;stroke-opacity:1;marker-end:url(#marker10521)"></path><text id="text10657" y="583.05688" x="-289.40112" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve" transform="matrix(0,-1,1,0,0,0)"><tspan style="font-size:17.5px;letter-spacing:0px" y="583.05688" x="-289.5011" id="tspan10659">pPictureResource</tspan></text>
<text id="text10706" y="245.99998" x="606" style="font-style:normal;font-weight:normal;font-size:15px;line-height:125%;font-family:sans-serif;text-align:start;letter-spacing:0px;word-spacing:0px;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="font-style:italic;font-size:15px;letter-spacing:0px" y="245.99998" x="606" id="tspan10708">Only if</tspan><tspan id="tspan10756" style="font-style:italic;font-size:15px;letter-spacing:0px" y="264.75" x="606">the same</tspan><tspan style="font-style:italic;font-size:15px;letter-spacing:0px" id="tspan10710" y="283.5" x="606">picture</tspan><tspan style="font-style:italic;font-size:15px;letter-spacing:0px" id="tspan10712" y="302.25" x="606">resource</tspan><tspan style="font-style:italic;font-size:15px;letter-spacing:0px" id="tspan10714" y="321" x="606">is used</tspan><tspan id="tspan10762" style="font-style:italic;font-size:15px;letter-spacing:0px" y="339.75" x="606">for the</tspan><tspan style="font-style:italic;font-size:15px;letter-spacing:0px" id="tspan10716" y="358.5" x="606">decode</tspan><tspan id="tspan10760" style="font-style:italic;font-size:15px;letter-spacing:0px" y="377.25" x="606">Dpb and</tspan><tspan style="font-style:italic;font-size:15px;letter-spacing:0px" id="tspan10718" y="396" x="606">output</tspan><tspan style="font-style:italic;font-size:15px;letter-spacing:0px" id="tspan10720" y="414.75" x="606">image</tspan></text>
<path id="path10722" d="m 592,210 20,19.99999" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:4,4;stroke-dashoffset:0"></path><rect ry="0" y="229.99998" x="602" height="192" width="79" id="rect10758" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:4,4;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate"></rect><rect style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="rect14235" width="240" height="30" x="192" y="420"></rect><text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="312.18799" y="441.52405" id="text14237"><tspan id="tspan14239" x="312.08798" y="441.52405" style="font-size:17.5px;text-align:center;text-anchor:middle">VkVideoDecodeInfoKHR</tspan></text>
<text id="text10056-1" y="452.80588" x="527.51691" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" xml:space="preserve"><tspan style="font-size:17.5px;letter-spacing:0px" y="452.80588" x="527.41687" id="tspan10058-3">pSetupReferenceSlot</tspan></text>
<path id="path9972-0" d="m 432,434.99998 115,0 0,-16" style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker9980-1)"></path><path style="fill:none;fill-rule:evenodd;stroke:#000000;stroke-width:4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#marker10521)" d="m 312,450 0,20 380,0 0,-282" id="path14623"></path><path style="fill:#cccccc;fill-rule:evenodd;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 182,100 0,-5 10,10 -10,10 0,-5 -20,0 0,-10 z" id="path14629"></path><g transform="translate(-1.3165542,0)" id="g10096"><path d="m 39.766092,94.146902 c 0,-5.92 27.68666,-10.72 61.839998,-10.72 34.14666,0 61.84,4.8 61.84,10.72 l 0,42.879988 c 0,5.92 -27.69334,10.72 -61.84,10.72 -34.153338,0 -61.839998,-4.8 -61.839998,-10.72 z" style="fill:#b3b3b3;fill-opacity:1;fill-rule:evenodd;stroke:none" id="path392"></path><path d="m 163.44609,94.146902 c 0,5.919998 -27.69334,10.719988 -61.84,10.719988 -34.153338,0 -61.839998,-4.79999 -61.839998,-10.719988" style="fill:none;stroke:#000000;stroke-width:1.27999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:8;stroke-dasharray:none;stroke-opacity:1" id="path394"></path><path d="m 39.766092,94.146902 c 0,-5.92 27.68666,-10.72 61.839998,-10.72 34.14666,0 61.84,4.8 61.84,10.72 l 0,42.879988 c 0,5.92 -27.69334,10.72 -61.84,10.72 -34.153338,0 -61.839998,-4.8 -61.839998,-10.72 z" style="fill:none;stroke:#000000;stroke-width:1.27999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:8;stroke-dasharray:none;stroke-opacity:1" id="path396"></path><text xml:space="preserve" style="font-style:normal;font-weight:normal;font-size:25px;line-height:125%;font-family:sans-serif;text-align:center;letter-spacing:-0.2px;word-spacing:0px;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" x="101.2219" y="130.51297" id="text10060"><tspan style="letter-spacing:0px" id="tspan10062" x="101.1219" y="130.51297">Bitstream</tspan></text>
</g></svg>
</div>
<div class="title">Figure 29. Decoding a Frame to VkImageView with an update to a <a href="chap39.html#reference-picture">Reference Pictures</a> DPB Slot</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_video_decode_command_buffer_commands"><a class="anchor" href="chap39.html#_video_decode_command_buffer_commands"></a>39.5.2. Video Decode Command Buffer Commands</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To decode a frame, call:</p>
</div>
<div id="vkCmdDecodeVideoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_decode_queue</span>
<span class="directive">void</span> vkCmdDecodeVideoKHR(
    VkCommandBuffer                             commandBuffer,
    <span class="directive">const</span> VkVideoDecodeInfoKHR*                 pFrameInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer to be filled with this
function for decode frame command.</p>
</li>
<li>
<p><code>pFrameInfo</code> is a pointer to a <a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a> structure.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-commandBuffer-parameter" href="chap39.html#VUID-vkCmdDecodeVideoKHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-pFrameInfo-parameter" href="chap39.html#VUID-vkCmdDecodeVideoKHR-pFrameInfo-parameter"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-pFrameInfo-parameter</span><br>
 <code>pFrameInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-commandBuffer-recording" href="chap39.html#VUID-vkCmdDecodeVideoKHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-commandBuffer-cmdpool" href="chap39.html#VUID-vkCmdDecodeVideoKHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support decode operations</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-renderpass" href="chap39.html#VUID-vkCmdDecodeVideoKHR-renderpass"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdDecodeVideoKHR-bufferlevel" href="chap39.html#VUID-vkCmdDecodeVideoKHR-bufferlevel"></a> <span class="vuid">VUID-vkCmdDecodeVideoKHR-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decode</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoDecodeInfoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_decode_queue</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoDecodeInfoKHR {
    VkStructureType                   sType;
    <span class="directive">const</span> <span class="directive">void</span>*                       pNext;
    VkVideoDecodeFlagsKHR             flags;
    VkOffset2D                        codedOffset;
    VkExtent2D                        codedExtent;
    VkBuffer                          srcBuffer;
    VkDeviceSize                      srcBufferOffset;
    VkDeviceSize                      srcBufferRange;
    VkVideoPictureResourceKHR         dstPictureResource;
    <span class="directive">const</span> VkVideoReferenceSlotKHR*    pSetupReferenceSlot;
    uint32_t                          referenceSlotCount;
    <span class="directive">const</span> VkVideoReferenceSlotKHR*    pReferenceSlots;
} VkVideoDecodeInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.
All the codec specific structures related to each frame(picture
parameters, quantization matrix, etc.) <strong class="purple">must</strong> be chained here and pass to
decode session with the function call <a href="chap39.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a>.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap39.html#VkVideoDecodeFlagBitsKHR">VkVideoDecodeFlagBitsKHR</a> specifying
decode flags, reserved for future versions of this specification.</p>
</li>
<li>
<p><code>codedOffset</code> is the coded offset of the decode operations.
The purpose of this field is interpreted based on the codec extension.
When decoding content in H.264 field mode, the <code>codedOffset</code>
specifies the line or picture field’s offset within the image.</p>
</li>
<li>
<p><code>codedExtent</code> is the coded size of the decode operations.</p>
</li>
<li>
<p><code>srcBuffer</code> is the source buffer that holds the encoded bitstream.</p>
</li>
<li>
<p><code>srcBufferOffset</code> is the buffer offset where the valid encoded
bitstream starts in srcBuffer.
It <strong class="purple">must</strong> meet the alignment requirement
<code>minBitstreamBufferOffsetAlignment</code> within
<a href="chap39.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> queried with the
<a href="chap39.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> function.</p>
</li>
<li>
<p><code>srcBufferRange</code> is the size of the srcBuffer with valid encoded
bitstream, starting from <code>srcBufferOffset</code>.
It <strong class="purple">must</strong> meet the alignment requirement
<code>minBitstreamBufferSizeAlignment</code> within
<a href="chap39.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> queried with the
<a href="chap39.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> function.</p>
</li>
<li>
<p><code>dstPictureResource</code> is the destination
<a href="chap39.html#decoded-output-picture">Decoded Output Picture</a> Resource.</p>
</li>
<li>
<p><code>pSetupReferenceSlot</code> is <code>NULL</code> or a pointer to a
<a href="chap39.html#VkVideoReferenceSlotKHR">VkVideoReferenceSlotKHR</a> structure used for generating a DPB
reference slot and Picture Resource.
<code>pSetupReferenceSlot-&gt;slotIndex</code> specifies the slot index number to
use as a target for producing the DPB data.
<code>slotIndex</code> <strong class="purple">must</strong> reference a valid entry as specified in
<a href="chap39.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a> via the <code>pReferenceSlots</code> within the
<a href="chap39.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command that established the Vulkan Video
Decode Context for this command.</p>
</li>
<li>
<p><code>referenceSlotCount</code> is the number of the DPB Reference Pictures
that will be used when this decoding operation is executing.</p>
</li>
<li>
<p><code>pReferenceSlots</code> is a pointer to an array of
<a href="chap39.html#VkVideoReferenceSlotKHR">VkVideoReferenceSlotKHR</a> structures specifying the DPB Reference
pictures that will be used when this decoding operation is executing.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-sType-sType" href="chap39.html#VUID-VkVideoDecodeInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-pNext-pNext" href="chap39.html#VUID-VkVideoDecodeInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap39.html#VkVideoDecodeH264PictureInfoEXT">VkVideoDecodeH264PictureInfoEXT</a> or <a href="chap39.html#VkVideoDecodeH265PictureInfoEXT">VkVideoDecodeH265PictureInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-sType-unique" href="chap39.html#VUID-VkVideoDecodeInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-flags-parameter" href="chap39.html#VUID-VkVideoDecodeInfoKHR-flags-parameter"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap39.html#VkVideoDecodeFlagBitsKHR">VkVideoDecodeFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-srcBuffer-parameter" href="chap39.html#VUID-VkVideoDecodeInfoKHR-srcBuffer-parameter"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-srcBuffer-parameter</span><br>
 <code>srcBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-dstPictureResource-parameter" href="chap39.html#VUID-VkVideoDecodeInfoKHR-dstPictureResource-parameter"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-dstPictureResource-parameter</span><br>
 <code>dstPictureResource</code> <strong class="purple">must</strong> be a valid <a href="chap39.html#VkVideoPictureResourceKHR">VkVideoPictureResourceKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-pSetupReferenceSlot-parameter" href="chap39.html#VUID-VkVideoDecodeInfoKHR-pSetupReferenceSlot-parameter"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-pSetupReferenceSlot-parameter</span><br>
 <code>pSetupReferenceSlot</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap39.html#VkVideoReferenceSlotKHR">VkVideoReferenceSlotKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-pReferenceSlots-parameter" href="chap39.html#VUID-VkVideoDecodeInfoKHR-pReferenceSlots-parameter"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-pReferenceSlots-parameter</span><br>
 <code>pReferenceSlots</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>referenceSlotCount</code> valid <a href="chap39.html#VkVideoReferenceSlotKHR">VkVideoReferenceSlotKHR</a> structures</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeInfoKHR-referenceSlotCount-arraylength" href="chap39.html#VUID-VkVideoDecodeInfoKHR-referenceSlotCount-arraylength"></a> <span class="vuid">VUID-VkVideoDecodeInfoKHR-referenceSlotCount-arraylength</span><br>
 <code>referenceSlotCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a> flags are defined with the following
enumeration:</p>
</div>
<div id="VkVideoDecodeFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_decode_queue</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkVideoDecodeFlagBitsKHR {
    VK_VIDEO_DECODE_DEFAULT_KHR = <span class="integer">0</span>,
    VK_VIDEO_DECODE_RESERVED_0_BIT_KHR = <span class="hex">0x00000001</span>,
} VkVideoDecodeFlagBitsKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_DECODE_RESERVED_0_BIT_KHR</code> The current version of the
specification has reserved this value for future use.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoDecodeFlagsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_decode_queue</span>
<span class="keyword">typedef</span> VkFlags VkVideoDecodeFlagsKHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap39.html#VkVideoDecodeFlagsKHR">VkVideoDecodeFlagsKHR</a> is a bitmask type for setting a mask of zero or
more <a href="chap39.html#VkVideoDecodeFlagBitsKHR">VkVideoDecodeFlagBitsKHR</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="decode-h264"><a class="anchor" href="chap39.html#decode-h264"></a>39.6. Video Decode of AVC (ITU-T H.264)</h3>
<div class="paragraph">
<p>This extension adds H.264 codec specific structures needed for decode
session to execute decode jobs which include H.264 sequence header, picture
parameter header and quantization matrix etc.
Unless otherwise noted, all references to the H.264 specification are to the
2010 edition published by the ITU-T, dated March 2010.
This specification is available at <a href="http://www.itu.int/rec/T-REC-H.264" class="bare">http://www.itu.int/rec/T-REC-H.264</a>.</p>
</div>
<div class="sect3">
<h4 id="_h_264_decode_profile"><a class="anchor" href="chap39.html#_h_264_decode_profile"></a>39.6.1. H.264 decode profile</h4>
<div class="paragraph">
<p>A H.264 decode profile is specified using <a href="chap39.html#VkVideoDecodeH264ProfileEXT">VkVideoDecodeH264ProfileEXT</a>
chained to <a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a> when the codec-operation in
<a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a> is
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_EXT</code>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoDecodeH264ProfileEXT">VkVideoDecodeH264ProfileEXT</a> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH264ProfileEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_decode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoDecodeH264ProfileEXT {
    VkStructureType                           sType;
    <span class="directive">const</span> <span class="directive">void</span>*                               pNext;
    StdVideoH264ProfileIdc                    stdProfileIdc;
    VkVideoDecodeH264PictureLayoutFlagsEXT    pictureLayout;
} VkVideoDecodeH264ProfileEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stdProfileIdc</code> is a <code>StdVideoH264ProfileIdc</code> value specifying
the H.264 codec profile IDC</p>
</li>
<li>
<p><code>pictureLayout</code> is a bitmask of
<a href="chap39.html#VkVideoDecodeH264PictureLayoutFlagBitsEXT">VkVideoDecodeH264PictureLayoutFlagBitsEXT</a> specifying the layout of
the decoded picture’s contents depending on the nature (progressive vs.
interlaced) of the input content.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264ProfileEXT-sType-sType" href="chap39.html#VUID-VkVideoDecodeH264ProfileEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH264ProfileEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H264_PROFILE_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264ProfileEXT-pictureLayout-parameter" href="chap39.html#VUID-VkVideoDecodeH264ProfileEXT-pictureLayout-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264ProfileEXT-pictureLayout-parameter</span><br>
 <code>pictureLayout</code> <strong class="purple">must</strong> be a valid combination of <a href="chap39.html#VkVideoDecodeH264PictureLayoutFlagBitsEXT">VkVideoDecodeH264PictureLayoutFlagBitsEXT</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264ProfileEXT-pictureLayout-requiredbitmask" href="chap39.html#VUID-VkVideoDecodeH264ProfileEXT-pictureLayout-requiredbitmask"></a> <span class="vuid">VUID-VkVideoDecodeH264ProfileEXT-pictureLayout-requiredbitmask</span><br>
 <code>pictureLayout</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The H.264 video decode picture layout flags are defined with the following
enum:</p>
</div>
<div id="VkVideoDecodeH264PictureLayoutFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_decode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkVideoDecodeH264PictureLayoutFlagBitsEXT {
    VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_PROGRESSIVE_EXT = <span class="integer">0</span>,
    VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_INTERLEAVED_LINES_BIT_EXT = <span class="hex">0x00000001</span>,
    VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_SEPARATE_PLANES_BIT_EXT = <span class="hex">0x00000002</span>,
} VkVideoDecodeH264PictureLayoutFlagBitsEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_INTERLEAVED_LINES_BIT_EXT</code>
indicates support for or use of a picture layout for interlaced content
where all lines belonging to the first field are decoded to the
even-numbered lines within the picture resource, and all lines belonging
to the second field are decoded to the odd-numbered lines within the
picture resource.</p>
</li>
<li>
<p><code>VK_VIDEO_DECODE_H264_PICTURE_LAYOUT_INTERLACED_SEPARATE_PLANES_BIT_EXT</code>
indicates support for or use of a picture layout for interlaced content
where all lines belonging to the first field are grouped together in a
single plane, followed by another plane containing all lines belonging
to the second field.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_selecting_a_h_264_decode_profile"><a class="anchor" href="chap39.html#_selecting_a_h_264_decode_profile"></a>39.6.2. Selecting a H.264 decode profile</h4>
<div class="paragraph">
<p>When using <a href="chap39.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> to query the
capabilities for the input <code>pVideoProfile</code> with
<code>videoCodecOperation</code> specified as
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_EXT</code>, the instance of
<a href="chap39.html#VkVideoDecodeH264ProfileEXT">VkVideoDecodeH264ProfileEXT</a> structure <strong class="purple">must</strong> be chained to
<a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a> to select a H.264 decode profile.
If supported, the implementation returns the capabilities associated with
the specified H.264 decode profile.
The requirement is similar when querying supported image formats using
<a href="chap39.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a>.</p>
</div>
<div class="paragraph">
<p>A supported H.264 decode profile <strong class="purple">must</strong> be selected when creating a video
session by chaining <a href="chap39.html#VkVideoDecodeH264ProfileEXT">VkVideoDecodeH264ProfileEXT</a> to the
<a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a> field of <a href="chap39.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_capabilities"><a class="anchor" href="chap39.html#_capabilities"></a>39.6.3. Capabilities</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>When using <a href="chap39.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> to query the
capabilities for the input <code>pVideoProfile</code> with
<code>videoCodecOperation</code> specified as
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H264_BIT_EXT</code>, the instance of
<a href="chap39.html#VkVideoDecodeH264CapabilitiesEXT">VkVideoDecodeH264CapabilitiesEXT</a> structure <strong class="purple">must</strong> be chained to
<a href="chap39.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> to get this H.264 decode profile specific
capabilities.</p>
</div>
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoDecodeH264CapabilitiesEXT">VkVideoDecodeH264CapabilitiesEXT</a> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH264CapabilitiesEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_decode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoDecodeH264CapabilitiesEXT {
    VkStructureType          sType;
    <span class="directive">void</span>*                    pNext;
    uint32_t                 maxLevel;
    VkOffset2D               fieldOffsetGranularity;
    VkExtensionProperties    stdExtensionVersion;
} VkVideoDecodeH264CapabilitiesEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>maxLevel</code> is the maximum H.264 level supported by the device.</p>
</li>
<li>
<p><code>fieldOffsetGranularity</code> - if Interlaced Video Content is suported,
the maximum field offset granularity supported for the picture resource.</p>
</li>
<li>
<p><code>stdExtensionVersion</code> is a <a href="chap40.html#VkExtensionProperties">VkExtensionProperties</a> structure
specifying the H.264 extension name and version supported by this
implementation.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264CapabilitiesEXT-sType-sType" href="chap39.html#VUID-VkVideoDecodeH264CapabilitiesEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH264CapabilitiesEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H264_CAPABILITIES_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_create_information"><a class="anchor" href="chap39.html#_create_information"></a>39.6.4. Create Information</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The instance of <a href="chap39.html#VkVideoDecodeH264SessionCreateInfoEXT">VkVideoDecodeH264SessionCreateInfoEXT</a> structure <strong class="purple">can</strong>
be chained to <a href="chap39.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a> when the function
<a href="chap39.html#vkCreateVideoSessionKHR">vkCreateVideoSessionKHR</a> is called to create a video session for H.264
decode.</p>
</div>
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoDecodeH264SessionCreateInfoEXT">VkVideoDecodeH264SessionCreateInfoEXT</a> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH264SessionCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_decode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoDecodeH264SessionCreateInfoEXT {
    VkStructureType                    sType;
    <span class="directive">const</span> <span class="directive">void</span>*                        pNext;
    VkVideoDecodeH264CreateFlagsEXT    flags;
    <span class="directive">const</span> VkExtensionProperties*       pStdExtensionVersion;
} VkVideoDecodeH264SessionCreateInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
<li>
<p><code>pStdExtensionVersion</code> is a pointer to a <a href="chap40.html#VkExtensionProperties">VkExtensionProperties</a>
structure specifying the H.264 codec extensions defined in
<code>StdVideoH264Extensions</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionCreateInfoEXT-sType-sType" href="chap39.html#VUID-VkVideoDecodeH264SessionCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H264_SESSION_CREATE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionCreateInfoEXT-flags-zerobitmask" href="chap39.html#VUID-VkVideoDecodeH264SessionCreateInfoEXT-flags-zerobitmask"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionCreateInfoEXT-flags-zerobitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionCreateInfoEXT-pStdExtensionVersion-parameter" href="chap39.html#VUID-VkVideoDecodeH264SessionCreateInfoEXT-pStdExtensionVersion-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionCreateInfoEXT-pStdExtensionVersion-parameter</span><br>
 <code>pStdExtensionVersion</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap40.html#VkExtensionProperties">VkExtensionProperties</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_decoder_parameter_sets"><a class="anchor" href="chap39.html#_decoder_parameter_sets"></a>39.6.5. Decoder Parameter Sets</h4>
<div class="paragraph">
<p>To reduce parameter traffic during decoding, the decoder parameter set
object supports storing H.264 SPS/PPS parameter sets that <strong class="purple">may</strong> be later
referenced during decoding.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>An instance of <a href="chap39.html#VkVideoDecodeH264SessionParametersCreateInfoEXT">VkVideoDecodeH264SessionParametersCreateInfoEXT</a> holding
one H.264 SPS and at least one H.264 PPS paramater set <strong class="purple">must</strong> be chained to
<a href="chap39.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a> when calling
<a href="chap39.html#vkCreateVideoSessionParametersKHR">vkCreateVideoSessionParametersKHR</a> to store these parameter set(s) with
the decoder parameter set object for later reference.
The provided H.264 SPS/PPS parameters <strong class="purple">must</strong> be within the limits specified
during decoder creation for the decoder specified in
<a href="chap39.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a>.</p>
</div>
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoDecodeH264SessionParametersCreateInfoEXT">VkVideoDecodeH264SessionParametersCreateInfoEXT</a> structure is
defined as:</p>
</div>
<div id="VkVideoDecodeH264SessionParametersCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_decode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoDecodeH264SessionParametersCreateInfoEXT {
    VkStructureType                                        sType;
    <span class="directive">const</span> <span class="directive">void</span>*                                            pNext;
    uint32_t                                               maxSpsStdCount;
    uint32_t                                               maxPpsStdCount;
    <span class="directive">const</span> VkVideoDecodeH264SessionParametersAddInfoEXT*    pParametersAddInfo;
} VkVideoDecodeH264SessionParametersCreateInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>maxSpsStdCount</code> is the maximum number of SPS parameters that the
<code>VkVideoSessionParametersKHR</code> can contain.</p>
</li>
<li>
<p><code>maxPpsStdCount</code> is the maximum number of PPS parameters that the
<code>VkVideoSessionParametersKHR</code> can contain.</p>
</li>
<li>
<p><code>pParametersAddInfo</code> is <code>NULL</code> or a pointer to a
<a href="chap39.html#VkVideoDecodeH264SessionParametersAddInfoEXT">VkVideoDecodeH264SessionParametersAddInfoEXT</a> structure specifying
H.264 parameters to add upon object creation.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersCreateInfoEXT-sType-sType" href="chap39.html#VUID-VkVideoDecodeH264SessionParametersCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H264_SESSION_PARAMETERS_CREATE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersCreateInfoEXT-pParametersAddInfo-parameter" href="chap39.html#VUID-VkVideoDecodeH264SessionParametersCreateInfoEXT-pParametersAddInfo-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersCreateInfoEXT-pParametersAddInfo-parameter</span><br>
 If <code>pParametersAddInfo</code> is not <code>NULL</code>, <code>pParametersAddInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap39.html#VkVideoDecodeH264SessionParametersAddInfoEXT">VkVideoDecodeH264SessionParametersAddInfoEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoDecodeH264SessionParametersAddInfoEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_decode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoDecodeH264SessionParametersAddInfoEXT {
    VkStructureType                            sType;
    <span class="directive">const</span> <span class="directive">void</span>*                                pNext;
    uint32_t                                   spsStdCount;
    <span class="directive">const</span> StdVideoH264SequenceParameterSet*    pSpsStd;
    uint32_t                                   ppsStdCount;
    <span class="directive">const</span> StdVideoH264PictureParameterSet*     pPpsStd;
} VkVideoDecodeH264SessionParametersAddInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>spsStdCount</code> is the number of SPS elements in <code>pSpsStd</code>.
Its value <strong class="purple">must</strong> be less than or equal to the value of
<code>maxSpsStdCount</code>.</p>
</li>
<li>
<p><code>pSpsStd</code> is a pointer to an array of
<code>StdVideoH264SequenceParameterSet</code> structures representing H.264
sequence parameter sets.
Each element of the array <strong class="purple">must</strong> have a unique H.264 SPS ID.</p>
</li>
<li>
<p><code>ppsStdCount</code> is the number of PPS provided in <code>pPpsStd</code>.
Its value <strong class="purple">must</strong> be less than or equal to the value of
<code>maxPpsStdCount</code>.</p>
</li>
<li>
<p><code>pPpsStd</code> is a pointer to an array of
<code>StdVideoH264PictureParameterSet</code> structures representing H.264
picture parameter sets.
Each element of the array <strong class="purple">must</strong> have a unique H.264 SPS-PPS ID pair.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-spsStdCount-04822" href="chap39.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-spsStdCount-04822"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-spsStdCount-04822</span><br>

The values of <code>spsStdCount</code> and <code>ppsStdCount</code> <strong class="purple">must</strong> be less than
or equal to the values of <code>maxSpsStdCount</code> and <code>maxPpsStdCount</code>,
respectively.</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-maxSpsStdCount-04823" href="chap39.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-maxSpsStdCount-04823"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-maxSpsStdCount-04823</span><br>

When the <code>maxSpsStdCount</code> number of parameters of type
StdVideoH264SequenceParameterSet in the Video Session Parameters object
is reached, no additional parameters of that type can be added to this
object.
<code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add additional data to this object at this point.</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-maxPpsStdCount-04824" href="chap39.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-maxPpsStdCount-04824"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-maxPpsStdCount-04824</span><br>

When the <code>maxPpsStdCount</code> number of parameters of type
StdVideoH264PictureParameterSet in the Video Session Parameters object
is reached, no additional parameters of that type can be added to this
object.
<code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add additional data to this object at this point.</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04825" href="chap39.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04825"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04825</span><br>

Each entry to be added <strong class="purple">must</strong> have a unique, to the rest of the parameter
array entries and the existing parameters in the Video Session
Parameters Object that is being updated, SPS-PPS IDs.</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04826" href="chap39.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04826"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04826</span><br>

Parameter entries that already exist in Video Session Parameters object
with a particular SPS-PPS IDs <strong class="purple">cannot</strong> be replaced nor updated.</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04827" href="chap39.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04827"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04827</span><br>

When creating a new object using a Video Session Parameters as a
template, the array’s parameters with the same SPS-PPS IDs as the ones
from the template take precedence.</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04828" href="chap39.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04828"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-None-04828</span><br>

SPS/PPS parameters <strong class="purple">must</strong> comply with the limits specified in
<a href="chap39.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a> during Video Session creation.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-sType-sType" href="chap39.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H264_SESSION_PARAMETERS_ADD_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-pSpsStd-parameter" href="chap39.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-pSpsStd-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-pSpsStd-parameter</span><br>
 If <code>pSpsStd</code> is not <code>NULL</code>, <code>pSpsStd</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>spsStdCount</code> <code>StdVideoH264SequenceParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-pPpsStd-parameter" href="chap39.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-pPpsStd-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-pPpsStd-parameter</span><br>
 If <code>pPpsStd</code> is not <code>NULL</code>, <code>pPpsStd</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>ppsStdCount</code> <code>StdVideoH264PictureParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-spsStdCount-arraylength" href="chap39.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-spsStdCount-arraylength"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-spsStdCount-arraylength</span><br>
 <code>spsStdCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-ppsStdCount-arraylength" href="chap39.html#VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-ppsStdCount-arraylength"></a> <span class="vuid">VUID-VkVideoDecodeH264SessionParametersAddInfoEXT-ppsStdCount-arraylength</span><br>
 <code>ppsStdCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_picture_decoding"><a class="anchor" href="chap39.html#_picture_decoding"></a>39.6.6. Picture Decoding</h4>
<div class="paragraph">
<p>To decode a picture, the structure <a href="chap39.html#VkVideoDecodeH264PictureInfoEXT">VkVideoDecodeH264PictureInfoEXT</a>
<strong class="purple">may</strong> be chained to <a href="chap39.html#VkVideoDecodeInfoKHR">VkVideoDecodeInfoKHR</a> when calling
<a href="chap39.html#vkCmdDecodeVideoKHR">vkCmdDecodeVideoKHR</a>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The structure <a href="chap39.html#VkVideoDecodeH264PictureInfoEXT">VkVideoDecodeH264PictureInfoEXT</a> representing a picture
decode operation is defined as:</p>
</div>
<div id="VkVideoDecodeH264PictureInfoEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_decode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoDecodeH264PictureInfoEXT {
    VkStructureType                         sType;
    <span class="directive">const</span> <span class="directive">void</span>*                             pNext;
    <span class="directive">const</span> StdVideoDecodeH264PictureInfo*    pStdPictureInfo;
    uint32_t                                slicesCount;
    <span class="directive">const</span> uint32_t*                         pSlicesDataOffsets;
} VkVideoDecodeH264PictureInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pStdPictureInfo</code> is a pointer to a
<code>StdVideoDecodeH264PictureInfo</code> structure specifying the codec
standard specific picture information from the H.264 specification.</p>
</li>
<li>
<p><code>slicesCount</code> is the number of slices in this picture.</p>
</li>
<li>
<p><code>pSlicesDataOffsets</code> is a pointer to an array of <code>slicesCount</code>
offsets indicating the start offset of each slice within the bitstream
buffer.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264PictureInfoEXT-sType-sType" href="chap39.html#VUID-VkVideoDecodeH264PictureInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH264PictureInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H264_PICTURE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264PictureInfoEXT-pStdPictureInfo-parameter" href="chap39.html#VUID-VkVideoDecodeH264PictureInfoEXT-pStdPictureInfo-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264PictureInfoEXT-pStdPictureInfo-parameter</span><br>
 <code>pStdPictureInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoDecodeH264PictureInfo</code> value</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264PictureInfoEXT-pSlicesDataOffsets-parameter" href="chap39.html#VUID-VkVideoDecodeH264PictureInfoEXT-pSlicesDataOffsets-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264PictureInfoEXT-pSlicesDataOffsets-parameter</span><br>
 <code>pSlicesDataOffsets</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>slicesCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264PictureInfoEXT-slicesCount-arraylength" href="chap39.html#VUID-VkVideoDecodeH264PictureInfoEXT-slicesCount-arraylength"></a> <span class="vuid">VUID-VkVideoDecodeH264PictureInfoEXT-slicesCount-arraylength</span><br>
 <code>slicesCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoDecodeH264DpbSlotInfoEXT">VkVideoDecodeH264DpbSlotInfoEXT</a> structure correlates a DPB Slot
index with codec-specific information and is defined as:</p>
</div>
<div id="VkVideoDecodeH264DpbSlotInfoEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_decode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoDecodeH264DpbSlotInfoEXT {
    VkStructureType                           sType;
    <span class="directive">const</span> <span class="directive">void</span>*                               pNext;
    <span class="directive">const</span> StdVideoDecodeH264ReferenceInfo*    pStdReferenceInfo;
} VkVideoDecodeH264DpbSlotInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pStdReferenceInfo</code> is a pointer to a
<code>StdVideoDecodeH264ReferenceInfo</code> structure specifying the codec
standard specific picture reference information from the H.264
specification.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264DpbSlotInfoEXT-sType-sType" href="chap39.html#VUID-VkVideoDecodeH264DpbSlotInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH264DpbSlotInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H264_DPB_SLOT_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264DpbSlotInfoEXT-pStdReferenceInfo-parameter" href="chap39.html#VUID-VkVideoDecodeH264DpbSlotInfoEXT-pStdReferenceInfo-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264DpbSlotInfoEXT-pStdReferenceInfo-parameter</span><br>
 <code>pStdReferenceInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoDecodeH264ReferenceInfo</code> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoDecodeH264MvcEXT">VkVideoDecodeH264MvcEXT</a> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH264MvcEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_decode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoDecodeH264MvcEXT {
    VkStructureType                 sType;
    <span class="directive">const</span> <span class="directive">void</span>*                     pNext;
    <span class="directive">const</span> StdVideoDecodeH264Mvc*    pStdMvc;
} VkVideoDecodeH264MvcEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pStdMvc</code> is a pointer to a <code>StdVideoDecodeH264Mvc</code> structure
specifying H.264 codec specification information for MVC.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When the content type is H.264 MVC, an instance of
<a href="chap39.html#VkVideoDecodeH264MvcEXT">VkVideoDecodeH264MvcEXT</a> <strong class="purple">must</strong> be chained to
<a href="chap39.html#VkVideoDecodeH264PictureInfoEXT">VkVideoDecodeH264PictureInfoEXT</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH264MvcEXT-sType-sType" href="chap39.html#VUID-VkVideoDecodeH264MvcEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH264MvcEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H264_MVC_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH264MvcEXT-pStdMvc-parameter" href="chap39.html#VUID-VkVideoDecodeH264MvcEXT-pStdMvc-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH264MvcEXT-pStdMvc-parameter</span><br>
 <code>pStdMvc</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoDecodeH264Mvc</code> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="decode-h265"><a class="anchor" href="chap39.html#decode-h265"></a>39.7. Video Decode of HEVC (ITU-T H.265)</h3>
<div class="paragraph">
<p>This extension adds H.265 codec specific structures needed for decode
session to execute decode jobs which include H.265 sequence header, picture
parameter header and quantization matrix etc.
Unless otherwise noted, all references to the H.265 specification are to the
2013 edition published by the ITU-T, dated April 2013.
This specification is available at <a href="http://www.itu.int/rec/T-REC-H.265" class="bare">http://www.itu.int/rec/T-REC-H.265</a>.</p>
</div>
<div class="sect3">
<h4 id="_h_265_decode_profile"><a class="anchor" href="chap39.html#_h_265_decode_profile"></a>39.7.1. H.265 decode profile</h4>
<div class="paragraph">
<p>A H.265 decode profile is specified using <a href="chap39.html#VkVideoDecodeH265ProfileEXT">VkVideoDecodeH265ProfileEXT</a>
chained to <a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a> when the codec-operation in
<a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a> is
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_EXT</code>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoDecodeH265ProfileEXT">VkVideoDecodeH265ProfileEXT</a> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH265ProfileEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_decode_h265</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoDecodeH265ProfileEXT {
    VkStructureType           sType;
    <span class="directive">const</span> <span class="directive">void</span>*               pNext;
    StdVideoH265ProfileIdc    stdProfileIdc;
} VkVideoDecodeH265ProfileEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stdProfileIdc</code> is a <code>StdVideoH265ProfileIdc</code> value specifying
the H.265 codec profile IDC.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265ProfileEXT-sType-sType" href="chap39.html#VUID-VkVideoDecodeH265ProfileEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH265ProfileEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H265_PROFILE_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_selecting_an_h_265_profile"><a class="anchor" href="chap39.html#_selecting_an_h_265_profile"></a>39.7.2. Selecting an H.265 Profile</h4>
<div class="paragraph">
<p>When using <a href="chap39.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> to query the
capabilities for the input <code>pVideoProfile</code> with
<code>videoCodecOperation</code> specified as
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_EXT</code>, the instance of
<a href="chap39.html#VkVideoDecodeH265ProfileEXT">VkVideoDecodeH265ProfileEXT</a> structure <strong class="purple">must</strong> be chained to
<a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a> to select a H.265 decode profile.
If supported, the implementation returns the capabilities associated with
the specified H.265 decode profile.
The requirement is similar when querying supported image formats using
<a href="chap39.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a>.</p>
</div>
<div class="paragraph">
<p>A supported H.265 decode profile <strong class="purple">must</strong> be selected when creating a video
session by chaining <a href="chap39.html#VkVideoDecodeH265ProfileEXT">VkVideoDecodeH265ProfileEXT</a> to the
<a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a> field of <a href="chap39.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_capabilities_2"><a class="anchor" href="chap39.html#_capabilities_2"></a>39.7.3. Capabilities</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>When uses <a href="chap39.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> to query the
capabilities for the parameter <code>videoCodecOperation</code> specified as
<code>VK_VIDEO_CODEC_OPERATION_DECODE_H265_BIT_EXT</code>,
<a href="chap39.html#VkVideoDecodeH265CapabilitiesEXT">VkVideoDecodeH265CapabilitiesEXT</a> structure <strong class="purple">can</strong> be chained to
<a href="chap39.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> to get this H.265 extension specific
capabilities.</p>
</div>
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoDecodeH265CapabilitiesEXT">VkVideoDecodeH265CapabilitiesEXT</a> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH265CapabilitiesEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_decode_h265</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoDecodeH265CapabilitiesEXT {
    VkStructureType          sType;
    <span class="directive">void</span>*                    pNext;
    uint32_t                 maxLevel;
    VkExtensionProperties    stdExtensionVersion;
} VkVideoDecodeH265CapabilitiesEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>maxLevel</code> is the maximum H.265 level supported by the device.</p>
</li>
<li>
<p><code>stdExtensionVersion</code> is a <a href="chap40.html#VkExtensionProperties">VkExtensionProperties</a> structure
specifying the H.265 extension name and version supported by this
implementation.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265CapabilitiesEXT-sType-sType" href="chap39.html#VUID-VkVideoDecodeH265CapabilitiesEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH265CapabilitiesEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H265_CAPABILITIES_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_create_infomation"><a class="anchor" href="chap39.html#_create_infomation"></a>39.7.4. Create Infomation</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The instance of <a href="chap39.html#VkVideoDecodeH265SessionCreateInfoEXT">VkVideoDecodeH265SessionCreateInfoEXT</a> structure <strong class="purple">can</strong>
be chained to <a href="chap39.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a> when the function
<a href="chap39.html#vkCreateVideoSessionKHR">vkCreateVideoSessionKHR</a> is called to create a video session for H.265
decode operations.</p>
</div>
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoDecodeH265SessionCreateInfoEXT">VkVideoDecodeH265SessionCreateInfoEXT</a> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH265SessionCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_decode_h265</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoDecodeH265SessionCreateInfoEXT {
    VkStructureType                    sType;
    <span class="directive">const</span> <span class="directive">void</span>*                        pNext;
    VkVideoDecodeH265CreateFlagsEXT    flags;
    <span class="directive">const</span> VkExtensionProperties*       pStdExtensionVersion;
} VkVideoDecodeH265SessionCreateInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
<li>
<p><code>pStdExtensionVersion</code> is a pointer to a <a href="chap40.html#VkExtensionProperties">VkExtensionProperties</a>
structure specifying H.265 codec extensions.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionCreateInfoEXT-sType-sType" href="chap39.html#VUID-VkVideoDecodeH265SessionCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H265_SESSION_CREATE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionCreateInfoEXT-flags-zerobitmask" href="chap39.html#VUID-VkVideoDecodeH265SessionCreateInfoEXT-flags-zerobitmask"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionCreateInfoEXT-flags-zerobitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionCreateInfoEXT-pStdExtensionVersion-parameter" href="chap39.html#VUID-VkVideoDecodeH265SessionCreateInfoEXT-pStdExtensionVersion-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionCreateInfoEXT-pStdExtensionVersion-parameter</span><br>
 <code>pStdExtensionVersion</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap40.html#VkExtensionProperties">VkExtensionProperties</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_decoder_parameter_sets_2"><a class="anchor" href="chap39.html#_decoder_parameter_sets_2"></a>39.7.5. Decoder Parameter Sets</h4>
<div class="paragraph">
<p>To reduce parameter traffic during decoding, the decoder parameter set
object supports storing H.265 SPS/PPS parameter sets that may be later
referenced during decoding.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>An instance of <code>VkVideoDecodeH265SessionParametersCreateInfoEXT</code> holding
one H.265 SPS and at least one H.265 PPS paramater set <strong class="purple">must</strong> be chained to
<code>VkVideoSessionParametersCreateInfoKHR</code> when calling
<code>vkCreateVideoSessionParametersKHR</code> to store these parameter set(s) with
the decoder parameter set object for later reference.
The provided H.265 SPS/PPS parameters <strong class="purple">must</strong> be within the limits specified
during decoder creation for the decoder specified in
<code>VkVideoSessionParametersCreateInfoKHR</code>.</p>
</div>
<div class="paragraph">
<p>The <code>VkVideoDecodeH265SessionParametersCreateInfoEXT</code> structure is
defined as:</p>
</div>
<div id="VkVideoDecodeH265SessionParametersCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_decode_h265</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoDecodeH265SessionParametersCreateInfoEXT {
    VkStructureType                                        sType;
    <span class="directive">const</span> <span class="directive">void</span>*                                            pNext;
    uint32_t                                               maxSpsStdCount;
    uint32_t                                               maxPpsStdCount;
    <span class="directive">const</span> VkVideoDecodeH265SessionParametersAddInfoEXT*    pParametersAddInfo;
} VkVideoDecodeH265SessionParametersCreateInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>maxSpsStdCount</code> is the maximum number of SPS parameters that the
<code>VkVideoSessionParametersKHR</code> can contain.</p>
</li>
<li>
<p><code>maxPpsStdCount</code> is the maximum number of PPS parameters that the
<code>VkVideoSessionParametersKHR</code> can contain.</p>
</li>
<li>
<p><code>pParametersAddInfo</code> is <code>NULL</code> or a pointer to a
<a href="chap39.html#VkVideoDecodeH265SessionParametersAddInfoEXT">VkVideoDecodeH265SessionParametersAddInfoEXT</a> structure specifying
H.265 parameters to add upon object creation.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersCreateInfoEXT-sType-sType" href="chap39.html#VUID-VkVideoDecodeH265SessionParametersCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H265_SESSION_PARAMETERS_CREATE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersCreateInfoEXT-pParametersAddInfo-parameter" href="chap39.html#VUID-VkVideoDecodeH265SessionParametersCreateInfoEXT-pParametersAddInfo-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersCreateInfoEXT-pParametersAddInfo-parameter</span><br>
 If <code>pParametersAddInfo</code> is not <code>NULL</code>, <code>pParametersAddInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap39.html#VkVideoDecodeH265SessionParametersAddInfoEXT">VkVideoDecodeH265SessionParametersAddInfoEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoDecodeH265SessionParametersAddInfoEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_decode_h265</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoDecodeH265SessionParametersAddInfoEXT {
    VkStructureType                            sType;
    <span class="directive">const</span> <span class="directive">void</span>*                                pNext;
    uint32_t                                   spsStdCount;
    <span class="directive">const</span> StdVideoH265SequenceParameterSet*    pSpsStd;
    uint32_t                                   ppsStdCount;
    <span class="directive">const</span> StdVideoH265PictureParameterSet*     pPpsStd;
} VkVideoDecodeH265SessionParametersAddInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>spsStdCount</code> is the number of SPS elements in the <code>pSpsStd</code>.
Its value <strong class="purple">must</strong> be less than or equal to the value of
<code>maxSpsStdCount</code>.</p>
</li>
<li>
<p><code>pSpsStd</code> is a pointer to an array of
<code>StdVideoH265SequenceParameterSet</code> structures representing H.265
sequence parameter sets.
Each element of the array <strong class="purple">must</strong> have a unique H.265 VPS-SPS ID pair.</p>
</li>
<li>
<p><code>ppsStdCount</code> is the number of PPS provided in <code>pPpsStd</code>.
Its value <strong class="purple">must</strong> be less than or equal to the value of
<code>maxPpsStdCount</code>.</p>
</li>
<li>
<p><code>pPpsStd</code> is a pointer to an array of
<code>StdVideoH265PictureParameterSet</code> structures representing H.265
picture parameter sets.
Each element of the array entry <strong class="purple">must</strong> have a unique H.265 VPS-SPS-PPS ID
tuple.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-vpsStdCount-04829" href="chap39.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-vpsStdCount-04829"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-vpsStdCount-04829</span><br>

The values of <code>vpsStdCount</code>, <code>spsStdCount</code> and <code>ppsStdCount</code>
<strong class="purple">must</strong> be less than or equal to the values of <code>maxVpsStdCount</code>,
<code>maxSpsStdCount</code> and <code>maxPpsStdCount</code>, respectively.</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-maxVpsStdCount-04830" href="chap39.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-maxVpsStdCount-04830"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-maxVpsStdCount-04830</span><br>

When the <code>maxVpsStdCount</code> number of parameters of type
StdVideoH265VideoParameterSet in the Video Session Parameters object is
reached, no additional parameters of that type can be added to the
object.
<code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add additional data to this object at this point.</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-maxSpsStdCount-04831" href="chap39.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-maxSpsStdCount-04831"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-maxSpsStdCount-04831</span><br>

When the <code>maxSpsStdCount</code> number of parameters of type
StdVideoH265SequenceParameterSet in the Video Session Parameters object
is reached, no additional parameters of that type can be added to the
object.
<code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add additional data to this object at this point.</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-maxPpsStdCount-04832" href="chap39.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-maxPpsStdCount-04832"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-maxPpsStdCount-04832</span><br>

When the <code>maxPpsStdCount</code> number of parameters of type
StdVideoH265PictureParameterSet in the Video Session Parameters object
is reached, no additional parameters of that type can be added to the
object.
<code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add additional data to this object at this point.</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04833" href="chap39.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04833"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04833</span><br>

Each entry to be added <strong class="purple">must</strong> have a unique, to the rest of the parameter
array entries and the existing parameters in the Video Session
Parameters Object that is being updated, VPS-SPS-PPS IDs.</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04834" href="chap39.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04834"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04834</span><br>

Parameter entries that already exist in Video Session Parameters object
with a particular VPS-SPS-PPS IDs <strong class="purple">cannot</strong> be replaced nor updated.</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04835" href="chap39.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04835"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04835</span><br>

When creating a new object using a Video Session Parameters as a
template, the array’s parameters with the same VPS-SPS-PPS IDs as the
ones from the template take precedence.</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04836" href="chap39.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04836"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-None-04836</span><br>

VPS/SPS/PPS parameters <strong class="purple">must</strong> comply with the limits specified in
<a href="chap39.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a> during Video Session creation.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-sType-sType" href="chap39.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H265_SESSION_PARAMETERS_ADD_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-pSpsStd-parameter" href="chap39.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-pSpsStd-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-pSpsStd-parameter</span><br>
 If <code>pSpsStd</code> is not <code>NULL</code>, <code>pSpsStd</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>spsStdCount</code> <code>StdVideoH265SequenceParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-pPpsStd-parameter" href="chap39.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-pPpsStd-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-pPpsStd-parameter</span><br>
 If <code>pPpsStd</code> is not <code>NULL</code>, <code>pPpsStd</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>ppsStdCount</code> <code>StdVideoH265PictureParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-spsStdCount-arraylength" href="chap39.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-spsStdCount-arraylength"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-spsStdCount-arraylength</span><br>
 <code>spsStdCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-ppsStdCount-arraylength" href="chap39.html#VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-ppsStdCount-arraylength"></a> <span class="vuid">VUID-VkVideoDecodeH265SessionParametersAddInfoEXT-ppsStdCount-arraylength</span><br>
 <code>ppsStdCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_picture_parameters"><a class="anchor" href="chap39.html#_picture_parameters"></a>39.7.6. Picture Parameters</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoDecodeH265PictureInfoEXT">VkVideoDecodeH265PictureInfoEXT</a> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH265PictureInfoEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_decode_h265</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoDecodeH265PictureInfoEXT {
    VkStructureType                   sType;
    <span class="directive">const</span> <span class="directive">void</span>*                       pNext;
    StdVideoDecodeH265PictureInfo*    pStdPictureInfo;
    uint32_t                          slicesCount;
    <span class="directive">const</span> uint32_t*                   pSlicesDataOffsets;
} VkVideoDecodeH265PictureInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pStdPictureInfo</code> is a pointer to a
<code>StdVideoDecodeH265PictureInfo</code> structure specifying codec standard
specific picture information from the H.265 specification.</p>
</li>
<li>
<p><code>slicesCount</code> is the number of slices in this picture.</p>
</li>
<li>
<p><code>pSlicesDataOffsets</code> is a pointer to an array of <code>slicesCount</code>
offsets indicating the start offset of each slice within the bitstream
buffer.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265PictureInfoEXT-sType-sType" href="chap39.html#VUID-VkVideoDecodeH265PictureInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH265PictureInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H265_PICTURE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265PictureInfoEXT-pStdPictureInfo-parameter" href="chap39.html#VUID-VkVideoDecodeH265PictureInfoEXT-pStdPictureInfo-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH265PictureInfoEXT-pStdPictureInfo-parameter</span><br>
 <code>pStdPictureInfo</code> <strong class="purple">must</strong> be a valid pointer to a <code>StdVideoDecodeH265PictureInfo</code> value</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265PictureInfoEXT-pSlicesDataOffsets-parameter" href="chap39.html#VUID-VkVideoDecodeH265PictureInfoEXT-pSlicesDataOffsets-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH265PictureInfoEXT-pSlicesDataOffsets-parameter</span><br>
 <code>pSlicesDataOffsets</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>slicesCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265PictureInfoEXT-slicesCount-arraylength" href="chap39.html#VUID-VkVideoDecodeH265PictureInfoEXT-slicesCount-arraylength"></a> <span class="vuid">VUID-VkVideoDecodeH265PictureInfoEXT-slicesCount-arraylength</span><br>
 <code>slicesCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoDecodeH265DpbSlotInfoEXT">VkVideoDecodeH265DpbSlotInfoEXT</a> structure is defined as:</p>
</div>
<div id="VkVideoDecodeH265DpbSlotInfoEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_decode_h265</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoDecodeH265DpbSlotInfoEXT {
    VkStructureType                           sType;
    <span class="directive">const</span> <span class="directive">void</span>*                               pNext;
    <span class="directive">const</span> StdVideoDecodeH265ReferenceInfo*    pStdReferenceInfo;
} VkVideoDecodeH265DpbSlotInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pStdReferenceInfo</code> is a pointer to a
<code>StdVideoDecodeH265ReferenceInfo</code> structure specifying the codec
standard specific picture reference information from the H.264
specification.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoDecodeH265DpbSlotInfoEXT-sType-sType" href="chap39.html#VUID-VkVideoDecodeH265DpbSlotInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoDecodeH265DpbSlotInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_DECODE_H265_DPB_SLOT_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoDecodeH265DpbSlotInfoEXT-pStdReferenceInfo-parameter" href="chap39.html#VUID-VkVideoDecodeH265DpbSlotInfoEXT-pStdReferenceInfo-parameter"></a> <span class="vuid">VUID-VkVideoDecodeH265DpbSlotInfoEXT-pStdReferenceInfo-parameter</span><br>
 <code>pStdReferenceInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoDecodeH265ReferenceInfo</code> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="video-encode-operations"><a class="anchor" href="chap39.html#video-encode-operations"></a>39.8. Video Encode Operations</h3>
<div class="paragraph">
<p>Before the application can start recording Vulkan command buffers for the
Video Encode Operations, it <strong class="purple">must</strong> do the following, beforehand:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that the implementation can encode the Video Content by querying
the supported codec operations and profiles using
<a href="chap5.html#vkGetPhysicalDeviceQueueFamilyProperties2">vkGetPhysicalDeviceQueueFamilyProperties2</a>.</p>
</li>
<li>
<p>By using <a href="chap39.html#vkGetPhysicalDeviceVideoFormatPropertiesKHR">vkGetPhysicalDeviceVideoFormatPropertiesKHR</a> and providing
one or more video profiles, choose the Vulkan formats supported by the
implementation.
The formats for <a href="chap39.html#input-encode-picture">input</a> and
<a href="undefined">reference</a> pictures <strong class="purple">must</strong> be queried and chosen
separately.
Refer to the section on
<a href="chap39.html#supported-video-input-output-dpb-formats-enumeration">enumeration of
supported video formats</a>.</p>
</li>
<li>
<p>Before creating an image to be used as a video picture resource, obtain
the supported image creation parameters by querying with
<a href="chap43.html#vkGetPhysicalDeviceFormatProperties2">vkGetPhysicalDeviceFormatProperties2</a> and
<a href="chap44.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a> using one of the
reported formats and adding <a href="chap39.html#VkVideoProfilesKHR">VkVideoProfilesKHR</a> to the <code>pNext</code>
chain of <a href="chap43.html#VkFormatProperties2">VkFormatProperties2</a>.
When querying the parameters with
<a href="chap44.html#vkGetPhysicalDeviceImageFormatProperties2">vkGetPhysicalDeviceImageFormatProperties2</a> for images targeting
<a href="chap39.html#input-encode-picture">input</a> and <a href="undefined">reference
(DPB)</a> pictures, the
<a href="chap44.html#VkPhysicalDeviceImageFormatInfo2">VkPhysicalDeviceImageFormatInfo2</a>::<code>usage</code> field should contain
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_SRC_BIT_KHR</code> and
<code>VK_IMAGE_USAGE_VIDEO_ENCODE_DPB_BIT_KHR</code>, respectively.</p>
</li>
<li>
<p>Create none, some, or all of the required <a href="chap12.html#VkImage">images</a> for the
<a href="chap39.html#input-encode-picture">input</a> and <a href="undefined">reference</a>
pictures.
More Video Picture Resources <strong class="purple">can</strong> be created at some later point if
needed while processing the content to be encoded.
Also, if the size of the picture to be encoded is expected to change,
the images <strong class="purple">can</strong> be created based on the maximum expected content size.</p>
</li>
<li>
<p>Create the <a href="chap39.html#video-session">video session</a> to be used for video encode
operations.
Before creating the Encode Video Session, the encode capabilities
<strong class="purple">should</strong> be queried with <a href="chap39.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> to
obtain the limits of the parameters allowed by the implementation for a
particular codec profile.</p>
</li>
<li>
<p>Bind memory resources with the encode video session by calling
<a href="chap39.html#vkBindVideoSessionMemoryKHR">vkBindVideoSessionMemoryKHR</a>.
The video session <strong class="purple">cannot</strong> be used until memory resources are allocated
and bound to it.
In order to determine the required memory sizes and heap types of the
device memory allocations, <a href="chap39.html#vkGetVideoSessionMemoryRequirementsKHR">vkGetVideoSessionMemoryRequirementsKHR</a>
<strong class="purple">should</strong> be called.</p>
</li>
<li>
<p>Create one or more <a href="chap39.html#video-session-parameters-introduction">Session
Parameter objects</a> for use across command buffer recording operations,
if required by the codec extension in use.
These objects <strong class="purple">must</strong> be created against a <a href="chap39.html#video-session">video session</a>
with the parameters required by the codec.
Each <a href="chap39.html#video-session-parameters-introduction">Session Parameter object</a>
created is a child object of the associated <a href="chap39.html#video-session">Session
object</a> and <strong class="purple">cannot</strong> be bound in the command buffer with any other
<a href="chap39.html#video-session">Session Object</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The recording of Video Encode Commands against a Vulkan Command Buffer
consists of the following sequence:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="chap39.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> starts the recording of one or more Video
Encode operations in the command buffer.
For each Video Encode Command operation, a Video Session <strong class="purple">must</strong> be bound
to the command buffer within this command.
This command establishes a Vulkan Video Encode Context that consists of
the bound Video Session Object, Session Parameters Object, and the
required Video Picture Resources.
The established Video Encode Context is in effect until the
<a href="chap39.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> command is recorded.
If more Video Encode operations are to be required after the
<a href="chap39.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> command, another Video Encode Context <strong class="purple">can</strong>
be started with the <a href="chap39.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command.</p>
</li>
<li>
<p><a href="chap39.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a> specifies one or more frames to be encoded.
The <a href="chap39.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a> parameters, and the codec extension
structures chained to this, specify the details of the encode operation.</p>
</li>
<li>
<p><a href="chap39.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a> records operations against the encoded
data, encoding device, or the Video Session state.</p>
</li>
<li>
<p><a href="chap39.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> signals the end of the recording of the
Vulkan Video Encode Context, as established by
<a href="chap39.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In addition to the above, the following commands <strong class="purple">can</strong> be recorded between
<a href="chap39.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> and <a href="chap39.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Query operations</p>
</li>
<li>
<p>Global Memory Barriers</p>
</li>
<li>
<p>Buffer Memory Barriers</p>
</li>
<li>
<p>Image Memory Barriers (these <strong class="purple">must</strong> be used to transition the Video
Picture Resources to the proper
<code>VK_IMAGE_LAYOUT_VIDEO_ENCODE_SRC_KHR</code> and
<code>VK_IMAGE_LAYOUT_VIDEO_ENCODE_DPB_KHR</code> layouts).</p>
</li>
<li>
<p>Pipeline Barriers</p>
</li>
<li>
<p>Events</p>
</li>
<li>
<p>Timestamps</p>
</li>
<li>
<p>Device Groups (device mask)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following Video Encode related commands <strong class="purple">must</strong> be recorded <strong>outside</strong> the
Vulkan Video Encode Context established with the
<a href="chap39.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> and <a href="chap39.html#vkCmdEndVideoCodingKHR">vkCmdEndVideoCodingKHR</a> commands:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sparse Memory Binding</p>
</li>
<li>
<p>Copy Commands</p>
</li>
<li>
<p>Clear Commands</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_video_encode_vulkan_command_buffer_commands"><a class="anchor" href="chap39.html#_video_encode_vulkan_command_buffer_commands"></a>39.8.1. Video Encode Vulkan Command Buffer Commands</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To launch an encode operation that results in bitstream generation, call:</p>
</div>
<div id="vkCmdEncodeVideoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_encode_queue</span>
<span class="directive">void</span> vkCmdEncodeVideoKHR(
    VkCommandBuffer                             commandBuffer,
    <span class="directive">const</span> VkVideoEncodeInfoKHR*                 pEncodeInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer to be filled with this
function for encoding to generate a bitstream.</p>
</li>
<li>
<p><code>pEncodeInfo</code> is a pointer to a <a href="chap39.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>
structure.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdEncodeVideoKHR-commandBuffer-parameter" href="chap39.html#VUID-vkCmdEncodeVideoKHR-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdEncodeVideoKHR-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdEncodeVideoKHR-pEncodeInfo-parameter" href="chap39.html#VUID-vkCmdEncodeVideoKHR-pEncodeInfo-parameter"></a> <span class="vuid">VUID-vkCmdEncodeVideoKHR-pEncodeInfo-parameter</span><br>
 <code>pEncodeInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap39.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdEncodeVideoKHR-commandBuffer-recording" href="chap39.html#VUID-vkCmdEncodeVideoKHR-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdEncodeVideoKHR-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdEncodeVideoKHR-commandBuffer-cmdpool" href="chap39.html#VUID-vkCmdEncodeVideoKHR-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdEncodeVideoKHR-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support encode operations</p>
</li>
<li>
<p><a id="VUID-vkCmdEncodeVideoKHR-renderpass" href="chap39.html#VUID-vkCmdEncodeVideoKHR-renderpass"></a> <span class="vuid">VUID-vkCmdEncodeVideoKHR-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdEncodeVideoKHR-bufferlevel" href="chap39.html#VUID-vkCmdEncodeVideoKHR-bufferlevel"></a> <span class="vuid">VUID-vkCmdEncodeVideoKHR-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encode</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoEncodeInfoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_encode_queue</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoEncodeInfoKHR {
    VkStructureType                   sType;
    <span class="directive">const</span> <span class="directive">void</span>*                       pNext;
    VkVideoEncodeFlagsKHR             flags;
    uint32_t                          qualityLevel;
    VkExtent2D                        codedExtent;
    VkBuffer                          dstBitstreamBuffer;
    VkDeviceSize                      dstBitstreamBufferOffset;
    VkDeviceSize                      dstBitstreamBufferMaxRange;
    VkVideoPictureResourceKHR         srcPictureResource;
    <span class="directive">const</span> VkVideoReferenceSlotKHR*    pSetupReferenceSlot;
    uint32_t                          referenceSlotCount;
    <span class="directive">const</span> VkVideoReferenceSlotKHR*    pReferenceSlots;
} VkVideoEncodeInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is a pointer to a structure extending this structure.
A codec-specific extension structure <strong class="purple">must</strong> be chained to specify what
bitstream unit to generate with this encode operation.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap39.html#VkVideoEncodeFlagBitsKHR">VkVideoEncodeFlagBitsKHR</a> specifying
encode flags, and is reserved for future versions of this specification.</p>
</li>
<li>
<p><code>qualityLevel</code> is the coding quality level of the encoding.
It is defined by the codec-specific extensions.</p>
</li>
<li>
<p><code>codedExtent</code> is the coded size of the encode operations.</p>
</li>
<li>
<p><code>dstBitstreamBuffer</code> is the buffer where the encoded bitstream
output will be produced.</p>
</li>
<li>
<p><code>dstBitstreamBufferOffset</code> is the offset in the
<code>dstBitstreamBuffer</code> where the encoded bitstream output will start.
<code>dstBitstreamBufferOffset</code>’s value <strong class="purple">must</strong> be aligned to
<a href="chap39.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>minBitstreamBufferOffsetAlignment</code>,
as reported by the implementation.</p>
</li>
<li>
<p><code>dstBitstreamBufferMaxRange</code> is the maximum size of the
<code>dstBitstreamBuffer</code> that can be used while the encoded bitstream
output is produced.
<code>dstBitstreamBufferMaxRange</code>’s value <strong class="purple">must</strong> be aligned to
<a href="chap39.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a>::<code>minBitstreamBufferSizeAlignment</code>, as
reported by the implementation.</p>
</li>
<li>
<p><code>srcPictureResource</code> is the Picture Resource of the
<a href="chap39.html#input-encode-picture">Input Picture</a> to be encoded by the operation.</p>
</li>
<li>
<p><code>pSetupReferenceSlot</code> is a pointer to a
<a href="chap39.html#VkVideoReferenceSlotKHR">VkVideoReferenceSlotKHR</a> structure used for generating a
reconstructed reference slot and Picture Resource.
<code>pSetupReferenceSlot-&gt;slotIndex</code> specifies the slot index number to
use as a target for producing the Reconstructed (DPB) data.
<code>pSetupReferenceSlot</code> <strong class="purple">must</strong> be one of the entries provided in
<a href="chap39.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a> via the <code>pReferenceSlots</code> within the
<a href="chap39.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command that established the Vulkan Video
Encode Context for this command.</p>
</li>
<li>
<p><code>referenceSlotCount</code> is the number of Reconstructed Reference
Pictures that will be used when this encoding operation is executing.</p>
</li>
<li>
<p><code>pReferenceSlots</code> is <code>NULL</code> or a pointer to an array of
<a href="chap39.html#VkVideoReferenceSlotKHR">VkVideoReferenceSlotKHR</a> structures that will be used when this
encoding operation is executing.
Each entry in <code>pReferenceSlots</code> <strong class="purple">must</strong> be one of the entries provided
in <a href="chap39.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a> via the <code>pReferenceSlots</code> within
the <a href="chap39.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command that established the Vulkan
Video Encode Context for this command.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Multiple vkCmdEncodeVideoKHR commands <strong class="purple">may</strong> be recorded within a Vulkan Video
Encode Context.
The execution of each <a href="chap39.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a> command will result in
generating codec-specific bitstream units.
These bitstream units are generated consecutively into the bitstream buffer
specified in <code>dstBitstreamBuffer</code> of <a href="chap39.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a> within
the <a href="chap39.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a> command.
The produced bitstream is the sum of all these bitstream units, including
any padding between the bitstream units.
Any bitstream padding <strong class="purple">must</strong> be filled with data compliant to the codec
standard so as not to cause any syntax errors during decoding of the
bitstream units with the padding included.
The range of the bitstream buffer written <strong class="purple">can</strong> be queried via
<a href="chap18.html#queries-video-encode-bitstream-buffer-range">video encode bitstream buffer
range queries</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-sType-sType" href="chap39.html#VUID-VkVideoEncodeInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-pNext-pNext" href="chap39.html#VUID-VkVideoEncodeInfoKHR-pNext-pNext"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap39.html#VkVideoEncodeH264EmitPictureParametersEXT">VkVideoEncodeH264EmitPictureParametersEXT</a> or <a href="chap39.html#VkVideoEncodeH264VclFrameInfoEXT">VkVideoEncodeH264VclFrameInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-sType-unique" href="chap39.html#VUID-VkVideoEncodeInfoKHR-sType-unique"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-flags-parameter" href="chap39.html#VUID-VkVideoEncodeInfoKHR-flags-parameter"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap39.html#VkVideoEncodeFlagBitsKHR">VkVideoEncodeFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-dstBitstreamBuffer-parameter" href="chap39.html#VUID-VkVideoEncodeInfoKHR-dstBitstreamBuffer-parameter"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-dstBitstreamBuffer-parameter</span><br>
 <code>dstBitstreamBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap12.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-srcPictureResource-parameter" href="chap39.html#VUID-VkVideoEncodeInfoKHR-srcPictureResource-parameter"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-srcPictureResource-parameter</span><br>
 <code>srcPictureResource</code> <strong class="purple">must</strong> be a valid <a href="chap39.html#VkVideoPictureResourceKHR">VkVideoPictureResourceKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-pSetupReferenceSlot-parameter" href="chap39.html#VUID-VkVideoEncodeInfoKHR-pSetupReferenceSlot-parameter"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-pSetupReferenceSlot-parameter</span><br>
 <code>pSetupReferenceSlot</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap39.html#VkVideoReferenceSlotKHR">VkVideoReferenceSlotKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-pReferenceSlots-parameter" href="chap39.html#VUID-VkVideoEncodeInfoKHR-pReferenceSlots-parameter"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-pReferenceSlots-parameter</span><br>
 <code>pReferenceSlots</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>referenceSlotCount</code> valid <a href="chap39.html#VkVideoReferenceSlotKHR">VkVideoReferenceSlotKHR</a> structures</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeInfoKHR-referenceSlotCount-arraylength" href="chap39.html#VUID-VkVideoEncodeInfoKHR-referenceSlotCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeInfoKHR-referenceSlotCount-arraylength</span><br>
 <code>referenceSlotCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a> flags are defined with the following
enumeration:</p>
</div>
<div id="VkVideoEncodeFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_encode_queue</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkVideoEncodeFlagBitsKHR {
    VK_VIDEO_ENCODE_DEFAULT_KHR = <span class="integer">0</span>,
    VK_VIDEO_ENCODE_RESERVED_0_BIT_KHR = <span class="hex">0x00000001</span>,
} VkVideoEncodeFlagBitsKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_RESERVED_0_BIT_KHR</code> The current version of the
specification has reserved this value for future use.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeFlagsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_encode_queue</span>
<span class="keyword">typedef</span> VkFlags VkVideoEncodeFlagsKHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap39.html#VkVideoEncodeFlagsKHR">VkVideoEncodeFlagsKHR</a> is a bitmask type for setting a mask of zero or
more <a href="chap39.html#VkVideoEncodeFlagBitsKHR">VkVideoEncodeFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a> structure is defined as:</p>
</div>
<div id="VkVideoEncodeRateControlInfoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_encode_queue</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoEncodeRateControlInfoKHR {
    VkStructureType                            sType;
    <span class="directive">const</span> <span class="directive">void</span>*                                pNext;
    VkVideoEncodeRateControlFlagsKHR           flags;
    VkVideoEncodeRateControlModeFlagBitsKHR    rateControlMode;
    uint32_t                                   averageBitrate;
    uint16_t                                   peakToAverageBitrateRatio;
    uint16_t                                   frameRateNumerator;
    uint16_t                                   frameRateDenominator;
    uint32_t                                   virtualBufferSizeInMs;
} VkVideoEncodeRateControlInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of
<a href="chap39.html#VkVideoEncodeRateControlModeFlagBitsKHR">VkVideoEncodeRateControlModeFlagBitsKHR</a> specifying encode rate
control flags.</p>
</li>
<li>
<p><code>rateControlMode</code> is a <a href="chap39.html#VkVideoEncodeRateControlModeFlagBitsKHR">VkVideoEncodeRateControlModeFlagBitsKHR</a>
value specifying the encode rate control mode.</p>
</li>
<li>
<p><code>averageBitrate</code> is the average bitrate in bits/second.
Valid when rate control is not
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</code>.</p>
</li>
<li>
<p><code>peakToAverageBitrateRatio</code> is the peak bitrate to average bitrate
in percentage.
Valid when rate control is
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_VBR_BIT_KHR</code>.</p>
</li>
<li>
<p><code>frameRateNumerator</code> is the numerator of the frame rate.
Valid when rate control is not
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</code>.</p>
</li>
<li>
<p><code>frameRateDenominator</code> is the denominator of the frame rate.
Valid when rate control is not
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</code>.</p>
</li>
<li>
<p><code>virtualBufferSizeInMs</code> is the leaky bucket model virtual buffer
size in milliseconds, with respect to peak bitrate.
Valid when rate control is not
<code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</code>.
For example, virtual buffer size is (<code>virtualBufferSizeInMs</code> *
<code>peakToAverageBitrateRatio</code> * <code>averageBitrate</code> / 100000).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A codec-specific extension structure for further rate control parameter
settings <strong class="purple">may</strong> be chained to <a href="chap39.html#VkVideoEncodeRateControlInfoKHR">VkVideoEncodeRateControlInfoKHR</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeRateControlInfoKHR-sType-sType" href="chap39.html#VUID-VkVideoEncodeRateControlInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeRateControlInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_RATE_CONTROL_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeRateControlInfoKHR-flags-parameter" href="chap39.html#VUID-VkVideoEncodeRateControlInfoKHR-flags-parameter"></a> <span class="vuid">VUID-VkVideoEncodeRateControlInfoKHR-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap39.html#VkVideoEncodeRateControlFlagBitsKHR">VkVideoEncodeRateControlFlagBitsKHR</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeRateControlInfoKHR-flags-requiredbitmask" href="chap39.html#VUID-VkVideoEncodeRateControlInfoKHR-flags-requiredbitmask"></a> <span class="vuid">VUID-VkVideoEncodeRateControlInfoKHR-flags-requiredbitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeRateControlInfoKHR-rateControlMode-parameter" href="chap39.html#VUID-VkVideoEncodeRateControlInfoKHR-rateControlMode-parameter"></a> <span class="vuid">VUID-VkVideoEncodeRateControlInfoKHR-rateControlMode-parameter</span><br>
 <code>rateControlMode</code> <strong class="purple">must</strong> be a valid <a href="chap39.html#VkVideoEncodeRateControlModeFlagBitsKHR">VkVideoEncodeRateControlModeFlagBitsKHR</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The rate control modes are defined with the following enums:</p>
</div>
<div id="VkVideoEncodeRateControlModeFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_encode_queue</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkVideoEncodeRateControlModeFlagBitsKHR {
    VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR = <span class="integer">0</span>,
    VK_VIDEO_ENCODE_RATE_CONTROL_MODE_CBR_BIT_KHR = <span class="integer">1</span>,
    VK_VIDEO_ENCODE_RATE_CONTROL_MODE_VBR_BIT_KHR = <span class="integer">2</span>,
} VkVideoEncodeRateControlModeFlagBitsKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_NONE_BIT_KHR</code> for disabling rate
control.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_CBR_BIT_KHR</code> for constant bitrate
rate control mode.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_RATE_CONTROL_MODE_VBR_BIT_KHR</code> for variable bitrate
rate control mode.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeRateControlModeFlagsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_encode_queue</span>
<span class="keyword">typedef</span> VkFlags VkVideoEncodeRateControlModeFlagsKHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap39.html#VkVideoEncodeRateControlModeFlagsKHR">VkVideoEncodeRateControlModeFlagsKHR</a> is a bitmask type for setting a
mask of zero or more <a href="chap39.html#VkVideoEncodeRateControlModeFlagBitsKHR">VkVideoEncodeRateControlModeFlagBitsKHR</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#vkCmdControlVideoCodingKHR">vkCmdControlVideoCodingKHR</a> flags are defined with the following
enumeration:</p>
</div>
<div id="VkVideoEncodeRateControlFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_encode_queue</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkVideoEncodeRateControlFlagBitsKHR {
    VK_VIDEO_ENCODE_RATE_CONTROL_DEFAULT_KHR = <span class="integer">0</span>,
    VK_VIDEO_ENCODE_RATE_CONTROL_RESET_BIT_KHR = <span class="hex">0x00000001</span>,
} VkVideoEncodeRateControlFlagBitsKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_RESERVED_0_BIT_KHR</code> The current version of the
specification has reserved this value for future use.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeRateControlFlagsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_video_encode_queue</span>
<span class="keyword">typedef</span> VkFlags VkVideoEncodeRateControlFlagsKHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap39.html#VkVideoEncodeRateControlFlagsKHR">VkVideoEncodeRateControlFlagsKHR</a> is a bitmask type for setting a mask
of zero or more <a href="chap39.html#VkVideoEncodeRateControlFlagBitsKHR">VkVideoEncodeRateControlFlagBitsKHR</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="encode-h264"><a class="anchor" href="chap39.html#encode-h264"></a>39.9. Encode H.264</h3>
<div class="paragraph">
<p>This extension adds H.264 codec specific structures/types needed to support
H.264 encoding.
Unless otherwise noted, all references to the H.264 specification are to the
2010 edition published by the ITU-T, dated March 2010.
This specification is available at <a href="http://www.itu.int/rec/T-REC-H.264" class="bare">http://www.itu.int/rec/T-REC-H.264</a>.</p>
</div>
<div class="sect3">
<h4 id="_h_264_encode_profile"><a class="anchor" href="chap39.html#_h_264_encode_profile"></a>39.9.1. H.264 encode profile</h4>
<div class="paragraph">
<p>A H.264 encode profile is specified using <a href="chap39.html#VkVideoEncodeH264ProfileEXT">VkVideoEncodeH264ProfileEXT</a>
chained to <a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a> when the codec-operation in
<a href="chap39.html#VkVideoProfileKHR">VkVideoProfileKHR</a> is
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoEncodeH264ProfileEXT">VkVideoEncodeH264ProfileEXT</a> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH264ProfileEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_encode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoEncodeH264ProfileEXT {
    VkStructureType           sType;
    <span class="directive">const</span> <span class="directive">void</span>*               pNext;
    StdVideoH264ProfileIdc    stdProfileIdc;
} VkVideoEncodeH264ProfileEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stdProfileIdc</code> is a <code>StdVideoH264ProfileIdc</code> value specifying
the H.264 codec profile IDC.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264ProfileEXT-sType-sType" href="chap39.html#VUID-VkVideoEncodeH264ProfileEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264ProfileEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_PROFILE_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_capabilities_3"><a class="anchor" href="chap39.html#_capabilities_3"></a>39.9.2. Capabilities</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>When <a href="chap39.html#vkGetPhysicalDeviceVideoCapabilitiesKHR">vkGetPhysicalDeviceVideoCapabilitiesKHR</a> is called to query the
capabilities with parameter <code>videoCodecOperation</code> specified as
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code>, an instance of
<a href="chap39.html#VkVideoEncodeH264CapabilitiesEXT">VkVideoEncodeH264CapabilitiesEXT</a> structure <strong class="purple">can</strong> be chained to
<a href="chap39.html#VkVideoCapabilitiesKHR">VkVideoCapabilitiesKHR</a> to retrieve H.264 extension specific
capabilities.</p>
</div>
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoEncodeH264CapabilitiesEXT">VkVideoEncodeH264CapabilitiesEXT</a> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH264CapabilitiesEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_encode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoEncodeH264CapabilitiesEXT {
    VkStructureType                        sType;
    <span class="directive">const</span> <span class="directive">void</span>*                            pNext;
    VkVideoEncodeH264CapabilityFlagsEXT    flags;
    VkVideoEncodeH264InputModeFlagsEXT     inputModeFlags;
    VkVideoEncodeH264OutputModeFlagsEXT    outputModeFlags;
    VkExtent2D                             minPictureSizeInMbs;
    VkExtent2D                             maxPictureSizeInMbs;
    VkExtent2D                             inputImageDataAlignment;
    uint8_t                                maxNumL0ReferenceForP;
    uint8_t                                maxNumL0ReferenceForB;
    uint8_t                                maxNumL1Reference;
    uint8_t                                qualityLevelCount;
    VkExtensionProperties                  stdExtensionVersion;
} VkVideoEncodeH264CapabilitiesEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap39.html#VkVideoEncodeH264CapabilityFlagBitsEXT">VkVideoEncodeH264CapabilityFlagBitsEXT</a>
describing supported encoding tools.</p>
</li>
<li>
<p><code>inputModeFlags</code> is a bitmask of
<a href="chap39.html#VkVideoEncodeH264InputModeFlagBitsEXT">VkVideoEncodeH264InputModeFlagBitsEXT</a> describing supported command
buffer input granularities/modes.</p>
</li>
<li>
<p><code>outputModeFlags</code> is a bitmask of
<a href="chap39.html#VkVideoEncodeH264OutputModeFlagBitsEXT">VkVideoEncodeH264OutputModeFlagBitsEXT</a> describing supported output
(bitstream size reporting) granularities/modes.</p>
</li>
<li>
<p><code>maxPictureSizeInMbs</code> reports the maximum encoded picture width and
height in Macroblocks.</p>
</li>
<li>
<p><code>minPictureSizeInMbs</code> reports the minimum encoded picture width and
height in Macroblocks.</p>
</li>
<li>
<p><code>inputImageDataAlignment</code> reports alignment of data that <strong class="purple">must</strong> be
filled in the input image horizontally and vertically in pixels.
Max is 16: Data <strong class="purple">must</strong> be filled up to Macroblock boundary (no
extrapolation/filling is supported by implementation).
Min is 1: The implementation will take care of all needed
extrapolation/filling up to the next Macroblock boundary.</p>
</li>
<li>
<p><code>maxNumL0ReferenceForP</code> reports the maximum number of reference
pictures the encoder supports as list0 references for P pictures.</p>
</li>
<li>
<p><code>maxNumL0ReferenceForB</code> reports the maximum number of reference
pictures the encoder supports as list0 references for B pictures.
Reports 0 if B pictures are not supported.</p>
</li>
<li>
<p><code>maxNumL1Reference</code> reports the maximum number of reference pictures
the encoder supports as list1 references if B pictures are supported.
Reports 0 if B pictures are not supported.</p>
</li>
<li>
<p><code>qualityLevelCount</code> is the number of discrete quality levels
supported.</p>
</li>
<li>
<p><code>stdExtensionVersion</code> is the specific H.264 extension name and
version supported by this implementation.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264CapabilitiesEXT-sType-sType" href="chap39.html#VUID-VkVideoEncodeH264CapabilitiesEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264CapabilitiesEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_CAPABILITIES_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264CapabilitiesEXT-flags-parameter" href="chap39.html#VUID-VkVideoEncodeH264CapabilitiesEXT-flags-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264CapabilitiesEXT-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap39.html#VkVideoEncodeH264CapabilityFlagBitsEXT">VkVideoEncodeH264CapabilityFlagBitsEXT</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264CapabilitiesEXT-flags-requiredbitmask" href="chap39.html#VUID-VkVideoEncodeH264CapabilitiesEXT-flags-requiredbitmask"></a> <span class="vuid">VUID-VkVideoEncodeH264CapabilitiesEXT-flags-requiredbitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264CapabilitiesEXT-inputModeFlags-parameter" href="chap39.html#VUID-VkVideoEncodeH264CapabilitiesEXT-inputModeFlags-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264CapabilitiesEXT-inputModeFlags-parameter</span><br>
 <code>inputModeFlags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap39.html#VkVideoEncodeH264InputModeFlagBitsEXT">VkVideoEncodeH264InputModeFlagBitsEXT</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264CapabilitiesEXT-inputModeFlags-requiredbitmask" href="chap39.html#VUID-VkVideoEncodeH264CapabilitiesEXT-inputModeFlags-requiredbitmask"></a> <span class="vuid">VUID-VkVideoEncodeH264CapabilitiesEXT-inputModeFlags-requiredbitmask</span><br>
 <code>inputModeFlags</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264CapabilitiesEXT-outputModeFlags-parameter" href="chap39.html#VUID-VkVideoEncodeH264CapabilitiesEXT-outputModeFlags-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264CapabilitiesEXT-outputModeFlags-parameter</span><br>
 <code>outputModeFlags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap39.html#VkVideoEncodeH264OutputModeFlagBitsEXT">VkVideoEncodeH264OutputModeFlagBitsEXT</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264CapabilitiesEXT-outputModeFlags-requiredbitmask" href="chap39.html#VUID-VkVideoEncodeH264CapabilitiesEXT-outputModeFlags-requiredbitmask"></a> <span class="vuid">VUID-VkVideoEncodeH264CapabilitiesEXT-outputModeFlags-requiredbitmask</span><br>
 <code>outputModeFlags</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264CapabilitiesEXT-stdExtensionVersion-parameter" href="chap39.html#VUID-VkVideoEncodeH264CapabilitiesEXT-stdExtensionVersion-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264CapabilitiesEXT-stdExtensionVersion-parameter</span><br>
 <code>stdExtensionVersion</code> <strong class="purple">must</strong> be a valid <a href="chap40.html#VkExtensionProperties">VkExtensionProperties</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>flags</code> field reports various encoding tools supported as defined
with the following bitfield:</p>
</div>
<div id="VkVideoEncodeH264CapabilityFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_encode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkVideoEncodeH264CapabilityFlagBitsEXT {
    VK_VIDEO_ENCODE_H264_CAPABILITY_CABAC_BIT_EXT = <span class="hex">0x00000001</span>,
    VK_VIDEO_ENCODE_H264_CAPABILITY_CAVLC_BIT_EXT = <span class="hex">0x00000002</span>,
    VK_VIDEO_ENCODE_H264_CAPABILITY_WEIGHTED_BI_PRED_IMPLICIT_BIT_EXT = <span class="hex">0x00000004</span>,
    VK_VIDEO_ENCODE_H264_CAPABILITY_TRANSFORM_8X8_BIT_EXT = <span class="hex">0x00000008</span>,
    VK_VIDEO_ENCODE_H264_CAPABILITY_CHROMA_QP_OFFSET_BIT_EXT = <span class="hex">0x00000010</span>,
    VK_VIDEO_ENCODE_H264_CAPABILITY_SECOND_CHROMA_QP_OFFSET_BIT_EXT = <span class="hex">0x00000020</span>,
    VK_VIDEO_ENCODE_H264_CAPABILITY_DEBLOCKING_FILTER_DISABLED_BIT_EXT = <span class="hex">0x00000040</span>,
    VK_VIDEO_ENCODE_H264_CAPABILITY_DEBLOCKING_FILTER_ENABLED_BIT_EXT = <span class="hex">0x00000080</span>,
    VK_VIDEO_ENCODE_H264_CAPABILITY_DEBLOCKING_FILTER_PARTIAL_BIT_EXT = <span class="hex">0x00000100</span>,
    VK_VIDEO_ENCODE_H264_CAPABILITY_MULTIPLE_SLICE_PER_FRAME_BIT_EXT = <span class="hex">0x00000200</span>,
    VK_VIDEO_ENCODE_H264_CAPABILITY_EVENLY_DISTRIBUTED_SLICE_SIZE_BIT_EXT = <span class="hex">0x00000400</span>,
} VkVideoEncodeH264CapabilityFlagBitsEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_CABAC_BIT_EXT</code> reports if CABAC
entropy coding is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_CAVLC_BIT_EXT</code> reports if CAVLC
entropy coding is supported.
An implementation <strong class="purple">must</strong> support at least one entropy coding mode.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_WEIGHTED_BI_PRED_IMPLICIT_BIT_EXT</code>
reports if using weighted_bipred_idc_flag from StdVideoH264PpsFlags is
supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_TRANSFORM_8X8_BIT_EXT</code> reports if
enabling transform_8x8_mode_flag in StdVideoH264PpsFlags is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_CHROMA_QP_OFFSET_BIT_EXT</code> reports
if setting chroma_qp_index_offset in StdVideoH264PictureParameterSet is
supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_SECOND_CHROMA_QP_OFFSET_BIT_EXT</code>
reports if setting second_chroma_qp_index_offset in
StdVideoH264PictureParameterSet is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_DEBLOCKING_FILTER_DISABLED_BIT_EXT</code>
reports if using std_video_h264_disable_deblocking_filter_idc_disabled
from StdVideoH264DisableDeblockingFilterIdc is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_DEBLOCKING_FILTER_ENABLED_BIT_EXT</code>
reports if using std_video_h264_disable_deblocking_filter_idc_enabled
from StdVideoH264DisableDeblockingFilterIdc is supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_DEBLOCKING_FILTER_PARTIAL_BIT_EXT</code>
reports if using std_video_h264_disable_deblocking_filter_idc_partial
from StdVideoH264DisableDeblockingFilterIdc is supported.
An implementation <strong class="purple">must</strong> support at least one deblocking filter mode.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_MULTIPLE_SLICE_PER_FRAME_BIT_EXT</code></p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CAPABILITY_EVENLY_DISTRIBUTED_SLICE_SIZE_BIT_EXT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>inputModeFlags</code> field reports the various commmand buffer input
granularities supported by the implementation as follows:</p>
</div>
<div id="VkVideoEncodeH264InputModeFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_encode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkVideoEncodeH264InputModeFlagBitsEXT {
    VK_VIDEO_ENCODE_H264_INPUT_MODE_FRAME_BIT_EXT = <span class="hex">0x00000001</span>,
    VK_VIDEO_ENCODE_H264_INPUT_MODE_SLICE_BIT_EXT = <span class="hex">0x00000002</span>,
    VK_VIDEO_ENCODE_H264_INPUT_MODE_NON_VCL_BIT_EXT = <span class="hex">0x00000004</span>,
} VkVideoEncodeH264InputModeFlagBitsEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_H264_INPUT_MODE_FRAME_BIT_EXT</code> indicates a single
command buffer <strong class="purple">must</strong> at least encode an entire frame.
Any non-VCL NALUs <strong class="purple">must</strong> be encoded using the same command buffer as the
frame if <code>VK_VIDEO_ENCODE_H264_INPUT_MODE_NON_VCL_BIT_EXT</code> is not
supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_INPUT_MODE_SLICE_BIT_EXT</code> indicates a single
command buffer <strong class="purple">must</strong> at least encode a single slice.
Any non-VCL NALUs <strong class="purple">must</strong> be encoded using the same command buffer as the
first slice of the frame if
<code>VK_VIDEO_ENCODE_H264_INPUT_MODE_NON_VCL_BIT_EXT</code> is not supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_INPUT_MODE_NON_VCL_BIT_EXT</code> indicates a single
command buffer <strong class="purple">may</strong> encode a non-VCL NALU by itself.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An implementation <strong class="purple">must</strong> support at least one of
<code>VK_VIDEO_ENCODE_H264_INPUT_MODE_FRAME_BIT_EXT</code> or
<code>VK_VIDEO_ENCODE_H264_INPUT_MODE_SLICE_BIT_EXT</code>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>outputModeFlags</code> field reports the minimum bitstream generation
commands that <strong class="purple">must</strong> be included between each <a href="chap39.html#vkCmdBeginVideoCodingKHR">vkCmdBeginVideoCodingKHR</a>
and <a href="chap39.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a> pair (henceforth simply begin/end pair).
The various output modes are:</p>
</div>
<div id="VkVideoEncodeH264OutputModeFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_encode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkVideoEncodeH264OutputModeFlagBitsEXT {
    VK_VIDEO_ENCODE_H264_OUTPUT_MODE_FRAME_BIT_EXT = <span class="hex">0x00000001</span>,
    VK_VIDEO_ENCODE_H264_OUTPUT_MODE_SLICE_BIT_EXT = <span class="hex">0x00000002</span>,
    VK_VIDEO_ENCODE_H264_OUTPUT_MODE_NON_VCL_BIT_EXT = <span class="hex">0x00000004</span>,
} VkVideoEncodeH264OutputModeFlagBitsEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_H264_OUTPUT_MODE_FRAME_BIT_EXT</code> indicates calls to
generate all NALUs of a frame <strong class="purple">must</strong> be included within a single
begin/end pair.
Any non-VCL NALUs <strong class="purple">must</strong> be encoded within the same begin/end pair if
<code>VK_VIDEO_ENCODE_H264_OUTPUT_MODE_NON_VCL_BIT_EXT</code> is not supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_OUTPUT_MODE_SLICE_BIT_EXT</code> indicates each
begin/end pair <strong class="purple">must</strong> encode at least one slice.
Any non-VCL NALUs <strong class="purple">must</strong> be encoded within the same begin/end pair as the
first slice of the frame if
<code>VK_VIDEO_ENCODE_H264_OUTPUT_MODE_NON_VCL_BIT_EXT</code> is not supported.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_OUTPUT_MODE_NON_VCL_BIT_EXT</code> indicates each
begin/end pair <strong class="purple">may</strong> encode only a non-VCL NALU by itself.
An implementation <strong class="purple">must</strong> support at least one of
<code>VK_VIDEO_ENCODE_H264_OUTPUT_MODE_FRAME_BIT_EXT</code> or
<code>VK_VIDEO_ENCODE_H264_OUTPUT_MODE_SLICE_BIT_EXT</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A single begin/end pair <strong class="purple">must</strong> not encode more than a single frame.</p>
</div>
<div class="paragraph">
<p>The bitstreams of NALUs generated within a single begin/end pair are written
continuously into the same bitstream buffer (any padding between the NALUs
<strong class="purple">must</strong> be compliant to the H.264 standard).</p>
</div>
<div class="paragraph">
<p>The supported input modes <strong class="purple">must</strong> be coarser or equal to the supported output
modes.
For example, it is illegal to report slice input is supported but only frame
output is supported.</p>
</div>
<div class="paragraph">
<p>An implementation <strong class="purple">must</strong> report one of the following combinations of
input/output modes:
  <strong> Input: Frame, Output: Frame
  </strong> Input: Frame, Output: Frame and Non-VCL
  <strong> Input: Frame, Output: Slice
  </strong> Input: Frame, Output: Slice and Non-VCL
  <strong> Input: Slice, Output: Slice
  </strong> Input: Slice, Output: Slice and Non-VCL
  <strong> Input: Frame and Non-VCL, Output: Frame and Non-VCL
  </strong> Input: Frame and Non-VCL, Output: Slice and Non-VCL
  ** Input: Slice and Non-VCL, Output: Slice and Non-VCL</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_create_information_2"><a class="anchor" href="chap39.html#_create_information_2"></a>39.9.3. Create Information</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>An instance of <a href="chap39.html#VkVideoEncodeH264SessionCreateInfoEXT">VkVideoEncodeH264SessionCreateInfoEXT</a> structure <strong class="purple">must</strong>
be chained to <a href="chap39.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a> when the function
<a href="chap39.html#vkCreateVideoSessionKHR">vkCreateVideoSessionKHR</a> is called with <code>videoCodecOperation</code> in
<a href="chap39.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a> set to
<code>VK_VIDEO_CODEC_OPERATION_ENCODE_H264_BIT_EXT</code>.</p>
</div>
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoEncodeH264SessionCreateInfoEXT">VkVideoEncodeH264SessionCreateInfoEXT</a> structure is defined as:</p>
</div>
<div id="VkVideoEncodeH264SessionCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_encode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoEncodeH264SessionCreateInfoEXT {
    VkStructureType                    sType;
    <span class="directive">const</span> <span class="directive">void</span>*                        pNext;
    VkVideoEncodeH264CreateFlagsEXT    flags;
    VkExtent2D                         maxPictureSizeInMbs;
    <span class="directive">const</span> VkExtensionProperties*       pStdExtensionVersion;
} VkVideoEncodeH264SessionCreateInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap39.html#VkVideoEncodeH264CreateFlagsEXT">VkVideoEncodeH264CreateFlagsEXT</a>
specifying H.264 encoder creation flags.</p>
</li>
<li>
<p><code>maxPictureSizeInMbs</code> specifies the syntax element
pic_width_in_mbs_minus1 + 1 and the syntax element
pic_height_in_map_units_minus1 + 1.</p>
</li>
<li>
<p><code>pStdExtensionVersion</code> is a pointer to a <a href="chap40.html#VkExtensionProperties">VkExtensionProperties</a>
structure specifying H.264 codec extensions.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionCreateInfoEXT-sType-sType" href="chap39.html#VUID-VkVideoEncodeH264SessionCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_SESSION_CREATE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionCreateInfoEXT-flags-parameter" href="chap39.html#VUID-VkVideoEncodeH264SessionCreateInfoEXT-flags-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionCreateInfoEXT-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap39.html#VkVideoEncodeH264CreateFlagBitsEXT">VkVideoEncodeH264CreateFlagBitsEXT</a> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionCreateInfoEXT-flags-requiredbitmask" href="chap39.html#VUID-VkVideoEncodeH264SessionCreateInfoEXT-flags-requiredbitmask"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionCreateInfoEXT-flags-requiredbitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionCreateInfoEXT-pStdExtensionVersion-parameter" href="chap39.html#VUID-VkVideoEncodeH264SessionCreateInfoEXT-pStdExtensionVersion-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionCreateInfoEXT-pStdExtensionVersion-parameter</span><br>
 <code>pStdExtensionVersion</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap40.html#VkExtensionProperties">VkExtensionProperties</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Flags which <strong class="purple">can</strong> be set for a <a href="chap39.html#VkVideoEncodeH264CreateFlagsEXT">VkVideoEncodeH264CreateFlagsEXT</a> value
are:</p>
</div>
<div id="VkVideoEncodeH264CreateFlagBitsEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_encode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkVideoEncodeH264CreateFlagBitsEXT {
    VK_VIDEO_ENCODE_H264_CREATE_DEFAULT_EXT = <span class="integer">0</span>,
    VK_VIDEO_ENCODE_H264_CREATE_RESERVED_0_BIT_EXT = <span class="hex">0x00000001</span>,
} VkVideoEncodeH264CreateFlagBitsEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CREATE_DEFAULT_EXT</code> is 0, and specifies no
additional creation flags.</p>
</li>
<li>
<p><code>VK_VIDEO_ENCODE_H264_CREATE_RESERVED_0_BIT_EXT</code> The current version
of the specification has reserved this value for future use.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeH264CreateFlagsEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_encode_h264</span>
<span class="keyword">typedef</span> VkFlags VkVideoEncodeH264CreateFlagsEXT;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="chap39.html#VkVideoEncodeH264CreateFlagsEXT">VkVideoEncodeH264CreateFlagsEXT</a> is a bitmask type for setting a mask
of zero or more <a href="chap39.html#VkVideoEncodeH264CreateFlagBitsEXT">VkVideoEncodeH264CreateFlagBitsEXT</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_encoder_parameter_sets"><a class="anchor" href="chap39.html#_encoder_parameter_sets"></a>39.9.4. Encoder Parameter Sets</h4>
<div class="paragraph">
<p>To reduce parameter traffic during encoding, the encoder parameter set
object supports storing H.264 SPS/PPS parameter sets that <strong class="purple">may</strong> be later
referenced during encoding.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>An instance of <a href="chap39.html#VkVideoEncodeH264SessionParametersCreateInfoEXT">VkVideoEncodeH264SessionParametersCreateInfoEXT</a> holding
one H.264 SPS and at least one H.264 PPS paramater set <strong class="purple">must</strong> be chained to
<a href="chap39.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a> when calling
<a href="chap39.html#vkCreateVideoSessionParametersKHR">vkCreateVideoSessionParametersKHR</a> to store these parameter set(s) with
the encoder parameter set object for later reference.
The provided H.264 SPS/PPS parameters <strong class="purple">must</strong> be within the limits specified
during encoder creation for the encoder specified in
<a href="chap39.html#VkVideoSessionParametersCreateInfoKHR">VkVideoSessionParametersCreateInfoKHR</a>.</p>
</div>
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoEncodeH264SessionParametersCreateInfoEXT">VkVideoEncodeH264SessionParametersCreateInfoEXT</a> structure is
defined as:</p>
</div>
<div id="VkVideoEncodeH264SessionParametersCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_encode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoEncodeH264SessionParametersCreateInfoEXT {
    VkStructureType                                        sType;
    <span class="directive">const</span> <span class="directive">void</span>*                                            pNext;
    uint32_t                                               maxSpsStdCount;
    uint32_t                                               maxPpsStdCount;
    <span class="directive">const</span> VkVideoEncodeH264SessionParametersAddInfoEXT*    pParametersAddInfo;
} VkVideoEncodeH264SessionParametersCreateInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>maxSpsStdCount</code> is the maximum number of SPS parameters that the
<code>VkVideoSessionParametersKHR</code> can contain.</p>
</li>
<li>
<p><code>maxPpsStdCount</code> is the maximum number of PPS parameters that the
<code>VkVideoSessionParametersKHR</code> can contain.</p>
</li>
<li>
<p><code>pParametersAddInfo</code> is <code>NULL</code> or a pointer to a
<code>VkVideoEncodeH264SessionParametersAddInfoEXT</code> structure specifying
H.264 parameters to add upon object creation.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersCreateInfoEXT-sType-sType" href="chap39.html#VUID-VkVideoEncodeH264SessionParametersCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_SESSION_PARAMETERS_CREATE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersCreateInfoEXT-pParametersAddInfo-parameter" href="chap39.html#VUID-VkVideoEncodeH264SessionParametersCreateInfoEXT-pParametersAddInfo-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersCreateInfoEXT-pParametersAddInfo-parameter</span><br>
 If <code>pParametersAddInfo</code> is not <code>NULL</code>, <code>pParametersAddInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap39.html#VkVideoEncodeH264SessionParametersAddInfoEXT">VkVideoEncodeH264SessionParametersAddInfoEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkVideoEncodeH264SessionParametersAddInfoEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_encode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoEncodeH264SessionParametersAddInfoEXT {
    VkStructureType                            sType;
    <span class="directive">const</span> <span class="directive">void</span>*                                pNext;
    uint32_t                                   spsStdCount;
    <span class="directive">const</span> StdVideoH264SequenceParameterSet*    pSpsStd;
    uint32_t                                   ppsStdCount;
    <span class="directive">const</span> StdVideoH264PictureParameterSet*     pPpsStd;
} VkVideoEncodeH264SessionParametersAddInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>spsStdCount</code> is the number of SPS elements in the <code>pSpsStd</code>.
Its value <strong class="purple">must</strong> be less than or equal to the value of
<code>maxSpsStdCount</code>.</p>
</li>
<li>
<p><code>pSpsStd</code> is a pointer to an array of
<code>StdVideoH264SequenceParameterSet</code> structures representing H.264
sequence parameter sets.
Each element of the array <strong class="purple">must</strong> have a unique H.264 SPS ID.</p>
</li>
<li>
<p><code>ppsStdCount</code> is the number of PPS provided in <code>pPpsStd</code>.
Its value <strong class="purple">must</strong> be less than or equal to the value of
<code>maxPpsStdCount</code>.</p>
</li>
<li>
<p><code>pPpsStd</code> is a pointer to an array of
<code>StdVideoH264PictureParameterSet</code> structures representing H.264
picture parameter sets.
Each element of the array <strong class="purple">must</strong> have a unique H.264 SPS-PPS ID pair.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-spsStdCount-04837" href="chap39.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-spsStdCount-04837"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-spsStdCount-04837</span><br>

The values of <code>spsStdCount</code> and <code>ppsStdCount</code> <strong class="purple">must</strong> be less than
or equal to the values of <code>maxSpsStdCount</code> and <code>maxPpsStdCount</code>,
respectively.</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-maxSpsStdCount-04838" href="chap39.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-maxSpsStdCount-04838"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-maxSpsStdCount-04838</span><br>

When the <code>maxSpsStdCount</code> number of parameters of type
StdVideoH264SequenceParameterSet in the Video Session Parameters object
is reached, no additional parameters of that type can be added to the
object.
<code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add additional data to this object at this point.</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-maxPpsStdCount-04839" href="chap39.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-maxPpsStdCount-04839"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-maxPpsStdCount-04839</span><br>

When the <code>maxPpsStdCount</code> number of parameters of type
StdVideoH264PictureParameterSet in the Video Session Parameters object
is reached, no additional parameters of that type can be added to the
object.
<code>VK_ERROR_TOO_MANY_OBJECTS</code> will be returned if an attempt is made
to add additional data to this object at this point.</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04840" href="chap39.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04840"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04840</span><br>

Each entry to be added <strong class="purple">must</strong> have a unique, to the rest of the parameter
array entries and the existing parameters in the Video Session
Parameters Object that is being updated, SPS-PPS IDs.</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04841" href="chap39.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04841"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04841</span><br>

Parameter entries that already exist in Video Session Parameters object
with a particular SPS-PPS IDs <strong class="purple">cannot</strong> be replaced nor updated.</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04842" href="chap39.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04842"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04842</span><br>

When creating a new object using a Video Session Parameters as a
template, the array’s parameters with the same SPS-PPS IDs as the ones
from the template take precedence.</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04843" href="chap39.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04843"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-None-04843</span><br>

SPS/PPS parameters <strong class="purple">must</strong> comply with the limits specified in
<a href="chap39.html#VkVideoSessionCreateInfoKHR">VkVideoSessionCreateInfoKHR</a> during Video Session creation.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-sType-sType" href="chap39.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_SESSION_PARAMETERS_ADD_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-pSpsStd-parameter" href="chap39.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-pSpsStd-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-pSpsStd-parameter</span><br>
 If <code>pSpsStd</code> is not <code>NULL</code>, <code>pSpsStd</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>spsStdCount</code> <code>StdVideoH264SequenceParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-pPpsStd-parameter" href="chap39.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-pPpsStd-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-pPpsStd-parameter</span><br>
 If <code>pPpsStd</code> is not <code>NULL</code>, <code>pPpsStd</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>ppsStdCount</code> <code>StdVideoH264PictureParameterSet</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-spsStdCount-arraylength" href="chap39.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-spsStdCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-spsStdCount-arraylength</span><br>
 <code>spsStdCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-ppsStdCount-arraylength" href="chap39.html#VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-ppsStdCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH264SessionParametersAddInfoEXT-ppsStdCount-arraylength</span><br>
 <code>ppsStdCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_frame_encoding"><a class="anchor" href="chap39.html#_frame_encoding"></a>39.9.5. Frame Encoding</h4>
<div class="paragraph">
<p>To encode a frame the structure <a href="chap39.html#VkVideoEncodeH264VclFrameInfoEXT">VkVideoEncodeH264VclFrameInfoEXT</a> <strong class="purple">may</strong>
be chained to <a href="chap39.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a> when calling
<a href="chap39.html#vkCmdEncodeVideoKHR">vkCmdEncodeVideoKHR</a>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The structure <a href="chap39.html#VkVideoEncodeH264VclFrameInfoEXT">VkVideoEncodeH264VclFrameInfoEXT</a> representing a frame
encode operation is defined as:</p>
</div>
<div id="VkVideoEncodeH264VclFrameInfoEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_encode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoEncodeH264VclFrameInfoEXT {
    VkStructureType                           sType;
    <span class="directive">const</span> <span class="directive">void</span>*                               pNext;
    uint8_t                                   refDefaultFinalList0EntryCount;
    <span class="directive">const</span> VkVideoEncodeH264DpbSlotInfoEXT*    pRefDefaultFinalList0Entries;
    uint8_t                                   refDefaultFinalList1EntryCount;
    <span class="directive">const</span> VkVideoEncodeH264DpbSlotInfoEXT*    pRefDefaultFinalList1Entries;
    uint32_t                                  naluSliceEntryCount;
    <span class="directive">const</span> VkVideoEncodeH264NaluSliceEXT*      pNaluSliceEntries;
    <span class="directive">const</span> VkVideoEncodeH264DpbSlotInfoEXT*    pCurrentPictureInfo;
} VkVideoEncodeH264VclFrameInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>refDefaultFinalList0EntryCount</code> is the default number of reference
List0 entries for all slices of this frame.
Each slice <strong class="purple">may</strong> override this by providing its own List0 entries.</p>
</li>
<li>
<p><code>pRefDefaultFinalList0Entries</code> is a pointer to an array of
<a href="chap39.html#VkVideoEncodeH264DpbSlotInfoEXT">VkVideoEncodeH264DpbSlotInfoEXT</a> structures providing information
for each reference List0 entry.
The entries provided <strong class="purple">must</strong> be ordered after all reference List0
modification operations are applied (i.e. final list order).
The entires provided <strong class="purple">must</strong> not reflect decoded picture marking
operations in this frame that are applicable to references; the impact
of such operations <strong class="purple">must</strong> be reflected in future frame encode cmds.
The slot index in each entry <strong class="purple">must</strong> match one of the slot indexes
provided in <code>pReferenceSlots</code> of the <a href="chap39.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>
structure to which this structure is chained.</p>
</li>
<li>
<p><code>refDefaultFinalList1EntryCount</code> is the default number of reference
List1 entries for all slices of this frame.
Each slice <strong class="purple">may</strong> override this by providing its own List1 entries.</p>
</li>
<li>
<p><code>pRefDefaultFinalList1Entries</code> is a pointer to an array of
<a href="chap39.html#VkVideoEncodeH264DpbSlotInfoEXT">VkVideoEncodeH264DpbSlotInfoEXT</a> structures providing information
related to each reference List1 entry.
The entries provided <strong class="purple">must</strong> be ordered after all reference List1
modification operations are applied (i.e. final list order).
The entires provided <strong class="purple">must</strong> not reflect decoded picture marking
operations in this frame that are applicable to references; the impact
of such operations <strong class="purple">must</strong> be reflected in future frame encode cmds.
The slot index in each entry <strong class="purple">must</strong> match one of the slot indexes
provided in <code>pReferenceSlots</code> of the <a href="chap39.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>
structure to which this structure is chained.</p>
</li>
<li>
<p><code>naluSliceEntryCount</code> is the number of NALUs in this frame.</p>
</li>
<li>
<p><code>pNaluSliceEntries</code> is a pointer to an array of <code>naluCount</code>
<a href="chap39.html#VkVideoEncodeH264NaluSliceEXT">VkVideoEncodeH264NaluSliceEXT</a> structures that make up the frame.
This is an ordered sequence; the NALUs are generated consecutively in
the bitstream buffer (provided in <code>bitstreamBuffer</code> in
<a href="chap39.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>) in the same order as in this array.</p>
</li>
<li>
<p><code>pCurrentPictureInfo</code> is a pointer to a
<a href="chap39.html#VkVideoEncodeH264DpbSlotInfoEXT">VkVideoEncodeH264DpbSlotInfoEXT</a> structure specifying information
for the reconstructed picture for this frame.
Info provided <strong class="purple">must</strong> reflect decoded picture marking operations in this
frame that are applicable to this frame.
The slot index in pCurrentPictureInfo <strong class="purple">must</strong> match the slot index
provided in <code>pSetupReferenceSlot</code> of <a href="chap39.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a>
structure to which this structure is chained to.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264VclFrameInfoEXT-sType-sType" href="chap39.html#VUID-VkVideoEncodeH264VclFrameInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264VclFrameInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_VCL_FRAME_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264VclFrameInfoEXT-pRefDefaultFinalList0Entries-parameter" href="chap39.html#VUID-VkVideoEncodeH264VclFrameInfoEXT-pRefDefaultFinalList0Entries-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264VclFrameInfoEXT-pRefDefaultFinalList0Entries-parameter</span><br>
 <code>pRefDefaultFinalList0Entries</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>refDefaultFinalList0EntryCount</code> valid <a href="chap39.html#VkVideoEncodeH264DpbSlotInfoEXT">VkVideoEncodeH264DpbSlotInfoEXT</a> structures</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264VclFrameInfoEXT-pRefDefaultFinalList1Entries-parameter" href="chap39.html#VUID-VkVideoEncodeH264VclFrameInfoEXT-pRefDefaultFinalList1Entries-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264VclFrameInfoEXT-pRefDefaultFinalList1Entries-parameter</span><br>
 <code>pRefDefaultFinalList1Entries</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>refDefaultFinalList1EntryCount</code> valid <a href="chap39.html#VkVideoEncodeH264DpbSlotInfoEXT">VkVideoEncodeH264DpbSlotInfoEXT</a> structures</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264VclFrameInfoEXT-pNaluSliceEntries-parameter" href="chap39.html#VUID-VkVideoEncodeH264VclFrameInfoEXT-pNaluSliceEntries-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264VclFrameInfoEXT-pNaluSliceEntries-parameter</span><br>
 <code>pNaluSliceEntries</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>naluSliceEntryCount</code> valid <a href="chap39.html#VkVideoEncodeH264NaluSliceEXT">VkVideoEncodeH264NaluSliceEXT</a> structures</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264VclFrameInfoEXT-pCurrentPictureInfo-parameter" href="chap39.html#VUID-VkVideoEncodeH264VclFrameInfoEXT-pCurrentPictureInfo-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264VclFrameInfoEXT-pCurrentPictureInfo-parameter</span><br>
 <code>pCurrentPictureInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap39.html#VkVideoEncodeH264DpbSlotInfoEXT">VkVideoEncodeH264DpbSlotInfoEXT</a> structure</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264VclFrameInfoEXT-refDefaultFinalList0EntryCount-arraylength" href="chap39.html#VUID-VkVideoEncodeH264VclFrameInfoEXT-refDefaultFinalList0EntryCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH264VclFrameInfoEXT-refDefaultFinalList0EntryCount-arraylength</span><br>
 <code>refDefaultFinalList0EntryCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264VclFrameInfoEXT-refDefaultFinalList1EntryCount-arraylength" href="chap39.html#VUID-VkVideoEncodeH264VclFrameInfoEXT-refDefaultFinalList1EntryCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH264VclFrameInfoEXT-refDefaultFinalList1EntryCount-arraylength</span><br>
 <code>refDefaultFinalList1EntryCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264VclFrameInfoEXT-naluSliceEntryCount-arraylength" href="chap39.html#VUID-VkVideoEncodeH264VclFrameInfoEXT-naluSliceEntryCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH264VclFrameInfoEXT-naluSliceEntryCount-arraylength</span><br>
 <code>naluSliceEntryCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <a href="chap39.html#VkVideoEncodeH264DpbSlotInfoEXT">VkVideoEncodeH264DpbSlotInfoEXT</a> structure correlates a DPB Slot
index with codec-specific information and is defined as:</p>
</div>
<div id="VkVideoEncodeH264DpbSlotInfoEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_encode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoEncodeH264DpbSlotInfoEXT {
    VkStructureType                         sType;
    <span class="directive">const</span> <span class="directive">void</span>*                             pNext;
    int8_t                                  slotIndex;
    <span class="directive">const</span> StdVideoEncodeH264PictureInfo*    pStdPictureInfo;
} VkVideoEncodeH264DpbSlotInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>slotIndex</code> is the slot index for this picture.
<code>slotIndex</code> <strong class="purple">must</strong> match the <code>slotIndex</code> in
<code>pSetupReferenceSlot</code> of <a href="chap39.html#VkVideoEncodeInfoKHR">VkVideoEncodeInfoKHR</a> in the command
used to encode the corresponding picture.</p>
</li>
<li>
<p><code>pStdPictureInfo</code> is a pointer to a
<code>StdVideoEncodeH264PictureInfo</code> structure specifying codec standard
specific syntax/information associated with this picture from the H.264
specification.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264DpbSlotInfoEXT-sType-sType" href="chap39.html#VUID-VkVideoEncodeH264DpbSlotInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264DpbSlotInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_DPB_SLOT_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264DpbSlotInfoEXT-pNext-pNext" href="chap39.html#VUID-VkVideoEncodeH264DpbSlotInfoEXT-pNext-pNext"></a> <span class="vuid">VUID-VkVideoEncodeH264DpbSlotInfoEXT-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264DpbSlotInfoEXT-pStdPictureInfo-parameter" href="chap39.html#VUID-VkVideoEncodeH264DpbSlotInfoEXT-pStdPictureInfo-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264DpbSlotInfoEXT-pStdPictureInfo-parameter</span><br>
 <code>pStdPictureInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoEncodeH264PictureInfo</code> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The structure <a href="chap39.html#VkVideoEncodeH264NaluSliceEXT">VkVideoEncodeH264NaluSliceEXT</a> representing a slice is
defined as:</p>
</div>
<div id="VkVideoEncodeH264NaluSliceEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_encode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoEncodeH264NaluSliceEXT {
    VkStructureType                           sType;
    <span class="directive">const</span> <span class="directive">void</span>*                               pNext;
    <span class="directive">const</span> StdVideoEncodeH264SliceHeader*      pSliceHeaderStd;
    uint32_t                                  mbCount;
    uint8_t                                   refFinalList0EntryCount;
    <span class="directive">const</span> VkVideoEncodeH264DpbSlotInfoEXT*    pRefFinalList0Entries;
    uint8_t                                   refFinalList1EntryCount;
    <span class="directive">const</span> VkVideoEncodeH264DpbSlotInfoEXT*    pRefFinalList1Entries;
    uint32_t                                  precedingNaluBytes;
    uint8_t                                   minQp;
    uint8_t                                   maxQp;
} VkVideoEncodeH264NaluSliceEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pSliceHeaderStd</code> is a pointer to a
<code>StdVideoEncodeH264SliceHeader</code> specifying the standard slice header
from the H.264 specification.</p>
</li>
<li>
<p><code>mbCount</code> is the number of macroblocks in this slice.</p>
</li>
<li>
<p><code>refFinalList0EntryCount</code> is the number of active references in
List0.
If zero, the default frame List0 provided in the enclosing
<a href="chap39.html#VkVideoEncodeH264VclFrameInfoEXT">VkVideoEncodeH264VclFrameInfoEXT</a> is used.
If non-zero, it overrides the default frame List0 for this slice.</p>
</li>
<li>
<p><code>pRefFinalList0Entries</code> is a pointer to a
<a href="chap39.html#VkVideoEncodeH264DpbSlotInfoEXT">VkVideoEncodeH264DpbSlotInfoEXT</a> specifying DPB information for the
active List0 references.
The same restrictions related to order of entries and decoded picture
marking operations described for List0 in
<a href="chap39.html#VkVideoEncodeH264VclFrameInfoEXT">VkVideoEncodeH264VclFrameInfoEXT</a> apply here.</p>
</li>
<li>
<p><code>refFinalList1EntryCount</code> is the number of active references in
List1.
If zero, the default frame List1 provided in the enclosing
<a href="chap39.html#VkVideoEncodeH264VclFrameInfoEXT">VkVideoEncodeH264VclFrameInfoEXT</a> is used.
If non-zero, it overrides the default frame List1 for this slice.</p>
</li>
<li>
<p><code>pRefFinalList1Entries</code> is a pointer to a
<a href="chap39.html#VkVideoEncodeH264DpbSlotInfoEXT">VkVideoEncodeH264DpbSlotInfoEXT</a> structure specifying DPB
information for the active List1 references.
The same restrictions related to order of entries and decoded picture
marking operations described for List1 in
<a href="chap39.html#VkVideoEncodeH264VclFrameInfoEXT">VkVideoEncodeH264VclFrameInfoEXT</a> apply here.</p>
</li>
<li>
<p><code>precedingNaluBytes</code> specifies the number of bytes consumed by
non-VCL NALUs inserted before this slice (not through this API).</p>
</li>
<li>
<p><code>minQp</code> is the minimum quantization parameter when rate control is
enabled.</p>
</li>
<li>
<p><code>maxQp</code> is the maximum quantization parameter when rate control is
enabled.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When rate control is disabled, <code>minQp</code> and <code>maxQp</code> <strong class="purple">must</strong> be set to
the same QP value.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264NaluSliceEXT-sType-sType" href="chap39.html#VUID-VkVideoEncodeH264NaluSliceEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264NaluSliceEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_NALU_SLICE_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264NaluSliceEXT-pNext-pNext" href="chap39.html#VUID-VkVideoEncodeH264NaluSliceEXT-pNext-pNext"></a> <span class="vuid">VUID-VkVideoEncodeH264NaluSliceEXT-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264NaluSliceEXT-pSliceHeaderStd-parameter" href="chap39.html#VUID-VkVideoEncodeH264NaluSliceEXT-pSliceHeaderStd-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264NaluSliceEXT-pSliceHeaderStd-parameter</span><br>
 <code>pSliceHeaderStd</code> <strong class="purple">must</strong> be a valid pointer to a valid <code>StdVideoEncodeH264SliceHeader</code> value</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264NaluSliceEXT-pRefFinalList0Entries-parameter" href="chap39.html#VUID-VkVideoEncodeH264NaluSliceEXT-pRefFinalList0Entries-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264NaluSliceEXT-pRefFinalList0Entries-parameter</span><br>
 <code>pRefFinalList0Entries</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>refFinalList0EntryCount</code> valid <a href="chap39.html#VkVideoEncodeH264DpbSlotInfoEXT">VkVideoEncodeH264DpbSlotInfoEXT</a> structures</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264NaluSliceEXT-pRefFinalList1Entries-parameter" href="chap39.html#VUID-VkVideoEncodeH264NaluSliceEXT-pRefFinalList1Entries-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264NaluSliceEXT-pRefFinalList1Entries-parameter</span><br>
 <code>pRefFinalList1Entries</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>refFinalList1EntryCount</code> valid <a href="chap39.html#VkVideoEncodeH264DpbSlotInfoEXT">VkVideoEncodeH264DpbSlotInfoEXT</a> structures</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264NaluSliceEXT-refFinalList0EntryCount-arraylength" href="chap39.html#VUID-VkVideoEncodeH264NaluSliceEXT-refFinalList0EntryCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH264NaluSliceEXT-refFinalList0EntryCount-arraylength</span><br>
 <code>refFinalList0EntryCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264NaluSliceEXT-refFinalList1EntryCount-arraylength" href="chap39.html#VUID-VkVideoEncodeH264NaluSliceEXT-refFinalList1EntryCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH264NaluSliceEXT-refFinalList1EntryCount-arraylength</span><br>
 <code>refFinalList1EntryCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The structure <a href="chap39.html#VkVideoEncodeH264EmitPictureParametersEXT">VkVideoEncodeH264EmitPictureParametersEXT</a> is defined as:</p>
</div>
<div id="VkVideoEncodeH264EmitPictureParametersEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_video_encode_h264</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkVideoEncodeH264EmitPictureParametersEXT {
    VkStructureType    sType;
    <span class="directive">const</span> <span class="directive">void</span>*        pNext;
    uint8_t            spsId;
    VkBool32           emitSpsEnable;
    uint32_t           ppsIdEntryCount;
    <span class="directive">const</span> uint8_t*     ppsIdEntries;
} VkVideoEncodeH264EmitPictureParametersEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>spsId</code> is the H.264 SPS ID for the H.264 SPS to insert in the
bitstream.
The SPS ID <strong class="purple">must</strong> match the SPS provided in <code>spsStd</code> of
<a href="chap39.html#VkVideoEncodeH264SessionParametersCreateInfoEXT">VkVideoEncodeH264SessionParametersCreateInfoEXT</a>.
This is retrieved from the <a href="chap39.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object
provided in <a href="chap39.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>.</p>
</li>
<li>
<p><code>emitSpsEnable</code> enables the emitting of the SPS structure with id of
<code>spsId</code>.</p>
</li>
<li>
<p><code>ppsIdEntryCount</code> is the number of entries in the
<code>ppsIdEntries</code>.
If this parameter is "0" then no pps entries are going to be emitted in
the bitstream.</p>
</li>
<li>
<p><code>ppsIdEntries</code> is a pointer to an array of H.264 PPS IDs for the
H.264 PPS to insert in the bitstream.
The PPS IDs <strong class="purple">must</strong> match one of the IDs of the PPS(s) provided in
<code>pPpsStd</code> of <a href="chap39.html#VkVideoEncodeH264SessionParametersCreateInfoEXT">VkVideoEncodeH264SessionParametersCreateInfoEXT</a>
to identify the PPS parameter set to insert in the bitstream.
This is retrieved from the <a href="chap39.html#VkVideoSessionParametersKHR">VkVideoSessionParametersKHR</a> object
provided in <a href="chap39.html#VkVideoBeginCodingInfoKHR">VkVideoBeginCodingInfoKHR</a>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkVideoEncodeH264EmitPictureParametersEXT-sType-sType" href="chap39.html#VUID-VkVideoEncodeH264EmitPictureParametersEXT-sType-sType"></a> <span class="vuid">VUID-VkVideoEncodeH264EmitPictureParametersEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_VIDEO_ENCODE_H264_EMIT_PICTURE_PARAMETERS_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264EmitPictureParametersEXT-ppsIdEntries-parameter" href="chap39.html#VUID-VkVideoEncodeH264EmitPictureParametersEXT-ppsIdEntries-parameter"></a> <span class="vuid">VUID-VkVideoEncodeH264EmitPictureParametersEXT-ppsIdEntries-parameter</span><br>
 <code>ppsIdEntries</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>ppsIdEntryCount</code> <code>uint8_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkVideoEncodeH264EmitPictureParametersEXT-ppsIdEntryCount-arraylength" href="chap39.html#VUID-VkVideoEncodeH264EmitPictureParametersEXT-ppsIdEntryCount-arraylength"></a> <span class="vuid">VUID-VkVideoEncodeH264EmitPictureParametersEXT-ppsIdEntryCount-arraylength</span><br>
 <code>ppsIdEntryCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div></div>

<nav>
  <a rel="prev" href="chap38.html" class="nav nav-prev" title="Previous page" aria-label="Previous page" aria-keyshortcuts="Left">
        <i class="fa fa-angle-left"></i>
     </a>
  <a rel="next" href="chap40.html" class="nav nav-next" title="Next page" aria-label="Next page" aria-keyshortcuts="Right">
        <i class="fa fa-angle-right"></i>
     </a>
  <div style="clear: both"></div>
</nav>
<div id="footer" style="max-width: 100%;">
<div id="footer-text">
Version 1.1.187<br>
Last updated 2021-07-27 05:57:55 -0700
</div>
</div>



</body>
  <script>
  function isInViewport(ele) {
    const rect = ele.getBoundingClientRect();
    return (
        rect.top >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight)
    );
  }
  function yPosition (ele) {
    const rect = ele.getBoundingClientRect();
    return (rect.top - 20); // 20px above
  }
  let curr = document.getElementsByClassName('current');
  if (!isInViewport(curr[curr.length - 1])) {
    document.getElementById('toc').scrollTo({
      top: yPosition(curr[0]),
      left: 0,
      behavior: 'smooth'
    });
  }

  /* For page navigation */
  function gotoPage(selector) {
    const button = document.querySelector(selector);
    if (button)
      window.location.href = button.href;
  }
  document.addEventListener('keydown', e => {
    switch (e.key) {
      case 'ArrowRight':
        e.preventDefault();
        gotoPage('.nav-next');
        break;
      case 'ArrowLeft':
        e.preventDefault();
        gotoPage('.nav-prev');
        break;
    }
  });
  </script>
  </html>