<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="The Khronos® Vulkan Working Group">
<title>Vulkan® 1.0.139 - A Specification (with KHR extensions)</title>
<style>
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: #fff; color: #222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

object, svg { display: inline-block; vertical-align: middle; }

.center { margin-left: auto; margin-right: auto; }

.spread { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.4; color: black; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #0068b0; text-decoration: none; line-height: inherit; }
a:hover, a:focus { color: #333; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: Noto, sans-serif; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 0.75em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Noto, sans-serif; font-weight: normal; font-style: normal; color: black; text-rendering: optimizeLegibility; margin-top: 0.5em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #4d4d4d; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #ddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; color: #264357; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 0.75em; list-style-position: outside; font-family: Noto, sans-serif; }

ul, ol { margin-left: 1.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3em; font-weight: bold; }
dl dd { margin-bottom: 0.75em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: black; border-bottom: 1px dotted #ddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 0.75em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #ddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #5e93b8; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #5e93b8; }

blockquote, blockquote p { line-height: 1.6; color: #333; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #ddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Tables */
table { background: #fff; margin-bottom: 1.25em; border: solid 1px #d8d8ce; }
table thead, table tfoot { background: #eee; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #6d6e71; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f8f8f8; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.4; }

body { -moz-osx-font-smoothing: grayscale; -webkit-font-smoothing: antialiased; tab-size: 4; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }

a:hover, a:focus { text-decoration: underline; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: inherit; font-style: normal !important; letter-spacing: 0; padding: 0; background-color: transparent; -webkit-border-radius: 0; border-radius: 0; line-height: inherit; word-wrap: break-word; }
*:not(pre) > code.nobreak { word-wrap: normal; }
*:not(pre) > code.nowrap { white-space: nowrap; }

pre, pre > code { line-height: 1.6; color: #264357; font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; }

em em { font-style: normal; }

strong strong { font-weight: normal; }

.keyseq { color: #333333; }

kbd { font-family: Consolas, "Liberation Mono", Courier, monospace; display: inline-block; color: black; font-size: 0.65em; line-height: 1.45; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -moz-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: 0 0.15em; padding: 0.2em 0.5em; vertical-align: middle; position: relative; top: -0.1em; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menuref { color: #000; }

.menuseq b:not(.caret), .menuref { font-weight: inherit; }

.menuseq { word-spacing: -0.02em; }
.menuseq b.caret { font-size: 1.25em; line-height: 0.8; }
.menuseq i.caret { font-weight: bold; text-align: center; width: 0.45em; }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 1.5em; padding-right: 1.5em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: black; margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #ddd; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #ddd; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #ddd; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: #5e93b8; display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: #333; }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: #333; }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: black; border-bottom: 1px solid #ddd; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#toc { border-bottom: 0 solid #ddd; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: Noto, sans-serif; list-style-type: none; }
#toc li { line-height: 1.3334; margin-top: 0.3334em; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: black; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background-color: #fff; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #ddd; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; margin-bottom: 0.8rem; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #ddd; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: #fff; -webkit-border-radius: 0; border-radius: 0; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background-color: none; padding: 1.25em; }

#footer-text { color: black; line-height: 1.44; }

#content { margin-bottom: 0.625em; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { #content { margin-bottom: 1.25em; }
  .sect1 { padding-bottom: 1.25em; } }
.sect1:last-child { padding-bottom: 0; }

.sect1 + .sect1 { border-top: 0 solid #ddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: black; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: black; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; }

table.tableblock > caption.title { white-space: nowrap; overflow: visible; max-width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: black; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: initial; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: Noto, sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #ddd; color: #5e93b8; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: #fff; -webkit-border-radius: 0; border-radius: 0; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: #fff; -webkit-border-radius: 0; border-radius: 0; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: black; margin-top: 0; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint { background: #eee; }
.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint { background: #f2f1f1; }

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { border: 1px hidden #666; -webkit-border-radius: 0; border-radius: 0; word-wrap: break-word; padding: 1.25em 1.5625em 1.125em 1.5625em; font-size: 0.8125em; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 1em; } }

.literalblock.output pre { color: #eee; background-color: #264357; }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 1.25em 1.5625em 1.125em 1.5625em; -webkit-border-radius: 0; border-radius: 0; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: #999; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

table.pyhltable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; line-height: 1.6; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

pre.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #ddd; }

pre.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background: none !important; padding-right: 0 !important; }

.quoteblock { margin: 0 1em 0.75em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock blockquote p { color: #333; font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: black; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.5em; margin-right: 0.5ex; text-align: right; }
.quoteblock .quoteblock { margin-left: 0; margin-right: 0; padding: 0.5em 0; border-left: 3px solid #5e93b8; }
.quoteblock .quoteblock blockquote { padding: 0 0 0 0.75em; }
.quoteblock .quoteblock blockquote:before { display: none; }

.verseblock { margin: 0 1em 0.75em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: #333; font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.8125em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.025em; color: #5e93b8; }

.quoteblock.abstract { margin: 0 0 0.75em 0; display: block; }
.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p { text-align: left; word-spacing: 0; }
.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before { display: none; }

table.tableblock { max-width: 100%; border-collapse: separate; }
table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #d8d8ce; }

table.grid-all > thead > tr > .tableblock, table.grid-all > tbody > tr > .tableblock { border-width: 0 1px 1px 0; }

table.grid-all > tfoot > tr > .tableblock { border-width: 1px 1px 0 0; }

table.grid-cols > * > tr > .tableblock { border-width: 0 1px 0 0; }

table.grid-rows > thead > tr > .tableblock, table.grid-rows > tbody > tr > .tableblock { border-width: 0 0 1px 0; }

table.grid-rows > tfoot > tr > .tableblock { border-width: 1px 0 0 0; }

table.grid-all > * > tr > .tableblock:last-child, table.grid-cols > * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-all > tbody > tr:last-child > .tableblock, table.grid-all > thead:last-child > tr > .tableblock, table.grid-rows > tbody > tr:last-child > .tableblock, table.grid-rows > thead:last-child > tr > .tableblock { border-bottom-width: 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot { border-width: 1px 0; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.4; background: #eee; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: #222; font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.375em; }

ul.checklist, ul.none, ol.none, ul.no-bullet, ol.no-bullet, ol.unnumbered, ul.unstyled, ol.unstyled { list-style-type: none; }

ul.no-bullet, ol.no-bullet, ol.unnumbered { margin-left: 0.625em; }

ul.unstyled, ol.unstyled { margin-left: 0; }

ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child { width: 1.25em; font-size: 0.8em; position: relative; bottom: 0.125em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.inline { display: -ms-flexbox; display: -webkit-box; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; list-style: none; margin: 0 0 0.375em -0.75em; }

ul.inline > li { margin-left: 0.75em; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1, td.hdlist2 { vertical-align: top; padding: 0 0.625em; }

td.hdlist1 { font-weight: bold; padding-bottom: 0.75em; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0.4em 0.75em 0 0.75em; line-height: 1; vertical-align: top; }
.colist > table tr > td:first-of-type img { max-width: initial; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px #fff; -webkit-box-shadow: 0 0 0 1px #ddd; box-shadow: 0 0 0 1px #ddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; display: inline-block; }
a.image object { pointer-events: none; }

sup.footnote, sup.footnoteref { font-size: 0.875em; position: static; vertical-align: super; }
sup.footnote a, sup.footnoteref a { text-decoration: none; }
sup.footnote a:active, sup.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -0.25em 0 0.75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em 0 0.225em; line-height: 1.3334; font-size: 0.875em; margin-left: 1.2em; margin-bottom: 0.2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; margin-left: -1.05em; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }
a span.icon > .fa { cursor: inherit; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #29475c; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: black; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { border-bottom: 1px solid #ddd; }

.sect1 { padding-bottom: 0; }

#toctitle { color: #00406F; font-weight: normal; margin-top: 1.5em; }

.sidebarblock { border-color: #aaa; }

code { -webkit-border-radius: 4px; border-radius: 4px; }

p.tableblock.header { color: #6d6e71; }

.literalblock pre, .listingblock pre { background: #eee; }

/* From https://github.com/KhronosGroup/Vulkan-Docs/pull/901 */
a code { color: inherit; }

/* Make VUID anchor handles*/
li > p > a[id^="VUID-"] { visibility: hidden; position: absolute; z-index: 1001; width: 2.2ex; margin-left: -2.2ex; display: block; text-decoration: none !important; text-align: center; font-weight: normal; }
li > p > a[id^="VUID-"]:before { content: "\00A7"; font-size: 1em; display: block; padding-top: 0em; background: #fff }
li > p:hover > a[id^="VUID-"], li > p > a[id^="VUID-"]:hover { visibility: visible; }
li > p > a[id^="VUID-"].link { color: black; text-decoration: none; } /* TODO: not quite sure what these two do */
li > p > a[id^="VUID-"].link:hover { color: black; }

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<!-- dragged in by font-awesome css included by asciidoctor, but preloaded in this extension for convenience -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0" as="font" type="font/woff2" crossorigin="">

<!-- Note: Chrome needs crossorigin even for same-origin fonts -->
<link rel="preload" href="../katex/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Typewriter-Regular.woff2" as="font" type="font/woff2" crossorigin=""><link rel="stylesheet" href="../katex/katex.min.css">
<style>
    #loading_msg {
        width: 100%;
        margin-left: auto;
        margin-right: auto;
        margin-top: 1ex;
        margin-bottom: 1ex;
        max-width: 62.5em;
        position: relative;
        padding-left: 1.5em;
        padding-right: 1.5em;
    }
    .loadable {display: none !important;}
</style>
<script>
    function unhideLoadableContent(){
        document.getElementById("loading_msg").style.display = "none";
        var loadables = document.getElementsByClassName("loadable");
        for( var i = 0; i < loadables.length; ++i ) loadables[i].classList.remove("loadable");
    }

    window.addEventListener("load", unhideLoadableContent);
</script>
</head>
<body class="book toc2 toc-left" style="max-width: 100%;">
<div id="header">
<h1>Vulkan<sup>®</sup> 1.0.139 - A Specification (with KHR extensions)</h1>
<div class="details">
<span id="author" class="author">The Khronos<sup>®</sup> Vulkan Working Group</span><br>
<span id="revnumber">version 1.0.139,</span>
<span id="revdate">2020-04-26 21:56:44Z</span>
<br><span id="revremark">from git branch: github-master commit: 5789d98a3fb3e02beb2f92aab5dd4b87d648cfc2</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="chap1.html#introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="chap1.html#introduction-conventions">1.1. Document Conventions</a></li>
</ul>
</li>
<li><a href="chap2.html#fundamentals">2. Fundamentals</a>
<ul class="sectlevel2">
<li><a href="chap2.html#fundamentals-host-environment">2.1. Host and Device Environment</a></li>
<li><a href="chap2.html#fundamentals-execmodel">2.2. Execution Model</a></li>
<li><a href="chap2.html#fundamentals-objectmodel-overview">2.3. Object Model</a></li>
<li><a href="chap2.html#fundamentals-abi">2.4. Application Binary Interface</a></li>
<li><a href="chap2.html#fundamentals-commandsyntax">2.5. Command Syntax and Duration</a></li>
<li><a href="chap2.html#fundamentals-threadingbehavior">2.6. Threading Behavior</a></li>
<li><a href="chap2.html#fundamentals-errors">2.7. Errors</a></li>
<li><a href="chap2.html#fundamentals-numerics">2.8. Numeric Representation and Computation</a></li>
<li><a href="chap2.html#fundamentals-fixedconv">2.9. Fixed-Point Data Conversions</a></li>
<li><a href="chap2.html#fundamentals-common-objects">2.10. Common Object Types</a></li>
</ul>
</li>
<li><a href="chap3.html#initialization">3. Initialization</a>
<ul class="sectlevel2">
<li><a href="chap3.html#initialization-functionpointers">3.1. Command Function Pointers</a></li>
<li><a href="chap3.html#initialization-instances">3.2. Instances</a></li>
</ul>
</li>
<li><a href="chap4.html#devsandqueues">4. Devices and Queues</a>
<ul class="sectlevel2">
<li><a href="chap4.html#devsandqueues-physical-device-enumeration">4.1. Physical Devices</a></li>
<li><a href="chap4.html#devsandqueues-devices">4.2. Devices</a></li>
<li><a href="chap4.html#devsandqueues-queues">4.3. Queues</a></li>
</ul>
</li>
<link href="chunked.css?4" rel="stylesheet">
<script>var searchindexurl = 'search.index.js?4' + (document.title.replace(/[^0-9.]/g, ''));</script>
<script src="chunked.js?4"></script>
<li><a href="chap5.html#commandbuffers">5. Command Buffers</a>
<ul class="sectlevel2">
<li><a href="chap5.html#commandbuffers-lifecycle">5.1. Command Buffer Lifecycle</a></li>
<li><a href="chap5.html#commandbuffers-pools">5.2. Command Pools</a></li>
<li><a href="chap5.html#commandbuffer-allocation">5.3. Command Buffer Allocation and Management</a></li>
<li><a href="chap5.html#commandbuffers-recording">5.4. Command Buffer Recording</a></li>
<li><a href="chap5.html#commandbuffers-submission">5.5. Command Buffer Submission</a></li>
<li><a href="chap5.html#commandbuffers-submission-progress">5.6. Queue Forward Progress</a></li>
<li><a href="chap5.html#commandbuffers-secondary">5.7. Secondary Command Buffer Execution</a></li>
<li><a href="chap5.html#commandbuffers-devicemask">5.8. Command Buffer Device Mask</a></li>
</ul>
</li>
<li><a href="chap6.html#synchronization">6. Synchronization and Cache Control</a>
<ul class="sectlevel2">
<li><a href="chap6.html#synchronization-dependencies">6.1. Execution and Memory Dependencies</a></li>
<li><a href="chap6.html#synchronization-implicit">6.2. Implicit Synchronization Guarantees</a></li>
<li><a href="chap6.html#synchronization-fences">6.3. Fences</a></li>
<li><a href="chap6.html#synchronization-semaphores">6.4. Semaphores</a></li>
<li><a href="chap6.html#synchronization-events">6.5. Events</a></li>
<li><a href="chap6.html#synchronization-pipeline-barriers">6.6. Pipeline Barriers</a></li>
<li><a href="chap6.html#synchronization-memory-barriers">6.7. Memory Barriers</a></li>
<li><a href="chap6.html#synchronization-wait-idle">6.8. Wait Idle Operations</a></li>
<li><a href="chap6.html#synchronization-submission-host-writes">6.9. Host Write Ordering Guarantees</a></li>
<li><a href="chap6.html#synchronization-device-group">6.10. Synchronization and Multiple Physical Devices</a></li>
</ul>
</li>
<li><a href="chap7.html#renderpass">7. Render Pass</a>
<ul class="sectlevel2">
<li><a href="chap7.html#renderpass-creation">7.1. Render Pass Creation</a></li>
<li><a href="chap7.html#renderpass-compatibility">7.2. Render Pass Compatibility</a></li>
<ul class="sectlevel1"><li><a href="index.html#preamble">0. Preamble</a></li></ul>
<li><a href="chap7.html#_framebuffers">7.3. Framebuffers</a></li>
<li><a href="chap7.html#renderpass-commands">7.4. Render Pass Commands</a></li>
</ul>
</li>
<li><a href="chap8.html#shaders">8. Shaders</a>
<ul class="sectlevel2">
<li><a href="chap8.html#shader-modules">8.1. Shader Modules</a></li>
<li><a href="chap8.html#shaders-execution">8.2. Shader Execution</a></li>
<li><a href="chap8.html#shaders-execution-memory-ordering">8.3. Shader Memory Access Ordering</a></li>
<li><a href="chap8.html#shaders-inputs">8.4. Shader Inputs and Outputs</a></li>
<li><a href="chap8.html#shaders-vertex">8.5. Vertex Shaders</a></li>
<li><a href="chap8.html#shaders-tessellation-control">8.6. Tessellation Control Shaders</a></li>
<li><a href="chap8.html#shaders-tessellation-evaluation">8.7. Tessellation Evaluation Shaders</a></li>
<li><a href="chap8.html#shaders-geometry">8.8. Geometry Shaders</a></li>
<li><a href="chap8.html#shaders-fragment">8.9. Fragment Shaders</a></li>
<li><a href="chap8.html#shaders-compute">8.10. Compute Shaders</a></li>
<li><a href="chap8.html#shaders-interpolation-decorations">8.11. Interpolation Decorations</a></li>
<li><a href="chap8.html#shaders-ray-generation">8.12. Ray Generation Shaders</a></li>
<li><a href="chap8.html#shaders-intersection">8.13. Intersection Shaders</a></li>
<li><a href="chap8.html#shaders-any-hit">8.14. Any-Hit Shaders</a></li>
<li><a href="chap8.html#shaders-closest-hit">8.15. Closest Hit Shaders</a></li>
<li><a href="chap8.html#shaders-miss">8.16. Miss Shaders</a></li>
<li><a href="chap8.html#shaders-callable">8.17. Callable Shaders</a></li>
<li><a href="chap8.html#shaders-staticuse">8.18. Static Use</a></li>
<li><a href="chap8.html#shaders-scope">8.19. Scope</a></li>
<li><a href="chap8.html#shaders-derivative-operations">8.20. Derivative Operations</a></li>
<li><a href="chap8.html#_helper_invocations">8.21. Helper Invocations</a></li>
</ul>
</li>
<li><a href="chap9.html#pipelines">9. Pipelines</a>
<ul class="sectlevel2">
<li><a href="chap9.html#pipelines-compute">9.1. Compute Pipelines</a></li>
<li><a href="chap9.html#pipelines-graphics">9.2. Graphics Pipelines</a></li>
<li><a href="chap9.html#pipelines-destruction">9.3. Pipeline destruction</a></li>
<li><a href="chap9.html#pipelines-multiple">9.4. Multiple Pipeline Creation</a></li>
<li><a href="chap9.html#pipelines-pipeline-derivatives">9.5. Pipeline Derivatives</a></li>
<li><a href="chap9.html#pipelines-cache">9.6. Pipeline Cache</a></li>
<li><a href="chap9.html#pipelines-specialization-constants">9.7. Specialization Constants</a></li>
<li><a href="chap9.html#pipeline-library">9.8. Pipeline Libraries</a></li>
<li><a href="chap9.html#pipelines-binding">9.9. Pipeline Binding</a></li>
<li><a href="chap9.html#pipelines-dynamic-state">9.10. Dynamic State</a></li>
<li><a href="chap9.html#pipelines-shader-information">9.11. Pipeline Shader Information</a></li>
<li><a href="chap9.html#pipelines-ray-tracing">9.12. Ray Tracing Pipeline</a></li>
</ul>
</li>
<li><a href="chap10.html#memory">10. Memory Allocation</a>
<ul class="sectlevel2">
<li><a href="chap10.html#memory-host">10.1. Host Memory</a></li>
<li><a href="chap10.html#memory-device">10.2. Device Memory</a></li>
</ul>
</li>
<li><a href="chap11.html#resources">11. Resource Creation</a>
<ul class="sectlevel2">
<li><a href="chap11.html#resources-buffers">11.1. Buffers</a></li>
<li><a href="chap11.html#resources-buffer-views">11.2. Buffer Views</a></li>
<li><a href="chap11.html#resources-images">11.3. Images</a></li>
<li><a href="chap11.html#resources-image-layouts">11.4. Image Layouts</a></li>
<li><a href="chap11.html#resources-image-views">11.5. Image Views</a></li>
<li><a href="chap11.html#resources-association">11.6. Resource Memory Association</a></li>
<li><a href="chap11.html#resources-sharing">11.7. Resource Sharing Mode</a></li>
<li><a href="chap11.html#resources-memory-aliasing">11.8. Memory Aliasing</a></li>
<li><a href="chap11.html#resources-acceleration-structures">11.9. Acceleration Structures</a></li>
</ul>
</li>
<li><a href="chap12.html#samplers">12. Samplers</a>
<ul class="sectlevel2">
<li><a href="chap12.html#samplers-YCbCr-conversion">12.1. Sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></li>
</ul>
</li>
<li><a href="chap13.html#descriptorsets">13. Resource Descriptors</a>
<ul class="sectlevel2">
<li><a href="chap13.html#descriptorsets-types">13.1. Descriptor Types</a></li>
<li><a href="chap13.html#descriptorsets-sets">13.2. Descriptor Sets</a></li>
<li><a href="chap13.html#_physical_storage_buffer_access">13.3. Physical Storage Buffer Access</a></li>
</ul>
</li>
<li><a href="chap14.html#interfaces">14. Shader Interfaces</a>
<ul class="sectlevel2">
<li><a href="chap14.html#interfaces-iointerfaces">14.1. Shader Input and Output Interfaces</a></li>
<li><a href="chap14.html#interfaces-vertexinput">14.2. Vertex Input Interface</a></li>
<li><a href="chap14.html#interfaces-fragmentoutput">14.3. Fragment Output Interface</a></li>
<li><a href="chap14.html#interfaces-inputattachment">14.4. Fragment Input Attachment Interface</a></li>
<li><a href="chap14.html#interfaces-resources">14.5. Shader Resource Interface</a></li>
<li><a href="chap14.html#interfaces-builtin-variables">14.6. Built-In Variables</a></li>
</ul>
</li>
<li><a href="chap15.html#textures">15. Image Operations</a>
<ul class="sectlevel2">
<li><a href="chap15.html#_image_operations_overview">15.1. Image Operations Overview</a></li>
<li><a href="chap15.html#_conversion_formulas">15.2. Conversion Formulas</a></li>
<li><a href="chap15.html#_texel_input_operations">15.3. Texel Input Operations</a></li>
<li><a href="chap15.html#_texel_output_operations">15.4. Texel Output Operations</a></li>
<li><a href="chap15.html#textures-normalized-operations">15.5. Normalized Texel Coordinate Operations</a></li>
<li><a href="chap15.html#_unnormalized_texel_coordinate_operations">15.6. Unnormalized Texel Coordinate Operations</a></li>
<li><a href="chap15.html#textures-integer-coordinate-operations">15.7. Integer Texel Coordinate Operations</a></li>
<li><a href="chap15.html#textures-sample-operations">15.8. Image Sample Operations</a></li>
<li><a href="chap15.html#textures-instructions">15.9. Image Operation Steps</a></li>
</ul>
</li>
<li><a href="#queries">16. Queries</a>
<ul class="sectlevel2">
<li><a href="#queries-pools">16.1. Query Pools</a></li>
<li><a href="#queries-operation">16.2. Query Operation</a></li>
<li><a href="#queries-occlusion">16.3. Occlusion Queries</a></li>
<li><a href="#queries-pipestats">16.4. Pipeline Statistics Queries</a></li>
<li><a href="#queries-timestamps">16.5. Timestamp Queries</a></li>
<li><a href="#queries-performance">16.6. Performance Queries</a></li>
</ul>
</li>
<li><a href="chap17.html#clears">17. Clear Commands</a>
<ul class="sectlevel2">
<li><a href="chap17.html#clears-outside">17.1. Clearing Images Outside A Render Pass Instance</a></li>
<li><a href="chap17.html#clears-inside">17.2. Clearing Images Inside A Render Pass Instance</a></li>
<li><a href="chap17.html#clears-values">17.3. Clear Values</a></li>
<li><a href="chap17.html#clears-filling-buffers">17.4. Filling Buffers</a></li>
<li><a href="chap17.html#clears-updating-buffers">17.5. Updating Buffers</a></li>
</ul>
</li>
<li><a href="chap18.html#copies">18. Copy Commands</a>
<ul class="sectlevel2">
<li><a href="chap18.html#_common_operation">18.1. Common Operation</a></li>
<li><a href="chap18.html#copies-buffers">18.2. Copying Data Between Buffers</a></li>
<li><a href="chap18.html#copies-images">18.3. Copying Data Between Images</a></li>
<li><a href="chap18.html#copies-buffers-images">18.4. Copying Data Between Buffers and Images</a></li>
<li><a href="chap18.html#copies-imagescaling">18.5. Image Copies with Scaling</a></li>
<li><a href="chap18.html#copies-resolve">18.6. Resolving Multisample Images</a></li>
</ul>
</li>
<li><a href="chap19.html#drawing">19. Drawing Commands</a>
<ul class="sectlevel2">
<li><a href="chap19.html#drawing-primitive-topologies">19.1. Primitive Topologies</a></li>
<li><a href="chap19.html#drawing-primitive-order">19.2. Primitive Order</a></li>
<li><a href="chap19.html#drawing-primitive-shading">19.3. Programmable Primitive Shading</a></li>
</ul>
</li>
<li><a href="chap20.html#fxvertex">20. Fixed-Function Vertex Processing</a>
<ul class="sectlevel2">
<li><a href="chap20.html#fxvertex-attrib">20.1. Vertex Attributes</a></li>
<li><a href="chap20.html#fxvertex-input">20.2. Vertex Input Description</a></li>
<li><a href="chap20.html#fxvertex-example">20.3. Example</a></li>
</ul>
</li>
<li><a href="chap21.html#tessellation">21. Tessellation</a>
<ul class="sectlevel2">
<li><a href="chap21.html#_tessellator">21.1. Tessellator</a></li>
<li><a href="chap21.html#_tessellator_patch_discard">21.2. Tessellator Patch Discard</a></li>
<li><a href="chap21.html#tessellation-tessellator-spacing">21.3. Tessellator Spacing</a></li>
<li><a href="chap21.html#tessellation-primitive-order">21.4. Tessellation Primitive Ordering</a></li>
<li><a href="chap21.html#tessellation-vertex-winding-order">21.5. Tessellator Vertex Winding Order</a></li>
<li><a href="chap21.html#tessellation-triangle-tessellation">21.6. Triangle Tessellation</a></li>
<li><a href="chap21.html#tessellation-quad-tessellation">21.7. Quad Tessellation</a></li>
<li><a href="chap21.html#tessellation-isoline-tessellation">21.8. Isoline Tessellation</a></li>
<li><a href="chap21.html#tessellation-point-mode">21.9. Tessellation Point Mode</a></li>
<li><a href="chap21.html#_tessellation_pipeline_state">21.10. Tessellation Pipeline State</a></li>
</ul>
</li>
<li><a href="chap22.html#geometry">22. Geometry Shading</a>
<ul class="sectlevel2">
<li><a href="chap22.html#geometry-input">22.1. Geometry Shader Input Primitives</a></li>
<li><a href="chap22.html#geometry-output">22.2. Geometry Shader Output Primitives</a></li>
<li><a href="chap22.html#geometry-invocations">22.3. Multiple Invocations of Geometry Shaders</a></li>
<li><a href="chap22.html#geometry-ordering">22.4. Geometry Shader Primitive Ordering</a></li>
</ul>
</li>
<li><a href="chap23.html#vertexpostproc">23. Fixed-Function Vertex Post-Processing</a>
<ul class="sectlevel2">
<li><a href="chap23.html#vertexpostproc-flatshading">23.1. Flat Shading</a></li>
<li><a href="chap23.html#vertexpostproc-clipping">23.2. Primitive Clipping</a></li>
<li><a href="chap23.html#vertexpostproc-clipping-shader-outputs">23.3. Clipping Shader Outputs</a></li>
<li><a href="chap23.html#vertexpostproc-coord-transform">23.4. Coordinate Transformations</a></li>
<li><a href="chap23.html#vertexpostproc-viewport">23.5. Controlling the Viewport</a></li>
</ul>
</li>
<li><a href="chap24.html#primsrast">24. Rasterization</a>
<ul class="sectlevel2">
<li><a href="chap24.html#primsrast-discard">24.1. Discarding Primitives Before Rasterization</a></li>
<li><a href="chap24.html#primrast-order">24.2. Rasterization Order</a></li>
<li><a href="chap24.html#primsrast-multisampling">24.3. Multisampling</a></li>
<li><a href="chap24.html#primsrast-sampleshading">24.4. Sample Shading</a></li>
<li><a href="chap24.html#primsrast-points">24.5. Points</a></li>
<li><a href="chap24.html#primsrast-lines">24.6. Line Segments</a></li>
<li><a href="chap24.html#primsrast-polygons">24.7. Polygons</a></li>
</ul>
</li>
<li><a href="chap25.html#fragops">25. Fragment Operations</a>
<ul class="sectlevel2">
<li><a href="chap25.html#fragops-early">25.1. Early Per-Fragment Tests</a></li>
<li><a href="chap25.html#fragops-scissor">25.2. Scissor Test</a></li>
<li><a href="chap25.html#fragops-samplemask">25.3. Sample Mask</a></li>
<li><a href="chap25.html#fragops-early-mode">25.4. Early Fragment Test Mode</a></li>
<li><a href="chap25.html#fragops-late">25.5. Late Per-Fragment Tests</a></li>
<li><a href="chap25.html#fragops-covg">25.6. Multisample Coverage</a></li>
<li><a href="chap25.html#fragops-ds-state">25.7. Depth and Stencil Operations</a></li>
<li><a href="chap25.html#fragops-dbt">25.8. Depth Bounds Test</a></li>
<li><a href="chap25.html#fragops-stencil">25.9. Stencil Test</a></li>
<li><a href="chap25.html#fragops-depth">25.10. Depth Test</a></li>
<li><a href="chap25.html#fragops-samplecount">25.11. Sample Counting</a></li>
<li><a href="chap25.html#fragops-coverage-reduction">25.12. Coverage Reduction</a></li>
</ul>
</li>
<li><a href="chap26.html#framebuffer">26. The Framebuffer</a>
<ul class="sectlevel2">
<li><a href="chap26.html#framebuffer-blending">26.1. Blending</a></li>
<li><a href="chap26.html#framebuffer-logicop">26.2. Logical Operations</a></li>
<li><a href="chap26.html#framebuffer-color-write-mask">26.3. Color Write Mask</a></li>
</ul>
</li>
<li><a href="chap27.html#dispatch">27. Dispatching Commands</a></li>
<li><a href="chap28.html#sparsememory">28. Sparse Resources</a>
<ul class="sectlevel2">
<li><a href="chap28.html#sparsememory-sparseresourcefeatures">28.1. Sparse Resource Features</a></li>
<li><a href="chap28.html#sparsememory-fully-resident">28.2. Sparse Buffers and Fully-Resident Images</a></li>
<li><a href="chap28.html#sparsememory-partially-resident-buffers">28.3. Sparse Partially-Resident Buffers</a></li>
<li><a href="chap28.html#sparsememory-partially-resident-images">28.4. Sparse Partially-Resident Images</a></li>
<li><a href="chap28.html#sparsememory-sparse-memory-aliasing">28.5. Sparse Memory Aliasing</a></li>
<li><a href="chap28.html#_sparse_resource_implementation_guidelines">28.6. Sparse Resource Implementation Guidelines</a></li>
<li><a href="chap28.html#sparsememory-resourceapi">28.7. Sparse Resource API</a></li>
<li><a href="chap28.html#sparsememory-examples">28.8. Examples</a></li>
</ul>
</li>
<li><a href="chap29.html#wsi">29. Window System Integration (WSI)</a>
<ul class="sectlevel2">
<li><a href="chap29.html#_wsi_platform">29.1. WSI Platform</a></li>
<li><a href="chap29.html#_wsi_surface">29.2. WSI Surface</a></li>
<li><a href="chap29.html#display">29.3. Presenting Directly to Display Devices</a></li>
<li><a href="chap29.html#_querying_for_wsi_support">29.4. Querying for WSI Support</a></li>
<li><a href="chap29.html#_surface_queries">29.5. Surface Queries</a></li>
<li><a href="chap29.html#_device_group_queries">29.6. Device Group Queries</a></li>
<li><a href="chap29.html#_wsi_swapchain">29.7. WSI Swapchain</a></li>
</ul>
</li>
<li><a href="chap30.html#deferred-host-operations">30. Deferred Host Operations</a>
<ul class="sectlevel2">
<li><a href="chap30.html#_requesting_deferral">30.1. Requesting Deferral</a></li>
<li><a href="chap30.html#_deferred_host_operations_api">30.2. Deferred Host Operations API</a></li>
</ul>
</li>
<li><a href="chap31.html#ray-traversal">31. Ray Traversal</a>
<ul class="sectlevel2">
<li><a href="chap31.html#_ray_intersection_candidate_determination">31.1. Ray Intersection Candidate Determination</a></li>
<li><a href="chap31.html#_ray_intersection_culling">31.2. Ray Intersection Culling</a></li>
<li><a href="chap31.html#_ray_intersection_confirmation">31.3. Ray Intersection Confirmation</a></li>
<li><a href="chap31.html#_ray_closest_hit_determination">31.4. Ray Closest Hit Determination</a></li>
<li><a href="chap31.html#_ray_result_determination">31.5. Ray Result Determination</a></li>
</ul>
</li>
<li><a href="chap32.html#ray-tracing">32. Ray Tracing</a>
<ul class="sectlevel2">
<li><a href="chap32.html#ray-tracing-shader-call">32.1. Shader Call Instructions</a></li>
<li><a href="chap32.html#ray-tracing-commands">32.2. Ray Tracing Commands</a></li>
<li><a href="chap32.html#shader-binding-table">32.3. Shader Binding Table</a></li>
<li><a href="chap32.html#acceleration-structure">32.4. Acceleration Structures</a></li>
<li><a href="chap32.html#host-acceleration-structure">32.5. Host Acceleration Structure Operations</a></li>
</ul>
</li>
<li><a href="chap33.html#extendingvulkan">33. Extending Vulkan</a>
<ul class="sectlevel2">
<li><a href="chap33.html#extendingvulkan-instanceanddevicefunctionality">33.1. Instance and Device Functionality</a></li>
<li><a href="chap33.html#extendingvulkan-coreversions">33.2. Core Versions</a></li>
<li><a href="chap33.html#extendingvulkan-layers">33.3. Layers</a></li>
<li><a href="chap33.html#extendingvulkan-extensions">33.4. Extensions</a></li>
<li><a href="chap33.html#extendingvulkan-extensions-extensiondependencies">33.5. Extension Dependencies</a></li>
<li><a href="chap33.html#_compatibility_guarantees_informative">33.6. Compatibility Guarantees (Informative)</a></li>
</ul>
</li>
<li><a href="chap34.html#features">34. Features</a>
<ul class="sectlevel2">
<li><a href="chap34.html#features-requirements">34.1. Feature Requirements</a></li>
</ul>
</li>
<li><a href="chap35.html#limits">35. Limits</a>
<ul class="sectlevel2">
<li><a href="chap35.html#limits-minmax">35.1. Limit Requirements</a></li>
</ul>
</li>
<li><a href="chap36.html#formats">36. Formats</a>
<ul class="sectlevel2">
<li><a href="chap36.html#formats-definition">36.1. Format Definition</a></li>
<li><a href="chap36.html#formats-properties">36.2. Format Properties</a></li>
<li><a href="chap36.html#features-required-format-support">36.3. Required Format Support</a></li>
</ul>
</li>
<li><a href="chap37.html#capabilities">37. Additional Capabilities</a>
<ul class="sectlevel2">
<li><a href="chap37.html#capabilities-image">37.1. Additional Image Capabilities</a></li>
<li><a href="chap37.html#capabilities-buffer">37.2. Additional Buffer Capabilities</a></li>
<li><a href="chap37.html#capabilities-semaphore">37.3. Optional Semaphore Capabilities</a></li>
<li><a href="chap37.html#capabilities-fence">37.4. Optional Fence Capabilities</a></li>
</ul>
</li>
<li><a href="chap38.html#_debugging">38. Debugging</a></li>
<li><a href="chap39.html#spirvenv">Appendix A: Vulkan Environment for SPIR-V</a>
<ul class="sectlevel2">
<li><a href="chap39.html#_versions_and_formats">Versions and Formats</a></li>
<li><a href="chap39.html#spirvenv-capabilities">Capabilities</a></li>
<li><a href="chap39.html#spirvenv-module-validation">Validation Rules within a Module</a></li>
<li><a href="chap39.html#spirvenv-precision-operation">Precision and Operation of SPIR-V Instructions</a></li>
<li><a href="chap39.html#spirvenv-image-formats">Compatibility Between SPIR-V Image Formats And Vulkan Formats</a></li>
</ul>
</li>
<li><a href="chap40.html#memory-model">Appendix B: Memory Model</a>
<ul class="sectlevel2">
<li><a href="chap40.html#memory-model-agent">Agent</a></li>
<li><a href="chap40.html#memory-model-memory-location">Memory Location</a></li>
<li><a href="chap40.html#memory-model-allocation">Allocation</a></li>
<li><a href="chap40.html#memory-model-memory-operation">Memory Operation</a></li>
<li><a href="chap40.html#memory-model-references">Reference</a></li>
<li><a href="chap40.html#memory-model-program-order">Program-Order</a></li>
<li><a href="chap40.html#shader-call-related">Shader Call Related</a></li>
<li><a href="chap40.html#shader-call-order">Shader Call Order</a></li>
<li><a href="chap40.html#memory-model-scope">Scope</a></li>
<li><a href="chap40.html#memory-model-atomic-operation">Atomic Operation</a></li>
<li><a href="chap40.html#memory-model-scoped-modification-order">Scoped Modification Order</a></li>
<li><a href="chap40.html#memory-model-memory-semantics">Memory Semantics</a></li>
<li><a href="chap40.html#memory-model-release-sequence">Release Sequence</a></li>
<li><a href="chap40.html#memory-model-synchronizes-with">Synchronizes-With</a></li>
<li><a href="chap40.html#memory-model-system-synchronizes-with">System-Synchronizes-With</a></li>
<li><a href="chap40.html#memory-model-non-private">Private vs. Non-Private</a></li>
<li><a href="chap40.html#memory-model-inter-thread-happens-before">Inter-Thread-Happens-Before</a></li>
<li><a href="chap40.html#memory-model-happens-before">Happens-Before</a></li>
<li><a href="chap40.html#memory-model-availability-visibility">Availability and Visibility</a></li>
<li><a href="chap40.html#memory-model-vulkan-availability-visibility">Availability, Visibility, and Domain Operations</a></li>
<li><a href="chap40.html#memory-model-availability-visibility-semantics">Availability and Visibility Semantics</a></li>
<li><a href="chap40.html#memory-model-instruction-av-vis">Per-Instruction Availability and Visibility Semantics</a></li>
<li><a href="chap40.html#memory-model-location-ordered">Location-Ordered</a></li>
<li><a href="chap40.html#memory-model-access-data-race">Data Race</a></li>
<li><a href="chap40.html#memory-model-visible-to">Visible-To</a></li>
<li><a href="chap40.html#memory-model-acyclicity">Acyclicity</a></li>
<li><a href="chap40.html#memory-model-shader-io">Shader I/O</a></li>
<li><a href="chap40.html#memory-model-deallocation">Deallocation</a></li>
<li><a href="chap40.html#memory-model-informative-descriptions">Informative Descriptions</a></li>
<li><a href="chap40.html#memory-model-tessellation-output-ordering">Tessellation Output Ordering</a></li>
</ul>
</li>
<li><a href="chap41.html#_compressed_image_formats">Appendix C: Compressed Image Formats</a>
<ul class="sectlevel2">
<li><a href="chap41.html#appendix-compressedtex-bc">Block-Compressed Image Formats</a></li>
<li><a href="chap41.html#appendix-compressedtex-etc2">ETC Compressed Image Formats</a></li>
<li><a href="chap41.html#appendix-compressedtex-astc">ASTC Compressed Image Formats</a></li>
</ul>
</li>
<li><a href="chap42.html#versions">Appendix D: Core Revisions (Informative)</a></li>
<li><a href="chap43.html#extensions">Appendix E: Layers &amp; Extensions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap43.html#extension-appendices-list">List of Extensions</a></li>
<li><a href="chap43.html#provisional-extension-appendices-list">List of Provisional Extensions</a></li>
</ul>
</li>
<li><a href="chap44.html#boilerplate">Appendix F: API Boilerplate</a>
<ul class="sectlevel2">
<li><a href="chap44.html#boilerplate-headers">Vulkan Header Files</a></li>
<li><a href="chap44.html#boilerplate-wsi-header">Window System-Specific Header Control (Informative)</a></li>
<li><a href="chap44.html#boilerplate-provisional-header">Provisional Extension Header Control (Informative)</a></li>
</ul>
</li>
<li><a href="chap45.html#invariance">Appendix G: Invariance</a>
<ul class="sectlevel2">
<li><a href="chap45.html#_repeatability">Repeatability</a></li>
<li><a href="chap45.html#_multi_pass_algorithms">Multi-pass Algorithms</a></li>
<li><a href="chap45.html#_invariance_rules">Invariance Rules</a></li>
<li><a href="chap45.html#_tessellation_invariance">Tessellation Invariance</a></li>
</ul>
</li>
<li><a href="chap46.html#glossary">Glossary</a></li>
<li><a href="chap47.html#_common_abbreviations">Common Abbreviations</a></li>
<li><a href="chap48.html#_prefixes">Prefixes</a></li>
<li><a href="chap49.html#credits">Appendix H: Credits (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap49.html#_working_group_contributors_to_vulkan">Working Group Contributors to Vulkan</a></li>
<li><a href="chap49.html#_other_credits">Other Credits</a></li>
</ul>
</li>
</ul>
</div>
<div class="searchbox"><label for="searchbox">Search: </label><input id="searchbox" type="text" disabled="disabled" value="Loading Search Data"><div id="resultsdiv"><ol id="results"></ol></div></div>
</div>

<div id="loading_msg"><p>Loading... please wait.</p></div>
<div id="content"><div class="sect1">
<h2 id="queries"><a class="anchor" href="#queries"></a>16. Queries</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Queries</em> provide a mechanism to return information about the processing of
a sequence of Vulkan commands.
Query operations are asynchronous, and as such, their results are not
returned immediately.
Instead, their results, and their availability status are stored in a
<a href="#queries-pools">Query Pool</a>.
The state of these queries <strong class="purple">can</strong> be read back on the host, or copied to a
buffer object on the device.</p>
</div>
<div class="paragraph">
<p>The supported query types are <a href="#queries-occlusion">Occlusion Queries</a>,
<a href="#queries-pipestats">Pipeline Statistics Queries</a>, and <a href="#queries-timestamps">Timestamp Queries</a>.
<a href="#queries-performance">Performance Queries</a> are also supported if the
associated extension is available.</p>
</div>
<div class="sect2">
<h3 id="queries-pools"><a class="anchor" href="#queries-pools"></a>16.1. Query Pools</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Queries are managed using <em>query pool</em> objects.
Each query pool is a collection of a specific number of queries of a
particular type.</p>
</div>
<div class="paragraph">
<p>Query pools are represented by <code>VkQueryPool</code> handles:</p>
</div>
<div id="VkQueryPool" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++">VK_DEFINE_NON_DISPATCHABLE_HANDLE(VkQueryPool)</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create a query pool, call:</p>
</div>
<div id="vkCreateQueryPool" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++">VkResult vkCreateQueryPool(
    VkDevice                                    device,
    <span class="directive">const</span> VkQueryPoolCreateInfo*                pCreateInfo,
    <span class="directive">const</span> VkAllocationCallbacks*                pAllocator,
    VkQueryPool*                                pQueryPool);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the query pool.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="#VkQueryPoolCreateInfo">VkQueryPoolCreateInfo</a>
structure containing the number and type of queries to be managed by the
pool.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap10.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pQueryPool</code> is a pointer to a <a href="#VkQueryPool">VkQueryPool</a> handle in which the
resulting query pool object is returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateQueryPool-device-parameter" href="#VUID-vkCreateQueryPool-device-parameter"></a> <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap4.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateQueryPool-pCreateInfo-parameter" href="#VUID-vkCreateQueryPool-pCreateInfo-parameter"></a> <code>pCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkQueryPoolCreateInfo">VkQueryPoolCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateQueryPool-pAllocator-parameter" href="#VUID-vkCreateQueryPool-pAllocator-parameter"></a> If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap10.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateQueryPool-pQueryPool-parameter" href="#VUID-vkCreateQueryPool-pQueryPool-parameter"></a> <code>pQueryPool</code> <strong class="purple">must</strong> be a valid pointer to a <a href="#VkQueryPool">VkQueryPool</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap2.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap2.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkQueryPoolCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkQueryPoolCreateInfo" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">struct</span> VkQueryPoolCreateInfo {
    VkStructureType                  sType;
    <span class="directive">const</span> <span class="directive">void</span>*                      pNext;
    VkQueryPoolCreateFlags           flags;
    VkQueryType                      queryType;
    uint32_t                         queryCount;
    VkQueryPipelineStatisticFlags    pipelineStatistics;
} VkQueryPoolCreateInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to an extension-specific structure.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
<li>
<p><code>queryType</code> is a <a href="#VkQueryType">VkQueryType</a> value specifying the type of
queries managed by the pool.</p>
</li>
<li>
<p><code>queryCount</code> is the number of queries managed by the pool.</p>
</li>
<li>
<p><code>pipelineStatistics</code> is a bitmask of
<a href="#VkQueryPipelineStatisticFlagBits">VkQueryPipelineStatisticFlagBits</a> specifying which counters will be
returned in queries on the new pool, as described below in
<a href="#queries-pipestats">Pipeline Statistics Queries</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>pipelineStatistics</code> is ignored if <code>queryType</code> is not
<code>VK_QUERY_TYPE_PIPELINE_STATISTICS</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkQueryPoolCreateInfo-queryType-00791" href="#VUID-VkQueryPoolCreateInfo-queryType-00791"></a>
If the <a href="chap34.html#features-pipelineStatisticsQuery">pipeline statistics queries</a>
feature is not enabled, <code>queryType</code> <strong class="purple">must</strong> not be
<code>VK_QUERY_TYPE_PIPELINE_STATISTICS</code></p>
</li>
<li>
<p><a id="VUID-VkQueryPoolCreateInfo-queryType-00792" href="#VUID-VkQueryPoolCreateInfo-queryType-00792"></a>
If <code>queryType</code> is <code>VK_QUERY_TYPE_PIPELINE_STATISTICS</code>,
<code>pipelineStatistics</code> <strong class="purple">must</strong> be a valid combination of
<a href="#VkQueryPipelineStatisticFlagBits">VkQueryPipelineStatisticFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkQueryPoolCreateInfo-queryType-03222" href="#VUID-VkQueryPoolCreateInfo-queryType-03222"></a>
If <code>queryType</code> is <code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code>, the
<code>pNext</code> chain <strong class="purple">must</strong> include a structure of type
<a href="#VkQueryPoolPerformanceCreateInfoKHR">VkQueryPoolPerformanceCreateInfoKHR</a></p>
</li>
<li>
<p><a id="VUID-VkQueryPoolCreateInfo-queryCount-02763" href="#VUID-VkQueryPoolCreateInfo-queryCount-02763"></a>
<code>queryCount</code> <strong class="purple">must</strong> be greater than 0</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkQueryPoolCreateInfo-sType-sType" href="#VUID-VkQueryPoolCreateInfo-sType-sType"></a> <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_QUERY_POOL_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkQueryPoolCreateInfo-pNext-pNext" href="#VUID-VkQueryPoolCreateInfo-pNext-pNext"></a> <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="#VkQueryPoolPerformanceCreateInfoKHR">VkQueryPoolPerformanceCreateInfoKHR</a></p>
</li>
<li>
<p><a id="VUID-VkQueryPoolCreateInfo-sType-unique" href="#VUID-VkQueryPoolCreateInfo-sType-unique"></a> The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkQueryPoolCreateInfo-flags-zerobitmask" href="#VUID-VkQueryPoolCreateInfo-flags-zerobitmask"></a> <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkQueryPoolCreateInfo-queryType-parameter" href="#VUID-VkQueryPoolCreateInfo-queryType-parameter"></a> <code>queryType</code> <strong class="purple">must</strong> be a valid <a href="#VkQueryType">VkQueryType</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkQueryPoolCreateFlags" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> VkFlags VkQueryPoolCreateFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkQueryPoolCreateFlags</code> is a bitmask type for setting a mask, but is
currently reserved for future use.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkQueryPoolPerformanceCreateInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkQueryPoolPerformanceCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">struct</span> VkQueryPoolPerformanceCreateInfoKHR {
    VkStructureType    sType;
    <span class="directive">const</span> <span class="directive">void</span>*        pNext;
    uint32_t           queueFamilyIndex;
    uint32_t           counterIndexCount;
    <span class="directive">const</span> uint32_t*    pCounterIndices;
} VkQueryPoolPerformanceCreateInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to an extension-specific structure.</p>
</li>
<li>
<p><code>queueFamilyIndex</code> is the queue family index to create this
performance query pool for.</p>
</li>
<li>
<p><code>counterIndexCount</code> is size of the <code>pCounterIndices</code> array.</p>
</li>
<li>
<p><code>pCounterIndices</code> is the array of indices into the
<a href="chap4.html#vkEnumeratePhysicalDeviceQueueFamilyPerformanceQueryCountersKHR">vkEnumeratePhysicalDeviceQueueFamilyPerformanceQueryCountersKHR</a>::<code>pCounters</code>
to enable in this performance query pool.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkQueryPoolPerformanceCreateInfoKHR-queueFamilyIndex-03236" href="#VUID-VkQueryPoolPerformanceCreateInfoKHR-queueFamilyIndex-03236"></a>
<code>queueFamilyIndex</code> <strong class="purple">must</strong> be a valid queue family index of the device</p>
</li>
<li>
<p><a id="VUID-VkQueryPoolPerformanceCreateInfoKHR-performanceCounterQueryPools-03237" href="#VUID-VkQueryPoolPerformanceCreateInfoKHR-performanceCounterQueryPools-03237"></a>
The
<a href="#features-features-performanceCounterQueryPools"><code>performanceCounterQueryPools</code></a>
feature <strong class="purple">must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-VkQueryPoolPerformanceCreateInfoKHR-pCounterIndices-03321" href="#VUID-VkQueryPoolPerformanceCreateInfoKHR-pCounterIndices-03321"></a>
Each element of <code>pCounterIndices</code> <strong class="purple">must</strong> be in the range of counters
reported by
<code>vkEnumeratePhysicalDeviceQueueFamilyPerformanceQueryCountersKHR</code>
for the queue family specified in <code>queueFamilyIndex</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkQueryPoolPerformanceCreateInfoKHR-sType-sType" href="#VUID-VkQueryPoolPerformanceCreateInfoKHR-sType-sType"></a> <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_QUERY_POOL_PERFORMANCE_CREATE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkQueryPoolPerformanceCreateInfoKHR-pCounterIndices-parameter" href="#VUID-VkQueryPoolPerformanceCreateInfoKHR-pCounterIndices-parameter"></a> <code>pCounterIndices</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>counterIndexCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkQueryPoolPerformanceCreateInfoKHR-counterIndexCount-arraylength" href="#VUID-VkQueryPoolPerformanceCreateInfoKHR-counterIndexCount-arraylength"></a> <code>counterIndexCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To query the number of passes required to query a performance query pool on
a physical device, call:</p>
</div>
<div id="vkGetPhysicalDeviceQueueFamilyPerformanceQueryPassesKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="directive">void</span> vkGetPhysicalDeviceQueueFamilyPerformanceQueryPassesKHR(
    VkPhysicalDevice                            physicalDevice,
    <span class="directive">const</span> VkQueryPoolPerformanceCreateInfoKHR*  pPerformanceQueryCreateInfo,
    uint32_t*                                   pNumPasses);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>physicalDevice</code> is the handle to the physical device whose queue
family performance query counter properties will be queried.</p>
</li>
<li>
<p><code>pPerformanceQueryCreateInfo</code> is a pointer to a
<code>VkQueryPoolPerformanceCreateInfoKHR</code> of the performance query that
is to be created.</p>
</li>
<li>
<p><code>pNumPasses</code> is a pointer to an integer related to the number of
passes required to query the performance query pool, as described below.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>pPerformanceQueryCreateInfo</code> member
<code>VkQueryPoolPerformanceCreateInfoKHR</code>::<code>queueFamilyIndex</code> <strong class="purple">must</strong> be a
queue family of <code>physicalDevice</code>.
The number of passes required to capture the counters specified in the
<code>pPerformanceQueryCreateInfo</code> member
<code>VkQueryPoolPerformanceCreateInfoKHR</code>::<code>pCounters</code> is returned in
<code>pNumPasses</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetPhysicalDeviceQueueFamilyPerformanceQueryPassesKHR-physicalDevice-parameter" href="#VUID-vkGetPhysicalDeviceQueueFamilyPerformanceQueryPassesKHR-physicalDevice-parameter"></a> <code>physicalDevice</code> <strong class="purple">must</strong> be a valid <a href="chap4.html#VkPhysicalDevice">VkPhysicalDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceQueueFamilyPerformanceQueryPassesKHR-pPerformanceQueryCreateInfo-parameter" href="#VUID-vkGetPhysicalDeviceQueueFamilyPerformanceQueryPassesKHR-pPerformanceQueryCreateInfo-parameter"></a> <code>pPerformanceQueryCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkQueryPoolPerformanceCreateInfoKHR">VkQueryPoolPerformanceCreateInfoKHR</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetPhysicalDeviceQueueFamilyPerformanceQueryPassesKHR-pNumPasses-parameter" href="#VUID-vkGetPhysicalDeviceQueueFamilyPerformanceQueryPassesKHR-pNumPasses-parameter"></a> <code>pNumPasses</code> <strong class="purple">must</strong> be a valid pointer to a <code>uint32_t</code> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy a query pool, call:</p>
</div>
<div id="vkDestroyQueryPool" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="directive">void</span> vkDestroyQueryPool(
    VkDevice                                    device,
    VkQueryPool                                 queryPool,
    <span class="directive">const</span> VkAllocationCallbacks*                pAllocator);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the query pool.</p>
</li>
<li>
<p><code>queryPool</code> is the query pool to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap10.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyQueryPool-queryPool-00793" href="#VUID-vkDestroyQueryPool-queryPool-00793"></a>
All submitted commands that refer to <code>queryPool</code> <strong class="purple">must</strong> have
completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyQueryPool-queryPool-00794" href="#VUID-vkDestroyQueryPool-queryPool-00794"></a>
If <code>VkAllocationCallbacks</code> were provided when <code>queryPool</code> was
created, a compatible set of callbacks <strong class="purple">must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyQueryPool-queryPool-00795" href="#VUID-vkDestroyQueryPool-queryPool-00795"></a>
If no <code>VkAllocationCallbacks</code> were provided when <code>queryPool</code> was
created, <code>pAllocator</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyQueryPool-device-parameter" href="#VUID-vkDestroyQueryPool-device-parameter"></a> <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap4.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyQueryPool-queryPool-parameter" href="#VUID-vkDestroyQueryPool-queryPool-parameter"></a> If <code>queryPool</code> is not <a href="chap44.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>queryPool</code> <strong class="purple">must</strong> be a valid <a href="#VkQueryPool">VkQueryPool</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyQueryPool-pAllocator-parameter" href="#VUID-vkDestroyQueryPool-pAllocator-parameter"></a> If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap10.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyQueryPool-queryPool-parent" href="#VUID-vkDestroyQueryPool-queryPool-parent"></a> If <code>queryPool</code> is a valid handle, it <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>queryPool</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of <a href="#VkQueryPoolCreateInfo">VkQueryPoolCreateInfo</a>::<code>queryType</code>, specifying
the type of queries managed by the pool, are:</p>
</div>
<div id="VkQueryType" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">enum</span> VkQueryType {
    VK_QUERY_TYPE_OCCLUSION = <span class="integer">0</span>,
    VK_QUERY_TYPE_PIPELINE_STATISTICS = <span class="integer">1</span>,
    VK_QUERY_TYPE_TIMESTAMP = <span class="integer">2</span>,
    VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR = <span class="integer">1000116000</span>,
    VK_QUERY_TYPE_ACCELERATION_STRUCTURE_COMPACTED_SIZE_KHR = <span class="integer">1000165000</span>,
    VK_QUERY_TYPE_ACCELERATION_STRUCTURE_SERIALIZATION_SIZE_KHR = <span class="integer">1000150000</span>,
    VK_QUERY_TYPE_MAX_ENUM = <span class="hex">0x7FFFFFFF</span>
} VkQueryType;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_QUERY_TYPE_OCCLUSION</code> specifies an <a href="#queries-occlusion">occlusion query</a>.</p>
</li>
<li>
<p><code>VK_QUERY_TYPE_PIPELINE_STATISTICS</code> specifies a <a href="#queries-pipestats">pipeline statistics query</a>.</p>
</li>
<li>
<p><code>VK_QUERY_TYPE_TIMESTAMP</code> specifies a <a href="#queries-timestamps">timestamp query</a>.</p>
</li>
<li>
<p><code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code> specifies a
<a href="#queries-performance">performance query</a>.</p>
</li>
<li>
<p><code>VK_QUERY_TYPE_ACCELERATION_STRUCTURE_COMPACTED_SIZE_KHR</code> specifies
a <a href="chap32.html#acceleration-structure-copying">ray tracing acceleration structure
size query</a>.</p>
</li>
<li>
<p><code>VK_QUERY_TYPE_ACCELERATION_STRUCTURE_SERIALIZATION_SIZE_KHR</code>
specifies a <a href="chap32.html#acceleration-structure-copying">ray tracing serialization
acceleration structure size query</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="queries-operation"><a class="anchor" href="#queries-operation"></a>16.2. Query Operation</h3>
<div class="paragraph">
<p>The operation of queries is controlled by the commands
<a href="#vkCmdBeginQuery">vkCmdBeginQuery</a>, <a href="#vkCmdEndQuery">vkCmdEndQuery</a>,
<a href="#vkCmdResetQueryPool">vkCmdResetQueryPool</a>, <a href="#vkCmdCopyQueryPoolResults">vkCmdCopyQueryPoolResults</a>, and
<a href="#vkCmdWriteTimestamp">vkCmdWriteTimestamp</a>.</p>
</div>
<div class="paragraph">
<p>In order for a <code>VkCommandBuffer</code> to record query management commands,
the queue family for which its <code>VkCommandPool</code> was created <strong class="purple">must</strong> support
the appropriate type of operations (graphics, compute) suitable for the
query type of a given query pool.</p>
</div>
<div class="paragraph">
<p>Each query in a query pool has a status that is either <em>unavailable</em> or
<em>available</em>, and also has state to store the numerical results of a query
operation of the type requested when the query pool was created.
Resetting a query via <a href="#vkCmdResetQueryPool">vkCmdResetQueryPool</a>
sets the status to unavailable and makes the numerical results undefined.
Performing a query operation with <a href="#vkCmdBeginQuery">vkCmdBeginQuery</a> and
<a href="#vkCmdEndQuery">vkCmdEndQuery</a> changes the status to available when the query
<a href="#queries-operation-finished">finishes</a>, and updates the numerical results.
Both the availability status and numerical results are retrieved by calling
either <a href="#vkGetQueryPoolResults">vkGetQueryPoolResults</a> or <a href="#vkCmdCopyQueryPoolResults">vkCmdCopyQueryPoolResults</a>.</p>
</div>
<div id="queries-order" class="paragraph">
<p>Query commands, for the same query and submitted to the same queue, execute
in their entirety in <a href="chap6.html#synchronization-submission-order">submission order</a>,
relative to each other.
In effect there is an implicit execution dependency from each such query
command to all query command previously submitted to the same queue.
There is one significant exception to this; if the <code>flags</code> parameter of
<a href="#vkCmdCopyQueryPoolResults">vkCmdCopyQueryPoolResults</a> does not include
<code>VK_QUERY_RESULT_WAIT_BIT</code>, execution of <a href="#vkCmdCopyQueryPoolResults">vkCmdCopyQueryPoolResults</a>
<strong class="purple">may</strong> happen-before the results of <a href="#vkCmdEndQuery">vkCmdEndQuery</a> are available.</p>
</div>
<div class="paragraph">
<p>After query pool creation, each query <strong class="purple">must</strong> be reset before it is used.
Queries <strong class="purple">must</strong> also be reset between uses.</p>
</div>
<div class="paragraph">
<p>If a logical device includes multiple physical devices, then each command
that writes a query <strong class="purple">must</strong> execute on a single physical device, and any call
to <a href="#vkCmdBeginQuery">vkCmdBeginQuery</a> <strong class="purple">must</strong> execute the corresponding <a href="#vkCmdEndQuery">vkCmdEndQuery</a>
command on the same physical device.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To reset a range of queries in a query pool on a queue, call:</p>
</div>
<div id="vkCmdResetQueryPool" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="directive">void</span> vkCmdResetQueryPool(
    VkCommandBuffer                             commandBuffer,
    VkQueryPool                                 queryPool,
    uint32_t                                    firstQuery,
    uint32_t                                    queryCount);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which this command will
be recorded.</p>
</li>
<li>
<p><code>queryPool</code> is the handle of the query pool managing the queries
being reset.</p>
</li>
<li>
<p><code>firstQuery</code> is the initial query index to reset.</p>
</li>
<li>
<p><code>queryCount</code> is the number of queries to reset.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When executed on a queue, this command sets the status of query indices
<span class="eq">[<code>firstQuery</code>, <code>firstQuery</code> +  <code>queryCount</code> - 1]</span> to
unavailable.</p>
</div>
<div class="paragraph">
<p>If the <code>queryType</code> used to create <code>queryPool</code> was
<code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code>, this command sets the status of
query indices <span class="eq">[<code>firstQuery</code>, <code>firstQuery</code> + 
<code>queryCount</code> - 1]</span> to unavailable for each pass of <code>queryPool</code>, as
indicated by a call to
<a href="#vkGetPhysicalDeviceQueueFamilyPerformanceQueryPassesKHR">vkGetPhysicalDeviceQueueFamilyPerformanceQueryPassesKHR</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Because <code>vkCmdResetQueryPool</code> resets all the passes of the indicated
queries, applications must not record a <code>vkCmdResetQueryPool</code> command
for a <code>queryPool</code> created with <code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code>
in a command buffer that needs to be submitted multiple times as indicated
by a call to <a href="#vkGetPhysicalDeviceQueueFamilyPerformanceQueryPassesKHR">vkGetPhysicalDeviceQueueFamilyPerformanceQueryPassesKHR</a>.
Otherwise applications will never be able to complete the recorded queries.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResetQueryPool-firstQuery-00796" href="#VUID-vkCmdResetQueryPool-firstQuery-00796"></a>
<code>firstQuery</code> <strong class="purple">must</strong> be less than the number of queries in
<code>queryPool</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResetQueryPool-firstQuery-00797" href="#VUID-vkCmdResetQueryPool-firstQuery-00797"></a>
The sum of <code>firstQuery</code> and <code>queryCount</code> <strong class="purple">must</strong> be less than or
equal to the number of queries in <code>queryPool</code></p>
</li>
<li>
<p><a id="VUID-vkCmdResetQueryPool-None-02841" href="#VUID-vkCmdResetQueryPool-None-02841"></a>
All queries used by the command <strong class="purple">must</strong> not be active</p>
</li>
<li>
<p><a id="VUID-vkCmdResetQueryPool-firstQuery-02862" href="#VUID-vkCmdResetQueryPool-firstQuery-02862"></a>
If <code>queryPool</code> was created with
<code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code>, this command <strong class="purple">must</strong> not be
recorded in a command buffer that, either directly or through secondary
command buffers, also contains begin commands for a query from the set
of queries <span class="eq">[<code>firstQuery</code>, <code>firstQuery</code> + 
<code>queryCount</code> - 1]</span></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdResetQueryPool-commandBuffer-parameter" href="#VUID-vkCmdResetQueryPool-commandBuffer-parameter"></a> <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdResetQueryPool-queryPool-parameter" href="#VUID-vkCmdResetQueryPool-queryPool-parameter"></a> <code>queryPool</code> <strong class="purple">must</strong> be a valid <a href="#VkQueryPool">VkQueryPool</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdResetQueryPool-commandBuffer-recording" href="#VUID-vkCmdResetQueryPool-commandBuffer-recording"></a> <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap5.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdResetQueryPool-commandBuffer-cmdpool" href="#VUID-vkCmdResetQueryPool-commandBuffer-cmdpool"></a> The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdResetQueryPool-renderpass" href="#VUID-vkCmdResetQueryPool-renderpass"></a> This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdResetQueryPool-commonparent" href="#VUID-vkCmdResetQueryPool-commonparent"></a> Both of <code>commandBuffer</code>, and <code>queryPool</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap4.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap7.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap4.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap6.html#synchronization-pipeline-stages-types">Pipeline Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Once queries are reset and ready for use, query commands <strong class="purple">can</strong> be issued to a
command buffer.
Occlusion queries and pipeline statistics queries count events - drawn
samples and pipeline stage invocations, respectively - resulting from
commands that are recorded between a <a href="#vkCmdBeginQuery">vkCmdBeginQuery</a> command and a
<a href="#vkCmdEndQuery">vkCmdEndQuery</a> command within a specified command buffer, effectively
scoping a set of drawing and/or dispatch commands.
Timestamp queries write timestamps to a query pool.
Performance queries record performance counters to a query pool.</p>
</div>
<div class="paragraph">
<p>A query <strong class="purple">must</strong> begin and end in the same command buffer, although if it is a
primary command buffer, and the <a href="chap34.html#features-inheritedQueries">inherited
queries</a> feature is enabled, it <strong class="purple">can</strong> execute secondary command buffers
during the query operation.
For a secondary command buffer to be executed while a query is active, it
<strong class="purple">must</strong> set the <code>occlusionQueryEnable</code>, <code>queryFlags</code>, and/or
<code>pipelineStatistics</code> members of <a href="chap5.html#VkCommandBufferInheritanceInfo">VkCommandBufferInheritanceInfo</a> to
conservative values, as described in the <a href="chap5.html#commandbuffers-recording">Command
Buffer Recording</a> section.
A query <strong class="purple">must</strong> either begin and end inside the same subpass of a render pass
instance, or <strong class="purple">must</strong> both begin and end outside of a render pass instance
(i.e. contain entire render pass instances).</p>
</div>
<div class="paragraph">
<p>If queries are used while executing a render pass instance that has
multiview enabled, the query uses <span class="eq">N</span> consecutive query indices in the
query pool (starting at <code>query</code>) where <span class="eq">N</span> is the number of bits set
in the view mask in the subpass the query is used in.
How the numerical results of the query are distributed among the queries is
implementation-dependent.
For example, some implementations <strong class="purple">may</strong> write each view’s results to a
distinct query, while other implementations <strong class="purple">may</strong> write the total result to
the first query and write zero to the other queries.
However, the sum of the results in all the queries <strong class="purple">must</strong> accurately reflect
the total result of the query summed over all views.
Applications <strong class="purple">can</strong> sum the results from all the queries to compute the total
result.</p>
</div>
<div class="paragraph">
<p>Queries used with multiview rendering <strong class="purple">must</strong> not span subpasses, i.e. they
<strong class="purple">must</strong> begin and end in the same subpass.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To begin a query, call:</p>
</div>
<div id="vkCmdBeginQuery" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="directive">void</span> vkCmdBeginQuery(
    VkCommandBuffer                             commandBuffer,
    VkQueryPool                                 queryPool,
    uint32_t                                    query,
    VkQueryControlFlags                         flags);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which this command will
be recorded.</p>
</li>
<li>
<p><code>queryPool</code> is the query pool that will manage the results of the
query.</p>
</li>
<li>
<p><code>query</code> is the query index within the query pool that will contain
the results.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="#VkQueryControlFlagBits">VkQueryControlFlagBits</a> specifying
constraints on the types of queries that <strong class="purple">can</strong> be performed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code>queryType</code> of the pool is <code>VK_QUERY_TYPE_OCCLUSION</code> and
<code>flags</code> contains <code>VK_QUERY_CONTROL_PRECISE_BIT</code>, an implementation
<strong class="purple">must</strong> return a result that matches the actual number of samples passed.
This is described in more detail in <a href="#queries-occlusion">Occlusion Queries</a>.</p>
</div>
<div id="queries-operation-active" class="paragraph">
<p>After beginning a query, that query is considered <em>active</em> within the
command buffer it was called in until that same query is ended.
Queries active in a primary command buffer when secondary command buffers
are executed are considered active for those secondary command buffers.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBeginQuery-queryPool-01922" href="#VUID-vkCmdBeginQuery-queryPool-01922"></a>
<code>queryPool</code> <strong class="purple">must</strong> have been created with a <code>queryType</code> that
differs from that of any queries that are
<a href="#queries-operation-active">active</a> within <code>commandBuffer</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginQuery-None-00807" href="#VUID-vkCmdBeginQuery-None-00807"></a>
All queries used by the command <strong class="purple">must</strong> be unavailable</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginQuery-queryType-02804" href="#VUID-vkCmdBeginQuery-queryType-02804"></a>
The <code>queryType</code> used to create <code>queryPool</code> <strong class="purple">must</strong> not be
<code>VK_QUERY_TYPE_TIMESTAMP</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginQuery-queryType-00800" href="#VUID-vkCmdBeginQuery-queryType-00800"></a>
If the <a href="chap34.html#features-occlusionQueryPrecise">precise occlusion queries</a>
feature is not enabled, or the <code>queryType</code> used to create
<code>queryPool</code> was not <code>VK_QUERY_TYPE_OCCLUSION</code>, <code>flags</code> <strong class="purple">must</strong>
not contain <code>VK_QUERY_CONTROL_PRECISE_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginQuery-query-00802" href="#VUID-vkCmdBeginQuery-query-00802"></a>
<code>query</code> <strong class="purple">must</strong> be less than the number of queries in <code>queryPool</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginQuery-queryType-00803" href="#VUID-vkCmdBeginQuery-queryType-00803"></a>
If the <code>queryType</code> used to create <code>queryPool</code> was
<code>VK_QUERY_TYPE_OCCLUSION</code>, the <code>VkCommandPool</code> that
<code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginQuery-queryType-00804" href="#VUID-vkCmdBeginQuery-queryType-00804"></a>
If the <code>queryType</code> used to create <code>queryPool</code> was
<code>VK_QUERY_TYPE_PIPELINE_STATISTICS</code> and any of the
<code>pipelineStatistics</code> indicate graphics operations, the
<code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong>
support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginQuery-queryType-00805" href="#VUID-vkCmdBeginQuery-queryType-00805"></a>
If the <code>queryType</code> used to create <code>queryPool</code> was
<code>VK_QUERY_TYPE_PIPELINE_STATISTICS</code> and any of the
<code>pipelineStatistics</code> indicate compute operations, the
<code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong>
support compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginQuery-query-00808" href="#VUID-vkCmdBeginQuery-query-00808"></a>
If called within a render pass instance, the sum of <code>query</code> and the
number of bits set in the current subpass’s view mask <strong class="purple">must</strong> be less than
or equal to the number of queries in <code>queryPool</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginQuery-queryPool-03223" href="#VUID-vkCmdBeginQuery-queryPool-03223"></a>
If <code>queryPool</code> was created with a <code>queryType</code> of
<code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code>, the <a href="#profiling-lock">profiling lock</a> <strong class="purple">must</strong> have been held before <a href="chap5.html#vkBeginCommandBuffer">vkBeginCommandBuffer</a>
was called on <code>commandBuffer</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginQuery-queryPool-03224" href="#VUID-vkCmdBeginQuery-queryPool-03224"></a>
If <code>queryPool</code> was created with a <code>queryType</code> of
<code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code> and one of the counters used
to create <code>queryPool</code> was
<code>VK_PERFORMANCE_COUNTER_SCOPE_COMMAND_BUFFER_KHR</code>, the query begin
<strong class="purple">must</strong> be the first recorded command in <code>commandBuffer</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginQuery-queryPool-03225" href="#VUID-vkCmdBeginQuery-queryPool-03225"></a>
If <code>queryPool</code> was created with a <code>queryType</code> of
<code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code> and one of the counters used
to create <code>queryPool</code> was
<code>VK_PERFORMANCE_COUNTER_SCOPE_RENDER_PASS_KHR</code>, the begin command
<strong class="purple">must</strong> not be recorded within a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginQuery-queryPool-03226" href="#VUID-vkCmdBeginQuery-queryPool-03226"></a>
If <code>queryPool</code> was created with a <code>queryType</code> of
<code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code> and another query pool with a
<code>queryType</code> <code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code> has been used
within <code>commandBuffer</code>, its parent primary command buffer or
secondary command buffer recorded within the same parent primary command
buffer as <code>commandBuffer</code>, the
<a href="#features-features-performanceCounterMultipleQueryPools"><code>performanceCounterMultipleQueryPools</code></a>
feature <strong class="purple">must</strong> be enabled</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginQuery-None-02863" href="#VUID-vkCmdBeginQuery-None-02863"></a>
If <code>queryPool</code> was created with a <code>queryType</code> of
<code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code>, this command <strong class="purple">must</strong> not be
recorded in a command buffer that, either directly or through secondary
command buffers, also contains a <code>vkCmdResetQueryPool</code> command
affecting the same query</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBeginQuery-commandBuffer-parameter" href="#VUID-vkCmdBeginQuery-commandBuffer-parameter"></a> <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginQuery-queryPool-parameter" href="#VUID-vkCmdBeginQuery-queryPool-parameter"></a> <code>queryPool</code> <strong class="purple">must</strong> be a valid <a href="#VkQueryPool">VkQueryPool</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginQuery-flags-parameter" href="#VUID-vkCmdBeginQuery-flags-parameter"></a> <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="#VkQueryControlFlagBits">VkQueryControlFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginQuery-commandBuffer-recording" href="#VUID-vkCmdBeginQuery-commandBuffer-recording"></a> <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap5.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginQuery-commandBuffer-cmdpool" href="#VUID-vkCmdBeginQuery-commandBuffer-cmdpool"></a> The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginQuery-commonparent" href="#VUID-vkCmdBeginQuery-commonparent"></a> Both of <code>commandBuffer</code>, and <code>queryPool</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap4.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap7.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap4.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap6.html#synchronization-pipeline-stages-types">Pipeline Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in <a href="#vkCmdBeginQuery">vkCmdBeginQuery</a>::<code>flags</code>, specifying
constraints on the types of queries that <strong class="purple">can</strong> be performed, are:</p>
</div>
<div id="VkQueryControlFlagBits" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">enum</span> VkQueryControlFlagBits {
    VK_QUERY_CONTROL_PRECISE_BIT = <span class="hex">0x00000001</span>,
    VK_QUERY_CONTROL_FLAG_BITS_MAX_ENUM = <span class="hex">0x7FFFFFFF</span>
} VkQueryControlFlagBits;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_QUERY_CONTROL_PRECISE_BIT</code> specifies the precision of
<a href="#queries-occlusion">occlusion queries</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkQueryControlFlags" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> VkFlags VkQueryControlFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkQueryControlFlags</code> is a bitmask type for setting a mask of zero or
more <a href="#VkQueryControlFlagBits">VkQueryControlFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To end a query after the set of desired draw or dispatch commands is
executed, call:</p>
</div>
<div id="vkCmdEndQuery" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="directive">void</span> vkCmdEndQuery(
    VkCommandBuffer                             commandBuffer,
    VkQueryPool                                 queryPool,
    uint32_t                                    query);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which this command will
be recorded.</p>
</li>
<li>
<p><code>queryPool</code> is the query pool that is managing the results of the
query.</p>
</li>
<li>
<p><code>query</code> is the query index within the query pool where the result is
stored.</p>
</li>
</ul>
</div>
<div id="queries-operation-finished" class="paragraph">
<p>As queries operate asynchronously, ending a query does not immediately set
the query’s status to available.
A query is considered <em>finished</em> when the final results of the query are
ready to be retrieved by <a href="#vkGetQueryPoolResults">vkGetQueryPoolResults</a> and
<a href="#vkCmdCopyQueryPoolResults">vkCmdCopyQueryPoolResults</a>, and this is when the query’s status is set
to available.</p>
</div>
<div class="paragraph">
<p>Once a query is ended the query <strong class="purple">must</strong> finish in finite time, unless the
state of the query is changed using other commands, e.g. by issuing a reset
of the query.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdEndQuery-None-01923" href="#VUID-vkCmdEndQuery-None-01923"></a>
All queries used by the command <strong class="purple">must</strong> be
<a href="#queries-operation-active">active</a></p>
</li>
<li>
<p><a id="VUID-vkCmdEndQuery-query-00810" href="#VUID-vkCmdEndQuery-query-00810"></a>
<code>query</code> <strong class="purple">must</strong> be less than the number of queries in <code>queryPool</code></p>
</li>
<li>
<p><a id="VUID-vkCmdEndQuery-query-00812" href="#VUID-vkCmdEndQuery-query-00812"></a>
If <code>vkCmdEndQuery</code> is called within a render pass instance, the sum
of <code>query</code> and the number of bits set in the current subpass’s view
mask <strong class="purple">must</strong> be less than or equal to the number of queries in
<code>queryPool</code></p>
</li>
<li>
<p><a id="VUID-vkCmdEndQuery-queryPool-03227" href="#VUID-vkCmdEndQuery-queryPool-03227"></a>
If <code>queryPool</code> was created with a <code>queryType</code> of
<code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code> and one or more of the
counters used to create <code>queryPool</code> was
<code>VK_PERFORMANCE_COUNTER_SCOPE_COMMAND_BUFFER_KHR</code>, the
<a href="#vkCmdEndQuery">vkCmdEndQuery</a> <strong class="purple">must</strong> be the last recorded command in
<code>commandBuffer</code></p>
</li>
<li>
<p><a id="VUID-vkCmdEndQuery-queryPool-03228" href="#VUID-vkCmdEndQuery-queryPool-03228"></a>
If <code>queryPool</code> was created with a <code>queryType</code> of
<code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code> and one or more of the
counters used to create <code>queryPool</code> was
<code>VK_PERFORMANCE_COUNTER_SCOPE_RENDER_PASS_KHR</code>, the
<a href="#vkCmdEndQuery">vkCmdEndQuery</a> <strong class="purple">must</strong> not be recorded within a render pass instance</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdEndQuery-commandBuffer-parameter" href="#VUID-vkCmdEndQuery-commandBuffer-parameter"></a> <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdEndQuery-queryPool-parameter" href="#VUID-vkCmdEndQuery-queryPool-parameter"></a> <code>queryPool</code> <strong class="purple">must</strong> be a valid <a href="#VkQueryPool">VkQueryPool</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdEndQuery-commandBuffer-recording" href="#VUID-vkCmdEndQuery-commandBuffer-recording"></a> <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap5.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdEndQuery-commandBuffer-cmdpool" href="#VUID-vkCmdEndQuery-commandBuffer-cmdpool"></a> The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdEndQuery-commonparent" href="#VUID-vkCmdEndQuery-commonparent"></a> Both of <code>commandBuffer</code>, and <code>queryPool</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap4.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap7.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap4.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap6.html#synchronization-pipeline-stages-types">Pipeline Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="queries-operation-memorylayout" class="paragraph">
<p>An application <strong class="purple">can</strong> retrieve results either by requesting they be written
into application-provided memory, or by requesting they be copied into a
<code>VkBuffer</code>.
In either case, the layout in memory is defined as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The first query’s result is written starting at the first byte requested
by the command, and each subsequent query’s result begins <code>stride</code>
bytes later.</p>
</li>
<li>
<p>Occlusion queries, pipeline statistics queries,
and timestamp queries store results in a tightly packed array of
unsigned integers, either 32- or 64-bits as requested by the command,
storing the numerical results and, if requested, the availability
status.</p>
</li>
<li>
<p>Performance queries store results in a tightly packed array whose type
is determined by the <code>unit</code> member of the corresponding
<a href="chap4.html#VkPerformanceCounterKHR">VkPerformanceCounterKHR</a>.</p>
</li>
<li>
<p>If <code>VK_QUERY_RESULT_WITH_AVAILABILITY_BIT</code> is used, the final
element of each query’s result is an integer indicating whether the
query’s result is available, with any non-zero value indicating that it
is available.</p>
</li>
<li>
<p>Occlusion queries write one integer value - the number of samples
passed.
Pipeline statistics queries write one integer value for each bit that is
enabled in the <code>pipelineStatistics</code> when the pool is created, and
the statistics values are written in bit order starting from the least
significant bit.
Timestamp queries write one integer value.
Performance queries write one <a href="#VkPerformanceCounterResultKHR">VkPerformanceCounterResultKHR</a> value
for each <a href="chap4.html#VkPerformanceCounterKHR">VkPerformanceCounterKHR</a> in the query.</p>
</li>
<li>
<p>If more than one query is retrieved and <code>stride</code> is not at least as
large as the size of the array of values corresponding to a single
query, the values written to memory are undefined.</p>
</li>
</ul>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To retrieve status and results for a set of queries, call:</p>
</div>
<div id="vkGetQueryPoolResults" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++">VkResult vkGetQueryPoolResults(
    VkDevice                                    device,
    VkQueryPool                                 queryPool,
    uint32_t                                    firstQuery,
    uint32_t                                    queryCount,
    size_t                                      dataSize,
    <span class="directive">void</span>*                                       pData,
    VkDeviceSize                                stride,
    VkQueryResultFlags                          flags);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the query pool.</p>
</li>
<li>
<p><code>queryPool</code> is the query pool managing the queries containing the
desired results.</p>
</li>
<li>
<p><code>firstQuery</code> is the initial query index.</p>
</li>
<li>
<p><code>queryCount</code> is the number of queries to read.</p>
</li>
<li>
<p><code>dataSize</code> is the size in bytes of the buffer pointed to by
<code>pData</code>.</p>
</li>
<li>
<p><code>pData</code> is a pointer to a user-allocated buffer where the results
will be written</p>
</li>
<li>
<p><code>stride</code> is the stride in bytes between results for individual
queries within <code>pData</code>.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="#VkQueryResultFlagBits">VkQueryResultFlagBits</a> specifying how
and when results are returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The range of queries read is defined by <span class="eq">[<code>firstQuery</code>,
<code>firstQuery</code> +  <code>queryCount</code> - 1]</span>.
For pipeline statistics queries, each query index in the pool contains one
integer value for each bit that is enabled in
<a href="#VkQueryPoolCreateInfo">VkQueryPoolCreateInfo</a>::<code>pipelineStatistics</code> when the pool is
created.</p>
</div>
<div class="paragraph">
<p>If no bits are set in <code>flags</code>, and all requested queries are in the
available state, results are written as an array of 32-bit unsigned integer
values.
The behavior when not all queries are available, is described
<a href="#queries-wait-bit-not-set">below</a>.</p>
</div>
<div class="paragraph">
<p>If <code>VK_QUERY_RESULT_64_BIT</code> is not set and the result overflows a 32-bit
value, the value <strong class="purple">may</strong> either wrap or saturate.
Similarly, if <code>VK_QUERY_RESULT_64_BIT</code> is set and the result overflows a
64-bit value, the value <strong class="purple">may</strong> either wrap or saturate.</p>
</div>
<div class="paragraph">
<p>If <code>VK_QUERY_RESULT_WAIT_BIT</code> is set, Vulkan will wait for each query to
be in the available state before retrieving the numerical results for that
query.
In this case, <code>vkGetQueryPoolResults</code> is guaranteed to succeed and
return <code>VK_SUCCESS</code> if the queries become available in a finite time
(i.e. if they have been issued and not reset).
If queries will never finish (e.g. due to being reset but not issued), then
<code>vkGetQueryPoolResults</code> <strong class="purple">may</strong> not return in finite time.</p>
</div>
<div id="queries-wait-bit-not-set" class="paragraph">
<p>If <code>VK_QUERY_RESULT_WAIT_BIT</code> and <code>VK_QUERY_RESULT_PARTIAL_BIT</code> are
both not set then no result values are written to <code>pData</code> for queries
that are in the unavailable state at the time of the call, and
<code>vkGetQueryPoolResults</code> returns <code>VK_NOT_READY</code>.
However, availability state is still written to <code>pData</code> for those
queries if <code>VK_QUERY_RESULT_WITH_AVAILABILITY_BIT</code> is set.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Applications <strong class="purple">must</strong> take care to ensure that use of the
<code>VK_QUERY_RESULT_WAIT_BIT</code> bit has the desired effect.</p>
</div>
<div class="paragraph">
<p>For example, if a query has been used previously and a command buffer
records the commands <code>vkCmdResetQueryPool</code>, <code>vkCmdBeginQuery</code>, and
<code>vkCmdEndQuery</code> for that query, then the query will remain in the
available state until
the <code>vkCmdResetQueryPool</code> command executes on a queue.
Applications <strong class="purple">can</strong> use fences or events to ensure that a query has already
been reset before checking for its results or availability status.
Otherwise, a stale value could be returned from a previous use of the query.</p>
</div>
<div class="paragraph">
<p>The above also applies when <code>VK_QUERY_RESULT_WAIT_BIT</code> is used in
combination with <code>VK_QUERY_RESULT_WITH_AVAILABILITY_BIT</code>.
In this case, the returned availability status <strong class="purple">may</strong> reflect the result of a
previous use of the query unless
the <code>vkCmdResetQueryPool</code> command has been executed since the last use
of the query.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Applications <strong class="purple">can</strong> double-buffer query pool usage, with a pool per frame, and
reset queries at the end of the frame in which they are read.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If <code>VK_QUERY_RESULT_PARTIAL_BIT</code> is set, <code>VK_QUERY_RESULT_WAIT_BIT</code>
is not set, and the query’s status is unavailable, an intermediate result
value between zero and the final result value is written to <code>pData</code> for
that query.</p>
</div>
<div class="paragraph">
<p>If <code>VK_QUERY_RESULT_WITH_AVAILABILITY_BIT</code> is set, the final integer
value written for each query is non-zero if the query’s status was available
or zero if the status was unavailable.
When <code>VK_QUERY_RESULT_WITH_AVAILABILITY_BIT</code> is used, implementations
<strong class="purple">must</strong> guarantee that if they return a non-zero availability value then the
numerical results <strong class="purple">must</strong> be valid, assuming the results are not reset by a
subsequent command.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Satisfying this guarantee <strong class="purple">may</strong> require careful ordering by the application,
e.g. to read the availability status before reading the results.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetQueryPoolResults-firstQuery-00813" href="#VUID-vkGetQueryPoolResults-firstQuery-00813"></a>
<code>firstQuery</code> <strong class="purple">must</strong> be less than the number of queries in
<code>queryPool</code></p>
</li>
<li>
<p><a id="VUID-vkGetQueryPoolResults-flags-02827" href="#VUID-vkGetQueryPoolResults-flags-02827"></a>
If <code>VK_QUERY_RESULT_64_BIT</code> is not set in <code>flags</code>, then
<code>pData</code> and <code>stride</code> <strong class="purple">must</strong> be multiples of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkGetQueryPoolResults-flags-02828" href="#VUID-vkGetQueryPoolResults-flags-02828"></a>
If <code>VK_QUERY_RESULT_64_BIT</code> is not set in <code>flags</code> and the
<code>queryType</code> used to create <code>queryPool</code> was not
<code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code>, then <code>pData</code> and
<code>stride</code> <strong class="purple">must</strong> be multiples of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkGetQueryPoolResults-flags-00815" href="#VUID-vkGetQueryPoolResults-flags-00815"></a>
If <code>VK_QUERY_RESULT_64_BIT</code> is set in <code>flags</code> then <code>pData</code>
and <code>stride</code> <strong class="purple">must</strong> be multiples of <code>8</code></p>
</li>
<li>
<p><a id="VUID-vkGetQueryPoolResults-queryType-03229" href="#VUID-vkGetQueryPoolResults-queryType-03229"></a>
If the <code>queryType</code> used to create <code>queryPool</code> was
<code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code>, then <code>pData</code> and
<code>stride</code> <strong class="purple">must</strong> be multiples of the size of
<a href="#VkPerformanceCounterResultKHR">VkPerformanceCounterResultKHR</a></p>
</li>
<li>
<p><a id="VUID-vkGetQueryPoolResults-firstQuery-00816" href="#VUID-vkGetQueryPoolResults-firstQuery-00816"></a>
The sum of <code>firstQuery</code> and <code>queryCount</code> <strong class="purple">must</strong> be less than or
equal to the number of queries in <code>queryPool</code></p>
</li>
<li>
<p><a id="VUID-vkGetQueryPoolResults-dataSize-00817" href="#VUID-vkGetQueryPoolResults-dataSize-00817"></a>
<code>dataSize</code> <strong class="purple">must</strong> be large enough to contain the result of each
query, as described <a href="#queries-operation-memorylayout">here</a></p>
</li>
<li>
<p><a id="VUID-vkGetQueryPoolResults-queryType-00818" href="#VUID-vkGetQueryPoolResults-queryType-00818"></a>
If the <code>queryType</code> used to create <code>queryPool</code> was
<code>VK_QUERY_TYPE_TIMESTAMP</code>, <code>flags</code> <strong class="purple">must</strong> not contain
<code>VK_QUERY_RESULT_PARTIAL_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetQueryPoolResults-queryType-03230" href="#VUID-vkGetQueryPoolResults-queryType-03230"></a>
If the <code>queryType</code> used to create <code>queryPool</code> was
<code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code>, <code>flags</code> <strong class="purple">must</strong> not contain
<code>VK_QUERY_RESULT_WITH_AVAILABILITY_BIT</code>,
<code>VK_QUERY_RESULT_PARTIAL_BIT</code> or <code>VK_QUERY_RESULT_64_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkGetQueryPoolResults-queryType-03231" href="#VUID-vkGetQueryPoolResults-queryType-03231"></a>
If the <code>queryType</code> used to create <code>queryPool</code> was
<code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code>, the <code>queryPool</code> <strong class="purple">must</strong>
have been recorded once for each pass as retrieved via a call to
<a href="#vkGetPhysicalDeviceQueueFamilyPerformanceQueryPassesKHR">vkGetPhysicalDeviceQueueFamilyPerformanceQueryPassesKHR</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetQueryPoolResults-device-parameter" href="#VUID-vkGetQueryPoolResults-device-parameter"></a> <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap4.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetQueryPoolResults-queryPool-parameter" href="#VUID-vkGetQueryPoolResults-queryPool-parameter"></a> <code>queryPool</code> <strong class="purple">must</strong> be a valid <a href="#VkQueryPool">VkQueryPool</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetQueryPoolResults-pData-parameter" href="#VUID-vkGetQueryPoolResults-pData-parameter"></a> <code>pData</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>dataSize</code> bytes</p>
</li>
<li>
<p><a id="VUID-vkGetQueryPoolResults-flags-parameter" href="#VUID-vkGetQueryPoolResults-flags-parameter"></a> <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="#VkQueryResultFlagBits">VkQueryResultFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-vkGetQueryPoolResults-dataSize-arraylength" href="#VUID-vkGetQueryPoolResults-dataSize-arraylength"></a> <code>dataSize</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkGetQueryPoolResults-queryPool-parent" href="#VUID-vkGetQueryPoolResults-queryPool-parent"></a> <code>queryPool</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap2.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
<li>
<p><code>VK_NOT_READY</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap2.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_DEVICE_LOST</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in <a href="#vkGetQueryPoolResults">vkGetQueryPoolResults</a>::<code>flags</code> and
<a href="#vkCmdCopyQueryPoolResults">vkCmdCopyQueryPoolResults</a>::<code>flags</code>, specifying how and when
results are returned, are:</p>
</div>
<div id="VkQueryResultFlagBits" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">enum</span> VkQueryResultFlagBits {
    VK_QUERY_RESULT_64_BIT = <span class="hex">0x00000001</span>,
    VK_QUERY_RESULT_WAIT_BIT = <span class="hex">0x00000002</span>,
    VK_QUERY_RESULT_WITH_AVAILABILITY_BIT = <span class="hex">0x00000004</span>,
    VK_QUERY_RESULT_PARTIAL_BIT = <span class="hex">0x00000008</span>,
    VK_QUERY_RESULT_FLAG_BITS_MAX_ENUM = <span class="hex">0x7FFFFFFF</span>
} VkQueryResultFlagBits;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_QUERY_RESULT_64_BIT</code> specifies the results will be written as an
array of 64-bit unsigned integer values.
If this bit is not set, the results will be written as an array of
32-bit unsigned integer values.</p>
</li>
<li>
<p><code>VK_QUERY_RESULT_WAIT_BIT</code> specifies that Vulkan will wait for each
query’s status to become available before retrieving its results.</p>
</li>
<li>
<p><code>VK_QUERY_RESULT_WITH_AVAILABILITY_BIT</code> specifies that the
availability status accompanies the results.</p>
</li>
<li>
<p><code>VK_QUERY_RESULT_PARTIAL_BIT</code> specifies that returning partial
results is acceptable.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkQueryResultFlags" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> VkFlags VkQueryResultFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkQueryResultFlags</code> is a bitmask type for setting a mask of zero or
more <a href="#VkQueryResultFlagBits">VkQueryResultFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To copy query statuses and numerical results directly to buffer memory,
call:</p>
</div>
<div id="vkCmdCopyQueryPoolResults" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="directive">void</span> vkCmdCopyQueryPoolResults(
    VkCommandBuffer                             commandBuffer,
    VkQueryPool                                 queryPool,
    uint32_t                                    firstQuery,
    uint32_t                                    queryCount,
    VkBuffer                                    dstBuffer,
    VkDeviceSize                                dstOffset,
    VkDeviceSize                                stride,
    VkQueryResultFlags                          flags);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which this command will
be recorded.</p>
</li>
<li>
<p><code>queryPool</code> is the query pool managing the queries containing the
desired results.</p>
</li>
<li>
<p><code>firstQuery</code> is the initial query index.</p>
</li>
<li>
<p><code>queryCount</code> is the number of queries.
<code>firstQuery</code> and <code>queryCount</code> together define a range of
queries.</p>
</li>
<li>
<p><code>dstBuffer</code> is a <a href="chap11.html#VkBuffer">VkBuffer</a> object that will receive the results
of the copy command.</p>
</li>
<li>
<p><code>dstOffset</code> is an offset into <code>dstBuffer</code>.</p>
</li>
<li>
<p><code>stride</code> is the stride in bytes between results for individual
queries within <code>dstBuffer</code>.
The required size of the backing memory for <code>dstBuffer</code> is
determined as described above for <a href="#vkGetQueryPoolResults">vkGetQueryPoolResults</a>.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="#VkQueryResultFlagBits">VkQueryResultFlagBits</a> specifying how
and when results are returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkCmdCopyQueryPoolResults</code> is guaranteed to see the effect of previous
uses of <code>vkCmdResetQueryPool</code> in the same queue, without any additional
synchronization.
Thus, the results will always reflect the most recent use of the query.</p>
</div>
<div class="paragraph">
<p><code>flags</code> has the same possible values described above for the <code>flags</code>
parameter of <a href="#vkGetQueryPoolResults">vkGetQueryPoolResults</a>, but the different style of
execution causes some subtle behavioral differences.
Because <code>vkCmdCopyQueryPoolResults</code> executes in order with respect to
other query commands, there is less ambiguity about which use of a query is
being requested.</p>
</div>
<div class="paragraph">
<p>Results for all requested occlusion queries, pipeline statistics queries,
and timestamp queries are written as 64-bit unsigned integer values if
<code>VK_QUERY_RESULT_64_BIT</code> is set or 32-bit unsigned integer values
otherwise.
Performance queries store results in a tightly packed array whose type is
determined by the <code>unit</code> member of the corresponding
<a href="chap4.html#VkPerformanceCounterKHR">VkPerformanceCounterKHR</a>.</p>
</div>
<div class="paragraph">
<p>If neither of <code>VK_QUERY_RESULT_WAIT_BIT</code> and
<code>VK_QUERY_RESULT_WITH_AVAILABILITY_BIT</code> are set, results are only
written out for queries in the available state.</p>
</div>
<div class="paragraph">
<p>If <code>VK_QUERY_RESULT_WAIT_BIT</code> is set, the implementation will wait for
each query’s status to be in the available state before retrieving the
numerical results for that query.
This is guaranteed to reflect the most recent use of the query on the same
queue, assuming that the query is not being simultaneously used by other
queues.
If the query does not become available in a finite amount of time (e.g. due
to not issuing a query since the last reset), a <code>VK_ERROR_DEVICE_LOST</code>
error <strong class="purple">may</strong> occur.</p>
</div>
<div class="paragraph">
<p>Similarly, if <code>VK_QUERY_RESULT_WITH_AVAILABILITY_BIT</code> is set and
<code>VK_QUERY_RESULT_WAIT_BIT</code> is not set, the availability is guaranteed to
reflect the most recent use of the query on the same queue, assuming that
the query is not being simultaneously used by other queues.
As with <code>vkGetQueryPoolResults</code>, implementations <strong class="purple">must</strong> guarantee that if
they return a non-zero availability value, then the numerical results are
valid.</p>
</div>
<div class="paragraph">
<p>If <code>VK_QUERY_RESULT_PARTIAL_BIT</code> is set, <code>VK_QUERY_RESULT_WAIT_BIT</code>
is not set, and the query’s status is unavailable, an intermediate result
value between zero and the final result value is written for that query.</p>
</div>
<div class="paragraph">
<p><code>VK_QUERY_RESULT_PARTIAL_BIT</code> <strong class="purple">must</strong> not be used if the pool’s
<code>queryType</code> is <code>VK_QUERY_TYPE_TIMESTAMP</code>.</p>
</div>
<div class="paragraph">
<p><code>vkCmdCopyQueryPoolResults</code> is considered to be a transfer operation,
and its writes to buffer memory <strong class="purple">must</strong> be synchronized using
<code>VK_PIPELINE_STAGE_TRANSFER_BIT</code> and <code>VK_ACCESS_TRANSFER_WRITE_BIT</code>
before using the results.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyQueryPoolResults-dstOffset-00819" href="#VUID-vkCmdCopyQueryPoolResults-dstOffset-00819"></a>
<code>dstOffset</code> <strong class="purple">must</strong> be less than the size of <code>dstBuffer</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyQueryPoolResults-firstQuery-00820" href="#VUID-vkCmdCopyQueryPoolResults-firstQuery-00820"></a>
<code>firstQuery</code> <strong class="purple">must</strong> be less than the number of queries in
<code>queryPool</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyQueryPoolResults-firstQuery-00821" href="#VUID-vkCmdCopyQueryPoolResults-firstQuery-00821"></a>
The sum of <code>firstQuery</code> and <code>queryCount</code> <strong class="purple">must</strong> be less than or
equal to the number of queries in <code>queryPool</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyQueryPoolResults-flags-00822" href="#VUID-vkCmdCopyQueryPoolResults-flags-00822"></a>
If <code>VK_QUERY_RESULT_64_BIT</code> is not set in <code>flags</code> then
<code>dstOffset</code> and <code>stride</code> <strong class="purple">must</strong> be multiples of <code>4</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyQueryPoolResults-flags-00823" href="#VUID-vkCmdCopyQueryPoolResults-flags-00823"></a>
If <code>VK_QUERY_RESULT_64_BIT</code> is set in <code>flags</code> then
<code>dstOffset</code> and <code>stride</code> <strong class="purple">must</strong> be multiples of <code>8</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyQueryPoolResults-dstBuffer-00824" href="#VUID-vkCmdCopyQueryPoolResults-dstBuffer-00824"></a>
<code>dstBuffer</code> <strong class="purple">must</strong> have enough storage, from <code>dstOffset</code>, to
contain the result of each query, as described
<a href="#queries-operation-memorylayout">here</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyQueryPoolResults-dstBuffer-00825" href="#VUID-vkCmdCopyQueryPoolResults-dstBuffer-00825"></a>
<code>dstBuffer</code> <strong class="purple">must</strong> have been created with
<code>VK_BUFFER_USAGE_TRANSFER_DST_BIT</code> usage flag</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyQueryPoolResults-dstBuffer-00826" href="#VUID-vkCmdCopyQueryPoolResults-dstBuffer-00826"></a>
If <code>dstBuffer</code> is non-sparse then it <strong class="purple">must</strong> be bound completely and
contiguously to a single <code>VkDeviceMemory</code> object</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyQueryPoolResults-queryType-00827" href="#VUID-vkCmdCopyQueryPoolResults-queryType-00827"></a>
If the <code>queryType</code> used to create <code>queryPool</code> was
<code>VK_QUERY_TYPE_TIMESTAMP</code>, <code>flags</code> <strong class="purple">must</strong> not contain
<code>VK_QUERY_RESULT_PARTIAL_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyQueryPoolResults-queryType-03232" href="#VUID-vkCmdCopyQueryPoolResults-queryType-03232"></a>
If the <code>queryType</code> used to create <code>queryPool</code> was
<code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code>,
<a href="chap35.html#VkPhysicalDevicePerformanceQueryPropertiesKHR">VkPhysicalDevicePerformanceQueryPropertiesKHR</a>::<code>allowCommandBufferQueryCopies</code>
<strong class="purple">must</strong> be <code>VK_TRUE</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyQueryPoolResults-queryType-03233" href="#VUID-vkCmdCopyQueryPoolResults-queryType-03233"></a>
If the <code>queryType</code> used to create <code>queryPool</code> was
<code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code>, <code>flags</code> <strong class="purple">must</strong> not contain
<code>VK_QUERY_RESULT_WITH_AVAILABILITY_BIT</code>,
<code>VK_QUERY_RESULT_PARTIAL_BIT</code> or <code>VK_QUERY_RESULT_64_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyQueryPoolResults-queryType-03234" href="#VUID-vkCmdCopyQueryPoolResults-queryType-03234"></a>
If the <code>queryType</code> used to create <code>queryPool</code> was
<code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code>, the <code>queryPool</code> <strong class="purple">must</strong>
have been submitted once for each pass as retrieved via a call to
<a href="#vkGetPhysicalDeviceQueueFamilyPerformanceQueryPassesKHR">vkGetPhysicalDeviceQueueFamilyPerformanceQueryPassesKHR</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdCopyQueryPoolResults-commandBuffer-parameter" href="#VUID-vkCmdCopyQueryPoolResults-commandBuffer-parameter"></a> <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyQueryPoolResults-queryPool-parameter" href="#VUID-vkCmdCopyQueryPoolResults-queryPool-parameter"></a> <code>queryPool</code> <strong class="purple">must</strong> be a valid <a href="#VkQueryPool">VkQueryPool</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyQueryPoolResults-dstBuffer-parameter" href="#VUID-vkCmdCopyQueryPoolResults-dstBuffer-parameter"></a> <code>dstBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap11.html#VkBuffer">VkBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyQueryPoolResults-flags-parameter" href="#VUID-vkCmdCopyQueryPoolResults-flags-parameter"></a> <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="#VkQueryResultFlagBits">VkQueryResultFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyQueryPoolResults-commandBuffer-recording" href="#VUID-vkCmdCopyQueryPoolResults-commandBuffer-recording"></a> <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap5.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdCopyQueryPoolResults-commandBuffer-cmdpool" href="#VUID-vkCmdCopyQueryPoolResults-commandBuffer-cmdpool"></a> The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyQueryPoolResults-renderpass" href="#VUID-vkCmdCopyQueryPoolResults-renderpass"></a> This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdCopyQueryPoolResults-commonparent" href="#VUID-vkCmdCopyQueryPoolResults-commonparent"></a> Each of <code>commandBuffer</code>, <code>dstBuffer</code>, and <code>queryPool</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap4.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap7.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap4.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap6.html#synchronization-pipeline-stages-types">Pipeline Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="queries-operation-undefined" class="paragraph">
<p>Rendering operations such as clears, MSAA resolves, attachment load/store
operations, and blits <strong class="purple">may</strong> count towards the results of queries.
This behavior is implementation-dependent and <strong class="purple">may</strong> vary depending on the
path used within an implementation.
For example, some implementations have several types of clears, some of
which <strong class="purple">may</strong> include vertices and some not.</p>
</div>
</div>
<div class="sect2">
<h3 id="queries-occlusion"><a class="anchor" href="#queries-occlusion"></a>16.3. Occlusion Queries</h3>
<div class="paragraph">
<p>Occlusion queries track the number of samples that pass the per-fragment
tests for a set of drawing commands.
As such, occlusion queries are only available on queue families supporting
graphics operations.
The application <strong class="purple">can</strong> then use these results to inform future rendering
decisions.
An occlusion query is begun and ended by calling <code>vkCmdBeginQuery</code> and
<code>vkCmdEndQuery</code>, respectively.
When an occlusion query begins, the count of passing samples always starts
at zero.
For each drawing command, the count is incremented as described in
<a href="chap25.html#fragops-samplecount">Sample Counting</a>.
If <code>flags</code> does not contain <code>VK_QUERY_CONTROL_PRECISE_BIT</code> an
implementation <strong class="purple">may</strong> generate any non-zero result value for the query if the
count of passing samples is non-zero.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Not setting <code>VK_QUERY_CONTROL_PRECISE_BIT</code> mode <strong class="purple">may</strong> be more efficient
on some implementations, and <strong class="purple">should</strong> be used where it is sufficient to know
a boolean result on whether any samples passed the per-fragment tests.
In this case, some implementations <strong class="purple">may</strong> only return zero or one, indifferent
to the actual number of samples passing the per-fragment tests.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When an occlusion query finishes, the result for that query is marked as
available.
The application <strong class="purple">can</strong> then either copy the result to a buffer (via
<code>vkCmdCopyQueryPoolResults</code>) or request it be put into host memory (via
<code>vkGetQueryPoolResults</code>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>If occluding geometry is not drawn first, samples <strong class="purple">can</strong> pass the depth test,
but still not be visible in a final image.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="queries-pipestats"><a class="anchor" href="#queries-pipestats"></a>16.4. Pipeline Statistics Queries</h3>
<div class="paragraph">
<p>Pipeline statistics queries allow the application to sample a specified set
of <code>VkPipeline</code> counters.
These counters are accumulated by Vulkan for a set of either draw or
dispatch commands while a pipeline statistics query is active.
As such, pipeline statistics queries are available on queue families
supporting either graphics or compute operations.
The availability of pipeline statistics queries is indicated by the
<code>pipelineStatisticsQuery</code> member of the <code>VkPhysicalDeviceFeatures</code>
object (see <code>vkGetPhysicalDeviceFeatures</code> and <code>vkCreateDevice</code> for
detecting and requesting this query type on a <code>VkDevice</code>).</p>
</div>
<div class="paragraph">
<p>A pipeline statistics query is begun and ended by calling
<code>vkCmdBeginQuery</code> and <code>vkCmdEndQuery</code>, respectively.
When a pipeline statistics query begins, all statistics counters are set to
zero.
While the query is active, the pipeline type determines which set of
statistics are available, but these <strong class="purple">must</strong> be configured on the query pool
when it is created.
If a statistic counter is issued on a command buffer that does not support
the corresponding operation, the value of that counter is undefined after
the query has finished.
At least one statistic counter relevant to the operations supported on the
recording command buffer <strong class="purple">must</strong> be enabled.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set to individually enable pipeline statistics counters
for query pools with <a href="#VkQueryPoolCreateInfo">VkQueryPoolCreateInfo</a>::<code>pipelineStatistics</code>,
and for secondary command buffers with
<a href="chap5.html#VkCommandBufferInheritanceInfo">VkCommandBufferInheritanceInfo</a>::<code>pipelineStatistics</code>, are:</p>
</div>
<div id="VkQueryPipelineStatisticFlagBits" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">enum</span> VkQueryPipelineStatisticFlagBits {
    VK_QUERY_PIPELINE_STATISTIC_INPUT_ASSEMBLY_VERTICES_BIT = <span class="hex">0x00000001</span>,
    VK_QUERY_PIPELINE_STATISTIC_INPUT_ASSEMBLY_PRIMITIVES_BIT = <span class="hex">0x00000002</span>,
    VK_QUERY_PIPELINE_STATISTIC_VERTEX_SHADER_INVOCATIONS_BIT = <span class="hex">0x00000004</span>,
    VK_QUERY_PIPELINE_STATISTIC_GEOMETRY_SHADER_INVOCATIONS_BIT = <span class="hex">0x00000008</span>,
    VK_QUERY_PIPELINE_STATISTIC_GEOMETRY_SHADER_PRIMITIVES_BIT = <span class="hex">0x00000010</span>,
    VK_QUERY_PIPELINE_STATISTIC_CLIPPING_INVOCATIONS_BIT = <span class="hex">0x00000020</span>,
    VK_QUERY_PIPELINE_STATISTIC_CLIPPING_PRIMITIVES_BIT = <span class="hex">0x00000040</span>,
    VK_QUERY_PIPELINE_STATISTIC_FRAGMENT_SHADER_INVOCATIONS_BIT = <span class="hex">0x00000080</span>,
    VK_QUERY_PIPELINE_STATISTIC_TESSELLATION_CONTROL_SHADER_PATCHES_BIT = <span class="hex">0x00000100</span>,
    VK_QUERY_PIPELINE_STATISTIC_TESSELLATION_EVALUATION_SHADER_INVOCATIONS_BIT = <span class="hex">0x00000200</span>,
    VK_QUERY_PIPELINE_STATISTIC_COMPUTE_SHADER_INVOCATIONS_BIT = <span class="hex">0x00000400</span>,
    VK_QUERY_PIPELINE_STATISTIC_FLAG_BITS_MAX_ENUM = <span class="hex">0x7FFFFFFF</span>
} VkQueryPipelineStatisticFlagBits;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_QUERY_PIPELINE_STATISTIC_INPUT_ASSEMBLY_VERTICES_BIT</code> specifies
that queries managed by the pool will count the number of vertices
processed by the <a href="chap19.html#drawing">input assembly</a> stage.
Vertices corresponding to incomplete primitives <strong class="purple">may</strong> contribute to the
count.</p>
</li>
<li>
<p><code>VK_QUERY_PIPELINE_STATISTIC_INPUT_ASSEMBLY_PRIMITIVES_BIT</code>
specifies that queries managed by the pool will count the number of
primitives processed by the <a href="chap19.html#drawing">input assembly</a> stage.
If primitive restart is enabled, restarting the primitive topology has
no effect on the count.
Incomplete primitives <strong class="purple">may</strong> be counted.</p>
</li>
<li>
<p><code>VK_QUERY_PIPELINE_STATISTIC_VERTEX_SHADER_INVOCATIONS_BIT</code>
specifies that queries managed by the pool will count the number of
vertex shader invocations.
This counter’s value is incremented each time a vertex shader is
<a href="chap8.html#shaders-vertex-execution">invoked</a>.</p>
</li>
<li>
<p><code>VK_QUERY_PIPELINE_STATISTIC_GEOMETRY_SHADER_INVOCATIONS_BIT</code>
specifies that queries managed by the pool will count the number of
geometry shader invocations.
This counter’s value is incremented each time a geometry shader is
<a href="chap8.html#shaders-geometry-execution">invoked</a>.
In the case of <a href="chap22.html#geometry-invocations">instanced geometry shaders</a>, the
geometry shader invocations count is incremented for each separate
instanced invocation.</p>
</li>
<li>
<p><code>VK_QUERY_PIPELINE_STATISTIC_GEOMETRY_SHADER_PRIMITIVES_BIT</code>
specifies that queries managed by the pool will count the number of
primitives generated by geometry shader invocations.
The counter’s value is incremented each time the geometry shader emits a
primitive.
Restarting primitive topology using the SPIR-V instructions
<code>OpEndPrimitive</code> or <code>OpEndStreamPrimitive</code> has no effect on the
geometry shader output primitives count.</p>
</li>
<li>
<p><code>VK_QUERY_PIPELINE_STATISTIC_CLIPPING_INVOCATIONS_BIT</code> specifies
that queries managed by the pool will count the number of primitives
processed by the <a href="chap23.html#vertexpostproc-clipping">Primitive Clipping</a> stage of
the pipeline.
The counter’s value is incremented each time a primitive reaches the
primitive clipping stage.</p>
</li>
<li>
<p><code>VK_QUERY_PIPELINE_STATISTIC_CLIPPING_PRIMITIVES_BIT</code> specifies that
queries managed by the pool will count the number of primitives output
by the <a href="chap23.html#vertexpostproc-clipping">Primitive Clipping</a> stage of the
pipeline.
The counter’s value is incremented each time a primitive passes the
primitive clipping stage.
The actual number of primitives output by the primitive clipping stage
for a particular input primitive is implementation-dependent but <strong class="purple">must</strong>
satisfy the following conditions:</p>
<div class="ulist">
<ul>
<li>
<p>If at least one vertex of the input primitive lies inside the clipping
volume, the counter is incremented by one or more.</p>
</li>
<li>
<p>Otherwise, the counter is incremented by zero or more.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>VK_QUERY_PIPELINE_STATISTIC_FRAGMENT_SHADER_INVOCATIONS_BIT</code>
specifies that queries managed by the pool will count the number of
fragment shader invocations.
The counter’s value is incremented each time the fragment shader is
<a href="chap8.html#shaders-fragment-execution">invoked</a>.</p>
</li>
<li>
<p><code>VK_QUERY_PIPELINE_STATISTIC_TESSELLATION_CONTROL_SHADER_PATCHES_BIT</code>
specifies that queries managed by the pool will count the number of
patches processed by the tessellation control shader.
The counter’s value is incremented once for each patch for which a
tessellation control shader is
<a href="chap8.html#shaders-tessellation-control-execution">invoked</a>.</p>
</li>
<li>
<p><code>VK_QUERY_PIPELINE_STATISTIC_TESSELLATION_EVALUATION_SHADER_INVOCATIONS_BIT</code>
specifies that queries managed by the pool will count the number of
invocations of the tessellation evaluation shader.
The counter’s value is incremented each time the tessellation evaluation
shader is <a href="chap8.html#shaders-tessellation-evaluation-execution">invoked</a>.</p>
</li>
<li>
<p><code>VK_QUERY_PIPELINE_STATISTIC_COMPUTE_SHADER_INVOCATIONS_BIT</code>
specifies that queries managed by the pool will count the number of
compute shader invocations.
The counter’s value is incremented every time the compute shader is
invoked.
Implementations <strong class="purple">may</strong> skip the execution of certain compute shader
invocations or execute additional compute shader invocations for
implementation-dependent reasons as long as the results of rendering
otherwise remain unchanged.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These values are intended to measure relative statistics on one
implementation.
Various device architectures will count these values differently.
Any or all counters <strong class="purple">may</strong> be affected by the issues described in
<a href="#queries-operation-undefined">Query Operation</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>For example, tile-based rendering devices <strong class="purple">may</strong> need to replay the scene
multiple times, affecting some of the counts.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If a pipeline has <code>rasterizerDiscardEnable</code> enabled, implementations
<strong class="purple">may</strong> discard primitives after the final vertex processing stage.
As a result, if <code>rasterizerDiscardEnable</code> is enabled, the clipping input
and output primitives counters <strong class="purple">may</strong> not be incremented.</p>
</div>
<div class="paragraph">
<p>When a pipeline statistics query finishes, the result for that query is
marked as available.
The application <strong class="purple">can</strong> copy the result to a buffer (via
<code>vkCmdCopyQueryPoolResults</code>), or request it be put into host memory (via
<code>vkGetQueryPoolResults</code>).</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkQueryPipelineStatisticFlags" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> VkFlags VkQueryPipelineStatisticFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkQueryPipelineStatisticFlags</code> is a bitmask type for setting a mask of
zero or more <a href="#VkQueryPipelineStatisticFlagBits">VkQueryPipelineStatisticFlagBits</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="queries-timestamps"><a class="anchor" href="#queries-timestamps"></a>16.5. Timestamp Queries</h3>
<div class="paragraph">
<p><em>Timestamps</em> provide applications with a mechanism for timing the execution
of commands.
A timestamp is an integer value generated by the <code>VkPhysicalDevice</code>.
Unlike other queries, timestamps do not operate over a range, and so do not
use <a href="#vkCmdBeginQuery">vkCmdBeginQuery</a> or <a href="#vkCmdEndQuery">vkCmdEndQuery</a>.
The mechanism is built around a set of commands that allow the application
to tell the <code>VkPhysicalDevice</code> to write timestamp values to a
<a href="#queries-pools">query pool</a> and then either read timestamp values on the
host (using <a href="#vkGetQueryPoolResults">vkGetQueryPoolResults</a>) or copy timestamp values to a
<code>VkBuffer</code> (using <a href="#vkCmdCopyQueryPoolResults">vkCmdCopyQueryPoolResults</a>).
The application <strong class="purple">can</strong> then compute differences between timestamps to
determine execution time.</p>
</div>
<div class="paragraph">
<p>The number of valid bits in a timestamp value is determined by the
<code>VkQueueFamilyProperties</code>::<code>timestampValidBits</code> property of the
queue on which the timestamp is written.
Timestamps are supported on any queue which reports a non-zero value for
<code>timestampValidBits</code> via <a href="chap4.html#vkGetPhysicalDeviceQueueFamilyProperties">vkGetPhysicalDeviceQueueFamilyProperties</a>.
If the <a href="chap35.html#limits-timestampComputeAndGraphics"><code>timestampComputeAndGraphics</code></a> limit is <code>VK_TRUE</code>, timestamps are
supported by every queue family that supports either graphics or compute
operations (see <a href="chap4.html#VkQueueFamilyProperties">VkQueueFamilyProperties</a>).</p>
</div>
<div class="paragraph">
<p>The number of nanoseconds it takes for a timestamp value to be incremented
by 1 <strong class="purple">can</strong> be obtained from
<code>VkPhysicalDeviceLimits</code>::<code>timestampPeriod</code> after a call to
<code>vkGetPhysicalDeviceProperties</code>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To request a timestamp, call:</p>
</div>
<div id="vkCmdWriteTimestamp" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="directive">void</span> vkCmdWriteTimestamp(
    VkCommandBuffer                             commandBuffer,
    VkPipelineStageFlagBits                     pipelineStage,
    VkQueryPool                                 queryPool,
    uint32_t                                    query);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer into which the command will be
recorded.</p>
</li>
<li>
<p><code>pipelineStage</code> is one of the <a href="chap6.html#VkPipelineStageFlagBits">VkPipelineStageFlagBits</a>,
specifying a stage of the pipeline.</p>
</li>
<li>
<p><code>queryPool</code> is the query pool that will manage the timestamp.</p>
</li>
<li>
<p><code>query</code> is the query within the query pool that will contain the
timestamp.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkCmdWriteTimestamp</code> latches the value of the timer when all previous
commands have completed executing as far as the specified pipeline stage,
and writes the timestamp value to memory.
When the timestamp value is written, the availability status of the query is
set to available.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>If an implementation is unable to detect completion and latch the timer at
any specific stage of the pipeline, it <strong class="purple">may</strong> instead do so at any logically
later stage.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="#vkCmdCopyQueryPoolResults">vkCmdCopyQueryPoolResults</a> <strong class="purple">can</strong> then be called to copy the timestamp
value from the query pool into buffer memory, with ordering and
synchronization behavior equivalent to how other queries operate.
Timestamp values <strong class="purple">can</strong> also be retrieved from the query pool using
<a href="#vkGetQueryPoolResults">vkGetQueryPoolResults</a>.
As with other queries, the query <strong class="purple">must</strong> be reset using
<a href="#vkCmdResetQueryPool">vkCmdResetQueryPool</a>
before requesting the timestamp value be written to it.</p>
</div>
<div class="paragraph">
<p>While <code>vkCmdWriteTimestamp</code> <strong class="purple">can</strong> be called inside or outside of a render
pass instance, <a href="#vkCmdCopyQueryPoolResults">vkCmdCopyQueryPoolResults</a> <strong class="purple">must</strong> only be called outside
of a render pass instance.</p>
</div>
<div class="paragraph">
<p>Timestamps <strong class="purple">may</strong> only be meaningfully compared if they are written by
commands submitted to the same queue.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>An example of such a comparison is determining the execution time of a
sequence of commands.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If <code>vkCmdWriteTimestamp</code> is called while executing a render pass
instance that has multiview enabled, the timestamp uses <span class="eq">N</span> consecutive
query indices in the query pool (starting at <code>query</code>) where <span class="eq">N</span> is
the number of bits set in the view mask of the subpass the command is
executed in.
The resulting query values are determined by an implementation-dependent
choice of one of the following behaviors:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The first query is a timestamp value and (if more than one bit is set in
the view mask) zero is written to the remaining queries.
If two timestamps are written in the same subpass, the sum of the
execution time of all views between those commands is the difference
between the first query written by each command.</p>
</li>
<li>
<p>All <span class="eq">N</span> queries are timestamp values.
If two timestamps are written in the same subpass, the sum of the
execution time of all views between those commands is the sum of the
difference between corresponding queries written by each command.
The difference between corresponding queries <strong class="purple">may</strong> be the execution time
of a single view.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In either case, the application <strong class="purple">can</strong> sum the differences between all <span class="eq">N</span>
queries to determine the total execution time.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdWriteTimestamp-queryPool-01416" href="#VUID-vkCmdWriteTimestamp-queryPool-01416"></a>
<code>queryPool</code> <strong class="purple">must</strong> have been created with a <code>queryType</code> of
<code>VK_QUERY_TYPE_TIMESTAMP</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteTimestamp-queryPool-00828" href="#VUID-vkCmdWriteTimestamp-queryPool-00828"></a>
The query identified by <code>queryPool</code> and <code>query</code> <strong class="purple">must</strong> be
<em>unavailable</em></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteTimestamp-timestampValidBits-00829" href="#VUID-vkCmdWriteTimestamp-timestampValidBits-00829"></a>
The command pool’s queue family <strong class="purple">must</strong> support a non-zero
<code>timestampValidBits</code></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteTimestamp-None-00830" href="#VUID-vkCmdWriteTimestamp-None-00830"></a>
All queries used by the command <strong class="purple">must</strong> be unavailable</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteTimestamp-query-00831" href="#VUID-vkCmdWriteTimestamp-query-00831"></a>
If <code>vkCmdWriteTimestamp</code> is called within a render pass instance,
the sum of <code>query</code> and the number of bits set in the current
subpass’s view mask <strong class="purple">must</strong> be less than or equal to the number of queries
in <code>queryPool</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdWriteTimestamp-commandBuffer-parameter" href="#VUID-vkCmdWriteTimestamp-commandBuffer-parameter"></a> <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteTimestamp-pipelineStage-parameter" href="#VUID-vkCmdWriteTimestamp-pipelineStage-parameter"></a> <code>pipelineStage</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkPipelineStageFlagBits">VkPipelineStageFlagBits</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteTimestamp-queryPool-parameter" href="#VUID-vkCmdWriteTimestamp-queryPool-parameter"></a> <code>queryPool</code> <strong class="purple">must</strong> be a valid <a href="#VkQueryPool">VkQueryPool</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteTimestamp-commandBuffer-recording" href="#VUID-vkCmdWriteTimestamp-commandBuffer-recording"></a> <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap5.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdWriteTimestamp-commandBuffer-cmdpool" href="#VUID-vkCmdWriteTimestamp-commandBuffer-cmdpool"></a> The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdWriteTimestamp-commonparent" href="#VUID-vkCmdWriteTimestamp-commonparent"></a> Both of <code>commandBuffer</code>, and <code>queryPool</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap4.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap7.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap4.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap6.html#synchronization-pipeline-stages-types">Pipeline Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="queries-performance"><a class="anchor" href="#queries-performance"></a>16.6. Performance Queries</h3>
<div class="paragraph">
<p><em>Performance queries</em> provide applications with a mechanism for getting
performance counter information about the execution of command buffers,
render passes, and commands.</p>
</div>
<div class="paragraph">
<p>Each queue family advertises the performance counters that <strong class="purple">can</strong> be queried
on a queue of that family via a call to
<a href="chap4.html#vkEnumeratePhysicalDeviceQueueFamilyPerformanceQueryCountersKHR">vkEnumeratePhysicalDeviceQueueFamilyPerformanceQueryCountersKHR</a>.
Implementations <strong class="purple">may</strong> limit access to performance counters based on platform
requirements or only to specialized drivers for development purposes.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>This may include no performance counters being enumerated, or a reduced set.
Please refer to platform-specific documentation for guidance on any such
restrictions.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Performance queries use the existing <a href="#vkCmdBeginQuery">vkCmdBeginQuery</a> and
<a href="#vkCmdEndQuery">vkCmdEndQuery</a> to control what command buffers, render passes, or
commands to get performance information for.</p>
</div>
<div class="paragraph">
<p>Implementations <strong class="purple">may</strong> require multiple passes where the command buffer,
render passes, or commands being recorded are the same and are executed on
the same queue to record performance counter data.
This is achieved by submitting the same batch and providing a
<a href="chap5.html#VkPerformanceQuerySubmitInfoKHR">VkPerformanceQuerySubmitInfoKHR</a> structure containing a counter pass
index.
The number of passes required for a given performance query pool <strong class="purple">can</strong> be
queried via a call to
<a href="#vkGetPhysicalDeviceQueueFamilyPerformanceQueryPassesKHR">vkGetPhysicalDeviceQueueFamilyPerformanceQueryPassesKHR</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Command buffers created with
<code>VK_COMMAND_BUFFER_USAGE_ONE_TIME_SUBMIT_BIT</code> <strong class="purple">must</strong> not be re-submitted.
Changing command buffer usage bits <strong class="purple">may</strong> affect performance.
To avoid this, the application <strong class="purple">should</strong> re-record any command buffers with
the <code>VK_COMMAND_BUFFER_USAGE_ONE_TIME_SUBMIT_BIT</code> when multiple counter
passes are required.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Performance counter results from a performance query pool <strong class="purple">can</strong> be obtained
with the command <a href="#vkGetQueryPoolResults">vkGetQueryPoolResults</a>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Performance query results are returned in an array of
<code>VkPerformanceCounterResultKHR</code> unions containing the data associated
with each counter in the query, stored in the same order as the counters
supplied in <code>pCounterIndices</code> when creating the performance query.
The <a href="chap4.html#VkPerformanceCounterKHR">VkPerformanceCounterKHR</a>::<code>unit</code> enumeration specifies how to
parse the counter data.</p>
</div>
<div id="VkPerformanceCounterResultKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">union</span> VkPerformanceCounterResultKHR {
    int32_t     int32;
    int64_t     int64;
    uint32_t    uint32;
    uint64_t    uint64;
    <span class="predefined-type">float</span>       float32;
    <span class="predefined-type">double</span>      float64;
} VkPerformanceCounterResultKHR;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="profiling-lock"><a class="anchor" href="#profiling-lock"></a>16.6.1. Profiling Lock</h4>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To record and submit a command buffer that contains a performance query pool
the profiling lock <strong class="purple">must</strong> be held.
The profiling lock <strong class="purple">must</strong> be acquired prior to any call to
<a href="chap5.html#vkBeginCommandBuffer">vkBeginCommandBuffer</a> that will be using a performance query pool.
The profiling lock <strong class="purple">must</strong> be held while any command buffer that contains a
performance query pool is in the <em>recording</em>, <em>executable</em>, or <em>pending
state</em>.
To acquire the profiling lock, call:</p>
</div>
<div id="vkAcquireProfilingLockKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++">VkResult vkAcquireProfilingLockKHR(
    VkDevice                                    device,
    <span class="directive">const</span> VkAcquireProfilingLockInfoKHR*        pInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device to profile.</p>
</li>
<li>
<p><code>pInfo</code> is a pointer to a <code>VkAcquireProfilingLockInfoKHR</code>
structure which contains information about how the profiling is to be
acquired.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Implementations <strong class="purple">may</strong> allow multiple actors to hold the profiling lock
concurrently.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkAcquireProfilingLockKHR-device-parameter" href="#VUID-vkAcquireProfilingLockKHR-device-parameter"></a> <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap4.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkAcquireProfilingLockKHR-pInfo-parameter" href="#VUID-vkAcquireProfilingLockKHR-pInfo-parameter"></a> <code>pInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkAcquireProfilingLockInfoKHR">VkAcquireProfilingLockInfoKHR</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap2.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap2.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_TIMEOUT</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAcquireProfilingLockInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkAcquireProfilingLockInfoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">struct</span> VkAcquireProfilingLockInfoKHR {
    VkStructureType                   sType;
    <span class="directive">const</span> <span class="directive">void</span>*                       pNext;
    VkAcquireProfilingLockFlagsKHR    flags;
    uint64_t                          timeout;
} VkAcquireProfilingLockInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to an extension-specific structure.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
<li>
<p><code>timeout</code> indicates how long the function waits, in nanoseconds, if
the profiling lock is not available.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAcquireProfilingLockInfoKHR-sType-sType" href="#VUID-VkAcquireProfilingLockInfoKHR-sType-sType"></a> <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_ACQUIRE_PROFILING_LOCK_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkAcquireProfilingLockInfoKHR-pNext-pNext" href="#VUID-VkAcquireProfilingLockInfoKHR-pNext-pNext"></a> <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkAcquireProfilingLockInfoKHR-flags-zerobitmask" href="#VUID-VkAcquireProfilingLockInfoKHR-flags-zerobitmask"></a> <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>If <code>timeout</code> is 0, <code>vkAcquireProfilingLockKHR</code> will not block while
attempting to acquire the profling lock.
If <code>timeout</code> is <code>UINT64_MAX</code>, the function will not return until the
profiling lock was acquired.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkAcquireProfilingLockFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">enum</span> VkAcquireProfilingLockFlagBitsKHR {
    VK_ACQUIRE_PROFILING_LOCK_FLAG_BITS_MAX_ENUM_KHR = <span class="hex">0x7FFFFFFF</span>
} VkAcquireProfilingLockFlagBitsKHR;</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkAcquireProfilingLockFlagsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> VkFlags VkAcquireProfilingLockFlagsKHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#VkAcquireProfilingLockFlagsKHR">VkAcquireProfilingLockFlagsKHR</a> is a bitmask type for setting a mask,
but is currently reserved for future use.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To release the profiling lock, call:</p>
</div>
<div id="vkReleaseProfilingLockKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="directive">void</span> vkReleaseProfilingLockKHR(
    VkDevice                                    device);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device to cease profiling on.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkReleaseProfilingLockKHR-device-03235" href="#VUID-vkReleaseProfilingLockKHR-device-03235"></a>
The profiling lock of <code>device</code> <strong class="purple">must</strong> have been held via a previous
successful call to <a href="#vkAcquireProfilingLockKHR">vkAcquireProfilingLockKHR</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkReleaseProfilingLockKHR-device-parameter" href="#VUID-vkReleaseProfilingLockKHR-device-parameter"></a> <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap4.html#VkDevice">VkDevice</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div></div>
<div id="footer">
<div id="footer-text">
Version 1.0.139<br>
Last updated 2020-04-16 23:02:14 -0700
</div>
</div>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>


</body>
</html>