<!DOCTYPE html><html lang="en"><head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<meta name="author" content="The Khronos® Vulkan  Working Group">
<title>Vulkan® 1.3.254 - A Specification (with KHR extensions)</title>
<link rel="stylesheet" href="style0.css" type="text/css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="style1.css" type="text/css">
<link rel="stylesheet" href="style2.css" type="text/css">

<!-- dragged in by font-awesome css included by asciidoctor, but preloaded in this extension for convenience -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0" as="font" type="font/woff2" crossorigin="">

<!-- Note: Chrome needs crossorigin="" even for same-origin fonts -->
<link rel="preload" href="../katex/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Typewriter-Regular.woff2" as="font" type="font/woff2" crossorigin=""><link rel="stylesheet" href="../katex/katex.min.css">
<!--ChunkedSearchJSMarker-->
<link href="chunked.css?4" rel="stylesheet">
<script>var searchindexurl = 'search.index.js?4' + (document.title.replace(/[^0-9.]/g, ''));</script>
<script src="chunked.js?4"></script>
<link rel="stylesheet" href="style3.css" type="text/css">
<script>
    function hideElement(e){
        e.setAttribute("hidden", "");
        e.classList.add("hidden");
    }

    function unhideElement(e){
        e.classList.remove("hidden");
        e.removeAttribute("hidden");
    }

    function hideLoadableContent(){
        unhideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) hideElement(loadable);
    }

    function unhideLoadableContent(){
        hideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) unhideElement(loadable);
    }

    window.addEventListener("load", unhideLoadableContent);
</script>
<link rel="stylesheet" href="asciidoctor-chunker.css" type="text/css"></head>
<body class="book toc2 toc-left">
<div style="text-align: center;">
    <span class="image"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+Cjxzdmcgdmlld0JveD0iMCAwIDExNTAgMzI2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHN0eWxlPSJmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MS40MTQyMTsiPgogICAgPGcgaWQ9IkFydGJvYXJkMSIgdHJhbnNmb3JtPSJtYXRyaXgoMC45NTUxNSwwLDAsMC44ODgyODMsLTQwLjExNjMsLTMwLjIwMTYpIj4KICAgICAgICA8cmVjdCB4PSI0MiIgeT0iMzQiIHdpZHRoPSIxMjA0IiBoZWlnaHQ9IjM2NyIgc3R5bGU9ImZpbGw6bm9uZTsiLz4KICAgICAgICA8ZyB0cmFuc2Zvcm09Im1hdHJpeCgxLjA0Njk2LDAsMCwxLjEyNTc3LC00Ni45OTEzLC01MC40MzI1KSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik03MjQuMSwzODUuMDZMNjgzLjUzLDM4NS4wNkM2ODMuNTMsMzg1LjA2IDY4My41MywyODYuMDkgNjgzLjUzLDI1NS40QzY5Ni40OSwyNjIuNjIgNzEzLjYyLDI3NS45NCA3MjQuMSwyODguNzJMNzI0LjEsMzg1LjA2WiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxnPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTM4MS43NSwzODUuMDZMMzMxLjE3LDM4NS4wNkwyNjUuMTYsMTgxLjAzTDMxMS4xNywxODEuMDNMMzU2LjYxLDMyNC40OEwzNTcuMTgsMzI0LjQ4TDQwMy4xOCwxODEuMDNMNDQ5LjQ3LDE4MS4wM0wzODEuNzUsMzg1LjA2WiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNTg1LjUxLDM4NS4wNkw1NDYuOTMsMzg1LjA2TDU0Ni45MywzNjQuNDlMNTQ2LjA4LDM2NC40OUM1NDAuOTMsMzczLjA3IDUzNC4yNywzNzkuMjYgNTI2LjA3LDM4My4wN0M1MTcuODgsMzg2Ljg4IDUwOS41LDM4OC43OCA1MDAuOTIsMzg4Ljc4QzQ5MC4wNiwzODguNzggNDgxLjE2LDM4Ny4zNSA0NzQuMiwzODQuNUM0NjcuMjUsMzgxLjY1IDQ2MS43NywzNzcuNTkgNDU3Ljc3LDM3Mi4zNkM0NTMuNzYsMzY3LjEyIDQ1MC45NSwzNjAuNzQgNDQ5LjMzLDM1My4yMUM0NDcuNzIsMzQ1LjY5IDQ0Ni45MSwzMzcuMzUgNDQ2LjkxLDMyOC4yMUw0NDYuOTEsMjM3LjMzTDQ4Ny40OSwyMzcuMzNMNDg3LjQ5LDMyMC43N0M0ODcuNDksMzMyLjk2IDQ4OS40LDM0Mi4wNiA0OTMuMjEsMzQ4LjA2QzQ5Ny4wMiwzNTQuMDcgNTAzLjc4LDM1Ny4wNiA1MTMuNSwzNTcuMDZDNTI0LjU1LDM1Ny4wNiA1MzIuNTUsMzUzLjc4IDUzNy41LDM0Ny4yQzU0Mi40NiwzNDAuNjIgNTQ0LjkzLDMyOS44MSA1NDQuOTMsMzE0Ljc2TDU0NC45MywyMzcuMzJMNTg1LjUyLDIzNy4zMkw1ODUuNTIsMzg1LjA2TDU4NS41MSwzODUuMDZaIiBzdHlsZT0iZmlsbDpyZ2IoMTcyLDIyLDQ0KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8cGF0aCBkPSJNNzMwLjg0LDI5Ni4xOUw3MzAuNzQsMjkwLjQ3TDc4MS44OSwyMzcuMzNMODI5LjkxLDIzNy4zM0w3NzQuMTgsMjkxLjYyTDgzNi4xOSwzODUuMDZMNzg3LjA0LDM4NS4wNkw3MzAuODQsMjk2LjE5WiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik04NDMuNjIsMjgyLjc2Qzg0NC4xOSwyNzMuMjQgODQ2LjU4LDI2NS4zMyA4NTAuNzcsMjU5LjA0Qzg1NC45NiwyNTIuNzUgODYwLjI5LDI0Ny43MSA4NjYuNzcsMjQzLjlDODczLjI1LDI0MC4wOSA4ODAuNTQsMjM3LjM3IDg4OC42NCwyMzUuNzZDODk2LjczLDIzNC4xNCA5MDQuODgsMjMzLjMzIDkxMy4wNywyMzMuMzNDOTIwLjUsMjMzLjMzIDkyOC4wMiwyMzMuODUgOTM1LjY0LDIzNC45Qzk0My4yNywyMzUuOTUgOTUwLjIxLDIzOCA5NTYuNSwyNDEuMDVDOTYyLjc4LDI0NC4xIDk2Ny45MywyNDguMzQgOTcxLjk0LDI1My43NkM5NzUuOTQsMjU5LjE5IDk3Ny45NCwyNjYuMzggOTc3Ljk0LDI3NS4zNEw5NzcuOTQsMzUyLjIxQzk3Ny45NCwzNTguODggOTc4LjMyLDM2NS4yNyA5NzkuMDgsMzcxLjM2Qzk3OS44NCwzNzcuNDYgOTgxLjE4LDM4Mi4wMyA5ODMuMDksMzg1LjA4TDk0MS45NCwzODUuMDhDOTQxLjE4LDM4Mi44IDk0MC41NiwzODAuNDYgOTQwLjA4LDM3OC4wOEM5MzkuNjEsMzc1LjcgOTM5LjI3LDM3My4yOCA5MzkuMDgsMzcwLjc5QzkzMi42LDM3Ny40NyA5MjQuOTcsMzgyLjEzIDkxNi4yMSwzODQuOEM5MDcuNDUsMzg3LjQ2IDg5OC40OSwzODguOCA4ODkuMzUsMzg4LjhDODgyLjMsMzg4LjggODc1LjcyLDM4Ny45NCA4NjkuNjQsMzg2LjIzQzg2My41NCwzODQuNTIgODU4LjIsMzgxLjg1IDg1My42NCwzNzguMjNDODQ5LjA2LDM3NC42MSA4NDUuNDgsMzcwLjA0IDg0Mi45MiwzNjQuNTFDODQwLjM1LDM1OC45OSA4MzkuMDYsMzUyLjQyIDgzOS4wNiwzNDQuOEM4MzkuMDYsMzM2LjQyIDg0MC41NCwzMjkuNTEgODQzLjQ5LDMyNC4wOEM4NDYuNDUsMzE4LjY1IDg1MC4yNSwzMTQuMzIgODU0LjkzLDMxMS4wOEM4NTkuNiwzMDcuODQgODY0LjkzLDMwNS40MSA4NzAuOTMsMzAzLjc5Qzg3Ni45MywzMDIuMTcgODgyLjk4LDMwMC44OCA4ODkuMDcsMjk5LjkzQzg5NS4xNywyOTguOTkgOTAxLjE3LDI5OC4yMiA5MDcuMDgsMjk3LjY1QzkxMi45OSwyOTcuMDggOTE4LjIyLDI5Ni4yMiA5MjIuNzksMjk1LjA4QzkyNy4zNywyOTMuOTMgOTMwLjk4LDI5Mi4yNyA5MzMuNjUsMjkwLjA3QzkzNi4zMiwyODcuODggOTM3LjU2LDI4NC42OSA5MzcuMzcsMjgwLjVDOTM3LjM3LDI3Ni4xMiA5MzYuNjUsMjcyLjY0IDkzNS4yMiwyNzAuMDdDOTMzLjc5LDI2Ny41IDkzMS44OSwyNjUuNSA5MjkuNTEsMjY0LjA3QzkyNy4xMywyNjIuNjQgOTI0LjM3LDI2MS42OSA5MjEuMjIsMjYxLjIxQzkxOC4wNywyNjAuNzMgOTE0LjcsMjYwLjQ5IDkxMS4wOCwyNjAuNDlDOTAzLjA4LDI2MC40OSA4OTYuNzksMjYyLjIgODkyLjIyLDI2NS42NEM4ODcuNjUsMjY5LjA3IDg4NC45OCwyNzQuNzggODg0LjIyLDI4Mi43OUw4NDMuNjIsMjgyLjc5TDg0My42MiwyODIuNzZaTTkzNy4zNSwzMTIuNzdDOTM1LjYzLDMxNC4zIDkzMy40OSwzMTUuNDggOTMwLjkyLDMxNi4zNEM5MjguMzUsMzE3LjIxIDkyNS41OSwzMTcuOTIgOTIyLjYzLDMxOC40OUM5MTkuNjgsMzE5LjA2IDkxNi41OCwzMTkuNTQgOTEzLjM1LDMxOS45MkM5MTAuMTEsMzIwLjMgOTA2Ljg3LDMyMC43NyA5MDMuNjMsMzIxLjM1QzkwMC41OCwzMjEuOTIgODk3LjU4LDMyMi42OSA4OTQuNjMsMzIzLjYzQzg5MS42OCwzMjQuNTkgODg5LjEsMzI1Ljg3IDg4Ni45MSwzMjcuNDlDODg0LjcyLDMyOS4xMSA4ODIuOTYsMzMxLjE2IDg4MS42MiwzMzMuNjNDODgwLjI5LDMzNi4xMSA4NzkuNjIsMzM5LjI1IDg3OS42MiwzNDMuMDZDODc5LjYyLDM0Ni42OCA4ODAuMjksMzQ5LjczIDg4MS42MiwzNTIuMkM4ODIuOTYsMzU0LjY4IDg4NC43NywzNTYuNjMgODg3LjA1LDM1OC4wNkM4ODkuMzQsMzU5LjQ5IDg5MiwzNjAuNDkgODk1LjA1LDM2MS4wNkM4OTguMSwzNjEuNjMgOTAxLjI0LDM2MS45MSA5MDQuNDgsMzYxLjkxQzkxMi40OCwzNjEuOTEgOTE4LjY4LDM2MC41OCA5MjMuMDYsMzU3LjkyQzkyNy40NCwzNTUuMjUgOTMwLjY5LDM1Mi4wNiA5MzIuNzcsMzQ4LjM0QzkzNC44NiwzNDQuNjMgOTM2LjE2LDM0MC44NyA5MzYuNjIsMzM3LjA2QzkzNy4xLDMzMy4yNSA5MzcuMzMsMzMwLjIgOTM3LjM0LDMyNy45Mkw5MzcuMzQsMzEyLjc3TDkzNy4zNSwzMTIuNzdaIiBzdHlsZT0iZmlsbDpyZ2IoMTcyLDIyLDQ0KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTEwMDQuMjEsMjM3LjMzTDEwNDIuOCwyMzcuMzNMMTA0Mi44LDI1Ny45TDEwNDMuNjUsMjU3LjlDMTA0OC43OSwyNDkuMzMgMTA1NS40NiwyNDMuMDkgMTA2My42NSwyMzkuMTlDMTA3MS44NCwyMzUuMjggMTA4MC4yMywyMzMuMzMgMTA4OC43OSwyMzMuMzNDMTA5OS42NiwyMzMuMzMgMTEwOC41NiwyMzQuODEgMTExNS41MiwyMzcuNzZDMTEyMi40NywyNDAuNzIgMTEyNy45NCwyNDQuODEgMTEzMS45NSwyNTAuMDVDMTEzNS45NSwyNTUuMjkgMTEzOC43NiwyNjEuNjcgMTE0MC4zOCwyNjkuMTlDMTE0MiwyNzYuNzIgMTE0Mi44MSwyODUuMDUgMTE0Mi44MSwyOTQuMkwxMTQyLjgxLDM4NS4wN0wxMTAyLjI0LDM4NS4wN0wxMTAyLjI0LDMwMS42M0MxMTAyLjI0LDI4OS40MyAxMTAwLjMzLDI4MC4zNCAxMDk2LjUzLDI3NC4zNEMxMDkyLjcxLDI2OC4zNCAxMDg1Ljk1LDI2NS4zNCAxMDc2LjIzLDI2NS4zNEMxMDY1LjE4LDI2NS4zNCAxMDU3LjE5LDI2OC42MyAxMDUyLjIzLDI3NS4yQzEwNDcuMjcsMjgxLjc2IDEwNDQuOCwyOTIuNTggMTA0NC44LDMwNy42M0wxMDQ0LjgsMzg1LjA3TDEwMDQuMjIsMzg1LjA3TDEwMDQuMjIsMjM3LjMzTDEwMDQuMjEsMjM3LjMzWiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik02MTIuMzcsMjExLjg0TDYxMi4zNywzODUuMDdMNjUyLjk1LDM4NS4wN0w2NTIuOTUsMjM0LjIxQzYzOS45MywyMjYuMjMgNjI2LjM2LDIxOC43NCA2MTIuMzcsMjExLjg0WiIgc3R5bGU9ImZpbGw6cmdiKDE3MiwyMiw0NCk7ZmlsbC1ydWxlOm5vbnplcm87Ii8+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xOTguNDMsMjE5LjIxQzIyMS45NSwxNTAuMzIgMzYyLjU4LDEyNS4wNSA1MTIuNTgsMTYyLjc4QzYwMi41NSwxODUuNCA2NzYuMDcsMjI5LjI4IDcyNC4wOSwyNzIuNjdDNzAyLjMsMjE1LjEyIDU5Ni42NSwxMzMuMDggNDUxLjE4LDEwNC45NkMyODYuNyw3My4xNiAxMjQuNDcsMTAxLjExIDEwNC4zOSwxNzQuMUM4OS44OSwyMjYuODMgMTUzLjU3LDI4OC42IDI1Mi4wNSwzMzAuODRDMjA3LjgxLDI5NS4wMiAxODYuMjksMjU0Ljc4IDE5OC40MywyMTkuMjFaIiBzdHlsZT0iZmlsbDpyZ2IoMTcyLDIyLDQ0KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICAgICAgPHBhdGggZD0iTTcyNC4xNiwyNDcuNjJMNzI0LjE2LDE4MS4wM0w2ODMuNTcsMTgxLjAzTDY4My41NywyMDEuMjVDNzAwLjg4LDIxNi43MSA3MTQuNjEsMjMyLjQ1IDcyNC4xNiwyNDcuNjJaIiBzdHlsZT0iZmlsbDpyZ2IoMTcyLDIyLDQ0KTtmaWxsLXJ1bGU6bm9uemVybzsiLz4KICAgICAgICA8L2c+CiAgICAgICAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMS4wNDY5NiwwLDAsMS4xMjU3NywtNDYuOTkxMywtNTAuNDMyNSkiPgogICAgICAgICAgICA8cGF0aCBkPSJNMTIxNC45OCwzNjMuNDNDMTIxNC45OCwzNzUuNjkgMTIwNS4zNSwzODUuMzIgMTE5Mi44MywzODUuMzJDMTE4MC40MywzODUuMzIgMTE3MC41NCwzNzUuNjkgMTE3MC41NCwzNjMuNDNDMTE3MC41NCwzNTEuNDMgMTE4MC40MywzNDEuOCAxMTkyLjgzLDM0MS44QzEyMDUuMzUsMzQxLjggMTIxNC45OCwzNTEuNDMgMTIxNC45OCwzNjMuNDNaTTExNzYuMDgsMzYzLjQzQzExNzYuMDgsMzczLjA2IDExODMuMiwzODAuNyAxMTkyLjk2LDM4MC43QzEyMDIuNDUsMzgwLjcgMTIwOS40NCwzNzMuMDUgMTIwOS40NCwzNjMuNTZDMTIwOS40NCwzNTMuOTMgMTIwMi40NSwzNDYuMTUgMTE5Mi44MiwzNDYuMTVDMTE4My4yLDM0Ni4xNiAxMTc2LjA4LDM1My45NCAxMTc2LjA4LDM2My40M1pNMTE4OS4zOSwzNzQuNzdMMTE4NC4zOCwzNzQuNzdMMTE4NC4zOCwzNTMuMTRDMTE4Ni4zNiwzNTIuNzQgMTE4OS4xMywzNTIuNDggMTE5Mi42OSwzNTIuNDhDMTE5Ni43OCwzNTIuNDggMTE5OC42MiwzNTMuMTQgMTIwMC4yMSwzNTQuMDZDMTIwMS40LDM1NC45OCAxMjAyLjMyLDM1Ni43IDEyMDIuMzIsMzU4LjgxQzEyMDIuMzIsMzYxLjE4IDEyMDAuNDcsMzYzLjAzIDExOTcuODQsMzYzLjgyTDExOTcuODQsMzY0LjA4QzExOTkuOTUsMzY0Ljg3IDEyMDEuMTQsMzY2LjQ1IDEyMDEuOCwzNjkuMzVDMTIwMi40NiwzNzIuNjUgMTIwMi44NSwzNzMuOTcgMTIwMy4zOCwzNzQuNzZMMTE5Ny45NywzNzQuNzZDMTE5Ny4zMSwzNzMuOTcgMTE5Ni45MiwzNzEuOTkgMTE5Ni4yNiwzNjkuNDlDMTE5NS44NiwzNjcuMTIgMTE5NC41NSwzNjYuMDYgMTE5MS43OCwzNjYuMDZMMTE4OS40MSwzNjYuMDZMMTE4OS40MSwzNzQuNzdMMTE4OS4zOSwzNzQuNzdaTTExODkuNTMsMzYyLjUxTDExOTEuOSwzNjIuNTFDMTE5NC42NywzNjIuNTEgMTE5Ni45MSwzNjEuNTkgMTE5Ni45MSwzNTkuMzRDMTE5Ni45MSwzNTcuMzYgMTE5NS40NiwzNTYuMDQgMTE5Mi4yOSwzNTYuMDRDMTE5MC45NywzNTYuMDQgMTE5MC4wNSwzNTYuMTcgMTE4OS41MiwzNTYuM0wxMTg5LjUyLDM2Mi41MUwxMTg5LjUzLDM2Mi41MVoiIHN0eWxlPSJmaWxsOnJnYigxNzIsMjIsNDQpO2ZpbGwtcnVsZTpub256ZXJvOyIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+Cg==" alt="Vulkan Logo" width="50%">
    </span>
</div>
<div id="header">
<h1>Vulkan<sup>®</sup> 1.3.254 - A Specification (with KHR extensions)</h1>
<div class="details">
<span id="author" class="author">The Khronos<sup>®</sup> Vulkan  Working Group</span><br>
<span id="revnumber">version 1.3.254,</span>
<span id="revdate">2023-06-16 13:19:14Z</span>
<br><span id="revremark">from git branch: github-main commit: 7c839d85b51cb639444183c586e53b2b2ab21e2e</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="index.html">Titlepage</a></li><li><a href="chap1.html">1. Preamble</a></li>
<li><a href="chap2.html">2. Introduction</a>
<ul class="sectlevel2">
<li><a href="chap2.html#introduction-conventions">2.1. Document Conventions</a></li>
</ul>
</li>
<li><a href="chap3.html">3. Fundamentals</a>
<ul class="sectlevel2">
<li><a href="chap3.html#fundamentals-host-environment">3.1. Host and Device Environment</a></li>
<li><a href="chap3.html#fundamentals-execmodel">3.2. Execution Model</a></li>
<li><a href="chap3.html#fundamentals-objectmodel-overview">3.3. Object Model</a></li>
<li><a href="chap3.html#fundamentals-abi">3.4. Application Binary Interface</a></li>
<li><a href="chap3.html#fundamentals-commandsyntax">3.5. Command Syntax and Duration</a></li>
<li><a href="chap3.html#fundamentals-threadingbehavior">3.6. Threading Behavior</a></li>
<li><a href="chap3.html#fundamentals-validusage">3.7. Valid Usage</a></li>
<li><a href="chap3.html#fundamentals-returncodes">3.8. <code>VkResult</code> Return Codes</a></li>
<li><a href="chap3.html#fundamentals-numerics">3.9. Numeric Representation and Computation</a></li>
<li><a href="chap3.html#fundamentals-fixedconv">3.10. Fixed-Point Data Conversions</a></li>
<li><a href="chap3.html#fundamentals-common-objects">3.11. Common Object Types</a></li>
<li><a href="chap3.html#fundamentals-api-name-aliases">3.12. API Name Aliases</a></li>
</ul>
</li>
<li><a href="chap4.html">4. Initialization</a>
<ul class="sectlevel2">
<li><a href="chap4.html#initialization-functionpointers">4.1. Command Function Pointers</a></li>
<li><a href="chap4.html#initialization-instances">4.2. Instances</a></li>
</ul>
</li>
<li><a href="chap5.html">5. Devices and Queues</a>
<ul class="sectlevel2">
<li><a href="chap5.html#devsandqueues-physical-device-enumeration">5.1. Physical Devices</a></li>
<li><a href="chap5.html#devsandqueues-devices">5.2. Devices</a></li>
<li><a href="chap5.html#devsandqueues-queues">5.3. Queues</a></li>
</ul>
</li>
<li class="current"><a href="chap6.html">6. Command Buffers</a>
<ul class="sectlevel2">
<li class="current"><a href="chap6.html#commandbuffers-lifecycle">6.1. Command Buffer Lifecycle</a></li>
<li class="current"><a href="chap6.html#commandbuffers-pools">6.2. Command Pools</a></li>
<li class="current"><a href="chap6.html#commandbuffer-allocation">6.3. Command Buffer Allocation and Management</a></li>
<li class="current"><a href="chap6.html#commandbuffers-recording">6.4. Command Buffer Recording</a></li>
<li class="current"><a href="chap6.html#commandbuffers-submission">6.5. Command Buffer Submission</a></li>
<li class="current"><a href="chap6.html#commandbuffers-submission-progress">6.6. Queue Forward Progress</a></li>
<li class="current"><a href="chap6.html#commandbuffers-secondary">6.7. Secondary Command Buffer Execution</a></li>
<li class="current"><a href="chap6.html#commandbuffers-devicemask">6.8. Command Buffer Device Mask</a></li>
</ul>
</li>
<li><a href="chap7.html">7. Synchronization and Cache Control</a>
<ul class="sectlevel2">
<li><a href="chap7.html#synchronization-dependencies">7.1. Execution and Memory Dependencies</a></li>
<li><a href="chap7.html#synchronization-implicit">7.2. Implicit Synchronization Guarantees</a></li>
<li><a href="chap7.html#synchronization-fences">7.3. Fences</a></li>
<li><a href="chap7.html#synchronization-semaphores">7.4. Semaphores</a></li>
<li><a href="chap7.html#synchronization-events">7.5. Events</a></li>
<li><a href="chap7.html#synchronization-pipeline-barriers">7.6. Pipeline Barriers</a></li>
<li><a href="chap7.html#synchronization-memory-barriers">7.7. Memory Barriers</a></li>
<li><a href="chap7.html#synchronization-wait-idle">7.8. Wait Idle Operations</a></li>
<li><a href="chap7.html#synchronization-submission-host-writes">7.9. Host Write Ordering Guarantees</a></li>
<li><a href="chap7.html#synchronization-device-group">7.10. Synchronization and Multiple Physical Devices</a></li>
</ul>
</li>
<li><a href="chap8.html">8. Render Pass</a>
<ul class="sectlevel2">
<li><a href="chap8.html#renderpass-creation">8.1. Render Pass Creation</a></li>
<li><a href="chap8.html#renderpass-compatibility">8.2. Render Pass Compatibility</a></li>
<li><a href="chap8.html#_framebuffers">8.3. Framebuffers</a></li>
<li><a href="chap8.html#renderpass-commands">8.4. Render Pass Commands</a></li>
</ul>
</li>
<li><a href="chap9.html">9. Shaders</a>
<ul class="sectlevel2">
<li><a href="chap9.html#shader-modules">9.1. Shader Modules</a></li>
<li><a href="chap9.html#shaders-binding">9.2. Binding Shaders</a></li>
<li><a href="chap9.html#shaders-execution">9.3. Shader Execution</a></li>
<li><a href="chap9.html#shaders-execution-memory-ordering">9.4. Shader Memory Access Ordering</a></li>
<li><a href="chap9.html#shaders-inputs">9.5. Shader Inputs and Outputs</a></li>
<li><a href="chap9.html#shaders-vertex">9.6. Vertex Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-control">9.7. Tessellation Control Shaders</a></li>
<li><a href="chap9.html#shaders-tessellation-evaluation">9.8. Tessellation Evaluation Shaders</a></li>
<li><a href="chap9.html#shaders-geometry">9.9. Geometry Shaders</a></li>
<li><a href="chap9.html#shaders-fragment">9.10. Fragment Shaders</a></li>
<li><a href="chap9.html#shaders-compute">9.11. Compute Shaders</a></li>
<li><a href="chap9.html#shaders-ray-generation">9.12. Ray Generation Shaders</a></li>
<li><a href="chap9.html#shaders-intersection">9.13. Intersection Shaders</a></li>
<li><a href="chap9.html#shaders-any-hit">9.14. Any-Hit Shaders</a></li>
<li><a href="chap9.html#shaders-closest-hit">9.15. Closest Hit Shaders</a></li>
<li><a href="chap9.html#shaders-miss">9.16. Miss Shaders</a></li>
<li><a href="chap9.html#shaders-callable">9.17. Callable Shaders</a></li>
<li><a href="chap9.html#shaders-interpolation-decorations">9.18. Interpolation decorations</a></li>
<li><a href="chap9.html#shaders-staticuse">9.19. Static Use</a></li>
<li><a href="chap9.html#shaders-scope">9.20. Scope</a></li>
<li><a href="chap9.html#shaders-group-operations">9.21. Group Operations</a></li>
<li><a href="chap9.html#shaders-quad-operations">9.22. Quad Group Operations</a></li>
<li><a href="chap9.html#shaders-derivative-operations">9.23. Derivative Operations</a></li>
<li><a href="chap9.html#shaders-helper-invocations">9.24. Helper Invocations</a></li>
</ul>
</li>
<li><a href="chap10.html">10. Pipelines</a>
<ul class="sectlevel2">
<li><a href="chap10.html#pipelines-compute">10.1. Compute Pipelines</a></li>
<li><a href="chap10.html#pipelines-graphics">10.2. Graphics Pipelines</a></li>
<li><a href="chap10.html#pipelines-ray-tracing">10.3. Ray Tracing Pipelines</a></li>
<li><a href="chap10.html#pipelines-destruction">10.4. Pipeline Destruction</a></li>
<li><a href="chap10.html#pipelines-multiple">10.5. Multiple Pipeline Creation</a></li>
<li><a href="chap10.html#pipelines-pipeline-derivatives">10.6. Pipeline Derivatives</a></li>
<li><a href="chap10.html#pipelines-cache">10.7. Pipeline Cache</a></li>
<li><a href="chap10.html#pipelines-specialization-constants">10.8. Specialization Constants</a></li>
<li><a href="chap10.html#pipelines-library">10.9. Pipeline Libraries</a></li>
<li><a href="chap10.html#pipelines-binding">10.10. Pipeline Binding</a></li>
<li><a href="chap10.html#pipelines-dynamic-state">10.11. Dynamic State</a></li>
<li><a href="chap10.html#pipelines-shader-information">10.12. Pipeline Properties and Shader Information</a></li>
<li><a href="chap10.html#pipelines-creation-feedback">10.13. Pipeline Creation Feedback</a></li>
</ul>
</li>
<li><a href="chap11.html">11. Memory Allocation</a>
<ul class="sectlevel2">
<li><a href="chap11.html#memory-host">11.1. Host Memory</a></li>
<li><a href="chap11.html#memory-device">11.2. Device Memory</a></li>
</ul>
</li>
<li><a href="chap12.html">12. Resource Creation</a>
<ul class="sectlevel2">
<li><a href="chap12.html#resources-buffers">12.1. Buffers</a></li>
<li><a href="chap12.html#resources-buffer-views">12.2. Buffer Views</a></li>
<li><a href="chap12.html#resources-images">12.3. Images</a></li>
<li><a href="chap12.html#resources-image-layouts">12.4. Image Layouts</a></li>
<li><a href="chap12.html#resources-image-views">12.5. Image Views</a></li>
<li><a href="chap12.html#resources-acceleration-structures">12.6. Acceleration Structures</a></li>
<li><a href="chap12.html#resources-association">12.7. Resource Memory Association</a></li>
<li><a href="chap12.html#resources-sharing">12.8. Resource Sharing Mode</a></li>
<li><a href="chap12.html#resources-memory-aliasing">12.9. Memory Aliasing</a></li>
</ul>
</li>
<li><a href="chap13.html">13. Samplers</a>
<ul class="sectlevel2">
<li><a href="chap13.html#samplers-YCbCr-conversion">13.1. Sampler Y′C<sub>B</sub>C<sub>R</sub> conversion</a></li>
</ul>
</li>
<li><a href="chap14.html">14. Resource Descriptors</a>
<ul class="sectlevel2">
<li><a href="chap14.html#descriptorsets-types">14.1. Descriptor Types</a></li>
<li><a href="chap14.html#descriptorsets-sets">14.2. Descriptor Sets</a></li>
<li><a href="chap14.html#descriptorsets-physical-storage-buffer">14.3. Physical Storage Buffer Access</a></li>
</ul>
</li>
<li><a href="chap15.html">15. Shader Interfaces</a>
<ul class="sectlevel2">
<li><a href="chap15.html#interfaces-iointerfaces">15.1. Shader Input and Output Interfaces</a></li>
<li><a href="chap15.html#interfaces-vertexinput">15.2. Vertex Input Interface</a></li>
<li><a href="chap15.html#interfaces-fragmentoutput">15.3. Fragment Output Interface</a></li>
<li><a href="chap15.html#interfaces-inputattachment">15.4. Fragment Input Attachment Interface</a></li>
<li><a href="chap15.html#interfaces-raypipeline">15.5. Ray Tracing Pipeline Interface</a></li>
<li><a href="chap15.html#interfaces-resources">15.6. Shader Resource Interface</a></li>
<li><a href="chap15.html#interfaces-builtin-variables">15.7. Built-In Variables</a></li>
</ul>
</li>
<li><a href="chap16.html">16. Image Operations</a>
<ul class="sectlevel2">
<li><a href="chap16.html#_image_operations_overview">16.1. Image Operations Overview</a></li>
<li><a href="chap16.html#_conversion_formulas">16.2. Conversion Formulas</a></li>
<li><a href="chap16.html#_texel_input_operations">16.3. Texel Input Operations</a></li>
<li><a href="chap16.html#_texel_output_operations">16.4. Texel Output Operations</a></li>
<li><a href="chap16.html#textures-normalized-operations">16.5. Normalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#_unnormalized_texel_coordinate_operations">16.6. Unnormalized Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-integer-coordinate-operations">16.7. Integer Texel Coordinate Operations</a></li>
<li><a href="chap16.html#textures-sample-operations">16.8. Image Sample Operations</a></li>
<li><a href="chap16.html#textures-instructions">16.9. Image Operation Steps</a></li>
<li><a href="chap16.html#textures-queries">16.10. Image Query Instructions</a></li>
</ul>
</li>
<li><a href="chap17.html">17. Queries</a>
<ul class="sectlevel2">
<li><a href="chap17.html#queries-pools">17.1. Query Pools</a></li>
<li><a href="chap17.html#queries-operation">17.2. Query Operation</a></li>
<li><a href="chap17.html#queries-occlusion">17.3. Occlusion Queries</a></li>
<li><a href="chap17.html#queries-pipestats">17.4. Pipeline Statistics Queries</a></li>
<li><a href="chap17.html#queries-timestamps">17.5. Timestamp Queries</a></li>
<li><a href="chap17.html#queries-performance">17.6. Performance Queries</a></li>
<li><a href="chap17.html#queries-result-status-only">17.7. Result Status Queries</a></li>
<li><a href="chap17.html#queries-video-encode-feedback">17.8. Video Encode Feedback Queries</a></li>
</ul>
</li>
<li><a href="chap18.html">18. Clear Commands</a>
<ul class="sectlevel2">
<li><a href="chap18.html#clears-outside">18.1. Clearing Images Outside A Render Pass Instance</a></li>
<li><a href="chap18.html#clears-inside">18.2. Clearing Images Inside A Render Pass Instance</a></li>
<li><a href="chap18.html#clears-values">18.3. Clear Values</a></li>
<li><a href="chap18.html#clears-filling-buffers">18.4. Filling Buffers</a></li>
<li><a href="chap18.html#clears-updating-buffers">18.5. Updating Buffers</a></li>
</ul>
</li>
<li><a href="chap19.html">19. Copy Commands</a>
<ul class="sectlevel2">
<li><a href="chap19.html#copies-buffers">19.1. Copying Data Between Buffers</a></li>
<li><a href="chap19.html#copies-images">19.2. Copying Data Between Images</a></li>
<li><a href="chap19.html#copies-buffers-images">19.3. Copying Data Between Buffers and Images</a></li>
<li><a href="chap19.html#copies-imagescaling">19.4. Image Copies with Scaling</a></li>
<li><a href="chap19.html#copies-resolve">19.5. Resolving Multisample Images</a></li>
</ul>
</li>
<li><a href="chap20.html">20. Drawing Commands</a>
<ul class="sectlevel2">
<li><a href="chap20.html#drawing-primitive-topologies">20.1. Primitive Topologies</a></li>
<li><a href="chap20.html#drawing-primitive-order">20.2. Primitive Order</a></li>
<li><a href="chap20.html#drawing-primitive-shading">20.3. Programmable Primitive Shading</a></li>
</ul>
</li>
<li><a href="chap21.html">21. Fixed-Function Vertex Processing</a>
<ul class="sectlevel2">
<li><a href="chap21.html#fxvertex-attrib">21.1. Vertex Attributes</a></li>
<li><a href="chap21.html#fxvertex-input">21.2. Vertex Input Description</a></li>
<li><a href="chap21.html#fxvertex-input-address-calculation">21.3. Vertex Input Address Calculation</a></li>
</ul>
</li>
<li><a href="chap22.html">22. Tessellation</a>
<ul class="sectlevel2">
<li><a href="chap22.html#_tessellator">22.1. Tessellator</a></li>
<li><a href="chap22.html#_tessellator_patch_discard">22.2. Tessellator Patch Discard</a></li>
<li><a href="chap22.html#tessellation-tessellator-spacing">22.3. Tessellator Spacing</a></li>
<li><a href="chap22.html#tessellation-primitive-order">22.4. Tessellation Primitive Ordering</a></li>
<li><a href="chap22.html#tessellation-vertex-winding-order">22.5. Tessellator Vertex Winding Order</a></li>
<li><a href="chap22.html#tessellation-triangle-tessellation">22.6. Triangle Tessellation</a></li>
<li><a href="chap22.html#tessellation-quad-tessellation">22.7. Quad Tessellation</a></li>
<li><a href="chap22.html#tessellation-isoline-tessellation">22.8. Isoline Tessellation</a></li>
<li><a href="chap22.html#tessellation-point-mode">22.9. Tessellation Point Mode</a></li>
<li><a href="chap22.html#_tessellation_pipeline_state">22.10. Tessellation Pipeline State</a></li>
</ul>
</li>
<li><a href="chap23.html">23. Geometry Shading</a>
<ul class="sectlevel2">
<li><a href="chap23.html#geometry-input">23.1. Geometry Shader Input Primitives</a></li>
<li><a href="chap23.html#geometry-output">23.2. Geometry Shader Output Primitives</a></li>
<li><a href="chap23.html#geometry-invocations">23.3. Multiple Invocations of Geometry Shaders</a></li>
<li><a href="chap23.html#geometry-ordering">23.4. Geometry Shader Primitive Ordering</a></li>
</ul>
</li>
<li><a href="chap24.html">24. Fixed-Function Vertex Post-Processing</a>
<ul class="sectlevel2">
<li><a href="chap24.html#vertexpostproc-flatshading">24.1. Flat Shading</a></li>
<li><a href="chap24.html#vertexpostproc-clipping">24.2. Primitive Clipping</a></li>
<li><a href="chap24.html#vertexpostproc-clipping-shader-outputs">24.3. Clipping Shader Outputs</a></li>
<li><a href="chap24.html#vertexpostproc-coord-transform">24.4. Coordinate Transformations</a></li>
<li><a href="chap24.html#vertexpostproc-viewport">24.5. Controlling the Viewport</a></li>
</ul>
</li>
<li><a href="chap25.html">25. Rasterization</a>
<ul class="sectlevel2">
<li><a href="chap25.html#primsrast-discard">25.1. Discarding Primitives Before Rasterization</a></li>
<li><a href="chap25.html#primsrast-order">25.2. Rasterization Order</a></li>
<li><a href="chap25.html#primsrast-multisampling">25.3. Multisampling</a></li>
<li><a href="chap25.html#primsrast-fragment-shading-rate">25.4. Fragment Shading Rates</a></li>
<li><a href="chap25.html#primsrast-sampleshading">25.5. Sample Shading</a></li>
<li><a href="chap25.html#primsrast-barycentric">25.6. Barycentric Interpolation</a></li>
<li><a href="chap25.html#primsrast-points">25.7. Points</a></li>
<li><a href="chap25.html#primsrast-lines">25.8. Line Segments</a></li>
<li><a href="chap25.html#primsrast-polygons">25.9. Polygons</a></li>
</ul>
</li>
<li><a href="chap26.html">26. Fragment Operations</a>
<ul class="sectlevel2">
<li><a href="chap26.html#fragops-scissor">26.1. Scissor Test</a></li>
<li><a href="chap26.html#fragops-samplemask">26.2. Sample Mask Test</a></li>
<li><a href="chap26.html#fragops-shader">26.3. Fragment Shading</a></li>
<li><a href="chap26.html#fragops-covg">26.4. Multisample Coverage</a></li>
<li><a href="chap26.html#fragops-ds-state">26.5. Depth and Stencil Operations</a></li>
<li><a href="chap26.html#fragops-dbt">26.6. Depth Bounds Test</a></li>
<li><a href="chap26.html#fragops-stencil">26.7. Stencil Test</a></li>
<li><a href="chap26.html#fragops-depth">26.8. Depth Test</a></li>
<li><a href="chap26.html#fragops-samplecount">26.9. Sample Counting</a></li>
<li><a href="chap26.html#fragops-coverage-reduction">26.10. Coverage Reduction</a></li>
</ul>
</li>
<li><a href="chap27.html">27. The Framebuffer</a>
<ul class="sectlevel2">
<li><a href="chap27.html#framebuffer-blending">27.1. Blending</a></li>
<li><a href="chap27.html#framebuffer-logicop">27.2. Logical Operations</a></li>
<li><a href="chap27.html#framebuffer-color-write-mask">27.3. Color Write Mask</a></li>
</ul>
</li>
<li><a href="chap28.html">28. Dispatching Commands</a></li>
<li><a href="chap29.html">29. Sparse Resources</a>
<ul class="sectlevel2">
<li><a href="chap29.html#sparsememory-sparseresourcefeatures">29.1. Sparse Resource Features</a></li>
<li><a href="chap29.html#sparsememory-fully-resident">29.2. Sparse Buffers and Fully-Resident Images</a></li>
<li><a href="chap29.html#sparsememory-partially-resident-buffers">29.3. Sparse Partially-Resident Buffers</a></li>
<li><a href="chap29.html#sparsememory-partially-resident-images">29.4. Sparse Partially-Resident Images</a></li>
<li><a href="chap29.html#sparsememory-sparse-memory-aliasing">29.5. Sparse Memory Aliasing</a></li>
<li><a href="chap29.html#_sparse_resource_implementation_guidelines_informative">29.6. Sparse Resource Implementation Guidelines (Informative)</a></li>
<li><a href="chap29.html#sparsememory-resourceapi">29.7. Sparse Resource API</a></li>
</ul>
</li>
<li><a href="chap30.html">30. Window System Integration (WSI)</a>
<ul class="sectlevel2">
<li><a href="chap30.html#_wsi_platform">30.1. WSI Platform</a></li>
<li><a href="chap30.html#_wsi_surface">30.2. WSI Surface</a></li>
<li><a href="chap30.html#display">30.3. Presenting Directly to Display Devices</a></li>
<li><a href="chap30.html#_querying_for_wsi_support">30.4. Querying for WSI Support</a></li>
<li><a href="chap30.html#_surface_queries">30.5. Surface Queries</a></li>
<li><a href="chap30.html#_device_group_queries">30.6. Device Group Queries</a></li>
<li><a href="chap30.html#present-wait">30.7. Present Wait</a></li>
<li><a href="chap30.html#_wsi_swapchain">30.8. WSI Swapchain</a></li>
</ul>
</li>
<li><a href="chap31.html">31. Deferred Host Operations</a>
<ul class="sectlevel2">
<li><a href="chap31.html#deferred-host-operations-requesting">31.1. Requesting Deferral</a></li>
<li><a href="chap31.html#_deferred_host_operations_api">31.2. Deferred Host Operations API</a></li>
</ul>
</li>
<li><a href="chap32.html">32. Private Data</a></li>
<li><a href="chap33.html">33. Acceleration Structures</a>
<ul class="sectlevel2">
<li><a href="chap33.html#acceleration-structure-def">33.1. Acceleration Structures</a></li>
<li><a href="chap33.html#host-acceleration-structure">33.2. Host Acceleration Structure Operations</a></li>
</ul>
</li>
<li><a href="chap34.html">34. Ray Traversal</a>
<ul class="sectlevel2">
<li><a href="chap34.html#ray-intersection-candidate-determination">34.1. Ray Intersection Candidate Determination</a></li>
<li><a href="chap34.html#ray-intersection-culling">34.2. Ray Intersection Culling</a></li>
<li><a href="chap34.html#ray-intersection-confirmation">34.3. Ray Intersection Confirmation</a></li>
<li><a href="chap34.html#ray-closest-hit-determination">34.4. Ray Closest Hit Determination</a></li>
<li><a href="chap34.html#ray-result-determination">34.5. Ray Result Determination</a></li>
</ul>
</li>
<li><a href="chap35.html">35. Ray Tracing</a>
<ul class="sectlevel2">
<li><a href="chap35.html#ray-tracing-shader-call">35.1. Shader Call Instructions</a></li>
<li><a href="chap35.html#ray-tracing-commands">35.2. Ray Tracing Commands</a></li>
<li><a href="chap35.html#shader-binding-table">35.3. Shader Binding Table</a></li>
<li><a href="chap35.html#ray-tracing-pipeline-stack">35.4. Ray Tracing Pipeline Stack</a></li>
<li><a href="chap35.html#ray-tracing-capture-replay">35.5. Ray Tracing Capture Replay</a></li>
</ul>
</li>
<li><a href="chap36.html">36. Video Coding</a>
<ul class="sectlevel2">
<li><a href="chap36.html#video-picture-resources">36.1. Video Picture Resources</a></li>
<li><a href="chap36.html#dpb">36.2. Decoded Picture Buffer</a></li>
<li><a href="chap36.html#video-profiles">36.3. Video Profiles</a></li>
<li><a href="chap36.html#video-capabilities">36.4. Video Capabilities</a></li>
<li><a href="chap36.html#video-session">36.5. Video Sessions</a></li>
<li><a href="chap36.html#video-profile-compatibility">36.6. Video Profile Compatibility</a></li>
<li><a href="chap36.html#video-session-parameters">36.7. Video Session Parameters</a></li>
<li><a href="chap36.html#video-coding-scope">36.8. Video Coding Scope</a></li>
<li><a href="chap36.html#video-coding-control">36.9. Video Coding Control</a></li>
<li><a href="chap36.html#video-decode-operations">36.10. Video Decode Operations</a></li>
<li><a href="chap36.html#decode-h264">36.11. H.264 Decode Operations</a></li>
<li><a href="chap36.html#decode-h265">36.12. H.265 Decode Operations</a></li>
<li><a href="chap36.html#video-encode-operations">36.13. Video Encode Operations</a></li>
</ul>
</li>
<li><a href="chap37.html">37. Extending Vulkan</a>
<ul class="sectlevel2">
<li><a href="chap37.html#extendingvulkan-instanceanddevicefunctionality">37.1. Instance and Device Functionality</a></li>
<li><a href="chap37.html#extendingvulkan-coreversions">37.2. Core Versions</a></li>
<li><a href="chap37.html#extendingvulkan-layers">37.3. Layers</a></li>
<li><a href="chap37.html#extendingvulkan-extensions">37.4. Extensions</a></li>
<li><a href="chap37.html#extendingvulkan-extensions-extensiondependencies">37.5. Extension Dependencies</a></li>
<li><a href="chap37.html#_compatibility_guarantees_informative">37.6. Compatibility Guarantees (Informative)</a></li>
</ul>
</li>
<li><a href="chap38.html">38. Features</a>
<ul class="sectlevel2">
<li><a href="chap38.html#features-requirements">38.1. Feature Requirements</a></li>
<li><a href="chap38.html#profile-features">38.2. Profile Features</a></li>
</ul>
</li>
<li><a href="chap39.html">39. Limits</a>
<ul class="sectlevel2">
<li><a href="chap39.html#limits-minmax">39.1. Limit Requirements</a></li>
<li><a href="chap39.html#profile-limits">39.2. Profile Limits</a></li>
</ul>
</li>
<li><a href="chap40.html">40. Formats</a>
<ul class="sectlevel2">
<li><a href="chap40.html#formats-definition">40.1. Format Definition</a></li>
<li><a href="chap40.html#formats-properties">40.2. Format Properties</a></li>
<li><a href="chap40.html#features-required-format-support">40.3. Required Format Support</a></li>
</ul>
</li>
<li><a href="chap41.html">41. Additional Capabilities</a>
<ul class="sectlevel2">
<li><a href="chap41.html#capabilities-image">41.1. Additional Image Capabilities</a></li>
<li><a href="chap41.html#capabilities-buffer">41.2. Additional Buffer Capabilities</a></li>
<li><a href="chap41.html#capabilities-semaphore">41.3. Optional Semaphore Capabilities</a></li>
<li><a href="chap41.html#capabilities-fence">41.4. Optional Fence Capabilities</a></li>
</ul>
</li>
<li><a href="chap42.html">42. Debugging</a>
<ul class="sectlevel2">
<li><a href="chap42.html#debugging-tooling-info">42.1. Active Tooling Information</a></li>
</ul>
</li>
<li><a href="chap43.html">Appendix A: Vulkan Environment for SPIR-V</a>
<ul class="sectlevel2">
<li><a href="chap43.html#_versions_and_formats">Versions and Formats</a></li>
<li><a href="chap43.html#spirvenv-capabilities">Capabilities</a></li>
<li><a href="chap43.html#spirvenv-module-validation">Validation Rules within a Module</a></li>
<li><a href="chap43.html#spirvenv-precision-operation">Precision and Operation of SPIR-V Instructions</a></li>
<li><a href="chap43.html#spirvenv-image-signedness">Signedness of SPIR-V Image Accesses</a></li>
<li><a href="chap43.html#spirvenv-format-type-matching">Image Format and Type Matching</a></li>
<li><a href="chap43.html#spirvenv-image-formats">Compatibility Between SPIR-V Image Formats And Vulkan Formats</a></li>
<li><a href="chap43.html#spirenv-ray-query-precision-operation">Ray Query Precision and Operation</a></li>
</ul>
</li>
<li><a href="chap44.html">Appendix B: Memory Model</a>
<ul class="sectlevel2">
<li><a href="chap44.html#memory-model-agent">Agent</a></li>
<li><a href="chap44.html#memory-model-memory-location">Memory Location</a></li>
<li><a href="chap44.html#memory-model-allocation">Allocation</a></li>
<li><a href="chap44.html#memory-model-memory-operation">Memory Operation</a></li>
<li><a href="chap44.html#memory-model-references">Reference</a></li>
<li><a href="chap44.html#memory-model-program-order">Program-Order</a></li>
<li><a href="chap44.html#shader-call-related">Shader Call Related</a></li>
<li><a href="chap44.html#shader-call-order">Shader Call Order</a></li>
<li><a href="chap44.html#memory-model-scope">Scope</a></li>
<li><a href="chap44.html#memory-model-atomic-operation">Atomic Operation</a></li>
<li><a href="chap44.html#memory-model-scoped-modification-order">Scoped Modification Order</a></li>
<li><a href="chap44.html#memory-model-memory-semantics">Memory Semantics</a></li>
<li><a href="chap44.html#memory-model-release-sequence">Release Sequence</a></li>
<li><a href="chap44.html#memory-model-synchronizes-with">Synchronizes-With</a></li>
<li><a href="chap44.html#memory-model-system-synchronizes-with">System-Synchronizes-With</a></li>
<li><a href="chap44.html#memory-model-non-private">Private vs. Non-Private</a></li>
<li><a href="chap44.html#memory-model-inter-thread-happens-before">Inter-Thread-Happens-Before</a></li>
<li><a href="chap44.html#memory-model-happens-before">Happens-Before</a></li>
<li><a href="chap44.html#memory-model-availability-visibility">Availability and Visibility</a></li>
<li><a href="chap44.html#memory-model-vulkan-availability-visibility">Availability, Visibility, and Domain Operations</a></li>
<li><a href="chap44.html#memory-model-availability-visibility-semantics">Availability and Visibility Semantics</a></li>
<li><a href="chap44.html#memory-model-instruction-av-vis">Per-Instruction Availability and Visibility Semantics</a></li>
<li><a href="chap44.html#memory-model-location-ordered">Location-Ordered</a></li>
<li><a href="chap44.html#memory-model-access-data-race">Data Race</a></li>
<li><a href="chap44.html#memory-model-visible-to">Visible-To</a></li>
<li><a href="chap44.html#memory-model-acyclicity">Acyclicity</a></li>
<li><a href="chap44.html#memory-model-shader-io">Shader I/O</a></li>
<li><a href="chap44.html#memory-model-deallocation">Deallocation</a></li>
<li><a href="chap44.html#memory-model-informative-descriptions">Descriptions (Informative)</a></li>
<li><a href="chap44.html#memory-model-tessellation-output-ordering">Tessellation Output Ordering</a></li>
</ul>
</li>
<li><a href="chap45.html">Appendix C: Compressed Image Formats</a>
<ul class="sectlevel2">
<li><a href="chap45.html#appendix-compressedtex-bc">Block-Compressed Image Formats</a></li>
<li><a href="chap45.html#appendix-compressedtex-etc2">ETC Compressed Image Formats</a></li>
<li><a href="chap45.html#appendix-compressedtex-astc">ASTC Compressed Image Formats</a></li>
</ul>
</li>
<li><a href="chap46.html">Appendix D: Core Revisions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap46.html#versions-1.3">Version 1.3</a></li>
<li><a href="chap46.html#versions-1.2">Version 1.2</a></li>
<li><a href="chap46.html#versions-1.1">Version 1.1</a></li>
<li><a href="chap46.html#versions-1.0">Version 1.0</a></li>
</ul>
</li>
<li><a href="chap47.html">Appendix E: Layers &amp; Extensions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap47.html#_extension_dependencies">Extension Dependencies</a></li>
<li><a href="chap47.html#extension-appendices-list">List of Current Extensions</a></li>
<li><a href="chap47.html#provisional-extension-appendices-list">List of Provisional Extensions</a></li>
<li><a href="chap47.html#deprecated-extension-appendices-list">List of Deprecated Extensions</a></li>
</ul>
</li>
<li><a href="chap48.html">Appendix F: Vulkan Roadmap Milestones</a>
<ul class="sectlevel2">
<li><a href="chap48.html#roadmap-2022">Roadmap 2022</a></li>
</ul>
</li>
<li><a href="chap49.html">Appendix G: API Boilerplate</a>
<ul class="sectlevel2">
<li><a href="chap49.html#boilerplate-headers">Vulkan Header Files</a></li>
<li><a href="chap49.html#boilerplate-wsi-header">Window System-Specific Header Control (Informative)</a></li>
<li><a href="chap49.html#boilerplate-provisional-header">Provisional Extension Header Control (Informative)</a></li>
<li><a href="chap49.html#boilerplate-video-std-headers">Video Std Headers</a></li>
</ul>
</li>
<li><a href="chap50.html">Appendix H: Invariance</a>
<ul class="sectlevel2">
<li><a href="chap50.html#_repeatability">Repeatability</a></li>
<li><a href="chap50.html#_multi_pass_algorithms">Multi-pass Algorithms</a></li>
<li><a href="chap50.html#_invariance_rules">Invariance Rules</a></li>
<li><a href="chap50.html#_tessellation_invariance">Tessellation Invariance</a></li>
</ul>
</li>
<li><a href="chap51.html">Appendix I: Lexicon</a>
<ul class="sectlevel2">
<li><a href="chap51.html#glossary">Glossary</a></li>
<li><a href="chap51.html#lexicon-common-abbreviations">Common Abbreviations</a></li>
<li><a href="chap51.html#lexicon-video-abbreviations">Video-Specific Abbreviations</a></li>
<li><a href="chap51.html#lexicon-prefixes">Prefixes</a></li>
</ul>
</li>
<li><a href="chap52.html">Appendix J: Credits (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap52.html#_working_group_contributors_to_vulkan">Working Group Contributors to Vulkan</a></li>
<li><a href="chap52.html#_other_credits">Other Credits</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="loading_msg" class="hidden" hidden=""><p>Loading… please wait.</p></div>
<!--ChunkedSearchboxMarker-->
<div class="searchbox"><label for="searchbox">Search: </label><input id="searchbox" type="text" disabled="disabled" value="Loading Search Data"><div id="resultsdiv"><ol id="results"></ol></div></div>
<div id="content" class="loadable"><div class="sect1">
<h2 id="commandbuffers"><a class="anchor" href="chap6.html"></a>6. Command Buffers</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Command buffers are objects used to record commands which <strong class="purple">can</strong> be
subsequently submitted to a device queue for execution.
There are two levels of command buffers - <em>primary command buffers</em>, which
<strong class="purple">can</strong> execute secondary command buffers, and which are submitted to queues,
and <em>secondary command buffers</em>, which <strong class="purple">can</strong> be executed by primary command
buffers, and which are not directly submitted to queues.</p>
</div>
<div class="paragraph">
<p>Command buffers are represented by <code>VkCommandBuffer</code> handles:</p>
</div>
<div id="VkCommandBuffer" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="n">VK_DEFINE_HANDLE</span><span class="p">(</span><span class="n">VkCommandBuffer</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Recorded commands include commands to bind pipelines and descriptor sets to
the command buffer, commands to modify dynamic state, commands to draw (for
graphics rendering), commands to dispatch (for compute), commands to execute
secondary command buffers (for primary command buffers only), commands to
copy buffers and images, and other commands.</p>
</div>
<div id="commandbuffers-statereset" class="paragraph">
<p>Each command buffer manages state independently of other command buffers.
There is no inheritance of state across primary and secondary command
buffers, or between secondary command buffers.
When a command buffer begins recording, all state in that command buffer is
undefined.
When secondary command buffer(s) are recorded to execute on a primary
command buffer, the secondary command buffer inherits no state from the
primary command buffer, and all state of the primary command buffer is
undefined after an execute secondary command buffer command is recorded.
There is one exception to this rule - if the primary command buffer is
inside a render pass instance, then the render pass and subpass state is not
disturbed by executing secondary command buffers.
For state dependent commands (such as draws and dispatches), any state
consumed by those commands <strong class="purple">must</strong> not be undefined.</p>
</div>
<div class="paragraph">
<p>Unless otherwise specified, and without explicit synchronization, the
various commands submitted to a queue via command buffers <strong class="purple">may</strong> execute in
arbitrary order relative to each other, and/or concurrently.
Also, the memory side effects of those commands <strong class="purple">may</strong> not be directly visible
to other commands without explicit memory dependencies.
This is true within a command buffer, and across command buffers submitted
to a given queue.
See <a href="chap7.html">the synchronization chapter</a> for information on
<a href="chap7.html#synchronization-implicit">implicit</a> and explicit synchronization between
commands.</p>
</div>
<div class="sect2">
<h3 id="commandbuffers-lifecycle"><a class="anchor" href="chap6.html#commandbuffers-lifecycle"></a>6.1. Command Buffer Lifecycle</h3>
<div class="paragraph">
<p>Each command buffer is always in one of the following states:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Initial</dt>
<dd>
<p>When a command buffer is <a href="chap6.html#vkAllocateCommandBuffers">allocated</a>, it is
in the <em>initial state</em>.
Some commands are able to <em>reset</em> a command buffer (or a set of command
buffers) back to this state from any of the executable, recording or
invalid state.
Command buffers in the initial state <strong class="purple">can</strong> only be moved to the recording
state, or freed.</p>
</dd>
<dt class="hdlist1">Recording</dt>
<dd>
<p><a href="chap6.html#vkBeginCommandBuffer">vkBeginCommandBuffer</a> changes the state of a command buffer from
the initial state to the <em>recording state</em>.
Once a command buffer is in the recording state, <code>vkCmd*</code> commands
<strong class="purple">can</strong> be used to record to the command buffer.</p>
</dd>
<dt class="hdlist1">Executable</dt>
<dd>
<p><a href="chap6.html#vkEndCommandBuffer">vkEndCommandBuffer</a> ends the recording of a command buffer, and
moves it from the recording state to the <em>executable state</em>.
Executable command buffers <strong class="purple">can</strong> be <a href="chap6.html#commandbuffers-submission">submitted</a>, reset, or <a href="chap6.html#commandbuffers-secondary">recorded to another
command buffer</a>.</p>
</dd>
<dt class="hdlist1">Pending</dt>
<dd>
<p><a href="chap6.html#commandbuffers-submission">Queue submission</a> of a command buffer
changes the state of a command buffer from the executable state to the
<em>pending state</em>.
Whilst in the pending state, applications <strong class="purple">must</strong> not attempt to modify
the command buffer in any way - as the device <strong class="purple">may</strong> be processing the
commands recorded to it.
Once execution of a command buffer completes, the command buffer either
reverts back to the <em>executable state</em>, or if it was recorded with
<code>VK_COMMAND_BUFFER_USAGE_ONE_TIME_SUBMIT_BIT</code>, it moves to the
<em>invalid state</em>.
A <a href="chap7.html">synchronization</a> command <strong class="purple">should</strong> be used to detect
when this occurs.</p>
</dd>
<dt class="hdlist1">Invalid</dt>
<dd>
<p>Some operations, such as <a href="chap3.html#fundamentals-objectmodel-lifetime-cmdbuffers">modifying or deleting a resource</a> that was used in a command recorded
to a command buffer, will transition the state of that command buffer
into the <em>invalid state</em>.
Command buffers in the invalid state <strong class="purple">can</strong> only be reset or freed.</p>
</dd>
</dl>
</div>
<div id="commandbuffer-lifecycle-diagram" class="imageblock text-center">
<div class="content">
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="224.63503mm" height="92.592918mm" viewBox="0 0 224.63503 92.592918" version="1.1" id="svg8" sodipodi:docname="commandbuffer_lifecycle.svg" inkscape:version="0.92.4 (5da689c313, 2019-01-14)">
  <defs id="defs2">
    <marker inkscape:stockid="Arrow1Mend" orient="auto" refY="0" refX="0" id="marker5741" style="overflow:visible" inkscape:isstock="true">
      <path id="path5739" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:stockid="Arrow1Mend" orient="auto" refY="0" refX="0" id="marker5571" style="overflow:visible" inkscape:isstock="true">
      <path id="path5569" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:isstock="true" style="overflow:visible" id="marker3457" refX="0" refY="0" orient="auto" inkscape:stockid="Arrow1Mend" inkscape:collect="always">
      <path transform="matrix(-0.4,0,0,-0.4,-4,0)" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" d="M 0,0 5,-5 -12.5,0 5,5 Z" id="path3455" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:stockid="Arrow1Mend" orient="auto" refY="0" refX="0" id="marker3373" style="overflow:visible" inkscape:isstock="true" inkscape:collect="always">
      <path id="path3371" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:stockid="Arrow1Mstart" orient="auto" refY="0" refX="0" id="marker1404" style="overflow:visible" inkscape:isstock="true">
      <path id="path1402" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(0.4,0,0,0.4,4,0)" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:stockid="Arrow1Mstart" orient="auto" refY="0" refX="0" id="Arrow1Mstart" style="overflow:visible" inkscape:isstock="true">
      <path id="path968" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(0.4,0,0,0.4,4,0)" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:isstock="true" style="overflow:visible" id="marker1320" refX="0" refY="0" orient="auto" inkscape:stockid="Arrow1Mend" inkscape:collect="always">
      <path transform="matrix(-0.4,0,0,-0.4,-4,0)" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" d="M 0,0 5,-5 -12.5,0 5,5 Z" id="path1318" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:stockid="Arrow1Mend" orient="auto" refY="0" refX="0" id="marker1274" style="overflow:visible" inkscape:isstock="true" inkscape:collect="always">
      <path id="path1272" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:stockid="Arrow1Mend" orient="auto" refY="0" refX="0" id="marker1246" style="overflow:visible" inkscape:isstock="true">
      <path id="path1244" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:stockid="Arrow1Mend" orient="auto" refY="0" refX="0" id="Arrow1Mend" style="overflow:visible" inkscape:isstock="true">
      <path id="path971" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)" inkscape:connector-curvature="0"></path>
    </marker>
    <marker inkscape:stockid="Arrow1Mend" orient="auto" refY="0" refX="0" id="marker1274-3" style="overflow:visible" inkscape:isstock="true" inkscape:collect="always">
      <path inkscape:connector-curvature="0" id="path1272-3" d="M 0,0 5,-5 -12.5,0 5,5 Z" style="fill:#000000;fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:1.00000003pt;stroke-opacity:1" transform="matrix(-0.4,0,0,-0.4,-4,0)"></path>
    </marker>
  </defs>
  <sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.4142136" inkscape:cx="405.79858" inkscape:cy="139.11401" inkscape:document-units="mm" inkscape:current-layer="layer1" showgrid="true" inkscape:snap-text-baseline="true" inkscape:snap-object-midpoints="true" inkscape:measure-start="245,915" inkscape:measure-end="570,915" showguides="false" fit-margin-left="1" fit-margin-top="1" fit-margin-right="1" fit-margin-bottom="1" inkscape:window-width="1920" inkscape:window-height="1001" inkscape:window-x="-9" inkscape:window-y="-9" inkscape:window-maximized="0">
    <inkscape:grid type="xygrid" id="grid907" originx="3.8383438" originy="-212.72305"></inkscape:grid>
  </sodipodi:namedview>
  <metadata id="metadata5">
    <rdf:rdf>
      <cc:work rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc:type>
        <dc:title></dc:title>
      </cc:work>
    </rdf:rdf>
  </metadata>
  <g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(3.8383438,8.3159637)">
    <rect style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:0.38502529;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" id="rect815-1-4-3-6-1-68-2-5" width="63.499996" height="7.9375005" x="76.729164" y="7.8066287"></rect>
    <text id="text823-4-2-9-4-7-9-2" y="13.361835" x="108.38303" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687496" xml:space="preserve"><tspan id="tspan825-6-0-2-5-6-26-4" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.39687496" y="13.361835" x="108.38303" sodipodi:role="line">Initial</tspan></text>
    <rect style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:0.38502529;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" id="rect815-1-4-3-6-1-68-2-5-2" width="63.499996" height="7.9375005" x="156.10417" y="37.57225"></rect>
    <text id="text823-4-2-9-4-7-9-2-0" y="43.12746" x="187.75806" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687496" xml:space="preserve"><tspan id="tspan825-6-0-2-5-6-26-4-2" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.39687496" y="43.12746" x="187.75806" sodipodi:role="line">Recording</tspan></text>
    <rect style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:0.38502529;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" id="rect815-1-4-3-6-1-68-2-5-7" width="63.499996" height="7.9375005" x="23.151045" y="73.291"></rect>
    <text id="text823-4-2-9-4-7-9-2-7" y="78.846207" x="54.804928" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687496" xml:space="preserve"><tspan id="tspan825-6-0-2-5-6-26-4-0" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.39687496" y="78.846207" x="54.804928" sodipodi:role="line">Pending</tspan></text>
    <rect style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:0.38502529;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" id="rect815-1-4-3-6-1-68-2-5-1" width="63.499996" height="7.9375005" x="130.3073" y="73.291"></rect>
    <text id="text823-4-2-9-4-7-9-2-9" y="78.846207" x="161.96117" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687496" xml:space="preserve"><tspan id="tspan825-6-0-2-5-6-26-4-9" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.39687496" y="78.846207" x="161.96117" sodipodi:role="line">Executable</tspan></text>
    <rect style="fill:none;fill-opacity:1;stroke:#000000;stroke-width:0.38502529;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" id="rect815-1-4-3-6-1-68-2-5-9" width="63.499996" height="7.9375005" x="-2.6458311" y="37.57225"></rect>
    <text id="text823-4-2-9-4-7-9-2-6" y="43.12746" x="29.008045" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687496" xml:space="preserve"><tspan id="tspan825-6-0-2-5-6-26-4-93" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.39687496" y="43.12746" x="29.008045" sodipodi:role="line">Invalid</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687496" x="108.47915" y="-4.0996227" id="text905"><tspan sodipodi:role="line" id="tspan903" x="108.47915" y="-4.0996227" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.39687496">Allocate</tspan></text>
    <path style="fill:none;stroke:#000000;stroke-width:0.39749998;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-end:url(#Arrow1Mend)" d="m 140.22916,11.775377 c 17.40186,4.563534 31.44429,11.931433 37.70313,25.796877" id="path911" inkscape:connector-curvature="0" sodipodi:nodetypes="cc"></path>
    <path style="fill:none;stroke:#000000;stroke-width:0.39687497;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.58749987,1.58749987;stroke-dashoffset:0;stroke-opacity:1;marker-start:url(#marker1404)" d="M 76.72917,11.775375 C 59.32731,16.338909 45.28488,23.706809 39.02604,37.572252" id="path911-9" inkscape:connector-curvature="0" sodipodi:nodetypes="cc"></path>
    <path style="fill:none;stroke:#000000;stroke-width:0.39687496px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;marker-end:url(#marker1246)" d="m 177.93228,45.509753 c -2.5839,12.275404 -13.84985,21.278544 -31.74999,27.781249" id="path928" inkscape:connector-curvature="0" sodipodi:nodetypes="cc"></path>
    <path style="fill:none;stroke:#000000;stroke-width:0.39687497;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.58749987,1.58749987;stroke-dashoffset:0;stroke-opacity:1;marker-start:url(#Arrow1Mstart)" d="m 39.02604,45.509753 c 2.5839,12.275404 13.849846,21.278544 31.749991,27.781249" id="path928-9" inkscape:connector-curvature="0" sodipodi:nodetypes="cc"></path>
    <path style="fill:none;stroke:#000000;stroke-width:0.42705935px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;marker-end:url(#marker1274)" d="m 130.30729,77.259753 c -14.77333,2.532909 -29.48724,2.761692 -43.65625,0" id="path945" inkscape:connector-curvature="0" sodipodi:nodetypes="cc"></path>
    <path style="fill:none;stroke:#000000;stroke-width:0.42705935px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;marker-end:url(#marker1274-3)" d="m 86.651035,75.275378 c 14.773335,-2.532915 29.487245,-2.761695 43.656255,0" id="path945-6" inkscape:connector-curvature="0" sodipodi:nodetypes="cc"></path>
    <path style="fill:none;stroke:#000000;stroke-width:0.39687497;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.58749987,1.58749987;stroke-dashoffset:0;stroke-opacity:1;marker-end:url(#marker1320)" d="m 156.10417,39.556628 c -33.57471,-4.289783 -37.71018,-13.456659 -47.625,-23.8125" id="path3349" inkscape:connector-curvature="0" sodipodi:nodetypes="cc"></path>
    <path style="fill:none;stroke:#000000;stroke-width:0.39687497;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.58749987,1.58749987;stroke-dashoffset:0;stroke-opacity:1;marker-end:url(#marker3373)" d="M 144.19792,73.291002 C 129.70275,39.163626 116.89927,24.895373 108.47917,15.744128" id="path3363" inkscape:connector-curvature="0" sodipodi:nodetypes="cc"></path>
    <path style="fill:none;stroke:#000000;stroke-width:0.39687496px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;marker-end:url(#marker3457)" d="M 108.47917,-2.1152472 V 7.8066273" id="path3447" inkscape:connector-curvature="0"></path>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687496" x="164.04166" y="19.712879" id="text905-5"><tspan sodipodi:role="line" id="tspan903-4" x="164.04166" y="19.712879" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;writing-mode:lr-tb;text-anchor:start;stroke-width:0.39687496">Begin</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687496" x="171.97917" y="63.369129" id="text905-5-4"><tspan sodipodi:role="line" id="tspan903-4-1" x="171.97917" y="63.369129" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;writing-mode:lr-tb;text-anchor:start;stroke-width:0.39687496">End</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687496" x="108.47915" y="83.212875" id="text905-5-4-3"><tspan sodipodi:role="line" id="tspan903-4-1-1" x="108.47915" y="83.212875" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.39687496">Submission</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687496" x="107.73502" y="71.306633" id="text905-5-4-3-1"><tspan sodipodi:role="line" id="tspan903-4-1-1-9" x="108.47916" y="71.306633" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.39687496">Completion </tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:end;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:end;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687496;stroke-miterlimit:4;stroke-dasharray:none" x="44.979168" y="61.38475" id="text4726"><tspan sodipodi:role="line" x="44.979168" y="61.38475" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:end;writing-mode:lr-tb;text-anchor:end;stroke-width:0.39687496;stroke-miterlimit:4;stroke-dasharray:none" id="tspan4732">Completion with</tspan><tspan sodipodi:role="line" x="44.979168" y="66.676414" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:end;writing-mode:lr-tb;text-anchor:end;stroke-width:0.39687496;stroke-miterlimit:4;stroke-dasharray:none" id="tspan11757">One Time Submit</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:end;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:end;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687496" x="52.916664" y="19.712879" id="text905-6"><tspan sodipodi:role="line" x="52.916664" y="19.712879" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:end;writing-mode:lr-tb;text-anchor:end;stroke-width:0.39687496" id="tspan3709">Reset</tspan></text>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687496" x="116.41668" y="21.697252" id="text905-6-3"><tspan sodipodi:role="line" x="116.41668" y="21.697252" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:start;writing-mode:lr-tb;text-anchor:start;stroke-width:0.39687496" id="tspan3709-2">Reset</tspan></text>
    <path style="fill:none;stroke:#000000;stroke-width:0.396875;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.5875,1.5875;stroke-dashoffset:0;stroke-opacity:1;marker-end:url(#marker5571)" d="M 156.10416,41.541003 H 60.854164" id="path5557" inkscape:connector-curvature="0"></path>
    <path style="fill:none;stroke:#000000;stroke-width:0.39687499;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:1.5875, 1.5875;stroke-dashoffset:0;stroke-opacity:1;marker-end:url(#marker5741)" d="M 140.22916,73.291002 C 126.33855,47.494128 119.0625,41.677088 60.854164,41.541003" id="path5559" inkscape:connector-curvature="0" sodipodi:nodetypes="cc"></path>
    <text xml:space="preserve" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;line-height:1.25;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:middle;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.39687496" x="74.744797" y="47.494129" id="text905-6-3-4"><tspan sodipodi:role="line" x="74.744797" y="47.494129" style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:4.23333311px;font-family:sans-serif;-inkscape-font-specification:'sans-serif, Normal';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;text-align:center;writing-mode:lr-tb;text-anchor:middle;stroke-width:0.39687496" id="tspan3709-2-2">Invalidate</tspan></text>
  </g>
</svg>
</div>
<div class="title">Figure 1. Lifecycle of a command buffer</div>
</div>
<div class="paragraph">
<p>Any given command that operates on a command buffer has its own requirements
on what state a command buffer <strong class="purple">must</strong> be in, which are detailed in the valid
usage constraints for that command.</p>
</div>
<div class="paragraph">
<p>Resetting a command buffer is an operation that discards any previously
recorded commands and puts a command buffer in the <em>initial state</em>.
Resetting occurs as a result of <a href="chap6.html#vkResetCommandBuffer">vkResetCommandBuffer</a> or
<a href="chap6.html#vkResetCommandPool">vkResetCommandPool</a>, or as part of <a href="chap6.html#vkBeginCommandBuffer">vkBeginCommandBuffer</a> (which
additionally puts the command buffer in the <em>recording state</em>).</p>
</div>
<div class="paragraph">
<p><a href="chap6.html#commandbuffers-secondary">Secondary command buffers</a> <strong class="purple">can</strong> be recorded to
a primary command buffer via <a href="chap6.html#vkCmdExecuteCommands">vkCmdExecuteCommands</a>.
This partially ties the lifecycle of the two command buffers together - if
the primary is submitted to a queue, both the primary and any secondaries
recorded to it move to the <em>pending state</em>.
Once execution of the primary completes, so it does for any secondary
recorded within it.
After all executions of each command buffer complete, they each move to
their appropriate completion state (either to the <em>executable state</em> or the
<em>invalid state</em>, as specified above).</p>
</div>
<div class="paragraph">
<p>If a secondary moves to the <em>invalid state</em> or the <em>initial state</em>, then all
primary buffers it is recorded in move to the <em>invalid state</em>.
A primary moving to any other state does not affect the state of a secondary
recorded in it.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Resetting or freeing a primary command buffer removes the lifecycle linkage
to all secondary command buffers that were recorded into it.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="commandbuffers-pools"><a class="anchor" href="chap6.html#commandbuffers-pools"></a>6.2. Command Pools</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Command pools are opaque objects that command buffer memory is allocated
from, and which allow the implementation to amortize the cost of resource
creation across multiple command buffers.
Command pools are externally synchronized, meaning that a command pool <strong class="purple">must</strong>
not be used concurrently in multiple threads.
That includes use via recording commands on any command buffers allocated
from the pool, as well as operations that allocate, free, and reset command
buffers or the pool itself.</p>
</div>
<div class="paragraph">
<p>Command pools are represented by <code>VkCommandPool</code> handles:</p>
</div>
<div id="VkCommandPool" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="n">VK_DEFINE_NON_DISPATCHABLE_HANDLE</span><span class="p">(</span><span class="n">VkCommandPool</span><span class="p">)</span></code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create a command pool, call:</p>
</div>
<div id="vkCreateCommandPool" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="n">VkResult</span> <span class="nf">vkCreateCommandPool</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCommandPoolCreateInfo</span><span class="o">*</span>              <span class="n">pCreateInfo</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">,</span>
    <span class="n">VkCommandPool</span><span class="o">*</span>                              <span class="n">pCommandPool</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the command pool.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="chap6.html#VkCommandPoolCreateInfo">VkCommandPoolCreateInfo</a>
structure specifying the state of the command pool object.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pCommandPool</code> is a pointer to a <a href="chap6.html#VkCommandPool">VkCommandPool</a> handle in which
the created pool is returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateCommandPool-queueFamilyIndex-01937" href="chap6.html#VUID-vkCreateCommandPool-queueFamilyIndex-01937"></a> <span class="vuid">VUID-vkCreateCommandPool-queueFamilyIndex-01937</span><br>

<code>pCreateInfo-&gt;queueFamilyIndex</code> <strong class="purple">must</strong> be the index of a queue family
available in the logical device <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateCommandPool-device-parameter" href="chap6.html#VUID-vkCreateCommandPool-device-parameter"></a> <span class="vuid">VUID-vkCreateCommandPool-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateCommandPool-pCreateInfo-parameter" href="chap6.html#VUID-vkCreateCommandPool-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateCommandPool-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap6.html#VkCommandPoolCreateInfo">VkCommandPoolCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateCommandPool-pAllocator-parameter" href="chap6.html#VUID-vkCreateCommandPool-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateCommandPool-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateCommandPool-pCommandPool-parameter" href="chap6.html#VUID-vkCreateCommandPool-pCommandPool-parameter"></a> <span class="vuid">VUID-vkCreateCommandPool-pCommandPool-parameter</span><br>
 <code>pCommandPool</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap6.html#VkCommandPool">VkCommandPool</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCommandPoolCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkCommandPoolCreateInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCommandPoolCreateInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>             <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                 <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkCommandPoolCreateFlags</span>    <span class="n">flags</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                    <span class="n">queueFamilyIndex</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCommandPoolCreateInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap6.html#VkCommandPoolCreateFlagBits">VkCommandPoolCreateFlagBits</a> indicating
usage behavior for the pool and command buffers allocated from it.</p>
</li>
<li>
<p><code>queueFamilyIndex</code> designates a queue family as described in section
<a href="chap5.html#devsandqueues-queueprops">Queue Family Properties</a>.
All command buffers allocated from this command pool <strong class="purple">must</strong> be submitted
on queues from the same queue family.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCommandPoolCreateInfo-flags-02860" href="chap6.html#VUID-VkCommandPoolCreateInfo-flags-02860"></a> <span class="vuid">VUID-VkCommandPoolCreateInfo-flags-02860</span><br>

If the <a href="chap38.html#features-protectedMemory"><code>protectedMemory</code></a> feature is
not enabled, the <code>VK_COMMAND_POOL_CREATE_PROTECTED_BIT</code> bit of
<code>flags</code> <strong class="purple">must</strong> not be set</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCommandPoolCreateInfo-sType-sType" href="chap6.html#VUID-VkCommandPoolCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkCommandPoolCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COMMAND_POOL_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkCommandPoolCreateInfo-pNext-pNext" href="chap6.html#VUID-VkCommandPoolCreateInfo-pNext-pNext"></a> <span class="vuid">VUID-VkCommandPoolCreateInfo-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCommandPoolCreateInfo-flags-parameter" href="chap6.html#VUID-VkCommandPoolCreateInfo-flags-parameter"></a> <span class="vuid">VUID-VkCommandPoolCreateInfo-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap6.html#VkCommandPoolCreateFlagBits">VkCommandPoolCreateFlagBits</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in <a href="chap6.html#VkCommandPoolCreateInfo">VkCommandPoolCreateInfo</a>::<code>flags</code>,
specifying usage behavior for a command pool, are:</p>
</div>
<div id="VkCommandPoolCreateFlagBits" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkCommandPoolCreateFlagBits</span> <span class="p">{</span>
    <span class="n">VK_COMMAND_POOL_CREATE_TRANSIENT_BIT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_COMMAND_POOL_CREATE_RESET_COMMAND_BUFFER_BIT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
  <span class="c1">// Provided by VK_VERSION_1_1</span>
    <span class="n">VK_COMMAND_POOL_CREATE_PROTECTED_BIT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkCommandPoolCreateFlagBits</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_COMMAND_POOL_CREATE_TRANSIENT_BIT</code> specifies that command
buffers allocated from the pool will be short-lived, meaning that they
will be reset or freed in a relatively short timeframe.
This flag <strong class="purple">may</strong> be used by the implementation to control memory
allocation behavior within the pool.</p>
</li>
<li>
<p><code>VK_COMMAND_POOL_CREATE_RESET_COMMAND_BUFFER_BIT</code> allows any command
buffer allocated from a pool to be individually reset to the
<a href="chap6.html#commandbuffers-lifecycle">initial state</a>; either by calling
<a href="chap6.html#vkResetCommandBuffer">vkResetCommandBuffer</a>, or via the implicit reset when calling
<a href="chap6.html#vkBeginCommandBuffer">vkBeginCommandBuffer</a>.
If this flag is not set on a pool, then <code>vkResetCommandBuffer</code> <strong class="purple">must</strong>
not be called for any command buffer allocated from that pool.</p>
</li>
<li>
<p><code>VK_COMMAND_POOL_CREATE_PROTECTED_BIT</code> specifies that command
buffers allocated from the pool are protected command buffers.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkCommandPoolCreateFlags" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkCommandPoolCreateFlags</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkCommandPoolCreateFlags</code> is a bitmask type for setting a mask of zero
or more <a href="chap6.html#VkCommandPoolCreateFlagBits">VkCommandPoolCreateFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To trim a command pool, call:</p>
</div>
<div id="vkTrimCommandPool" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="kt">void</span> <span class="nf">vkTrimCommandPool</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkCommandPool</span>                               <span class="n">commandPool</span><span class="p">,</span>
    <span class="n">VkCommandPoolTrimFlags</span>                      <span class="n">flags</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkTrimCommandPoolKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_maintenance1</span>
<span class="kt">void</span> <span class="nf">vkTrimCommandPoolKHR</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkCommandPool</span>                               <span class="n">commandPool</span><span class="p">,</span>
    <span class="n">VkCommandPoolTrimFlags</span>                      <span class="n">flags</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the command pool.</p>
</li>
<li>
<p><code>commandPool</code> is the command pool to trim.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Trimming a command pool recycles unused memory from the command pool back to
the system.
Command buffers allocated from the pool are not affected by the command.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>This command provides applications with some control over the internal
memory allocations used by command pools.</p>
</div>
<div class="paragraph">
<p>Unused memory normally arises from command buffers that have been recorded
and later reset, such that they are no longer using the memory.
On reset, a command buffer can return memory to its command pool, but the
only way to release memory from a command pool to the system requires
calling <a href="chap6.html#vkResetCommandPool">vkResetCommandPool</a>, which cannot be executed while any command
buffers from that pool are still in use.
Subsequent recording operations into command buffers will re-use this memory
but since total memory requirements fluctuate over time, unused memory can
accumulate.</p>
</div>
<div class="paragraph">
<p>In this situation, trimming a command pool <strong class="purple">may</strong> be useful to return unused
memory back to the system, returning the total outstanding memory allocated
by the pool back to a more “average” value.</p>
</div>
<div class="paragraph">
<p>Implementations utilize many internal allocation strategies that make it
impossible to guarantee that all unused memory is released back to the
system.
For instance, an implementation of a command pool <strong class="purple">may</strong> involve allocating
memory in bulk from the system and sub-allocating from that memory.
In such an implementation any live command buffer that holds a reference to
a bulk allocation would prevent that allocation from being freed, even if
only a small proportion of the bulk allocation is in use.</p>
</div>
<div class="paragraph">
<p>In most cases trimming will result in a reduction in allocated but unused
memory, but it does not guarantee the “ideal” behavior.</p>
</div>
<div class="paragraph">
<p>Trimming <strong class="purple">may</strong> be an expensive operation, and <strong class="purple">should</strong> not be called
frequently.
Trimming <strong class="purple">should</strong> be treated as a way to relieve memory pressure after
application-known points when there exists enough unused memory that the
cost of trimming is “worth” it.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkTrimCommandPool-device-parameter" href="chap6.html#VUID-vkTrimCommandPool-device-parameter"></a> <span class="vuid">VUID-vkTrimCommandPool-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkTrimCommandPool-commandPool-parameter" href="chap6.html#VUID-vkTrimCommandPool-commandPool-parameter"></a> <span class="vuid">VUID-vkTrimCommandPool-commandPool-parameter</span><br>
 <code>commandPool</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandPool">VkCommandPool</a> handle</p>
</li>
<li>
<p><a id="VUID-vkTrimCommandPool-flags-zerobitmask" href="chap6.html#VUID-vkTrimCommandPool-flags-zerobitmask"></a> <span class="vuid">VUID-vkTrimCommandPool-flags-zerobitmask</span><br>
 <code>flags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkTrimCommandPool-commandPool-parent" href="chap6.html#VUID-vkTrimCommandPool-commandPool-parent"></a> <span class="vuid">VUID-vkTrimCommandPool-commandPool-parent</span><br>
 <code>commandPool</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandPool</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkCommandPoolTrimFlags" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkCommandPoolTrimFlags</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkCommandPoolTrimFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_maintenance1</span>
<span class="k">typedef</span> <span class="n">VkCommandPoolTrimFlags</span> <span class="n">VkCommandPoolTrimFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkCommandPoolTrimFlags</code> is a bitmask type for setting a mask, but is
currently reserved for future use.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To reset a command pool, call:</p>
</div>
<div id="vkResetCommandPool" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="n">VkResult</span> <span class="nf">vkResetCommandPool</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkCommandPool</span>                               <span class="n">commandPool</span><span class="p">,</span>
    <span class="n">VkCommandPoolResetFlags</span>                     <span class="n">flags</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the command pool.</p>
</li>
<li>
<p><code>commandPool</code> is the command pool to reset.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap6.html#VkCommandPoolResetFlagBits">VkCommandPoolResetFlagBits</a> controlling
the reset operation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Resetting a command pool recycles all of the resources from all of the
command buffers allocated from the command pool back to the command pool.
All command buffers that have been allocated from the command pool are put
in the <a href="chap6.html#commandbuffers-lifecycle">initial state</a>.</p>
</div>
<div class="paragraph">
<p>Any primary command buffer allocated from another <a href="chap6.html#VkCommandPool">VkCommandPool</a> that
is in the <a href="chap6.html#commandbuffers-lifecycle">recording or executable state</a> and
has a secondary command buffer allocated from <code>commandPool</code> recorded
into it, becomes <a href="chap6.html#commandbuffers-lifecycle">invalid</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkResetCommandPool-commandPool-00040" href="chap6.html#VUID-vkResetCommandPool-commandPool-00040"></a> <span class="vuid">VUID-vkResetCommandPool-commandPool-00040</span><br>

All <code>VkCommandBuffer</code> objects allocated from <code>commandPool</code> <strong class="purple">must</strong>
not be in the <a href="chap6.html#commandbuffers-lifecycle">pending state</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkResetCommandPool-device-parameter" href="chap6.html#VUID-vkResetCommandPool-device-parameter"></a> <span class="vuid">VUID-vkResetCommandPool-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkResetCommandPool-commandPool-parameter" href="chap6.html#VUID-vkResetCommandPool-commandPool-parameter"></a> <span class="vuid">VUID-vkResetCommandPool-commandPool-parameter</span><br>
 <code>commandPool</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandPool">VkCommandPool</a> handle</p>
</li>
<li>
<p><a id="VUID-vkResetCommandPool-flags-parameter" href="chap6.html#VUID-vkResetCommandPool-flags-parameter"></a> <span class="vuid">VUID-vkResetCommandPool-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap6.html#VkCommandPoolResetFlagBits">VkCommandPoolResetFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-vkResetCommandPool-commandPool-parent" href="chap6.html#VUID-vkResetCommandPool-commandPool-parent"></a> <span class="vuid">VUID-vkResetCommandPool-commandPool-parent</span><br>
 <code>commandPool</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandPool</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in <a href="chap6.html#vkResetCommandPool">vkResetCommandPool</a>::<code>flags</code>, controlling
the reset operation, are:</p>
</div>
<div id="VkCommandPoolResetFlagBits" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkCommandPoolResetFlagBits</span> <span class="p">{</span>
    <span class="n">VK_COMMAND_POOL_RESET_RELEASE_RESOURCES_BIT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkCommandPoolResetFlagBits</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_COMMAND_POOL_RESET_RELEASE_RESOURCES_BIT</code>
specifies that resetting a command pool recycles all of the resources
from the command pool back to the system.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkCommandPoolResetFlags" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkCommandPoolResetFlags</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkCommandPoolResetFlags</code> is a bitmask type for setting a mask of zero
or more <a href="chap6.html#VkCommandPoolResetFlagBits">VkCommandPoolResetFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy a command pool, call:</p>
</div>
<div id="vkDestroyCommandPool" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkDestroyCommandPool</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkCommandPool</span>                               <span class="n">commandPool</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkAllocationCallbacks</span><span class="o">*</span>                <span class="n">pAllocator</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the command pool.</p>
</li>
<li>
<p><code>commandPool</code> is the handle of the command pool to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap11.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When a pool is destroyed, all command buffers allocated from the pool are
<a href="chap6.html#vkFreeCommandBuffers">freed</a>.</p>
</div>
<div class="paragraph">
<p>Any primary command buffer allocated from another <a href="chap6.html#VkCommandPool">VkCommandPool</a> that
is in the <a href="chap6.html#commandbuffers-lifecycle">recording or executable state</a> and
has a secondary command buffer allocated from <code>commandPool</code> recorded
into it, becomes <a href="chap6.html#commandbuffers-lifecycle">invalid</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyCommandPool-commandPool-00041" href="chap6.html#VUID-vkDestroyCommandPool-commandPool-00041"></a> <span class="vuid">VUID-vkDestroyCommandPool-commandPool-00041</span><br>

All <code>VkCommandBuffer</code> objects allocated from <code>commandPool</code> <strong class="purple">must</strong>
not be in the <a href="chap6.html#commandbuffers-lifecycle">pending state</a></p>
</li>
<li>
<p><a id="VUID-vkDestroyCommandPool-commandPool-00042" href="chap6.html#VUID-vkDestroyCommandPool-commandPool-00042"></a> <span class="vuid">VUID-vkDestroyCommandPool-commandPool-00042</span><br>

If <code>VkAllocationCallbacks</code> were provided when <code>commandPool</code> was
created, a compatible set of callbacks <strong class="purple">must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyCommandPool-commandPool-00043" href="chap6.html#VUID-vkDestroyCommandPool-commandPool-00043"></a> <span class="vuid">VUID-vkDestroyCommandPool-commandPool-00043</span><br>

If no <code>VkAllocationCallbacks</code> were provided when <code>commandPool</code>
was created, <code>pAllocator</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyCommandPool-device-parameter" href="chap6.html#VUID-vkDestroyCommandPool-device-parameter"></a> <span class="vuid">VUID-vkDestroyCommandPool-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyCommandPool-commandPool-parameter" href="chap6.html#VUID-vkDestroyCommandPool-commandPool-parameter"></a> <span class="vuid">VUID-vkDestroyCommandPool-commandPool-parameter</span><br>
 If <code>commandPool</code> is not <a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>commandPool</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandPool">VkCommandPool</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyCommandPool-pAllocator-parameter" href="chap6.html#VUID-vkDestroyCommandPool-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyCommandPool-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap11.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyCommandPool-commandPool-parent" href="chap6.html#VUID-vkDestroyCommandPool-commandPool-parent"></a> <span class="vuid">VUID-vkDestroyCommandPool-commandPool-parent</span><br>
 If <code>commandPool</code> is a valid handle, it <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandPool</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="commandbuffer-allocation"><a class="anchor" href="chap6.html#commandbuffer-allocation"></a>6.3. Command Buffer Allocation and Management</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To allocate command buffers, call:</p>
</div>
<div id="vkAllocateCommandBuffers" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="n">VkResult</span> <span class="nf">vkAllocateCommandBuffers</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCommandBufferAllocateInfo</span><span class="o">*</span>          <span class="n">pAllocateInfo</span><span class="p">,</span>
    <span class="n">VkCommandBuffer</span><span class="o">*</span>                            <span class="n">pCommandBuffers</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the command pool.</p>
</li>
<li>
<p><code>pAllocateInfo</code> is a pointer to a <a href="chap6.html#VkCommandBufferAllocateInfo">VkCommandBufferAllocateInfo</a>
structure describing parameters of the allocation.</p>
</li>
<li>
<p><code>pCommandBuffers</code> is a pointer to an array of <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a>
handles in which the resulting command buffer objects are returned.
The array <strong class="purple">must</strong> be at least the length specified by the
<code>commandBufferCount</code> member of <code>pAllocateInfo</code>.
Each allocated command buffer begins in the initial state.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkAllocateCommandBuffers</code> <strong class="purple">can</strong> be used to allocate multiple command
buffers.
If the allocation of any of those command buffers fails, the implementation
<strong class="purple">must</strong> free all successfully allocated command buffer objects from this
command, set all entries of the <code>pCommandBuffers</code> array to <code>NULL</code> and
return the error.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Filling <code>pCommandBuffers</code> with <code>NULL</code> values on failure is an exception
to the default error behavior that output parameters will have undefined
contents.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>When command buffers are first allocated, they are in the
<a href="chap6.html#commandbuffers-lifecycle">initial state</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkAllocateCommandBuffers-device-parameter" href="chap6.html#VUID-vkAllocateCommandBuffers-device-parameter"></a> <span class="vuid">VUID-vkAllocateCommandBuffers-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkAllocateCommandBuffers-pAllocateInfo-parameter" href="chap6.html#VUID-vkAllocateCommandBuffers-pAllocateInfo-parameter"></a> <span class="vuid">VUID-vkAllocateCommandBuffers-pAllocateInfo-parameter</span><br>
 <code>pAllocateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap6.html#VkCommandBufferAllocateInfo">VkCommandBufferAllocateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkAllocateCommandBuffers-pCommandBuffers-parameter" href="chap6.html#VUID-vkAllocateCommandBuffers-pCommandBuffers-parameter"></a> <span class="vuid">VUID-vkAllocateCommandBuffers-pCommandBuffers-parameter</span><br>
 <code>pCommandBuffers</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>pAllocateInfo-&gt;commandBufferCount</code> <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handles</p>
</li>
<li>
<p><a id="VUID-vkAllocateCommandBuffers-pAllocateInfo::commandBufferCount-arraylength" href="chap6.html#VUID-vkAllocateCommandBuffers-pAllocateInfo::commandBufferCount-arraylength"></a> <span class="vuid">VUID-vkAllocateCommandBuffers-pAllocateInfo::commandBufferCount-arraylength</span><br>
 <code>pAllocateInfo-&gt;commandBufferCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>pAllocateInfo-&gt;commandPool</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCommandBufferAllocateInfo</code> structure is defined as:</p>
</div>
<div id="VkCommandBufferAllocateInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCommandBufferAllocateInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>         <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>             <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkCommandPool</span>           <span class="n">commandPool</span><span class="p">;</span>
    <span class="n">VkCommandBufferLevel</span>    <span class="n">level</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                <span class="n">commandBufferCount</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCommandBufferAllocateInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>commandPool</code> is the command pool from which the command buffers are
allocated.</p>
</li>
<li>
<p><code>level</code> is a <a href="chap6.html#VkCommandBufferLevel">VkCommandBufferLevel</a> value specifying the command
buffer level.</p>
</li>
<li>
<p><code>commandBufferCount</code> is the number of command buffers to allocate
from the pool.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCommandBufferAllocateInfo-sType-sType" href="chap6.html#VUID-VkCommandBufferAllocateInfo-sType-sType"></a> <span class="vuid">VUID-VkCommandBufferAllocateInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COMMAND_BUFFER_ALLOCATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkCommandBufferAllocateInfo-pNext-pNext" href="chap6.html#VUID-VkCommandBufferAllocateInfo-pNext-pNext"></a> <span class="vuid">VUID-VkCommandBufferAllocateInfo-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCommandBufferAllocateInfo-commandPool-parameter" href="chap6.html#VUID-VkCommandBufferAllocateInfo-commandPool-parameter"></a> <span class="vuid">VUID-VkCommandBufferAllocateInfo-commandPool-parameter</span><br>
 <code>commandPool</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandPool">VkCommandPool</a> handle</p>
</li>
<li>
<p><a id="VUID-VkCommandBufferAllocateInfo-level-parameter" href="chap6.html#VUID-VkCommandBufferAllocateInfo-level-parameter"></a> <span class="vuid">VUID-VkCommandBufferAllocateInfo-level-parameter</span><br>
 <code>level</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBufferLevel">VkCommandBufferLevel</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of <a href="chap6.html#VkCommandBufferAllocateInfo">VkCommandBufferAllocateInfo</a>::<code>level</code>,
specifying the command buffer level, are:</p>
</div>
<div id="VkCommandBufferLevel" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkCommandBufferLevel</span> <span class="p">{</span>
    <span class="n">VK_COMMAND_BUFFER_LEVEL_PRIMARY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">VK_COMMAND_BUFFER_LEVEL_SECONDARY</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkCommandBufferLevel</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_COMMAND_BUFFER_LEVEL_PRIMARY</code> specifies a primary command
buffer.</p>
</li>
<li>
<p><code>VK_COMMAND_BUFFER_LEVEL_SECONDARY</code> specifies a secondary command
buffer.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To reset a command buffer, call:</p>
</div>
<div id="vkResetCommandBuffer" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="n">VkResult</span> <span class="nf">vkResetCommandBuffer</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="n">VkCommandBufferResetFlags</span>                   <span class="n">flags</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer to reset.
The command buffer <strong class="purple">can</strong> be in any state other than
<a href="chap6.html#commandbuffers-lifecycle">pending</a>, and is moved into the
<a href="chap6.html#commandbuffers-lifecycle">initial state</a>.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap6.html#VkCommandBufferResetFlagBits">VkCommandBufferResetFlagBits</a>
controlling the reset operation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Any primary command buffer that is in the <a href="chap6.html#commandbuffers-lifecycle">recording or executable state</a> and has <code>commandBuffer</code> recorded into
it, becomes <a href="chap6.html#commandbuffers-lifecycle">invalid</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkResetCommandBuffer-commandBuffer-00045" href="chap6.html#VUID-vkResetCommandBuffer-commandBuffer-00045"></a> <span class="vuid">VUID-vkResetCommandBuffer-commandBuffer-00045</span><br>

<code>commandBuffer</code> <strong class="purple">must</strong> not be in the <a href="chap6.html#commandbuffers-lifecycle">pending state</a></p>
</li>
<li>
<p><a id="VUID-vkResetCommandBuffer-commandBuffer-00046" href="chap6.html#VUID-vkResetCommandBuffer-commandBuffer-00046"></a> <span class="vuid">VUID-vkResetCommandBuffer-commandBuffer-00046</span><br>

<code>commandBuffer</code> <strong class="purple">must</strong> have been allocated from a pool that was
created with the <code>VK_COMMAND_POOL_CREATE_RESET_COMMAND_BUFFER_BIT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkResetCommandBuffer-commandBuffer-parameter" href="chap6.html#VUID-vkResetCommandBuffer-commandBuffer-parameter"></a> <span class="vuid">VUID-vkResetCommandBuffer-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkResetCommandBuffer-flags-parameter" href="chap6.html#VUID-vkResetCommandBuffer-flags-parameter"></a> <span class="vuid">VUID-vkResetCommandBuffer-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap6.html#VkCommandBufferResetFlagBits">VkCommandBufferResetFlagBits</a> values</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in <a href="chap6.html#vkResetCommandBuffer">vkResetCommandBuffer</a>::<code>flags</code>,
controlling the reset operation, are:</p>
</div>
<div id="VkCommandBufferResetFlagBits" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkCommandBufferResetFlagBits</span> <span class="p">{</span>
    <span class="n">VK_COMMAND_BUFFER_RESET_RELEASE_RESOURCES_BIT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkCommandBufferResetFlagBits</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_COMMAND_BUFFER_RESET_RELEASE_RESOURCES_BIT</code> specifies that most
or all memory resources currently owned by the command buffer <strong class="purple">should</strong> be
returned to the parent command pool.
If this flag is not set, then the command buffer <strong class="purple">may</strong> hold onto memory
resources and reuse them when recording commands.
<code>commandBuffer</code> is moved to the <a href="chap6.html#commandbuffers-lifecycle">initial
state</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkCommandBufferResetFlags" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkCommandBufferResetFlags</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkCommandBufferResetFlags</code> is a bitmask type for setting a mask of zero
or more <a href="chap6.html#VkCommandBufferResetFlagBits">VkCommandBufferResetFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To free command buffers, call:</p>
</div>
<div id="vkFreeCommandBuffers" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkFreeCommandBuffers</span><span class="p">(</span>
    <span class="n">VkDevice</span>                                    <span class="n">device</span><span class="p">,</span>
    <span class="n">VkCommandPool</span>                               <span class="n">commandPool</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">commandBufferCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCommandBuffer</span><span class="o">*</span>                      <span class="n">pCommandBuffers</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the command pool.</p>
</li>
<li>
<p><code>commandPool</code> is the command pool from which the command buffers
were allocated.</p>
</li>
<li>
<p><code>commandBufferCount</code> is the length of the <code>pCommandBuffers</code>
array.</p>
</li>
<li>
<p><code>pCommandBuffers</code> is a pointer to an array of handles of command
buffers to free.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Any primary command buffer that is in the <a href="chap6.html#commandbuffers-lifecycle">recording or executable state</a> and has any element of <code>pCommandBuffers</code>
recorded into it, becomes <a href="chap6.html#commandbuffers-lifecycle">invalid</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkFreeCommandBuffers-pCommandBuffers-00047" href="chap6.html#VUID-vkFreeCommandBuffers-pCommandBuffers-00047"></a> <span class="vuid">VUID-vkFreeCommandBuffers-pCommandBuffers-00047</span><br>

All elements of <code>pCommandBuffers</code> <strong class="purple">must</strong> not be in the
<a href="chap6.html#commandbuffers-lifecycle">pending state</a></p>
</li>
<li>
<p><a id="VUID-vkFreeCommandBuffers-pCommandBuffers-00048" href="chap6.html#VUID-vkFreeCommandBuffers-pCommandBuffers-00048"></a> <span class="vuid">VUID-vkFreeCommandBuffers-pCommandBuffers-00048</span><br>

<code>pCommandBuffers</code> <strong class="purple">must</strong> be a valid pointer to an array of
<code>commandBufferCount</code> <code>VkCommandBuffer</code> handles, each element of
which <strong class="purple">must</strong> either be a valid handle or <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkFreeCommandBuffers-device-parameter" href="chap6.html#VUID-vkFreeCommandBuffers-device-parameter"></a> <span class="vuid">VUID-vkFreeCommandBuffers-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkFreeCommandBuffers-commandPool-parameter" href="chap6.html#VUID-vkFreeCommandBuffers-commandPool-parameter"></a> <span class="vuid">VUID-vkFreeCommandBuffers-commandPool-parameter</span><br>
 <code>commandPool</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandPool">VkCommandPool</a> handle</p>
</li>
<li>
<p><a id="VUID-vkFreeCommandBuffers-commandBufferCount-arraylength" href="chap6.html#VUID-vkFreeCommandBuffers-commandBufferCount-arraylength"></a> <span class="vuid">VUID-vkFreeCommandBuffers-commandBufferCount-arraylength</span><br>
 <code>commandBufferCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkFreeCommandBuffers-commandPool-parent" href="chap6.html#VUID-vkFreeCommandBuffers-commandPool-parent"></a> <span class="vuid">VUID-vkFreeCommandBuffers-commandPool-parent</span><br>
 <code>commandPool</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
<li>
<p><a id="VUID-vkFreeCommandBuffers-pCommandBuffers-parent" href="chap6.html#VUID-vkFreeCommandBuffers-pCommandBuffers-parent"></a> <span class="vuid">VUID-vkFreeCommandBuffers-pCommandBuffers-parent</span><br>
 Each element of <code>pCommandBuffers</code> that is a valid handle <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>commandPool</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandPool</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to each member of <code>pCommandBuffers</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="commandbuffers-recording"><a class="anchor" href="chap6.html#commandbuffers-recording"></a>6.4. Command Buffer Recording</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To begin recording a command buffer, call:</p>
</div>
<div id="vkBeginCommandBuffer" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="n">VkResult</span> <span class="nf">vkBeginCommandBuffer</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCommandBufferBeginInfo</span><span class="o">*</span>             <span class="n">pBeginInfo</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the handle of the command buffer which is to be
put in the recording state.</p>
</li>
<li>
<p><code>pBeginInfo</code> is a pointer to a <a href="chap6.html#VkCommandBufferBeginInfo">VkCommandBufferBeginInfo</a>
structure defining additional information about how the command buffer
begins recording.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBeginCommandBuffer-commandBuffer-00049" href="chap6.html#VUID-vkBeginCommandBuffer-commandBuffer-00049"></a> <span class="vuid">VUID-vkBeginCommandBuffer-commandBuffer-00049</span><br>

<code>commandBuffer</code> <strong class="purple">must</strong> not be in the <a href="chap6.html#commandbuffers-lifecycle">recording or pending state</a></p>
</li>
<li>
<p><a id="VUID-vkBeginCommandBuffer-commandBuffer-00050" href="chap6.html#VUID-vkBeginCommandBuffer-commandBuffer-00050"></a> <span class="vuid">VUID-vkBeginCommandBuffer-commandBuffer-00050</span><br>

If <code>commandBuffer</code> was allocated from a <a href="chap6.html#VkCommandPool">VkCommandPool</a> which
did not have the <code>VK_COMMAND_POOL_CREATE_RESET_COMMAND_BUFFER_BIT</code>
flag set, <code>commandBuffer</code> <strong class="purple">must</strong> be in the
<a href="chap6.html#commandbuffers-lifecycle">initial state</a></p>
</li>
<li>
<p><a id="VUID-vkBeginCommandBuffer-commandBuffer-00051" href="chap6.html#VUID-vkBeginCommandBuffer-commandBuffer-00051"></a> <span class="vuid">VUID-vkBeginCommandBuffer-commandBuffer-00051</span><br>

If <code>commandBuffer</code> is a secondary command buffer, the
<code>pInheritanceInfo</code> member of <code>pBeginInfo</code> <strong class="purple">must</strong> be a valid
<code>VkCommandBufferInheritanceInfo</code> structure</p>
</li>
<li>
<p><a id="VUID-vkBeginCommandBuffer-commandBuffer-00052" href="chap6.html#VUID-vkBeginCommandBuffer-commandBuffer-00052"></a> <span class="vuid">VUID-vkBeginCommandBuffer-commandBuffer-00052</span><br>

If <code>commandBuffer</code> is a secondary command buffer and either the
<code>occlusionQueryEnable</code> member of the <code>pInheritanceInfo</code> member
of <code>pBeginInfo</code> is <code>VK_FALSE</code>, or the
<a href="chap38.html#features-occlusionQueryPrecise"><code>occlusionQueryPrecise</code></a> feature
is not enabled, then <code>pBeginInfo-&gt;pInheritanceInfo-&gt;queryFlags</code>
<strong class="purple">must</strong> not contain <code>VK_QUERY_CONTROL_PRECISE_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkBeginCommandBuffer-commandBuffer-02840" href="chap6.html#VUID-vkBeginCommandBuffer-commandBuffer-02840"></a> <span class="vuid">VUID-vkBeginCommandBuffer-commandBuffer-02840</span><br>

If <code>commandBuffer</code> is a primary command buffer, then
<code>pBeginInfo-&gt;flags</code> <strong class="purple">must</strong> not set both the
<code>VK_COMMAND_BUFFER_USAGE_ONE_TIME_SUBMIT_BIT</code> and the
<code>VK_COMMAND_BUFFER_USAGE_SIMULTANEOUS_USE_BIT</code> flags</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkBeginCommandBuffer-commandBuffer-parameter" href="chap6.html#VUID-vkBeginCommandBuffer-commandBuffer-parameter"></a> <span class="vuid">VUID-vkBeginCommandBuffer-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkBeginCommandBuffer-pBeginInfo-parameter" href="chap6.html#VUID-vkBeginCommandBuffer-pBeginInfo-parameter"></a> <span class="vuid">VUID-vkBeginCommandBuffer-pBeginInfo-parameter</span><br>
 <code>pBeginInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap6.html#VkCommandBufferBeginInfo">VkCommandBufferBeginInfo</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCommandBufferBeginInfo</code> structure is defined as:</p>
</div>
<div id="VkCommandBufferBeginInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCommandBufferBeginInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                          <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                              <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkCommandBufferUsageFlags</span>                <span class="n">flags</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkCommandBufferInheritanceInfo</span><span class="o">*</span>    <span class="n">pInheritanceInfo</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCommandBufferBeginInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap6.html#VkCommandBufferUsageFlagBits">VkCommandBufferUsageFlagBits</a>
specifying usage behavior for the command buffer.</p>
</li>
<li>
<p><code>pInheritanceInfo</code> is a pointer to a
<code>VkCommandBufferInheritanceInfo</code> structure, used if
<code>commandBuffer</code> is a secondary command buffer.
If this is a primary command buffer, then this value is ignored.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCommandBufferBeginInfo-flags-00055" href="chap6.html#VUID-VkCommandBufferBeginInfo-flags-00055"></a> <span class="vuid">VUID-VkCommandBufferBeginInfo-flags-00055</span><br>

If <code>flags</code> contains
<code>VK_COMMAND_BUFFER_USAGE_RENDER_PASS_CONTINUE_BIT</code>, the
<code>framebuffer</code> member of <code>pInheritanceInfo</code> <strong class="purple">must</strong> be either
<a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, or a valid <code>VkFramebuffer</code> that is compatible
with the <code>renderPass</code> member of <code>pInheritanceInfo</code></p>
</li>
<li>
<p><a id="VUID-VkCommandBufferBeginInfo-flags-06000" href="chap6.html#VUID-VkCommandBufferBeginInfo-flags-06000"></a> <span class="vuid">VUID-VkCommandBufferBeginInfo-flags-06000</span><br>

If <code>flags</code> contains
<code>VK_COMMAND_BUFFER_USAGE_RENDER_PASS_CONTINUE_BIT</code> and the
<code>renderPass</code> member of <code>pInheritanceInfo</code> is not
<a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>renderPass</code> <strong class="purple">must</strong> be a valid
<code>VkRenderPass</code></p>
</li>
<li>
<p><a id="VUID-VkCommandBufferBeginInfo-flags-06001" href="chap6.html#VUID-VkCommandBufferBeginInfo-flags-06001"></a> <span class="vuid">VUID-VkCommandBufferBeginInfo-flags-06001</span><br>

If <code>flags</code> contains
<code>VK_COMMAND_BUFFER_USAGE_RENDER_PASS_CONTINUE_BIT</code> and the
<code>renderPass</code> member of <code>pInheritanceInfo</code> is not
<a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, the <code>subpass</code> member of <code>pInheritanceInfo</code>
<strong class="purple">must</strong> be a valid subpass index within the <code>renderPass</code> member of
<code>pInheritanceInfo</code></p>
</li>
<li>
<p><a id="VUID-VkCommandBufferBeginInfo-flags-06002" href="chap6.html#VUID-VkCommandBufferBeginInfo-flags-06002"></a> <span class="vuid">VUID-VkCommandBufferBeginInfo-flags-06002</span><br>

If <code>flags</code> contains
<code>VK_COMMAND_BUFFER_USAGE_RENDER_PASS_CONTINUE_BIT</code> and the
<code>renderPass</code> member of <code>pInheritanceInfo</code> is
<a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, the <code>pNext</code> chain of <code>pInheritanceInfo</code>
<strong class="purple">must</strong> include a <a href="chap6.html#VkCommandBufferInheritanceRenderingInfo">VkCommandBufferInheritanceRenderingInfo</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCommandBufferBeginInfo-sType-sType" href="chap6.html#VUID-VkCommandBufferBeginInfo-sType-sType"></a> <span class="vuid">VUID-VkCommandBufferBeginInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COMMAND_BUFFER_BEGIN_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkCommandBufferBeginInfo-pNext-pNext" href="chap6.html#VUID-VkCommandBufferBeginInfo-pNext-pNext"></a> <span class="vuid">VUID-VkCommandBufferBeginInfo-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="chap6.html#VkDeviceGroupCommandBufferBeginInfo">VkDeviceGroupCommandBufferBeginInfo</a></p>
</li>
<li>
<p><a id="VUID-VkCommandBufferBeginInfo-sType-unique" href="chap6.html#VUID-VkCommandBufferBeginInfo-sType-unique"></a> <span class="vuid">VUID-VkCommandBufferBeginInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkCommandBufferBeginInfo-flags-parameter" href="chap6.html#VUID-VkCommandBufferBeginInfo-flags-parameter"></a> <span class="vuid">VUID-VkCommandBufferBeginInfo-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap6.html#VkCommandBufferUsageFlagBits">VkCommandBufferUsageFlagBits</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in <a href="chap6.html#VkCommandBufferBeginInfo">VkCommandBufferBeginInfo</a>::<code>flags</code>,
specifying usage behavior for a command buffer, are:</p>
</div>
<div id="VkCommandBufferUsageFlagBits" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkCommandBufferUsageFlagBits</span> <span class="p">{</span>
    <span class="n">VK_COMMAND_BUFFER_USAGE_ONE_TIME_SUBMIT_BIT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_COMMAND_BUFFER_USAGE_RENDER_PASS_CONTINUE_BIT</span> <span class="o">=</span> <span class="mh">0x00000002</span><span class="p">,</span>
    <span class="n">VK_COMMAND_BUFFER_USAGE_SIMULTANEOUS_USE_BIT</span> <span class="o">=</span> <span class="mh">0x00000004</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkCommandBufferUsageFlagBits</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_COMMAND_BUFFER_USAGE_ONE_TIME_SUBMIT_BIT</code> specifies that each
recording of the command buffer will only be submitted once, and the
command buffer will be reset and recorded again between each submission.</p>
</li>
<li>
<p><code>VK_COMMAND_BUFFER_USAGE_RENDER_PASS_CONTINUE_BIT</code> specifies that a
secondary command buffer is considered to be entirely inside a render
pass.
If this is a primary command buffer, then this bit is ignored.</p>
</li>
<li>
<p><code>VK_COMMAND_BUFFER_USAGE_SIMULTANEOUS_USE_BIT</code> specifies that a
command buffer <strong class="purple">can</strong> be resubmitted to a queue while it is in the
<em>pending state</em>, and recorded into multiple primary command buffers.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkCommandBufferUsageFlags" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkCommandBufferUsageFlags</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkCommandBufferUsageFlags</code> is a bitmask type for setting a mask of zero
or more <a href="chap6.html#VkCommandBufferUsageFlagBits">VkCommandBufferUsageFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the command buffer is a secondary command buffer, then the
<code>VkCommandBufferInheritanceInfo</code> structure defines any state that will
be inherited from the primary command buffer:</p>
</div>
<div id="VkCommandBufferInheritanceInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCommandBufferInheritanceInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                  <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                      <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkRenderPass</span>                     <span class="n">renderPass</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                         <span class="n">subpass</span><span class="p">;</span>
    <span class="n">VkFramebuffer</span>                    <span class="n">framebuffer</span><span class="p">;</span>
    <span class="n">VkBool32</span>                         <span class="n">occlusionQueryEnable</span><span class="p">;</span>
    <span class="n">VkQueryControlFlags</span>              <span class="n">queryFlags</span><span class="p">;</span>
    <span class="n">VkQueryPipelineStatisticFlags</span>    <span class="n">pipelineStatistics</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCommandBufferInheritanceInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>renderPass</code> is a <a href="chap8.html#VkRenderPass">VkRenderPass</a> object defining which render
passes the <code>VkCommandBuffer</code> will be <a href="chap8.html#renderpass-compatibility">compatible</a> with and <strong class="purple">can</strong> be executed within.</p>
</li>
<li>
<p><code>subpass</code> is the index of the subpass within the render pass
instance that the <code>VkCommandBuffer</code> will be executed within.</p>
</li>
<li>
<p><code>framebuffer</code> <strong class="purple">can</strong> refer to the <a href="chap8.html#VkFramebuffer">VkFramebuffer</a> object that the
<code>VkCommandBuffer</code> will be rendering to if it is executed within a
render pass instance.
It <strong class="purple">can</strong> be <a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a> if the framebuffer is not known.</p>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Specifying the exact framebuffer that the secondary command buffer will be
executed with <strong class="purple">may</strong> result in better performance at command buffer execution
time.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</li>
<li>
<p><code>occlusionQueryEnable</code> specifies whether the command buffer <strong class="purple">can</strong> be
executed while an occlusion query is active in the primary command
buffer.
If this is <code>VK_TRUE</code>, then this command buffer <strong class="purple">can</strong> be executed
whether the primary command buffer has an occlusion query active or not.
If this is <code>VK_FALSE</code>, then the primary command buffer <strong class="purple">must</strong> not
have an occlusion query active.</p>
</li>
<li>
<p><code>queryFlags</code> specifies the query flags that <strong class="purple">can</strong> be used by an
active occlusion query in the primary command buffer when this secondary
command buffer is executed.
If this value includes the <code>VK_QUERY_CONTROL_PRECISE_BIT</code> bit, then
the active query <strong class="purple">can</strong> return boolean results or actual sample counts.
If this bit is not set, then the active query <strong class="purple">must</strong> not use the
<code>VK_QUERY_CONTROL_PRECISE_BIT</code> bit.</p>
</li>
<li>
<p><code>pipelineStatistics</code> is a bitmask of
<a href="chap17.html#VkQueryPipelineStatisticFlagBits">VkQueryPipelineStatisticFlagBits</a> specifying the set of pipeline
statistics that <strong class="purple">can</strong> be counted by an active query in the primary
command buffer when this secondary command buffer is executed.
If this value includes a given bit, then this command buffer <strong class="purple">can</strong> be
executed whether the primary command buffer has a pipeline statistics
query active that includes this bit or not.
If this value excludes a given bit, then the active pipeline statistics
query <strong class="purple">must</strong> not be from a query pool that counts that statistic.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> will not be executed within a render pass
instance,
or if the render pass instance was begun with <a href="chap8.html#vkCmdBeginRendering">vkCmdBeginRendering</a>,
<code>renderPass</code>, <code>subpass</code>, and <code>framebuffer</code> are ignored.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCommandBufferInheritanceInfo-occlusionQueryEnable-00056" href="chap6.html#VUID-VkCommandBufferInheritanceInfo-occlusionQueryEnable-00056"></a> <span class="vuid">VUID-VkCommandBufferInheritanceInfo-occlusionQueryEnable-00056</span><br>

If the <a href="chap38.html#features-inheritedQueries"><code>inheritedQueries</code></a> feature is
not enabled, <code>occlusionQueryEnable</code> <strong class="purple">must</strong> be <code>VK_FALSE</code></p>
</li>
<li>
<p><a id="VUID-VkCommandBufferInheritanceInfo-queryFlags-00057" href="chap6.html#VUID-VkCommandBufferInheritanceInfo-queryFlags-00057"></a> <span class="vuid">VUID-VkCommandBufferInheritanceInfo-queryFlags-00057</span><br>

If the <a href="chap38.html#features-inheritedQueries"><code>inheritedQueries</code></a> feature is
enabled, <code>queryFlags</code> <strong class="purple">must</strong> be a valid combination of
<a href="chap17.html#VkQueryControlFlagBits">VkQueryControlFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkCommandBufferInheritanceInfo-queryFlags-02788" href="chap6.html#VUID-VkCommandBufferInheritanceInfo-queryFlags-02788"></a> <span class="vuid">VUID-VkCommandBufferInheritanceInfo-queryFlags-02788</span><br>

If the <a href="chap38.html#features-inheritedQueries"><code>inheritedQueries</code></a> feature is
not enabled, <code>queryFlags</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCommandBufferInheritanceInfo-pipelineStatistics-02789" href="chap6.html#VUID-VkCommandBufferInheritanceInfo-pipelineStatistics-02789"></a> <span class="vuid">VUID-VkCommandBufferInheritanceInfo-pipelineStatistics-02789</span><br>

If the <a href="chap38.html#features-pipelineStatisticsQuery"><code>pipelineStatisticsQuery</code></a> feature is enabled,
<code>pipelineStatistics</code> <strong class="purple">must</strong> be a valid combination of
<a href="chap17.html#VkQueryPipelineStatisticFlagBits">VkQueryPipelineStatisticFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkCommandBufferInheritanceInfo-pipelineStatistics-00058" href="chap6.html#VUID-VkCommandBufferInheritanceInfo-pipelineStatistics-00058"></a> <span class="vuid">VUID-VkCommandBufferInheritanceInfo-pipelineStatistics-00058</span><br>

If the <a href="chap38.html#features-pipelineStatisticsQuery"><code>pipelineStatisticsQuery</code></a> feature is not enabled,
<code>pipelineStatistics</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCommandBufferInheritanceInfo-sType-sType" href="chap6.html#VUID-VkCommandBufferInheritanceInfo-sType-sType"></a> <span class="vuid">VUID-VkCommandBufferInheritanceInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COMMAND_BUFFER_INHERITANCE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkCommandBufferInheritanceInfo-pNext-pNext" href="chap6.html#VUID-VkCommandBufferInheritanceInfo-pNext-pNext"></a> <span class="vuid">VUID-VkCommandBufferInheritanceInfo-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="#VkAttachmentSampleCountInfoAMD" class="target-missing">VkAttachmentSampleCountInfoAMD</a>, <a href="chap6.html#VkCommandBufferInheritanceRenderingInfo">VkCommandBufferInheritanceRenderingInfo</a>, or <a href="#VkMultiviewPerViewAttributesInfoNVX" class="target-missing">VkMultiviewPerViewAttributesInfoNVX</a></p>
</li>
<li>
<p><a id="VUID-VkCommandBufferInheritanceInfo-sType-unique" href="chap6.html#VUID-VkCommandBufferInheritanceInfo-sType-unique"></a> <span class="vuid">VUID-VkCommandBufferInheritanceInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkCommandBufferInheritanceInfo-commonparent" href="chap6.html#VUID-VkCommandBufferInheritanceInfo-commonparent"></a> <span class="vuid">VUID-VkCommandBufferInheritanceInfo-commonparent</span><br>
 Both of <code>framebuffer</code>, and <code>renderPass</code> that are valid handles of non-ignored parameters <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>On some implementations, not using the
<code>VK_COMMAND_BUFFER_USAGE_SIMULTANEOUS_USE_BIT</code> bit enables command
buffers to be patched in-place if needed, rather than creating a copy of the
command buffer.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>If a command buffer is in the <a href="chap6.html#commandbuffers-lifecycle">invalid, or
executable state</a>, and the command buffer was allocated from a command pool
with the <code>VK_COMMAND_POOL_CREATE_RESET_COMMAND_BUFFER_BIT</code> flag set,
then <code>vkBeginCommandBuffer</code> implicitly resets the command buffer,
behaving as if <code>vkResetCommandBuffer</code> had been called with
<code>VK_COMMAND_BUFFER_RESET_RELEASE_RESOURCES_BIT</code> not set.
After the implicit reset, <code>commandBuffer</code> is moved to the
<a href="chap6.html#commandbuffers-lifecycle">recording state</a>.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCommandBufferInheritanceRenderingInfo</code> structure is defined as:</p>
</div>
<div id="VkCommandBufferInheritanceRenderingInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCommandBufferInheritanceRenderingInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>          <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>              <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkRenderingFlags</span>         <span class="n">flags</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                 <span class="n">viewMask</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                 <span class="n">colorAttachmentCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkFormat</span><span class="o">*</span>          <span class="n">pColorAttachmentFormats</span><span class="p">;</span>
    <span class="n">VkFormat</span>                 <span class="n">depthAttachmentFormat</span><span class="p">;</span>
    <span class="n">VkFormat</span>                 <span class="n">stencilAttachmentFormat</span><span class="p">;</span>
    <span class="n">VkSampleCountFlagBits</span>    <span class="n">rasterizationSamples</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCommandBufferInheritanceRenderingInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkCommandBufferInheritanceRenderingInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_dynamic_rendering</span>
<span class="k">typedef</span> <span class="n">VkCommandBufferInheritanceRenderingInfo</span> <span class="n">VkCommandBufferInheritanceRenderingInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap8.html#VkRenderingFlagBits">VkRenderingFlagBits</a> used by the render
pass instance.</p>
</li>
<li>
<p><code>viewMask</code> is the view mask used for rendering.</p>
</li>
<li>
<p><code>colorAttachmentCount</code> is the number of color attachments specified
in the render pass instance.</p>
</li>
<li>
<p><code>pColorAttachmentFormats</code> is a pointer to an array of <a href="chap40.html#VkFormat">VkFormat</a>
values defining the format of color attachments.</p>
</li>
<li>
<p><code>depthAttachmentFormat</code> is a <a href="chap40.html#VkFormat">VkFormat</a> value defining the
format of the depth attachment.</p>
</li>
<li>
<p><code>stencilAttachmentFormat</code> is a <a href="chap40.html#VkFormat">VkFormat</a> value defining the
format of the stencil attachment.</p>
</li>
<li>
<p><code>rasterizationSamples</code> is a <a href="chap39.html#VkSampleCountFlagBits">VkSampleCountFlagBits</a> specifying
the number of samples used in rasterization.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="chap6.html#VkCommandBufferInheritanceInfo">VkCommandBufferInheritanceInfo</a> includes a
<code>VkCommandBufferInheritanceRenderingInfo</code> structure, then that structure
controls parameters of dynamic render pass instances that the
<a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> <strong class="purple">can</strong> be executed within.
If <a href="chap6.html#VkCommandBufferInheritanceInfo">VkCommandBufferInheritanceInfo</a>::<code>renderPass</code> is not
<a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, or
<code>VK_COMMAND_BUFFER_USAGE_RENDER_PASS_CONTINUE_BIT</code> is not specified in
<a href="chap6.html#VkCommandBufferBeginInfo">VkCommandBufferBeginInfo</a>::<code>flags</code>, parameters of this structure
are ignored.</p>
</div>
<div class="paragraph">
<p>If <code>colorAttachmentCount</code> is <code>0</code> and the
<a href="chap38.html#features-variableMultisampleRate"><code>variableMultisampleRate</code></a> feature
is enabled, <code>rasterizationSamples</code> is ignored.</p>
</div>
<div class="paragraph">
<p>If <code>depthAttachmentFormat</code>, <code>stencilAttachmentFormat</code>, or any
element of <code>pColorAttachmentFormats</code> is <code>VK_FORMAT_UNDEFINED</code>, it
indicates that the corresponding attachment is unused within the render pass
and writes to those attachments are discarded.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCommandBufferInheritanceRenderingInfo-colorAttachmentCount-06004" href="chap6.html#VUID-VkCommandBufferInheritanceRenderingInfo-colorAttachmentCount-06004"></a> <span class="vuid">VUID-VkCommandBufferInheritanceRenderingInfo-colorAttachmentCount-06004</span><br>

If <code>colorAttachmentCount</code> is not <code>0</code>, <code>rasterizationSamples</code>
<strong class="purple">must</strong> be a valid <a href="chap39.html#VkSampleCountFlagBits">VkSampleCountFlagBits</a> value</p>
</li>
<li>
<p><a id="VUID-VkCommandBufferInheritanceRenderingInfo-variableMultisampleRate-06005" href="chap6.html#VUID-VkCommandBufferInheritanceRenderingInfo-variableMultisampleRate-06005"></a> <span class="vuid">VUID-VkCommandBufferInheritanceRenderingInfo-variableMultisampleRate-06005</span><br>

If the <a href="chap38.html#features-variableMultisampleRate"><code>variableMultisampleRate</code></a> feature is not enabled,
<code>rasterizationSamples</code> <strong class="purple">must</strong> be a valid <a href="chap39.html#VkSampleCountFlagBits">VkSampleCountFlagBits</a>
value</p>
</li>
<li>
<p><a id="VUID-VkCommandBufferInheritanceRenderingInfo-pColorAttachmentFormats-06006" href="chap6.html#VUID-VkCommandBufferInheritanceRenderingInfo-pColorAttachmentFormats-06006"></a> <span class="vuid">VUID-VkCommandBufferInheritanceRenderingInfo-pColorAttachmentFormats-06006</span><br>

If any element of <code>pColorAttachmentFormats</code> is not
<code>VK_FORMAT_UNDEFINED</code>, it <strong class="purple">must</strong> be a format with
<a href="chap40.html#potential-format-features">potential format features</a> that include
<code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCommandBufferInheritanceRenderingInfo-depthAttachmentFormat-06540" href="chap6.html#VUID-VkCommandBufferInheritanceRenderingInfo-depthAttachmentFormat-06540"></a> <span class="vuid">VUID-VkCommandBufferInheritanceRenderingInfo-depthAttachmentFormat-06540</span><br>

If <code>depthAttachmentFormat</code> is not <code>VK_FORMAT_UNDEFINED</code>, it
<strong class="purple">must</strong> be a format that includes a depth component</p>
</li>
<li>
<p><a id="VUID-VkCommandBufferInheritanceRenderingInfo-depthAttachmentFormat-06007" href="chap6.html#VUID-VkCommandBufferInheritanceRenderingInfo-depthAttachmentFormat-06007"></a> <span class="vuid">VUID-VkCommandBufferInheritanceRenderingInfo-depthAttachmentFormat-06007</span><br>

If <code>depthAttachmentFormat</code> is not <code>VK_FORMAT_UNDEFINED</code>, it
<strong class="purple">must</strong> be a format with <a href="chap40.html#potential-format-features">potential format
features</a> that include
<code>VK_FORMAT_FEATURE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCommandBufferInheritanceRenderingInfo-stencilAttachmentFormat-06541" href="chap6.html#VUID-VkCommandBufferInheritanceRenderingInfo-stencilAttachmentFormat-06541"></a> <span class="vuid">VUID-VkCommandBufferInheritanceRenderingInfo-stencilAttachmentFormat-06541</span><br>

If <code>stencilAttachmentFormat</code> is not <code>VK_FORMAT_UNDEFINED</code>, it
<strong class="purple">must</strong> be a format that includes a stencil aspect</p>
</li>
<li>
<p><a id="VUID-VkCommandBufferInheritanceRenderingInfo-stencilAttachmentFormat-06199" href="chap6.html#VUID-VkCommandBufferInheritanceRenderingInfo-stencilAttachmentFormat-06199"></a> <span class="vuid">VUID-VkCommandBufferInheritanceRenderingInfo-stencilAttachmentFormat-06199</span><br>

If <code>stencilAttachmentFormat</code> is not <code>VK_FORMAT_UNDEFINED</code>, it
<strong class="purple">must</strong> be a format with <a href="chap40.html#potential-format-features">potential format
features</a> that include
<code>VK_FORMAT_FEATURE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkCommandBufferInheritanceRenderingInfo-depthAttachmentFormat-06200" href="chap6.html#VUID-VkCommandBufferInheritanceRenderingInfo-depthAttachmentFormat-06200"></a> <span class="vuid">VUID-VkCommandBufferInheritanceRenderingInfo-depthAttachmentFormat-06200</span><br>

If <code>depthAttachmentFormat</code> is not <code>VK_FORMAT_UNDEFINED</code> and
<code>stencilAttachmentFormat</code> is not <code>VK_FORMAT_UNDEFINED</code>,
<code>depthAttachmentFormat</code> <strong class="purple">must</strong> equal <code>stencilAttachmentFormat</code></p>
</li>
<li>
<p><a id="VUID-VkCommandBufferInheritanceRenderingInfo-multiview-06008" href="chap6.html#VUID-VkCommandBufferInheritanceRenderingInfo-multiview-06008"></a> <span class="vuid">VUID-VkCommandBufferInheritanceRenderingInfo-multiview-06008</span><br>

If the <a href="chap38.html#features-multiview"><code>multiview</code></a> feature is not enabled,
<code>viewMask</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkCommandBufferInheritanceRenderingInfo-viewMask-06009" href="chap6.html#VUID-VkCommandBufferInheritanceRenderingInfo-viewMask-06009"></a> <span class="vuid">VUID-VkCommandBufferInheritanceRenderingInfo-viewMask-06009</span><br>

The index of the most significant bit in <code>viewMask</code> <strong class="purple">must</strong> be less
than <a href="chap5.html#limits-maxMultiviewViewCount"><code>maxMultiviewViewCount</code></a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCommandBufferInheritanceRenderingInfo-sType-sType" href="chap6.html#VUID-VkCommandBufferInheritanceRenderingInfo-sType-sType"></a> <span class="vuid">VUID-VkCommandBufferInheritanceRenderingInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COMMAND_BUFFER_INHERITANCE_RENDERING_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkCommandBufferInheritanceRenderingInfo-flags-parameter" href="chap6.html#VUID-VkCommandBufferInheritanceRenderingInfo-flags-parameter"></a> <span class="vuid">VUID-VkCommandBufferInheritanceRenderingInfo-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap8.html#VkRenderingFlagBits">VkRenderingFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkCommandBufferInheritanceRenderingInfo-pColorAttachmentFormats-parameter" href="chap6.html#VUID-VkCommandBufferInheritanceRenderingInfo-pColorAttachmentFormats-parameter"></a> <span class="vuid">VUID-VkCommandBufferInheritanceRenderingInfo-pColorAttachmentFormats-parameter</span><br>
 If <code>colorAttachmentCount</code> is not <code>0</code>, <code>pColorAttachmentFormats</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>colorAttachmentCount</code> valid <a href="chap40.html#VkFormat">VkFormat</a> values</p>
</li>
<li>
<p><a id="VUID-VkCommandBufferInheritanceRenderingInfo-depthAttachmentFormat-parameter" href="chap6.html#VUID-VkCommandBufferInheritanceRenderingInfo-depthAttachmentFormat-parameter"></a> <span class="vuid">VUID-VkCommandBufferInheritanceRenderingInfo-depthAttachmentFormat-parameter</span><br>
 <code>depthAttachmentFormat</code> <strong class="purple">must</strong> be a valid <a href="chap40.html#VkFormat">VkFormat</a> value</p>
</li>
<li>
<p><a id="VUID-VkCommandBufferInheritanceRenderingInfo-stencilAttachmentFormat-parameter" href="chap6.html#VUID-VkCommandBufferInheritanceRenderingInfo-stencilAttachmentFormat-parameter"></a> <span class="vuid">VUID-VkCommandBufferInheritanceRenderingInfo-stencilAttachmentFormat-parameter</span><br>
 <code>stencilAttachmentFormat</code> <strong class="purple">must</strong> be a valid <a href="chap40.html#VkFormat">VkFormat</a> value</p>
</li>
<li>
<p><a id="VUID-VkCommandBufferInheritanceRenderingInfo-rasterizationSamples-parameter" href="chap6.html#VUID-VkCommandBufferInheritanceRenderingInfo-rasterizationSamples-parameter"></a> <span class="vuid">VUID-VkCommandBufferInheritanceRenderingInfo-rasterizationSamples-parameter</span><br>
 If <code>rasterizationSamples</code> is not <code>0</code>, <code>rasterizationSamples</code> <strong class="purple">must</strong> be a valid <a href="chap39.html#VkSampleCountFlagBits">VkSampleCountFlagBits</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Once recording starts, an application records a sequence of commands
(<code>vkCmd*</code>) to set state in the command buffer, draw, dispatch, and other
commands.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To complete recording of a command buffer, call:</p>
</div>
<div id="vkEndCommandBuffer" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="n">VkResult</span> <span class="nf">vkEndCommandBuffer</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer to complete recording.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The command buffer <strong class="purple">must</strong> have been in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a>, and, if successful, is moved to the
<a href="chap6.html#commandbuffers-lifecycle">executable state</a>.</p>
</div>
<div class="paragraph">
<p>If there was an error during recording, the application will be notified by
an unsuccessful return code returned by <code>vkEndCommandBuffer</code>, and the
command buffer will be moved to the <a href="chap6.html#commandbuffers-lifecycle">invalid
state</a>.</p>
</div>
<div class="paragraph">
<p>In case the application recorded one or more <a href="chap36.html#video-encode-operations">video
encode operations</a> into the command buffer, implementations <strong class="purple">may</strong> return the
<code>VK_ERROR_INVALID_VIDEO_STD_PARAMETERS_KHR</code> error if any of the
specified Video Std parameters do not adhere to the syntactic or semantic
requirements of the used video compression standard, or if values derived
from parameters according to the rules defined by the used video compression
standard do not adhere to the capabilities of the video compression standard
or the implementation.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Applications <strong class="purple">should</strong> not rely on the
<code>VK_ERROR_INVALID_VIDEO_STD_PARAMETERS_KHR</code> error being returned by any
command as a means to verify Video Std parameters, as implementations are
not required to report the error in any specific set of cases.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkEndCommandBuffer-commandBuffer-00059" href="chap6.html#VUID-vkEndCommandBuffer-commandBuffer-00059"></a> <span class="vuid">VUID-vkEndCommandBuffer-commandBuffer-00059</span><br>

<code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkEndCommandBuffer-commandBuffer-00060" href="chap6.html#VUID-vkEndCommandBuffer-commandBuffer-00060"></a> <span class="vuid">VUID-vkEndCommandBuffer-commandBuffer-00060</span><br>

If <code>commandBuffer</code> is a primary command buffer, there <strong class="purple">must</strong> not be
an active render pass instance</p>
</li>
<li>
<p><a id="VUID-vkEndCommandBuffer-commandBuffer-00061" href="chap6.html#VUID-vkEndCommandBuffer-commandBuffer-00061"></a> <span class="vuid">VUID-vkEndCommandBuffer-commandBuffer-00061</span><br>

All queries made <a href="chap17.html#queries-operation-active">active</a> during the
recording of <code>commandBuffer</code> <strong class="purple">must</strong> have been made inactive</p>
</li>
<li>
<p><a id="VUID-vkEndCommandBuffer-None-06991" href="chap6.html#VUID-vkEndCommandBuffer-None-06991"></a> <span class="vuid">VUID-vkEndCommandBuffer-None-06991</span><br>

There <strong class="purple">must</strong> be no video session object bound</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkEndCommandBuffer-commandBuffer-parameter" href="chap6.html#VUID-vkEndCommandBuffer-commandBuffer-parameter"></a> <span class="vuid">VUID-vkEndCommandBuffer-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_INVALID_VIDEO_STD_PARAMETERS_KHR</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>When a command buffer is in the executable state, it <strong class="purple">can</strong> be submitted to a
queue for execution.</p>
</div>
</div>
<div class="sect2">
<h3 id="commandbuffers-submission"><a class="anchor" href="chap6.html#commandbuffers-submission"></a>6.5. Command Buffer Submission</h3>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Submission can be a high overhead operation, and applications <strong class="purple">should</strong>
attempt to batch work together into as few calls to <code>vkQueueSubmit</code>
or <code>vkQueueSubmit2</code>
as possible.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To submit command buffers to a queue, call:</p>
</div>
<div id="vkQueueSubmit2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="n">VkResult</span> <span class="nf">vkQueueSubmit2</span><span class="p">(</span>
    <span class="n">VkQueue</span>                                     <span class="n">queue</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">submitCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkSubmitInfo2</span><span class="o">*</span>                        <span class="n">pSubmits</span><span class="p">,</span>
    <span class="n">VkFence</span>                                     <span class="n">fence</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkQueueSubmit2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_synchronization2</span>
<span class="n">VkResult</span> <span class="nf">vkQueueSubmit2KHR</span><span class="p">(</span>
    <span class="n">VkQueue</span>                                     <span class="n">queue</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">submitCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkSubmitInfo2</span><span class="o">*</span>                        <span class="n">pSubmits</span><span class="p">,</span>
    <span class="n">VkFence</span>                                     <span class="n">fence</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>queue</code> is the queue that the command buffers will be submitted to.</p>
</li>
<li>
<p><code>submitCount</code> is the number of elements in the <code>pSubmits</code> array.</p>
</li>
<li>
<p><code>pSubmits</code> is a pointer to an array of <a href="chap6.html#VkSubmitInfo2">VkSubmitInfo2</a>
structures, each specifying a command buffer submission batch.</p>
</li>
<li>
<p><code>fence</code> is an <strong class="purple">optional</strong> handle to a fence to be signaled once all
submitted command buffers have completed execution.
If <code>fence</code> is not <a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, it defines a
<a href="chap7.html#synchronization-fences-signaling">fence signal operation</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkQueueSubmit2</code> is a <a href="chap5.html#devsandqueues-submission">queue submission
command</a>, with each batch defined by an element of <code>pSubmits</code>.</p>
</div>
<div class="paragraph">
<p>Semaphore operations submitted with <a href="chap6.html#vkQueueSubmit2">vkQueueSubmit2</a> have additional
ordering constraints compared to other submission commands, with
dependencies involving previous and subsequent queue operations.
Information about these additional constraints can be found in the
<a href="chap7.html#synchronization-semaphores">semaphore</a> section of <a href="chap7.html">the
synchronization chapter</a>.</p>
</div>
<div class="paragraph">
<p>If any command buffer submitted to this queue is in the
<a href="chap6.html#commandbuffers-lifecycle">executable state</a>, it is moved to the
<a href="chap6.html#commandbuffers-lifecycle">pending state</a>.
Once execution of all submissions of a command buffer complete, it moves
from the <a href="chap6.html#commandbuffers-lifecycle">pending state</a>, back to the
<a href="chap6.html#commandbuffers-lifecycle">executable state</a>.
If a command buffer was recorded with the
<code>VK_COMMAND_BUFFER_USAGE_ONE_TIME_SUBMIT_BIT</code> flag, it instead moves
back to the <a href="chap6.html#commandbuffers-lifecycle">invalid state</a>.</p>
</div>
<div class="paragraph">
<p>If <code>vkQueueSubmit2</code> fails, it <strong class="purple">may</strong> return
<code>VK_ERROR_OUT_OF_HOST_MEMORY</code> or <code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code>.
If it does, the implementation <strong class="purple">must</strong> ensure that the state and contents of
any resources or synchronization primitives referenced by the submitted
command buffers and any semaphores referenced by <code>pSubmits</code> is
unaffected by the call or its failure.
If <code>vkQueueSubmit2</code> fails in such a way that the implementation is
unable to make that guarantee, the implementation <strong class="purple">must</strong> return
<code>VK_ERROR_DEVICE_LOST</code>.
See <a href="chap5.html#devsandqueues-lost-device">Lost Device</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkQueueSubmit2-fence-04894" href="chap6.html#VUID-vkQueueSubmit2-fence-04894"></a> <span class="vuid">VUID-vkQueueSubmit2-fence-04894</span><br>

If <code>fence</code> is not <a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>fence</code> <strong class="purple">must</strong> be
unsignaled</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit2-fence-04895" href="chap6.html#VUID-vkQueueSubmit2-fence-04895"></a> <span class="vuid">VUID-vkQueueSubmit2-fence-04895</span><br>

If <code>fence</code> is not <a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>fence</code> <strong class="purple">must</strong> not be
associated with any other queue command that has not yet completed
execution on that queue</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit2-synchronization2-03866" href="chap6.html#VUID-vkQueueSubmit2-synchronization2-03866"></a> <span class="vuid">VUID-vkQueueSubmit2-synchronization2-03866</span><br>

The <a href="chap38.html#features-synchronization2"><code>synchronization2</code></a> feature <strong class="purple">must</strong>
be enabled</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit2-commandBuffer-03867" href="chap6.html#VUID-vkQueueSubmit2-commandBuffer-03867"></a> <span class="vuid">VUID-vkQueueSubmit2-commandBuffer-03867</span><br>

If a command recorded into the <code>commandBuffer</code> member of any element
of the <code>pCommandBufferInfos</code> member of any element of <code>pSubmits</code>
referenced an <a href="chap7.html#VkEvent">VkEvent</a>, that event <strong class="purple">must</strong> not be referenced by a
command that has been submitted to another queue and is still in the
<em>pending state</em></p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit2-semaphore-03868" href="chap6.html#VUID-vkQueueSubmit2-semaphore-03868"></a> <span class="vuid">VUID-vkQueueSubmit2-semaphore-03868</span><br>

The <code>semaphore</code> member of any binary semaphore element of the
<code>pSignalSemaphoreInfos</code> member of any element of <code>pSubmits</code>
<strong class="purple">must</strong> be unsignaled when the semaphore signal operation it defines is
executed on the device</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit2-stageMask-03869" href="chap6.html#VUID-vkQueueSubmit2-stageMask-03869"></a> <span class="vuid">VUID-vkQueueSubmit2-stageMask-03869</span><br>

The <code>stageMask</code> member of any element of the
<code>pSignalSemaphoreInfos</code> member of any element of <code>pSubmits</code>
<strong class="purple">must</strong> only include pipeline stages that are supported by the queue
family which <code>queue</code> belongs to</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit2-stageMask-03870" href="chap6.html#VUID-vkQueueSubmit2-stageMask-03870"></a> <span class="vuid">VUID-vkQueueSubmit2-stageMask-03870</span><br>

The <code>stageMask</code> member of any element of the
<code>pWaitSemaphoreInfos</code> member of any element of <code>pSubmits</code> <strong class="purple">must</strong>
only include pipeline stages that are supported by the queue family
which <code>queue</code> belongs to</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit2-semaphore-03871" href="chap6.html#VUID-vkQueueSubmit2-semaphore-03871"></a> <span class="vuid">VUID-vkQueueSubmit2-semaphore-03871</span><br>

When a semaphore wait operation for a binary semaphore is executed, as
defined by the <code>semaphore</code> member of any element of the
<code>pWaitSemaphoreInfos</code> member of any element of <code>pSubmits</code>, there
<strong class="purple">must</strong> be no other queues waiting on the same semaphore</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit2-semaphore-03872" href="chap6.html#VUID-vkQueueSubmit2-semaphore-03872"></a> <span class="vuid">VUID-vkQueueSubmit2-semaphore-03872</span><br>

The <code>semaphore</code> member of any element of the
<code>pWaitSemaphoreInfos</code> member of any element of <code>pSubmits</code> <strong class="purple">must</strong>
be semaphores that are signaled, or have
<a href="chap7.html#synchronization-semaphores-signaling">semaphore signal operations</a>
previously submitted for execution</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit2-semaphore-03873" href="chap6.html#VUID-vkQueueSubmit2-semaphore-03873"></a> <span class="vuid">VUID-vkQueueSubmit2-semaphore-03873</span><br>

Any <code>semaphore</code> member of any element of the
<code>pWaitSemaphoreInfos</code> member of any element of <code>pSubmits</code> that
was created with a <a href="chap7.html#VkSemaphoreTypeKHR">VkSemaphoreTypeKHR</a> of
<code>VK_SEMAPHORE_TYPE_BINARY_KHR</code> <strong class="purple">must</strong> reference a semaphore signal
operation that has been submitted for execution and any semaphore signal
operations on which it depends (if any) <strong class="purple">must</strong> have also been submitted
for execution</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit2-commandBuffer-03874" href="chap6.html#VUID-vkQueueSubmit2-commandBuffer-03874"></a> <span class="vuid">VUID-vkQueueSubmit2-commandBuffer-03874</span><br>

The <code>commandBuffer</code> member of any element of the
<code>pCommandBufferInfos</code> member of any element of <code>pSubmits</code> <strong class="purple">must</strong>
be in the <a href="chap6.html#commandbuffers-lifecycle">pending or executable state</a></p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit2-commandBuffer-03875" href="chap6.html#VUID-vkQueueSubmit2-commandBuffer-03875"></a> <span class="vuid">VUID-vkQueueSubmit2-commandBuffer-03875</span><br>

If a command recorded into the <code>commandBuffer</code> member of any element
of the <code>pCommandBufferInfos</code> member of any element of <code>pSubmits</code>
was not recorded with the
<code>VK_COMMAND_BUFFER_USAGE_SIMULTANEOUS_USE_BIT</code>, it <strong class="purple">must</strong> not be in
the <a href="chap6.html#commandbuffers-lifecycle">pending state</a></p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit2-commandBuffer-03876" href="chap6.html#VUID-vkQueueSubmit2-commandBuffer-03876"></a> <span class="vuid">VUID-vkQueueSubmit2-commandBuffer-03876</span><br>

Any <a href="chap6.html#commandbuffers-secondary">secondary command buffers recorded</a>
into the <code>commandBuffer</code> member of any element of the
<code>pCommandBufferInfos</code> member of any element of <code>pSubmits</code> <strong class="purple">must</strong>
be in the <a href="chap6.html#commandbuffers-lifecycle">pending or executable state</a></p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit2-commandBuffer-03877" href="chap6.html#VUID-vkQueueSubmit2-commandBuffer-03877"></a> <span class="vuid">VUID-vkQueueSubmit2-commandBuffer-03877</span><br>

If any <a href="chap6.html#commandbuffers-secondary">secondary command buffers recorded</a>
into the <code>commandBuffer</code> member of any element of the
<code>pCommandBufferInfos</code> member of any element of <code>pSubmits</code> was
not recorded with the
<code>VK_COMMAND_BUFFER_USAGE_SIMULTANEOUS_USE_BIT</code>, it <strong class="purple">must</strong> not be in
the <a href="chap6.html#commandbuffers-lifecycle">pending state</a></p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit2-commandBuffer-03878" href="chap6.html#VUID-vkQueueSubmit2-commandBuffer-03878"></a> <span class="vuid">VUID-vkQueueSubmit2-commandBuffer-03878</span><br>

The <code>commandBuffer</code> member of any element of the
<code>pCommandBufferInfos</code> member of any element of <code>pSubmits</code> <strong class="purple">must</strong>
have been allocated from a <code>VkCommandPool</code> that was created for the
same queue family <code>queue</code> belongs to</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit2-commandBuffer-03879" href="chap6.html#VUID-vkQueueSubmit2-commandBuffer-03879"></a> <span class="vuid">VUID-vkQueueSubmit2-commandBuffer-03879</span><br>

If a command recorded into the <code>commandBuffer</code> member of any element
of the <code>pCommandBufferInfos</code> member of any element of <code>pSubmits</code>
includes a <a href="chap7.html#synchronization-queue-transfers-acquire">Queue Family
Transfer Acquire Operation</a>, there <strong class="purple">must</strong> exist a previously submitted
<a href="chap7.html#synchronization-queue-transfers-release">Queue Family Transfer Release
Operation</a> on a queue in the queue family identified by the acquire
operation, with parameters matching the acquire operation as defined in
the definition of such <a href="chap7.html#synchronization-queue-transfers-acquire">acquire operations</a>, and which happens before the acquire operation</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit2-commandBuffer-03880" href="chap6.html#VUID-vkQueueSubmit2-commandBuffer-03880"></a> <span class="vuid">VUID-vkQueueSubmit2-commandBuffer-03880</span><br>

If a command recorded into the <code>commandBuffer</code> member of any element
of the <code>pCommandBufferInfos</code> member of any element of <code>pSubmits</code>
was a <a href="chap17.html#vkCmdBeginQuery">vkCmdBeginQuery</a> whose <code>queryPool</code> was created with a
<code>queryType</code> of <code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code>, the
<a href="chap17.html#profiling-lock">profiling lock</a> <strong class="purple">must</strong> have been held continuously on
the <code>VkDevice</code> that <code>queue</code> was retrieved from, throughout
recording of those command buffers</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit2-queue-06447" href="chap6.html#VUID-vkQueueSubmit2-queue-06447"></a> <span class="vuid">VUID-vkQueueSubmit2-queue-06447</span><br>

If <code>queue</code> was not created with
<code>VK_DEVICE_QUEUE_CREATE_PROTECTED_BIT</code>, the <code>flags</code> member of
any element of <code>pSubmits</code> <strong class="purple">must</strong> not include
<code>VK_SUBMIT_PROTECTED_BIT_KHR</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkQueueSubmit2-queue-parameter" href="chap6.html#VUID-vkQueueSubmit2-queue-parameter"></a> <span class="vuid">VUID-vkQueueSubmit2-queue-parameter</span><br>
 <code>queue</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkQueue">VkQueue</a> handle</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit2-pSubmits-parameter" href="chap6.html#VUID-vkQueueSubmit2-pSubmits-parameter"></a> <span class="vuid">VUID-vkQueueSubmit2-pSubmits-parameter</span><br>
 If <code>submitCount</code> is not <code>0</code>, <code>pSubmits</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>submitCount</code> valid <a href="chap6.html#VkSubmitInfo2">VkSubmitInfo2</a> structures</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit2-fence-parameter" href="chap6.html#VUID-vkQueueSubmit2-fence-parameter"></a> <span class="vuid">VUID-vkQueueSubmit2-fence-parameter</span><br>
 If <code>fence</code> is not <a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>fence</code> <strong class="purple">must</strong> be a valid <a href="chap7.html#VkFence">VkFence</a> handle</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit2-commonparent" href="chap6.html#VUID-vkQueueSubmit2-commonparent"></a> <span class="vuid">VUID-vkQueueSubmit2-commonparent</span><br>
 Both of <code>fence</code>, and <code>queue</code> that are valid handles of non-ignored parameters <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>queue</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to <code>fence</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap36.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_DEVICE_LOST</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkSubmitInfo2</code> structure is defined as:</p>
</div>
<div id="VkSubmitInfo2" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkSubmitInfo2</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                     <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                         <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkSubmitFlags</span>                       <span class="n">flags</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                            <span class="n">waitSemaphoreInfoCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkSemaphoreSubmitInfo</span><span class="o">*</span>        <span class="n">pWaitSemaphoreInfos</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                            <span class="n">commandBufferInfoCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkCommandBufferSubmitInfo</span><span class="o">*</span>    <span class="n">pCommandBufferInfos</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                            <span class="n">signalSemaphoreInfoCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkSemaphoreSubmitInfo</span><span class="o">*</span>        <span class="n">pSignalSemaphoreInfos</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkSubmitInfo2</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkSubmitInfo2KHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_synchronization2</span>
<span class="k">typedef</span> <span class="n">VkSubmitInfo2</span> <span class="n">VkSubmitInfo2KHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap6.html#VkSubmitFlagBits">VkSubmitFlagBits</a>.</p>
</li>
<li>
<p><code>waitSemaphoreInfoCount</code> is the number of elements in
<code>pWaitSemaphoreInfos</code>.</p>
</li>
<li>
<p><code>pWaitSemaphoreInfos</code> is a pointer to an array of
<a href="chap6.html#VkSemaphoreSubmitInfo">VkSemaphoreSubmitInfo</a> structures defining
<a href="chap7.html#synchronization-semaphores-waiting">semaphore wait operations</a>.</p>
</li>
<li>
<p><code>commandBufferInfoCount</code> is the number of elements in
<code>pCommandBufferInfos</code> and the number of command buffers to execute
in the batch.</p>
</li>
<li>
<p><code>pCommandBufferInfos</code> is a pointer to an array of
<a href="chap6.html#VkCommandBufferSubmitInfo">VkCommandBufferSubmitInfo</a> structures describing command buffers to
execute in the batch.</p>
</li>
<li>
<p><code>signalSemaphoreInfoCount</code> is the number of elements in
<code>pSignalSemaphoreInfos</code>.</p>
</li>
<li>
<p><code>pSignalSemaphoreInfos</code> is a pointer to an array of
<a href="chap6.html#VkSemaphoreSubmitInfo">VkSemaphoreSubmitInfo</a> describing
<a href="chap7.html#synchronization-semaphores-signaling">semaphore signal operations</a>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSubmitInfo2-semaphore-03881" href="chap6.html#VUID-VkSubmitInfo2-semaphore-03881"></a> <span class="vuid">VUID-VkSubmitInfo2-semaphore-03881</span><br>

If the same semaphore is used as the <code>semaphore</code> member of both an
element of <code>pSignalSemaphoreInfos</code> and <code>pWaitSemaphoreInfos</code>,
and that semaphore is a timeline semaphore, the <code>value</code> member of
the <code>pSignalSemaphoreInfos</code> element <strong class="purple">must</strong> be greater than the
<code>value</code> member of the <code>pWaitSemaphoreInfos</code> element</p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo2-semaphore-03882" href="chap6.html#VUID-VkSubmitInfo2-semaphore-03882"></a> <span class="vuid">VUID-VkSubmitInfo2-semaphore-03882</span><br>

If the <code>semaphore</code> member of any element of
<code>pSignalSemaphoreInfos</code> is a timeline semaphore, the <code>value</code>
member of that element <strong class="purple">must</strong> have a value greater than the current value
of the semaphore when the <a href="chap7.html#synchronization-semaphores-signaling">semaphore signal operation</a> is executed</p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo2-semaphore-03883" href="chap6.html#VUID-VkSubmitInfo2-semaphore-03883"></a> <span class="vuid">VUID-VkSubmitInfo2-semaphore-03883</span><br>

If the <code>semaphore</code> member of any element of
<code>pSignalSemaphoreInfos</code> is a timeline semaphore, the <code>value</code>
member of that element <strong class="purple">must</strong> have a value which does not differ from the
current value of the semaphore or the value of any outstanding semaphore
wait or signal operation on that semaphore by more than
<a href="chap5.html#limits-maxTimelineSemaphoreValueDifference"><code>maxTimelineSemaphoreValueDifference</code></a></p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo2-semaphore-03884" href="chap6.html#VUID-VkSubmitInfo2-semaphore-03884"></a> <span class="vuid">VUID-VkSubmitInfo2-semaphore-03884</span><br>

If the <code>semaphore</code> member of any element of
<code>pWaitSemaphoreInfos</code> is a timeline semaphore, the <code>value</code>
member of that element <strong class="purple">must</strong> have a value which does not differ from the
current value of the semaphore or the value of any outstanding semaphore
wait or signal operation on that semaphore by more than
<a href="chap5.html#limits-maxTimelineSemaphoreValueDifference"><code>maxTimelineSemaphoreValueDifference</code></a></p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo2-flags-03886" href="chap6.html#VUID-VkSubmitInfo2-flags-03886"></a> <span class="vuid">VUID-VkSubmitInfo2-flags-03886</span><br>

If <code>flags</code> includes <code>VK_SUBMIT_PROTECTED_BIT</code>, all elements of
<code>pCommandBuffers</code> <strong class="purple">must</strong> be protected command buffers</p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo2-flags-03887" href="chap6.html#VUID-VkSubmitInfo2-flags-03887"></a> <span class="vuid">VUID-VkSubmitInfo2-flags-03887</span><br>

If <code>flags</code> does not include <code>VK_SUBMIT_PROTECTED_BIT</code>, each
element of <code>pCommandBuffers</code> <strong class="purple">must</strong> not be a protected command buffer</p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo2KHR-commandBuffer-06192" href="chap6.html#VUID-VkSubmitInfo2KHR-commandBuffer-06192"></a> <span class="vuid">VUID-VkSubmitInfo2KHR-commandBuffer-06192</span><br>

If any <code>commandBuffer</code> member of an element of
<code>pCommandBufferInfos</code> contains any <a href="chap8.html#renderpass-suspension">resumed
render pass instances</a>, they <strong class="purple">must</strong> be suspended by a render pass
instance earlier in submission order within <code>pCommandBufferInfos</code></p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo2KHR-commandBuffer-06010" href="chap6.html#VUID-VkSubmitInfo2KHR-commandBuffer-06010"></a> <span class="vuid">VUID-VkSubmitInfo2KHR-commandBuffer-06010</span><br>

If any <code>commandBuffer</code> member of an element of
<code>pCommandBufferInfos</code> contains any <a href="chap8.html#renderpass-suspension">suspended
render pass instances</a>, they <strong class="purple">must</strong> be resumed by a render pass instance
later in submission order within <code>pCommandBufferInfos</code></p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo2KHR-commandBuffer-06011" href="chap6.html#VUID-VkSubmitInfo2KHR-commandBuffer-06011"></a> <span class="vuid">VUID-VkSubmitInfo2KHR-commandBuffer-06011</span><br>

If any <code>commandBuffer</code> member of an element of
<code>pCommandBufferInfos</code> contains any <a href="chap8.html#renderpass-suspension">suspended
render pass instances</a>, there <strong class="purple">must</strong> be no action or synchronization
commands between that render pass instance and the render pass instance
that resumes it</p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo2KHR-commandBuffer-06012" href="chap6.html#VUID-VkSubmitInfo2KHR-commandBuffer-06012"></a> <span class="vuid">VUID-VkSubmitInfo2KHR-commandBuffer-06012</span><br>

If any <code>commandBuffer</code> member of an element of
<code>pCommandBufferInfos</code> contains any <a href="chap8.html#renderpass-suspension">suspended
render pass instances</a>, there <strong class="purple">must</strong> be no render pass instances between
that render pass instance and the render pass instance that resumes it</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSubmitInfo2-sType-sType" href="chap6.html#VUID-VkSubmitInfo2-sType-sType"></a> <span class="vuid">VUID-VkSubmitInfo2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_SUBMIT_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo2-pNext-pNext" href="chap6.html#VUID-VkSubmitInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkSubmitInfo2-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap6.html#VkPerformanceQuerySubmitInfoKHR">VkPerformanceQuerySubmitInfoKHR</a> or <a href="chap6.html#VkWin32KeyedMutexAcquireReleaseInfoKHR">VkWin32KeyedMutexAcquireReleaseInfoKHR</a></p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo2-sType-unique" href="chap6.html#VUID-VkSubmitInfo2-sType-unique"></a> <span class="vuid">VUID-VkSubmitInfo2-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo2-flags-parameter" href="chap6.html#VUID-VkSubmitInfo2-flags-parameter"></a> <span class="vuid">VUID-VkSubmitInfo2-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap6.html#VkSubmitFlagBits">VkSubmitFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo2-pWaitSemaphoreInfos-parameter" href="chap6.html#VUID-VkSubmitInfo2-pWaitSemaphoreInfos-parameter"></a> <span class="vuid">VUID-VkSubmitInfo2-pWaitSemaphoreInfos-parameter</span><br>
 If <code>waitSemaphoreInfoCount</code> is not <code>0</code>, <code>pWaitSemaphoreInfos</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>waitSemaphoreInfoCount</code> valid <a href="chap6.html#VkSemaphoreSubmitInfo">VkSemaphoreSubmitInfo</a> structures</p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo2-pCommandBufferInfos-parameter" href="chap6.html#VUID-VkSubmitInfo2-pCommandBufferInfos-parameter"></a> <span class="vuid">VUID-VkSubmitInfo2-pCommandBufferInfos-parameter</span><br>
 If <code>commandBufferInfoCount</code> is not <code>0</code>, <code>pCommandBufferInfos</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>commandBufferInfoCount</code> valid <a href="chap6.html#VkCommandBufferSubmitInfo">VkCommandBufferSubmitInfo</a> structures</p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo2-pSignalSemaphoreInfos-parameter" href="chap6.html#VUID-VkSubmitInfo2-pSignalSemaphoreInfos-parameter"></a> <span class="vuid">VUID-VkSubmitInfo2-pSignalSemaphoreInfos-parameter</span><br>
 If <code>signalSemaphoreInfoCount</code> is not <code>0</code>, <code>pSignalSemaphoreInfos</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>signalSemaphoreInfoCount</code> valid <a href="chap6.html#VkSemaphoreSubmitInfo">VkSemaphoreSubmitInfo</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in <a href="chap6.html#VkSubmitInfo2">VkSubmitInfo2</a>::<code>flags</code>, specifying
submission behavior, are:</p>
</div>
<div id="VkSubmitFlagBits" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="k">typedef</span> <span class="k">enum</span> <span class="n">VkSubmitFlagBits</span> <span class="p">{</span>
    <span class="n">VK_SUBMIT_PROTECTED_BIT</span> <span class="o">=</span> <span class="mh">0x00000001</span><span class="p">,</span>
    <span class="n">VK_SUBMIT_PROTECTED_BIT_KHR</span> <span class="o">=</span> <span class="n">VK_SUBMIT_PROTECTED_BIT</span><span class="p">,</span>
<span class="p">}</span> <span class="n">VkSubmitFlagBits</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkSubmitFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_synchronization2</span>
<span class="k">typedef</span> <span class="n">VkSubmitFlagBits</span> <span class="n">VkSubmitFlagBitsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUBMIT_PROTECTED_BIT</code> specifies that this batch is a protected
submission.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkSubmitFlags" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="k">typedef</span> <span class="n">VkFlags</span> <span class="n">VkSubmitFlags</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkSubmitFlagsKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_synchronization2</span>
<span class="k">typedef</span> <span class="n">VkSubmitFlags</span> <span class="n">VkSubmitFlagsKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkSubmitFlags</code> is a bitmask type for setting a mask of zero or more
<a href="chap6.html#VkSubmitFlagBits">VkSubmitFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkSemaphoreSubmitInfo</code> structure is defined as:</p>
</div>
<div id="VkSemaphoreSubmitInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkSemaphoreSubmitInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>          <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>              <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkSemaphore</span>              <span class="n">semaphore</span><span class="p">;</span>
    <span class="kt">uint64_t</span>                 <span class="n">value</span><span class="p">;</span>
    <span class="n">VkPipelineStageFlags2</span>    <span class="n">stageMask</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                 <span class="n">deviceIndex</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkSemaphoreSubmitInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkSemaphoreSubmitInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_synchronization2</span>
<span class="k">typedef</span> <span class="n">VkSemaphoreSubmitInfo</span> <span class="n">VkSemaphoreSubmitInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>semaphore</code> is a <a href="chap7.html#VkSemaphore">VkSemaphore</a> affected by this operation.</p>
</li>
<li>
<p><code>value</code> is
either the value used to signal <code>semaphore</code> or the value waited on
by <code>semaphore</code>, if <code>semaphore</code> is a timeline semaphore.
Otherwise it is
ignored.</p>
</li>
<li>
<p><code>stageMask</code> is a <a href="chap7.html#VkPipelineStageFlags2">VkPipelineStageFlags2</a> mask of pipeline stages
which limit the first synchronization scope of a semaphore signal
operation, or second synchronization scope of a semaphore wait operation
as described in the <a href="chap7.html#synchronization-semaphores-waiting">semaphore wait
operation</a> and <a href="chap7.html#synchronization-semaphores-signaling">semaphore signal
operation</a> sections of <a href="chap7.html">the synchronization
chapter</a>.</p>
</li>
<li>
<p><code>deviceIndex</code> is the index of the device within a device group that
executes the semaphore wait or signal operation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Whether this structure defines a semaphore wait or signal operation is
defined by how it is used.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSemaphoreSubmitInfo-stageMask-03929" href="chap6.html#VUID-VkSemaphoreSubmitInfo-stageMask-03929"></a> <span class="vuid">VUID-VkSemaphoreSubmitInfo-stageMask-03929</span><br>

If the <a href="chap38.html#features-geometryShader"><code>geometryShader</code></a> feature is not
enabled, <code>stageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_GEOMETRY_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSemaphoreSubmitInfo-stageMask-03930" href="chap6.html#VUID-VkSemaphoreSubmitInfo-stageMask-03930"></a> <span class="vuid">VUID-VkSemaphoreSubmitInfo-stageMask-03930</span><br>

If the <a href="chap38.html#features-tessellationShader"><code>tessellationShader</code></a> feature
is not enabled, <code>stageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_TESSELLATION_CONTROL_SHADER_BIT</code> or
<code>VK_PIPELINE_STAGE_2_TESSELLATION_EVALUATION_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSemaphoreSubmitInfo-stageMask-07317" href="chap6.html#VUID-VkSemaphoreSubmitInfo-stageMask-07317"></a> <span class="vuid">VUID-VkSemaphoreSubmitInfo-stageMask-07317</span><br>

If the <a href="chap38.html#features-attachmentFragmentShadingRate"><code>attachmentFragmentShadingRate</code></a> feature is not enabled,
<code>stageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkSemaphoreSubmitInfo-stageMask-07947" href="chap6.html#VUID-VkSemaphoreSubmitInfo-stageMask-07947"></a> <span class="vuid">VUID-VkSemaphoreSubmitInfo-stageMask-07947</span><br>

If the <a href="chap38.html#features-rayTracingPipeline"><code>rayTracingPipeline</code> feature</a>
is not enabled, <code>stageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_2_RAY_TRACING_SHADER_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkSemaphoreSubmitInfo-device-03888" href="chap6.html#VUID-VkSemaphoreSubmitInfo-device-03888"></a> <span class="vuid">VUID-VkSemaphoreSubmitInfo-device-03888</span><br>

If the <code>device</code> that <code>semaphore</code> was created on is not a device
group, <code>deviceIndex</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkSemaphoreSubmitInfo-device-03889" href="chap6.html#VUID-VkSemaphoreSubmitInfo-device-03889"></a> <span class="vuid">VUID-VkSemaphoreSubmitInfo-device-03889</span><br>

If the <code>device</code> that <code>semaphore</code> was created on is a device
group, <code>deviceIndex</code> <strong class="purple">must</strong> be a valid device index</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSemaphoreSubmitInfo-sType-sType" href="chap6.html#VUID-VkSemaphoreSubmitInfo-sType-sType"></a> <span class="vuid">VUID-VkSemaphoreSubmitInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_SEMAPHORE_SUBMIT_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkSemaphoreSubmitInfo-pNext-pNext" href="chap6.html#VUID-VkSemaphoreSubmitInfo-pNext-pNext"></a> <span class="vuid">VUID-VkSemaphoreSubmitInfo-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkSemaphoreSubmitInfo-semaphore-parameter" href="chap6.html#VUID-VkSemaphoreSubmitInfo-semaphore-parameter"></a> <span class="vuid">VUID-VkSemaphoreSubmitInfo-semaphore-parameter</span><br>
 <code>semaphore</code> <strong class="purple">must</strong> be a valid <a href="chap7.html#VkSemaphore">VkSemaphore</a> handle</p>
</li>
<li>
<p><a id="VUID-VkSemaphoreSubmitInfo-stageMask-parameter" href="chap6.html#VUID-VkSemaphoreSubmitInfo-stageMask-parameter"></a> <span class="vuid">VUID-VkSemaphoreSubmitInfo-stageMask-parameter</span><br>
 <code>stageMask</code> <strong class="purple">must</strong> be a valid combination of <a href="chap7.html#VkPipelineStageFlagBits2">VkPipelineStageFlagBits2</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkCommandBufferSubmitInfo</code> structure is defined as:</p>
</div>
<div id="VkCommandBufferSubmitInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_3</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkCommandBufferSubmitInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkCommandBuffer</span>    <span class="n">commandBuffer</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">deviceMask</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkCommandBufferSubmitInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkCommandBufferSubmitInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_synchronization2</span>
<span class="k">typedef</span> <span class="n">VkCommandBufferSubmitInfo</span> <span class="n">VkCommandBufferSubmitInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>commandBuffer</code> is a <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> to be submitted for
execution.</p>
</li>
<li>
<p><code>deviceMask</code> is a bitmask indicating which devices in a device group
execute the command buffer.
A <code>deviceMask</code> of <code>0</code> is equivalent to setting all bits
corresponding to valid devices in the group to <code>1</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCommandBufferSubmitInfo-commandBuffer-03890" href="chap6.html#VUID-VkCommandBufferSubmitInfo-commandBuffer-03890"></a> <span class="vuid">VUID-VkCommandBufferSubmitInfo-commandBuffer-03890</span><br>

<code>commandBuffer</code> <strong class="purple">must</strong> not have been allocated with
<code>VK_COMMAND_BUFFER_LEVEL_SECONDARY</code></p>
</li>
<li>
<p><a id="VUID-VkCommandBufferSubmitInfo-deviceMask-03891" href="chap6.html#VUID-VkCommandBufferSubmitInfo-deviceMask-03891"></a> <span class="vuid">VUID-VkCommandBufferSubmitInfo-deviceMask-03891</span><br>

If <code>deviceMask</code> is not <code>0</code>, it <strong class="purple">must</strong> be a valid device mask</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkCommandBufferSubmitInfo-sType-sType" href="chap6.html#VUID-VkCommandBufferSubmitInfo-sType-sType"></a> <span class="vuid">VUID-VkCommandBufferSubmitInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_COMMAND_BUFFER_SUBMIT_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkCommandBufferSubmitInfo-pNext-pNext" href="chap6.html#VUID-VkCommandBufferSubmitInfo-pNext-pNext"></a> <span class="vuid">VUID-VkCommandBufferSubmitInfo-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkCommandBufferSubmitInfo-commandBuffer-parameter" href="chap6.html#VUID-VkCommandBufferSubmitInfo-commandBuffer-parameter"></a> <span class="vuid">VUID-VkCommandBufferSubmitInfo-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To submit command buffers to a queue, call:</p>
</div>
<div id="vkQueueSubmit" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="n">VkResult</span> <span class="nf">vkQueueSubmit</span><span class="p">(</span>
    <span class="n">VkQueue</span>                                     <span class="n">queue</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">submitCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkSubmitInfo</span><span class="o">*</span>                         <span class="n">pSubmits</span><span class="p">,</span>
    <span class="n">VkFence</span>                                     <span class="n">fence</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>queue</code> is the queue that the command buffers will be submitted to.</p>
</li>
<li>
<p><code>submitCount</code> is the number of elements in the <code>pSubmits</code> array.</p>
</li>
<li>
<p><code>pSubmits</code> is a pointer to an array of <a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a>
structures, each specifying a command buffer submission batch.</p>
</li>
<li>
<p><code>fence</code> is an <strong class="purple">optional</strong> handle to a fence to be signaled once all
submitted command buffers have completed execution.
If <code>fence</code> is not <a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, it defines a
<a href="chap7.html#synchronization-fences-signaling">fence signal operation</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkQueueSubmit</code> is a <a href="chap5.html#devsandqueues-submission">queue submission
command</a>, with each batch defined by an element of <code>pSubmits</code>.
Batches begin execution in the order they appear in <code>pSubmits</code>, but <strong class="purple">may</strong>
complete out of order.</p>
</div>
<div class="paragraph">
<p>Fence and semaphore operations submitted with <a href="chap6.html#vkQueueSubmit">vkQueueSubmit</a> have
additional ordering constraints compared to other submission commands, with
dependencies involving previous and subsequent queue operations.
Information about these additional constraints can be found in the
<a href="chap7.html#synchronization-semaphores">semaphore</a> and <a href="chap7.html#synchronization-fences">fence</a> sections of <a href="chap7.html">the synchronization chapter</a>.</p>
</div>
<div class="paragraph">
<p>Details on the interaction of <code>pWaitDstStageMask</code> with synchronization
are described in the <a href="chap7.html#synchronization-semaphores-waiting">semaphore wait
operation</a> section of <a href="chap7.html">the synchronization chapter</a>.</p>
</div>
<div class="paragraph">
<p>The order that batches appear in <code>pSubmits</code> is used to determine
<a href="chap7.html#synchronization-submission-order">submission order</a>, and thus all the
<a href="chap7.html#synchronization-implicit">implicit ordering guarantees</a> that respect it.
Other than these implicit ordering guarantees and any <a href="chap7.html">explicit synchronization primitives</a>, these batches <strong class="purple">may</strong> overlap or
otherwise execute out of order.</p>
</div>
<div class="paragraph">
<p>If any command buffer submitted to this queue is in the
<a href="chap6.html#commandbuffers-lifecycle">executable state</a>, it is moved to the
<a href="chap6.html#commandbuffers-lifecycle">pending state</a>.
Once execution of all submissions of a command buffer complete, it moves
from the <a href="chap6.html#commandbuffers-lifecycle">pending state</a>, back to the
<a href="chap6.html#commandbuffers-lifecycle">executable state</a>.
If a command buffer was recorded with the
<code>VK_COMMAND_BUFFER_USAGE_ONE_TIME_SUBMIT_BIT</code> flag, it instead moves to
the <a href="chap6.html#commandbuffers-lifecycle">invalid state</a>.</p>
</div>
<div class="paragraph">
<p>If <code>vkQueueSubmit</code> fails, it <strong class="purple">may</strong> return
<code>VK_ERROR_OUT_OF_HOST_MEMORY</code> or <code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code>.
If it does, the implementation <strong class="purple">must</strong> ensure that the state and contents of
any resources or synchronization primitives referenced by the submitted
command buffers and any semaphores referenced by <code>pSubmits</code> is
unaffected by the call or its failure.
If <code>vkQueueSubmit</code> fails in such a way that the implementation is unable
to make that guarantee, the implementation <strong class="purple">must</strong> return
<code>VK_ERROR_DEVICE_LOST</code>.
See <a href="chap5.html#devsandqueues-lost-device">Lost Device</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkQueueSubmit-fence-00063" href="chap6.html#VUID-vkQueueSubmit-fence-00063"></a> <span class="vuid">VUID-vkQueueSubmit-fence-00063</span><br>

If <code>fence</code> is not <a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>fence</code> <strong class="purple">must</strong> be
unsignaled</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit-fence-00064" href="chap6.html#VUID-vkQueueSubmit-fence-00064"></a> <span class="vuid">VUID-vkQueueSubmit-fence-00064</span><br>

If <code>fence</code> is not <a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>fence</code> <strong class="purple">must</strong> not be
associated with any other queue command that has not yet completed
execution on that queue</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit-pCommandBuffers-00065" href="chap6.html#VUID-vkQueueSubmit-pCommandBuffers-00065"></a> <span class="vuid">VUID-vkQueueSubmit-pCommandBuffers-00065</span><br>

Any calls to <a href="chap7.html#vkCmdSetEvent">vkCmdSetEvent</a>, <a href="chap7.html#vkCmdResetEvent">vkCmdResetEvent</a> or
<a href="chap7.html#vkCmdWaitEvents">vkCmdWaitEvents</a> that have been recorded into any of the command
buffer elements of the <code>pCommandBuffers</code> member of any element of
<code>pSubmits</code>, <strong class="purple">must</strong> not reference any <a href="chap7.html#VkEvent">VkEvent</a> that is referenced
by any of those commands in a command buffer that has been submitted to
another queue and is still in the <em>pending state</em></p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit-pWaitDstStageMask-00066" href="chap6.html#VUID-vkQueueSubmit-pWaitDstStageMask-00066"></a> <span class="vuid">VUID-vkQueueSubmit-pWaitDstStageMask-00066</span><br>

Any stage flag included in any element of the <code>pWaitDstStageMask</code>
member of any element of <code>pSubmits</code> <strong class="purple">must</strong> be a pipeline stage
supported by one of the capabilities of <code>queue</code>, as specified in the
<a href="chap7.html#synchronization-pipeline-stages-supported">table of supported pipeline
stages</a></p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit-pSignalSemaphores-00067" href="chap6.html#VUID-vkQueueSubmit-pSignalSemaphores-00067"></a> <span class="vuid">VUID-vkQueueSubmit-pSignalSemaphores-00067</span><br>

Each binary semaphore element of the <code>pSignalSemaphores</code> member of
any element of <code>pSubmits</code> <strong class="purple">must</strong> be unsignaled when the semaphore
signal operation it defines is executed on the device</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit-pWaitSemaphores-00068" href="chap6.html#VUID-vkQueueSubmit-pWaitSemaphores-00068"></a> <span class="vuid">VUID-vkQueueSubmit-pWaitSemaphores-00068</span><br>

When a semaphore wait operation referring to a binary semaphore defined
by any element of the <code>pWaitSemaphores</code> member of any element of
<code>pSubmits</code> executes on <code>queue</code>, there <strong class="purple">must</strong> be no other queues
waiting on the same semaphore</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit-pWaitSemaphores-03238" href="chap6.html#VUID-vkQueueSubmit-pWaitSemaphores-03238"></a> <span class="vuid">VUID-vkQueueSubmit-pWaitSemaphores-03238</span><br>

All elements of the <code>pWaitSemaphores</code> member of all elements of
<code>pSubmits</code> created with a <a href="chap7.html#VkSemaphoreType">VkSemaphoreType</a> of
<code>VK_SEMAPHORE_TYPE_BINARY</code> <strong class="purple">must</strong> reference a semaphore signal
operation that has been submitted for execution and any semaphore signal
operations on which it depends (if any) <strong class="purple">must</strong> have also been submitted
for execution</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit-pCommandBuffers-00070" href="chap6.html#VUID-vkQueueSubmit-pCommandBuffers-00070"></a> <span class="vuid">VUID-vkQueueSubmit-pCommandBuffers-00070</span><br>

Each element of the <code>pCommandBuffers</code> member of each element of
<code>pSubmits</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">pending or
executable state</a></p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit-pCommandBuffers-00071" href="chap6.html#VUID-vkQueueSubmit-pCommandBuffers-00071"></a> <span class="vuid">VUID-vkQueueSubmit-pCommandBuffers-00071</span><br>

If any element of the <code>pCommandBuffers</code> member of any element of
<code>pSubmits</code> was not recorded with the
<code>VK_COMMAND_BUFFER_USAGE_SIMULTANEOUS_USE_BIT</code>, it <strong class="purple">must</strong> not be in
the <a href="chap6.html#commandbuffers-lifecycle">pending state</a></p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit-pCommandBuffers-00072" href="chap6.html#VUID-vkQueueSubmit-pCommandBuffers-00072"></a> <span class="vuid">VUID-vkQueueSubmit-pCommandBuffers-00072</span><br>

Any <a href="chap6.html#commandbuffers-secondary">secondary command buffers recorded</a>
into any element of the <code>pCommandBuffers</code> member of any element of
<code>pSubmits</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">pending or
executable state</a></p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit-pCommandBuffers-00073" href="chap6.html#VUID-vkQueueSubmit-pCommandBuffers-00073"></a> <span class="vuid">VUID-vkQueueSubmit-pCommandBuffers-00073</span><br>

If any <a href="chap6.html#commandbuffers-secondary">secondary command buffers recorded</a>
into any element of the <code>pCommandBuffers</code> member of any element of
<code>pSubmits</code> was not recorded with the
<code>VK_COMMAND_BUFFER_USAGE_SIMULTANEOUS_USE_BIT</code>, it <strong class="purple">must</strong> not be in
the <a href="chap6.html#commandbuffers-lifecycle">pending state</a></p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit-pCommandBuffers-00074" href="chap6.html#VUID-vkQueueSubmit-pCommandBuffers-00074"></a> <span class="vuid">VUID-vkQueueSubmit-pCommandBuffers-00074</span><br>

Each element of the <code>pCommandBuffers</code> member of each element of
<code>pSubmits</code> <strong class="purple">must</strong> have been allocated from a <code>VkCommandPool</code> that
was created for the same queue family <code>queue</code> belongs to</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit-pSubmits-02207" href="chap6.html#VUID-vkQueueSubmit-pSubmits-02207"></a> <span class="vuid">VUID-vkQueueSubmit-pSubmits-02207</span><br>

If any element of <code>pSubmits-&gt;pCommandBuffers</code> includes a
<a href="chap7.html#synchronization-queue-transfers-acquire">Queue Family Transfer Acquire
Operation</a>, there <strong class="purple">must</strong> exist a previously submitted
<a href="chap7.html#synchronization-queue-transfers-release">Queue Family Transfer Release
Operation</a> on a queue in the queue family identified by the acquire
operation, with parameters matching the acquire operation as defined in
the definition of such <a href="chap7.html#synchronization-queue-transfers-acquire">acquire operations</a>, and which happens-before the acquire operation</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit-pCommandBuffers-03220" href="chap6.html#VUID-vkQueueSubmit-pCommandBuffers-03220"></a> <span class="vuid">VUID-vkQueueSubmit-pCommandBuffers-03220</span><br>

If a command recorded into any element of <code>pCommandBuffers</code> was a
<a href="chap17.html#vkCmdBeginQuery">vkCmdBeginQuery</a> whose <code>queryPool</code> was created with a
<code>queryType</code> of <code>VK_QUERY_TYPE_PERFORMANCE_QUERY_KHR</code>, the
<a href="chap17.html#profiling-lock">profiling lock</a> <strong class="purple">must</strong> have been held continuously on
the <code>VkDevice</code> that <code>queue</code> was retrieved from, throughout
recording of those command buffers</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit-pSubmits-02808" href="chap6.html#VUID-vkQueueSubmit-pSubmits-02808"></a> <span class="vuid">VUID-vkQueueSubmit-pSubmits-02808</span><br>

Any resource created with <code>VK_SHARING_MODE_EXCLUSIVE</code> that is read
by an operation specified by <code>pSubmits</code> <strong class="purple">must</strong> not be owned by any
queue family other than the one which <code>queue</code> belongs to, at the
time it is executed</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit-pSubmits-04626" href="chap6.html#VUID-vkQueueSubmit-pSubmits-04626"></a> <span class="vuid">VUID-vkQueueSubmit-pSubmits-04626</span><br>

Any resource created with <code>VK_SHARING_MODE_CONCURRENT</code> that is
accessed by an operation specified by <code>pSubmits</code> <strong class="purple">must</strong> have included
the queue family of <code>queue</code> at resource creation time</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit-queue-06448" href="chap6.html#VUID-vkQueueSubmit-queue-06448"></a> <span class="vuid">VUID-vkQueueSubmit-queue-06448</span><br>

If <code>queue</code> was not created with
<code>VK_DEVICE_QUEUE_CREATE_PROTECTED_BIT</code>, there <strong class="purple">must</strong> be no element of
<code>pSubmits</code> that includes an <a href="chap6.html#VkProtectedSubmitInfo">VkProtectedSubmitInfo</a> structure in
its <code>pNext</code> chain with <code>protectedSubmit</code> equal to <code>VK_TRUE</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkQueueSubmit-queue-parameter" href="chap6.html#VUID-vkQueueSubmit-queue-parameter"></a> <span class="vuid">VUID-vkQueueSubmit-queue-parameter</span><br>
 <code>queue</code> <strong class="purple">must</strong> be a valid <a href="chap5.html#VkQueue">VkQueue</a> handle</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit-pSubmits-parameter" href="chap6.html#VUID-vkQueueSubmit-pSubmits-parameter"></a> <span class="vuid">VUID-vkQueueSubmit-pSubmits-parameter</span><br>
 If <code>submitCount</code> is not <code>0</code>, <code>pSubmits</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>submitCount</code> valid <a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a> structures</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit-fence-parameter" href="chap6.html#VUID-vkQueueSubmit-fence-parameter"></a> <span class="vuid">VUID-vkQueueSubmit-fence-parameter</span><br>
 If <code>fence</code> is not <a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>fence</code> <strong class="purple">must</strong> be a valid <a href="chap7.html#VkFence">VkFence</a> handle</p>
</li>
<li>
<p><a id="VUID-vkQueueSubmit-commonparent" href="chap6.html#VUID-vkQueueSubmit-commonparent"></a> <span class="vuid">VUID-vkQueueSubmit-commonparent</span><br>
 Both of <code>fence</code>, and <code>queue</code> that are valid handles of non-ignored parameters <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>queue</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to <code>fence</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap36.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
</table>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap3.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap3.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_DEVICE_LOST</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkSubmitInfo</code> structure is defined as:</p>
</div>
<div id="VkSubmitInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkSubmitInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>                <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>                    <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                       <span class="n">waitSemaphoreCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkSemaphore</span><span class="o">*</span>             <span class="n">pWaitSemaphores</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkPipelineStageFlags</span><span class="o">*</span>    <span class="n">pWaitDstStageMask</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                       <span class="n">commandBufferCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkCommandBuffer</span><span class="o">*</span>         <span class="n">pCommandBuffers</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                       <span class="n">signalSemaphoreCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkSemaphore</span><span class="o">*</span>             <span class="n">pSignalSemaphores</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkSubmitInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>waitSemaphoreCount</code> is the number of semaphores upon which to wait
before executing the command buffers for the batch.</p>
</li>
<li>
<p><code>pWaitSemaphores</code> is a pointer to an array of <a href="chap7.html#VkSemaphore">VkSemaphore</a>
handles upon which to wait before the command buffers for this batch
begin execution.
If semaphores to wait on are provided, they define a
<a href="chap7.html#synchronization-semaphores-waiting">semaphore wait operation</a>.</p>
</li>
<li>
<p><code>pWaitDstStageMask</code> is a pointer to an array of pipeline stages at
which each corresponding semaphore wait will occur.</p>
</li>
<li>
<p><code>commandBufferCount</code> is the number of command buffers to execute in
the batch.</p>
</li>
<li>
<p><code>pCommandBuffers</code> is a pointer to an array of <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a>
handles to execute in the batch.</p>
</li>
<li>
<p><code>signalSemaphoreCount</code> is the number of semaphores to be signaled
once the commands specified in <code>pCommandBuffers</code> have completed
execution.</p>
</li>
<li>
<p><code>pSignalSemaphores</code> is a pointer to an array of <a href="chap7.html#VkSemaphore">VkSemaphore</a>
handles which will be signaled when the command buffers for this batch
have completed execution.
If semaphores to be signaled are provided, they define a
<a href="chap7.html#synchronization-semaphores-signaling">semaphore signal operation</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The order that command buffers appear in <code>pCommandBuffers</code> is used to
determine <a href="chap7.html#synchronization-submission-order">submission order</a>, and thus
all the <a href="chap7.html#synchronization-implicit">implicit ordering guarantees</a> that
respect it.
Other than these implicit ordering guarantees and any <a href="chap7.html">explicit synchronization primitives</a>, these command buffers <strong class="purple">may</strong> overlap or
otherwise execute out of order.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSubmitInfo-pWaitDstStageMask-04090" href="chap6.html#VUID-VkSubmitInfo-pWaitDstStageMask-04090"></a> <span class="vuid">VUID-VkSubmitInfo-pWaitDstStageMask-04090</span><br>

If the <a href="chap38.html#features-geometryShader"><code>geometryShader</code></a> feature is not
enabled, <code>pWaitDstStageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_GEOMETRY_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pWaitDstStageMask-04091" href="chap6.html#VUID-VkSubmitInfo-pWaitDstStageMask-04091"></a> <span class="vuid">VUID-VkSubmitInfo-pWaitDstStageMask-04091</span><br>

If the <a href="chap38.html#features-tessellationShader"><code>tessellationShader</code></a> feature
is not enabled, <code>pWaitDstStageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_TESSELLATION_CONTROL_SHADER_BIT</code> or
<code>VK_PIPELINE_STAGE_TESSELLATION_EVALUATION_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pWaitDstStageMask-07319" href="chap6.html#VUID-VkSubmitInfo-pWaitDstStageMask-07319"></a> <span class="vuid">VUID-VkSubmitInfo-pWaitDstStageMask-07319</span><br>

If the <a href="chap38.html#features-attachmentFragmentShadingRate"><code>attachmentFragmentShadingRate</code></a> feature is not enabled,
<code>pWaitDstStageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pWaitDstStageMask-03937" href="chap6.html#VUID-VkSubmitInfo-pWaitDstStageMask-03937"></a> <span class="vuid">VUID-VkSubmitInfo-pWaitDstStageMask-03937</span><br>

If the <a href="chap38.html#features-synchronization2"><code>synchronization2</code></a> feature is
not enabled, <code>pWaitDstStageMask</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pWaitDstStageMask-07950" href="chap6.html#VUID-VkSubmitInfo-pWaitDstStageMask-07950"></a> <span class="vuid">VUID-VkSubmitInfo-pWaitDstStageMask-07950</span><br>

If the <a href="chap38.html#features-rayTracingPipeline"><code>rayTracingPipeline</code> feature</a>
is not enabled, <code>pWaitDstStageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_RAY_TRACING_SHADER_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pCommandBuffers-00075" href="chap6.html#VUID-VkSubmitInfo-pCommandBuffers-00075"></a> <span class="vuid">VUID-VkSubmitInfo-pCommandBuffers-00075</span><br>

Each element of <code>pCommandBuffers</code> <strong class="purple">must</strong> not have been allocated with
<code>VK_COMMAND_BUFFER_LEVEL_SECONDARY</code></p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pWaitDstStageMask-00078" href="chap6.html#VUID-VkSubmitInfo-pWaitDstStageMask-00078"></a> <span class="vuid">VUID-VkSubmitInfo-pWaitDstStageMask-00078</span><br>

Each element of <code>pWaitDstStageMask</code> <strong class="purple">must</strong> not include
<code>VK_PIPELINE_STAGE_HOST_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pWaitSemaphores-03239" href="chap6.html#VUID-VkSubmitInfo-pWaitSemaphores-03239"></a> <span class="vuid">VUID-VkSubmitInfo-pWaitSemaphores-03239</span><br>

If any element of <code>pWaitSemaphores</code> or <code>pSignalSemaphores</code> was
created with a <a href="chap7.html#VkSemaphoreType">VkSemaphoreType</a> of
<code>VK_SEMAPHORE_TYPE_TIMELINE</code>, then the <code>pNext</code> chain <strong class="purple">must</strong>
include a <a href="chap6.html#VkTimelineSemaphoreSubmitInfo">VkTimelineSemaphoreSubmitInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pNext-03240" href="chap6.html#VUID-VkSubmitInfo-pNext-03240"></a> <span class="vuid">VUID-VkSubmitInfo-pNext-03240</span><br>

If the <code>pNext</code> chain of this structure includes a
<a href="chap6.html#VkTimelineSemaphoreSubmitInfo">VkTimelineSemaphoreSubmitInfo</a> structure and any element of
<code>pWaitSemaphores</code> was created with a <a href="chap7.html#VkSemaphoreType">VkSemaphoreType</a> of
<code>VK_SEMAPHORE_TYPE_TIMELINE</code>, then its <code>waitSemaphoreValueCount</code>
member <strong class="purple">must</strong> equal <code>waitSemaphoreCount</code></p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pNext-03241" href="chap6.html#VUID-VkSubmitInfo-pNext-03241"></a> <span class="vuid">VUID-VkSubmitInfo-pNext-03241</span><br>

If the <code>pNext</code> chain of this structure includes a
<a href="chap6.html#VkTimelineSemaphoreSubmitInfo">VkTimelineSemaphoreSubmitInfo</a> structure and any element of
<code>pSignalSemaphores</code> was created with a <a href="chap7.html#VkSemaphoreType">VkSemaphoreType</a> of
<code>VK_SEMAPHORE_TYPE_TIMELINE</code>, then its
<code>signalSemaphoreValueCount</code> member <strong class="purple">must</strong> equal
<code>signalSemaphoreCount</code></p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pSignalSemaphores-03242" href="chap6.html#VUID-VkSubmitInfo-pSignalSemaphores-03242"></a> <span class="vuid">VUID-VkSubmitInfo-pSignalSemaphores-03242</span><br>

For each element of <code>pSignalSemaphores</code> created with a
<a href="chap7.html#VkSemaphoreType">VkSemaphoreType</a> of <code>VK_SEMAPHORE_TYPE_TIMELINE</code> the
corresponding element of
<a href="chap6.html#VkTimelineSemaphoreSubmitInfo">VkTimelineSemaphoreSubmitInfo</a>::<code>pSignalSemaphoreValues</code> <strong class="purple">must</strong>
have a value greater than the current value of the semaphore when the
<a href="chap7.html#synchronization-semaphores-signaling">semaphore signal operation</a> is
executed</p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pWaitSemaphores-03243" href="chap6.html#VUID-VkSubmitInfo-pWaitSemaphores-03243"></a> <span class="vuid">VUID-VkSubmitInfo-pWaitSemaphores-03243</span><br>

For each element of <code>pWaitSemaphores</code> created with a
<a href="chap7.html#VkSemaphoreType">VkSemaphoreType</a> of <code>VK_SEMAPHORE_TYPE_TIMELINE</code> the
corresponding element of
<a href="chap6.html#VkTimelineSemaphoreSubmitInfo">VkTimelineSemaphoreSubmitInfo</a>::<code>pWaitSemaphoreValues</code> <strong class="purple">must</strong>
have a value which does not differ from the current value of the
semaphore or the value of any outstanding semaphore wait or signal
operation on that semaphore by more than
<a href="chap5.html#limits-maxTimelineSemaphoreValueDifference"><code>maxTimelineSemaphoreValueDifference</code></a></p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pSignalSemaphores-03244" href="chap6.html#VUID-VkSubmitInfo-pSignalSemaphores-03244"></a> <span class="vuid">VUID-VkSubmitInfo-pSignalSemaphores-03244</span><br>

For each element of <code>pSignalSemaphores</code> created with a
<a href="chap7.html#VkSemaphoreType">VkSemaphoreType</a> of <code>VK_SEMAPHORE_TYPE_TIMELINE</code> the
corresponding element of
<a href="chap6.html#VkTimelineSemaphoreSubmitInfo">VkTimelineSemaphoreSubmitInfo</a>::<code>pSignalSemaphoreValues</code> <strong class="purple">must</strong>
have a value which does not differ from the current value of the
semaphore or the value of any outstanding semaphore wait or signal
operation on that semaphore by more than
<a href="chap5.html#limits-maxTimelineSemaphoreValueDifference"><code>maxTimelineSemaphoreValueDifference</code></a></p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pNext-04120" href="chap6.html#VUID-VkSubmitInfo-pNext-04120"></a> <span class="vuid">VUID-VkSubmitInfo-pNext-04120</span><br>

If the <code>pNext</code> chain of this structure does not include a
<code>VkProtectedSubmitInfo</code> structure with <code>protectedSubmit</code> set to
<code>VK_TRUE</code>, then each element of the <code>pCommandBuffers</code> array
<strong class="purple">must</strong> be an unprotected command buffer</p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pNext-04148" href="chap6.html#VUID-VkSubmitInfo-pNext-04148"></a> <span class="vuid">VUID-VkSubmitInfo-pNext-04148</span><br>

If the <code>pNext</code> chain of this structure includes a
<code>VkProtectedSubmitInfo</code> structure with <code>protectedSubmit</code> set to
<code>VK_TRUE</code>, then each element of the <code>pCommandBuffers</code> array
<strong class="purple">must</strong> be a protected command buffer</p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pCommandBuffers-06193" href="chap6.html#VUID-VkSubmitInfo-pCommandBuffers-06193"></a> <span class="vuid">VUID-VkSubmitInfo-pCommandBuffers-06193</span><br>

If <code>pCommandBuffers</code> contains any <a href="chap8.html#renderpass-suspension">resumed
render pass instances</a>, they <strong class="purple">must</strong> be suspended by a render pass
instance earlier in submission order within <code>pCommandBuffers</code></p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pCommandBuffers-06014" href="chap6.html#VUID-VkSubmitInfo-pCommandBuffers-06014"></a> <span class="vuid">VUID-VkSubmitInfo-pCommandBuffers-06014</span><br>

If <code>pCommandBuffers</code> contains any <a href="chap8.html#renderpass-suspension">suspended
render pass instances</a>, they <strong class="purple">must</strong> be resumed by a render pass instance
later in submission order within <code>pCommandBuffers</code></p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pCommandBuffers-06015" href="chap6.html#VUID-VkSubmitInfo-pCommandBuffers-06015"></a> <span class="vuid">VUID-VkSubmitInfo-pCommandBuffers-06015</span><br>

If <code>pCommandBuffers</code> contains any <a href="chap8.html#renderpass-suspension">suspended
render pass instances</a>, there <strong class="purple">must</strong> be no action or synchronization
commands executed in a primary or <a href="chap6.html#commandbuffers-secondary">secondary</a> command buffer between that render pass instance and the
render pass instance that resumes it</p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pCommandBuffers-06016" href="chap6.html#VUID-VkSubmitInfo-pCommandBuffers-06016"></a> <span class="vuid">VUID-VkSubmitInfo-pCommandBuffers-06016</span><br>

If <code>pCommandBuffers</code> contains any <a href="chap8.html#renderpass-suspension">suspended
render pass instances</a>, there <strong class="purple">must</strong> be no render pass instances between
that render pass instance and the render pass instance that resumes it</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSubmitInfo-sType-sType" href="chap6.html#VUID-VkSubmitInfo-sType-sType"></a> <span class="vuid">VUID-VkSubmitInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_SUBMIT_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pNext-pNext" href="chap6.html#VUID-VkSubmitInfo-pNext-pNext"></a> <span class="vuid">VUID-VkSubmitInfo-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="chap6.html#VkD3D12FenceSubmitInfoKHR">VkD3D12FenceSubmitInfoKHR</a>, <a href="chap6.html#VkDeviceGroupSubmitInfo">VkDeviceGroupSubmitInfo</a>, <a href="chap6.html#VkPerformanceQuerySubmitInfoKHR">VkPerformanceQuerySubmitInfoKHR</a>, <a href="chap6.html#VkProtectedSubmitInfo">VkProtectedSubmitInfo</a>, <a href="chap6.html#VkTimelineSemaphoreSubmitInfo">VkTimelineSemaphoreSubmitInfo</a>, or <a href="chap6.html#VkWin32KeyedMutexAcquireReleaseInfoKHR">VkWin32KeyedMutexAcquireReleaseInfoKHR</a></p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-sType-unique" href="chap6.html#VUID-VkSubmitInfo-sType-unique"></a> <span class="vuid">VUID-VkSubmitInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pWaitSemaphores-parameter" href="chap6.html#VUID-VkSubmitInfo-pWaitSemaphores-parameter"></a> <span class="vuid">VUID-VkSubmitInfo-pWaitSemaphores-parameter</span><br>
 If <code>waitSemaphoreCount</code> is not <code>0</code>, <code>pWaitSemaphores</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>waitSemaphoreCount</code> valid <a href="chap7.html#VkSemaphore">VkSemaphore</a> handles</p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pWaitDstStageMask-parameter" href="chap6.html#VUID-VkSubmitInfo-pWaitDstStageMask-parameter"></a> <span class="vuid">VUID-VkSubmitInfo-pWaitDstStageMask-parameter</span><br>
 If <code>waitSemaphoreCount</code> is not <code>0</code>, <code>pWaitDstStageMask</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>waitSemaphoreCount</code> valid combinations of <a href="chap7.html#VkPipelineStageFlagBits">VkPipelineStageFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pCommandBuffers-parameter" href="chap6.html#VUID-VkSubmitInfo-pCommandBuffers-parameter"></a> <span class="vuid">VUID-VkSubmitInfo-pCommandBuffers-parameter</span><br>
 If <code>commandBufferCount</code> is not <code>0</code>, <code>pCommandBuffers</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>commandBufferCount</code> valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handles</p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-pSignalSemaphores-parameter" href="chap6.html#VUID-VkSubmitInfo-pSignalSemaphores-parameter"></a> <span class="vuid">VUID-VkSubmitInfo-pSignalSemaphores-parameter</span><br>
 If <code>signalSemaphoreCount</code> is not <code>0</code>, <code>pSignalSemaphores</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>signalSemaphoreCount</code> valid <a href="chap7.html#VkSemaphore">VkSemaphore</a> handles</p>
</li>
<li>
<p><a id="VUID-VkSubmitInfo-commonparent" href="chap6.html#VUID-VkSubmitInfo-commonparent"></a> <span class="vuid">VUID-VkSubmitInfo-commonparent</span><br>
 Each of the elements of <code>pCommandBuffers</code>, the elements of <code>pSignalSemaphores</code>, and the elements of <code>pWaitSemaphores</code> that are valid handles of non-ignored parameters <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To specify the values to use when waiting for and signaling semaphores
created with a <a href="chap7.html#VkSemaphoreType">VkSemaphoreType</a> of <code>VK_SEMAPHORE_TYPE_TIMELINE</code>,
add a <a href="chap6.html#VkTimelineSemaphoreSubmitInfo">VkTimelineSemaphoreSubmitInfo</a> structure to the <code>pNext</code> chain
of the <a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a> structure when using <a href="chap6.html#vkQueueSubmit">vkQueueSubmit</a>
or the <a href="chap29.html#VkBindSparseInfo">VkBindSparseInfo</a> structure when using <a href="chap29.html#vkQueueBindSparse">vkQueueBindSparse</a>
.
The <code>VkTimelineSemaphoreSubmitInfo</code> structure is defined as:</p>
</div>
<div id="VkTimelineSemaphoreSubmitInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_2</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkTimelineSemaphoreSubmitInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">waitSemaphoreValueCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint64_t</span><span class="o">*</span>    <span class="n">pWaitSemaphoreValues</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">signalSemaphoreValueCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint64_t</span><span class="o">*</span>    <span class="n">pSignalSemaphoreValues</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkTimelineSemaphoreSubmitInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkTimelineSemaphoreSubmitInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_timeline_semaphore</span>
<span class="k">typedef</span> <span class="n">VkTimelineSemaphoreSubmitInfo</span> <span class="n">VkTimelineSemaphoreSubmitInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>waitSemaphoreValueCount</code> is the number of semaphore wait values
specified in <code>pWaitSemaphoreValues</code>.</p>
</li>
<li>
<p><code>pWaitSemaphoreValues</code> is a pointer to an array of
<code>waitSemaphoreValueCount</code> values for the corresponding semaphores in
<a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a>::<code>pWaitSemaphores</code> to wait for.</p>
</li>
<li>
<p><code>signalSemaphoreValueCount</code> is the number of semaphore signal values
specified in <code>pSignalSemaphoreValues</code>.</p>
</li>
<li>
<p><code>pSignalSemaphoreValues</code> is a pointer to an array
<code>signalSemaphoreValueCount</code> values for the corresponding semaphores
in <a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a>::<code>pSignalSemaphores</code> to set when signaled.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the semaphore in <a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a>::<code>pWaitSemaphores</code> or
<a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a>::<code>pSignalSemaphores</code> corresponding to an entry in
<code>pWaitSemaphoreValues</code> or <code>pSignalSemaphoreValues</code> respectively was
not created with a <a href="chap7.html#VkSemaphoreType">VkSemaphoreType</a> of
<code>VK_SEMAPHORE_TYPE_TIMELINE</code>, the implementation <strong class="purple">must</strong> ignore the value
in the <code>pWaitSemaphoreValues</code> or <code>pSignalSemaphoreValues</code> entry.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkTimelineSemaphoreSubmitInfo-sType-sType" href="chap6.html#VUID-VkTimelineSemaphoreSubmitInfo-sType-sType"></a> <span class="vuid">VUID-VkTimelineSemaphoreSubmitInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_TIMELINE_SEMAPHORE_SUBMIT_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkTimelineSemaphoreSubmitInfo-pWaitSemaphoreValues-parameter" href="chap6.html#VUID-VkTimelineSemaphoreSubmitInfo-pWaitSemaphoreValues-parameter"></a> <span class="vuid">VUID-VkTimelineSemaphoreSubmitInfo-pWaitSemaphoreValues-parameter</span><br>
 If <code>waitSemaphoreValueCount</code> is not <code>0</code>, and <code>pWaitSemaphoreValues</code> is not <code>NULL</code>, <code>pWaitSemaphoreValues</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>waitSemaphoreValueCount</code> <code>uint64_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkTimelineSemaphoreSubmitInfo-pSignalSemaphoreValues-parameter" href="chap6.html#VUID-VkTimelineSemaphoreSubmitInfo-pSignalSemaphoreValues-parameter"></a> <span class="vuid">VUID-VkTimelineSemaphoreSubmitInfo-pSignalSemaphoreValues-parameter</span><br>
 If <code>signalSemaphoreValueCount</code> is not <code>0</code>, and <code>pSignalSemaphoreValues</code> is not <code>NULL</code>, <code>pSignalSemaphoreValues</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>signalSemaphoreValueCount</code> <code>uint64_t</code> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To specify the values to use when waiting for and signaling semaphores whose
<a href="chap7.html#synchronization-semaphores-importing">current payload</a> refers to a
Direct3D 12 fence, add a <a href="chap6.html#VkD3D12FenceSubmitInfoKHR">VkD3D12FenceSubmitInfoKHR</a> structure to the
<code>pNext</code> chain of the <a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a> structure.
The <code>VkD3D12FenceSubmitInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkD3D12FenceSubmitInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_external_semaphore_win32</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkD3D12FenceSubmitInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">waitSemaphoreValuesCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint64_t</span><span class="o">*</span>    <span class="n">pWaitSemaphoreValues</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">signalSemaphoreValuesCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint64_t</span><span class="o">*</span>    <span class="n">pSignalSemaphoreValues</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkD3D12FenceSubmitInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>waitSemaphoreValuesCount</code> is the number of semaphore wait values
specified in <code>pWaitSemaphoreValues</code>.</p>
</li>
<li>
<p><code>pWaitSemaphoreValues</code> is a pointer to an array of
<code>waitSemaphoreValuesCount</code> values for the corresponding semaphores
in <a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a>::<code>pWaitSemaphores</code> to wait for.</p>
</li>
<li>
<p><code>signalSemaphoreValuesCount</code> is the number of semaphore signal
values specified in <code>pSignalSemaphoreValues</code>.</p>
</li>
<li>
<p><code>pSignalSemaphoreValues</code> is a pointer to an array of
<code>signalSemaphoreValuesCount</code> values for the corresponding semaphores
in <a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a>::<code>pSignalSemaphores</code> to set when signaled.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the semaphore in <a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a>::<code>pWaitSemaphores</code> or
<a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a>::<code>pSignalSemaphores</code> corresponding to an entry in
<code>pWaitSemaphoreValues</code> or <code>pSignalSemaphoreValues</code> respectively does
not currently have a <a href="chap7.html#synchronization-semaphores-payloads">payload</a>
referring to a Direct3D 12 fence, the implementation <strong class="purple">must</strong> ignore the value
in the <code>pWaitSemaphoreValues</code> or <code>pSignalSemaphoreValues</code> entry.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>As the introduction of the external semaphore handle type
<code>VK_EXTERNAL_SEMAPHORE_HANDLE_TYPE_D3D12_FENCE_BIT</code> predates that of
timeline semaphores, support for importing semaphore payloads from external
handles of that type into semaphores created (implicitly or explicitly) with
a <a href="chap7.html#VkSemaphoreType">VkSemaphoreType</a> of <code>VK_SEMAPHORE_TYPE_BINARY</code> is preserved for
backwards compatibility.
However, applications <strong class="purple">should</strong> prefer importing such handle types into
semaphores created with a <a href="chap7.html#VkSemaphoreType">VkSemaphoreType</a> of
<code>VK_SEMAPHORE_TYPE_TIMELINE</code>, and use the
<a href="chap6.html#VkTimelineSemaphoreSubmitInfo">VkTimelineSemaphoreSubmitInfo</a> structure instead of the
<code>VkD3D12FenceSubmitInfoKHR</code> structure to specify the values to use when
waiting for and signaling such semaphores.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkD3D12FenceSubmitInfoKHR-waitSemaphoreValuesCount-00079" href="chap6.html#VUID-VkD3D12FenceSubmitInfoKHR-waitSemaphoreValuesCount-00079"></a> <span class="vuid">VUID-VkD3D12FenceSubmitInfoKHR-waitSemaphoreValuesCount-00079</span><br>

<code>waitSemaphoreValuesCount</code> <strong class="purple">must</strong> be the same value as
<code>VkSubmitInfo</code>::<code>waitSemaphoreCount</code>, where this structure is in
the <code>pNext</code> chain of a <code>VkSubmitInfo</code> structure</p>
</li>
<li>
<p><a id="VUID-VkD3D12FenceSubmitInfoKHR-signalSemaphoreValuesCount-00080" href="chap6.html#VUID-VkD3D12FenceSubmitInfoKHR-signalSemaphoreValuesCount-00080"></a> <span class="vuid">VUID-VkD3D12FenceSubmitInfoKHR-signalSemaphoreValuesCount-00080</span><br>

<code>signalSemaphoreValuesCount</code> <strong class="purple">must</strong> be the same value as
<code>VkSubmitInfo</code>::<code>signalSemaphoreCount</code>, where this structure is
in the <code>pNext</code> chain of a <code>VkSubmitInfo</code> structure</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkD3D12FenceSubmitInfoKHR-sType-sType" href="chap6.html#VUID-VkD3D12FenceSubmitInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkD3D12FenceSubmitInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_D3D12_FENCE_SUBMIT_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkD3D12FenceSubmitInfoKHR-pWaitSemaphoreValues-parameter" href="chap6.html#VUID-VkD3D12FenceSubmitInfoKHR-pWaitSemaphoreValues-parameter"></a> <span class="vuid">VUID-VkD3D12FenceSubmitInfoKHR-pWaitSemaphoreValues-parameter</span><br>
 If <code>waitSemaphoreValuesCount</code> is not <code>0</code>, and <code>pWaitSemaphoreValues</code> is not <code>NULL</code>, <code>pWaitSemaphoreValues</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>waitSemaphoreValuesCount</code> <code>uint64_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkD3D12FenceSubmitInfoKHR-pSignalSemaphoreValues-parameter" href="chap6.html#VUID-VkD3D12FenceSubmitInfoKHR-pSignalSemaphoreValues-parameter"></a> <span class="vuid">VUID-VkD3D12FenceSubmitInfoKHR-pSignalSemaphoreValues-parameter</span><br>
 If <code>signalSemaphoreValuesCount</code> is not <code>0</code>, and <code>pSignalSemaphoreValues</code> is not <code>NULL</code>, <code>pSignalSemaphoreValues</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>signalSemaphoreValuesCount</code> <code>uint64_t</code> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>When submitting work that operates on memory imported from a Direct3D 11
resource to a queue, the keyed mutex mechanism <strong class="purple">may</strong> be used in addition to
Vulkan semaphores to synchronize the work.
Keyed mutexes are a property of a properly created shareable Direct3D 11
resource.
They <strong class="purple">can</strong> only be used if the imported resource was created with the
<code>D3D11_RESOURCE_MISC_SHARED_KEYEDMUTEX</code> flag.</p>
</div>
<div class="paragraph">
<p>To acquire keyed mutexes before submitted work and/or release them after,
add a <a href="chap6.html#VkWin32KeyedMutexAcquireReleaseInfoKHR">VkWin32KeyedMutexAcquireReleaseInfoKHR</a> structure to the
<code>pNext</code> chain of the <a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a> structure.</p>
</div>
<div class="paragraph">
<p>The <code>VkWin32KeyedMutexAcquireReleaseInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkWin32KeyedMutexAcquireReleaseInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_win32_keyed_mutex</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkWin32KeyedMutexAcquireReleaseInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>          <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>              <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                 <span class="n">acquireCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkDeviceMemory</span><span class="o">*</span>    <span class="n">pAcquireSyncs</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint64_t</span><span class="o">*</span>          <span class="n">pAcquireKeys</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint32_t</span><span class="o">*</span>          <span class="n">pAcquireTimeouts</span><span class="p">;</span>
    <span class="kt">uint32_t</span>                 <span class="n">releaseCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="n">VkDeviceMemory</span><span class="o">*</span>    <span class="n">pReleaseSyncs</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint64_t</span><span class="o">*</span>          <span class="n">pReleaseKeys</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkWin32KeyedMutexAcquireReleaseInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>acquireCount</code> is the number of entries in the <code>pAcquireSyncs</code>,
<code>pAcquireKeys</code>, and <code>pAcquireTimeouts</code> arrays.</p>
</li>
<li>
<p><code>pAcquireSyncs</code> is a pointer to an array of <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a>
objects which were imported from Direct3D 11 resources.</p>
</li>
<li>
<p><code>pAcquireKeys</code> is a pointer to an array of mutex key values to wait
for prior to beginning the submitted work.
Entries refer to the keyed mutex associated with the corresponding
entries in <code>pAcquireSyncs</code>.</p>
</li>
<li>
<p><code>pAcquireTimeouts</code> is a pointer to an array of timeout values, in
millisecond units, for each acquire specified in <code>pAcquireKeys</code>.</p>
</li>
<li>
<p><code>releaseCount</code> is the number of entries in the <code>pReleaseSyncs</code>
and <code>pReleaseKeys</code> arrays.</p>
</li>
<li>
<p><code>pReleaseSyncs</code> is a pointer to an array of <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a>
objects which were imported from Direct3D 11 resources.</p>
</li>
<li>
<p><code>pReleaseKeys</code> is a pointer to an array of mutex key values to set
when the submitted work has completed.
Entries refer to the keyed mutex associated with the corresponding
entries in <code>pReleaseSyncs</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-pAcquireSyncs-00081" href="chap6.html#VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-pAcquireSyncs-00081"></a> <span class="vuid">VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-pAcquireSyncs-00081</span><br>

Each member of <code>pAcquireSyncs</code> and <code>pReleaseSyncs</code> <strong class="purple">must</strong> be a
device memory object imported by setting
<a href="chap11.html#VkImportMemoryWin32HandleInfoKHR">VkImportMemoryWin32HandleInfoKHR</a>::<code>handleType</code> to
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_D3D11_TEXTURE_BIT</code> or
<code>VK_EXTERNAL_MEMORY_HANDLE_TYPE_D3D11_TEXTURE_KMT_BIT</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-sType-sType" href="chap6.html#VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_WIN32_KEYED_MUTEX_ACQUIRE_RELEASE_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-pAcquireSyncs-parameter" href="chap6.html#VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-pAcquireSyncs-parameter"></a> <span class="vuid">VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-pAcquireSyncs-parameter</span><br>
 If <code>acquireCount</code> is not <code>0</code>, <code>pAcquireSyncs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>acquireCount</code> valid <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> handles</p>
</li>
<li>
<p><a id="VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-pAcquireKeys-parameter" href="chap6.html#VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-pAcquireKeys-parameter"></a> <span class="vuid">VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-pAcquireKeys-parameter</span><br>
 If <code>acquireCount</code> is not <code>0</code>, <code>pAcquireKeys</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>acquireCount</code> <code>uint64_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-pAcquireTimeouts-parameter" href="chap6.html#VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-pAcquireTimeouts-parameter"></a> <span class="vuid">VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-pAcquireTimeouts-parameter</span><br>
 If <code>acquireCount</code> is not <code>0</code>, <code>pAcquireTimeouts</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>acquireCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-pReleaseSyncs-parameter" href="chap6.html#VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-pReleaseSyncs-parameter"></a> <span class="vuid">VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-pReleaseSyncs-parameter</span><br>
 If <code>releaseCount</code> is not <code>0</code>, <code>pReleaseSyncs</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>releaseCount</code> valid <a href="chap11.html#VkDeviceMemory">VkDeviceMemory</a> handles</p>
</li>
<li>
<p><a id="VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-pReleaseKeys-parameter" href="chap6.html#VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-pReleaseKeys-parameter"></a> <span class="vuid">VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-pReleaseKeys-parameter</span><br>
 If <code>releaseCount</code> is not <code>0</code>, <code>pReleaseKeys</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>releaseCount</code> <code>uint64_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-commonparent" href="chap6.html#VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-commonparent"></a> <span class="vuid">VUID-VkWin32KeyedMutexAcquireReleaseInfoKHR-commonparent</span><br>
 Both of the elements of <code>pAcquireSyncs</code>, and the elements of <code>pReleaseSyncs</code> that are valid handles of non-ignored parameters <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a> includes a
<code>VkProtectedSubmitInfo</code> structure, then the structure indicates whether
the batch is protected.
The <code>VkProtectedSubmitInfo</code> structure is defined as:</p>
</div>
<div id="VkProtectedSubmitInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkProtectedSubmitInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="n">VkBool32</span>           <span class="n">protectedSubmit</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkProtectedSubmitInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>protectedSubmit</code> specifies whether the batch is protected.
If <code>protectedSubmit</code> is <code>VK_TRUE</code>, the batch is protected.
If <code>protectedSubmit</code> is <code>VK_FALSE</code>, the batch is unprotected.
If the <code>VkSubmitInfo</code>::<code>pNext</code> chain does not include this
structure, the batch is unprotected.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkProtectedSubmitInfo-sType-sType" href="chap6.html#VUID-VkProtectedSubmitInfo-sType-sType"></a> <span class="vuid">VUID-VkProtectedSubmitInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_PROTECTED_SUBMIT_INFO</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a> includes a
<code>VkDeviceGroupSubmitInfo</code> structure, then that structure includes device
indices and masks specifying which physical devices execute semaphore
operations and command buffers.</p>
</div>
<div class="paragraph">
<p>The <code>VkDeviceGroupSubmitInfo</code> structure is defined as:</p>
</div>
<div id="VkDeviceGroupSubmitInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkDeviceGroupSubmitInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">waitSemaphoreCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint32_t</span><span class="o">*</span>    <span class="n">pWaitSemaphoreDeviceIndices</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">commandBufferCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint32_t</span><span class="o">*</span>    <span class="n">pCommandBufferDeviceMasks</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">signalSemaphoreCount</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">uint32_t</span><span class="o">*</span>    <span class="n">pSignalSemaphoreDeviceIndices</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkDeviceGroupSubmitInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkDeviceGroupSubmitInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_device_group</span>
<span class="k">typedef</span> <span class="n">VkDeviceGroupSubmitInfo</span> <span class="n">VkDeviceGroupSubmitInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>waitSemaphoreCount</code> is the number of elements in the
<code>pWaitSemaphoreDeviceIndices</code> array.</p>
</li>
<li>
<p><code>pWaitSemaphoreDeviceIndices</code> is a pointer to an array of
<code>waitSemaphoreCount</code> device indices indicating which physical device
executes the semaphore wait operation in the corresponding element of
<a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a>::<code>pWaitSemaphores</code>.</p>
</li>
<li>
<p><code>commandBufferCount</code> is the number of elements in the
<code>pCommandBufferDeviceMasks</code> array.</p>
</li>
<li>
<p><code>pCommandBufferDeviceMasks</code> is a pointer to an array of
<code>commandBufferCount</code> device masks indicating which physical devices
execute the command buffer in the corresponding element of
<a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a>::<code>pCommandBuffers</code>.
A physical device executes the command buffer if the corresponding bit
is set in the mask.</p>
</li>
<li>
<p><code>signalSemaphoreCount</code> is the number of elements in the
<code>pSignalSemaphoreDeviceIndices</code> array.</p>
</li>
<li>
<p><code>pSignalSemaphoreDeviceIndices</code> is a pointer to an array of
<code>signalSemaphoreCount</code> device indices indicating which physical
device executes the semaphore signal operation in the corresponding
element of <a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a>::<code>pSignalSemaphores</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If this structure is not present, semaphore operations and command buffers
execute on device index zero.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDeviceGroupSubmitInfo-waitSemaphoreCount-00082" href="chap6.html#VUID-VkDeviceGroupSubmitInfo-waitSemaphoreCount-00082"></a> <span class="vuid">VUID-VkDeviceGroupSubmitInfo-waitSemaphoreCount-00082</span><br>

<code>waitSemaphoreCount</code> <strong class="purple">must</strong> equal
<a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a>::<code>waitSemaphoreCount</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceGroupSubmitInfo-commandBufferCount-00083" href="chap6.html#VUID-VkDeviceGroupSubmitInfo-commandBufferCount-00083"></a> <span class="vuid">VUID-VkDeviceGroupSubmitInfo-commandBufferCount-00083</span><br>

<code>commandBufferCount</code> <strong class="purple">must</strong> equal
<a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a>::<code>commandBufferCount</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceGroupSubmitInfo-signalSemaphoreCount-00084" href="chap6.html#VUID-VkDeviceGroupSubmitInfo-signalSemaphoreCount-00084"></a> <span class="vuid">VUID-VkDeviceGroupSubmitInfo-signalSemaphoreCount-00084</span><br>

<code>signalSemaphoreCount</code> <strong class="purple">must</strong> equal
<a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a>::<code>signalSemaphoreCount</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceGroupSubmitInfo-pWaitSemaphoreDeviceIndices-00085" href="chap6.html#VUID-VkDeviceGroupSubmitInfo-pWaitSemaphoreDeviceIndices-00085"></a> <span class="vuid">VUID-VkDeviceGroupSubmitInfo-pWaitSemaphoreDeviceIndices-00085</span><br>

All elements of <code>pWaitSemaphoreDeviceIndices</code> and
<code>pSignalSemaphoreDeviceIndices</code> <strong class="purple">must</strong> be valid device indices</p>
</li>
<li>
<p><a id="VUID-VkDeviceGroupSubmitInfo-pCommandBufferDeviceMasks-00086" href="chap6.html#VUID-VkDeviceGroupSubmitInfo-pCommandBufferDeviceMasks-00086"></a> <span class="vuid">VUID-VkDeviceGroupSubmitInfo-pCommandBufferDeviceMasks-00086</span><br>

All elements of <code>pCommandBufferDeviceMasks</code> <strong class="purple">must</strong> be valid device
masks</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDeviceGroupSubmitInfo-sType-sType" href="chap6.html#VUID-VkDeviceGroupSubmitInfo-sType-sType"></a> <span class="vuid">VUID-VkDeviceGroupSubmitInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_DEVICE_GROUP_SUBMIT_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceGroupSubmitInfo-pWaitSemaphoreDeviceIndices-parameter" href="chap6.html#VUID-VkDeviceGroupSubmitInfo-pWaitSemaphoreDeviceIndices-parameter"></a> <span class="vuid">VUID-VkDeviceGroupSubmitInfo-pWaitSemaphoreDeviceIndices-parameter</span><br>
 If <code>waitSemaphoreCount</code> is not <code>0</code>, <code>pWaitSemaphoreDeviceIndices</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>waitSemaphoreCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkDeviceGroupSubmitInfo-pCommandBufferDeviceMasks-parameter" href="chap6.html#VUID-VkDeviceGroupSubmitInfo-pCommandBufferDeviceMasks-parameter"></a> <span class="vuid">VUID-VkDeviceGroupSubmitInfo-pCommandBufferDeviceMasks-parameter</span><br>
 If <code>commandBufferCount</code> is not <code>0</code>, <code>pCommandBufferDeviceMasks</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>commandBufferCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkDeviceGroupSubmitInfo-pSignalSemaphoreDeviceIndices-parameter" href="chap6.html#VUID-VkDeviceGroupSubmitInfo-pSignalSemaphoreDeviceIndices-parameter"></a> <span class="vuid">VUID-VkDeviceGroupSubmitInfo-pSignalSemaphoreDeviceIndices-parameter</span><br>
 If <code>signalSemaphoreCount</code> is not <code>0</code>, <code>pSignalSemaphoreDeviceIndices</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>signalSemaphoreCount</code> <code>uint32_t</code> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="chap6.html#VkSubmitInfo">VkSubmitInfo</a> includes a
<a href="chap6.html#VkPerformanceQuerySubmitInfoKHR">VkPerformanceQuerySubmitInfoKHR</a> structure, then the structure
indicates which counter pass is active for the batch in that submit.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkPerformanceQuerySubmitInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkPerformanceQuerySubmitInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_performance_query</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkPerformanceQuerySubmitInfoKHR</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">counterPassIndex</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkPerformanceQuerySubmitInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>counterPassIndex</code> specifies which counter pass index is active.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the <code>VkSubmitInfo</code>::<code>pNext</code> chain does not include this
structure, the batch defaults to use counter pass index 0.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkPerformanceQuerySubmitInfoKHR-counterPassIndex-03221" href="chap6.html#VUID-VkPerformanceQuerySubmitInfoKHR-counterPassIndex-03221"></a> <span class="vuid">VUID-VkPerformanceQuerySubmitInfoKHR-counterPassIndex-03221</span><br>

<code>counterPassIndex</code> <strong class="purple">must</strong> be less than the number of counter passes
required by any queries within the batch.
The required number of counter passes for a performance query is
obtained by calling
<a href="chap17.html#vkGetPhysicalDeviceQueueFamilyPerformanceQueryPassesKHR">vkGetPhysicalDeviceQueueFamilyPerformanceQueryPassesKHR</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkPerformanceQuerySubmitInfoKHR-sType-sType" href="chap6.html#VUID-VkPerformanceQuerySubmitInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkPerformanceQuerySubmitInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_PERFORMANCE_QUERY_SUBMIT_INFO_KHR</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="commandbuffers-submission-progress"><a class="anchor" href="chap6.html#commandbuffers-submission-progress"></a>6.6. Queue Forward Progress</h3>
<div class="paragraph">
<p>When using binary semaphores, the application <strong class="purple">must</strong> ensure that command
buffer submissions will be able to complete without any subsequent
operations by the application on any queue.
After any call to <code>vkQueueSubmit</code> (or other queue operation), for every
queued wait on a semaphore
created with a <a href="chap7.html#VkSemaphoreType">VkSemaphoreType</a> of <code>VK_SEMAPHORE_TYPE_BINARY</code>
there <strong class="purple">must</strong> be a prior signal of that semaphore that will not be consumed by
a different wait on the semaphore.</p>
</div>
<div class="paragraph">
<p>When using timeline semaphores, wait-before-signal behavior is well-defined
and applications <strong class="purple">can</strong> submit work via <code>vkQueueSubmit</code> defining a
<a href="chap7.html#synchronization-semaphores-waiting">timeline semaphore wait operation</a>
before submitting a corresponding <a href="chap7.html#synchronization-semaphores-signaling">semaphore signal operation</a>.
For each <a href="chap7.html#synchronization-semaphores-waiting">timeline semaphore wait
operation</a> defined by a call to <code>vkQueueSubmit</code>, the application <strong class="purple">must</strong>
ensure that a corresponding <a href="chap7.html#synchronization-semaphores-signaling">semaphore signal operation</a> is executed before forward progress can be
made.</p>
</div>
<div class="paragraph">
<p>If a command buffer submission waits for any events to be signaled, the
application <strong class="purple">must</strong> ensure that command buffer submissions will be able to
complete without any subsequent operations by the application.
Events signaled by the host <strong class="purple">must</strong> be signaled before the command buffer
waits on those events.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>The ability for commands to wait on the host to set an events was originally
added to allow low-latency updates to resources between host and device.
However, to ensure quality of service, implementations would necessarily
detect extended stalls in execution and timeout after a short period.
As this period is not defined in the Vulkan specification, it is impossible
to correctly validate any application with any wait period.
Since the original users of this functionality were highly limited and
platform-specific, this functionality is now considered defunct and should
not be used.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="commandbuffers-secondary"><a class="anchor" href="chap6.html#commandbuffers-secondary"></a>6.7. Secondary Command Buffer Execution</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>A secondary command buffer <strong class="purple">must</strong> not be directly submitted to a queue.
Instead, secondary command buffers are recorded to execute as part of a
primary command buffer with the command:</p>
</div>
<div id="vkCmdExecuteCommands" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_0</span>
<span class="kt">void</span> <span class="nf">vkCmdExecuteCommands</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">commandBufferCount</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">VkCommandBuffer</span><span class="o">*</span>                      <span class="n">pCommandBuffers</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is a handle to a primary command buffer that the
secondary command buffers are executed in.</p>
</li>
<li>
<p><code>commandBufferCount</code> is the length of the <code>pCommandBuffers</code>
array.</p>
</li>
<li>
<p><code>pCommandBuffers</code> is a pointer to an array of
<code>commandBufferCount</code> secondary command buffer handles, which are
recorded to execute in the primary command buffer in the order they are
listed in the array.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If any element of <code>pCommandBuffers</code> was not recorded with the
<code>VK_COMMAND_BUFFER_USAGE_SIMULTANEOUS_USE_BIT</code> flag, and it was recorded
into any other primary command buffer which is currently in the
<a href="chap6.html#commandbuffers-lifecycle">executable or recording state</a>, that primary
command buffer becomes <a href="chap6.html#commandbuffers-lifecycle">invalid</a>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pCommandBuffers-00088" href="chap6.html#VUID-vkCmdExecuteCommands-pCommandBuffers-00088"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pCommandBuffers-00088</span><br>

Each element of <code>pCommandBuffers</code> <strong class="purple">must</strong> have been allocated with a
<code>level</code> of <code>VK_COMMAND_BUFFER_LEVEL_SECONDARY</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pCommandBuffers-00089" href="chap6.html#VUID-vkCmdExecuteCommands-pCommandBuffers-00089"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pCommandBuffers-00089</span><br>

Each element of <code>pCommandBuffers</code> <strong class="purple">must</strong> be in the
<a href="chap6.html#commandbuffers-lifecycle">pending or executable state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pCommandBuffers-00091" href="chap6.html#VUID-vkCmdExecuteCommands-pCommandBuffers-00091"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pCommandBuffers-00091</span><br>

If any element of <code>pCommandBuffers</code> was not recorded with the
<code>VK_COMMAND_BUFFER_USAGE_SIMULTANEOUS_USE_BIT</code> flag, it <strong class="purple">must</strong> not be
in the <a href="chap6.html#commandbuffers-lifecycle">pending state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pCommandBuffers-00092" href="chap6.html#VUID-vkCmdExecuteCommands-pCommandBuffers-00092"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pCommandBuffers-00092</span><br>

If any element of <code>pCommandBuffers</code> was not recorded with the
<code>VK_COMMAND_BUFFER_USAGE_SIMULTANEOUS_USE_BIT</code> flag, it <strong class="purple">must</strong> not
have already been recorded to <code>commandBuffer</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pCommandBuffers-00093" href="chap6.html#VUID-vkCmdExecuteCommands-pCommandBuffers-00093"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pCommandBuffers-00093</span><br>

If any element of <code>pCommandBuffers</code> was not recorded with the
<code>VK_COMMAND_BUFFER_USAGE_SIMULTANEOUS_USE_BIT</code> flag, it <strong class="purple">must</strong> not
appear more than once in <code>pCommandBuffers</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pCommandBuffers-00094" href="chap6.html#VUID-vkCmdExecuteCommands-pCommandBuffers-00094"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pCommandBuffers-00094</span><br>

Each element of <code>pCommandBuffers</code> <strong class="purple">must</strong> have been allocated from a
<code>VkCommandPool</code> that was created for the same queue family as the
<code>VkCommandPool</code> from which <code>commandBuffer</code> was allocated</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pCommandBuffers-00096" href="chap6.html#VUID-vkCmdExecuteCommands-pCommandBuffers-00096"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pCommandBuffers-00096</span><br>

If <code>vkCmdExecuteCommands</code> is being called within a render pass
instance, each element of <code>pCommandBuffers</code> <strong class="purple">must</strong> have been recorded
with the <code>VK_COMMAND_BUFFER_USAGE_RENDER_PASS_CONTINUE_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pCommandBuffers-00099" href="chap6.html#VUID-vkCmdExecuteCommands-pCommandBuffers-00099"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pCommandBuffers-00099</span><br>

If <code>vkCmdExecuteCommands</code> is being called within a render pass
instance, and any element of <code>pCommandBuffers</code> was recorded with
<a href="chap6.html#VkCommandBufferInheritanceInfo">VkCommandBufferInheritanceInfo</a>::<code>framebuffer</code> not equal to
<a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, that <code>VkFramebuffer</code> <strong class="purple">must</strong> match the
<code>VkFramebuffer</code> used in the current render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-contents-06018" href="chap6.html#VUID-vkCmdExecuteCommands-contents-06018"></a> <span class="vuid">VUID-vkCmdExecuteCommands-contents-06018</span><br>

If <code>vkCmdExecuteCommands</code> is being called within a render pass
instance begun with <a href="chap8.html#vkCmdBeginRenderPass">vkCmdBeginRenderPass</a>, its <code>contents</code>
parameter <strong class="purple">must</strong> have been set to
<code>VK_SUBPASS_CONTENTS_SECONDARY_COMMAND_BUFFERS</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pCommandBuffers-06019" href="chap6.html#VUID-vkCmdExecuteCommands-pCommandBuffers-06019"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pCommandBuffers-06019</span><br>

If <code>vkCmdExecuteCommands</code> is being called within a render pass
instance begun with <a href="chap8.html#vkCmdBeginRenderPass">vkCmdBeginRenderPass</a>, each element of
<code>pCommandBuffers</code> <strong class="purple">must</strong> have been recorded with
<a href="chap6.html#VkCommandBufferInheritanceInfo">VkCommandBufferInheritanceInfo</a>::<code>subpass</code> set to the index of
the subpass which the given command buffer will be executed in</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pBeginInfo-06020" href="chap6.html#VUID-vkCmdExecuteCommands-pBeginInfo-06020"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pBeginInfo-06020</span><br>

If <code>vkCmdExecuteCommands</code> is being called within a render pass
instance begun with <a href="chap8.html#vkCmdBeginRenderPass">vkCmdBeginRenderPass</a>, the render passes
specified in the <code>pBeginInfo-&gt;pInheritanceInfo-&gt;renderPass</code> members
of the <a href="chap6.html#vkBeginCommandBuffer">vkBeginCommandBuffer</a> commands used to begin recording each
element of <code>pCommandBuffers</code> <strong class="purple">must</strong> be
<a href="chap8.html#renderpass-compatibility">compatible</a> with the current render pass</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pCommandBuffers-00100" href="chap6.html#VUID-vkCmdExecuteCommands-pCommandBuffers-00100"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pCommandBuffers-00100</span><br>

If <code>vkCmdExecuteCommands</code> is not being called within a render pass
instance, each element of <code>pCommandBuffers</code> <strong class="purple">must</strong> not have been
recorded with the <code>VK_COMMAND_BUFFER_USAGE_RENDER_PASS_CONTINUE_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-commandBuffer-00101" href="chap6.html#VUID-vkCmdExecuteCommands-commandBuffer-00101"></a> <span class="vuid">VUID-vkCmdExecuteCommands-commandBuffer-00101</span><br>

If the <a href="chap38.html#features-inheritedQueries"><code>inheritedQueries</code></a> feature is
not enabled, <code>commandBuffer</code> <strong class="purple">must</strong> not have any queries
<a href="chap17.html#queries-operation-active">active</a></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-commandBuffer-00102" href="chap6.html#VUID-vkCmdExecuteCommands-commandBuffer-00102"></a> <span class="vuid">VUID-vkCmdExecuteCommands-commandBuffer-00102</span><br>

If <code>commandBuffer</code> has a <code>VK_QUERY_TYPE_OCCLUSION</code> query
<a href="chap17.html#queries-operation-active">active</a>, then each element of
<code>pCommandBuffers</code> <strong class="purple">must</strong> have been recorded with
<code>VkCommandBufferInheritanceInfo</code>::<code>occlusionQueryEnable</code> set to
<code>VK_TRUE</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-commandBuffer-00103" href="chap6.html#VUID-vkCmdExecuteCommands-commandBuffer-00103"></a> <span class="vuid">VUID-vkCmdExecuteCommands-commandBuffer-00103</span><br>

If <code>commandBuffer</code> has a <code>VK_QUERY_TYPE_OCCLUSION</code> query
<a href="chap17.html#queries-operation-active">active</a>, then each element of
<code>pCommandBuffers</code> <strong class="purple">must</strong> have been recorded with
<code>VkCommandBufferInheritanceInfo</code>::<code>queryFlags</code> having all bits
set that are set for the query</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-commandBuffer-00104" href="chap6.html#VUID-vkCmdExecuteCommands-commandBuffer-00104"></a> <span class="vuid">VUID-vkCmdExecuteCommands-commandBuffer-00104</span><br>

If <code>commandBuffer</code> has a <code>VK_QUERY_TYPE_PIPELINE_STATISTICS</code>
query <a href="chap17.html#queries-operation-active">active</a>, then each element of
<code>pCommandBuffers</code> <strong class="purple">must</strong> have been recorded with
<code>VkCommandBufferInheritanceInfo</code>::<code>pipelineStatistics</code> having
all bits set that are set in the <code>VkQueryPool</code> the query uses</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pCommandBuffers-00105" href="chap6.html#VUID-vkCmdExecuteCommands-pCommandBuffers-00105"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pCommandBuffers-00105</span><br>

Each element of <code>pCommandBuffers</code> <strong class="purple">must</strong> not begin any query types
that are <a href="chap17.html#queries-operation-active">active</a> in <code>commandBuffer</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-commandBuffer-07594" href="chap6.html#VUID-vkCmdExecuteCommands-commandBuffer-07594"></a> <span class="vuid">VUID-vkCmdExecuteCommands-commandBuffer-07594</span><br>

<code>commandBuffer</code> <strong class="purple">must</strong> not have any queries other than
<code>VK_QUERY_TYPE_OCCLUSION</code> and
<code>VK_QUERY_TYPE_PIPELINE_STATISTICS</code>
<a href="chap17.html#queries-operation-active">active</a></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-commandBuffer-01820" href="chap6.html#VUID-vkCmdExecuteCommands-commandBuffer-01820"></a> <span class="vuid">VUID-vkCmdExecuteCommands-commandBuffer-01820</span><br>

If <code>commandBuffer</code> is a protected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
each element of <code>pCommandBuffers</code> <strong class="purple">must</strong> be a protected command
buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-commandBuffer-01821" href="chap6.html#VUID-vkCmdExecuteCommands-commandBuffer-01821"></a> <span class="vuid">VUID-vkCmdExecuteCommands-commandBuffer-01821</span><br>

If <code>commandBuffer</code> is an unprotected command buffer and
<a href="chap5.html#limits-protectedNoFault"><code>protectedNoFault</code></a> is not supported,
each element of <code>pCommandBuffers</code> <strong class="purple">must</strong> be an unprotected command
buffer</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-commandBuffer-06533" href="chap6.html#VUID-vkCmdExecuteCommands-commandBuffer-06533"></a> <span class="vuid">VUID-vkCmdExecuteCommands-commandBuffer-06533</span><br>

If <code>vkCmdExecuteCommands</code> is being called within a render pass
instance and any recorded command in <code>commandBuffer</code> in the current
subpass will write to an image subresource as an attachment, commands
recorded in elements of <code>pCommandBuffers</code> <strong class="purple">must</strong> not read from the
memory backing that image subresource in any other way</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-commandBuffer-06534" href="chap6.html#VUID-vkCmdExecuteCommands-commandBuffer-06534"></a> <span class="vuid">VUID-vkCmdExecuteCommands-commandBuffer-06534</span><br>

If <code>vkCmdExecuteCommands</code> is being called within a render pass
instance and any recorded command in <code>commandBuffer</code> in the current
subpass will read from an image subresource used as an attachment in any
way other than as an attachment, commands recorded in elements of
<code>pCommandBuffers</code> <strong class="purple">must</strong> not write to that image subresource as an
attachment</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pCommandBuffers-06535" href="chap6.html#VUID-vkCmdExecuteCommands-pCommandBuffers-06535"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pCommandBuffers-06535</span><br>

If <code>vkCmdExecuteCommands</code> is being called within a render pass
instance and any recorded command in a given element of
<code>pCommandBuffers</code> will write to an image subresource as an
attachment, commands recorded in elements of <code>pCommandBuffers</code> at a
higher index <strong class="purple">must</strong> not read from the memory backing that image
subresource in any other way</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pCommandBuffers-06536" href="chap6.html#VUID-vkCmdExecuteCommands-pCommandBuffers-06536"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pCommandBuffers-06536</span><br>

If <code>vkCmdExecuteCommands</code> is being called within a render pass
instance and any recorded command in a given element of
<code>pCommandBuffers</code> will read from an image subresource used as an
attachment in any way other than as an attachment, commands recorded in
elements of <code>pCommandBuffers</code> at a higher index <strong class="purple">must</strong> not write to
that image subresource as an attachment</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pCommandBuffers-06021" href="chap6.html#VUID-vkCmdExecuteCommands-pCommandBuffers-06021"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pCommandBuffers-06021</span><br>

If <code>pCommandBuffers</code> contains any <a href="chap8.html#renderpass-suspension">suspended
render pass instances</a>, there <strong class="purple">must</strong> be no action or synchronization
commands between that render pass instance and any render pass instance
that resumes it</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pCommandBuffers-06022" href="chap6.html#VUID-vkCmdExecuteCommands-pCommandBuffers-06022"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pCommandBuffers-06022</span><br>

If <code>pCommandBuffers</code> contains any <a href="chap8.html#renderpass-suspension">suspended
render pass instances</a>, there <strong class="purple">must</strong> be no render pass instances between
that render pass instance and any render pass instance that resumes it</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-flags-06024" href="chap6.html#VUID-vkCmdExecuteCommands-flags-06024"></a> <span class="vuid">VUID-vkCmdExecuteCommands-flags-06024</span><br>

If <code>vkCmdExecuteCommands</code> is being called within a render pass
instance begun with <a href="chap8.html#vkCmdBeginRendering">vkCmdBeginRendering</a>, its
<a href="chap8.html#VkRenderingInfo">VkRenderingInfo</a>::<code>flags</code> parameter <strong class="purple">must</strong> have included
<code>VK_RENDERING_CONTENTS_SECONDARY_COMMAND_BUFFERS_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pBeginInfo-06025" href="chap6.html#VUID-vkCmdExecuteCommands-pBeginInfo-06025"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pBeginInfo-06025</span><br>

If <code>vkCmdExecuteCommands</code> is being called within a render pass
instance begun with <a href="chap8.html#vkCmdBeginRendering">vkCmdBeginRendering</a>, the render passes
specified in the <code>pBeginInfo-&gt;pInheritanceInfo-&gt;renderPass</code> members
of the <a href="chap6.html#vkBeginCommandBuffer">vkBeginCommandBuffer</a> commands used to begin recording each
element of <code>pCommandBuffers</code> <strong class="purple">must</strong> be <a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-flags-06026" href="chap6.html#VUID-vkCmdExecuteCommands-flags-06026"></a> <span class="vuid">VUID-vkCmdExecuteCommands-flags-06026</span><br>

If <code>vkCmdExecuteCommands</code> is being called within a render pass
instance begun with <a href="chap8.html#vkCmdBeginRendering">vkCmdBeginRendering</a>, the <code>flags</code> member of
the <a href="chap6.html#VkCommandBufferInheritanceRenderingInfo">VkCommandBufferInheritanceRenderingInfo</a> structure included in
the <code>pNext</code> chain of
<a href="chap6.html#VkCommandBufferBeginInfo">VkCommandBufferBeginInfo</a>::<code>pInheritanceInfo</code> used to begin
recording each element of <code>pCommandBuffers</code> <strong class="purple">must</strong> be equal to the
<a href="chap8.html#VkRenderingInfo">VkRenderingInfo</a>::<code>flags</code> parameter to
<a href="chap8.html#vkCmdBeginRendering">vkCmdBeginRendering</a>, excluding
<code>VK_RENDERING_CONTENTS_SECONDARY_COMMAND_BUFFERS_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-colorAttachmentCount-06027" href="chap6.html#VUID-vkCmdExecuteCommands-colorAttachmentCount-06027"></a> <span class="vuid">VUID-vkCmdExecuteCommands-colorAttachmentCount-06027</span><br>

If <code>vkCmdExecuteCommands</code> is being called within a render pass
instance begun with <a href="chap8.html#vkCmdBeginRendering">vkCmdBeginRendering</a>, the
<code>colorAttachmentCount</code> member of the
<a href="chap6.html#VkCommandBufferInheritanceRenderingInfo">VkCommandBufferInheritanceRenderingInfo</a> structure included in the
<code>pNext</code> chain of
<a href="chap6.html#VkCommandBufferBeginInfo">VkCommandBufferBeginInfo</a>::<code>pInheritanceInfo</code> used to begin
recording each element of <code>pCommandBuffers</code> <strong class="purple">must</strong> be equal to the
<a href="chap8.html#VkRenderingInfo">VkRenderingInfo</a>::<code>colorAttachmentCount</code> parameter to
<a href="chap8.html#vkCmdBeginRendering">vkCmdBeginRendering</a></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-imageView-06028" href="chap6.html#VUID-vkCmdExecuteCommands-imageView-06028"></a> <span class="vuid">VUID-vkCmdExecuteCommands-imageView-06028</span><br>

If <code>vkCmdExecuteCommands</code> is being called within a render pass
instance begun with <a href="chap8.html#vkCmdBeginRendering">vkCmdBeginRendering</a>, if the <code>imageView</code>
member of an element of the
<a href="chap8.html#VkRenderingInfo">VkRenderingInfo</a>::<code>pColorAttachments</code> parameter to
<a href="chap8.html#vkCmdBeginRendering">vkCmdBeginRendering</a> is not <a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, the corresponding
element of the <code>pColorAttachmentFormats</code> member of the
<a href="chap6.html#VkCommandBufferInheritanceRenderingInfo">VkCommandBufferInheritanceRenderingInfo</a> structure included in the
<code>pNext</code> chain of
<a href="chap6.html#VkCommandBufferBeginInfo">VkCommandBufferBeginInfo</a>::<code>pInheritanceInfo</code> used to begin
recording each element of <code>pCommandBuffers</code> <strong class="purple">must</strong> be equal to the
format used to create that image view</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-imageView-07606" href="chap6.html#VUID-vkCmdExecuteCommands-imageView-07606"></a> <span class="vuid">VUID-vkCmdExecuteCommands-imageView-07606</span><br>

If <code>vkCmdExecuteCommands</code> is being called within a render pass
instance begun with <a href="chap8.html#vkCmdBeginRendering">vkCmdBeginRendering</a>, if the <code>imageView</code>
member of an element of the
<a href="chap8.html#VkRenderingInfo">VkRenderingInfo</a>::<code>pColorAttachments</code> parameter to
<a href="chap8.html#vkCmdBeginRendering">vkCmdBeginRendering</a> is <a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, the corresponding
element of the <code>pColorAttachmentFormats</code> member of the
<a href="chap6.html#VkCommandBufferInheritanceRenderingInfo">VkCommandBufferInheritanceRenderingInfo</a> structure included in the
<code>pNext</code> chain of
<a href="chap6.html#VkCommandBufferBeginInfo">VkCommandBufferBeginInfo</a>::<code>pInheritanceInfo</code> used to begin
recording each element of <code>pCommandBuffers</code> <strong class="purple">must</strong> be
<code>VK_FORMAT_UNDEFINED</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pDepthAttachment-06029" href="chap6.html#VUID-vkCmdExecuteCommands-pDepthAttachment-06029"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pDepthAttachment-06029</span><br>

If <code>vkCmdExecuteCommands</code> is being called within a render pass
instance begun with <a href="chap8.html#vkCmdBeginRendering">vkCmdBeginRendering</a>, if the
<a href="chap8.html#VkRenderingInfo">VkRenderingInfo</a>::<code>pDepthAttachment-&gt;imageView</code> parameter to
<a href="chap8.html#vkCmdBeginRendering">vkCmdBeginRendering</a> is not <a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, the value of the
<code>depthAttachmentFormat</code> member of the
<a href="chap6.html#VkCommandBufferInheritanceRenderingInfo">VkCommandBufferInheritanceRenderingInfo</a> structure included in the
<code>pNext</code> chain of
<a href="chap6.html#VkCommandBufferBeginInfo">VkCommandBufferBeginInfo</a>::<code>pInheritanceInfo</code> used to begin
recording each element of <code>pCommandBuffers</code> <strong class="purple">must</strong> be equal to the
format used to create that image view</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pStencilAttachment-06030" href="chap6.html#VUID-vkCmdExecuteCommands-pStencilAttachment-06030"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pStencilAttachment-06030</span><br>

If <code>vkCmdExecuteCommands</code> is being called within a render pass
instance begun with <a href="chap8.html#vkCmdBeginRendering">vkCmdBeginRendering</a>, if the
<a href="chap8.html#VkRenderingInfo">VkRenderingInfo</a>::<code>pStencilAttachment-&gt;imageView</code> parameter to
<a href="chap8.html#vkCmdBeginRendering">vkCmdBeginRendering</a> is not <a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, the value of the
<code>stencilAttachmentFormat</code> member of the
<a href="chap6.html#VkCommandBufferInheritanceRenderingInfo">VkCommandBufferInheritanceRenderingInfo</a> structure included in the
<code>pNext</code> chain of
<a href="chap6.html#VkCommandBufferBeginInfo">VkCommandBufferBeginInfo</a>::<code>pInheritanceInfo</code> used to begin
recording each element of <code>pCommandBuffers</code> <strong class="purple">must</strong> be equal to the
format used to create that image view</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pDepthAttachment-06774" href="chap6.html#VUID-vkCmdExecuteCommands-pDepthAttachment-06774"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pDepthAttachment-06774</span><br>

If <code>vkCmdExecuteCommands</code> is being called within a render pass
instance begun with <a href="chap8.html#vkCmdBeginRendering">vkCmdBeginRendering</a> and the
<a href="chap8.html#VkRenderingInfo">VkRenderingInfo</a>::<code>pDepthAttachment-&gt;imageView</code> parameter to
<a href="chap8.html#vkCmdBeginRendering">vkCmdBeginRendering</a> was <a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, the value of the
<code>depthAttachmentFormat</code> member of the
<a href="chap6.html#VkCommandBufferInheritanceRenderingInfo">VkCommandBufferInheritanceRenderingInfo</a> structure included in the
<code>pNext</code> chain of
<a href="chap6.html#VkCommandBufferBeginInfo">VkCommandBufferBeginInfo</a>::<code>pInheritanceInfo</code> used to begin
recording each element of <code>pCommandBuffers</code> <strong class="purple">must</strong> be
<code>VK_FORMAT_UNDEFINED</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pStencilAttachment-06775" href="chap6.html#VUID-vkCmdExecuteCommands-pStencilAttachment-06775"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pStencilAttachment-06775</span><br>

If <code>vkCmdExecuteCommands</code> is being called within a render pass
instance begun with <a href="chap8.html#vkCmdBeginRendering">vkCmdBeginRendering</a> and the
<a href="chap8.html#VkRenderingInfo">VkRenderingInfo</a>::<code>pStencilAttachment-&gt;imageView</code> parameter to
<a href="chap8.html#vkCmdBeginRendering">vkCmdBeginRendering</a> was <a href="chap49.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, the value of the
<code>stencilAttachmentFormat</code> member of the
<a href="chap6.html#VkCommandBufferInheritanceRenderingInfo">VkCommandBufferInheritanceRenderingInfo</a> structure included in the
<code>pNext</code> chain of
<a href="chap6.html#VkCommandBufferBeginInfo">VkCommandBufferBeginInfo</a>::<code>pInheritanceInfo</code> used to begin
recording each element of <code>pCommandBuffers</code> <strong class="purple">must</strong> be
<code>VK_FORMAT_UNDEFINED</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-viewMask-06031" href="chap6.html#VUID-vkCmdExecuteCommands-viewMask-06031"></a> <span class="vuid">VUID-vkCmdExecuteCommands-viewMask-06031</span><br>

If <code>vkCmdExecuteCommands</code> is being called within a render pass
instance begun with <a href="chap8.html#vkCmdBeginRendering">vkCmdBeginRendering</a>, the <code>viewMask</code> member
of the <a href="chap6.html#VkCommandBufferInheritanceRenderingInfo">VkCommandBufferInheritanceRenderingInfo</a> structure included
in the <code>pNext</code> chain of
<a href="chap6.html#VkCommandBufferBeginInfo">VkCommandBufferBeginInfo</a>::<code>pInheritanceInfo</code> used to begin
recording each element of <code>pCommandBuffers</code> <strong class="purple">must</strong> be equal to the
<a href="chap8.html#VkRenderingInfo">VkRenderingInfo</a>::<code>viewMask</code> parameter to
<a href="chap8.html#vkCmdBeginRendering">vkCmdBeginRendering</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdExecuteCommands-commandBuffer-parameter" href="chap6.html#VUID-vkCmdExecuteCommands-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdExecuteCommands-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-pCommandBuffers-parameter" href="chap6.html#VUID-vkCmdExecuteCommands-pCommandBuffers-parameter"></a> <span class="vuid">VUID-vkCmdExecuteCommands-pCommandBuffers-parameter</span><br>
 <code>pCommandBuffers</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>commandBufferCount</code> valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handles</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-commandBuffer-recording" href="chap6.html#VUID-vkCmdExecuteCommands-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdExecuteCommands-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-commandBuffer-cmdpool" href="chap6.html#VUID-vkCmdExecuteCommands-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdExecuteCommands-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support transfer, graphics, or compute operations</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-videocoding" href="chap6.html#VUID-vkCmdExecuteCommands-videocoding"></a> <span class="vuid">VUID-vkCmdExecuteCommands-videocoding</span><br>
 This command <strong class="purple">must</strong> only be called outside of a video coding scope</p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-bufferlevel" href="chap6.html#VUID-vkCmdExecuteCommands-bufferlevel"></a> <span class="vuid">VUID-vkCmdExecuteCommands-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-commandBufferCount-arraylength" href="chap6.html#VUID-vkCmdExecuteCommands-commandBufferCount-arraylength"></a> <span class="vuid">VUID-vkCmdExecuteCommands-commandBufferCount-arraylength</span><br>
 <code>commandBufferCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-vkCmdExecuteCommands-commonparent" href="chap6.html#VUID-vkCmdExecuteCommands-commonparent"></a> <span class="vuid">VUID-vkCmdExecuteCommands-commonparent</span><br>
 Both of <code>commandBuffer</code>, and the elements of <code>pCommandBuffers</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap5.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap36.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer<br>
Graphics<br>
Compute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indirection</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="commandbuffers-devicemask"><a class="anchor" href="chap6.html#commandbuffers-devicemask"></a>6.8. Command Buffer Device Mask</h3>
<div class="paragraph">
<p>Each command buffer has a piece of state storing the current device mask of
the command buffer.
This mask controls which physical devices within the logical device all
subsequent commands will execute on, including state-setting commands,
action commands, and synchronization commands.</p>
</div>
<div class="paragraph">
<p>Scissor
and viewport state
(excluding the count of each)
<strong class="purple">can</strong> be set to different values on each physical device (only when set as
dynamic state), and each physical device will render using its local copy of
the state.
Other state is shared between physical devices, such that all physical
devices use the most recently set values for the state.
However, when recording an action command that uses a piece of state, the
most recent command that set that state <strong class="purple">must</strong> have included all physical
devices that execute the action command in its current device mask.</p>
</div>
<div class="paragraph">
<p>The command buffer’s device mask is orthogonal to the
<code>pCommandBufferDeviceMasks</code> member of <a href="chap6.html#VkDeviceGroupSubmitInfo">VkDeviceGroupSubmitInfo</a>.
Commands only execute on a physical device if the device index is set in
both device masks.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="chap6.html#VkCommandBufferBeginInfo">VkCommandBufferBeginInfo</a> includes a
<code>VkDeviceGroupCommandBufferBeginInfo</code> structure, then that structure
includes an initial device mask for the command buffer.</p>
</div>
<div class="paragraph">
<p>The <code>VkDeviceGroupCommandBufferBeginInfo</code> structure is defined as:</p>
</div>
<div id="VkDeviceGroupCommandBufferBeginInfo" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="nc">VkDeviceGroupCommandBufferBeginInfo</span> <span class="p">{</span>
    <span class="n">VkStructureType</span>    <span class="n">sType</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">void</span><span class="o">*</span>        <span class="n">pNext</span><span class="p">;</span>
    <span class="kt">uint32_t</span>           <span class="n">deviceMask</span><span class="p">;</span>
<span class="p">}</span> <span class="n">VkDeviceGroupCommandBufferBeginInfo</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkDeviceGroupCommandBufferBeginInfoKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_device_group</span>
<span class="k">typedef</span> <span class="n">VkDeviceGroupCommandBufferBeginInfo</span> <span class="n">VkDeviceGroupCommandBufferBeginInfoKHR</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>deviceMask</code> is the initial value of the command buffer’s device
mask.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The initial device mask also acts as an upper bound on the set of devices
that <strong class="purple">can</strong> ever be in the device mask in the command buffer.</p>
</div>
<div class="paragraph">
<p>If this structure is not present, the initial value of a command buffer’s
device mask is set to include all physical devices in the logical device
when the command buffer begins recording.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDeviceGroupCommandBufferBeginInfo-deviceMask-00106" href="chap6.html#VUID-VkDeviceGroupCommandBufferBeginInfo-deviceMask-00106"></a> <span class="vuid">VUID-VkDeviceGroupCommandBufferBeginInfo-deviceMask-00106</span><br>

<code>deviceMask</code> <strong class="purple">must</strong> be a valid device mask value</p>
</li>
<li>
<p><a id="VUID-VkDeviceGroupCommandBufferBeginInfo-deviceMask-00107" href="chap6.html#VUID-VkDeviceGroupCommandBufferBeginInfo-deviceMask-00107"></a> <span class="vuid">VUID-VkDeviceGroupCommandBufferBeginInfo-deviceMask-00107</span><br>

<code>deviceMask</code> <strong class="purple">must</strong> not be zero</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDeviceGroupCommandBufferBeginInfo-sType-sType" href="chap6.html#VUID-VkDeviceGroupCommandBufferBeginInfo-sType-sType"></a> <span class="vuid">VUID-VkDeviceGroupCommandBufferBeginInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_DEVICE_GROUP_COMMAND_BUFFER_BEGIN_INFO</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To update the current device mask of a command buffer, call:</p>
</div>
<div id="vkCmdSetDeviceMask" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_VERSION_1_1</span>
<span class="kt">void</span> <span class="nf">vkCmdSetDeviceMask</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">deviceMask</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent command</p>
</div>
<div id="vkCmdSetDeviceMaskKHR" class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="c++"><span class="c1">// Provided by VK_KHR_device_group</span>
<span class="kt">void</span> <span class="nf">vkCmdSetDeviceMaskKHR</span><span class="p">(</span>
    <span class="n">VkCommandBuffer</span>                             <span class="n">commandBuffer</span><span class="p">,</span>
    <span class="kt">uint32_t</span>                                    <span class="n">deviceMask</span><span class="p">);</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is command buffer whose current device mask is
modified.</p>
</li>
<li>
<p><code>deviceMask</code> is the new value of the current device mask.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>deviceMask</code> is used to filter out subsequent commands from executing on
all physical devices whose bit indices are not set in the mask, except
commands beginning a render pass instance, commands transitioning to the
next subpass in the render pass instance, and commands ending a render pass
instance, which always execute on the set of physical devices whose bit
indices are included in the <code>deviceMask</code> member of the
<a href="chap8.html#VkDeviceGroupRenderPassBeginInfo">VkDeviceGroupRenderPassBeginInfo</a> structure passed to the command
beginning the corresponding render pass instance.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdSetDeviceMask-deviceMask-00108" href="chap6.html#VUID-vkCmdSetDeviceMask-deviceMask-00108"></a> <span class="vuid">VUID-vkCmdSetDeviceMask-deviceMask-00108</span><br>

<code>deviceMask</code> <strong class="purple">must</strong> be a valid device mask value</p>
</li>
<li>
<p><a id="VUID-vkCmdSetDeviceMask-deviceMask-00109" href="chap6.html#VUID-vkCmdSetDeviceMask-deviceMask-00109"></a> <span class="vuid">VUID-vkCmdSetDeviceMask-deviceMask-00109</span><br>

<code>deviceMask</code> <strong class="purple">must</strong> not be zero</p>
</li>
<li>
<p><a id="VUID-vkCmdSetDeviceMask-deviceMask-00110" href="chap6.html#VUID-vkCmdSetDeviceMask-deviceMask-00110"></a> <span class="vuid">VUID-vkCmdSetDeviceMask-deviceMask-00110</span><br>

<code>deviceMask</code> <strong class="purple">must</strong> not include any set bits that were not in the
<a href="chap6.html#VkDeviceGroupCommandBufferBeginInfo">VkDeviceGroupCommandBufferBeginInfo</a>::<code>deviceMask</code> value when
the command buffer began recording</p>
</li>
<li>
<p><a id="VUID-vkCmdSetDeviceMask-deviceMask-00111" href="chap6.html#VUID-vkCmdSetDeviceMask-deviceMask-00111"></a> <span class="vuid">VUID-vkCmdSetDeviceMask-deviceMask-00111</span><br>

If <code>vkCmdSetDeviceMask</code> is called inside a render pass instance,
<code>deviceMask</code> <strong class="purple">must</strong> not include any set bits that were not in the
<a href="chap8.html#VkDeviceGroupRenderPassBeginInfo">VkDeviceGroupRenderPassBeginInfo</a>::<code>deviceMask</code> value when the
render pass instance began recording</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdSetDeviceMask-commandBuffer-parameter" href="chap6.html#VUID-vkCmdSetDeviceMask-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdSetDeviceMask-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdSetDeviceMask-commandBuffer-recording" href="chap6.html#VUID-vkCmdSetDeviceMask-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdSetDeviceMask-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap6.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdSetDeviceMask-commandBuffer-cmdpool" href="chap6.html#VUID-vkCmdSetDeviceMask-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdSetDeviceMask-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics, compute, or transfer operations</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap36.html#vkCmdBeginVideoCodingKHR">Video Coding Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap5.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap3.html#fundamentals-queueoperation-command-types">Command Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary<br>
Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics<br>
Compute<br>
Transfer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">State</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
</div></div>

<nav>
  <a rel="prev" href="chap5.html" class="nav nav-prev" title="Previous page" aria-label="Previous page" aria-keyshortcuts="Left">
        <i class="fa fa-angle-left"></i>
     </a>
  <a rel="next" href="chap7.html" class="nav nav-next" title="Next page" aria-label="Next page" aria-keyshortcuts="Right">
        <i class="fa fa-angle-right"></i>
     </a>
  <div style="clear: both"></div>
</nav>
<div id="footer">
<div id="footer-text">
Version 1.3.254<br>
Last updated 2023-02-26 21:00:39 -0800
</div>
</div>



</body>
  <script>
  function isInViewport(ele) {
    const rect = ele.getBoundingClientRect();
    return (
        rect.top >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight)
    );
  }
  function yPosition (ele) {
    const rect = ele.getBoundingClientRect();
    return (rect.top - 20); // 20px above
  }
  let curr = document.getElementsByClassName('current');
  if (!isInViewport(curr[curr.length - 1])) {
    document.getElementById('toc').scrollTo({
      top: yPosition(curr[0]),
      left: 0,
      behavior: 'smooth'
    });
  }

  /* For page navigation */
  function gotoPage(selector) {
    const button = document.querySelector(selector);
    if (button)
      window.location.href = button.href;
  }
  document.addEventListener('keydown', e => {
    switch (e.key) {
      case 'ArrowRight':
        e.preventDefault();
        gotoPage('.nav-next');
        break;
      case 'ArrowLeft':
        e.preventDefault();
        gotoPage('.nav-prev');
        break;
    }
  });
  </script>
  </html>