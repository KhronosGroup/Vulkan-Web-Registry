<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<meta name="author" content="The Khronos速 Vulkan Working Group">
<title>Vulkan速 1.0.168 - A Specification (with all registered Vulkan extensions)</title>
<style>
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: #fff; color: #222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

object, svg { display: inline-block; vertical-align: middle; }

.center { margin-left: auto; margin-right: auto; }

.spread { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.4; color: black; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #0068b0; text-decoration: none; line-height: inherit; }
a:hover, a:focus { color: #333; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: Noto, sans-serif; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 0.75em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Noto, sans-serif; font-weight: normal; font-style: normal; color: black; text-rendering: optimizeLegibility; margin-top: 0.5em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #4d4d4d; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #ddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; color: #264357; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 0.75em; list-style-position: outside; font-family: Noto, sans-serif; }

ul, ol { margin-left: 1.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3em; font-weight: bold; }
dl dd { margin-bottom: 0.75em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: black; border-bottom: 1px dotted #ddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 0.75em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #ddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #5e93b8; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #5e93b8; }

blockquote, blockquote p { line-height: 1.6; color: #333; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #ddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Tables */
table { background: #fff; margin-bottom: 1.25em; border: solid 1px #d8d8ce; }
table thead, table tfoot { background: #eee; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #6d6e71; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f8f8f8; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.4; }

body { -moz-osx-font-smoothing: grayscale; -webkit-font-smoothing: antialiased; tab-size: 4; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }

a:hover, a:focus { text-decoration: underline; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: inherit; font-style: normal !important; letter-spacing: 0; padding: 0; background-color: transparent; -webkit-border-radius: 0; border-radius: 0; line-height: inherit; word-wrap: break-word; }
*:not(pre) > code.nobreak { word-wrap: normal; }
*:not(pre) > code.nowrap { white-space: nowrap; }

pre, pre > code { line-height: 1.6; color: #264357; font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; }

em em { font-style: normal; }

strong strong { font-weight: normal; }

.keyseq { color: #333333; }

kbd { font-family: Consolas, "Liberation Mono", Courier, monospace; display: inline-block; color: black; font-size: 0.65em; line-height: 1.45; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -moz-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: 0 0.15em; padding: 0.2em 0.5em; vertical-align: middle; position: relative; top: -0.1em; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menuref { color: #000; }

.menuseq b:not(.caret), .menuref { font-weight: inherit; }

.menuseq { word-spacing: -0.02em; }
.menuseq b.caret { font-size: 1.25em; line-height: 0.8; }
.menuseq i.caret { font-weight: bold; text-align: center; width: 0.45em; }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 1.5em; padding-right: 1.5em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: black; margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #ddd; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #ddd; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #ddd; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: #5e93b8; display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: #333; }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: #333; }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: black; border-bottom: 1px solid #ddd; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#toc { border-bottom: 0 solid #ddd; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: Noto, sans-serif; list-style-type: none; }
#toc li { line-height: 1.3334; margin-top: 0.3334em; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: black; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background-color: #fff; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #ddd; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; margin-bottom: 0.8rem; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #ddd; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: #fff; -webkit-border-radius: 0; border-radius: 0; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background-color: none; padding: 1.25em; }

#footer-text { color: black; line-height: 1.44; }

#content { margin-bottom: 0.625em; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { #content { margin-bottom: 1.25em; }
  .sect1 { padding-bottom: 1.25em; } }
.sect1:last-child { padding-bottom: 0; }

.sect1 + .sect1 { border-top: 0 solid #ddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: black; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: black; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; }

table.tableblock > caption.title { white-space: nowrap; overflow: visible; max-width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: black; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: initial; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: Noto, sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #ddd; color: #5e93b8; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: #fff; -webkit-border-radius: 0; border-radius: 0; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: #fff; -webkit-border-radius: 0; border-radius: 0; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: black; margin-top: 0; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint { background: #eee; }
.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint { background: #f2f1f1; }

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { border: 1px hidden #666; -webkit-border-radius: 0; border-radius: 0; word-wrap: break-word; padding: 1.25em 1.5625em 1.125em 1.5625em; font-size: 0.8125em; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 1em; } }

.literalblock.output pre { color: #eee; background-color: #264357; }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 1.25em 1.5625em 1.125em 1.5625em; -webkit-border-radius: 0; border-radius: 0; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: #999; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

table.pyhltable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; line-height: 1.6; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

pre.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #ddd; }

pre.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background: none !important; padding-right: 0 !important; }

.quoteblock { margin: 0 1em 0.75em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock blockquote p { color: #333; font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: black; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.5em; margin-right: 0.5ex; text-align: right; }
.quoteblock .quoteblock { margin-left: 0; margin-right: 0; padding: 0.5em 0; border-left: 3px solid #5e93b8; }
.quoteblock .quoteblock blockquote { padding: 0 0 0 0.75em; }
.quoteblock .quoteblock blockquote:before { display: none; }

.verseblock { margin: 0 1em 0.75em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: #333; font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.8125em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.025em; color: #5e93b8; }

.quoteblock.abstract { margin: 0 0 0.75em 0; display: block; }
.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p { text-align: left; word-spacing: 0; }
.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before { display: none; }

table.tableblock { max-width: 100%; border-collapse: separate; }
table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #d8d8ce; }

table.grid-all > thead > tr > .tableblock, table.grid-all > tbody > tr > .tableblock { border-width: 0 1px 1px 0; }

table.grid-all > tfoot > tr > .tableblock { border-width: 1px 1px 0 0; }

table.grid-cols > * > tr > .tableblock { border-width: 0 1px 0 0; }

table.grid-rows > thead > tr > .tableblock, table.grid-rows > tbody > tr > .tableblock { border-width: 0 0 1px 0; }

table.grid-rows > tfoot > tr > .tableblock { border-width: 1px 0 0 0; }

table.grid-all > * > tr > .tableblock:last-child, table.grid-cols > * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-all > tbody > tr:last-child > .tableblock, table.grid-all > thead:last-child > tr > .tableblock, table.grid-rows > tbody > tr:last-child > .tableblock, table.grid-rows > thead:last-child > tr > .tableblock { border-bottom-width: 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot { border-width: 1px 0; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.4; background: #eee; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: #222; font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.375em; }

ul.checklist, ul.none, ol.none, ul.no-bullet, ol.no-bullet, ol.unnumbered, ul.unstyled, ol.unstyled { list-style-type: none; }

ul.no-bullet, ol.no-bullet, ol.unnumbered { margin-left: 0.625em; }

ul.unstyled, ol.unstyled { margin-left: 0; }

ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child { width: 1.25em; font-size: 0.8em; position: relative; bottom: 0.125em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.inline { display: -ms-flexbox; display: -webkit-box; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; list-style: none; margin: 0 0 0.375em -0.75em; }

ul.inline > li { margin-left: 0.75em; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1, td.hdlist2 { vertical-align: top; padding: 0 0.625em; }

td.hdlist1 { font-weight: bold; padding-bottom: 0.75em; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0.4em 0.75em 0 0.75em; line-height: 1; vertical-align: top; }
.colist > table tr > td:first-of-type img { max-width: initial; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px #fff; -webkit-box-shadow: 0 0 0 1px #ddd; box-shadow: 0 0 0 1px #ddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; display: inline-block; }
a.image object { pointer-events: none; }

sup.footnote, sup.footnoteref { font-size: 0.875em; position: static; vertical-align: super; }
sup.footnote a, sup.footnoteref a { text-decoration: none; }
sup.footnote a:active, sup.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -0.25em 0 0.75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em 0 0.225em; line-height: 1.3334; font-size: 0.875em; margin-left: 1.2em; margin-bottom: 0.2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; margin-left: -1.05em; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }
a span.icon > .fa { cursor: inherit; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #29475c; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: black; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { border-bottom: 1px solid #ddd; }

.sect1 { padding-bottom: 0; }

#toctitle { color: #00406F; font-weight: normal; margin-top: 1.5em; }

.sidebarblock { border-color: #aaa; }

code { -webkit-border-radius: 4px; border-radius: 4px; }

p.tableblock.header { color: #6d6e71; }

.literalblock pre, .listingblock pre { background: #eee; }

/* From https://github.com/KhronosGroup/Vulkan-Docs/pull/901 */
a code { color: inherit; }

/* From https://github.com/KhronosGroup/Vulkan-Docs/pull/1157 */
/* Make VUID anchor handles*/
li > p > a[id^="VUID-"] { visibility: hidden; position: absolute; z-index: 1001; width: 2.2ex; margin-left: -2.2ex; display: block; text-decoration: none !important; text-align: center; font-weight: normal; }

li > p > a[id^="VUID-"]:before { content: "\00A7"; font-size: 1em; display: block; padding-top: 0em; background: #fff; }

li > p:hover > a[id^="VUID-"], li > p > a[id^="VUID-"]:hover { visibility: visible; }

li > p > a[id^="VUID-"].link { color: black; text-decoration: none; }

/* TODO: not quite sure what these two do */
li > p > a[id^="VUID-"].link:hover { color: black; }

.vuid { color: gray; font-family: monospace; }

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>

<!-- dragged in by font-awesome css included by asciidoctor, but preloaded in this extension for convenience -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0" as="font" type="font/woff2" crossorigin="">

<!-- Note: Chrome needs crossorigin="" even for same-origin fonts -->
<link rel="preload" href="../katex/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="">
<link rel="preload" href="../katex/fonts/KaTeX_Typewriter-Regular.woff2" as="font" type="font/woff2" crossorigin=""><link rel="stylesheet" href="../katex/katex.min.css">
<!--ChunkedSearchJSMarker-->
<link href="chunked.css?4" rel="stylesheet">
<script>var searchindexurl = 'search.index.js?4' + (document.title.replace(/[^0-9.]/g, ''));</script>
<script src="chunked.js?4"></script>
<style>
    #loading_msg {
        width: 100%;
        margin-left: auto;
        margin-right: auto;
        margin-top: 1ex;
        margin-bottom: 1ex;
        max-width: 62.5em;
        position: relative;
        padding-left: 1.5em;
        padding-right: 1.5em;
    }
    .hidden {display: none;}
</style>
<script>
    function hideElement(e){
        e.setAttribute("hidden", "");
        e.classList.add("hidden");
    }

    function unhideElement(e){
        e.classList.remove("hidden");
        e.removeAttribute("hidden");
    }

    function hideLoadableContent(){
        unhideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) hideElement(loadable);
    }

    function unhideLoadableContent(){
        hideElement( document.getElementById("loading_msg") );
        for( var loadable of document.getElementsByClassName("loadable") ) unhideElement(loadable);
    }

    window.addEventListener("load", unhideLoadableContent);
</script>
</head>
<body class="book toc2 toc-left">
<div id="header" style="max-width: 100%;">
<h1>Vulkan<sup>速</sup> 1.0.168 - A Specification (with all registered Vulkan extensions)</h1>
<div class="details">
<span id="author" class="author">The Khronos<sup>速</sup> Vulkan Working Group</span><br>
<span id="revnumber">version 1.0.168,</span>
<span id="revdate">2021-01-25 05:19:26Z</span>
<br><span id="revremark">from git branch: github-main commit: cd10a156f111cfc930c1821cc41b987661a22c76</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="chap2.html#preamble">1. Preamble</a></li>
<li><a href="chap3.html#introduction">2. Introduction</a>
<ul class="sectlevel2">
<li><a href="chap3.html#introduction-conventions">2.1. Document Conventions</a></li>
</ul>
</li>
<li><a href="chap4.html#fundamentals">3. Fundamentals</a>
<ul class="sectlevel2">
<li><a href="chap4.html#fundamentals-host-environment">3.1. Host and Device Environment</a></li>
<li><a href="chap4.html#fundamentals-execmodel">3.2. Execution Model</a></li>
<li><a href="chap4.html#fundamentals-objectmodel-overview">3.3. Object Model</a></li>
<li><a href="chap4.html#fundamentals-abi">3.4. Application Binary Interface</a></li>
<li><a href="chap4.html#fundamentals-commandsyntax">3.5. Command Syntax and Duration</a></li>
<li><a href="chap4.html#fundamentals-threadingbehavior">3.6. Threading Behavior</a></li>
<li><a href="chap4.html#fundamentals-errors">3.7. Errors</a></li>
<li><a href="chap4.html#fundamentals-numerics">3.8. Numeric Representation and Computation</a></li>
<li><a href="chap4.html#fundamentals-fixedconv">3.9. Fixed-Point Data Conversions</a></li>
<li><a href="chap4.html#fundamentals-common-objects">3.10. Common Object Types</a></li>
</ul>
</li>
<li><a href="chap5.html#initialization">4. Initialization</a>
<ul class="sectlevel2">
<li><a href="chap5.html#initialization-functionpointers">4.1. Command Function Pointers</a></li>
<li><a href="chap5.html#initialization-instances">4.2. Instances</a></li>
</ul>
</li>
<li><a href="chap6.html#devsandqueues">5. Devices and Queues</a>
<ul class="sectlevel2">
<li><a href="chap6.html#devsandqueues-physical-device-enumeration">5.1. Physical Devices</a></li>
<li><a href="chap6.html#devsandqueues-devices">5.2. Devices</a></li>
<li><a href="chap6.html#devsandqueues-queues">5.3. Queues</a></li>
</ul>
</li>
<li><a href="chap7.html#commandbuffers">6. Command Buffers</a>
<ul class="sectlevel2">
<li><a href="chap7.html#commandbuffers-lifecycle">6.1. Command Buffer Lifecycle</a></li>
<li><a href="chap7.html#commandbuffers-pools">6.2. Command Pools</a></li>
<li><a href="chap7.html#commandbuffer-allocation">6.3. Command Buffer Allocation and Management</a></li>
<li><a href="chap7.html#commandbuffers-recording">6.4. Command Buffer Recording</a></li>
<li><a href="chap7.html#commandbuffers-submission">6.5. Command Buffer Submission</a></li>
<li><a href="chap7.html#commandbuffers-submission-progress">6.6. Queue Forward Progress</a></li>
<li><a href="chap7.html#commandbuffers-secondary">6.7. Secondary Command Buffer Execution</a></li>
<li><a href="chap7.html#commandbuffers-devicemask">6.8. Command Buffer Device Mask</a></li>
</ul>
</li>
<li><a href="chap8.html#synchronization">7. Synchronization and Cache Control</a>
<ul class="sectlevel2">
<li><a href="chap8.html#synchronization-dependencies">7.1. Execution and Memory Dependencies</a></li>
<li><a href="chap8.html#synchronization-implicit">7.2. Implicit Synchronization Guarantees</a></li>
<li><a href="chap8.html#synchronization-fences">7.3. Fences</a></li>
<li><a href="chap8.html#synchronization-semaphores">7.4. Semaphores</a></li>
<li><a href="chap8.html#synchronization-events">7.5. Events</a></li>
<li><a href="chap8.html#synchronization-pipeline-barriers">7.6. Pipeline Barriers</a></li>
<li><a href="chap8.html#synchronization-memory-barriers">7.7. Memory Barriers</a></li>
<li><a href="chap8.html#synchronization-wait-idle">7.8. Wait Idle Operations</a></li>
<li><a href="chap8.html#synchronization-submission-host-writes">7.9. Host Write Ordering Guarantees</a></li>
<li><a href="chap8.html#synchronization-device-group">7.10. Synchronization and Multiple Physical Devices</a></li>
<li><a href="chap8.html#calibrated-timestamps">7.11. Calibrated timestamps</a></li>
</ul>
</li>
<li><a href="#renderpass">8. Render Pass</a>
<ul class="sectlevel2">
<li><a href="#renderpass-creation">8.1. Render Pass Creation</a></li>
<li><a href="#renderpass-compatibility">8.2. Render Pass Compatibility</a></li>
<li><a href="#_framebuffers">8.3. Framebuffers</a></li>
<li><a href="#renderpass-commands">8.4. Render Pass Commands</a></li>
</ul>
</li>
<li><a href="chap10.html#shaders">9. Shaders</a>
<ul class="sectlevel2">
<li><a href="chap10.html#shader-modules">9.1. Shader Modules</a></li>
<li><a href="chap10.html#shaders-execution">9.2. Shader Execution</a></li>
<li><a href="chap10.html#shaders-execution-memory-ordering">9.3. Shader Memory Access Ordering</a></li>
<li><a href="chap10.html#shaders-inputs">9.4. Shader Inputs and Outputs</a></li>
<li><a href="chap10.html#shaders-task">9.5. Task Shaders</a></li>
<li><a href="chap10.html#shaders-mesh">9.6. Mesh Shaders</a></li>
<li><a href="chap10.html#shaders-vertex">9.7. Vertex Shaders</a></li>
<li><a href="chap10.html#shaders-tessellation-control">9.8. Tessellation Control Shaders</a></li>
<li><a href="chap10.html#shaders-tessellation-evaluation">9.9. Tessellation Evaluation Shaders</a></li>
<li><a href="chap10.html#shaders-geometry">9.10. Geometry Shaders</a></li>
<li><a href="chap10.html#shaders-fragment">9.11. Fragment Shaders</a></li>
<li><a href="chap10.html#shaders-compute">9.12. Compute Shaders</a></li>
<li><a href="chap10.html#shaders-ray-generation">9.13. Ray Generation Shaders</a></li>
<li><a href="chap10.html#shaders-intersection">9.14. Intersection Shaders</a></li>
<li><a href="chap10.html#shaders-any-hit">9.15. Any-Hit Shaders</a></li>
<li><a href="chap10.html#shaders-closest-hit">9.16. Closest Hit Shaders</a></li>
<li><a href="chap10.html#shaders-miss">9.17. Miss Shaders</a></li>
<li><a href="chap10.html#shaders-callable">9.18. Callable Shaders</a></li>
<li><a href="chap10.html#shaders-interpolation-decorations">9.19. Interpolation Decorations</a></li>
<li><a href="chap10.html#shaders-staticuse">9.20. Static Use</a></li>
<li><a href="chap10.html#shaders-scope">9.21. Scope</a></li>
<li><a href="chap10.html#shaders-derivative-operations">9.22. Derivative Operations</a></li>
<li><a href="chap10.html#shaders-helper-invocations">9.23. Helper Invocations</a></li>
<li><a href="chap10.html#_cooperative_matrices">9.24. Cooperative Matrices</a></li>
<li><a href="chap10.html#shaders-validation-cache">9.25. Validation Cache</a></li>
</ul>
</li>
<li><a href="chap11.html#pipelines">10. Pipelines</a>
<ul class="sectlevel2">
<li><a href="chap11.html#pipelines-compute">10.1. Compute Pipelines</a></li>
<li><a href="chap11.html#pipelines-graphics">10.2. Graphics Pipelines</a></li>
<li><a href="chap11.html#pipelines-ray-tracing">10.3. Ray Tracing Pipelines</a></li>
<li><a href="chap11.html#pipelines-destruction">10.4. Pipeline Destruction</a></li>
<li><a href="chap11.html#pipelines-multiple">10.5. Multiple Pipeline Creation</a></li>
<li><a href="chap11.html#pipelines-pipeline-derivatives">10.6. Pipeline Derivatives</a></li>
<li><a href="chap11.html#pipelines-cache">10.7. Pipeline Cache</a></li>
<li><a href="chap11.html#pipelines-specialization-constants">10.8. Specialization Constants</a></li>
<li><a href="chap11.html#pipeline-library">10.9. Pipeline Libraries</a></li>
<li><a href="chap11.html#pipelines-binding">10.10. Pipeline Binding</a></li>
<li><a href="chap11.html#pipelines-dynamic-state">10.11. Dynamic State</a></li>
<li><a href="chap11.html#pipelines-shader-information">10.12. Pipeline Shader Information</a></li>
<li><a href="chap11.html#pipelines-compiler-control">10.13. Pipeline Compiler Control</a></li>
<li><a href="chap11.html#pipelines-creation-feedback">10.14. Pipeline Creation Feedback</a></li>
</ul>
</li>
<li><a href="chap12.html#memory">11. Memory Allocation</a>
<ul class="sectlevel2">
<li><a href="chap12.html#memory-host">11.1. Host Memory</a></li>
<li><a href="chap12.html#memory-device">11.2. Device Memory</a></li>
</ul>
</li>
<li><a href="chap13.html#resources">12. Resource Creation</a>
<ul class="sectlevel2">
<li><a href="chap13.html#resources-buffers">12.1. Buffers</a></li>
<li><a href="chap13.html#resources-buffer-views">12.2. Buffer Views</a></li>
<li><a href="chap13.html#resources-images">12.3. Images</a></li>
<li><a href="chap13.html#resources-image-layouts">12.4. Image Layouts</a></li>
<li><a href="chap13.html#resources-image-views">12.5. Image Views</a></li>
<li><a href="chap13.html#resources-acceleration-structures">12.6. Acceleration Structures</a></li>
<li><a href="chap13.html#resources-association">12.7. Resource Memory Association</a></li>
<li><a href="chap13.html#resources-sharing">12.8. Resource Sharing Mode</a></li>
<li><a href="chap13.html#resources-memory-aliasing">12.9. Memory Aliasing</a></li>
</ul>
</li>
<li><a href="chap14.html#samplers">13. Samplers</a>
<ul class="sectlevel2">
<li><a href="chap14.html#samplers-YCbCr-conversion">13.1. Sampler YC<sub>B</sub>C<sub>R</sub> conversion</a></li>
</ul>
</li>
<li><a href="chap15.html#descriptorsets">14. Resource Descriptors</a>
<ul class="sectlevel2">
<li><a href="chap15.html#descriptorsets-types">14.1. Descriptor Types</a></li>
<li><a href="chap15.html#descriptorsets-sets">14.2. Descriptor Sets</a></li>
<li><a href="chap15.html#_physical_storage_buffer_access">14.3. Physical Storage Buffer Access</a></li>
</ul>
</li>
<li><a href="chap16.html#interfaces">15. Shader Interfaces</a>
<ul class="sectlevel2">
<li><a href="chap16.html#interfaces-iointerfaces">15.1. Shader Input and Output Interfaces</a></li>
<li><a href="chap16.html#interfaces-vertexinput">15.2. Vertex Input Interface</a></li>
<li><a href="chap16.html#interfaces-fragmentoutput">15.3. Fragment Output Interface</a></li>
<li><a href="chap16.html#interfaces-inputattachment">15.4. Fragment Input Attachment Interface</a></li>
<li><a href="chap16.html#interfaces-raypipeline">15.5. Ray Tracing Pipeline Interface</a></li>
<li><a href="chap16.html#interfaces-resources">15.6. Shader Resource Interface</a></li>
<li><a href="chap16.html#interfaces-builtin-variables">15.7. Built-In Variables</a></li>
</ul>
</li>
<li><a href="chap17.html#textures">16. Image Operations</a>
<ul class="sectlevel2">
<li><a href="chap17.html#_image_operations_overview">16.1. Image Operations Overview</a></li>
<li><a href="chap17.html#_conversion_formulas">16.2. Conversion Formulas</a></li>
<li><a href="chap17.html#_texel_input_operations">16.3. Texel Input Operations</a></li>
<li><a href="chap17.html#_texel_output_operations">16.4. Texel Output Operations</a></li>
<li><a href="chap17.html#textures-normalized-operations">16.5. Normalized Texel Coordinate Operations</a></li>
<li><a href="chap17.html#_unnormalized_texel_coordinate_operations">16.6. Unnormalized Texel Coordinate Operations</a></li>
<li><a href="chap17.html#textures-integer-coordinate-operations">16.7. Integer Texel Coordinate Operations</a></li>
<li><a href="chap17.html#textures-sample-operations">16.8. Image Sample Operations</a></li>
<li><a href="chap17.html#textures-footprint">16.9. Texel Footprint Evaluation</a></li>
<li><a href="chap17.html#textures-instructions">16.10. Image Operation Steps</a></li>
<li><a href="chap17.html#textures-queries">16.11. Image Query Instructions</a></li>
</ul>
</li>
<li><a href="chap18.html#fragmentdensitymapops">17. Fragment Density Map Operations</a>
<ul class="sectlevel2">
<li><a href="chap18.html#_fragment_density_map_operations_overview">17.1. Fragment Density Map Operations Overview</a></li>
<li><a href="chap18.html#fragmentdensitymap-fetch-density-value">17.2. Fetch Density Value</a></li>
<li><a href="chap18.html#fragmentdensitymap-conversion-to-fragment-area">17.3. Fragment Area Conversion</a></li>
</ul>
</li>
<li><a href="chap19.html#queries">18. Queries</a>
<ul class="sectlevel2">
<li><a href="chap19.html#queries-pools">18.1. Query Pools</a></li>
<li><a href="chap19.html#queries-operation">18.2. Query Operation</a></li>
<li><a href="chap19.html#queries-occlusion">18.3. Occlusion Queries</a></li>
<li><a href="chap19.html#queries-pipestats">18.4. Pipeline Statistics Queries</a></li>
<li><a href="chap19.html#queries-timestamps">18.5. Timestamp Queries</a></li>
<li><a href="chap19.html#queries-performance">18.6. Performance Queries</a></li>
<li><a href="chap19.html#queries-transform-feedback">18.7. Transform Feedback Queries</a></li>
<li><a href="chap19.html#queries-performance-intel">18.8. Intel performance queries</a></li>
</ul>
</li>
<li><a href="chap20.html#clears">19. Clear Commands</a>
<ul class="sectlevel2">
<li><a href="chap20.html#clears-outside">19.1. Clearing Images Outside A Render Pass Instance</a></li>
<li><a href="chap20.html#clears-inside">19.2. Clearing Images Inside A Render Pass Instance</a></li>
<li><a href="chap20.html#clears-values">19.3. Clear Values</a></li>
<li><a href="chap20.html#clears-filling-buffers">19.4. Filling Buffers</a></li>
<li><a href="chap20.html#clears-updating-buffers">19.5. Updating Buffers</a></li>
</ul>
</li>
<li><a href="chap21.html#copies">20. Copy Commands</a>
<ul class="sectlevel2">
<li><a href="chap21.html#_common_operation">20.1. Common Operation</a></li>
<li><a href="chap21.html#copies-buffers">20.2. Copying Data Between Buffers</a></li>
<li><a href="chap21.html#copies-images">20.3. Copying Data Between Images</a></li>
<li><a href="chap21.html#copies-buffers-images">20.4. Copying Data Between Buffers and Images</a></li>
<li><a href="chap21.html#copies-imagescaling">20.5. Image Copies with Scaling</a></li>
<li><a href="chap21.html#copies-resolve">20.6. Resolving Multisample Images</a></li>
<li><a href="chap21.html#copies-buffer-markers">20.7. Buffer Markers</a></li>
</ul>
</li>
<li><a href="chap22.html#drawing">21. Drawing Commands</a>
<ul class="sectlevel2">
<li><a href="chap22.html#drawing-primitive-topologies">21.1. Primitive Topologies</a></li>
<li><a href="chap22.html#drawing-primitive-order">21.2. Primitive Order</a></li>
<li><a href="chap22.html#drawing-primitive-shading">21.3. Programmable Primitive Shading</a></li>
<li><a href="chap22.html#drawing-conditional-rendering">21.4. Conditional Rendering</a></li>
<li><a href="chap22.html#drawing-mesh-shading">21.5. Programmable Mesh Shading</a></li>
</ul>
</li>
<li><a href="chap23.html#fxvertex">22. Fixed-Function Vertex Processing</a>
<ul class="sectlevel2">
<li><a href="chap23.html#fxvertex-attrib">22.1. Vertex Attributes</a></li>
<li><a href="chap23.html#fxvertex-input">22.2. Vertex Input Description</a></li>
<li><a href="chap23.html#_vertex_attribute_divisor_in_instanced_rendering">22.3. Vertex Attribute Divisor in Instanced Rendering</a></li>
</ul>
</li>
<li><a href="chap24.html#tessellation">23. Tessellation</a>
<ul class="sectlevel2">
<li><a href="chap24.html#_tessellator">23.1. Tessellator</a></li>
<li><a href="chap24.html#_tessellator_patch_discard">23.2. Tessellator Patch Discard</a></li>
<li><a href="chap24.html#tessellation-tessellator-spacing">23.3. Tessellator Spacing</a></li>
<li><a href="chap24.html#tessellation-primitive-order">23.4. Tessellation Primitive Ordering</a></li>
<li><a href="chap24.html#tessellation-vertex-winding-order">23.5. Tessellator Vertex Winding Order</a></li>
<li><a href="chap24.html#tessellation-triangle-tessellation">23.6. Triangle Tessellation</a></li>
<li><a href="chap24.html#tessellation-quad-tessellation">23.7. Quad Tessellation</a></li>
<li><a href="chap24.html#tessellation-isoline-tessellation">23.8. Isoline Tessellation</a></li>
<li><a href="chap24.html#tessellation-point-mode">23.9. Tessellation Point Mode</a></li>
<li><a href="chap24.html#_tessellation_pipeline_state">23.10. Tessellation Pipeline State</a></li>
</ul>
</li>
<li><a href="chap25.html#geometry">24. Geometry Shading</a>
<ul class="sectlevel2">
<li><a href="chap25.html#geometry-input">24.1. Geometry Shader Input Primitives</a></li>
<li><a href="chap25.html#geometry-output">24.2. Geometry Shader Output Primitives</a></li>
<li><a href="chap25.html#geometry-invocations">24.3. Multiple Invocations of Geometry Shaders</a></li>
<li><a href="chap25.html#geometry-ordering">24.4. Geometry Shader Primitive Ordering</a></li>
<li><a href="chap25.html#geometry-passthrough">24.5. Geometry Shader Passthrough</a></li>
</ul>
</li>
<li><a href="chap26.html#mesh">25. Mesh Shading</a>
<ul class="sectlevel2">
<li><a href="chap26.html#mesh-task-input">25.1. Task Shader Input</a></li>
<li><a href="chap26.html#mesh-task-output">25.2. Task Shader Output</a></li>
<li><a href="chap26.html#mesh-generation">25.3. Mesh Generation</a></li>
<li><a href="chap26.html#mesh-input">25.4. Mesh Shader Input</a></li>
<li><a href="chap26.html#mesh-output">25.5. Mesh Shader Output Primitives</a></li>
<li><a href="chap26.html#mesh-output-perview">25.6. Mesh Shader Per-View Outputs</a></li>
<li><a href="chap26.html#mesh-ordering">25.7. Mesh Shader Primitive Ordering</a></li>
</ul>
</li>
<li><a href="chap27.html#vertexpostproc">26. Fixed-Function Vertex Post-Processing</a>
<ul class="sectlevel2">
<li><a href="chap27.html#vertexpostproc-transform-feedback">26.1. Transform Feedback</a></li>
<li><a href="chap27.html#vertexpostproc-viewport-swizzle">26.2. Viewport Swizzle</a></li>
<li><a href="chap27.html#vertexpostproc-flatshading">26.3. Flat Shading</a></li>
<li><a href="chap27.html#vertexpostproc-clipping">26.4. Primitive Clipping</a></li>
<li><a href="chap27.html#vertexpostproc-clipping-shader-outputs">26.5. Clipping Shader Outputs</a></li>
<li><a href="chap27.html#vertexpostproc-viewportwscaling">26.6. Controlling Viewport W Scaling</a></li>
<li><a href="chap27.html#vertexpostproc-coord-transform">26.7. Coordinate Transformations</a></li>
<li><a href="chap27.html#vertexpostproc-renderpass-transform">26.8. Render Pass Transform</a></li>
<li><a href="chap27.html#vertexpostproc-viewport">26.9. Controlling the Viewport</a></li>
</ul>
</li>
<li><a href="chap28.html#primsrast">27. Rasterization</a>
<ul class="sectlevel2">
<li><a href="chap28.html#primsrast-discard">27.1. Discarding Primitives Before Rasterization</a></li>
<li><a href="chap28.html#primsrast-stream">27.2. Controlling the Vertex Stream Used for Rasterization</a></li>
<li><a href="chap28.html#primrast-order">27.3. Rasterization Order</a></li>
<li><a href="chap28.html#primsrast-multisampling">27.4. Multisampling</a></li>
<li><a href="chap28.html#primrast-samplelocations">27.5. Custom Sample Locations</a></li>
<li><a href="chap28.html#primsrast-fragment-shading-rate">27.6. Fragment Shading Rates</a></li>
<li><a href="chap28.html#primsrast-shading-rate-image">27.7. Shading Rate Image</a></li>
<li><a href="chap28.html#primsrast-sampleshading">27.8. Sample Shading</a></li>
<li><a href="chap28.html#primsrast-barycentric">27.9. Barycentric Interpolation</a></li>
<li><a href="chap28.html#primsrast-points">27.10. Points</a></li>
<li><a href="chap28.html#primsrast-lines">27.11. Line Segments</a></li>
<li><a href="chap28.html#primsrast-polygons">27.12. Polygons</a></li>
</ul>
</li>
<li><a href="chap29.html#fragops">28. Fragment Operations</a>
<ul class="sectlevel2">
<li><a href="chap29.html#fragops-discard-rectangles">28.1. Discard Rectangles Test</a></li>
<li><a href="chap29.html#fragops-scissor">28.2. Scissor Test</a></li>
<li><a href="chap29.html#fragops-exclusive-scissor">28.3. Exclusive Scissor Test</a></li>
<li><a href="chap29.html#fragops-samplemask">28.4. Sample Mask Test</a></li>
<li><a href="chap29.html#fragops-covg">28.5. Multisample Coverage</a></li>
<li><a href="chap29.html#fragops-ds-state">28.6. Depth and Stencil Operations</a></li>
<li><a href="chap29.html#fragops-dbt">28.7. Depth Bounds Test</a></li>
<li><a href="chap29.html#fragops-stencil">28.8. Stencil Test</a></li>
<li><a href="chap29.html#fragops-depth">28.9. Depth Test</a></li>
<li><a href="chap29.html#fragops-rep-frag-test">28.10. Representative Fragment Test</a></li>
<li><a href="chap29.html#fragops-samplecount">28.11. Sample Counting</a></li>
<li><a href="chap29.html#fragops-coverage-to-color">28.12. Fragment Coverage To Color</a></li>
<li><a href="chap29.html#fragops-coverage-reduction">28.13. Coverage Reduction</a></li>
</ul>
</li>
<li><a href="chap30.html#framebuffer">29. The Framebuffer</a>
<ul class="sectlevel2">
<li><a href="chap30.html#framebuffer-blending">29.1. Blending</a></li>
<li><a href="chap30.html#framebuffer-logicop">29.2. Logical Operations</a></li>
<li><a href="chap30.html#framebuffer-color-write-mask">29.3. Color Write Mask</a></li>
</ul>
</li>
<li><a href="chap31.html#dispatch">30. Dispatching Commands</a></li>
<li><a href="chap32.html#device-generated-commands">31. Device-Generated Commands</a>
<ul class="sectlevel2">
<li><a href="chap32.html#indirectmdslayout">31.1. Indirect Commands Layout</a></li>
<li><a href="chap32.html#_indirect_commands_generation_and_execution">31.2. Indirect Commands Generation And Execution</a></li>
</ul>
</li>
<li><a href="chap33.html#sparsememory">32. Sparse Resources</a>
<ul class="sectlevel2">
<li><a href="chap33.html#sparsememory-sparseresourcefeatures">32.1. Sparse Resource Features</a></li>
<li><a href="chap33.html#sparsememory-fully-resident">32.2. Sparse Buffers and Fully-Resident Images</a></li>
<li><a href="chap33.html#sparsememory-partially-resident-buffers">32.3. Sparse Partially-Resident Buffers</a></li>
<li><a href="chap33.html#sparsememory-partially-resident-images">32.4. Sparse Partially-Resident Images</a></li>
<li><a href="chap33.html#sparsememory-sparse-memory-aliasing">32.5. Sparse Memory Aliasing</a></li>
<li><a href="chap33.html#_sparse_resource_implementation_guidelines_informative">32.6. Sparse Resource Implementation Guidelines (Informative)</a></li>
<li><a href="chap33.html#sparsememory-resourceapi">32.7. Sparse Resource API</a></li>
</ul>
</li>
<li><a href="chap34.html#wsi">33. Window System Integration (WSI)</a>
<ul class="sectlevel2">
<li><a href="chap34.html#_wsi_platform">33.1. WSI Platform</a></li>
<li><a href="chap34.html#_wsi_surface">33.2. WSI Surface</a></li>
<li><a href="chap34.html#display">33.3. Presenting Directly to Display Devices</a></li>
<li><a href="chap34.html#_querying_for_wsi_support">33.4. Querying for WSI Support</a></li>
<li><a href="chap34.html#_surface_queries">33.5. Surface Queries</a></li>
<li><a href="chap34.html#_full_screen_exclusive_control">33.6. Full Screen Exclusive Control</a></li>
<li><a href="chap34.html#_device_group_queries">33.7. Device Group Queries</a></li>
<li><a href="chap34.html#_display_timing_queries">33.8. Display Timing Queries</a></li>
<li><a href="chap34.html#_wsi_swapchain">33.9. WSI Swapchain</a></li>
<li><a href="chap34.html#_hdr_metadata">33.10. Hdr Metadata</a></li>
</ul>
</li>
<li><a href="chap35.html#deferred-host-operations">34. Deferred Host Operations</a>
<ul class="sectlevel2">
<li><a href="chap35.html#deferred-host-operations-requesting">34.1. Requesting Deferral</a></li>
<li><a href="chap35.html#_deferred_host_operations_api">34.2. Deferred Host Operations API</a></li>
</ul>
</li>
<li><a href="chap36.html#private-data">35. Private Data</a></li>
<li><a href="chap37.html#acceleration-structure">36. Acceleration Structures</a>
<ul class="sectlevel2">
<li><a href="chap37.html#acceleration-structure-def">36.1. Acceleration Structures</a></li>
<li><a href="chap37.html#host-acceleration-structure">36.2. Host Acceleration Structure Operations</a></li>
</ul>
</li>
<li><a href="chap38.html#ray-traversal">37. Ray Traversal</a>
<ul class="sectlevel2">
<li><a href="chap38.html#ray-intersection-candidate-determination">37.1. Ray Intersection Candidate Determination</a></li>
<li><a href="chap38.html#ray-intersection-culling">37.2. Ray Intersection Culling</a></li>
<li><a href="chap38.html#ray-intersection-confirmation">37.3. Ray Intersection Confirmation</a></li>
<li><a href="chap38.html#ray-closest-hit-determination">37.4. Ray Closest Hit Determination</a></li>
<li><a href="chap38.html#ray-result-determination">37.5. Ray Result Determination</a></li>
</ul>
</li>
<li><a href="chap39.html#ray-tracing">38. Ray Tracing</a>
<ul class="sectlevel2">
<li><a href="chap39.html#ray-tracing-shader-call">38.1. Shader Call Instructions</a></li>
<li><a href="chap39.html#ray-tracing-commands">38.2. Ray Tracing Commands</a></li>
<li><a href="chap39.html#shader-binding-table">38.3. Shader Binding Table</a></li>
<li><a href="chap39.html#ray-tracing-pipeline-stack">38.4. Ray Tracing Pipeline Stack</a></li>
</ul>
</li>
<li><a href="chap40.html#extendingvulkan">39. Extending Vulkan</a>
<ul class="sectlevel2">
<li><a href="chap40.html#extendingvulkan-instanceanddevicefunctionality">39.1. Instance and Device Functionality</a></li>
<li><a href="chap40.html#extendingvulkan-coreversions">39.2. Core Versions</a></li>
<li><a href="chap40.html#extendingvulkan-layers">39.3. Layers</a></li>
<li><a href="chap40.html#extendingvulkan-extensions">39.4. Extensions</a></li>
<li><a href="chap40.html#extendingvulkan-extensions-extensiondependencies">39.5. Extension Dependencies</a></li>
<li><a href="chap40.html#_compatibility_guarantees_informative">39.6. Compatibility Guarantees (Informative)</a></li>
</ul>
</li>
<li><a href="chap41.html#features">40. Features</a>
<ul class="sectlevel2">
<li><a href="chap41.html#features-requirements">40.1. Feature Requirements</a></li>
</ul>
</li>
<li><a href="chap42.html#limits">41. Limits</a>
<ul class="sectlevel2">
<li><a href="chap42.html#limits-minmax">41.1. Limit Requirements</a></li>
<li><a href="chap42.html#limits-multisample">41.2. Additional Multisampling Capabilities</a></li>
</ul>
</li>
<li><a href="chap43.html#formats">42. Formats</a>
<ul class="sectlevel2">
<li><a href="chap43.html#formats-definition">42.1. Format Definition</a></li>
<li><a href="chap43.html#formats-properties">42.2. Format Properties</a></li>
<li><a href="chap43.html#features-required-format-support">42.3. Required Format Support</a></li>
</ul>
</li>
<li><a href="chap44.html#capabilities">43. Additional Capabilities</a>
<ul class="sectlevel2">
<li><a href="chap44.html#capabilities-image">43.1. Additional Image Capabilities</a></li>
<li><a href="chap44.html#capabilities-buffer">43.2. Additional Buffer Capabilities</a></li>
<li><a href="chap44.html#capabilities-semaphore">43.3. Optional Semaphore Capabilities</a></li>
<li><a href="chap44.html#capabilities-fence">43.4. Optional Fence Capabilities</a></li>
<li><a href="chap44.html#features-timestamp-calibration">43.5. Timestamp Calibration Capabilities</a></li>
</ul>
</li>
<li><a href="chap45.html#_debugging">44. Debugging</a>
<ul class="sectlevel2">
<li><a href="chap45.html#debugging-debug-utils">44.1. Debug Utilities</a></li>
<li><a href="chap45.html#debugging-debug-markers">44.2. Debug Markers</a></li>
<li><a href="chap45.html#debugging-debug-report-callbacks">44.3. Debug Report Callbacks</a></li>
<li><a href="chap45.html#_device_loss_debugging">44.4. Device Loss Debugging</a></li>
<li><a href="chap45.html#debugging-tooling-info">44.5. Active Tooling Information</a></li>
</ul>
</li>
<li><a href="chap46.html#spirvenv">Appendix A: Vulkan Environment for SPIR-V</a>
<ul class="sectlevel2">
<li><a href="chap46.html#_versions_and_formats">Versions and Formats</a></li>
<li><a href="chap46.html#spirvenv-capabilities">Capabilities</a></li>
<li><a href="chap46.html#spirvenv-module-validation">Validation Rules within a Module</a></li>
<li><a href="chap46.html#spirvenv-precision-operation">Precision and Operation of SPIR-V Instructions</a></li>
<li><a href="chap46.html#spirvenv-format-type-matching">Image Format and Type Matching</a></li>
<li><a href="chap46.html#spirvenv-image-formats">Compatibility Between SPIR-V Image Formats And Vulkan Formats</a></li>
</ul>
</li>
<li><a href="chap47.html#memory-model">Appendix B: Memory Model</a>
<ul class="sectlevel2">
<li><a href="chap47.html#memory-model-agent">Agent</a></li>
<li><a href="chap47.html#memory-model-memory-location">Memory Location</a></li>
<li><a href="chap47.html#memory-model-allocation">Allocation</a></li>
<li><a href="chap47.html#memory-model-memory-operation">Memory Operation</a></li>
<li><a href="chap47.html#memory-model-references">Reference</a></li>
<li><a href="chap47.html#memory-model-program-order">Program-Order</a></li>
<li><a href="chap47.html#shader-call-related">Shader Call Related</a></li>
<li><a href="chap47.html#shader-call-order">Shader Call Order</a></li>
<li><a href="chap47.html#memory-model-scope">Scope</a></li>
<li><a href="chap47.html#memory-model-atomic-operation">Atomic Operation</a></li>
<li><a href="chap47.html#memory-model-scoped-modification-order">Scoped Modification Order</a></li>
<li><a href="chap47.html#memory-model-memory-semantics">Memory Semantics</a></li>
<li><a href="chap47.html#memory-model-release-sequence">Release Sequence</a></li>
<li><a href="chap47.html#memory-model-synchronizes-with">Synchronizes-With</a></li>
<li><a href="chap47.html#memory-model-system-synchronizes-with">System-Synchronizes-With</a></li>
<li><a href="chap47.html#memory-model-non-private">Private vs. Non-Private</a></li>
<li><a href="chap47.html#memory-model-inter-thread-happens-before">Inter-Thread-Happens-Before</a></li>
<li><a href="chap47.html#memory-model-happens-before">Happens-Before</a></li>
<li><a href="chap47.html#memory-model-availability-visibility">Availability and Visibility</a></li>
<li><a href="chap47.html#memory-model-vulkan-availability-visibility">Availability, Visibility, and Domain Operations</a></li>
<li><a href="chap47.html#memory-model-availability-visibility-semantics">Availability and Visibility Semantics</a></li>
<li><a href="chap47.html#memory-model-instruction-av-vis">Per-Instruction Availability and Visibility Semantics</a></li>
<li><a href="chap47.html#memory-model-location-ordered">Location-Ordered</a></li>
<li><a href="chap47.html#memory-model-access-data-race">Data Race</a></li>
<li><a href="chap47.html#memory-model-visible-to">Visible-To</a></li>
<li><a href="chap47.html#memory-model-acyclicity">Acyclicity</a></li>
<li><a href="chap47.html#memory-model-shader-io">Shader I/O</a></li>
<li><a href="chap47.html#memory-model-deallocation">Deallocation</a></li>
<li><a href="chap47.html#memory-model-informative-descriptions">Descriptions (Informative)</a></li>
<li><a href="chap47.html#memory-model-tessellation-output-ordering">Tessellation Output Ordering</a></li>
<li><a href="chap47.html#memory-model-cooperative-matrix">Cooperative Matrix Memory Access</a></li>
</ul>
</li>
<li><a href="chap48.html#_compressed_image_formats">Appendix C: Compressed Image Formats</a>
<ul class="sectlevel2">
<li><a href="chap48.html#appendix-compressedtex-bc">Block-Compressed Image Formats</a></li>
<li><a href="chap48.html#appendix-compressedtex-etc2">ETC Compressed Image Formats</a></li>
<li><a href="chap48.html#appendix-compressedtex-astc">ASTC Compressed Image Formats</a></li>
<li><a href="chap48.html#appendix-compressedtex-pvrtc">PVRTC Compressed Image Formats</a></li>
</ul>
</li>
<li><a href="chap49.html#versions">Appendix D: Core Revisions (Informative)</a></li>
<li><a href="chap50.html#extensions">Appendix E: Layers &amp; Extensions (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap50.html#extension-appendices-list">List of Current Extensions</a></li>
<li><a href="chap50.html#provisional-extension-appendices-list">List of Provisional Extensions</a></li>
<li><a href="chap50.html#deprecated-extension-appendices-list">List of Deprecated Extensions</a></li>
</ul>
</li>
<li><a href="chap51.html#boilerplate">Appendix F: API Boilerplate</a>
<ul class="sectlevel2">
<li><a href="chap51.html#boilerplate-headers">Vulkan Header Files</a></li>
<li><a href="chap51.html#boilerplate-wsi-header">Window System-Specific Header Control (Informative)</a></li>
<li><a href="chap51.html#boilerplate-provisional-header">Provisional Extension Header Control (Informative)</a></li>
</ul>
</li>
<li><a href="chap52.html#invariance">Appendix G: Invariance</a>
<ul class="sectlevel2">
<li><a href="chap52.html#_repeatability">Repeatability</a></li>
<li><a href="chap52.html#_multi_pass_algorithms">Multi-pass Algorithms</a></li>
<li><a href="chap52.html#_invariance_rules">Invariance Rules</a></li>
<li><a href="chap52.html#_tessellation_invariance">Tessellation Invariance</a></li>
</ul>
</li>
<li><a href="chap53.html#lexicon">Appendix H: Lexicon</a>
<ul class="sectlevel2">
<li><a href="chap53.html#glossary">Glossary</a></li>
<li><a href="chap53.html#lexicon-common-abbreviations">Common Abbreviations</a></li>
<li><a href="chap53.html#lexicon-prefixes">Prefixes</a></li>
</ul>
</li>
<li><a href="chap54.html#credits">Appendix I: Credits (Informative)</a>
<ul class="sectlevel2">
<li><a href="chap54.html#_working_group_contributors_to_vulkan">Working Group Contributors to Vulkan</a></li>
<li><a href="chap54.html#_other_credits">Other Credits</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="loading_msg" class="hidden" hidden=""><p>Loading please wait.</p></div>
<!--ChunkedSearchboxMarker-->
<div class="searchbox"><label for="searchbox">Search: </label><input id="searchbox" type="text" disabled="disabled" value="Loading Search Data"><div id="resultsdiv"><ol id="results"></ol></div></div>
<div id="content"><div class="sect1">
<h2 id="renderpass"><a class="anchor" href="#renderpass"></a>8. Render Pass</h2>
<div class="sectionbody">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>A <em>render pass</em> represents a collection of attachments, subpasses, and
dependencies between the subpasses, and describes how the attachments are
used over the course of the subpasses.
The use of a render pass in a command buffer is a <em>render pass instance</em>.</p>
</div>
<div class="paragraph">
<p>Render passes are represented by <code>VkRenderPass</code> handles:</p>
</div>
<div id="VkRenderPass" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
VK_DEFINE_NON_DISPATCHABLE_HANDLE(VkRenderPass)</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>An <em>attachment description</em> describes the properties of an attachment
including its format, sample count, and how its contents are treated at the
beginning and end of each render pass instance.</p>
</div>
<div id="renderpass-subpass" class="paragraph">
<p>A <em>subpass</em> represents a phase of rendering that reads and writes a subset
of the attachments in a render pass.
Rendering commands are recorded into a particular subpass of a render pass
instance.</p>
</div>
<div class="paragraph">
<p>A <em>subpass description</em> describes the subset of attachments that is involved
in the execution of a subpass.
Each subpass <strong class="purple">can</strong> read from some attachments as <em>input attachments</em>, write
to some as <em>color attachments</em> or <em>depth/stencil attachments</em>,
perform <em>shader resolve operations</em> to <em>color_attachments</em> or
<em>depth/stencil_attachments</em>,
and perform <em>multisample resolve operations</em> to <em>resolve attachments</em>.
A subpass description <strong class="purple">can</strong> also include a set of <em>preserve attachments</em>,
which are attachments that are not read or written by the subpass but whose
contents <strong class="purple">must</strong> be preserved throughout the subpass.</p>
</div>
<div class="paragraph">
<p>A subpass <em>uses an attachment</em> if the attachment is a color, depth/stencil,
resolve,
depth/stencil resolve,
fragment shading rate,
or input attachment for that subpass (as determined by the
<code>pColorAttachments</code>, <code>pDepthStencilAttachment</code>,
<code>pResolveAttachments</code>,
<a href="#VkSubpassDescriptionDepthStencilResolve">VkSubpassDescriptionDepthStencilResolve</a>::<code>pDepthStencilResolveAttachment</code>,
<a href="#VkFragmentShadingRateAttachmentInfoKHR">VkFragmentShadingRateAttachmentInfoKHR</a>,
and <code>pInputAttachments</code> members of <a href="#VkSubpassDescription">VkSubpassDescription</a>,
respectively).
A subpass does not use an attachment if that attachment is preserved by the
subpass.
The <em>first use of an attachment</em> is in the lowest numbered subpass that uses
that attachment.
Similarly, the <em>last use of an attachment</em> is in the highest numbered
subpass that uses that attachment.</p>
</div>
<div class="paragraph">
<p>The subpasses in a render pass all render to the same dimensions, and
fragments for pixel (x,y,layer) in one subpass <strong class="purple">can</strong> only read attachment
contents written by previous subpasses at that same (x,y,layer) location.
For multi-pixel fragments, the pixel read from an input attachment is
selected from the pixels covered by that fragment in an implementation-
dependent manner.
However, this selection <strong class="purple">must</strong> be made consistently for any fragment with the
same shading rate
and render pass transform
for the lifetime of the <a href="chap6.html#VkDevice">VkDevice</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>By describing a complete set of subpasses in advance, render passes provide
the implementation an opportunity to optimize the storage and transfer of
attachment data between subpasses.</p>
</div>
<div class="paragraph">
<p>In practice, this means that subpasses with a simple framebuffer-space
dependency <strong class="purple">may</strong> be merged into a single tiled rendering pass, keeping the
attachment data on-chip for the duration of a render pass instance.
However, it is also quite common for a render pass to only contain a single
subpass.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><em>Subpass dependencies</em> describe <a href="chap8.html#synchronization-dependencies">execution
and memory dependencies</a> between subpasses.</p>
</div>
<div class="paragraph">
<p>A <em>subpass dependency chain</em> is a sequence of subpass dependencies in a
render pass, where the source subpass of each subpass dependency (after the
first) equals the destination subpass of the previous dependency.</p>
</div>
<div class="paragraph">
<p>Execution of subpasses <strong class="purple">may</strong> overlap or execute out of order with regards to
other subpasses, unless otherwise enforced by an execution dependency.
Each subpass only respects <a href="chap8.html#synchronization-submission-order">submission
order</a> for commands recorded in the same subpass, and the
<a href="#vkCmdBeginRenderPass">vkCmdBeginRenderPass</a> and <a href="#vkCmdEndRenderPass">vkCmdEndRenderPass</a> commands that
delimit the render pass - commands within other subpasses are not included.
This affects most other <a href="chap8.html#synchronization-implicit">implicit ordering
guarantees</a>.</p>
</div>
<div class="paragraph">
<p>A render pass describes the structure of subpasses and attachments
independent of any specific image views for the attachments.
The specific image views that will be used for the attachments, and their
dimensions, are specified in <code>VkFramebuffer</code> objects.
Framebuffers are created with respect to a specific render pass that the
framebuffer is compatible with (see <a href="#renderpass-compatibility">Render Pass
Compatibility</a>).
Collectively, a render pass and a framebuffer define the complete render
target state for one or more subpasses as well as the algorithmic
dependencies between the subpasses.</p>
</div>
<div class="paragraph">
<p>The various pipeline stages of the drawing commands for a given subpass <strong class="purple">may</strong>
execute concurrently and/or out of order, both within and across drawing
commands, whilst still respecting <a href="chap8.html#synchronization-pipeline-stages-order">pipeline order</a>.
However for a given (x,y,layer,sample) sample location, certain per-sample
operations are performed in <a href="chap28.html#primrast-order">rasterization order</a>.</p>
</div>
<div class="sect2">
<h3 id="renderpass-creation"><a class="anchor" href="#renderpass-creation"></a>8.1. Render Pass Creation</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create a render pass, call:</p>
</div>
<div id="vkCreateRenderPass" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
VkResult vkCreateRenderPass(
    VkDevice                                    device,
    <span class="directive">const</span> VkRenderPassCreateInfo*               pCreateInfo,
    <span class="directive">const</span> VkAllocationCallbacks*                pAllocator,
    VkRenderPass*                               pRenderPass);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the render pass.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="#VkRenderPassCreateInfo">VkRenderPassCreateInfo</a>
structure describing the parameters of the render pass.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap12.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pRenderPass</code> is a pointer to a <a href="#VkRenderPass">VkRenderPass</a> handle in which
the resulting render pass object is returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateRenderPass-device-parameter" href="#VUID-vkCreateRenderPass-device-parameter"></a> <span class="vuid">VUID-vkCreateRenderPass-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateRenderPass-pCreateInfo-parameter" href="#VUID-vkCreateRenderPass-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateRenderPass-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkRenderPassCreateInfo">VkRenderPassCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateRenderPass-pAllocator-parameter" href="#VUID-vkCreateRenderPass-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateRenderPass-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateRenderPass-pRenderPass-parameter" href="#VUID-vkCreateRenderPass-pRenderPass-parameter"></a> <span class="vuid">VUID-vkCreateRenderPass-pRenderPass-parameter</span><br>
 <code>pRenderPass</code> <strong class="purple">must</strong> be a valid pointer to a <a href="#VkRenderPass">VkRenderPass</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap4.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap4.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkRenderPassCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkRenderPassCreateInfo" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkRenderPassCreateInfo {
    VkStructureType                   sType;
    <span class="directive">const</span> <span class="directive">void</span>*                       pNext;
    VkRenderPassCreateFlags           flags;
    uint32_t                          attachmentCount;
    <span class="directive">const</span> VkAttachmentDescription*    pAttachments;
    uint32_t                          subpassCount;
    <span class="directive">const</span> VkSubpassDescription*       pSubpasses;
    uint32_t                          dependencyCount;
    <span class="directive">const</span> VkSubpassDependency*        pDependencies;
} VkRenderPassCreateInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="#VkRenderPassCreateFlagBits">VkRenderPassCreateFlagBits</a></p>
</li>
<li>
<p><code>attachmentCount</code> is the number of attachments used by this render
pass.</p>
</li>
<li>
<p><code>pAttachments</code> is a pointer to an array of <code>attachmentCount</code>
<a href="#VkAttachmentDescription">VkAttachmentDescription</a> structures describing the attachments used
by the render pass.</p>
</li>
<li>
<p><code>subpassCount</code> is the number of subpasses to create.</p>
</li>
<li>
<p><code>pSubpasses</code> is a pointer to an array of <code>subpassCount</code>
<a href="#VkSubpassDescription">VkSubpassDescription</a> structures describing each subpass.</p>
</li>
<li>
<p><code>dependencyCount</code> is the number of memory dependencies between pairs
of subpasses.</p>
</li>
<li>
<p><code>pDependencies</code> is a pointer to an array of <code>dependencyCount</code>
<a href="#VkSubpassDependency">VkSubpassDependency</a> structures describing dependencies between
pairs of subpasses.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Care should be taken to avoid a data race here; if any subpasses access
attachments with overlapping memory locations, and one of those accesses is
a write, a subpass dependency needs to be included between them.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-attachment-00834" href="#VUID-VkRenderPassCreateInfo-attachment-00834"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-attachment-00834</span><br>

If the <code>attachment</code> member of any element of
<code>pInputAttachments</code>, <code>pColorAttachments</code>,
<code>pResolveAttachments</code> or <code>pDepthStencilAttachment</code>, or any
element of <code>pPreserveAttachments</code> in any element of <code>pSubpasses</code>
is not <code>VK_ATTACHMENT_UNUSED</code>, it <strong class="purple">must</strong> be less than
<code>attachmentCount</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-pAttachments-00836" href="#VUID-VkRenderPassCreateInfo-pAttachments-00836"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-pAttachments-00836</span><br>

For any member of <code>pAttachments</code> with a <code>loadOp</code> equal to
<code>VK_ATTACHMENT_LOAD_OP_CLEAR</code>, the first use of that attachment
<strong class="purple">must</strong> not specify a <code>layout</code> equal to
<code>VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-pAttachments-02511" href="#VUID-VkRenderPassCreateInfo-pAttachments-02511"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-pAttachments-02511</span><br>

For any member of <code>pAttachments</code> with a <code>stencilLoadOp</code> equal to
<code>VK_ATTACHMENT_LOAD_OP_CLEAR</code>, the first use of that attachment
<strong class="purple">must</strong> not specify a <code>layout</code> equal to
<code>VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-pAttachments-01566" href="#VUID-VkRenderPassCreateInfo-pAttachments-01566"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-pAttachments-01566</span><br>

For any member of <code>pAttachments</code> with a <code>loadOp</code> equal to
<code>VK_ATTACHMENT_LOAD_OP_CLEAR</code>, the first use of that attachment
<strong class="purple">must</strong> not specify a <code>layout</code> equal to
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-pAttachments-01567" href="#VUID-VkRenderPassCreateInfo-pAttachments-01567"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-pAttachments-01567</span><br>

For any member of <code>pAttachments</code> with a <code>stencilLoadOp</code> equal to
<code>VK_ATTACHMENT_LOAD_OP_CLEAR</code>, the first use of that attachment
<strong class="purple">must</strong> not specify a <code>layout</code> equal to
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-pNext-01926" href="#VUID-VkRenderPassCreateInfo-pNext-01926"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-pNext-01926</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkRenderPassInputAttachmentAspectCreateInfo">VkRenderPassInputAttachmentAspectCreateInfo</a> structure, the
<code>subpass</code> member of each element of its <code>pAspectReferences</code>
member <strong class="purple">must</strong> be less than <code>subpassCount</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-pNext-01927" href="#VUID-VkRenderPassCreateInfo-pNext-01927"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-pNext-01927</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkRenderPassInputAttachmentAspectCreateInfo">VkRenderPassInputAttachmentAspectCreateInfo</a> structure, the
<code>inputAttachmentIndex</code> member of each element of its
<code>pAspectReferences</code> member <strong class="purple">must</strong> be less than the value of
<code>inputAttachmentCount</code> in the member of <code>pSubpasses</code> identified
by its <code>subpass</code> member</p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-pNext-01963" href="#VUID-VkRenderPassCreateInfo-pNext-01963"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-pNext-01963</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkRenderPassInputAttachmentAspectCreateInfo">VkRenderPassInputAttachmentAspectCreateInfo</a> structure, for any
element of the <code>pInputAttachments</code> member of any element of
<code>pSubpasses</code> where the <code>attachment</code> member is not
<code>VK_ATTACHMENT_UNUSED</code>, the <code>aspectMask</code> member of the
corresponding element of
<a href="#VkRenderPassInputAttachmentAspectCreateInfo">VkRenderPassInputAttachmentAspectCreateInfo</a>::<code>pAspectReferences</code>
<strong class="purple">must</strong> only include aspects that are present in images of the format
specified by the element of <code>pAttachments</code> at <code>attachment</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-pNext-01928" href="#VUID-VkRenderPassCreateInfo-pNext-01928"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-pNext-01928</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkRenderPassMultiviewCreateInfo">VkRenderPassMultiviewCreateInfo</a> structure, and its
<code>subpassCount</code> member is not zero, that member <strong class="purple">must</strong> be equal to the
value of <code>subpassCount</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-pNext-01929" href="#VUID-VkRenderPassCreateInfo-pNext-01929"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-pNext-01929</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkRenderPassMultiviewCreateInfo">VkRenderPassMultiviewCreateInfo</a> structure, if its
<code>dependencyCount</code> member is not zero, it <strong class="purple">must</strong> be equal to
<code>dependencyCount</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-pNext-01930" href="#VUID-VkRenderPassCreateInfo-pNext-01930"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-pNext-01930</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkRenderPassMultiviewCreateInfo">VkRenderPassMultiviewCreateInfo</a> structure, for each non-zero
element of <code>pViewOffsets</code>, the <code>srcSubpass</code> and <code>dstSubpass</code>
members of <code>pDependencies</code> at the same index <strong class="purple">must</strong> not be equal</p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-pNext-02512" href="#VUID-VkRenderPassCreateInfo-pNext-02512"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-pNext-02512</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkRenderPassMultiviewCreateInfo">VkRenderPassMultiviewCreateInfo</a> structure, for any element of
<code>pDependencies</code> with a <code>dependencyFlags</code> member that does not
include <code>VK_DEPENDENCY_VIEW_LOCAL_BIT</code>, the corresponding element of
the <code>pViewOffsets</code> member of that
<a href="#VkRenderPassMultiviewCreateInfo">VkRenderPassMultiviewCreateInfo</a> instance <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-pNext-02513" href="#VUID-VkRenderPassCreateInfo-pNext-02513"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-pNext-02513</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkRenderPassMultiviewCreateInfo">VkRenderPassMultiviewCreateInfo</a> structure, elements of its
<code>pViewMasks</code> member <strong class="purple">must</strong> either all be <code>0</code>, or all not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-pNext-02514" href="#VUID-VkRenderPassCreateInfo-pNext-02514"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-pNext-02514</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkRenderPassMultiviewCreateInfo">VkRenderPassMultiviewCreateInfo</a> structure, and each element of its
<code>pViewMasks</code> member is <code>0</code>, the <code>dependencyFlags</code> member of each
element of <code>pDependencies</code> <strong class="purple">must</strong> not include
<code>VK_DEPENDENCY_VIEW_LOCAL_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-pNext-02515" href="#VUID-VkRenderPassCreateInfo-pNext-02515"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-pNext-02515</span><br>

If the <code>pNext</code> chain includes a
<a href="#VkRenderPassMultiviewCreateInfo">VkRenderPassMultiviewCreateInfo</a> structure, and each element of its
<code>pViewMasks</code> member is <code>0</code>, <code>correlatedViewMaskCount</code> <strong class="purple">must</strong> be
<code>0</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-pDependencies-00837" href="#VUID-VkRenderPassCreateInfo-pDependencies-00837"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-pDependencies-00837</span><br>

For any element of <code>pDependencies</code>, if the <code>srcSubpass</code> is not
<code>VK_SUBPASS_EXTERNAL</code>, all stage flags included in the
<code>srcStageMask</code> member of that dependency <strong class="purple">must</strong> be a pipeline stage
supported by the <a href="chap8.html#synchronization-pipeline-stages-types">pipeline</a>
identified by the <code>pipelineBindPoint</code> member of the source subpass</p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-pDependencies-00838" href="#VUID-VkRenderPassCreateInfo-pDependencies-00838"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-pDependencies-00838</span><br>

For any element of <code>pDependencies</code>, if the <code>dstSubpass</code> is not
<code>VK_SUBPASS_EXTERNAL</code>, all stage flags included in the
<code>dstStageMask</code> member of that dependency <strong class="purple">must</strong> be a pipeline stage
supported by the <a href="chap8.html#synchronization-pipeline-stages-types">pipeline</a>
identified by the <code>pipelineBindPoint</code> member of the destination
subpass</p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-srcSubpass-02517" href="#VUID-VkRenderPassCreateInfo-srcSubpass-02517"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-srcSubpass-02517</span><br>

The <code>srcSubpass</code> member of each element of <code>pDependencies</code> <strong class="purple">must</strong>
be less than <code>subpassCount</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-dstSubpass-02518" href="#VUID-VkRenderPassCreateInfo-dstSubpass-02518"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-dstSubpass-02518</span><br>

The <code>dstSubpass</code> member of each element of <code>pDependencies</code> <strong class="purple">must</strong>
be less than <code>subpassCount</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-sType-sType" href="#VUID-VkRenderPassCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_RENDER_PASS_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-pNext-pNext" href="#VUID-VkRenderPassCreateInfo-pNext-pNext"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="#VkRenderPassFragmentDensityMapCreateInfoEXT">VkRenderPassFragmentDensityMapCreateInfoEXT</a>, <a href="#VkRenderPassInputAttachmentAspectCreateInfo">VkRenderPassInputAttachmentAspectCreateInfo</a>, or <a href="#VkRenderPassMultiviewCreateInfo">VkRenderPassMultiviewCreateInfo</a></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-sType-unique" href="#VUID-VkRenderPassCreateInfo-sType-unique"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-flags-parameter" href="#VUID-VkRenderPassCreateInfo-flags-parameter"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="#VkRenderPassCreateFlagBits">VkRenderPassCreateFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-pAttachments-parameter" href="#VUID-VkRenderPassCreateInfo-pAttachments-parameter"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-pAttachments-parameter</span><br>
 If <code>attachmentCount</code> is not <code>0</code>, <code>pAttachments</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>attachmentCount</code> valid <a href="#VkAttachmentDescription">VkAttachmentDescription</a> structures</p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-pSubpasses-parameter" href="#VUID-VkRenderPassCreateInfo-pSubpasses-parameter"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-pSubpasses-parameter</span><br>
 <code>pSubpasses</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>subpassCount</code> valid <a href="#VkSubpassDescription">VkSubpassDescription</a> structures</p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-pDependencies-parameter" href="#VUID-VkRenderPassCreateInfo-pDependencies-parameter"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-pDependencies-parameter</span><br>
 If <code>dependencyCount</code> is not <code>0</code>, <code>pDependencies</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>dependencyCount</code> valid <a href="#VkSubpassDependency">VkSubpassDependency</a> structures</p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo-subpassCount-arraylength" href="#VUID-VkRenderPassCreateInfo-subpassCount-arraylength"></a> <span class="vuid">VUID-VkRenderPassCreateInfo-subpassCount-arraylength</span><br>
 <code>subpassCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in <a href="#VkRenderPassCreateInfo">VkRenderPassCreateInfo</a>::<code>flags</code>
describing additional properties of the render pass are:</p>
</div>
<div id="VkRenderPassCreateFlagBits" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkRenderPassCreateFlagBits {
  <span class="comment">// Provided by VK_QCOM_render_pass_transform</span>
    VK_RENDER_PASS_CREATE_TRANSFORM_BIT_QCOM = <span class="hex">0x00000002</span>,
} VkRenderPassCreateFlagBits;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_RENDER_PASS_CREATE_TRANSFORM_BIT_QCOM</code> specifies that the
created renderpass is compatible with
<a href="chap27.html#vertexpostproc-renderpass-transform">render pass transform</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkRenderPassCreateFlags" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="keyword">typedef</span> VkFlags VkRenderPassCreateFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkRenderPassCreateFlags</code> is a bitmask type for setting a mask of zero
or more <a href="#VkRenderPassCreateFlagBits">VkRenderPassCreateFlagBits</a>.</p>
</div>
</div>
</div>
<div id="renderpass-multiview" class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <a href="#VkRenderPassCreateInfo">VkRenderPassCreateInfo</a>::<code>pNext</code> chain includes a
<code>VkRenderPassMultiviewCreateInfo</code> structure, then that structure
includes an array of view masks, view offsets, and correlation masks for the
render pass.</p>
</div>
<div class="paragraph">
<p>The <code>VkRenderPassMultiviewCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkRenderPassMultiviewCreateInfo" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">struct</span> VkRenderPassMultiviewCreateInfo {
    VkStructureType    sType;
    <span class="directive">const</span> <span class="directive">void</span>*        pNext;
    uint32_t           subpassCount;
    <span class="directive">const</span> uint32_t*    pViewMasks;
    uint32_t           dependencyCount;
    <span class="directive">const</span> int32_t*     pViewOffsets;
    uint32_t           correlationMaskCount;
    <span class="directive">const</span> uint32_t*    pCorrelationMasks;
} VkRenderPassMultiviewCreateInfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkRenderPassMultiviewCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_multiview</span>
<span class="keyword">typedef</span> VkRenderPassMultiviewCreateInfo VkRenderPassMultiviewCreateInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>subpassCount</code> is zero or the number of subpasses in the render
pass.</p>
</li>
<li>
<p><code>pViewMasks</code> is a pointer to an array of <code>subpassCount</code> view
masks, where each mask is a bitfield of view indices describing which
views rendering is broadcast to in each subpass, when multiview is
enabled.
If <code>subpassCount</code> is zero, each view mask is treated as zero.</p>
</li>
<li>
<p><code>dependencyCount</code> is zero or the number of dependencies in the
render pass.</p>
</li>
<li>
<p><code>pViewOffsets</code> is a pointer to an array of <code>dependencyCount</code>
view offsets, one for each dependency.
If <code>dependencyCount</code> is zero, each dependencys view offset is
treated as zero.
Each view offset controls which views in the source subpass the views in
the destination subpass depend on.</p>
</li>
<li>
<p><code>correlationMaskCount</code> is zero or the number of correlation masks.</p>
</li>
<li>
<p><code>pCorrelationMasks</code> is a pointer to an array of
<code>correlationMaskCount</code> view masks indicating sets of views that <strong class="purple">may</strong>
be more efficient to render concurrently.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When a subpass uses a non-zero view mask, <em>multiview</em> functionality is
considered to be enabled.
Multiview is all-or-nothing for a render pass - that is, either all
subpasses <strong class="purple">must</strong> have a non-zero view mask (though some subpasses <strong class="purple">may</strong> have
only one view) or all <strong class="purple">must</strong> be zero.
Multiview causes all drawing and clear commands in the subpass to behave as
if they were broadcast to each view, where a view is represented by one
layer of the framebuffer attachments.
All draws and clears are broadcast to each <em>view index</em> whose bit is set in
the view mask.
The view index is provided in the <code>ViewIndex</code> shader input variable, and
color, depth/stencil, and input attachments all read/write the layer of the
framebuffer corresponding to the view index.</p>
</div>
<div class="paragraph">
<p>If the view mask is zero for all subpasses, multiview is considered to be
disabled and all drawing commands execute normally, without this additional
broadcasting.</p>
</div>
<div class="paragraph">
<p>Some implementations <strong class="purple">may</strong> not support multiview in conjunction with
<a href="chap41.html#features-multiview-gs">geometry shaders</a> or
<a href="chap41.html#features-multiview-tess">tessellation shaders</a>.</p>
</div>
<div id="renderpass-multiview-view-local" class="paragraph">
<p>When multiview is enabled, the <code>VK_DEPENDENCY_VIEW_LOCAL_BIT</code> bit in a
dependency <strong class="purple">can</strong> be used to express a view-local dependency, meaning that
each view in the destination subpass depends on a single view in the source
subpass.
Unlike pipeline barriers, a subpass dependency <strong class="purple">can</strong> potentially have a
different view mask in the source subpass and the destination subpass.
If the dependency is view-local, then each view (<span class="eq">dstView</span>) in the
destination subpass depends on the view <span class="eq">dstView + 
<code>pViewOffsets</code>[dependency]</span> in the source subpass.
If there is not such a view in the source subpass, then this dependency does
not affect that view in the destination subpass.
If the dependency is not view-local, then all views in the destination
subpass depend on all views in the source subpass, and the view offset is
ignored.
A non-zero view offset is not allowed in a self-dependency.</p>
</div>
<div class="paragraph">
<p>The elements of <code>pCorrelationMasks</code> are a set of masks of views
indicating that views in the same mask <strong class="purple">may</strong> exhibit spatial coherency
between the views, making it more efficient to render them concurrently.
Correlation masks <strong class="purple">must</strong> not have a functional effect on the results of the
multiview rendering.</p>
</div>
<div class="paragraph">
<p>When multiview is enabled, at the beginning of each subpass all non-render
pass state is undefined.
In particular, each time <a href="#vkCmdBeginRenderPass">vkCmdBeginRenderPass</a> or
<a href="#vkCmdNextSubpass">vkCmdNextSubpass</a> is called the graphics pipeline <strong class="purple">must</strong> be bound, any
relevant descriptor sets or vertex/index buffers <strong class="purple">must</strong> be bound, and any
relevant dynamic state or push constants <strong class="purple">must</strong> be set before they are used.</p>
</div>
<div class="paragraph">
<p>A multiview subpass <strong class="purple">can</strong> declare that its shaders will write per-view
attributes for all views in a single invocation, by setting the
<code>VK_SUBPASS_DESCRIPTION_PER_VIEW_ATTRIBUTES_BIT_NVX</code> bit in the subpass
description.
The only supported per-view attributes are position and viewport mask, and
per-view position and viewport masks are written to output array variables
decorated with <code>PositionPerViewNV</code> and <code>ViewportMaskPerViewNV</code>,
respectively.
If <code><a href="chap50.html#VK_NV_viewport_array2">VK_NV_viewport_array2</a></code> is not supported and enabled,
<code>ViewportMaskPerViewNV</code> <strong class="purple">must</strong> not be used.
Values written to elements of <code>PositionPerViewNV</code> and
<code>ViewportMaskPerViewNV</code> <strong class="purple">must</strong> not depend on the <code>ViewIndex</code>.
The shader <strong class="purple">must</strong> also write to an output variable decorated with
<code>Position</code>, and the value written to <code>Position</code> <strong class="purple">must</strong> equal the value
written to <code>PositionPerViewNV</code>[<code>ViewIndex</code>].
Similarly, if <code>ViewportMaskPerViewNV</code> is written to then the shader <strong class="purple">must</strong>
also write to an output variable decorated with <code>ViewportMaskNV</code>, and the
value written to <code>ViewportMaskNV</code> <strong class="purple">must</strong> equal the value written to
<code>ViewportMaskPerViewNV</code>[<code>ViewIndex</code>].
Implementations will either use values taken from <code>Position</code> and
<code>ViewportMaskNV</code> and invoke the shader once for each view, or will use
values taken from <code>PositionPerViewNV</code> and <code>ViewportMaskPerViewNV</code> and
invoke the shader fewer times.
The values written to <code>Position</code> and <code>ViewportMaskNV</code> <strong class="purple">must</strong> not depend
on the values written to <code>PositionPerViewNV</code> and
<code>ViewportMaskPerViewNV</code>, or vice versa (to allow compilers to eliminate
the unused outputs).
All attributes that do not have <code>*PerViewNV</code> counterparts <strong class="purple">must</strong> not depend
on <code>ViewIndex</code>.</p>
</div>
<div class="paragraph">
<p>Per-view attributes are all-or-nothing for a subpass.
That is, all pipelines compiled against a subpass that includes the
<code>VK_SUBPASS_DESCRIPTION_PER_VIEW_ATTRIBUTES_BIT_NVX</code> bit <strong class="purple">must</strong> write
per-view attributes to the <code>*PerViewNV[]</code> shader outputs, in addition to the
non-per-view (e.g. <code>Position</code>) outputs.
Pipelines compiled against a subpass that does not include this bit <strong class="purple">must</strong>
not include the <code>*PerViewNV[]</code> outputs in their interfaces.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkRenderPassMultiviewCreateInfo-pCorrelationMasks-00841" href="#VUID-VkRenderPassMultiviewCreateInfo-pCorrelationMasks-00841"></a> <span class="vuid">VUID-VkRenderPassMultiviewCreateInfo-pCorrelationMasks-00841</span><br>

Each view index <strong class="purple">must</strong> not be set in more than one element of
<code>pCorrelationMasks</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkRenderPassMultiviewCreateInfo-sType-sType" href="#VUID-VkRenderPassMultiviewCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkRenderPassMultiviewCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_RENDER_PASS_MULTIVIEW_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassMultiviewCreateInfo-pViewMasks-parameter" href="#VUID-VkRenderPassMultiviewCreateInfo-pViewMasks-parameter"></a> <span class="vuid">VUID-VkRenderPassMultiviewCreateInfo-pViewMasks-parameter</span><br>
 If <code>subpassCount</code> is not <code>0</code>, <code>pViewMasks</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>subpassCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkRenderPassMultiviewCreateInfo-pViewOffsets-parameter" href="#VUID-VkRenderPassMultiviewCreateInfo-pViewOffsets-parameter"></a> <span class="vuid">VUID-VkRenderPassMultiviewCreateInfo-pViewOffsets-parameter</span><br>
 If <code>dependencyCount</code> is not <code>0</code>, <code>pViewOffsets</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>dependencyCount</code> <code>int32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkRenderPassMultiviewCreateInfo-pCorrelationMasks-parameter" href="#VUID-VkRenderPassMultiviewCreateInfo-pCorrelationMasks-parameter"></a> <span class="vuid">VUID-VkRenderPassMultiviewCreateInfo-pCorrelationMasks-parameter</span><br>
 If <code>correlationMaskCount</code> is not <code>0</code>, <code>pCorrelationMasks</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>correlationMaskCount</code> <code>uint32_t</code> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="renderpass-fragmentdensitymapattachment" class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <a href="#VkRenderPassCreateInfo">VkRenderPassCreateInfo</a>::<code>pNext</code> chain includes a
<code>VkRenderPassFragmentDensityMapCreateInfoEXT</code> structure, then that
structure includes a fragment density map attachment for the render pass.</p>
</div>
<div class="paragraph">
<p>The <code>VkRenderPassFragmentDensityMapCreateInfoEXT</code> structure is defined
as:</p>
</div>
<div id="VkRenderPassFragmentDensityMapCreateInfoEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_fragment_density_map</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkRenderPassFragmentDensityMapCreateInfoEXT {
    VkStructureType          sType;
    <span class="directive">const</span> <span class="directive">void</span>*              pNext;
    VkAttachmentReference    fragmentDensityMapAttachment;
} VkRenderPassFragmentDensityMapCreateInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>fragmentDensityMapAttachment</code> is the fragment density map to use
for the render pass.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The fragment density map is read at an implementation-dependent time with
the following constraints determined by the attachments image view
<code>flags</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_IMAGE_VIEW_CREATE_FRAGMENT_DENSITY_MAP_DYNAMIC_BIT_EXT</code>
specifies that the fragment density map will be read by the device
during <code>VK_PIPELINE_STAGE_FRAGMENT_DENSITY_PROCESS_BIT_EXT</code></p>
</li>
<li>
<p><code>VK_IMAGE_VIEW_CREATE_FRAGMENT_DENSITY_MAP_DEFERRED_BIT_EXT</code>
specifies that the fragment density map will be read by the host during
<a href="chap7.html#vkEndCommandBuffer">vkEndCommandBuffer</a> of the primary command buffer that the render
pass is recorded into</p>
</li>
<li>
<p>Otherwise the fragment density map will be read by the host during
<a href="#vkCmdBeginRenderPass">vkCmdBeginRenderPass</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The fragment density map <strong class="purple">may</strong> additionally be read by the device during
<code>VK_PIPELINE_STAGE_FRAGMENT_DENSITY_PROCESS_BIT_EXT</code> for any mode.</p>
</div>
<div class="paragraph">
<p>If this structure is not present, it is as if
<code>fragmentDensityMapAttachment</code> was given as <code>VK_ATTACHMENT_UNUSED</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkRenderPassFragmentDensityMapCreateInfoEXT-fragmentDensityMapAttachment-02547" href="#VUID-VkRenderPassFragmentDensityMapCreateInfoEXT-fragmentDensityMapAttachment-02547"></a> <span class="vuid">VUID-VkRenderPassFragmentDensityMapCreateInfoEXT-fragmentDensityMapAttachment-02547</span><br>

If <code>fragmentDensityMapAttachment</code> is not <code>VK_ATTACHMENT_UNUSED</code>,
<code>fragmentDensityMapAttachment</code> <strong class="purple">must</strong> be less than
<code>VkRenderPassCreateInfo</code>::<code>attachmentCount</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassFragmentDensityMapCreateInfoEXT-fragmentDensityMapAttachment-02548" href="#VUID-VkRenderPassFragmentDensityMapCreateInfoEXT-fragmentDensityMapAttachment-02548"></a> <span class="vuid">VUID-VkRenderPassFragmentDensityMapCreateInfoEXT-fragmentDensityMapAttachment-02548</span><br>

If <code>fragmentDensityMapAttachment</code> is not <code>VK_ATTACHMENT_UNUSED</code>,
<code>fragmentDensityMapAttachment</code> <strong class="purple">must</strong> not be an element of
<code>VkSubpassDescription</code>::<code>pInputAttachments</code>,
<code>VkSubpassDescription</code>::<code>pColorAttachments</code>,
<code>VkSubpassDescription</code>::<code>pResolveAttachments</code>,
<code>VkSubpassDescription</code>::<code>pDepthStencilAttachment</code>, or
<code>VkSubpassDescription</code>::<code>pPreserveAttachments</code> for any subpass</p>
</li>
<li>
<p><a id="VUID-VkRenderPassFragmentDensityMapCreateInfoEXT-fragmentDensityMapAttachment-02549" href="#VUID-VkRenderPassFragmentDensityMapCreateInfoEXT-fragmentDensityMapAttachment-02549"></a> <span class="vuid">VUID-VkRenderPassFragmentDensityMapCreateInfoEXT-fragmentDensityMapAttachment-02549</span><br>

If <code>fragmentDensityMapAttachment</code> is not <code>VK_ATTACHMENT_UNUSED</code>,
<code>layout</code> <strong class="purple">must</strong> be equal to
<code>VK_IMAGE_LAYOUT_FRAGMENT_DENSITY_MAP_OPTIMAL_EXT</code>, or
<code>VK_IMAGE_LAYOUT_GENERAL</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassFragmentDensityMapCreateInfoEXT-fragmentDensityMapAttachment-02550" href="#VUID-VkRenderPassFragmentDensityMapCreateInfoEXT-fragmentDensityMapAttachment-02550"></a> <span class="vuid">VUID-VkRenderPassFragmentDensityMapCreateInfoEXT-fragmentDensityMapAttachment-02550</span><br>

If <code>fragmentDensityMapAttachment</code> is not <code>VK_ATTACHMENT_UNUSED</code>,
<code>fragmentDensityMapAttachment</code> <strong class="purple">must</strong> reference an attachment with a
<code>loadOp</code> equal to <code>VK_ATTACHMENT_LOAD_OP_LOAD</code> or
<code>VK_ATTACHMENT_LOAD_OP_DONT_CARE</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassFragmentDensityMapCreateInfoEXT-fragmentDensityMapAttachment-02551" href="#VUID-VkRenderPassFragmentDensityMapCreateInfoEXT-fragmentDensityMapAttachment-02551"></a> <span class="vuid">VUID-VkRenderPassFragmentDensityMapCreateInfoEXT-fragmentDensityMapAttachment-02551</span><br>

If <code>fragmentDensityMapAttachment</code> is not <code>VK_ATTACHMENT_UNUSED</code>,
<code>fragmentDensityMapAttachment</code> <strong class="purple">must</strong> reference an attachment with a
<code>storeOp</code> equal to <code>VK_ATTACHMENT_STORE_OP_DONT_CARE</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkRenderPassFragmentDensityMapCreateInfoEXT-sType-sType" href="#VUID-VkRenderPassFragmentDensityMapCreateInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkRenderPassFragmentDensityMapCreateInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_RENDER_PASS_FRAGMENT_DENSITY_MAP_CREATE_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassFragmentDensityMapCreateInfoEXT-fragmentDensityMapAttachment-parameter" href="#VUID-VkRenderPassFragmentDensityMapCreateInfoEXT-fragmentDensityMapAttachment-parameter"></a> <span class="vuid">VUID-VkRenderPassFragmentDensityMapCreateInfoEXT-fragmentDensityMapAttachment-parameter</span><br>
 <code>fragmentDensityMapAttachment</code> <strong class="purple">must</strong> be a valid <a href="#VkAttachmentReference">VkAttachmentReference</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAttachmentDescription</code> structure is defined as:</p>
</div>
<div id="VkAttachmentDescription" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkAttachmentDescription {
    VkAttachmentDescriptionFlags    flags;
    VkFormat                        format;
    VkSampleCountFlagBits           samples;
    VkAttachmentLoadOp              loadOp;
    VkAttachmentStoreOp             storeOp;
    VkAttachmentLoadOp              stencilLoadOp;
    VkAttachmentStoreOp             stencilStoreOp;
    VkImageLayout                   initialLayout;
    VkImageLayout                   finalLayout;
} VkAttachmentDescription;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>flags</code> is a bitmask of <a href="#VkAttachmentDescriptionFlagBits">VkAttachmentDescriptionFlagBits</a>
specifying additional properties of the attachment.</p>
</li>
<li>
<p><code>format</code> is a <a href="chap43.html#VkFormat">VkFormat</a> value specifying the format of the
image view that will be used for the attachment.</p>
</li>
<li>
<p><code>samples</code> is the number of samples of the image as defined in
<a href="chap42.html#VkSampleCountFlagBits">VkSampleCountFlagBits</a>.</p>
</li>
<li>
<p><code>loadOp</code> is a <a href="#VkAttachmentLoadOp">VkAttachmentLoadOp</a> value specifying how the
contents of color and depth components of the attachment are treated at
the beginning of the subpass where it is first used.</p>
</li>
<li>
<p><code>storeOp</code> is a <a href="#VkAttachmentStoreOp">VkAttachmentStoreOp</a> value specifying how the
contents of color and depth components of the attachment are treated at
the end of the subpass where it is last used.</p>
</li>
<li>
<p><code>stencilLoadOp</code> is a <a href="#VkAttachmentLoadOp">VkAttachmentLoadOp</a> value specifying how
the contents of stencil components of the attachment are treated at the
beginning of the subpass where it is first used.</p>
</li>
<li>
<p><code>stencilStoreOp</code> is a <a href="#VkAttachmentStoreOp">VkAttachmentStoreOp</a> value specifying how
the contents of stencil components of the attachment are treated at the
end of the last subpass where it is used.</p>
</li>
<li>
<p><code>initialLayout</code> is the layout the attachment image subresource will
be in when a render pass instance begins.</p>
</li>
<li>
<p><code>finalLayout</code> is the layout the attachment image subresource will be
transitioned to when a render pass instance ends.</p>
</li>
</ul>
</div>
<div id="renderpass-load-store-ops" class="paragraph">
<p>If the attachment uses a color format, then <code>loadOp</code> and <code>storeOp</code>
are used, and <code>stencilLoadOp</code> and <code>stencilStoreOp</code> are ignored.
If the format has depth and/or stencil components, <code>loadOp</code> and
<code>storeOp</code> apply only to the depth data, while <code>stencilLoadOp</code> and
<code>stencilStoreOp</code> define how the stencil data is handled.
<code>loadOp</code> and <code>stencilLoadOp</code> define the <em>load operations</em> that
execute as part of the first subpass that uses the attachment.
<code>storeOp</code> and <code>stencilStoreOp</code> define the <em>store operations</em> that
execute as part of the last subpass that uses the attachment.</p>
</div>
<div class="paragraph">
<p>The load operation for each sample in an attachment happens-before any
recorded command which accesses the sample in the first subpass where the
attachment is used.
Load operations for attachments with a depth/stencil format execute in the
<code>VK_PIPELINE_STAGE_EARLY_FRAGMENT_TESTS_BIT</code> pipeline stage.
Load operations for attachments with a color format execute in the
<code>VK_PIPELINE_STAGE_COLOR_ATTACHMENT_OUTPUT_BIT</code> pipeline stage.</p>
</div>
<div class="paragraph">
<p>The store operation for each sample in an attachment happens-after any
recorded command which accesses the sample in the last subpass where the
attachment is used.
Store operations for attachments with a depth/stencil format execute in the
<code>VK_PIPELINE_STAGE_LATE_FRAGMENT_TESTS_BIT</code> pipeline stage.
Store operations for attachments with a color format execute in the
<code>VK_PIPELINE_STAGE_COLOR_ATTACHMENT_OUTPUT_BIT</code> pipeline stage.</p>
</div>
<div class="paragraph">
<p>If an attachment is not used by any subpass, then <code>loadOp</code>,
<code>storeOp</code>, <code>stencilStoreOp</code>, and <code>stencilLoadOp</code> are ignored,
and the attachments memory contents will not be modified by execution of a
render pass instance.</p>
</div>
<div class="paragraph">
<p>The load and store operations apply on the first and last use of each view
in the render pass, respectively.
If a view index of an attachment is not included in the view mask in any
subpass that uses it, then the load and store operations are ignored, and
the attachments memory contents will not be modified by execution of a
render pass instance.</p>
</div>
<div id="renderpass-precision" class="paragraph">
<p>During a render pass instance, input/color attachments with color formats
that have a component size of 8, 16, or 32 bits <strong class="purple">must</strong> be represented in the
attachments format throughout the instance.
Attachments with other floating- or fixed-point color formats, or with depth
components <strong class="purple">may</strong> be represented in a format with a precision higher than the
attachment format, but <strong class="purple">must</strong> be represented with the same range.
When such a component is loaded via the <code>loadOp</code>, it will be converted
into an implementation-dependent format used by the render pass.
Such components <strong class="purple">must</strong> be converted from the render pass format, to the
format of the attachment, before they are resolved or stored at the end of a
render pass instance via <code>storeOp</code>.
Conversions occur as described in <a href="chap4.html#fundamentals-numerics">Numeric
Representation and Computation</a> and <a href="chap4.html#fundamentals-fixedconv">Fixed-Point
Data Conversions</a>.</p>
</div>
<div id="renderpass-aliasing" class="paragraph">
<p>If <code>flags</code> includes <code>VK_ATTACHMENT_DESCRIPTION_MAY_ALIAS_BIT</code>, then
the attachment is treated as if it shares physical memory with another
attachment in the same render pass.
This information limits the ability of the implementation to reorder certain
operations (like layout transitions and the <code>loadOp</code>) such that it is
not improperly reordered against other uses of the same physical memory via
a different attachment.
This is described in more detail below.</p>
</div>
<div class="paragraph">
<p>If a render pass uses multiple attachments that alias the same device
memory, those attachments <strong class="purple">must</strong> each include the
<code>VK_ATTACHMENT_DESCRIPTION_MAY_ALIAS_BIT</code> bit in their attachment
description flags.
Attachments aliasing the same memory occurs in multiple ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Multiple attachments being assigned the same image view as part of
framebuffer creation.</p>
</li>
<li>
<p>Attachments using distinct image views that correspond to the same image
subresource of an image.</p>
</li>
<li>
<p>Attachments using views of distinct image subresources which are bound
to overlapping memory ranges.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Render passes <strong class="purple">must</strong> include subpass dependencies (either directly or via a
subpass dependency chain) between any two subpasses that operate on the same
attachment or aliasing attachments and those subpass dependencies <strong class="purple">must</strong>
include execution and memory dependencies separating uses of the aliases, if
at least one of those subpasses writes to one of the aliases.
These dependencies <strong class="purple">must</strong> not include the <code>VK_DEPENDENCY_BY_REGION_BIT</code>
if the aliases are views of distinct image subresources which overlap in
memory.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Multiple attachments that alias the same memory <strong class="purple">must</strong> not be used in a
single subpass.
A given attachment index <strong class="purple">must</strong> not be used multiple times in a single
subpass, with one exception: two subpass attachments <strong class="purple">can</strong> use the same
attachment index if at least one use is as an input attachment and neither
use is as a resolve or preserve attachment.
In other words, the same view <strong class="purple">can</strong> be used simultaneously as an input and
color or depth/stencil attachment, but <strong class="purple">must</strong> not be used as multiple color
or depth/stencil attachments nor as resolve or preserve attachments.
The precise set of valid scenarios is described in more detail
<a href="#renderpass-feedbackloop">below</a>.</p>
</div>
<div class="paragraph">
<p>If a set of attachments alias each other, then all except the first to be
used in the render pass <strong class="purple">must</strong> use an <code>initialLayout</code> of
<code>VK_IMAGE_LAYOUT_UNDEFINED</code>, since the earlier uses of the other aliases
make their contents undefined.
Once an alias has been used and a different alias has been used after it,
the first alias <strong class="purple">must</strong> not be used in any later subpasses.
However, an application <strong class="purple">can</strong> assign the same image view to multiple aliasing
attachment indices, which allows that image view to be used multiple times
even if other aliases are used in between.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Once an attachment needs the <code>VK_ATTACHMENT_DESCRIPTION_MAY_ALIAS_BIT</code>
bit, there <strong class="purple">should</strong> be no additional cost of introducing additional aliases,
and using these additional aliases <strong class="purple">may</strong> allow more efficient clearing of the
attachments on multiple uses via <code>VK_ATTACHMENT_LOAD_OP_CLEAR</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAttachmentDescription-finalLayout-00843" href="#VUID-VkAttachmentDescription-finalLayout-00843"></a> <span class="vuid">VUID-VkAttachmentDescription-finalLayout-00843</span><br>

<code>finalLayout</code> <strong class="purple">must</strong> not be <code>VK_IMAGE_LAYOUT_UNDEFINED</code> or
<code>VK_IMAGE_LAYOUT_PREINITIALIZED</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-format-03280" href="#VUID-VkAttachmentDescription-format-03280"></a> <span class="vuid">VUID-VkAttachmentDescription-format-03280</span><br>

If <code>format</code> is a color format, <code>initialLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-format-03281" href="#VUID-VkAttachmentDescription-format-03281"></a> <span class="vuid">VUID-VkAttachmentDescription-format-03281</span><br>

If <code>format</code> is a depth/stencil format, <code>initialLayout</code> <strong class="purple">must</strong> not
be <code>VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-format-03282" href="#VUID-VkAttachmentDescription-format-03282"></a> <span class="vuid">VUID-VkAttachmentDescription-format-03282</span><br>

If <code>format</code> is a color format, <code>finalLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-format-03283" href="#VUID-VkAttachmentDescription-format-03283"></a> <span class="vuid">VUID-VkAttachmentDescription-format-03283</span><br>

If <code>format</code> is a depth/stencil format, <code>finalLayout</code> <strong class="purple">must</strong> not
be <code>VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-separateDepthStencilLayouts-03284" href="#VUID-VkAttachmentDescription-separateDepthStencilLayouts-03284"></a> <span class="vuid">VUID-VkAttachmentDescription-separateDepthStencilLayouts-03284</span><br>

If the <a href="chap41.html#features-separateDepthStencilLayouts"><code>separateDepthStencilLayouts</code></a> feature is not enabled,
<code>initialLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-separateDepthStencilLayouts-03285" href="#VUID-VkAttachmentDescription-separateDepthStencilLayouts-03285"></a> <span class="vuid">VUID-VkAttachmentDescription-separateDepthStencilLayouts-03285</span><br>

If the <a href="chap41.html#features-separateDepthStencilLayouts"><code>separateDepthStencilLayouts</code></a> feature is not enabled,
<code>finalLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-format-03286" href="#VUID-VkAttachmentDescription-format-03286"></a> <span class="vuid">VUID-VkAttachmentDescription-format-03286</span><br>

If <code>format</code> is a color format, <code>initialLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-format-03287" href="#VUID-VkAttachmentDescription-format-03287"></a> <span class="vuid">VUID-VkAttachmentDescription-format-03287</span><br>

If <code>format</code> is a color format, <code>finalLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-format-03288" href="#VUID-VkAttachmentDescription-format-03288"></a> <span class="vuid">VUID-VkAttachmentDescription-format-03288</span><br>

If <code>format</code> is a depth/stencil format which includes both depth and
stencil aspects, <code>initialLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-format-03289" href="#VUID-VkAttachmentDescription-format-03289"></a> <span class="vuid">VUID-VkAttachmentDescription-format-03289</span><br>

If <code>format</code> is a depth/stencil format which includes both depth and
stencil aspects, <code>finalLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-format-03290" href="#VUID-VkAttachmentDescription-format-03290"></a> <span class="vuid">VUID-VkAttachmentDescription-format-03290</span><br>

If <code>format</code> is a depth/stencil format which includes only the depth
aspect, <code>initialLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-format-03291" href="#VUID-VkAttachmentDescription-format-03291"></a> <span class="vuid">VUID-VkAttachmentDescription-format-03291</span><br>

If <code>format</code> is a depth/stencil format which includes only the depth
aspect, <code>finalLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-format-03292" href="#VUID-VkAttachmentDescription-format-03292"></a> <span class="vuid">VUID-VkAttachmentDescription-format-03292</span><br>

If <code>format</code> is a depth/stencil format which includes only the
stencil aspect, <code>initialLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-format-03293" href="#VUID-VkAttachmentDescription-format-03293"></a> <span class="vuid">VUID-VkAttachmentDescription-format-03293</span><br>

If <code>format</code> is a depth/stencil format which includes only the
stencil aspect, <code>finalLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAttachmentDescription-flags-parameter" href="#VUID-VkAttachmentDescription-flags-parameter"></a> <span class="vuid">VUID-VkAttachmentDescription-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="#VkAttachmentDescriptionFlagBits">VkAttachmentDescriptionFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-format-parameter" href="#VUID-VkAttachmentDescription-format-parameter"></a> <span class="vuid">VUID-VkAttachmentDescription-format-parameter</span><br>
 <code>format</code> <strong class="purple">must</strong> be a valid <a href="chap43.html#VkFormat">VkFormat</a> value</p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-samples-parameter" href="#VUID-VkAttachmentDescription-samples-parameter"></a> <span class="vuid">VUID-VkAttachmentDescription-samples-parameter</span><br>
 <code>samples</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkSampleCountFlagBits">VkSampleCountFlagBits</a> value</p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-loadOp-parameter" href="#VUID-VkAttachmentDescription-loadOp-parameter"></a> <span class="vuid">VUID-VkAttachmentDescription-loadOp-parameter</span><br>
 <code>loadOp</code> <strong class="purple">must</strong> be a valid <a href="#VkAttachmentLoadOp">VkAttachmentLoadOp</a> value</p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-storeOp-parameter" href="#VUID-VkAttachmentDescription-storeOp-parameter"></a> <span class="vuid">VUID-VkAttachmentDescription-storeOp-parameter</span><br>
 <code>storeOp</code> <strong class="purple">must</strong> be a valid <a href="#VkAttachmentStoreOp">VkAttachmentStoreOp</a> value</p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-stencilLoadOp-parameter" href="#VUID-VkAttachmentDescription-stencilLoadOp-parameter"></a> <span class="vuid">VUID-VkAttachmentDescription-stencilLoadOp-parameter</span><br>
 <code>stencilLoadOp</code> <strong class="purple">must</strong> be a valid <a href="#VkAttachmentLoadOp">VkAttachmentLoadOp</a> value</p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-stencilStoreOp-parameter" href="#VUID-VkAttachmentDescription-stencilStoreOp-parameter"></a> <span class="vuid">VUID-VkAttachmentDescription-stencilStoreOp-parameter</span><br>
 <code>stencilStoreOp</code> <strong class="purple">must</strong> be a valid <a href="#VkAttachmentStoreOp">VkAttachmentStoreOp</a> value</p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-initialLayout-parameter" href="#VUID-VkAttachmentDescription-initialLayout-parameter"></a> <span class="vuid">VUID-VkAttachmentDescription-initialLayout-parameter</span><br>
 <code>initialLayout</code> <strong class="purple">must</strong> be a valid <a href="chap13.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription-finalLayout-parameter" href="#VUID-VkAttachmentDescription-finalLayout-parameter"></a> <span class="vuid">VUID-VkAttachmentDescription-finalLayout-parameter</span><br>
 <code>finalLayout</code> <strong class="purple">must</strong> be a valid <a href="chap13.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in <a href="#VkAttachmentDescription">VkAttachmentDescription</a>::<code>flags</code>
describing additional properties of the attachment are:</p>
</div>
<div id="VkAttachmentDescriptionFlagBits" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkAttachmentDescriptionFlagBits {
    VK_ATTACHMENT_DESCRIPTION_MAY_ALIAS_BIT = <span class="hex">0x00000001</span>,
} VkAttachmentDescriptionFlagBits;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_ATTACHMENT_DESCRIPTION_MAY_ALIAS_BIT</code> specifies that the
attachment aliases the same device memory as other attachments.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkAttachmentDescriptionFlags" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="keyword">typedef</span> VkFlags VkAttachmentDescriptionFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkAttachmentDescriptionFlags</code> is a bitmask type for setting a mask of
zero or more <a href="#VkAttachmentDescriptionFlagBits">VkAttachmentDescriptionFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of <a href="#VkAttachmentDescription">VkAttachmentDescription</a>::<code>loadOp</code> and
<code>stencilLoadOp</code>, specifying how the contents of the attachment are
treated, are:</p>
</div>
<div id="VkAttachmentLoadOp" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkAttachmentLoadOp {
    VK_ATTACHMENT_LOAD_OP_LOAD = <span class="integer">0</span>,
    VK_ATTACHMENT_LOAD_OP_CLEAR = <span class="integer">1</span>,
    VK_ATTACHMENT_LOAD_OP_DONT_CARE = <span class="integer">2</span>,
} VkAttachmentLoadOp;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_ATTACHMENT_LOAD_OP_LOAD</code> specifies that the previous contents of
the image within the render area will be preserved.
For attachments with a depth/stencil format, this uses the access type
<code>VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_READ_BIT</code>.
For attachments with a color format, this uses the access type
<code>VK_ACCESS_COLOR_ATTACHMENT_READ_BIT</code>.</p>
</li>
<li>
<p><code>VK_ATTACHMENT_LOAD_OP_CLEAR</code> specifies that the contents within the
render area will be cleared to a uniform value, which is specified when
a render pass instance is begun.
For attachments with a depth/stencil format, this uses the access type
<code>VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_WRITE_BIT</code>.
For attachments with a color format, this uses the access type
<code>VK_ACCESS_COLOR_ATTACHMENT_WRITE_BIT</code>.</p>
</li>
<li>
<p><code>VK_ATTACHMENT_LOAD_OP_DONT_CARE</code> specifies that the previous
contents within the area need not be preserved; the contents of the
attachment will be undefined inside the render area.
For attachments with a depth/stencil format, this uses the access type
<code>VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_WRITE_BIT</code>.
For attachments with a color format, this uses the access type
<code>VK_ACCESS_COLOR_ATTACHMENT_WRITE_BIT</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of <a href="#VkAttachmentDescription">VkAttachmentDescription</a>::<code>storeOp</code> and
<code>stencilStoreOp</code>, specifying how the contents of the attachment are
treated, are:</p>
</div>
<div id="VkAttachmentStoreOp" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkAttachmentStoreOp {
    VK_ATTACHMENT_STORE_OP_STORE = <span class="integer">0</span>,
    VK_ATTACHMENT_STORE_OP_DONT_CARE = <span class="integer">1</span>,
  <span class="comment">// Provided by VK_QCOM_render_pass_store_ops</span>
    VK_ATTACHMENT_STORE_OP_NONE_QCOM = <span class="integer">1000301000</span>,
} VkAttachmentStoreOp;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_ATTACHMENT_STORE_OP_STORE</code> specifies the contents generated
during the render pass and within the render area are written to memory.
For attachments with a depth/stencil format, this uses the access type
<code>VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_WRITE_BIT</code>.
For attachments with a color format, this uses the access type
<code>VK_ACCESS_COLOR_ATTACHMENT_WRITE_BIT</code>.</p>
</li>
<li>
<p><code>VK_ATTACHMENT_STORE_OP_DONT_CARE</code> specifies the contents within the
render area are not needed after rendering, and <strong class="purple">may</strong> be discarded; the
contents of the attachment will be undefined inside the render area.
For attachments with a depth/stencil format, this uses the access type
<code>VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_WRITE_BIT</code>.
For attachments with a color format, this uses the access type
<code>VK_ACCESS_COLOR_ATTACHMENT_WRITE_BIT</code>.</p>
</li>
<li>
<p><code>VK_ATTACHMENT_STORE_OP_NONE_QCOM</code> specifies that the contents
within the render area were not written during rendering, and <strong class="purple">may</strong> not
be written to memory.
If the attachment was written to during the renderpass, the contents of
the attachment will be undefined inside the render area.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p><code>VK_ATTACHMENT_STORE_OP_DONT_CARE</code> <strong class="purple">can</strong> cause contents generated during
previous render passes to be discarded before reaching memory, even if no
write to the attachment occurs during the current render pass.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To specify which aspects of an input attachment <strong class="purple">can</strong> be read, add a
<a href="#VkRenderPassInputAttachmentAspectCreateInfo">VkRenderPassInputAttachmentAspectCreateInfo</a> structure to the
<code>pNext</code> chain of the <a href="#VkRenderPassCreateInfo">VkRenderPassCreateInfo</a> structure:</p>
</div>
<div class="paragraph">
<p>The <code>VkRenderPassInputAttachmentAspectCreateInfo</code> structure is defined
as:</p>
</div>
<div id="VkRenderPassInputAttachmentAspectCreateInfo" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">struct</span> VkRenderPassInputAttachmentAspectCreateInfo {
    VkStructureType                            sType;
    <span class="directive">const</span> <span class="directive">void</span>*                                pNext;
    uint32_t                                   aspectReferenceCount;
    <span class="directive">const</span> VkInputAttachmentAspectReference*    pAspectReferences;
} VkRenderPassInputAttachmentAspectCreateInfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkRenderPassInputAttachmentAspectCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_maintenance2</span>
<span class="keyword">typedef</span> VkRenderPassInputAttachmentAspectCreateInfo VkRenderPassInputAttachmentAspectCreateInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>aspectReferenceCount</code> is the number of elements in the
<code>pAspectReferences</code> array.</p>
</li>
<li>
<p><code>pAspectReferences</code> is a pointer to an array of
<code>aspectReferenceCount</code> <a href="#VkInputAttachmentAspectReference">VkInputAttachmentAspectReference</a>
structures containing a mask describing which aspect(s) <strong class="purple">can</strong> be accessed
for a given input attachment within a given subpass.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An application <strong class="purple">can</strong> access any aspect of an input attachment that does not
have a specified aspect mask in the <code>pAspectReferences</code> array.
Otherwise, an application <strong class="purple">must</strong> not access aspect(s) of an input attachment
other than those in its specified aspect mask.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkRenderPassInputAttachmentAspectCreateInfo-sType-sType" href="#VUID-VkRenderPassInputAttachmentAspectCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkRenderPassInputAttachmentAspectCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_RENDER_PASS_INPUT_ATTACHMENT_ASPECT_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassInputAttachmentAspectCreateInfo-pAspectReferences-parameter" href="#VUID-VkRenderPassInputAttachmentAspectCreateInfo-pAspectReferences-parameter"></a> <span class="vuid">VUID-VkRenderPassInputAttachmentAspectCreateInfo-pAspectReferences-parameter</span><br>
 <code>pAspectReferences</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>aspectReferenceCount</code> valid <a href="#VkInputAttachmentAspectReference">VkInputAttachmentAspectReference</a> structures</p>
</li>
<li>
<p><a id="VUID-VkRenderPassInputAttachmentAspectCreateInfo-aspectReferenceCount-arraylength" href="#VUID-VkRenderPassInputAttachmentAspectCreateInfo-aspectReferenceCount-arraylength"></a> <span class="vuid">VUID-VkRenderPassInputAttachmentAspectCreateInfo-aspectReferenceCount-arraylength</span><br>
 <code>aspectReferenceCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkInputAttachmentAspectReference</code> structure specifies an aspect
mask for a specific input attachment of a specific subpass in the render
pass.</p>
</div>
<div class="paragraph">
<p><code>subpass</code> and <code>inputAttachmentIndex</code> index into the render pass as:</p>
</div>
<div class="paragraph">
<p><code>pCreateInfo-&gt;pSubpasses</code>[subpass].pInputAttachments[inputAttachmentIndex]</p>
</div>
<div id="VkInputAttachmentAspectReference" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">struct</span> VkInputAttachmentAspectReference {
    uint32_t              subpass;
    uint32_t              inputAttachmentIndex;
    VkImageAspectFlags    aspectMask;
} VkInputAttachmentAspectReference;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkInputAttachmentAspectReferenceKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_maintenance2</span>
<span class="keyword">typedef</span> VkInputAttachmentAspectReference VkInputAttachmentAspectReferenceKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>subpass</code> is an index into the <code>pSubpasses</code> array of the parent
<code>VkRenderPassCreateInfo</code> structure.</p>
</li>
<li>
<p><code>inputAttachmentIndex</code> is an index into the <code>pInputAttachments</code>
of the specified subpass.</p>
</li>
<li>
<p><code>aspectMask</code> is a mask of which aspect(s) <strong class="purple">can</strong> be accessed within
the specified subpass.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkInputAttachmentAspectReference-aspectMask-01964" href="#VUID-VkInputAttachmentAspectReference-aspectMask-01964"></a> <span class="vuid">VUID-VkInputAttachmentAspectReference-aspectMask-01964</span><br>

<code>aspectMask</code> <strong class="purple">must</strong> not include <code>VK_IMAGE_ASPECT_METADATA_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkInputAttachmentAspectReference-aspectMask-02250" href="#VUID-VkInputAttachmentAspectReference-aspectMask-02250"></a> <span class="vuid">VUID-VkInputAttachmentAspectReference-aspectMask-02250</span><br>

<code>aspectMask</code> <strong class="purple">must</strong> not include
<code>VK_IMAGE_ASPECT_MEMORY_PLANE_i_BIT_EXT</code> for any index <code>i</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkInputAttachmentAspectReference-aspectMask-parameter" href="#VUID-VkInputAttachmentAspectReference-aspectMask-parameter"></a> <span class="vuid">VUID-VkInputAttachmentAspectReference-aspectMask-parameter</span><br>
 <code>aspectMask</code> <strong class="purple">must</strong> be a valid combination of <a href="chap13.html#VkImageAspectFlagBits">VkImageAspectFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkInputAttachmentAspectReference-aspectMask-requiredbitmask" href="#VUID-VkInputAttachmentAspectReference-aspectMask-requiredbitmask"></a> <span class="vuid">VUID-VkInputAttachmentAspectReference-aspectMask-requiredbitmask</span><br>
 <code>aspectMask</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkSubpassDescription</code> structure is defined as:</p>
</div>
<div id="VkSubpassDescription" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkSubpassDescription {
    VkSubpassDescriptionFlags       flags;
    VkPipelineBindPoint             pipelineBindPoint;
    uint32_t                        inputAttachmentCount;
    <span class="directive">const</span> VkAttachmentReference*    pInputAttachments;
    uint32_t                        colorAttachmentCount;
    <span class="directive">const</span> VkAttachmentReference*    pColorAttachments;
    <span class="directive">const</span> VkAttachmentReference*    pResolveAttachments;
    <span class="directive">const</span> VkAttachmentReference*    pDepthStencilAttachment;
    uint32_t                        preserveAttachmentCount;
    <span class="directive">const</span> uint32_t*                 pPreserveAttachments;
} VkSubpassDescription;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>flags</code> is a bitmask of <a href="#VkSubpassDescriptionFlagBits">VkSubpassDescriptionFlagBits</a>
specifying usage of the subpass.</p>
</li>
<li>
<p><code>pipelineBindPoint</code> is a <a href="chap11.html#VkPipelineBindPoint">VkPipelineBindPoint</a> value specifying
the pipeline type supported for this subpass.</p>
</li>
<li>
<p><code>inputAttachmentCount</code> is the number of input attachments.</p>
</li>
<li>
<p><code>pInputAttachments</code> is a pointer to an array of
<a href="#VkAttachmentReference">VkAttachmentReference</a> structures defining the input attachments
for this subpass and their layouts.</p>
</li>
<li>
<p><code>colorAttachmentCount</code> is the number of color attachments.</p>
</li>
<li>
<p><code>pColorAttachments</code> is a pointer to an array of
<a href="#VkAttachmentReference">VkAttachmentReference</a> structures defining the color attachments
for this subpass and their layouts.</p>
</li>
<li>
<p><code>pResolveAttachments</code> is an optional array of
<code>colorAttachmentCount</code> <a href="#VkAttachmentReference">VkAttachmentReference</a> structures
defining the resolve attachments for this subpass and their layouts.</p>
</li>
<li>
<p><code>pDepthStencilAttachment</code> is a pointer to a
<a href="#VkAttachmentReference">VkAttachmentReference</a> structure specifying the depth/stencil
attachment for this subpass and its layout.</p>
</li>
<li>
<p><code>preserveAttachmentCount</code> is the number of preserved attachments.</p>
</li>
<li>
<p><code>pPreserveAttachments</code> is a pointer to an array of
<code>preserveAttachmentCount</code> render pass attachment indices identifying
attachments that are not used by this subpass, but whose contents <strong class="purple">must</strong>
be preserved throughout the subpass.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each element of the <code>pInputAttachments</code> array corresponds to an input
attachment index in a fragment shader, i.e. if a shader declares an image
variable decorated with a <code>InputAttachmentIndex</code> value of <strong>X</strong>, then it
uses the attachment provided in <code>pInputAttachments</code>[<strong>X</strong>].
Input attachments <strong class="purple">must</strong> also be bound to the pipeline in a descriptor set.
If the <code>attachment</code> member of any element of <code>pInputAttachments</code> is
<code>VK_ATTACHMENT_UNUSED</code>, the application <strong class="purple">must</strong> not read from the
corresponding input attachment index.
Fragment shaders <strong class="purple">can</strong> use subpass input variables to access the contents of
an input attachment at the fragments (x, y, layer) framebuffer coordinates.
Input attachments <strong class="purple">must</strong> not be used by any subpasses within a renderpass
that enables <a href="chap27.html#vertexpostproc-renderpass-transform">render pass transform</a>.</p>
</div>
<div class="paragraph">
<p>Each element of the <code>pColorAttachments</code> array corresponds to an output
location in the shader, i.e. if the shader declares an output variable
decorated with a <code>Location</code> value of <strong>X</strong>, then it uses the attachment
provided in <code>pColorAttachments</code>[<strong>X</strong>].
If the <code>attachment</code> member of any element of <code>pColorAttachments</code> is
<code>VK_ATTACHMENT_UNUSED</code>, writes to the corresponding location by a
fragment are discarded.</p>
</div>
<div class="paragraph">
<p>If
<code>flags</code> does not include
<code>VK_SUBPASS_DESCRIPTION_SHADER_RESOLVE_BIT_QCOM</code>, and if
<code>pResolveAttachments</code> is not <code>NULL</code>, each of its elements corresponds to
a color attachment (the element in <code>pColorAttachments</code> at the same
index), and a multisample resolve operation is defined for each attachment.
At the end of each subpass, multisample resolve operations read the
subpasss color attachments, and resolve the samples for each pixel within
the render area to the same pixel location in the corresponding resolve
attachments, unless the resolve attachment index is
<code>VK_ATTACHMENT_UNUSED</code>.</p>
</div>
<div class="paragraph">
<p>Similarly, if
<code>flags</code> does not include
<code>VK_SUBPASS_DESCRIPTION_SHADER_RESOLVE_BIT_QCOM</code>, and
<a href="#VkSubpassDescriptionDepthStencilResolve">VkSubpassDescriptionDepthStencilResolve</a>::<code>pDepthStencilResolveAttachment</code>
is not <code>NULL</code> and does not have the value <code>VK_ATTACHMENT_UNUSED</code>, it
corresponds to the depth/stencil attachment in
<code>pDepthStencilAttachment</code>, and multisample resolve operations for depth
and stencil are defined by
<a href="#VkSubpassDescriptionDepthStencilResolve">VkSubpassDescriptionDepthStencilResolve</a>::<code>depthResolveMode</code> and
<a href="#VkSubpassDescriptionDepthStencilResolve">VkSubpassDescriptionDepthStencilResolve</a>::<code>stencilResolveMode</code>,
respectively.
At the end of each subpass, multisample resolve operations read the
subpasss depth/stencil attachment, and resolve the samples for each pixel
to the same pixel location in the corresponding resolve attachment.
If <a href="#VkSubpassDescriptionDepthStencilResolve">VkSubpassDescriptionDepthStencilResolve</a>::<code>depthResolveMode</code> is
<code>VK_RESOLVE_MODE_NONE</code>, then the depth component of the resolve
attachment is not written to and its contents are preserved.
Similarly, if
<a href="#VkSubpassDescriptionDepthStencilResolve">VkSubpassDescriptionDepthStencilResolve</a>::<code>stencilResolveMode</code> is
<code>VK_RESOLVE_MODE_NONE</code>, then the stencil component of the resolve
attachment is not written to and its contents are preserved.
<a href="#VkSubpassDescriptionDepthStencilResolve">VkSubpassDescriptionDepthStencilResolve</a>::<code>depthResolveMode</code> is
ignored if the <a href="chap43.html#VkFormat">VkFormat</a> of the <code>pDepthStencilResolveAttachment</code>
does not have a depth component.
Similarly,
<a href="#VkSubpassDescriptionDepthStencilResolve">VkSubpassDescriptionDepthStencilResolve</a>::<code>stencilResolveMode</code> is
ignored if the <a href="chap43.html#VkFormat">VkFormat</a> of the <code>pDepthStencilResolveAttachment</code>
does not have a stencil component.</p>
</div>
<div class="paragraph">
<p>If the image subresource range referenced by the depth/stencil attachment is
created with
<code>VK_IMAGE_CREATE_SAMPLE_LOCATIONS_COMPATIBLE_DEPTH_BIT_EXT</code>, then the
multisample resolve operation uses the sample locations state specified in
the <code>sampleLocationsInfo</code> member of the element of the
<code>VkRenderPassSampleLocationsBeginInfoEXT</code>::<code>pPostSubpassSampleLocations</code>
for the subpass.</p>
</div>
<div class="paragraph">
<p>If <code>pDepthStencilAttachment</code> is <code>NULL</code>, or if its attachment index is
<code>VK_ATTACHMENT_UNUSED</code>, it indicates that no depth/stencil attachment
will be used in the subpass.</p>
</div>
<div class="paragraph">
<p>The contents of an attachment within the render area become undefined at
the start of a subpass <strong>S</strong> if all of the following conditions are true:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The attachment is used as a color, depth/stencil, or resolve attachment
in any subpass in the render pass.</p>
</li>
<li>
<p>There is a subpass <strong>S<sub>1</sub></strong> that uses or preserves the attachment, and a
subpass dependency from <strong>S<sub>1</sub></strong> to <strong>S</strong>.</p>
</li>
<li>
<p>The attachment is not used or preserved in subpass <strong>S</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, the contents of an attachment within the render area become
undefined at the start of a subpass <strong>S</strong> if all of the following conditions
are true:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUBPASS_DESCRIPTION_SHADER_RESOLVE_BIT_QCOM</code> is set.</p>
</li>
<li>
<p>The attachment is used as a color or depth/stencil in the subpass.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once the contents of an attachment become undefined in subpass <strong>S</strong>, they
remain undefined for subpasses in subpass dependency chains starting with
subpass <strong>S</strong> until they are written again.
However, they remain valid for subpasses in other subpass dependency chains
starting with subpass <strong>S<sub>1</sub></strong> if those subpasses use or preserve the
attachment.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSubpassDescription-pipelineBindPoint-00844" href="#VUID-VkSubpassDescription-pipelineBindPoint-00844"></a> <span class="vuid">VUID-VkSubpassDescription-pipelineBindPoint-00844</span><br>

<code>pipelineBindPoint</code> <strong class="purple">must</strong> be <code>VK_PIPELINE_BIND_POINT_GRAPHICS</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-colorAttachmentCount-00845" href="#VUID-VkSubpassDescription-colorAttachmentCount-00845"></a> <span class="vuid">VUID-VkSubpassDescription-colorAttachmentCount-00845</span><br>

<code>colorAttachmentCount</code> <strong class="purple">must</strong> be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxColorAttachments</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-loadOp-00846" href="#VUID-VkSubpassDescription-loadOp-00846"></a> <span class="vuid">VUID-VkSubpassDescription-loadOp-00846</span><br>

If the first use of an attachment in this render pass is as an input
attachment, and the attachment is not also used as a color or
depth/stencil attachment in the same subpass, then <code>loadOp</code> <strong class="purple">must</strong>
not be <code>VK_ATTACHMENT_LOAD_OP_CLEAR</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-pResolveAttachments-00847" href="#VUID-VkSubpassDescription-pResolveAttachments-00847"></a> <span class="vuid">VUID-VkSubpassDescription-pResolveAttachments-00847</span><br>

If <code>pResolveAttachments</code> is not <code>NULL</code>, for each resolve attachment
that is not <code>VK_ATTACHMENT_UNUSED</code>, the corresponding color
attachment <strong class="purple">must</strong> not be <code>VK_ATTACHMENT_UNUSED</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-pResolveAttachments-00848" href="#VUID-VkSubpassDescription-pResolveAttachments-00848"></a> <span class="vuid">VUID-VkSubpassDescription-pResolveAttachments-00848</span><br>

If <code>pResolveAttachments</code> is not <code>NULL</code>, for each resolve attachment
that is not <code>VK_ATTACHMENT_UNUSED</code>, the corresponding color
attachment <strong class="purple">must</strong> not have a sample count of <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-pResolveAttachments-00849" href="#VUID-VkSubpassDescription-pResolveAttachments-00849"></a> <span class="vuid">VUID-VkSubpassDescription-pResolveAttachments-00849</span><br>

If <code>pResolveAttachments</code> is not <code>NULL</code>, each resolve attachment that
is not <code>VK_ATTACHMENT_UNUSED</code> <strong class="purple">must</strong> have a sample count of
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-pResolveAttachments-00850" href="#VUID-VkSubpassDescription-pResolveAttachments-00850"></a> <span class="vuid">VUID-VkSubpassDescription-pResolveAttachments-00850</span><br>

If <code>pResolveAttachments</code> is not <code>NULL</code>, each resolve attachment that
is not <code>VK_ATTACHMENT_UNUSED</code> <strong class="purple">must</strong> have the same <a href="chap43.html#VkFormat">VkFormat</a> as
its corresponding color attachment</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-pColorAttachments-01417" href="#VUID-VkSubpassDescription-pColorAttachments-01417"></a> <span class="vuid">VUID-VkSubpassDescription-pColorAttachments-01417</span><br>

All attachments in <code>pColorAttachments</code> that are not
<code>VK_ATTACHMENT_UNUSED</code> <strong class="purple">must</strong> have the same sample count</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-pInputAttachments-02647" href="#VUID-VkSubpassDescription-pInputAttachments-02647"></a> <span class="vuid">VUID-VkSubpassDescription-pInputAttachments-02647</span><br>

All attachments in <code>pInputAttachments</code> that are not
<code>VK_ATTACHMENT_UNUSED</code> <strong class="purple">must</strong> have image formats whose
<a href="chap43.html#potential-format-features">potential format features</a> contain at
least <code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code> or
<code>VK_FORMAT_FEATURE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-pColorAttachments-02648" href="#VUID-VkSubpassDescription-pColorAttachments-02648"></a> <span class="vuid">VUID-VkSubpassDescription-pColorAttachments-02648</span><br>

All attachments in <code>pColorAttachments</code> that are not
<code>VK_ATTACHMENT_UNUSED</code> <strong class="purple">must</strong> have image formats whose
<a href="chap43.html#potential-format-features">potential format features</a> contain
<code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-pResolveAttachments-02649" href="#VUID-VkSubpassDescription-pResolveAttachments-02649"></a> <span class="vuid">VUID-VkSubpassDescription-pResolveAttachments-02649</span><br>

All attachments in <code>pResolveAttachments</code> that are not
<code>VK_ATTACHMENT_UNUSED</code> <strong class="purple">must</strong> have image formats whose
<a href="chap43.html#potential-format-features">potential format features</a> contain
<code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-pDepthStencilAttachment-02650" href="#VUID-VkSubpassDescription-pDepthStencilAttachment-02650"></a> <span class="vuid">VUID-VkSubpassDescription-pDepthStencilAttachment-02650</span><br>

If <code>pDepthStencilAttachment</code> is not <code>NULL</code> and the attachment is not
<code>VK_ATTACHMENT_UNUSED</code> then it <strong class="purple">must</strong> have a image format whose
<a href="chap43.html#potential-format-features">potential format features</a> contain
<code>VK_FORMAT_FEATURE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-pColorAttachments-01506" href="#VUID-VkSubpassDescription-pColorAttachments-01506"></a> <span class="vuid">VUID-VkSubpassDescription-pColorAttachments-01506</span><br>

If the <code>VK_AMD_mixed_attachment_samples</code> extension is enabled, and all
attachments in <code>pColorAttachments</code> that are not
<code>VK_ATTACHMENT_UNUSED</code> <strong class="purple">must</strong> have a sample count that is smaller
than or equal to the sample count of <code>pDepthStencilAttachment</code> if it
is not <code>VK_ATTACHMENT_UNUSED</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-pDepthStencilAttachment-01418" href="#VUID-VkSubpassDescription-pDepthStencilAttachment-01418"></a> <span class="vuid">VUID-VkSubpassDescription-pDepthStencilAttachment-01418</span><br>

If neither the <code>VK_AMD_mixed_attachment_samples</code> nor the
<code>VK_NV_framebuffer_mixed_samples</code> extensions are enabled, and if
<code>pDepthStencilAttachment</code> is not <code>VK_ATTACHMENT_UNUSED</code> and any
attachments in <code>pColorAttachments</code> are not
<code>VK_ATTACHMENT_UNUSED</code>, they <strong class="purple">must</strong> have the same sample count</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-attachment-00853" href="#VUID-VkSubpassDescription-attachment-00853"></a> <span class="vuid">VUID-VkSubpassDescription-attachment-00853</span><br>

The <code>attachment</code> member of each element of
<code>pPreserveAttachments</code> <strong class="purple">must</strong> not be <code>VK_ATTACHMENT_UNUSED</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-pPreserveAttachments-00854" href="#VUID-VkSubpassDescription-pPreserveAttachments-00854"></a> <span class="vuid">VUID-VkSubpassDescription-pPreserveAttachments-00854</span><br>

Each element of <code>pPreserveAttachments</code> <strong class="purple">must</strong> not also be an element
of any other member of the subpass description</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-layout-02519" href="#VUID-VkSubpassDescription-layout-02519"></a> <span class="vuid">VUID-VkSubpassDescription-layout-02519</span><br>

If any attachment is used by more than one <a href="#VkAttachmentReference">VkAttachmentReference</a>
member, then each use <strong class="purple">must</strong> use the same <code>layout</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-None-04437" href="#VUID-VkSubpassDescription-None-04437"></a> <span class="vuid">VUID-VkSubpassDescription-None-04437</span><br>

Each attachment <strong class="purple">must</strong> follow the <a href="#attachment-type-imagelayout">image
layout requirements</a> specified for its attachment type</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-flags-00856" href="#VUID-VkSubpassDescription-flags-00856"></a> <span class="vuid">VUID-VkSubpassDescription-flags-00856</span><br>

If <code>flags</code> includes
<code>VK_SUBPASS_DESCRIPTION_PER_VIEW_POSITION_X_ONLY_BIT_NVX</code>, it <strong class="purple">must</strong>
also include <code>VK_SUBPASS_DESCRIPTION_PER_VIEW_ATTRIBUTES_BIT_NVX</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-flags-03341" href="#VUID-VkSubpassDescription-flags-03341"></a> <span class="vuid">VUID-VkSubpassDescription-flags-03341</span><br>

If <code>flags</code> includes
<code>VK_SUBPASS_DESCRIPTION_SHADER_RESOLVE_BIT_QCOM</code>, and if
<code>pResolveAttachments</code> is not <code>NULL</code>, then each resolve attachment
<strong class="purple">must</strong> be <code>VK_ATTACHMENT_UNUSED</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-flags-03342" href="#VUID-VkSubpassDescription-flags-03342"></a> <span class="vuid">VUID-VkSubpassDescription-flags-03342</span><br>

If <code>flags</code> includes
<code>VK_SUBPASS_DESCRIPTION_SHADER_RESOLVE_BIT_QCOM</code>, and if
<code>pDepthStencilResolveAttachmentKHR</code> is not <code>NULL</code>, then the
depth/stencil resolve attachment <strong class="purple">must</strong> be <code>VK_ATTACHMENT_UNUSED</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-flags-03343" href="#VUID-VkSubpassDescription-flags-03343"></a> <span class="vuid">VUID-VkSubpassDescription-flags-03343</span><br>

If <code>flags</code> includes
<code>VK_SUBPASS_DESCRIPTION_SHADER_RESOLVE_BIT_QCOM</code>, then the subpass
<strong class="purple">must</strong> be the last subpass in a subpass dependency chain</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-flags-03344" href="#VUID-VkSubpassDescription-flags-03344"></a> <span class="vuid">VUID-VkSubpassDescription-flags-03344</span><br>

If <code>flags</code> includes
<code>VK_SUBPASS_DESCRIPTION_FRAGMENT_REGION_BIT_QCOM</code>, then the sample
count of the input attachments <strong class="purple">must</strong> equal <code>rasterizationSamples</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-flags-03345" href="#VUID-VkSubpassDescription-flags-03345"></a> <span class="vuid">VUID-VkSubpassDescription-flags-03345</span><br>

If <code>flags</code> includes
<code>VK_SUBPASS_DESCRIPTION_FRAGMENT_REGION_BIT_QCOM</code>, and if
<code>sampleShadingEnable</code> is enabled (explicitly or implicitly) then
<code>minSampleShading</code> <strong class="purple">must</strong> equal 0.0</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-pInputAttachments-02868" href="#VUID-VkSubpassDescription-pInputAttachments-02868"></a> <span class="vuid">VUID-VkSubpassDescription-pInputAttachments-02868</span><br>

If the render pass is created with
<code>VK_RENDER_PASS_CREATE_TRANSFORM_BIT_QCOM</code> each of the elements of
<code>pInputAttachments</code> <strong class="purple">must</strong> be <code>VK_ATTACHMENT_UNUSED</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-pDepthStencilAttachment-04438" href="#VUID-VkSubpassDescription-pDepthStencilAttachment-04438"></a> <span class="vuid">VUID-VkSubpassDescription-pDepthStencilAttachment-04438</span><br>

<code>pDepthStencilAttachment</code> and <code>pColorAttachments</code> must not
contain references to the same attachment</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSubpassDescription-flags-parameter" href="#VUID-VkSubpassDescription-flags-parameter"></a> <span class="vuid">VUID-VkSubpassDescription-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="#VkSubpassDescriptionFlagBits">VkSubpassDescriptionFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-pipelineBindPoint-parameter" href="#VUID-VkSubpassDescription-pipelineBindPoint-parameter"></a> <span class="vuid">VUID-VkSubpassDescription-pipelineBindPoint-parameter</span><br>
 <code>pipelineBindPoint</code> <strong class="purple">must</strong> be a valid <a href="chap11.html#VkPipelineBindPoint">VkPipelineBindPoint</a> value</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-pInputAttachments-parameter" href="#VUID-VkSubpassDescription-pInputAttachments-parameter"></a> <span class="vuid">VUID-VkSubpassDescription-pInputAttachments-parameter</span><br>
 If <code>inputAttachmentCount</code> is not <code>0</code>, <code>pInputAttachments</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>inputAttachmentCount</code> valid <a href="#VkAttachmentReference">VkAttachmentReference</a> structures</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-pColorAttachments-parameter" href="#VUID-VkSubpassDescription-pColorAttachments-parameter"></a> <span class="vuid">VUID-VkSubpassDescription-pColorAttachments-parameter</span><br>
 If <code>colorAttachmentCount</code> is not <code>0</code>, <code>pColorAttachments</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>colorAttachmentCount</code> valid <a href="#VkAttachmentReference">VkAttachmentReference</a> structures</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-pResolveAttachments-parameter" href="#VUID-VkSubpassDescription-pResolveAttachments-parameter"></a> <span class="vuid">VUID-VkSubpassDescription-pResolveAttachments-parameter</span><br>
 If <code>colorAttachmentCount</code> is not <code>0</code>, and <code>pResolveAttachments</code> is not <code>NULL</code>, <code>pResolveAttachments</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>colorAttachmentCount</code> valid <a href="#VkAttachmentReference">VkAttachmentReference</a> structures</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-pDepthStencilAttachment-parameter" href="#VUID-VkSubpassDescription-pDepthStencilAttachment-parameter"></a> <span class="vuid">VUID-VkSubpassDescription-pDepthStencilAttachment-parameter</span><br>
 If <code>pDepthStencilAttachment</code> is not <code>NULL</code>, <code>pDepthStencilAttachment</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkAttachmentReference">VkAttachmentReference</a> structure</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription-pPreserveAttachments-parameter" href="#VUID-VkSubpassDescription-pPreserveAttachments-parameter"></a> <span class="vuid">VUID-VkSubpassDescription-pPreserveAttachments-parameter</span><br>
 If <code>preserveAttachmentCount</code> is not <code>0</code>, <code>pPreserveAttachments</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>preserveAttachmentCount</code> <code>uint32_t</code> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in <a href="#VkSubpassDescription">VkSubpassDescription</a>::<code>flags</code>,
specifying usage of the subpass, are:</p>
</div>
<div id="VkSubpassDescriptionFlagBits" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkSubpassDescriptionFlagBits {
  <span class="comment">// Provided by VK_NVX_multiview_per_view_attributes</span>
    VK_SUBPASS_DESCRIPTION_PER_VIEW_ATTRIBUTES_BIT_NVX = <span class="hex">0x00000001</span>,
  <span class="comment">// Provided by VK_NVX_multiview_per_view_attributes</span>
    VK_SUBPASS_DESCRIPTION_PER_VIEW_POSITION_X_ONLY_BIT_NVX = <span class="hex">0x00000002</span>,
  <span class="comment">// Provided by VK_QCOM_render_pass_shader_resolve</span>
    VK_SUBPASS_DESCRIPTION_FRAGMENT_REGION_BIT_QCOM = <span class="hex">0x00000004</span>,
  <span class="comment">// Provided by VK_QCOM_render_pass_shader_resolve</span>
    VK_SUBPASS_DESCRIPTION_SHADER_RESOLVE_BIT_QCOM = <span class="hex">0x00000008</span>,
} VkSubpassDescriptionFlagBits;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUBPASS_DESCRIPTION_PER_VIEW_ATTRIBUTES_BIT_NVX</code> specifies that
shaders compiled for this subpass write the attributes for all views in
a single invocation of each vertex processing stage.
All pipelines compiled against a subpass that includes this bit <strong class="purple">must</strong>
write per-view attributes to the <code>*PerViewNV[]</code> shader outputs, in
addition to the non-per-view (e.g. <code>Position</code>) outputs.</p>
</li>
<li>
<p><code>VK_SUBPASS_DESCRIPTION_PER_VIEW_POSITION_X_ONLY_BIT_NVX</code> specifies
that shaders compiled for this subpass use per-view positions which only
differ in value in the x component.
Per-view viewport mask <strong class="purple">can</strong> also be used.</p>
</li>
<li>
<p><code>VK_SUBPASS_DESCRIPTION_FRAGMENT_REGION_BIT_QCOM</code> specifies that the
framebuffer region is the fragment region, that is, the minimum region
dependencies are by pixel rather than by sample, such that any fragment
shader invocation <strong class="purple">can</strong> access any sample associated with that fragment
shader invocation.</p>
</li>
<li>
<p><code>VK_SUBPASS_DESCRIPTION_SHADER_RESOLVE_BIT_QCOM</code> specifies that the
subpass performs shader resolve operations.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>Shader resolve operations allow for custom resolve operations, but
overdrawing pixels <strong class="purple">may</strong> have a performance and/or power cost.
Furthermore, since the content of any depth stencil attachment or color
attachment is undefined at the begining of a shader resolve subpass, any
depth testing, stencil testing, or blending operation which sources these
undefined values also has undefined result value.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkSubpassDescriptionFlags" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="keyword">typedef</span> VkFlags VkSubpassDescriptionFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkSubpassDescriptionFlags</code> is a bitmask type for setting a mask of zero
or more <a href="#VkSubpassDescriptionFlagBits">VkSubpassDescriptionFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAttachmentReference</code> structure is defined as:</p>
</div>
<div id="VkAttachmentReference" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkAttachmentReference {
    uint32_t         attachment;
    VkImageLayout    layout;
} VkAttachmentReference;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>attachment</code> is either an integer value identifying an attachment at
the corresponding index in
<a href="#VkRenderPassCreateInfo">VkRenderPassCreateInfo</a>::<code>pAttachments</code>, or
<code>VK_ATTACHMENT_UNUSED</code> to signify that this attachment is not used.</p>
</li>
<li>
<p><code>layout</code> is a <a href="chap13.html#VkImageLayout">VkImageLayout</a> value specifying the layout the
attachment uses during the subpass.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAttachmentReference-layout-00857" href="#VUID-VkAttachmentReference-layout-00857"></a> <span class="vuid">VUID-VkAttachmentReference-layout-00857</span><br>

If <code>attachment</code> is not <code>VK_ATTACHMENT_UNUSED</code>, <code>layout</code>
<strong class="purple">must</strong> not be <code>VK_IMAGE_LAYOUT_UNDEFINED</code>,
<code>VK_IMAGE_LAYOUT_PREINITIALIZED</code>,
<code>VK_IMAGE_LAYOUT_PRESENT_SRC_KHR</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAttachmentReference-layout-parameter" href="#VUID-VkAttachmentReference-layout-parameter"></a> <span class="vuid">VUID-VkAttachmentReference-layout-parameter</span><br>
 <code>layout</code> <strong class="purple">must</strong> be a valid <a href="chap13.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkSubpassDependency</code> structure is defined as:</p>
</div>
<div id="VkSubpassDependency" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkSubpassDependency {
    uint32_t                srcSubpass;
    uint32_t                dstSubpass;
    VkPipelineStageFlags    srcStageMask;
    VkPipelineStageFlags    dstStageMask;
    VkAccessFlags           srcAccessMask;
    VkAccessFlags           dstAccessMask;
    VkDependencyFlags       dependencyFlags;
} VkSubpassDependency;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>srcSubpass</code> is the subpass index of the first subpass in the
dependency, or <code>VK_SUBPASS_EXTERNAL</code>.</p>
</li>
<li>
<p><code>dstSubpass</code> is the subpass index of the second subpass in the
dependency, or <code>VK_SUBPASS_EXTERNAL</code>.</p>
</li>
<li>
<p><code>srcStageMask</code> is a bitmask of <a href="chap8.html#VkPipelineStageFlagBits">VkPipelineStageFlagBits</a>
specifying the <a href="chap8.html#synchronization-pipeline-stages-masks">source stage
mask</a>.</p>
</li>
<li>
<p><code>dstStageMask</code> is a bitmask of <a href="chap8.html#VkPipelineStageFlagBits">VkPipelineStageFlagBits</a>
specifying the <a href="chap8.html#synchronization-pipeline-stages-masks">destination
stage mask</a></p>
</li>
<li>
<p><code>srcAccessMask</code> is a bitmask of <a href="chap8.html#VkAccessFlagBits">VkAccessFlagBits</a> specifying a
<a href="chap8.html#synchronization-access-masks">source access mask</a>.</p>
</li>
<li>
<p><code>dstAccessMask</code> is a bitmask of <a href="chap8.html#VkAccessFlagBits">VkAccessFlagBits</a> specifying a
<a href="chap8.html#synchronization-access-masks">destination access mask</a>.</p>
</li>
<li>
<p><code>dependencyFlags</code> is a bitmask of <a href="chap8.html#VkDependencyFlagBits">VkDependencyFlagBits</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>srcSubpass</code> is equal to <code>dstSubpass</code> then the
<a href="#VkSubpassDependency">VkSubpassDependency</a> describes a
<a href="chap8.html#synchronization-pipeline-barriers-subpass-self-dependencies">subpass
self-dependency</a>, and only constrains the pipeline barriers allowed within
a subpass instance.
Otherwise, when a render pass instance which includes a subpass dependency
is submitted to a queue, it defines a memory dependency between the
subpasses identified by <code>srcSubpass</code> and <code>dstSubpass</code>.</p>
</div>
<div class="paragraph">
<p>If <code>srcSubpass</code> is equal to <code>VK_SUBPASS_EXTERNAL</code>, the first
<a href="chap8.html#synchronization-dependencies-scopes">synchronization scope</a> includes
commands that occur earlier in <a href="chap8.html#synchronization-submission-order">submission
order</a> than the <a href="#vkCmdBeginRenderPass">vkCmdBeginRenderPass</a> used to begin the render pass
instance.
Otherwise, the first set of commands includes all commands submitted as part
of the subpass instance identified by <code>srcSubpass</code> and any load, store
or multisample resolve operations on attachments used in <code>srcSubpass</code>.
In either case, the first synchronization scope is limited to operations on
the pipeline stages determined by the
<a href="chap8.html#synchronization-pipeline-stages-masks">source stage mask</a> specified by
<code>srcStageMask</code>.</p>
</div>
<div class="paragraph">
<p>If <code>dstSubpass</code> is equal to <code>VK_SUBPASS_EXTERNAL</code>, the second
<a href="chap8.html#synchronization-dependencies-scopes">synchronization scope</a> includes
commands that occur later in <a href="chap8.html#synchronization-submission-order">submission
order</a> than the <a href="#vkCmdEndRenderPass">vkCmdEndRenderPass</a> used to end the render pass
instance.
Otherwise, the second set of commands includes all commands submitted as
part of the subpass instance identified by <code>dstSubpass</code> and any load,
store or multisample resolve operations on attachments used in
<code>dstSubpass</code>.
In either case, the second synchronization scope is limited to operations on
the pipeline stages determined by the
<a href="chap8.html#synchronization-pipeline-stages-masks">destination stage mask</a> specified
by <code>dstStageMask</code>.</p>
</div>
<div class="paragraph">
<p>The first <a href="chap8.html#synchronization-dependencies-access-scopes">access scope</a> is
limited to access in the pipeline stages determined by the
<a href="chap8.html#synchronization-pipeline-stages-masks">source stage mask</a> specified by
<code>srcStageMask</code>.
It is also limited to access types in the <a href="chap8.html#synchronization-access-masks">source access mask</a> specified by <code>srcAccessMask</code>.</p>
</div>
<div class="paragraph">
<p>The second <a href="chap8.html#synchronization-dependencies-access-scopes">access scope</a> is
limited to access in the pipeline stages determined by the
<a href="chap8.html#synchronization-pipeline-stages-masks">destination stage mask</a> specified
by <code>dstStageMask</code>.
It is also limited to access types in the <a href="chap8.html#synchronization-access-masks">destination access mask</a> specified by <code>dstAccessMask</code>.</p>
</div>
<div class="paragraph">
<p>The <a href="chap8.html#synchronization-dependencies-available-and-visible">availability and
visibility operations</a> defined by a subpass dependency affect the execution
of <a href="#renderpass-layout-transitions">image layout transitions</a> within the
render pass.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>For non-attachment resources, the memory dependency expressed by subpass
dependency is nearly identical to that of a <a href="chap8.html#VkMemoryBarrier">VkMemoryBarrier</a> (with
matching <code>srcAccessMask</code> and <code>dstAccessMask</code> parameters) submitted
as a part of a <a href="chap8.html#vkCmdPipelineBarrier">vkCmdPipelineBarrier</a> (with matching <code>srcStageMask</code>
and <code>dstStageMask</code> parameters).
The only difference being that its scopes are limited to the identified
subpasses rather than potentially affecting everything before and after.</p>
</div>
<div class="paragraph">
<p>For attachments however, subpass dependencies work more like a
<a href="chap8.html#VkImageMemoryBarrier">VkImageMemoryBarrier</a> defined similarly to the <a href="chap8.html#VkMemoryBarrier">VkMemoryBarrier</a>
above, the queue family indices set to <code>VK_QUEUE_FAMILY_IGNORED</code>, and
layouts as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The equivalent to <code>oldLayout</code> is the attachments layout according
to the subpass description for <code>srcSubpass</code>.</p>
</li>
<li>
<p>The equivalent to <code>newLayout</code> is the attachments layout according
to the subpass description for <code>dstSubpass</code>.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSubpassDependency-srcStageMask-00860" href="#VUID-VkSubpassDependency-srcStageMask-00860"></a> <span class="vuid">VUID-VkSubpassDependency-srcStageMask-00860</span><br>

If the <a href="chap41.html#features-geometryShader">geometry shaders</a> feature is not
enabled, <code>srcStageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_GEOMETRY_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-dstStageMask-00861" href="#VUID-VkSubpassDependency-dstStageMask-00861"></a> <span class="vuid">VUID-VkSubpassDependency-dstStageMask-00861</span><br>

If the <a href="chap41.html#features-geometryShader">geometry shaders</a> feature is not
enabled, <code>dstStageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_GEOMETRY_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-srcStageMask-00862" href="#VUID-VkSubpassDependency-srcStageMask-00862"></a> <span class="vuid">VUID-VkSubpassDependency-srcStageMask-00862</span><br>

If the <a href="chap41.html#features-tessellationShader">tessellation shaders</a> feature is
not enabled, <code>srcStageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_TESSELLATION_CONTROL_SHADER_BIT</code> or
<code>VK_PIPELINE_STAGE_TESSELLATION_EVALUATION_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-dstStageMask-00863" href="#VUID-VkSubpassDependency-dstStageMask-00863"></a> <span class="vuid">VUID-VkSubpassDependency-dstStageMask-00863</span><br>

If the <a href="chap41.html#features-tessellationShader">tessellation shaders</a> feature is
not enabled, <code>dstStageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_TESSELLATION_CONTROL_SHADER_BIT</code> or
<code>VK_PIPELINE_STAGE_TESSELLATION_EVALUATION_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-srcSubpass-00864" href="#VUID-VkSubpassDependency-srcSubpass-00864"></a> <span class="vuid">VUID-VkSubpassDependency-srcSubpass-00864</span><br>

<code>srcSubpass</code> <strong class="purple">must</strong> be less than or equal to <code>dstSubpass</code>, unless
one of them is <code>VK_SUBPASS_EXTERNAL</code>, to avoid cyclic dependencies
and ensure a valid execution order</p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-srcSubpass-00865" href="#VUID-VkSubpassDependency-srcSubpass-00865"></a> <span class="vuid">VUID-VkSubpassDependency-srcSubpass-00865</span><br>

<code>srcSubpass</code> and <code>dstSubpass</code> <strong class="purple">must</strong> not both be equal to
<code>VK_SUBPASS_EXTERNAL</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-srcSubpass-00867" href="#VUID-VkSubpassDependency-srcSubpass-00867"></a> <span class="vuid">VUID-VkSubpassDependency-srcSubpass-00867</span><br>

If <code>srcSubpass</code> is equal to <code>dstSubpass</code> and not all of the
stages in <code>srcStageMask</code> and <code>dstStageMask</code> are
<a href="chap8.html#synchronization-framebuffer-regions">framebuffer-space stages</a>, the
<a href="chap8.html#synchronization-pipeline-stages-order">logically latest</a> pipeline
stage in <code>srcStageMask</code> <strong class="purple">must</strong> be
<a href="chap8.html#synchronization-pipeline-stages-order">logically earlier</a> than or
equal to the <a href="chap8.html#synchronization-pipeline-stages-order">logically
earliest</a> pipeline stage in <code>dstStageMask</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-srcAccessMask-00868" href="#VUID-VkSubpassDependency-srcAccessMask-00868"></a> <span class="vuid">VUID-VkSubpassDependency-srcAccessMask-00868</span><br>

Any access flag included in <code>srcAccessMask</code> <strong class="purple">must</strong> be supported by
one of the pipeline stages in <code>srcStageMask</code>, as specified in the
<a href="chap8.html#synchronization-access-types-supported">table of supported access
types</a></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-dstAccessMask-00869" href="#VUID-VkSubpassDependency-dstAccessMask-00869"></a> <span class="vuid">VUID-VkSubpassDependency-dstAccessMask-00869</span><br>

Any access flag included in <code>dstAccessMask</code> <strong class="purple">must</strong> be supported by
one of the pipeline stages in <code>dstStageMask</code>, as specified in the
<a href="chap8.html#synchronization-access-types-supported">table of supported access
types</a></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-srcSubpass-02243" href="#VUID-VkSubpassDependency-srcSubpass-02243"></a> <span class="vuid">VUID-VkSubpassDependency-srcSubpass-02243</span><br>

If <code>srcSubpass</code> equals <code>dstSubpass</code>, and <code>srcStageMask</code> and
<code>dstStageMask</code> both include a
<a href="chap8.html#synchronization-framebuffer-regions">framebuffer-space stage</a>, then
<code>dependencyFlags</code> <strong class="purple">must</strong> include <code>VK_DEPENDENCY_BY_REGION_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-dependencyFlags-02520" href="#VUID-VkSubpassDependency-dependencyFlags-02520"></a> <span class="vuid">VUID-VkSubpassDependency-dependencyFlags-02520</span><br>

If <code>dependencyFlags</code> includes <code>VK_DEPENDENCY_VIEW_LOCAL_BIT</code>,
<code>srcSubpass</code> <strong class="purple">must</strong> not be equal to <code>VK_SUBPASS_EXTERNAL</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-dependencyFlags-02521" href="#VUID-VkSubpassDependency-dependencyFlags-02521"></a> <span class="vuid">VUID-VkSubpassDependency-dependencyFlags-02521</span><br>

If <code>dependencyFlags</code> includes <code>VK_DEPENDENCY_VIEW_LOCAL_BIT</code>,
<code>dstSubpass</code> <strong class="purple">must</strong> not be equal to <code>VK_SUBPASS_EXTERNAL</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-srcSubpass-00872" href="#VUID-VkSubpassDependency-srcSubpass-00872"></a> <span class="vuid">VUID-VkSubpassDependency-srcSubpass-00872</span><br>

If <code>srcSubpass</code> equals <code>dstSubpass</code> and that subpass has more
than one bit set in the view mask, then <code>dependencyFlags</code> <strong class="purple">must</strong>
include <code>VK_DEPENDENCY_VIEW_LOCAL_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-srcStageMask-02099" href="#VUID-VkSubpassDependency-srcStageMask-02099"></a> <span class="vuid">VUID-VkSubpassDependency-srcStageMask-02099</span><br>

If the <a href="chap41.html#features-meshShader">mesh shaders</a> feature is not enabled,
<code>srcStageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_MESH_SHADER_BIT_NV</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-srcStageMask-02100" href="#VUID-VkSubpassDependency-srcStageMask-02100"></a> <span class="vuid">VUID-VkSubpassDependency-srcStageMask-02100</span><br>

If the <a href="chap41.html#features-taskShader">task shaders</a> feature is not enabled,
<code>srcStageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_TASK_SHADER_BIT_NV</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-dstStageMask-02101" href="#VUID-VkSubpassDependency-dstStageMask-02101"></a> <span class="vuid">VUID-VkSubpassDependency-dstStageMask-02101</span><br>

If the <a href="chap41.html#features-meshShader">mesh shaders</a> feature is not enabled,
<code>dstStageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_MESH_SHADER_BIT_NV</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-dstStageMask-02102" href="#VUID-VkSubpassDependency-dstStageMask-02102"></a> <span class="vuid">VUID-VkSubpassDependency-dstStageMask-02102</span><br>

If the <a href="chap41.html#features-taskShader">task shaders</a> feature is not enabled,
<code>dstStageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_TASK_SHADER_BIT_NV</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSubpassDependency-srcStageMask-parameter" href="#VUID-VkSubpassDependency-srcStageMask-parameter"></a> <span class="vuid">VUID-VkSubpassDependency-srcStageMask-parameter</span><br>
 <code>srcStageMask</code> <strong class="purple">must</strong> be a valid combination of <a href="chap8.html#VkPipelineStageFlagBits">VkPipelineStageFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-srcStageMask-requiredbitmask" href="#VUID-VkSubpassDependency-srcStageMask-requiredbitmask"></a> <span class="vuid">VUID-VkSubpassDependency-srcStageMask-requiredbitmask</span><br>
 <code>srcStageMask</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-dstStageMask-parameter" href="#VUID-VkSubpassDependency-dstStageMask-parameter"></a> <span class="vuid">VUID-VkSubpassDependency-dstStageMask-parameter</span><br>
 <code>dstStageMask</code> <strong class="purple">must</strong> be a valid combination of <a href="chap8.html#VkPipelineStageFlagBits">VkPipelineStageFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-dstStageMask-requiredbitmask" href="#VUID-VkSubpassDependency-dstStageMask-requiredbitmask"></a> <span class="vuid">VUID-VkSubpassDependency-dstStageMask-requiredbitmask</span><br>
 <code>dstStageMask</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-srcAccessMask-parameter" href="#VUID-VkSubpassDependency-srcAccessMask-parameter"></a> <span class="vuid">VUID-VkSubpassDependency-srcAccessMask-parameter</span><br>
 <code>srcAccessMask</code> <strong class="purple">must</strong> be a valid combination of <a href="chap8.html#VkAccessFlagBits">VkAccessFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-dstAccessMask-parameter" href="#VUID-VkSubpassDependency-dstAccessMask-parameter"></a> <span class="vuid">VUID-VkSubpassDependency-dstAccessMask-parameter</span><br>
 <code>dstAccessMask</code> <strong class="purple">must</strong> be a valid combination of <a href="chap8.html#VkAccessFlagBits">VkAccessFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency-dependencyFlags-parameter" href="#VUID-VkSubpassDependency-dependencyFlags-parameter"></a> <span class="vuid">VUID-VkSubpassDependency-dependencyFlags-parameter</span><br>
 <code>dependencyFlags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap8.html#VkDependencyFlagBits">VkDependencyFlagBits</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>When multiview is enabled, the execution of the multiple views of one
subpass <strong class="purple">may</strong> not occur simultaneously or even back-to-back, and rather <strong class="purple">may</strong>
be interleaved with the execution of other subpasses.
The load and store operations apply to attachments on a per-view basis.
For example, an attachment using <code>VK_ATTACHMENT_LOAD_OP_CLEAR</code> will have
each view cleared on first use, but the first use of one view may be
temporally distant from the first use of another view.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>A good mental model for multiview is to think of a multiview subpass as if
it were a collection of individual (per-view) subpasses that are logically
grouped together and described as a single multiview subpass in the API.
Similarly, a multiview attachment can be thought of like several individual
attachments that happen to be layers in a single image.
A view-local dependency between two multiview subpasses acts like a set of
one-to-one dependencies between corresponding pairs of per-view subpasses.
A view-global dependency between two multiview subpasses acts like a set of
<span class="eq">N  M</span> dependencies between all pairs of per-view subpasses in
the source and destination.
Thus, it is a more compact representation which also makes clear the
commonality and reuse that is present between views in a subpass.
This interpretation motivates the answers to questions like when does the
load op apply - it is on the first use of each view of an attachment, as
if each view were a separate attachment.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If any two subpasses of a render pass activate transform feedback to the
same bound transform feedback buffers, a subpass dependency <strong class="purple">must</strong> be
included (either directly or via some intermediate subpasses) between them.</p>
</div>
<div class="paragraph">
<p>If there is no subpass dependency from <code>VK_SUBPASS_EXTERNAL</code> to the
first subpass that uses an attachment, then an implicit subpass dependency
exists from <code>VK_SUBPASS_EXTERNAL</code> to the first subpass it is used in.
The implicit subpass dependency only exists if there exists an automatic
layout transition away from <code>initialLayout</code>.
The subpass dependency operates as if defined with the following parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c">VkSubpassDependency implicitDependency = {
    .srcSubpass = VK_SUBPASS_EXTERNAL;
    .dstSubpass = firstSubpass; <span class="comment">// First subpass attachment is used in</span>
    .srcStageMask = VK_PIPELINE_STAGE_TOP_OF_PIPE_BIT;
    .dstStageMask = VK_PIPELINE_STAGE_ALL_COMMANDS_BIT;
    .srcAccessMask = <span class="integer">0</span>;
    .dstAccessMask = VK_ACCESS_INPUT_ATTACHMENT_READ_BIT |
                     VK_ACCESS_COLOR_ATTACHMENT_READ_BIT |
                     VK_ACCESS_COLOR_ATTACHMENT_WRITE_BIT |
                     VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_READ_BIT |
                     VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_WRITE_BIT;
    .dependencyFlags = <span class="integer">0</span>;
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similarly, if there is no subpass dependency from the last subpass that uses
an attachment to <code>VK_SUBPASS_EXTERNAL</code>, then an implicit subpass
dependency exists from the last subpass it is used in to
<code>VK_SUBPASS_EXTERNAL</code>.
The implicit subpass dependency only exists if there exists an automatic
layout transition into <code>finalLayout</code>.
The subpass dependency operates as if defined with the following parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c">VkSubpassDependency implicitDependency = {
    .srcSubpass = lastSubpass; <span class="comment">// Last subpass attachment is used in</span>
    .dstSubpass = VK_SUBPASS_EXTERNAL;
    .srcStageMask = VK_PIPELINE_STAGE_ALL_COMMANDS_BIT;
    .dstStageMask = VK_PIPELINE_STAGE_BOTTOM_OF_PIPE_BIT;
    .srcAccessMask = VK_ACCESS_COLOR_ATTACHMENT_WRITE_BIT |
                     VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_WRITE_BIT;
    .dstAccessMask = <span class="integer">0</span>;
    .dependencyFlags = <span class="integer">0</span>;
};</code></pre>
</div>
</div>
<div id="renderpass-layout-transitions" class="paragraph">
<p>As subpasses <strong class="purple">may</strong> overlap or execute out of order with regards to other
subpasses unless a subpass dependency chain describes otherwise, the layout
transitions required between subpasses <strong class="purple">cannot</strong> be known to an application.
Instead, an application provides the layout that each attachment <strong class="purple">must</strong> be in
at the start and end of a render pass, and the layout it <strong class="purple">must</strong> be in during
each subpass it is used in.
The implementation then <strong class="purple">must</strong> execute layout transitions between subpasses
in order to guarantee that the images are in the layouts required by each
subpass, and in the final layout at the end of the render pass.</p>
</div>
<div class="paragraph">
<p>Automatic layout transitions apply to the entire image subresource attached
to the framebuffer.
If the attachment view is a 2D or 2D array view of a 3D image, even if the
attachment view only refers to a subset of the slices of the selected mip
level of the 3D image, automatic layout transitions apply to the entire
subresource referenced which is the entire mip level in this case.</p>
</div>
<div class="paragraph">
<p>Automatic layout transitions away from the layout used in a subpass
happen-after the availability operations for all dependencies with that
subpass as the <code>srcSubpass</code>.</p>
</div>
<div class="paragraph">
<p>Automatic layout transitions into the layout used in a subpass happen-before
the visibility operations for all dependencies with that subpass as the
<code>dstSubpass</code>.</p>
</div>
<div class="paragraph">
<p>Automatic layout transitions away from <code>initialLayout</code> happens-after the
availability operations for all dependencies with a <code>srcSubpass</code> equal
to <code>VK_SUBPASS_EXTERNAL</code>, where <code>dstSubpass</code> uses the attachment
that will be transitioned.
For attachments created with <code>VK_ATTACHMENT_DESCRIPTION_MAY_ALIAS_BIT</code>,
automatic layout transitions away from <code>initialLayout</code> happen-after the
availability operations for all dependencies with a <code>srcSubpass</code> equal
to <code>VK_SUBPASS_EXTERNAL</code>, where <code>dstSubpass</code> uses any aliased
attachment.</p>
</div>
<div class="paragraph">
<p>Automatic layout transitions into <code>finalLayout</code> happens-before the
visibility operations for all dependencies with a <code>dstSubpass</code> equal to
<code>VK_SUBPASS_EXTERNAL</code>, where <code>srcSubpass</code> uses the attachment that
will be transitioned.
For attachments created with <code>VK_ATTACHMENT_DESCRIPTION_MAY_ALIAS_BIT</code>,
automatic layout transitions into <code>finalLayout</code> happen-before the
visibility operations for all dependencies with a <code>dstSubpass</code> equal to
<code>VK_SUBPASS_EXTERNAL</code>, where <code>srcSubpass</code> uses any aliased
attachment.</p>
</div>
<div class="paragraph">
<p>The image layout of the depth aspect of a depth/stencil attachment referring
to an image created with
<code>VK_IMAGE_CREATE_SAMPLE_LOCATIONS_COMPATIBLE_DEPTH_BIT_EXT</code> is dependent
on the last sample locations used to render to the attachment, thus
automatic layout transitions use the sample locations state specified in
<a href="#VkRenderPassSampleLocationsBeginInfoEXT">VkRenderPassSampleLocationsBeginInfoEXT</a>.</p>
</div>
<div class="paragraph">
<p>Automatic layout transitions of an attachment referring to a depth/stencil
image created with
<code>VK_IMAGE_CREATE_SAMPLE_LOCATIONS_COMPATIBLE_DEPTH_BIT_EXT</code> use the
sample locations the image subresource range referenced by the attachment
was last rendered with.
If the current render pass does not use the attachment as a depth/stencil
attachment in any subpass that happens-before, the automatic layout
transition uses the sample locations state specified in the
<code>sampleLocationsInfo</code> member of the element of the
<code>VkRenderPassSampleLocationsBeginInfoEXT</code>::<code>pAttachmentInitialSampleLocations</code>
array for which the <code>attachmentIndex</code> member equals the attachment index
of the attachment, if one is specified.
Otherwise, the automatic layout transition uses the sample locations state
specified in the <code>sampleLocationsInfo</code> member of the element of the
<code>VkRenderPassSampleLocationsBeginInfoEXT</code>::<code>pPostSubpassSampleLocations</code>
array for which the <code>subpassIndex</code> member equals the index of the
subpass that last used the attachment as a depth/stencil attachment, if one
is specified.</p>
</div>
<div class="paragraph">
<p>If no sample locations state has been specified for an automatic layout
transition performed on an attachment referring to a depth/stencil image
created with <code>VK_IMAGE_CREATE_SAMPLE_LOCATIONS_COMPATIBLE_DEPTH_BIT_EXT</code>
the contents of the depth aspect of the depth/stencil attachment become
undefined as if the layout of the attachment was transitioned from the
<code>VK_IMAGE_LAYOUT_UNDEFINED</code> layout.</p>
</div>
<div class="paragraph">
<p>If two subpasses use the same attachment, and both subpasses use the
attachment in a read-only layout, no subpass dependency needs to be
specified between those subpasses.
If an implementation treats those layouts separately, it <strong class="purple">must</strong> insert an
implicit subpass dependency between those subpasses to separate the uses in
each layout.
The subpass dependency operates as if defined with the following parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c"><span class="comment">// Used for input attachments</span>
VkPipelineStageFlags inputAttachmentStages = VK_PIPELINE_STAGE_FRAGMENT_SHADER_BIT;
VkAccessFlags inputAttachmentDstAccess = VK_ACCESS_INPUT_ATTACHMENT_READ_BIT;

<span class="comment">// Used for depth/stencil attachments</span>
VkPipelineStageFlags depthStencilAttachmentStages = VK_PIPELINE_STAGE_EARLY_FRAGMENT_TESTS_BIT | VK_PIPELINE_STAGE_LATE_FRAGMENT_TESTS_BIT;
VkAccessFlags depthStencilAttachmentDstAccess = VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_READ_BIT;

VkSubpassDependency implicitDependency = {
    .srcSubpass = firstSubpass;
    .dstSubpass = secondSubpass;
    .srcStageMask = inputAttachmentStages | depthStencilAttachmentStages;
    .dstStageMask = inputAttachmentStages | depthStencilAttachmentStages;
    .srcAccessMask = <span class="integer">0</span>;
    .dstAccessMask = inputAttachmentDstAccess | depthStencilAttachmentDstAccess;
    .dependencyFlags = <span class="integer">0</span>;
};</code></pre>
</div>
</div>
<div id="renderpass-feedbackloop" class="paragraph">
<p>If a subpass uses the same attachment as both an input attachment and either
a color attachment or a depth/stencil attachment, writes via the color or
depth/stencil attachment are not automatically made visible to reads via the
input attachment, causing a <em>feedback loop</em>, except in any of the following
conditions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the color components or depth/stencil components read by the input
attachment are mutually exclusive with the components written by the
color or depth/stencil attachments, then there is no feedback loop.
This requires the graphics pipelines used by the subpass to disable
writes to color components that are read as inputs via the
<code>colorWriteMask</code>, and to disable writes to depth/stencil components
that are read as inputs via <code>depthWriteEnable</code> or
<code>stencilTestEnable</code>.</p>
</li>
<li>
<p>If the attachment is used as an input attachment and depth/stencil
attachment only, and the depth/stencil attachment is not written to.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Rendering within a subpass that contains a feedback loop creates a
<a href="chap47.html#memory-model-access-data-race">data race</a>, except in the following cases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If a memory dependency is inserted between when the attachment is
written and when it is subsequently read by later fragments.
<a href="chap8.html#synchronization-pipeline-barriers">Pipeline barriers</a> expressing a
<a href="chap8.html#synchronization-pipeline-barriers-subpass-self-dependencies">subpass
self-dependency</a> are the only way to achieve this, and one <strong class="purple">must</strong> be
inserted every time a fragment will read values at a particular sample
(x, y, layer, sample) coordinate, if those values have been written
since the most recent pipeline barrier; or the since start of the
subpass if there have been no pipeline barriers since the start of the
subpass.</p>
</li>
</ul>
</div>
<div id="attachment-type-imagelayout" class="paragraph">
<p>Attachments have requirements for a valid image layout depending on the
usage</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An attachment used as an input attachment <strong class="purple">must</strong> be in the
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_GENERAL</code> layout.</p>
</li>
<li>
<p>An attachment used only as a color attachment <strong class="purple">must</strong> be in the
<code>VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code> layout.</p>
</li>
<li>
<p>An attachment used as both an input attachment and a color attachment
<strong class="purple">must</strong> be in the
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code> or
<code>VK_IMAGE_LAYOUT_GENERAL</code> layout.</p>
</li>
<li>
<p>An attachment used only as a depth/stencil attachment <strong class="purple">must</strong> be in the
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_GENERAL</code> layout.</p>
</li>
<li>
<p>An attachment used as an input attachment and depth/stencil attachment
<strong class="purple">must</strong> be in the
<code>VK_IMAGE_LAYOUT_SHARED_PRESENT_KHR</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_GENERAL</code> layout.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An attachment <strong class="purple">must</strong> not be used as both a depth/stencil attachment and a
color attachment.</p>
</div>
<div class="paragraph">
<p>A more extensible version of render pass creation is also defined below.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create a render pass, call:</p>
</div>
<div id="vkCreateRenderPass2KHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_create_renderpass2</span>
VkResult vkCreateRenderPass2KHR(
    VkDevice                                    device,
    <span class="directive">const</span> VkRenderPassCreateInfo2*              pCreateInfo,
    <span class="directive">const</span> VkAllocationCallbacks*                pAllocator,
    VkRenderPass*                               pRenderPass);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the render pass.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="#VkRenderPassCreateInfo2">VkRenderPassCreateInfo2</a>
structure describing the parameters of the render pass.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap12.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pRenderPass</code> is a pointer to a <a href="#VkRenderPass">VkRenderPass</a> handle in which
the resulting render pass object is returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This command is functionally identical to <a href="#vkCreateRenderPass">vkCreateRenderPass</a>, but
includes extensible sub-structures that include <code>sType</code> and <code>pNext</code>
parameters, allowing them to be more easily extended.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateRenderPass2-device-parameter" href="#VUID-vkCreateRenderPass2-device-parameter"></a> <span class="vuid">VUID-vkCreateRenderPass2-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateRenderPass2-pCreateInfo-parameter" href="#VUID-vkCreateRenderPass2-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateRenderPass2-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkRenderPassCreateInfo2">VkRenderPassCreateInfo2</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateRenderPass2-pAllocator-parameter" href="#VUID-vkCreateRenderPass2-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateRenderPass2-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateRenderPass2-pRenderPass-parameter" href="#VUID-vkCreateRenderPass2-pRenderPass-parameter"></a> <span class="vuid">VUID-vkCreateRenderPass2-pRenderPass-parameter</span><br>
 <code>pRenderPass</code> <strong class="purple">must</strong> be a valid pointer to a <a href="#VkRenderPass">VkRenderPass</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap4.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap4.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkRenderPassCreateInfo2</code> structure is defined as:</p>
</div>
<div id="VkRenderPassCreateInfo2" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">struct</span> VkRenderPassCreateInfo2 {
    VkStructureType                    sType;
    <span class="directive">const</span> <span class="directive">void</span>*                        pNext;
    VkRenderPassCreateFlags            flags;
    uint32_t                           attachmentCount;
    <span class="directive">const</span> VkAttachmentDescription2*    pAttachments;
    uint32_t                           subpassCount;
    <span class="directive">const</span> VkSubpassDescription2*       pSubpasses;
    uint32_t                           dependencyCount;
    <span class="directive">const</span> VkSubpassDependency2*        pDependencies;
    uint32_t                           correlatedViewMaskCount;
    <span class="directive">const</span> uint32_t*                    pCorrelatedViewMasks;
} VkRenderPassCreateInfo2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkRenderPassCreateInfo2KHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_create_renderpass2</span>
<span class="keyword">typedef</span> VkRenderPassCreateInfo2 VkRenderPassCreateInfo2KHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is reserved for future use.</p>
</li>
<li>
<p><code>attachmentCount</code> is the number of attachments used by this render
pass.</p>
</li>
<li>
<p><code>pAttachments</code> is a pointer to an array of <code>attachmentCount</code>
<a href="#VkAttachmentDescription2">VkAttachmentDescription2</a> structures describing the attachments
used by the render pass.</p>
</li>
<li>
<p><code>subpassCount</code> is the number of subpasses to create.</p>
</li>
<li>
<p><code>pSubpasses</code> is a pointer to an array of <code>subpassCount</code>
<a href="#VkSubpassDescription2">VkSubpassDescription2</a> structures describing each subpass.</p>
</li>
<li>
<p><code>dependencyCount</code> is the number of dependencies between pairs of
subpasses.</p>
</li>
<li>
<p><code>pDependencies</code> is a pointer to an array of <code>dependencyCount</code>
<a href="#VkSubpassDependency2">VkSubpassDependency2</a> structures describing dependencies between
pairs of subpasses.</p>
</li>
<li>
<p><code>correlatedViewMaskCount</code> is the number of correlation masks.</p>
</li>
<li>
<p><code>pCorrelatedViewMasks</code> is a pointer to an array of view masks
indicating sets of views that <strong class="purple">may</strong> be more efficient to render
concurrently.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Parameters defined by this structure with the same name as those in
<a href="#VkRenderPassCreateInfo">VkRenderPassCreateInfo</a> have the identical effect to those parameters;
the child structures are variants of those used in
<a href="#VkRenderPassCreateInfo">VkRenderPassCreateInfo</a> which add <code>sType</code> and <code>pNext</code>
parameters, allowing them to be extended.</p>
</div>
<div class="paragraph">
<p>If the <a href="#VkSubpassDescription2">VkSubpassDescription2</a>::<code>viewMask</code> member of any element of
<code>pSubpasses</code> is not zero, <em>multiview</em> functionality is considered to be
enabled for this render pass.</p>
</div>
<div class="paragraph">
<p><code>correlatedViewMaskCount</code> and <code>pCorrelatedViewMasks</code> have the same
effect as <a href="#VkRenderPassMultiviewCreateInfo">VkRenderPassMultiviewCreateInfo</a>::<code>correlationMaskCount</code>
and <a href="#VkRenderPassMultiviewCreateInfo">VkRenderPassMultiviewCreateInfo</a>::<code>pCorrelationMasks</code>,
respectively.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-None-03049" href="#VUID-VkRenderPassCreateInfo2-None-03049"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-None-03049</span><br>

If any two subpasses operate on attachments with overlapping ranges of
the same <code>VkDeviceMemory</code> object, and at least one subpass writes to
that area of <code>VkDeviceMemory</code>, a subpass dependency <strong class="purple">must</strong> be
included (either directly or via some intermediate subpasses) between
them</p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-attachment-03050" href="#VUID-VkRenderPassCreateInfo2-attachment-03050"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-attachment-03050</span><br>

If the <code>attachment</code> member of any element of
<code>pInputAttachments</code>, <code>pColorAttachments</code>,
<code>pResolveAttachments</code> or <code>pDepthStencilAttachment</code>, or the
attachment indexed by any element of <code>pPreserveAttachments</code> in any
given element of <code>pSubpasses</code> is bound to a range of a
<code>VkDeviceMemory</code> object that overlaps with any other attachment in
any subpass (including the same subpass), the
<code>VkAttachmentDescription2</code> structures describing them <strong class="purple">must</strong> include
<code>VK_ATTACHMENT_DESCRIPTION_MAY_ALIAS_BIT</code> in <code>flags</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-attachment-03051" href="#VUID-VkRenderPassCreateInfo2-attachment-03051"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-attachment-03051</span><br>

If the <code>attachment</code> member of any element of
<code>pInputAttachments</code>, <code>pColorAttachments</code>,
<code>pResolveAttachments</code> or <code>pDepthStencilAttachment</code>, or any
element of <code>pPreserveAttachments</code> in any given element of
<code>pSubpasses</code> is not <code>VK_ATTACHMENT_UNUSED</code>, it <strong class="purple">must</strong> be less
than <code>attachmentCount</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-pAttachments-02522" href="#VUID-VkRenderPassCreateInfo2-pAttachments-02522"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-pAttachments-02522</span><br>

For any member of <code>pAttachments</code> with a <code>loadOp</code> equal to
<code>VK_ATTACHMENT_LOAD_OP_CLEAR</code>, the first use of that attachment
<strong class="purple">must</strong> not specify a <code>layout</code> equal to
<code>VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-pAttachments-02523" href="#VUID-VkRenderPassCreateInfo2-pAttachments-02523"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-pAttachments-02523</span><br>

For any member of <code>pAttachments</code> with a <code>stencilLoadOp</code> equal to
<code>VK_ATTACHMENT_LOAD_OP_CLEAR</code>, the first use of that attachment
<strong class="purple">must</strong> not specify a <code>layout</code> equal to
<code>VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-pDependencies-03054" href="#VUID-VkRenderPassCreateInfo2-pDependencies-03054"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-pDependencies-03054</span><br>

For any element of <code>pDependencies</code>, if the <code>srcSubpass</code> is not
<code>VK_SUBPASS_EXTERNAL</code>, all stage flags included in the
<code>srcStageMask</code> member of that dependency <strong class="purple">must</strong> be a pipeline stage
supported by the <a href="chap8.html#synchronization-pipeline-stages-types">pipeline</a>
identified by the <code>pipelineBindPoint</code> member of the source subpass</p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-pDependencies-03055" href="#VUID-VkRenderPassCreateInfo2-pDependencies-03055"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-pDependencies-03055</span><br>

For any element of <code>pDependencies</code>, if the <code>dstSubpass</code> is not
<code>VK_SUBPASS_EXTERNAL</code>, all stage flags included in the
<code>dstStageMask</code> member of that dependency <strong class="purple">must</strong> be a pipeline stage
supported by the <a href="chap8.html#synchronization-pipeline-stages-types">pipeline</a>
identified by the <code>pipelineBindPoint</code> member of the destination
subpass</p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-pCorrelatedViewMasks-03056" href="#VUID-VkRenderPassCreateInfo2-pCorrelatedViewMasks-03056"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-pCorrelatedViewMasks-03056</span><br>

The set of bits included in any element of <code>pCorrelatedViewMasks</code>
<strong class="purple">must</strong> not overlap with the set of bits included in any other element of
<code>pCorrelatedViewMasks</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-viewMask-03057" href="#VUID-VkRenderPassCreateInfo2-viewMask-03057"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-viewMask-03057</span><br>

If the <a href="#VkSubpassDescription2">VkSubpassDescription2</a>::<code>viewMask</code> member of all
elements of <code>pSubpasses</code> is <code>0</code>, <code>correlatedViewMaskCount</code> <strong class="purple">must</strong>
be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-viewMask-03058" href="#VUID-VkRenderPassCreateInfo2-viewMask-03058"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-viewMask-03058</span><br>

The <a href="#VkSubpassDescription2">VkSubpassDescription2</a>::<code>viewMask</code> member of all elements
of <code>pSubpasses</code> <strong class="purple">must</strong> either all be <code>0</code>, or all not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-viewMask-03059" href="#VUID-VkRenderPassCreateInfo2-viewMask-03059"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-viewMask-03059</span><br>

If the <a href="#VkSubpassDescription2">VkSubpassDescription2</a>::<code>viewMask</code> member of all
elements of <code>pSubpasses</code> is <code>0</code>, the <code>dependencyFlags</code> member of
any element of <code>pDependencies</code> <strong class="purple">must</strong> not include
<code>VK_DEPENDENCY_VIEW_LOCAL_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-pDependencies-03060" href="#VUID-VkRenderPassCreateInfo2-pDependencies-03060"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-pDependencies-03060</span><br>

For any element of <code>pDependencies</code> where its <code>srcSubpass</code> member
equals its <code>dstSubpass</code> member, if the <code>viewMask</code> member of the
corresponding element of <code>pSubpasses</code> includes more than one bit,
its <code>dependencyFlags</code> member <strong class="purple">must</strong> include
<code>VK_DEPENDENCY_VIEW_LOCAL_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-attachment-02525" href="#VUID-VkRenderPassCreateInfo2-attachment-02525"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-attachment-02525</span><br>

If the <code>attachment</code> member of any element of the
<code>pInputAttachments</code> member of any element of <code>pSubpasses</code> is not
<code>VK_ATTACHMENT_UNUSED</code>, the <code>aspectMask</code> member of that element
of <code>pInputAttachments</code> <strong class="purple">must</strong> only include aspects that are present
in images of the format specified by the element of <code>pAttachments</code>
specified by <code>attachment</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-srcSubpass-02526" href="#VUID-VkRenderPassCreateInfo2-srcSubpass-02526"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-srcSubpass-02526</span><br>

The <code>srcSubpass</code> member of each element of <code>pDependencies</code> <strong class="purple">must</strong>
be less than <code>subpassCount</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-dstSubpass-02527" href="#VUID-VkRenderPassCreateInfo2-dstSubpass-02527"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-dstSubpass-02527</span><br>

The <code>dstSubpass</code> member of each element of <code>pDependencies</code> <strong class="purple">must</strong>
be less than <code>subpassCount</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-pAttachments-04585" href="#VUID-VkRenderPassCreateInfo2-pAttachments-04585"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-pAttachments-04585</span><br>

If any element of <code>pAttachments</code> is used as a fragment shading rate
attachment in any subpass, it <strong class="purple">must</strong> not be used as any other attachment
in the render pass</p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-flags-04521" href="#VUID-VkRenderPassCreateInfo2-flags-04521"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-flags-04521</span><br>

If <code>flags</code> includes <code>VK_RENDER_PASS_CREATE_TRANSFORM_BIT_QCOM</code>,
an element of <code>pSubpasses</code> includes an instance of
<a href="#VkFragmentShadingRateAttachmentInfoKHR">VkFragmentShadingRateAttachmentInfoKHR</a> in its <code>pNext</code> chain,
and the <code>pFragmentShadingRateAttachment</code> member of that structure is
not equal to <code>NULL</code>, the <code>attachment</code> member of
<code>pFragmentShadingRateAttachment</code> <strong class="purple">must</strong> be <code>VK_ATTACHMENT_UNUSED</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-pAttachments-04586" href="#VUID-VkRenderPassCreateInfo2-pAttachments-04586"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-pAttachments-04586</span><br>

If any element of <code>pAttachments</code> is used as a fragment shading rate
attachment in any subpass, it <strong class="purple">must</strong> have an image format whose
<a href="chap43.html#potential-format-features">potential format features</a> contain
<code>VK_FORMAT_FEATURE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-sType-sType" href="#VUID-VkRenderPassCreateInfo2-sType-sType"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_RENDER_PASS_CREATE_INFO_2</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-pNext-pNext" href="#VUID-VkRenderPassCreateInfo2-pNext-pNext"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="#VkRenderPassFragmentDensityMapCreateInfoEXT">VkRenderPassFragmentDensityMapCreateInfoEXT</a></p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-sType-unique" href="#VUID-VkRenderPassCreateInfo2-sType-unique"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-flags-parameter" href="#VUID-VkRenderPassCreateInfo2-flags-parameter"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="#VkRenderPassCreateFlagBits">VkRenderPassCreateFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-pAttachments-parameter" href="#VUID-VkRenderPassCreateInfo2-pAttachments-parameter"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-pAttachments-parameter</span><br>
 If <code>attachmentCount</code> is not <code>0</code>, <code>pAttachments</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>attachmentCount</code> valid <a href="#VkAttachmentDescription2">VkAttachmentDescription2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-pSubpasses-parameter" href="#VUID-VkRenderPassCreateInfo2-pSubpasses-parameter"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-pSubpasses-parameter</span><br>
 <code>pSubpasses</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>subpassCount</code> valid <a href="#VkSubpassDescription2">VkSubpassDescription2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-pDependencies-parameter" href="#VUID-VkRenderPassCreateInfo2-pDependencies-parameter"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-pDependencies-parameter</span><br>
 If <code>dependencyCount</code> is not <code>0</code>, <code>pDependencies</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>dependencyCount</code> valid <a href="#VkSubpassDependency2">VkSubpassDependency2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-pCorrelatedViewMasks-parameter" href="#VUID-VkRenderPassCreateInfo2-pCorrelatedViewMasks-parameter"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-pCorrelatedViewMasks-parameter</span><br>
 If <code>correlatedViewMaskCount</code> is not <code>0</code>, <code>pCorrelatedViewMasks</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>correlatedViewMaskCount</code> <code>uint32_t</code> values</p>
</li>
<li>
<p><a id="VUID-VkRenderPassCreateInfo2-subpassCount-arraylength" href="#VUID-VkRenderPassCreateInfo2-subpassCount-arraylength"></a> <span class="vuid">VUID-VkRenderPassCreateInfo2-subpassCount-arraylength</span><br>
 <code>subpassCount</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAttachmentDescription2</code> structure is defined as:</p>
</div>
<div id="VkAttachmentDescription2" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">struct</span> VkAttachmentDescription2 {
    VkStructureType                 sType;
    <span class="directive">const</span> <span class="directive">void</span>*                     pNext;
    VkAttachmentDescriptionFlags    flags;
    VkFormat                        format;
    VkSampleCountFlagBits           samples;
    VkAttachmentLoadOp              loadOp;
    VkAttachmentStoreOp             storeOp;
    VkAttachmentLoadOp              stencilLoadOp;
    VkAttachmentStoreOp             stencilStoreOp;
    VkImageLayout                   initialLayout;
    VkImageLayout                   finalLayout;
} VkAttachmentDescription2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkAttachmentDescription2KHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_create_renderpass2</span>
<span class="keyword">typedef</span> VkAttachmentDescription2 VkAttachmentDescription2KHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="#VkAttachmentDescriptionFlagBits">VkAttachmentDescriptionFlagBits</a>
specifying additional properties of the attachment.</p>
</li>
<li>
<p><code>format</code> is a <a href="chap43.html#VkFormat">VkFormat</a> value specifying the format of the
image that will be used for the attachment.</p>
</li>
<li>
<p><code>samples</code> is the number of samples of the image as defined in
<a href="chap42.html#VkSampleCountFlagBits">VkSampleCountFlagBits</a>.</p>
</li>
<li>
<p><code>loadOp</code> is a <a href="#VkAttachmentLoadOp">VkAttachmentLoadOp</a> value specifying how the
contents of color and depth components of the attachment are treated at
the beginning of the subpass where it is first used.</p>
</li>
<li>
<p><code>storeOp</code> is a <a href="#VkAttachmentStoreOp">VkAttachmentStoreOp</a> value specifying how the
contents of color and depth components of the attachment are treated at
the end of the subpass where it is last used.</p>
</li>
<li>
<p><code>stencilLoadOp</code> is a <a href="#VkAttachmentLoadOp">VkAttachmentLoadOp</a> value specifying how
the contents of stencil components of the attachment are treated at the
beginning of the subpass where it is first used.</p>
</li>
<li>
<p><code>stencilStoreOp</code> is a <a href="#VkAttachmentStoreOp">VkAttachmentStoreOp</a> value specifying how
the contents of stencil components of the attachment are treated at the
end of the last subpass where it is used.</p>
</li>
<li>
<p><code>initialLayout</code> is the layout the attachment image subresource will
be in when a render pass instance begins.</p>
</li>
<li>
<p><code>finalLayout</code> is the layout the attachment image subresource will be
transitioned to when a render pass instance ends.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Parameters defined by this structure with the same name as those in
<a href="#VkAttachmentDescription">VkAttachmentDescription</a> have the identical effect to those parameters.</p>
</div>
<div class="paragraph">
<p>If the <a href="chap41.html#features-separateDepthStencilLayouts"><code>separateDepthStencilLayouts</code></a> feature is enabled, and <code>format</code> is
a depth/stencil format, <code>initialLayout</code> and <code>finalLayout</code> <strong class="purple">can</strong> be
set to a layout that only specifies the layout of the depth aspect.</p>
</div>
<div class="paragraph">
<p>If <code>format</code> is a depth/stencil format, and <code>initialLayout</code> only
specifies the initial layout of the depth aspect of the attachment, the
initial layout of the stencil aspect is specified by the
<code>stencilInitialLayout</code> member of a
<a href="#VkAttachmentDescriptionStencilLayout">VkAttachmentDescriptionStencilLayout</a> structure included in the
<code>pNext</code> chain.
Otherwise, <code>initialLayout</code> describes the initial layout for all relevant
image aspects.</p>
</div>
<div class="paragraph">
<p>If <code>format</code> is a depth/stencil format, and <code>finalLayout</code> only
specifies the final layout of the depth aspect of the attachment, the final
layout of the stencil aspect is specified by the <code>stencilFinalLayout</code>
member of a <a href="#VkAttachmentDescriptionStencilLayout">VkAttachmentDescriptionStencilLayout</a> structure included in
the <code>pNext</code> chain.
Otherwise, <code>finalLayout</code> describes the final layout for all relevant
image aspects.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAttachmentDescription2-finalLayout-03061" href="#VUID-VkAttachmentDescription2-finalLayout-03061"></a> <span class="vuid">VUID-VkAttachmentDescription2-finalLayout-03061</span><br>

<code>finalLayout</code> <strong class="purple">must</strong> not be <code>VK_IMAGE_LAYOUT_UNDEFINED</code> or
<code>VK_IMAGE_LAYOUT_PREINITIALIZED</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-format-03294" href="#VUID-VkAttachmentDescription2-format-03294"></a> <span class="vuid">VUID-VkAttachmentDescription2-format-03294</span><br>

If <code>format</code> is a color format, <code>initialLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-format-03295" href="#VUID-VkAttachmentDescription2-format-03295"></a> <span class="vuid">VUID-VkAttachmentDescription2-format-03295</span><br>

If <code>format</code> is a depth/stencil format, <code>initialLayout</code> <strong class="purple">must</strong> not
be <code>VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-format-03296" href="#VUID-VkAttachmentDescription2-format-03296"></a> <span class="vuid">VUID-VkAttachmentDescription2-format-03296</span><br>

If <code>format</code> is a color format, <code>finalLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-format-03297" href="#VUID-VkAttachmentDescription2-format-03297"></a> <span class="vuid">VUID-VkAttachmentDescription2-format-03297</span><br>

If <code>format</code> is a depth/stencil format, <code>finalLayout</code> <strong class="purple">must</strong> not
be <code>VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-separateDepthStencilLayouts-03298" href="#VUID-VkAttachmentDescription2-separateDepthStencilLayouts-03298"></a> <span class="vuid">VUID-VkAttachmentDescription2-separateDepthStencilLayouts-03298</span><br>

If the <a href="chap41.html#features-separateDepthStencilLayouts"><code>separateDepthStencilLayouts</code></a> feature is not enabled,
<code>initialLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-separateDepthStencilLayouts-03299" href="#VUID-VkAttachmentDescription2-separateDepthStencilLayouts-03299"></a> <span class="vuid">VUID-VkAttachmentDescription2-separateDepthStencilLayouts-03299</span><br>

If the <a href="chap41.html#features-separateDepthStencilLayouts"><code>separateDepthStencilLayouts</code></a> feature is not enabled,
<code>finalLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-format-03300" href="#VUID-VkAttachmentDescription2-format-03300"></a> <span class="vuid">VUID-VkAttachmentDescription2-format-03300</span><br>

If <code>format</code> is a color format, <code>initialLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-format-03301" href="#VUID-VkAttachmentDescription2-format-03301"></a> <span class="vuid">VUID-VkAttachmentDescription2-format-03301</span><br>

If <code>format</code> is a color format, <code>finalLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-format-03302" href="#VUID-VkAttachmentDescription2-format-03302"></a> <span class="vuid">VUID-VkAttachmentDescription2-format-03302</span><br>

If <code>format</code> is a depth/stencil format which includes both depth and
stencil aspects, and <code>initialLayout</code> is
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code>, the <code>pNext</code> chain
<strong class="purple">must</strong> include a <a href="#VkAttachmentDescriptionStencilLayout">VkAttachmentDescriptionStencilLayout</a> structure</p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-format-03303" href="#VUID-VkAttachmentDescription2-format-03303"></a> <span class="vuid">VUID-VkAttachmentDescription2-format-03303</span><br>

If <code>format</code> is a depth/stencil format which includes both depth and
stencil aspects, and <code>finalLayout</code> is
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code>, the <code>pNext</code> chain
<strong class="purple">must</strong> include a <a href="#VkAttachmentDescriptionStencilLayout">VkAttachmentDescriptionStencilLayout</a> structure</p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-format-03304" href="#VUID-VkAttachmentDescription2-format-03304"></a> <span class="vuid">VUID-VkAttachmentDescription2-format-03304</span><br>

If <code>format</code> is a depth/stencil format which includes only the depth
aspect, <code>initialLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-format-03305" href="#VUID-VkAttachmentDescription2-format-03305"></a> <span class="vuid">VUID-VkAttachmentDescription2-format-03305</span><br>

If <code>format</code> is a depth/stencil format which includes only the depth
aspect, <code>finalLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-format-03306" href="#VUID-VkAttachmentDescription2-format-03306"></a> <span class="vuid">VUID-VkAttachmentDescription2-format-03306</span><br>

If <code>format</code> is a depth/stencil format which includes only the
stencil aspect, <code>initialLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-format-03307" href="#VUID-VkAttachmentDescription2-format-03307"></a> <span class="vuid">VUID-VkAttachmentDescription2-format-03307</span><br>

If <code>format</code> is a depth/stencil format which includes only the
stencil aspect, <code>finalLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code> or
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAttachmentDescription2-sType-sType" href="#VUID-VkAttachmentDescription2-sType-sType"></a> <span class="vuid">VUID-VkAttachmentDescription2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_ATTACHMENT_DESCRIPTION_2</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-pNext-pNext" href="#VUID-VkAttachmentDescription2-pNext-pNext"></a> <span class="vuid">VUID-VkAttachmentDescription2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="#VkAttachmentDescriptionStencilLayout">VkAttachmentDescriptionStencilLayout</a></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-sType-unique" href="#VUID-VkAttachmentDescription2-sType-unique"></a> <span class="vuid">VUID-VkAttachmentDescription2-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-flags-parameter" href="#VUID-VkAttachmentDescription2-flags-parameter"></a> <span class="vuid">VUID-VkAttachmentDescription2-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="#VkAttachmentDescriptionFlagBits">VkAttachmentDescriptionFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-format-parameter" href="#VUID-VkAttachmentDescription2-format-parameter"></a> <span class="vuid">VUID-VkAttachmentDescription2-format-parameter</span><br>
 <code>format</code> <strong class="purple">must</strong> be a valid <a href="chap43.html#VkFormat">VkFormat</a> value</p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-samples-parameter" href="#VUID-VkAttachmentDescription2-samples-parameter"></a> <span class="vuid">VUID-VkAttachmentDescription2-samples-parameter</span><br>
 <code>samples</code> <strong class="purple">must</strong> be a valid <a href="chap42.html#VkSampleCountFlagBits">VkSampleCountFlagBits</a> value</p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-loadOp-parameter" href="#VUID-VkAttachmentDescription2-loadOp-parameter"></a> <span class="vuid">VUID-VkAttachmentDescription2-loadOp-parameter</span><br>
 <code>loadOp</code> <strong class="purple">must</strong> be a valid <a href="#VkAttachmentLoadOp">VkAttachmentLoadOp</a> value</p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-storeOp-parameter" href="#VUID-VkAttachmentDescription2-storeOp-parameter"></a> <span class="vuid">VUID-VkAttachmentDescription2-storeOp-parameter</span><br>
 <code>storeOp</code> <strong class="purple">must</strong> be a valid <a href="#VkAttachmentStoreOp">VkAttachmentStoreOp</a> value</p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-stencilLoadOp-parameter" href="#VUID-VkAttachmentDescription2-stencilLoadOp-parameter"></a> <span class="vuid">VUID-VkAttachmentDescription2-stencilLoadOp-parameter</span><br>
 <code>stencilLoadOp</code> <strong class="purple">must</strong> be a valid <a href="#VkAttachmentLoadOp">VkAttachmentLoadOp</a> value</p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-stencilStoreOp-parameter" href="#VUID-VkAttachmentDescription2-stencilStoreOp-parameter"></a> <span class="vuid">VUID-VkAttachmentDescription2-stencilStoreOp-parameter</span><br>
 <code>stencilStoreOp</code> <strong class="purple">must</strong> be a valid <a href="#VkAttachmentStoreOp">VkAttachmentStoreOp</a> value</p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-initialLayout-parameter" href="#VUID-VkAttachmentDescription2-initialLayout-parameter"></a> <span class="vuid">VUID-VkAttachmentDescription2-initialLayout-parameter</span><br>
 <code>initialLayout</code> <strong class="purple">must</strong> be a valid <a href="chap13.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescription2-finalLayout-parameter" href="#VUID-VkAttachmentDescription2-finalLayout-parameter"></a> <span class="vuid">VUID-VkAttachmentDescription2-finalLayout-parameter</span><br>
 <code>finalLayout</code> <strong class="purple">must</strong> be a valid <a href="chap13.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAttachmentDescriptionStencilLayout</code> structure is defined as:</p>
</div>
<div id="VkAttachmentDescriptionStencilLayout" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">struct</span> VkAttachmentDescriptionStencilLayout {
    VkStructureType    sType;
    <span class="directive">void</span>*              pNext;
    VkImageLayout      stencilInitialLayout;
    VkImageLayout      stencilFinalLayout;
} VkAttachmentDescriptionStencilLayout;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkAttachmentDescriptionStencilLayoutKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_separate_depth_stencil_layouts</span>
<span class="keyword">typedef</span> VkAttachmentDescriptionStencilLayout VkAttachmentDescriptionStencilLayoutKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stencilInitialLayout</code> is the layout the stencil aspect of the
attachment image subresource will be in when a render pass instance
begins.</p>
</li>
<li>
<p><code>stencilFinalLayout</code> is the layout the stencil aspect of the
attachment image subresource will be transitioned to when a render pass
instance ends.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAttachmentDescriptionStencilLayout-stencilInitialLayout-03308" href="#VUID-VkAttachmentDescriptionStencilLayout-stencilInitialLayout-03308"></a> <span class="vuid">VUID-VkAttachmentDescriptionStencilLayout-stencilInitialLayout-03308</span><br>

<code>stencilInitialLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescriptionStencilLayout-stencilFinalLayout-03309" href="#VUID-VkAttachmentDescriptionStencilLayout-stencilFinalLayout-03309"></a> <span class="vuid">VUID-VkAttachmentDescriptionStencilLayout-stencilFinalLayout-03309</span><br>

<code>stencilFinalLayout</code> <strong class="purple">must</strong> not be
<code>VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescriptionStencilLayout-stencilFinalLayout-03310" href="#VUID-VkAttachmentDescriptionStencilLayout-stencilFinalLayout-03310"></a> <span class="vuid">VUID-VkAttachmentDescriptionStencilLayout-stencilFinalLayout-03310</span><br>

<code>stencilFinalLayout</code> <strong class="purple">must</strong> not be <code>VK_IMAGE_LAYOUT_UNDEFINED</code> or
<code>VK_IMAGE_LAYOUT_PREINITIALIZED</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAttachmentDescriptionStencilLayout-sType-sType" href="#VUID-VkAttachmentDescriptionStencilLayout-sType-sType"></a> <span class="vuid">VUID-VkAttachmentDescriptionStencilLayout-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_ATTACHMENT_DESCRIPTION_STENCIL_LAYOUT</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescriptionStencilLayout-stencilInitialLayout-parameter" href="#VUID-VkAttachmentDescriptionStencilLayout-stencilInitialLayout-parameter"></a> <span class="vuid">VUID-VkAttachmentDescriptionStencilLayout-stencilInitialLayout-parameter</span><br>
 <code>stencilInitialLayout</code> <strong class="purple">must</strong> be a valid <a href="chap13.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
<li>
<p><a id="VUID-VkAttachmentDescriptionStencilLayout-stencilFinalLayout-parameter" href="#VUID-VkAttachmentDescriptionStencilLayout-stencilFinalLayout-parameter"></a> <span class="vuid">VUID-VkAttachmentDescriptionStencilLayout-stencilFinalLayout-parameter</span><br>
 <code>stencilFinalLayout</code> <strong class="purple">must</strong> be a valid <a href="chap13.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkSubpassDescription2</code> structure is defined as:</p>
</div>
<div id="VkSubpassDescription2" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">struct</span> VkSubpassDescription2 {
    VkStructureType                  sType;
    <span class="directive">const</span> <span class="directive">void</span>*                      pNext;
    VkSubpassDescriptionFlags        flags;
    VkPipelineBindPoint              pipelineBindPoint;
    uint32_t                         viewMask;
    uint32_t                         inputAttachmentCount;
    <span class="directive">const</span> VkAttachmentReference2*    pInputAttachments;
    uint32_t                         colorAttachmentCount;
    <span class="directive">const</span> VkAttachmentReference2*    pColorAttachments;
    <span class="directive">const</span> VkAttachmentReference2*    pResolveAttachments;
    <span class="directive">const</span> VkAttachmentReference2*    pDepthStencilAttachment;
    uint32_t                         preserveAttachmentCount;
    <span class="directive">const</span> uint32_t*                  pPreserveAttachments;
} VkSubpassDescription2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkSubpassDescription2KHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_create_renderpass2</span>
<span class="keyword">typedef</span> VkSubpassDescription2 VkSubpassDescription2KHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="#VkSubpassDescriptionFlagBits">VkSubpassDescriptionFlagBits</a>
specifying usage of the subpass.</p>
</li>
<li>
<p><code>pipelineBindPoint</code> is a <a href="chap11.html#VkPipelineBindPoint">VkPipelineBindPoint</a> value specifying
the pipeline type supported for this subpass.</p>
</li>
<li>
<p><code>viewMask</code> is a bitfield of view indices describing which views
rendering is broadcast to in this subpass, when multiview is enabled.</p>
</li>
<li>
<p><code>inputAttachmentCount</code> is the number of input attachments.</p>
</li>
<li>
<p><code>pInputAttachments</code> is a pointer to an array of
<a href="#VkAttachmentReference2">VkAttachmentReference2</a> structures defining the input attachments
for this subpass and their layouts.</p>
</li>
<li>
<p><code>colorAttachmentCount</code> is the number of color attachments.</p>
</li>
<li>
<p><code>pColorAttachments</code> is a pointer to an array of
<a href="#VkAttachmentReference2">VkAttachmentReference2</a> structures defining the color attachments
for this subpass and their layouts.</p>
</li>
<li>
<p><code>pResolveAttachments</code> is an optional array of
<code>colorAttachmentCount</code> <a href="#VkAttachmentReference2">VkAttachmentReference2</a> structures
defining the resolve attachments for this subpass and their layouts.</p>
</li>
<li>
<p><code>pDepthStencilAttachment</code> is a pointer to a
<a href="#VkAttachmentReference2">VkAttachmentReference2</a> structure specifying the depth/stencil
attachment for this subpass and its layout.</p>
</li>
<li>
<p><code>preserveAttachmentCount</code> is the number of preserved attachments.</p>
</li>
<li>
<p><code>pPreserveAttachments</code> is a pointer to an array of
<code>preserveAttachmentCount</code> render pass attachment indices identifying
attachments that are not used by this subpass, but whose contents <strong class="purple">must</strong>
be preserved throughout the subpass.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Parameters defined by this structure with the same name as those in
<a href="#VkSubpassDescription">VkSubpassDescription</a> have the identical effect to those parameters.</p>
</div>
<div class="paragraph">
<p><code>viewMask</code> has the same effect for the described subpass as
<a href="#VkRenderPassMultiviewCreateInfo">VkRenderPassMultiviewCreateInfo</a>::<code>pViewMasks</code> has on each
corresponding subpass.</p>
</div>
<div class="paragraph">
<p>If an instance of <a href="#VkFragmentShadingRateAttachmentInfoKHR">VkFragmentShadingRateAttachmentInfoKHR</a> is included
in the <code>pNext</code> chain, <code>pFragmentShadingRateAttachment</code> is not
<code>NULL</code>, and its <code>attachment</code> member is not <code>VK_ATTACHMENT_UNUSED</code>,
the identified attachment defines a fragment shading rate attachment for
that subpass.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSubpassDescription2-pipelineBindPoint-03062" href="#VUID-VkSubpassDescription2-pipelineBindPoint-03062"></a> <span class="vuid">VUID-VkSubpassDescription2-pipelineBindPoint-03062</span><br>

<code>pipelineBindPoint</code> <strong class="purple">must</strong> be <code>VK_PIPELINE_BIND_POINT_GRAPHICS</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-colorAttachmentCount-03063" href="#VUID-VkSubpassDescription2-colorAttachmentCount-03063"></a> <span class="vuid">VUID-VkSubpassDescription2-colorAttachmentCount-03063</span><br>

<code>colorAttachmentCount</code> <strong class="purple">must</strong> be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxColorAttachments</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-loadOp-03064" href="#VUID-VkSubpassDescription2-loadOp-03064"></a> <span class="vuid">VUID-VkSubpassDescription2-loadOp-03064</span><br>

If the first use of an attachment in this render pass is as an input
attachment, and the attachment is not also used as a color or
depth/stencil attachment in the same subpass, then <code>loadOp</code> <strong class="purple">must</strong>
not be <code>VK_ATTACHMENT_LOAD_OP_CLEAR</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-pResolveAttachments-03065" href="#VUID-VkSubpassDescription2-pResolveAttachments-03065"></a> <span class="vuid">VUID-VkSubpassDescription2-pResolveAttachments-03065</span><br>

If <code>pResolveAttachments</code> is not <code>NULL</code>, for each resolve attachment
that does not have the value <code>VK_ATTACHMENT_UNUSED</code>, the
corresponding color attachment <strong class="purple">must</strong> not have the value
<code>VK_ATTACHMENT_UNUSED</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-pResolveAttachments-03066" href="#VUID-VkSubpassDescription2-pResolveAttachments-03066"></a> <span class="vuid">VUID-VkSubpassDescription2-pResolveAttachments-03066</span><br>

If <code>pResolveAttachments</code> is not <code>NULL</code>, for each resolve attachment
that is not <code>VK_ATTACHMENT_UNUSED</code>, the corresponding color
attachment <strong class="purple">must</strong> not have a sample count of <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-pResolveAttachments-03067" href="#VUID-VkSubpassDescription2-pResolveAttachments-03067"></a> <span class="vuid">VUID-VkSubpassDescription2-pResolveAttachments-03067</span><br>

If <code>pResolveAttachments</code> is not <code>NULL</code>, each resolve attachment that
is not <code>VK_ATTACHMENT_UNUSED</code> <strong class="purple">must</strong> have a sample count of
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-pResolveAttachments-03068" href="#VUID-VkSubpassDescription2-pResolveAttachments-03068"></a> <span class="vuid">VUID-VkSubpassDescription2-pResolveAttachments-03068</span><br>

Any given element of <code>pResolveAttachments</code> <strong class="purple">must</strong> have the same
<a href="chap43.html#VkFormat">VkFormat</a> as its corresponding color attachment</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-pColorAttachments-03069" href="#VUID-VkSubpassDescription2-pColorAttachments-03069"></a> <span class="vuid">VUID-VkSubpassDescription2-pColorAttachments-03069</span><br>

All attachments in <code>pColorAttachments</code> that are not
<code>VK_ATTACHMENT_UNUSED</code> <strong class="purple">must</strong> have the same sample count</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-pInputAttachments-02897" href="#VUID-VkSubpassDescription2-pInputAttachments-02897"></a> <span class="vuid">VUID-VkSubpassDescription2-pInputAttachments-02897</span><br>

All attachments in <code>pInputAttachments</code> that are not
<code>VK_ATTACHMENT_UNUSED</code> <strong class="purple">must</strong> have image formats whose
<a href="chap43.html#potential-format-features">potential format features</a> contain at
least <code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code> or
<code>VK_FORMAT_FEATURE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-pColorAttachments-02898" href="#VUID-VkSubpassDescription2-pColorAttachments-02898"></a> <span class="vuid">VUID-VkSubpassDescription2-pColorAttachments-02898</span><br>

All attachments in <code>pColorAttachments</code> that are not
<code>VK_ATTACHMENT_UNUSED</code> <strong class="purple">must</strong> have image formats whose
<a href="chap43.html#potential-format-features">potential format features</a> contain
<code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-pResolveAttachments-02899" href="#VUID-VkSubpassDescription2-pResolveAttachments-02899"></a> <span class="vuid">VUID-VkSubpassDescription2-pResolveAttachments-02899</span><br>

All attachments in <code>pResolveAttachments</code> that are not
<code>VK_ATTACHMENT_UNUSED</code> <strong class="purple">must</strong> have image formats whose
<a href="chap43.html#potential-format-features">potential format features</a> contain
<code>VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-pDepthStencilAttachment-02900" href="#VUID-VkSubpassDescription2-pDepthStencilAttachment-02900"></a> <span class="vuid">VUID-VkSubpassDescription2-pDepthStencilAttachment-02900</span><br>

If <code>pDepthStencilAttachment</code> is not <code>NULL</code> and the attachment is not
<code>VK_ATTACHMENT_UNUSED</code> then it <strong class="purple">must</strong> have a image format whose
<a href="chap43.html#potential-format-features">potential format features</a> contain
<code>VK_FORMAT_FEATURE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-pColorAttachments-03070" href="#VUID-VkSubpassDescription2-pColorAttachments-03070"></a> <span class="vuid">VUID-VkSubpassDescription2-pColorAttachments-03070</span><br>

If the <code>VK_AMD_mixed_attachment_samples</code> extension is enabled, all
attachments in <code>pColorAttachments</code> that are not
<code>VK_ATTACHMENT_UNUSED</code> <strong class="purple">must</strong> have a sample count that is smaller
than or equal to the sample count of <code>pDepthStencilAttachment</code> if it
is not <code>VK_ATTACHMENT_UNUSED</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-pDepthStencilAttachment-03071" href="#VUID-VkSubpassDescription2-pDepthStencilAttachment-03071"></a> <span class="vuid">VUID-VkSubpassDescription2-pDepthStencilAttachment-03071</span><br>

If neither the <code>VK_AMD_mixed_attachment_samples</code> nor the
<code>VK_NV_framebuffer_mixed_samples</code> extensions are enabled, and if
<code>pDepthStencilAttachment</code> is not <code>VK_ATTACHMENT_UNUSED</code> and any
attachments in <code>pColorAttachments</code> are not
<code>VK_ATTACHMENT_UNUSED</code>, they <strong class="purple">must</strong> have the same sample count</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-attachment-03073" href="#VUID-VkSubpassDescription2-attachment-03073"></a> <span class="vuid">VUID-VkSubpassDescription2-attachment-03073</span><br>

The <code>attachment</code> member of any element of <code>pPreserveAttachments</code>
<strong class="purple">must</strong> not be <code>VK_ATTACHMENT_UNUSED</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-pPreserveAttachments-03074" href="#VUID-VkSubpassDescription2-pPreserveAttachments-03074"></a> <span class="vuid">VUID-VkSubpassDescription2-pPreserveAttachments-03074</span><br>

Any given element of <code>pPreserveAttachments</code> <strong class="purple">must</strong> not also be an
element of any other member of the subpass description</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-layout-02528" href="#VUID-VkSubpassDescription2-layout-02528"></a> <span class="vuid">VUID-VkSubpassDescription2-layout-02528</span><br>

If any attachment is used by more than one <a href="#VkAttachmentReference">VkAttachmentReference</a>
member, then each use <strong class="purple">must</strong> use the same <code>layout</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-None-04439" href="#VUID-VkSubpassDescription2-None-04439"></a> <span class="vuid">VUID-VkSubpassDescription2-None-04439</span><br>

Attachments <strong class="purple">must</strong> follow the <a href="#attachment-type-imagelayout">image layout
requirements</a> based on the type of attachment it is being used as</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-flags-03076" href="#VUID-VkSubpassDescription2-flags-03076"></a> <span class="vuid">VUID-VkSubpassDescription2-flags-03076</span><br>

If <code>flags</code> includes
<code>VK_SUBPASS_DESCRIPTION_PER_VIEW_POSITION_X_ONLY_BIT_NVX</code>, it <strong class="purple">must</strong>
also include <code>VK_SUBPASS_DESCRIPTION_PER_VIEW_ATTRIBUTES_BIT_NVX</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-attachment-02799" href="#VUID-VkSubpassDescription2-attachment-02799"></a> <span class="vuid">VUID-VkSubpassDescription2-attachment-02799</span><br>

If the <code>attachment</code> member of any element of <code>pInputAttachments</code>
is not <code>VK_ATTACHMENT_UNUSED</code>, then the <code>aspectMask</code> member
<strong class="purple">must</strong> be a valid combination of <a href="chap13.html#VkImageAspectFlagBits">VkImageAspectFlagBits</a></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-attachment-02800" href="#VUID-VkSubpassDescription2-attachment-02800"></a> <span class="vuid">VUID-VkSubpassDescription2-attachment-02800</span><br>

If the <code>attachment</code> member of any element of <code>pInputAttachments</code>
is not <code>VK_ATTACHMENT_UNUSED</code>, then the <code>aspectMask</code> member
<strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-attachment-02801" href="#VUID-VkSubpassDescription2-attachment-02801"></a> <span class="vuid">VUID-VkSubpassDescription2-attachment-02801</span><br>

If the <code>attachment</code> member of any element of <code>pInputAttachments</code>
is not <code>VK_ATTACHMENT_UNUSED</code>, then the <code>aspectMask</code> member
<strong class="purple">must</strong> not include <code>VK_IMAGE_ASPECT_METADATA_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-attachment-04563" href="#VUID-VkSubpassDescription2-attachment-04563"></a> <span class="vuid">VUID-VkSubpassDescription2-attachment-04563</span><br>

If the <code>attachment</code> member of any element of <code>pInputAttachments</code>
is not <code>VK_ATTACHMENT_UNUSED</code>, then the <code>aspectMask</code> member
<strong class="purple">must</strong> not include <code>VK_IMAGE_ASPECT_MEMORY_PLANE_i_BIT_EXT</code> for any
index <code>i</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-pDepthStencilAttachment-04440" href="#VUID-VkSubpassDescription2-pDepthStencilAttachment-04440"></a> <span class="vuid">VUID-VkSubpassDescription2-pDepthStencilAttachment-04440</span><br>

An attachment <strong class="purple">must</strong> not be used in both <code>pDepthStencilAttachment</code>
and <code>pColorAttachments</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSubpassDescription2-sType-sType" href="#VUID-VkSubpassDescription2-sType-sType"></a> <span class="vuid">VUID-VkSubpassDescription2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_SUBPASS_DESCRIPTION_2</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-pNext-pNext" href="#VUID-VkSubpassDescription2-pNext-pNext"></a> <span class="vuid">VUID-VkSubpassDescription2-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="#VkFragmentShadingRateAttachmentInfoKHR">VkFragmentShadingRateAttachmentInfoKHR</a> or <a href="#VkSubpassDescriptionDepthStencilResolve">VkSubpassDescriptionDepthStencilResolve</a></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-sType-unique" href="#VUID-VkSubpassDescription2-sType-unique"></a> <span class="vuid">VUID-VkSubpassDescription2-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-flags-parameter" href="#VUID-VkSubpassDescription2-flags-parameter"></a> <span class="vuid">VUID-VkSubpassDescription2-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="#VkSubpassDescriptionFlagBits">VkSubpassDescriptionFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-pipelineBindPoint-parameter" href="#VUID-VkSubpassDescription2-pipelineBindPoint-parameter"></a> <span class="vuid">VUID-VkSubpassDescription2-pipelineBindPoint-parameter</span><br>
 <code>pipelineBindPoint</code> <strong class="purple">must</strong> be a valid <a href="chap11.html#VkPipelineBindPoint">VkPipelineBindPoint</a> value</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-pInputAttachments-parameter" href="#VUID-VkSubpassDescription2-pInputAttachments-parameter"></a> <span class="vuid">VUID-VkSubpassDescription2-pInputAttachments-parameter</span><br>
 If <code>inputAttachmentCount</code> is not <code>0</code>, <code>pInputAttachments</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>inputAttachmentCount</code> valid <a href="#VkAttachmentReference2">VkAttachmentReference2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-pColorAttachments-parameter" href="#VUID-VkSubpassDescription2-pColorAttachments-parameter"></a> <span class="vuid">VUID-VkSubpassDescription2-pColorAttachments-parameter</span><br>
 If <code>colorAttachmentCount</code> is not <code>0</code>, <code>pColorAttachments</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>colorAttachmentCount</code> valid <a href="#VkAttachmentReference2">VkAttachmentReference2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-pResolveAttachments-parameter" href="#VUID-VkSubpassDescription2-pResolveAttachments-parameter"></a> <span class="vuid">VUID-VkSubpassDescription2-pResolveAttachments-parameter</span><br>
 If <code>colorAttachmentCount</code> is not <code>0</code>, and <code>pResolveAttachments</code> is not <code>NULL</code>, <code>pResolveAttachments</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>colorAttachmentCount</code> valid <a href="#VkAttachmentReference2">VkAttachmentReference2</a> structures</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-pDepthStencilAttachment-parameter" href="#VUID-VkSubpassDescription2-pDepthStencilAttachment-parameter"></a> <span class="vuid">VUID-VkSubpassDescription2-pDepthStencilAttachment-parameter</span><br>
 If <code>pDepthStencilAttachment</code> is not <code>NULL</code>, <code>pDepthStencilAttachment</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkAttachmentReference2">VkAttachmentReference2</a> structure</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescription2-pPreserveAttachments-parameter" href="#VUID-VkSubpassDescription2-pPreserveAttachments-parameter"></a> <span class="vuid">VUID-VkSubpassDescription2-pPreserveAttachments-parameter</span><br>
 If <code>preserveAttachmentCount</code> is not <code>0</code>, <code>pPreserveAttachments</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>preserveAttachmentCount</code> <code>uint32_t</code> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> list of <code>VkSubpassDescription2</code> includes a
<code>VkSubpassDescriptionDepthStencilResolve</code> structure, then that structure
describes multisample resolve operations for the depth/stencil attachment in
a subpass.</p>
</div>
<div class="paragraph">
<p>The <code>VkSubpassDescriptionDepthStencilResolve</code> structure is defined as:</p>
</div>
<div id="VkSubpassDescriptionDepthStencilResolve" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">struct</span> VkSubpassDescriptionDepthStencilResolve {
    VkStructureType                  sType;
    <span class="directive">const</span> <span class="directive">void</span>*                      pNext;
    VkResolveModeFlagBits            depthResolveMode;
    VkResolveModeFlagBits            stencilResolveMode;
    <span class="directive">const</span> VkAttachmentReference2*    pDepthStencilResolveAttachment;
} VkSubpassDescriptionDepthStencilResolve;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkSubpassDescriptionDepthStencilResolveKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_depth_stencil_resolve</span>
<span class="keyword">typedef</span> VkSubpassDescriptionDepthStencilResolve VkSubpassDescriptionDepthStencilResolveKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>depthResolveMode</code> is a bitmask of <a href="#VkResolveModeFlagBits">VkResolveModeFlagBits</a>
describing the depth resolve mode.</p>
</li>
<li>
<p><code>stencilResolveMode</code> is a bitmask of <a href="#VkResolveModeFlagBits">VkResolveModeFlagBits</a>
describing the stencil resolve mode.</p>
</li>
<li>
<p><code>pDepthStencilResolveAttachment</code> is an optional
<a href="#VkAttachmentReference">VkAttachmentReference</a> structure defining the depth/stencil resolve
attachment for this subpass and its layout.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03177" href="#VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03177"></a> <span class="vuid">VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03177</span><br>

If <code>pDepthStencilResolveAttachment</code> is not <code>NULL</code> and does not have
the value <code>VK_ATTACHMENT_UNUSED</code>, <code>pDepthStencilAttachment</code>
<strong class="purple">must</strong> not have the value <code>VK_ATTACHMENT_UNUSED</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03178" href="#VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03178"></a> <span class="vuid">VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03178</span><br>

If <code>pDepthStencilResolveAttachment</code> is not <code>NULL</code> and does not have
the value <code>VK_ATTACHMENT_UNUSED</code>, <code>depthResolveMode</code> and
<code>stencilResolveMode</code> <strong class="purple">must</strong> not both be <code>VK_RESOLVE_MODE_NONE</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03179" href="#VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03179"></a> <span class="vuid">VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03179</span><br>

If <code>pDepthStencilResolveAttachment</code> is not <code>NULL</code> and does not have
the value <code>VK_ATTACHMENT_UNUSED</code>, <code>pDepthStencilAttachment</code>
<strong class="purple">must</strong> not have a sample count of <code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03180" href="#VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03180"></a> <span class="vuid">VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03180</span><br>

If <code>pDepthStencilResolveAttachment</code> is not <code>NULL</code> and does not have
the value <code>VK_ATTACHMENT_UNUSED</code>,
<code>pDepthStencilResolveAttachment</code> <strong class="purple">must</strong> have a sample count of
<code>VK_SAMPLE_COUNT_1_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-02651" href="#VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-02651"></a> <span class="vuid">VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-02651</span><br>

If <code>pDepthStencilResolveAttachment</code> is not <code>NULL</code> and does not have
the value <code>VK_ATTACHMENT_UNUSED</code> then it <strong class="purple">must</strong> have a format whose
features contain <code>VK_FORMAT_FEATURE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03181" href="#VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03181"></a> <span class="vuid">VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03181</span><br>

If the <a href="chap43.html#VkFormat">VkFormat</a> of <code>pDepthStencilResolveAttachment</code> has a
depth component, then the <a href="chap43.html#VkFormat">VkFormat</a> of
<code>pDepthStencilAttachment</code> <strong class="purple">must</strong> have a depth component with the same
number of bits and numerical type</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03182" href="#VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03182"></a> <span class="vuid">VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03182</span><br>

If the <a href="chap43.html#VkFormat">VkFormat</a> of <code>pDepthStencilResolveAttachment</code> has a
stencil component, then the <a href="chap43.html#VkFormat">VkFormat</a> of
<code>pDepthStencilAttachment</code> <strong class="purple">must</strong> have a stencil component with the
same number of bits and numerical type</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescriptionDepthStencilResolve-depthResolveMode-03183" href="#VUID-VkSubpassDescriptionDepthStencilResolve-depthResolveMode-03183"></a> <span class="vuid">VUID-VkSubpassDescriptionDepthStencilResolve-depthResolveMode-03183</span><br>

The value of <code>depthResolveMode</code> <strong class="purple">must</strong> be one of the bits set in
<a href="chap42.html#VkPhysicalDeviceDepthStencilResolveProperties">VkPhysicalDeviceDepthStencilResolveProperties</a>::<code>supportedDepthResolveModes</code>
or <code>VK_RESOLVE_MODE_NONE</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescriptionDepthStencilResolve-stencilResolveMode-03184" href="#VUID-VkSubpassDescriptionDepthStencilResolve-stencilResolveMode-03184"></a> <span class="vuid">VUID-VkSubpassDescriptionDepthStencilResolve-stencilResolveMode-03184</span><br>

The value of <code>stencilResolveMode</code> <strong class="purple">must</strong> be one of the bits set in
<a href="chap42.html#VkPhysicalDeviceDepthStencilResolveProperties">VkPhysicalDeviceDepthStencilResolveProperties</a>::<code>supportedStencilResolveModes</code>
or <code>VK_RESOLVE_MODE_NONE</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03185" href="#VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03185"></a> <span class="vuid">VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03185</span><br>

If the <a href="chap43.html#VkFormat">VkFormat</a> of <code>pDepthStencilResolveAttachment</code> has both
depth and stencil components,
<a href="chap42.html#VkPhysicalDeviceDepthStencilResolveProperties">VkPhysicalDeviceDepthStencilResolveProperties</a>::<code>independentResolve</code>
is <code>VK_FALSE</code>, and
<a href="chap42.html#VkPhysicalDeviceDepthStencilResolveProperties">VkPhysicalDeviceDepthStencilResolveProperties</a>::<code>independentResolveNone</code>
is <code>VK_FALSE</code>, then the values of <code>depthResolveMode</code> and
<code>stencilResolveMode</code> <strong class="purple">must</strong> be identical</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03186" href="#VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03186"></a> <span class="vuid">VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-03186</span><br>

If the <a href="chap43.html#VkFormat">VkFormat</a> of <code>pDepthStencilResolveAttachment</code> has both
depth and stencil components,
<a href="chap42.html#VkPhysicalDeviceDepthStencilResolveProperties">VkPhysicalDeviceDepthStencilResolveProperties</a>::<code>independentResolve</code>
is <code>VK_FALSE</code> and
<a href="chap42.html#VkPhysicalDeviceDepthStencilResolveProperties">VkPhysicalDeviceDepthStencilResolveProperties</a>::<code>independentResolveNone</code>
is <code>VK_TRUE</code>, then the values of <code>depthResolveMode</code> and
<code>stencilResolveMode</code> <strong class="purple">must</strong> be identical or one of them <strong class="purple">must</strong> be
<code>VK_RESOLVE_MODE_NONE</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-04588" href="#VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-04588"></a> <span class="vuid">VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-04588</span><br>

If the <a href="chap43.html#VkFormat">VkFormat</a> of <code>pDepthStencilResolveAttachment</code> has a
depth component, <code>depthResolveMode</code> <strong class="purple">must</strong> be a valid
<a href="#VkResolveModeFlagBits">VkResolveModeFlagBits</a> value</p>
</li>
<li>
<p><a id="VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-04589" href="#VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-04589"></a> <span class="vuid">VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-04589</span><br>

If the <a href="chap43.html#VkFormat">VkFormat</a> of <code>pDepthStencilResolveAttachment</code> has a
stencil component, <code>stencilResolveMode</code> <strong class="purple">must</strong> be a valid
<a href="#VkResolveModeFlagBits">VkResolveModeFlagBits</a> value</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSubpassDescriptionDepthStencilResolve-sType-sType" href="#VUID-VkSubpassDescriptionDepthStencilResolve-sType-sType"></a> <span class="vuid">VUID-VkSubpassDescriptionDepthStencilResolve-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_SUBPASS_DESCRIPTION_DEPTH_STENCIL_RESOLVE</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-parameter" href="#VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-parameter"></a> <span class="vuid">VUID-VkSubpassDescriptionDepthStencilResolve-pDepthStencilResolveAttachment-parameter</span><br>
 If <code>pDepthStencilResolveAttachment</code> is not <code>NULL</code>, <code>pDepthStencilResolveAttachment</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkAttachmentReference2">VkAttachmentReference2</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of
<a href="#VkSubpassDescriptionDepthStencilResolve">VkSubpassDescriptionDepthStencilResolve</a>::<code>depthResolveMode</code> and
<code>stencilResolveMode</code>, specifying the depth and stencil resolve modes,
are:</p>
</div>
<div id="VkResolveModeFlagBits" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">enum</span> VkResolveModeFlagBits {
    VK_RESOLVE_MODE_NONE = <span class="integer">0</span>,
    VK_RESOLVE_MODE_SAMPLE_ZERO_BIT = <span class="hex">0x00000001</span>,
    VK_RESOLVE_MODE_AVERAGE_BIT = <span class="hex">0x00000002</span>,
    VK_RESOLVE_MODE_MIN_BIT = <span class="hex">0x00000004</span>,
    VK_RESOLVE_MODE_MAX_BIT = <span class="hex">0x00000008</span>,
  <span class="comment">// Provided by VK_KHR_depth_stencil_resolve</span>
    VK_RESOLVE_MODE_NONE_KHR = VK_RESOLVE_MODE_NONE,
  <span class="comment">// Provided by VK_KHR_depth_stencil_resolve</span>
    VK_RESOLVE_MODE_SAMPLE_ZERO_BIT_KHR = VK_RESOLVE_MODE_SAMPLE_ZERO_BIT,
  <span class="comment">// Provided by VK_KHR_depth_stencil_resolve</span>
    VK_RESOLVE_MODE_AVERAGE_BIT_KHR = VK_RESOLVE_MODE_AVERAGE_BIT,
  <span class="comment">// Provided by VK_KHR_depth_stencil_resolve</span>
    VK_RESOLVE_MODE_MIN_BIT_KHR = VK_RESOLVE_MODE_MIN_BIT,
  <span class="comment">// Provided by VK_KHR_depth_stencil_resolve</span>
    VK_RESOLVE_MODE_MAX_BIT_KHR = VK_RESOLVE_MODE_MAX_BIT,
} VkResolveModeFlagBits;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkResolveModeFlagBitsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_depth_stencil_resolve</span>
<span class="keyword">typedef</span> VkResolveModeFlagBits VkResolveModeFlagBitsKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_RESOLVE_MODE_NONE</code> indicates that no resolve operation is done.</p>
</li>
<li>
<p><code>VK_RESOLVE_MODE_SAMPLE_ZERO_BIT</code> indicates that result of the
resolve operation is equal to the value of sample 0.</p>
</li>
<li>
<p><code>VK_RESOLVE_MODE_AVERAGE_BIT</code> indicates that result of the resolve
operation is the average of the sample values.</p>
</li>
<li>
<p><code>VK_RESOLVE_MODE_MIN_BIT</code> indicates that result of the resolve
operation is the minimum of the sample values.</p>
</li>
<li>
<p><code>VK_RESOLVE_MODE_MAX_BIT</code> indicates that result of the resolve
operation is the maximum of the sample values.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkResolveModeFlags" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> VkFlags VkResolveModeFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkResolveModeFlagsKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_depth_stencil_resolve</span>
<span class="keyword">typedef</span> VkResolveModeFlags VkResolveModeFlagsKHR;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkResolveModeFlags</code> is a bitmask type for setting a mask of zero or
more <a href="#VkResolveModeFlagBits">VkResolveModeFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkFragmentShadingRateAttachmentInfoKHR</code> structure is defined as:</p>
</div>
<div id="VkFragmentShadingRateAttachmentInfoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_fragment_shading_rate</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkFragmentShadingRateAttachmentInfoKHR {
    VkStructureType                  sType;
    <span class="directive">const</span> <span class="directive">void</span>*                      pNext;
    <span class="directive">const</span> VkAttachmentReference2*    pFragmentShadingRateAttachment;
    VkExtent2D                       shadingRateAttachmentTexelSize;
} VkFragmentShadingRateAttachmentInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>pFragmentShadingRateAttachment</code> is an optional
<a href="#VkAttachmentReference2KHR">VkAttachmentReference2KHR</a> structure defining the fragment shading
rate attachment for this subpass.</p>
</li>
<li>
<p><code>shadingRateAttachmentTexelSize</code> specifies the size of the portion
of the framebuffer corresponding to each texel in
<code>pFragmentShadingRateAttachment</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If no shading rate attachment is specified, or if this structure isnt
specified, the implementation behaves as if a valid shading rate attachment
was specified with all texels specifying a single pixel per fragment.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04524" href="#VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04524"></a> <span class="vuid">VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04524</span><br>

If <code>pFragmentShadingRateAttachment</code> is not <code>NULL</code> and its
<code>attachment</code> member is not <code>VK_ATTACHMENT_UNUSED</code>, its
<code>layout</code> member <strong class="purple">must</strong> be equal to <code>VK_IMAGE_LAYOUT_GENERAL</code> or
<code>VK_IMAGE_LAYOUT_FRAGMENT_SHADING_RATE_ATTACHMENT_OPTIMAL_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04525" href="#VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04525"></a> <span class="vuid">VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04525</span><br>

If <code>pFragmentShadingRateAttachment</code> is not <code>NULL</code> and its
<code>attachment</code> member is not <code>VK_ATTACHMENT_UNUSED</code>,
<code>shadingRateAttachmentTexelSize.width</code> <strong class="purple">must</strong> be a power of two value</p>
</li>
<li>
<p><a id="VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04526" href="#VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04526"></a> <span class="vuid">VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04526</span><br>

If <code>pFragmentShadingRateAttachment</code> is not <code>NULL</code> and its
<code>attachment</code> member is not <code>VK_ATTACHMENT_UNUSED</code>,
<code>shadingRateAttachmentTexelSize.width</code> <strong class="purple">must</strong> be less than or equal
to <a href="chap42.html#limits-maxFragmentShadingRateAttachmentTexelSize"><code>maxFragmentShadingRateAttachmentTexelSize.width</code></a></p>
</li>
<li>
<p><a id="VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04527" href="#VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04527"></a> <span class="vuid">VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04527</span><br>

If <code>pFragmentShadingRateAttachment</code> is not <code>NULL</code> and its
<code>attachment</code> member is not <code>VK_ATTACHMENT_UNUSED</code>,
<code>shadingRateAttachmentTexelSize.width</code> <strong class="purple">must</strong> be greater than or
equal to <a href="chap42.html#limits-minFragmentShadingRateAttachmentTexelSize"><code>minFragmentShadingRateAttachmentTexelSize.width</code></a></p>
</li>
<li>
<p><a id="VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04528" href="#VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04528"></a> <span class="vuid">VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04528</span><br>

If <code>pFragmentShadingRateAttachment</code> is not <code>NULL</code> and its
<code>attachment</code> member is not <code>VK_ATTACHMENT_UNUSED</code>,
<code>shadingRateAttachmentTexelSize.height</code> <strong class="purple">must</strong> be a power of two
value</p>
</li>
<li>
<p><a id="VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04529" href="#VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04529"></a> <span class="vuid">VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04529</span><br>

If <code>pFragmentShadingRateAttachment</code> is not <code>NULL</code> and its
<code>attachment</code> member is not <code>VK_ATTACHMENT_UNUSED</code>,
<code>shadingRateAttachmentTexelSize.height</code> <strong class="purple">must</strong> be less than or equal
to <a href="chap42.html#limits-maxFragmentShadingRateAttachmentTexelSize"><code>maxFragmentShadingRateAttachmentTexelSize.height</code></a></p>
</li>
<li>
<p><a id="VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04530" href="#VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04530"></a> <span class="vuid">VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04530</span><br>

If <code>pFragmentShadingRateAttachment</code> is not <code>NULL</code> and its
<code>attachment</code> member is not <code>VK_ATTACHMENT_UNUSED</code>,
<code>shadingRateAttachmentTexelSize.height</code> <strong class="purple">must</strong> be greater than or
equal to <a href="chap42.html#limits-minFragmentShadingRateAttachmentTexelSize"><code>minFragmentShadingRateAttachmentTexelSize.height</code></a></p>
</li>
<li>
<p><a id="VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04531" href="#VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04531"></a> <span class="vuid">VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04531</span><br>

If <code>pFragmentShadingRateAttachment</code> is not <code>NULL</code> and its
<code>attachment</code> member is not <code>VK_ATTACHMENT_UNUSED</code>, the quotient
of <code>shadingRateAttachmentTexelSize.width</code> and
<code>shadingRateAttachmentTexelSize.height</code> <strong class="purple">must</strong> be less than or equal
to <a href="chap42.html#limits-maxFragmentShadingRateAttachmentTexelSizeAspectRatio"><code>maxFragmentShadingRateAttachmentTexelSizeAspectRatio</code></a></p>
</li>
<li>
<p><a id="VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04532" href="#VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04532"></a> <span class="vuid">VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-04532</span><br>

If <code>pFragmentShadingRateAttachment</code> is not <code>NULL</code> and its
<code>attachment</code> member is not <code>VK_ATTACHMENT_UNUSED</code>, the quotient
of <code>shadingRateAttachmentTexelSize.height</code> and
<code>shadingRateAttachmentTexelSize.width</code> <strong class="purple">must</strong> be less than or equal
to <a href="chap42.html#limits-maxFragmentShadingRateAttachmentTexelSizeAspectRatio"><code>maxFragmentShadingRateAttachmentTexelSizeAspectRatio</code></a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkFragmentShadingRateAttachmentInfoKHR-sType-sType" href="#VUID-VkFragmentShadingRateAttachmentInfoKHR-sType-sType"></a> <span class="vuid">VUID-VkFragmentShadingRateAttachmentInfoKHR-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_FRAGMENT_SHADING_RATE_ATTACHMENT_INFO_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-parameter" href="#VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-parameter"></a> <span class="vuid">VUID-VkFragmentShadingRateAttachmentInfoKHR-pFragmentShadingRateAttachment-parameter</span><br>
 <code>pFragmentShadingRateAttachment</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkAttachmentReference2">VkAttachmentReference2</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAttachmentReference2</code> structure is defined as:</p>
</div>
<div id="VkAttachmentReference2" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">struct</span> VkAttachmentReference2 {
    VkStructureType       sType;
    <span class="directive">const</span> <span class="directive">void</span>*           pNext;
    uint32_t              attachment;
    VkImageLayout         layout;
    VkImageAspectFlags    aspectMask;
} VkAttachmentReference2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkAttachmentReference2KHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_create_renderpass2</span>
<span class="keyword">typedef</span> VkAttachmentReference2 VkAttachmentReference2KHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>attachment</code> is either an integer value identifying an attachment at
the corresponding index in
<a href="#VkRenderPassCreateInfo">VkRenderPassCreateInfo</a>::<code>pAttachments</code>, or
<code>VK_ATTACHMENT_UNUSED</code> to signify that this attachment is not used.</p>
</li>
<li>
<p><code>layout</code> is a <a href="chap13.html#VkImageLayout">VkImageLayout</a> value specifying the layout the
attachment uses during the subpass.</p>
</li>
<li>
<p><code>aspectMask</code> is a mask of which aspect(s) <strong class="purple">can</strong> be accessed within
the specified subpass as an input attachment.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Parameters defined by this structure with the same name as those in
<a href="#VkAttachmentReference">VkAttachmentReference</a> have the identical effect to those parameters.</p>
</div>
<div class="paragraph">
<p><code>aspectMask</code> is ignored when this structure is used to describe anything
other than an input attachment reference.</p>
</div>
<div class="paragraph">
<p>If the <a href="chap41.html#features-separateDepthStencilLayouts"><code>separateDepthStencilLayouts</code></a> feature is enabled, and <code>attachment</code>
has a depth/stencil format, <code>layout</code> <strong class="purple">can</strong> be set to a layout that only
specifies the layout of the depth aspect.</p>
</div>
<div class="paragraph">
<p>If <code>layout</code> only specifies the layout of the depth aspect of the
attachment, the layout of the stencil aspect is specified by the
<code>stencilLayout</code> member of a <a href="#VkAttachmentReferenceStencilLayout">VkAttachmentReferenceStencilLayout</a>
structure included in the <code>pNext</code> chain.
Otherwise, <code>layout</code> describes the layout for all relevant image aspects.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAttachmentReference2-layout-03077" href="#VUID-VkAttachmentReference2-layout-03077"></a> <span class="vuid">VUID-VkAttachmentReference2-layout-03077</span><br>

If <code>attachment</code> is not <code>VK_ATTACHMENT_UNUSED</code>, <code>layout</code>
<strong class="purple">must</strong> not be <code>VK_IMAGE_LAYOUT_UNDEFINED</code>,
<code>VK_IMAGE_LAYOUT_PREINITIALIZED</code>, or
<code>VK_IMAGE_LAYOUT_PRESENT_SRC_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentReference2-separateDepthStencilLayouts-03313" href="#VUID-VkAttachmentReference2-separateDepthStencilLayouts-03313"></a> <span class="vuid">VUID-VkAttachmentReference2-separateDepthStencilLayouts-03313</span><br>

If the <a href="chap41.html#features-separateDepthStencilLayouts"><code>separateDepthStencilLayouts</code></a> feature is not enabled, and
<code>attachment</code> is not <code>VK_ATTACHMENT_UNUSED</code>, <code>layout</code> <strong class="purple">must</strong>
not be <code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code>,</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAttachmentReference2-sType-sType" href="#VUID-VkAttachmentReference2-sType-sType"></a> <span class="vuid">VUID-VkAttachmentReference2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_ATTACHMENT_REFERENCE_2</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentReference2-pNext-pNext" href="#VUID-VkAttachmentReference2-pNext-pNext"></a> <span class="vuid">VUID-VkAttachmentReference2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="#VkAttachmentReferenceStencilLayout">VkAttachmentReferenceStencilLayout</a></p>
</li>
<li>
<p><a id="VUID-VkAttachmentReference2-sType-unique" href="#VUID-VkAttachmentReference2-sType-unique"></a> <span class="vuid">VUID-VkAttachmentReference2-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkAttachmentReference2-layout-parameter" href="#VUID-VkAttachmentReference2-layout-parameter"></a> <span class="vuid">VUID-VkAttachmentReference2-layout-parameter</span><br>
 <code>layout</code> <strong class="purple">must</strong> be a valid <a href="chap13.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAttachmentReferenceStencilLayout</code> structure is defined as:</p>
</div>
<div id="VkAttachmentReferenceStencilLayout" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">struct</span> VkAttachmentReferenceStencilLayout {
    VkStructureType    sType;
    <span class="directive">void</span>*              pNext;
    VkImageLayout      stencilLayout;
} VkAttachmentReferenceStencilLayout;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkAttachmentReferenceStencilLayoutKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_separate_depth_stencil_layouts</span>
<span class="keyword">typedef</span> VkAttachmentReferenceStencilLayout VkAttachmentReferenceStencilLayoutKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>stencilLayout</code> is a <a href="chap13.html#VkImageLayout">VkImageLayout</a> value specifying the layout
the stencil aspect of the attachment uses during the subpass.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAttachmentReferenceStencilLayout-stencilLayout-03318" href="#VUID-VkAttachmentReferenceStencilLayout-stencilLayout-03318"></a> <span class="vuid">VUID-VkAttachmentReferenceStencilLayout-stencilLayout-03318</span><br>

<code>stencilLayout</code> <strong class="purple">must</strong> not be <code>VK_IMAGE_LAYOUT_UNDEFINED</code>,
<code>VK_IMAGE_LAYOUT_PREINITIALIZED</code>,
<code>VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_PRESENT_SRC_KHR</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAttachmentReferenceStencilLayout-sType-sType" href="#VUID-VkAttachmentReferenceStencilLayout-sType-sType"></a> <span class="vuid">VUID-VkAttachmentReferenceStencilLayout-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_ATTACHMENT_REFERENCE_STENCIL_LAYOUT</code></p>
</li>
<li>
<p><a id="VUID-VkAttachmentReferenceStencilLayout-stencilLayout-parameter" href="#VUID-VkAttachmentReferenceStencilLayout-stencilLayout-parameter"></a> <span class="vuid">VUID-VkAttachmentReferenceStencilLayout-stencilLayout-parameter</span><br>
 <code>stencilLayout</code> <strong class="purple">must</strong> be a valid <a href="chap13.html#VkImageLayout">VkImageLayout</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkSubpassDependency2</code> structure is defined as:</p>
</div>
<div id="VkSubpassDependency2" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">struct</span> VkSubpassDependency2 {
    VkStructureType         sType;
    <span class="directive">const</span> <span class="directive">void</span>*             pNext;
    uint32_t                srcSubpass;
    uint32_t                dstSubpass;
    VkPipelineStageFlags    srcStageMask;
    VkPipelineStageFlags    dstStageMask;
    VkAccessFlags           srcAccessMask;
    VkAccessFlags           dstAccessMask;
    VkDependencyFlags       dependencyFlags;
    int32_t                 viewOffset;
} VkSubpassDependency2;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkSubpassDependency2KHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_create_renderpass2</span>
<span class="keyword">typedef</span> VkSubpassDependency2 VkSubpassDependency2KHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>srcSubpass</code> is the subpass index of the first subpass in the
dependency, or <code>VK_SUBPASS_EXTERNAL</code>.</p>
</li>
<li>
<p><code>dstSubpass</code> is the subpass index of the second subpass in the
dependency, or <code>VK_SUBPASS_EXTERNAL</code>.</p>
</li>
<li>
<p><code>srcStageMask</code> is a bitmask of <a href="chap8.html#VkPipelineStageFlagBits">VkPipelineStageFlagBits</a>
specifying the <a href="chap8.html#synchronization-pipeline-stages-masks">source stage
mask</a>.</p>
</li>
<li>
<p><code>dstStageMask</code> is a bitmask of <a href="chap8.html#VkPipelineStageFlagBits">VkPipelineStageFlagBits</a>
specifying the <a href="chap8.html#synchronization-pipeline-stages-masks">destination
stage mask</a></p>
</li>
<li>
<p><code>srcAccessMask</code> is a bitmask of <a href="chap8.html#VkAccessFlagBits">VkAccessFlagBits</a> specifying a
<a href="chap8.html#synchronization-access-masks">source access mask</a>.</p>
</li>
<li>
<p><code>dstAccessMask</code> is a bitmask of <a href="chap8.html#VkAccessFlagBits">VkAccessFlagBits</a> specifying a
<a href="chap8.html#synchronization-access-masks">destination access mask</a>.</p>
</li>
<li>
<p><code>dependencyFlags</code> is a bitmask of <a href="chap8.html#VkDependencyFlagBits">VkDependencyFlagBits</a>.</p>
</li>
<li>
<p><code>viewOffset</code> controls which views in the source subpass the views in
the destination subpass depend on.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Parameters defined by this structure with the same name as those in
<a href="#VkSubpassDependency">VkSubpassDependency</a> have the identical effect to those parameters.</p>
</div>
<div class="paragraph">
<p><code>viewOffset</code> has the same effect for the described subpass dependency as
<a href="#VkRenderPassMultiviewCreateInfo">VkRenderPassMultiviewCreateInfo</a>::<code>pViewOffsets</code> has on each
corresponding subpass dependency.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSubpassDependency2-srcStageMask-03080" href="#VUID-VkSubpassDependency2-srcStageMask-03080"></a> <span class="vuid">VUID-VkSubpassDependency2-srcStageMask-03080</span><br>

If the <a href="chap41.html#features-geometryShader">geometry shaders</a> feature is not
enabled, <code>srcStageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_GEOMETRY_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-dstStageMask-03081" href="#VUID-VkSubpassDependency2-dstStageMask-03081"></a> <span class="vuid">VUID-VkSubpassDependency2-dstStageMask-03081</span><br>

If the <a href="chap41.html#features-geometryShader">geometry shaders</a> feature is not
enabled, <code>dstStageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_GEOMETRY_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-srcStageMask-03082" href="#VUID-VkSubpassDependency2-srcStageMask-03082"></a> <span class="vuid">VUID-VkSubpassDependency2-srcStageMask-03082</span><br>

If the <a href="chap41.html#features-tessellationShader">tessellation shaders</a> feature is
not enabled, <code>srcStageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_TESSELLATION_CONTROL_SHADER_BIT</code> or
<code>VK_PIPELINE_STAGE_TESSELLATION_EVALUATION_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-dstStageMask-03083" href="#VUID-VkSubpassDependency2-dstStageMask-03083"></a> <span class="vuid">VUID-VkSubpassDependency2-dstStageMask-03083</span><br>

If the <a href="chap41.html#features-tessellationShader">tessellation shaders</a> feature is
not enabled, <code>dstStageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_TESSELLATION_CONTROL_SHADER_BIT</code> or
<code>VK_PIPELINE_STAGE_TESSELLATION_EVALUATION_SHADER_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-srcSubpass-03084" href="#VUID-VkSubpassDependency2-srcSubpass-03084"></a> <span class="vuid">VUID-VkSubpassDependency2-srcSubpass-03084</span><br>

<code>srcSubpass</code> <strong class="purple">must</strong> be less than or equal to <code>dstSubpass</code>, unless
one of them is <code>VK_SUBPASS_EXTERNAL</code>, to avoid cyclic dependencies
and ensure a valid execution order</p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-srcSubpass-03085" href="#VUID-VkSubpassDependency2-srcSubpass-03085"></a> <span class="vuid">VUID-VkSubpassDependency2-srcSubpass-03085</span><br>

<code>srcSubpass</code> and <code>dstSubpass</code> <strong class="purple">must</strong> not both be equal to
<code>VK_SUBPASS_EXTERNAL</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-srcSubpass-03087" href="#VUID-VkSubpassDependency2-srcSubpass-03087"></a> <span class="vuid">VUID-VkSubpassDependency2-srcSubpass-03087</span><br>

If <code>srcSubpass</code> is equal to <code>dstSubpass</code> and not all of the
stages in <code>srcStageMask</code> and <code>dstStageMask</code> are
<a href="chap8.html#synchronization-framebuffer-regions">framebuffer-space stages</a>, the
<a href="chap8.html#synchronization-pipeline-stages-order">logically latest</a> pipeline
stage in <code>srcStageMask</code> <strong class="purple">must</strong> be
<a href="chap8.html#synchronization-pipeline-stages-order">logically earlier</a> than or
equal to the <a href="chap8.html#synchronization-pipeline-stages-order">logically
earliest</a> pipeline stage in <code>dstStageMask</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-srcAccessMask-03088" href="#VUID-VkSubpassDependency2-srcAccessMask-03088"></a> <span class="vuid">VUID-VkSubpassDependency2-srcAccessMask-03088</span><br>

Any access flag included in <code>srcAccessMask</code> <strong class="purple">must</strong> be supported by
one of the pipeline stages in <code>srcStageMask</code>, as specified in the
<a href="chap8.html#synchronization-access-types-supported">table of supported access
types</a></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-dstAccessMask-03089" href="#VUID-VkSubpassDependency2-dstAccessMask-03089"></a> <span class="vuid">VUID-VkSubpassDependency2-dstAccessMask-03089</span><br>

Any access flag included in <code>dstAccessMask</code> <strong class="purple">must</strong> be supported by
one of the pipeline stages in <code>dstStageMask</code>, as specified in the
<a href="chap8.html#synchronization-access-types-supported">table of supported access
types</a></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-dependencyFlags-03090" href="#VUID-VkSubpassDependency2-dependencyFlags-03090"></a> <span class="vuid">VUID-VkSubpassDependency2-dependencyFlags-03090</span><br>

If <code>dependencyFlags</code> includes <code>VK_DEPENDENCY_VIEW_LOCAL_BIT</code>,
<code>srcSubpass</code> <strong class="purple">must</strong> not be equal to <code>VK_SUBPASS_EXTERNAL</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-dependencyFlags-03091" href="#VUID-VkSubpassDependency2-dependencyFlags-03091"></a> <span class="vuid">VUID-VkSubpassDependency2-dependencyFlags-03091</span><br>

If <code>dependencyFlags</code> includes <code>VK_DEPENDENCY_VIEW_LOCAL_BIT</code>,
<code>dstSubpass</code> <strong class="purple">must</strong> not be equal to <code>VK_SUBPASS_EXTERNAL</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-srcSubpass-02245" href="#VUID-VkSubpassDependency2-srcSubpass-02245"></a> <span class="vuid">VUID-VkSubpassDependency2-srcSubpass-02245</span><br>

If <code>srcSubpass</code> equals <code>dstSubpass</code>, and <code>srcStageMask</code> and
<code>dstStageMask</code> both include a
<a href="chap8.html#synchronization-framebuffer-regions">framebuffer-space stage</a>, then
<code>dependencyFlags</code> <strong class="purple">must</strong> include <code>VK_DEPENDENCY_BY_REGION_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-viewOffset-02530" href="#VUID-VkSubpassDependency2-viewOffset-02530"></a> <span class="vuid">VUID-VkSubpassDependency2-viewOffset-02530</span><br>

If <code>viewOffset</code> is not equal to <code>0</code>, <code>srcSubpass</code> <strong class="purple">must</strong> not be
equal to <code>dstSubpass</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-dependencyFlags-03092" href="#VUID-VkSubpassDependency2-dependencyFlags-03092"></a> <span class="vuid">VUID-VkSubpassDependency2-dependencyFlags-03092</span><br>

If <code>dependencyFlags</code> does not include
<code>VK_DEPENDENCY_VIEW_LOCAL_BIT</code>, <code>viewOffset</code> <strong class="purple">must</strong> be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-srcStageMask-02103" href="#VUID-VkSubpassDependency2-srcStageMask-02103"></a> <span class="vuid">VUID-VkSubpassDependency2-srcStageMask-02103</span><br>

If the <a href="chap41.html#features-meshShader">mesh shaders</a> feature is not enabled,
<code>srcStageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_MESH_SHADER_BIT_NV</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-srcStageMask-02104" href="#VUID-VkSubpassDependency2-srcStageMask-02104"></a> <span class="vuid">VUID-VkSubpassDependency2-srcStageMask-02104</span><br>

If the <a href="chap41.html#features-taskShader">task shaders</a> feature is not enabled,
<code>srcStageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_TASK_SHADER_BIT_NV</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-dstStageMask-02105" href="#VUID-VkSubpassDependency2-dstStageMask-02105"></a> <span class="vuid">VUID-VkSubpassDependency2-dstStageMask-02105</span><br>

If the <a href="chap41.html#features-meshShader">mesh shaders</a> feature is not enabled,
<code>dstStageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_MESH_SHADER_BIT_NV</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-dstStageMask-02106" href="#VUID-VkSubpassDependency2-dstStageMask-02106"></a> <span class="vuid">VUID-VkSubpassDependency2-dstStageMask-02106</span><br>

If the <a href="chap41.html#features-taskShader">task shaders</a> feature is not enabled,
<code>dstStageMask</code> <strong class="purple">must</strong> not contain
<code>VK_PIPELINE_STAGE_TASK_SHADER_BIT_NV</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSubpassDependency2-sType-sType" href="#VUID-VkSubpassDependency2-sType-sType"></a> <span class="vuid">VUID-VkSubpassDependency2-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_SUBPASS_DEPENDENCY_2</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-pNext-pNext" href="#VUID-VkSubpassDependency2-pNext-pNext"></a> <span class="vuid">VUID-VkSubpassDependency2-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-srcStageMask-parameter" href="#VUID-VkSubpassDependency2-srcStageMask-parameter"></a> <span class="vuid">VUID-VkSubpassDependency2-srcStageMask-parameter</span><br>
 <code>srcStageMask</code> <strong class="purple">must</strong> be a valid combination of <a href="chap8.html#VkPipelineStageFlagBits">VkPipelineStageFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-srcStageMask-requiredbitmask" href="#VUID-VkSubpassDependency2-srcStageMask-requiredbitmask"></a> <span class="vuid">VUID-VkSubpassDependency2-srcStageMask-requiredbitmask</span><br>
 <code>srcStageMask</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-dstStageMask-parameter" href="#VUID-VkSubpassDependency2-dstStageMask-parameter"></a> <span class="vuid">VUID-VkSubpassDependency2-dstStageMask-parameter</span><br>
 <code>dstStageMask</code> <strong class="purple">must</strong> be a valid combination of <a href="chap8.html#VkPipelineStageFlagBits">VkPipelineStageFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-dstStageMask-requiredbitmask" href="#VUID-VkSubpassDependency2-dstStageMask-requiredbitmask"></a> <span class="vuid">VUID-VkSubpassDependency2-dstStageMask-requiredbitmask</span><br>
 <code>dstStageMask</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-srcAccessMask-parameter" href="#VUID-VkSubpassDependency2-srcAccessMask-parameter"></a> <span class="vuid">VUID-VkSubpassDependency2-srcAccessMask-parameter</span><br>
 <code>srcAccessMask</code> <strong class="purple">must</strong> be a valid combination of <a href="chap8.html#VkAccessFlagBits">VkAccessFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-dstAccessMask-parameter" href="#VUID-VkSubpassDependency2-dstAccessMask-parameter"></a> <span class="vuid">VUID-VkSubpassDependency2-dstAccessMask-parameter</span><br>
 <code>dstAccessMask</code> <strong class="purple">must</strong> be a valid combination of <a href="chap8.html#VkAccessFlagBits">VkAccessFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkSubpassDependency2-dependencyFlags-parameter" href="#VUID-VkSubpassDependency2-dependencyFlags-parameter"></a> <span class="vuid">VUID-VkSubpassDependency2-dependencyFlags-parameter</span><br>
 <code>dependencyFlags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap8.html#VkDependencyFlagBits">VkDependencyFlagBits</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy a render pass, call:</p>
</div>
<div id="vkDestroyRenderPass" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="directive">void</span> vkDestroyRenderPass(
    VkDevice                                    device,
    VkRenderPass                                renderPass,
    <span class="directive">const</span> VkAllocationCallbacks*                pAllocator);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the render pass.</p>
</li>
<li>
<p><code>renderPass</code> is the handle of the render pass to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap12.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyRenderPass-renderPass-00873" href="#VUID-vkDestroyRenderPass-renderPass-00873"></a> <span class="vuid">VUID-vkDestroyRenderPass-renderPass-00873</span><br>

All submitted commands that refer to <code>renderPass</code> <strong class="purple">must</strong> have
completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyRenderPass-renderPass-00874" href="#VUID-vkDestroyRenderPass-renderPass-00874"></a> <span class="vuid">VUID-vkDestroyRenderPass-renderPass-00874</span><br>

If <code>VkAllocationCallbacks</code> were provided when <code>renderPass</code> was
created, a compatible set of callbacks <strong class="purple">must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyRenderPass-renderPass-00875" href="#VUID-vkDestroyRenderPass-renderPass-00875"></a> <span class="vuid">VUID-vkDestroyRenderPass-renderPass-00875</span><br>

If no <code>VkAllocationCallbacks</code> were provided when <code>renderPass</code>
was created, <code>pAllocator</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyRenderPass-device-parameter" href="#VUID-vkDestroyRenderPass-device-parameter"></a> <span class="vuid">VUID-vkDestroyRenderPass-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyRenderPass-renderPass-parameter" href="#VUID-vkDestroyRenderPass-renderPass-parameter"></a> <span class="vuid">VUID-vkDestroyRenderPass-renderPass-parameter</span><br>
 If <code>renderPass</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>renderPass</code> <strong class="purple">must</strong> be a valid <a href="#VkRenderPass">VkRenderPass</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyRenderPass-pAllocator-parameter" href="#VUID-vkDestroyRenderPass-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyRenderPass-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyRenderPass-renderPass-parent" href="#VUID-vkDestroyRenderPass-renderPass-parent"></a> <span class="vuid">VUID-vkDestroyRenderPass-renderPass-parent</span><br>
 If <code>renderPass</code> is a valid handle, it <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>renderPass</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="renderpass-compatibility"><a class="anchor" href="#renderpass-compatibility"></a>8.2. Render Pass Compatibility</h3>
<div class="paragraph">
<p>Framebuffers and graphics pipelines are created based on a specific render
pass object.
They <strong class="purple">must</strong> only be used with that render pass object, or one compatible with
it.</p>
</div>
<div class="paragraph">
<p>Two attachment references are compatible if they have matching format and
sample count, or are both <code>VK_ATTACHMENT_UNUSED</code> or the pointer that
would contain the reference is <code>NULL</code>.</p>
</div>
<div class="paragraph">
<p>Two arrays of attachment references are compatible if all corresponding
pairs of attachments are compatible.
If the arrays are of different lengths, attachment references not present in
the smaller array are treated as <code>VK_ATTACHMENT_UNUSED</code>.</p>
</div>
<div class="paragraph">
<p>Two render passes are compatible if their corresponding color, input,
resolve, and depth/stencil attachment references are compatible and if they
are otherwise identical except for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Initial and final image layout in attachment descriptions</p>
</li>
<li>
<p>Load and store operations in attachment descriptions</p>
</li>
<li>
<p>Image layout in attachment references</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As an additional special case, if two render passes have a single subpass,
the resolve attachment reference
and depth/stencil resolve mode
compatibility requirements are ignored.</p>
</div>
<div class="paragraph">
<p>A framebuffer is compatible with a render pass if it was created using the
same render pass or a compatible render pass.</p>
</div>
</div>
<div class="sect2">
<h3 id="_framebuffers"><a class="anchor" href="#_framebuffers"></a>8.3. Framebuffers</h3>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Render passes operate in conjunction with <em>framebuffers</em>.
Framebuffers represent a collection of specific memory attachments that a
render pass instance uses.</p>
</div>
<div class="paragraph">
<p>Framebuffers are represented by <code>VkFramebuffer</code> handles:</p>
</div>
<div id="VkFramebuffer" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
VK_DEFINE_NON_DISPATCHABLE_HANDLE(VkFramebuffer)</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To create a framebuffer, call:</p>
</div>
<div id="vkCreateFramebuffer" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
VkResult vkCreateFramebuffer(
    VkDevice                                    device,
    <span class="directive">const</span> VkFramebufferCreateInfo*              pCreateInfo,
    <span class="directive">const</span> VkAllocationCallbacks*                pAllocator,
    VkFramebuffer*                              pFramebuffer);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that creates the framebuffer.</p>
</li>
<li>
<p><code>pCreateInfo</code> is a pointer to a <a href="#VkFramebufferCreateInfo">VkFramebufferCreateInfo</a>
structure describing additional information about framebuffer creation.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap12.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
<li>
<p><code>pFramebuffer</code> is a pointer to a <a href="#VkFramebuffer">VkFramebuffer</a> handle in which
the resulting framebuffer object is returned.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateFramebuffer-pCreateInfo-02777" href="#VUID-vkCreateFramebuffer-pCreateInfo-02777"></a> <span class="vuid">VUID-vkCreateFramebuffer-pCreateInfo-02777</span><br>

If <code>pCreateInfo-&gt;flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, and <code>attachmentCount</code> is
not <code>0</code>, each element of <code>pCreateInfo-&gt;pAttachments</code> <strong class="purple">must</strong> have been
created on <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCreateFramebuffer-device-parameter" href="#VUID-vkCreateFramebuffer-device-parameter"></a> <span class="vuid">VUID-vkCreateFramebuffer-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCreateFramebuffer-pCreateInfo-parameter" href="#VUID-vkCreateFramebuffer-pCreateInfo-parameter"></a> <span class="vuid">VUID-vkCreateFramebuffer-pCreateInfo-parameter</span><br>
 <code>pCreateInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkFramebufferCreateInfo">VkFramebufferCreateInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateFramebuffer-pAllocator-parameter" href="#VUID-vkCreateFramebuffer-pAllocator-parameter"></a> <span class="vuid">VUID-vkCreateFramebuffer-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCreateFramebuffer-pFramebuffer-parameter" href="#VUID-vkCreateFramebuffer-pFramebuffer-parameter"></a> <span class="vuid">VUID-vkCreateFramebuffer-pFramebuffer-parameter</span><br>
 <code>pFramebuffer</code> <strong class="purple">must</strong> be a valid pointer to a <a href="#VkFramebuffer">VkFramebuffer</a> handle</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Return Codes</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="chap4.html#fundamentals-successcodes">Success</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUCCESS</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="chap4.html#fundamentals-errorcodes">Failure</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>VK_ERROR_OUT_OF_HOST_MEMORY</code></p>
</li>
<li>
<p><code>VK_ERROR_OUT_OF_DEVICE_MEMORY</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkFramebufferCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkFramebufferCreateInfo" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkFramebufferCreateInfo {
    VkStructureType             sType;
    <span class="directive">const</span> <span class="directive">void</span>*                 pNext;
    VkFramebufferCreateFlags    flags;
    VkRenderPass                renderPass;
    uint32_t                    attachmentCount;
    <span class="directive">const</span> VkImageView*          pAttachments;
    uint32_t                    width;
    uint32_t                    height;
    uint32_t                    layers;
} VkFramebufferCreateInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="#VkFramebufferCreateFlagBits">VkFramebufferCreateFlagBits</a></p>
</li>
<li>
<p><code>renderPass</code> is a render pass defining what render passes the
framebuffer will be compatible with.
See <a href="#renderpass-compatibility">Render Pass Compatibility</a> for details.</p>
</li>
<li>
<p><code>attachmentCount</code> is the number of attachments.</p>
</li>
<li>
<p><code>pAttachments</code> is a pointer to an array of <a href="chap13.html#VkImageView">VkImageView</a>
handles, each of which will be used as the corresponding attachment in a
render pass instance.
If <code>flags</code> includes <code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, this
parameter is ignored.</p>
</li>
<li>
<p><code>width</code>, <code>height</code> and <code>layers</code> define the dimensions of the
framebuffer.
If the render pass uses multiview, then <code>layers</code> <strong class="purple">must</strong> be one and
each attachment requires a number of layers that is greater than the
maximum bit index set in the view mask in the subpasses in which it is
used.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Other than the exceptions listed below, applications <strong class="purple">must</strong> ensure that all
accesses to memory that backs image subresources used as attachments in a
given renderpass instance either happen-before the
<a href="#renderpass-load-store-ops">load operations</a> for those attachments, or
happen-after the <a href="#renderpass-load-store-ops">store operations</a> for those
attachments.</p>
</div>
<div id="renderpass-attachment-nonattachment" class="paragraph">
<p>The exceptions to the general rule are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For depth/stencil attachments, an aspect <strong class="purple">can</strong> be used separately as
attachment and non-attachment if both accesses are read-only.</p>
</li>
<li>
<p>For depth/stencil attachments, each aspect <strong class="purple">can</strong> be used separately as
attachments and non-attachments as long as the non-attachment accesses are
also via an image subresource in either the
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</code> layout or
the <code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</code> layout,
and the attachment resource uses whichever of those two layouts the image
accesses do not.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Use of non-attachment aspects in these cases is only well defined if the
attachment is used in the subpass where the non-attachment access is being
made, or the layout of the image subresource is constant throughout the
entire render pass instance, including the <code>initialLayout</code> and
<code>finalLayout</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>These restrictions mean
that the render pass has full knowledge of all uses of all of the
attachments, so that the implementation is able to make correct decisions
about when and how to perform layout transitions, when to overlap execution
of subpasses, etc.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="renderpass-noattachments" class="paragraph">
<p>It is legal for a subpass to use no color or depth/stencil attachments,
either because it has no attachment references or because all of them are
<code>VK_ATTACHMENT_UNUSED</code>.
This kind of subpass <strong class="purple">can</strong> use shader side effects such as image stores and
atomics to produce an output.
In this case, the subpass continues to use the <code>width</code>, <code>height</code>,
and <code>layers</code> of the framebuffer to define the dimensions of the
rendering area, and the <code>rasterizationSamples</code> from each pipelines
<a href="chap28.html#VkPipelineMultisampleStateCreateInfo">VkPipelineMultisampleStateCreateInfo</a> to define the number of samples
used in rasterization; however, if
<a href="chap41.html#VkPhysicalDeviceFeatures">VkPhysicalDeviceFeatures</a>::<code>variableMultisampleRate</code> is
<code>VK_FALSE</code>, then all pipelines to be bound with the subpass <strong class="purple">must</strong> have
the same value for
<a href="chap28.html#VkPipelineMultisampleStateCreateInfo">VkPipelineMultisampleStateCreateInfo</a>::<code>rasterizationSamples</code>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-attachmentCount-00876" href="#VUID-VkFramebufferCreateInfo-attachmentCount-00876"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-attachmentCount-00876</span><br>

<code>attachmentCount</code> <strong class="purple">must</strong> be equal to the attachment count specified
in <code>renderPass</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-02778" href="#VUID-VkFramebufferCreateInfo-flags-02778"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-02778</span><br>

If <code>flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, and <code>attachmentCount</code> is
not <code>0</code>, <code>pAttachments</code> <strong class="purple">must</strong> be a valid pointer to an array of
<code>attachmentCount</code> valid <a href="chap13.html#VkImageView">VkImageView</a> handles</p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-pAttachments-00877" href="#VUID-VkFramebufferCreateInfo-pAttachments-00877"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-pAttachments-00877</span><br>

If <code>flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of
<code>pAttachments</code> that is used as a color attachment or resolve
attachment by <code>renderPass</code> <strong class="purple">must</strong> have been created with a
<code>usage</code> value including <code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-pAttachments-02633" href="#VUID-VkFramebufferCreateInfo-pAttachments-02633"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-pAttachments-02633</span><br>

If <code>flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of
<code>pAttachments</code> that is used as a depth/stencil attachment by
<code>renderPass</code> <strong class="purple">must</strong> have been created with a <code>usage</code> value
including <code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-pAttachments-02634" href="#VUID-VkFramebufferCreateInfo-pAttachments-02634"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-pAttachments-02634</span><br>

If <code>flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of
<code>pAttachments</code> that is used as a depth/stencil resolve attachment by
<code>renderPass</code> <strong class="purple">must</strong> have been created with a <code>usage</code> value
including <code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-pAttachments-00879" href="#VUID-VkFramebufferCreateInfo-pAttachments-00879"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-pAttachments-00879</span><br>

If <code>flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of
<code>pAttachments</code> that is used as an input attachment by
<code>renderPass</code> <strong class="purple">must</strong> have been created with a <code>usage</code> value
including <code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-pAttachments-02552" href="#VUID-VkFramebufferCreateInfo-pAttachments-02552"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-pAttachments-02552</span><br>

Each element of <code>pAttachments</code> that is used as a fragment density
map attachment by <code>renderPass</code> <strong class="purple">must</strong> not have been created with a
<code>flags</code> value including <code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-renderPass-02553" href="#VUID-VkFramebufferCreateInfo-renderPass-02553"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-renderPass-02553</span><br>

If <code>renderPass</code> has a fragment density map attachment and
<a href="chap41.html#features-fragmentDensityMapNonSubsampledImages">non-subsample image
feature</a> is not enabled, each element of <code>pAttachments</code> <strong class="purple">must</strong> have
been created with a <code>flags</code> value including
<code>VK_IMAGE_CREATE_SUBSAMPLED_BIT_EXT</code> unless that element is the
fragment density map attachment</p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-pAttachments-00880" href="#VUID-VkFramebufferCreateInfo-pAttachments-00880"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-pAttachments-00880</span><br>

If <code>flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of
<code>pAttachments</code> <strong class="purple">must</strong> have been created with a <a href="chap43.html#VkFormat">VkFormat</a> value
that matches the <a href="chap43.html#VkFormat">VkFormat</a> specified by the corresponding
<code>VkAttachmentDescription</code> in <code>renderPass</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-pAttachments-00881" href="#VUID-VkFramebufferCreateInfo-pAttachments-00881"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-pAttachments-00881</span><br>

If <code>flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of
<code>pAttachments</code> <strong class="purple">must</strong> have been created with a <code>samples</code> value
that matches the <code>samples</code> value specified by the corresponding
<code>VkAttachmentDescription</code> in <code>renderPass</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-04533" href="#VUID-VkFramebufferCreateInfo-flags-04533"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-04533</span><br>

If <code>flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of
<code>pAttachments</code> that is used as an input, color, resolve, or
depth/stencil attachment by <code>renderPass</code> <strong class="purple">must</strong> have been created
with a VkImageCreateInfo::<code>width</code> greater than or equal to
<code>width</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-04534" href="#VUID-VkFramebufferCreateInfo-flags-04534"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-04534</span><br>

If <code>flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of
<code>pAttachments</code> that is used as an input, color, resolve, or
depth/stencil attachment by <code>renderPass</code> <strong class="purple">must</strong> have been created
with a VkImageCreateInfo::<code>height</code> greater than or equal to
<code>height</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-04535" href="#VUID-VkFramebufferCreateInfo-flags-04535"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-04535</span><br>

If <code>flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of
<code>pAttachments</code> that is used as an input, color, resolve, or
depth/stencil attachment by <code>renderPass</code> <strong class="purple">must</strong> have been created
with a VkImageViewCreateInfo::<code>subresourceRange.layerCount</code> greater
than or equal to <code>layers</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-renderPass-04536" href="#VUID-VkFramebufferCreateInfo-renderPass-04536"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-renderPass-04536</span><br>

If <code>renderPass</code> was specified with non-zero view masks, each element
of <code>pAttachments</code> that is used as an input, color, resolve, or
depth/stencil attachment by <code>renderPass</code> <strong class="purple">must</strong> have a
<code>layerCount</code> greater than the index of the most significant bit set
in any of those view masks</p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-renderPass-02746" href="#VUID-VkFramebufferCreateInfo-renderPass-02746"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-renderPass-02746</span><br>

If <code>renderPass</code> was specified with non-zero view masks, each element
of <code>pAttachments</code> that is referenced by
<code>fragmentDensityMapAttachment</code> <strong class="purple">must</strong> have a <code>layerCount</code> equal
to <code>1</code> or greater than the index of the most significant bit set in any
of those view masks</p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-renderPass-02747" href="#VUID-VkFramebufferCreateInfo-renderPass-02747"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-renderPass-02747</span><br>

If <code>renderPass</code> was not specified with non-zero view masks, each
element of <code>pAttachments</code> that is referenced by
<code>fragmentDensityMapAttachment</code> <strong class="purple">must</strong> have a <code>layerCount</code> equal
to <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-pAttachments-02555" href="#VUID-VkFramebufferCreateInfo-pAttachments-02555"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-pAttachments-02555</span><br>

If <code>flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, an element of
<code>pAttachments</code> that is referenced by
<code>fragmentDensityMapAttachment</code> <strong class="purple">must</strong> have a width at least as large
as
<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.80002em;vertical-align:-0.65002em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size2"></span></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">g</span><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">s</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">x</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="mord mtight"><span class="mord mathdefault mtight">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.02691em;">w</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight">h</span></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.02691em;">w</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight">h</span></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size2"></span></span></span></span></span></span></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-pAttachments-02556" href="#VUID-VkFramebufferCreateInfo-pAttachments-02556"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-pAttachments-02556</span><br>

If <code>flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, an element of
<code>pAttachments</code> that is referenced by
<code>fragmentDensityMapAttachment</code> <strong class="purple">must</strong> have a height at least as large
as
<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.80002em;vertical-align:-0.65002em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size2"></span></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9322159999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">g</span><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">s</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">x</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="mord mtight"><span class="mord mathdefault mtight">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">h</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">g</span><span class="mord mathdefault mtight">h</span><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.29011428571428566em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">h</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">g</span><span class="mord mathdefault mtight">h</span><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.5480799999999999em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size2"></span></span></span></span></span></span></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-04537" href="#VUID-VkFramebufferCreateInfo-flags-04537"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-04537</span><br>

If <code>flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, and <code>renderPass</code> was
specified with non-zero view masks, each element of <code>pAttachments</code>
that is used as a <a href="chap28.html#primsrast-fragment-shading-rate-attachment">fragment
shading rate attachment</a> by <code>renderPass</code> <strong class="purple">must</strong> have a
<code>layerCount</code> that is either <code>1</code>, or greater than the index of the
most significant bit set in any of those view masks</p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-04538" href="#VUID-VkFramebufferCreateInfo-flags-04538"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-04538</span><br>

If <code>flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, and <code>renderPass</code> was not
specified with non-zero view masks, each element of <code>pAttachments</code>
that is used as a <a href="chap28.html#primsrast-fragment-shading-rate-attachment">fragment
shading rate attachment</a> by <code>renderPass</code> <strong class="purple">must</strong> have a
<code>layerCount</code> that is either <code>1</code>, or greater than <code>layers</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-04539" href="#VUID-VkFramebufferCreateInfo-flags-04539"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-04539</span><br>

If <code>flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, an element of
<code>pAttachments</code> that is used as a
<a href="chap28.html#primsrast-fragment-shading-rate-attachment">fragment shading rate
attachment</a> <strong class="purple">must</strong> have a width at least as large as
<span class="eq"><code>width</code> \ <code>texelWidth</code></span>, where <code>texelWidth</code>
is the largest value of <code>shadingRateAttachmentTexelSize.width</code> in a
<a href="#VkFragmentShadingRateAttachmentInfoKHR">VkFragmentShadingRateAttachmentInfoKHR</a> which references that
attachment</p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-04540" href="#VUID-VkFramebufferCreateInfo-flags-04540"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-04540</span><br>

If <code>flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, an element of
<code>pAttachments</code> that is used as a
<a href="chap28.html#primsrast-fragment-shading-rate-attachment">fragment shading rate
attachment</a> <strong class="purple">must</strong> have a height at least as large as
<span class="eq"><code>height</code> \ <code>texelHeight</code></span>, where
<code>texelHeight</code> is the largest value of
<code>shadingRateAttachmentTexelSize.height</code> in a
<a href="#VkFragmentShadingRateAttachmentInfoKHR">VkFragmentShadingRateAttachmentInfoKHR</a> which references that
attachment</p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-pAttachments-00883" href="#VUID-VkFramebufferCreateInfo-pAttachments-00883"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-pAttachments-00883</span><br>

If <code>flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of
<code>pAttachments</code> <strong class="purple">must</strong> only specify a single mip level</p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-pAttachments-00884" href="#VUID-VkFramebufferCreateInfo-pAttachments-00884"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-pAttachments-00884</span><br>

If <code>flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of
<code>pAttachments</code> <strong class="purple">must</strong> have been created with the identity swizzle</p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-width-00885" href="#VUID-VkFramebufferCreateInfo-width-00885"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-width-00885</span><br>

<code>width</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-width-00886" href="#VUID-VkFramebufferCreateInfo-width-00886"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-width-00886</span><br>

<code>width</code> <strong class="purple">must</strong> be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxFramebufferWidth</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-height-00887" href="#VUID-VkFramebufferCreateInfo-height-00887"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-height-00887</span><br>

<code>height</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-height-00888" href="#VUID-VkFramebufferCreateInfo-height-00888"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-height-00888</span><br>

<code>height</code> <strong class="purple">must</strong> be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxFramebufferHeight</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-layers-00889" href="#VUID-VkFramebufferCreateInfo-layers-00889"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-layers-00889</span><br>

<code>layers</code> <strong class="purple">must</strong> be greater than <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-layers-00890" href="#VUID-VkFramebufferCreateInfo-layers-00890"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-layers-00890</span><br>

<code>layers</code> <strong class="purple">must</strong> be less than or equal to
<code>VkPhysicalDeviceLimits</code>::<code>maxFramebufferLayers</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-renderPass-02531" href="#VUID-VkFramebufferCreateInfo-renderPass-02531"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-renderPass-02531</span><br>

If <code>renderPass</code> was specified with non-zero view masks, <code>layers</code>
<strong class="purple">must</strong> be <code>1</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-pAttachments-00891" href="#VUID-VkFramebufferCreateInfo-pAttachments-00891"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-pAttachments-00891</span><br>

If <code>flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of
<code>pAttachments</code> that is a 2D or 2D array image view taken from a 3D
image <strong class="purple">must</strong> not be a depth/stencil format</p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-03189" href="#VUID-VkFramebufferCreateInfo-flags-03189"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-03189</span><br>

If the <a href="chap41.html#features-imagelessFramebuffer">imageless framebuffer</a> feature
is not enabled, <code>flags</code> <strong class="purple">must</strong> not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-03190" href="#VUID-VkFramebufferCreateInfo-flags-03190"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-03190</span><br>

If <code>flags</code> includes <code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, the
<code>pNext</code> chain <strong class="purple">must</strong> include an instance of
<a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-03191" href="#VUID-VkFramebufferCreateInfo-flags-03191"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-03191</span><br>

If <code>flags</code> includes <code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, the
<code>attachmentImageInfoCount</code> member of an instance of
<a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a> in the <code>pNext</code> chain <strong class="purple">must</strong>
be equal to either zero or <code>attachmentCount</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-04541" href="#VUID-VkFramebufferCreateInfo-flags-04541"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-04541</span><br>

If <code>flags</code> includes <code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, the
<code>width</code> member of any element of the <code>pAttachmentImageInfos</code>
member of an instance of <a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a> in the
<code>pNext</code> chain that is used as an input, color, resolve or
depth/stencil attachment in <code>pRenderPass</code> <strong class="purple">must</strong> be greater than or
equal to <code>width</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-04542" href="#VUID-VkFramebufferCreateInfo-flags-04542"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-04542</span><br>

If <code>flags</code> includes <code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, the
<code>height</code> member of any element of the <code>pAttachmentImageInfos</code>
member of an instance of <a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a> in the
<code>pNext</code> chain that is used as an input, color, resolve or
depth/stencil attachment in <code>pRenderPass</code> <strong class="purple">must</strong> be greater than or
equal to <code>height</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-03196" href="#VUID-VkFramebufferCreateInfo-flags-03196"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-03196</span><br>

If <code>flags</code> includes <code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, the
<code>width</code> member of any element of the <code>pAttachmentImageInfos</code>
member of an instance of <a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a> in the
<code>pNext</code> chain that is referenced by
<a href="#VkRenderPassFragmentDensityMapCreateInfoEXT">VkRenderPassFragmentDensityMapCreateInfoEXT</a>::<code>fragmentDensityMapAttachment</code>
in <code>renderPass</code> <strong class="purple">must</strong> be greater than or equal to
<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.80002em;vertical-align:-0.65002em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size2"></span></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">g</span><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">s</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">x</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="mord mtight"><span class="mord mathdefault mtight">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.02691em;">w</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight">h</span></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.02691em;">w</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">d</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight">h</span></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.481108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size2"></span></span></span></span></span></span></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-03197" href="#VUID-VkFramebufferCreateInfo-flags-03197"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-03197</span><br>

If <code>flags</code> includes <code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, the
<code>height</code> member of any element of the <code>pAttachmentImageInfos</code>
member of a <a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a> structure included
in the <code>pNext</code> chain that is referenced by
<a href="#VkRenderPassFragmentDensityMapCreateInfoEXT">VkRenderPassFragmentDensityMapCreateInfoEXT</a>::<code>fragmentDensityMapAttachment</code>
in <code>renderPass</code> <strong class="purple">must</strong> be greater than or equal to
<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.80002em;vertical-align:-0.65002em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size2"></span></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9322159999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">g</span><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">n</span><span class="mord mathdefault mtight">s</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight">t</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">x</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.04398em;">z</span><span class="mord mtight"><span class="mord mathdefault mtight">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3487714285714287em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">h</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">g</span><span class="mord mathdefault mtight">h</span><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.29011428571428566em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">h</span><span class="mord mathdefault mtight">e</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">g</span><span class="mord mathdefault mtight">h</span><span class="mord mathdefault mtight">t</span></span></span></span></span><span class="vlist-s"></span></span><span class="vlist-r"><span class="vlist" style="height:0.5480799999999999em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size2"></span></span></span></span></span></span></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-04543" href="#VUID-VkFramebufferCreateInfo-flags-04543"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-04543</span><br>

If <code>flags</code> includes <code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, the
<code>width</code> member of any element of the <code>pAttachmentImageInfos</code>
member of an instance of <a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a> in the
<code>pNext</code> chain that is used as a
<a href="chap28.html#primsrast-fragment-shading-rate-attachment">fragment shading rate
attachment</a> <strong class="purple">must</strong> be greater than or equal to <span class="eq"><code>width</code> \
<code>texelWidth</code></span>, where <code>texelWidth</code> is the largest value of
<code>shadingRateAttachmentTexelSize.width</code> in a
<a href="#VkFragmentShadingRateAttachmentInfoKHR">VkFragmentShadingRateAttachmentInfoKHR</a> which references that
attachment</p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-04544" href="#VUID-VkFramebufferCreateInfo-flags-04544"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-04544</span><br>

If <code>flags</code> includes <code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, the
<code>height</code> member of any element of the <code>pAttachmentImageInfos</code>
member of an instance of <a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a> in the
<code>pNext</code> chain that is used as a
<a href="chap28.html#primsrast-fragment-shading-rate-attachment">fragment shading rate
attachment</a> <strong class="purple">must</strong> be greater than or equal to <span class="eq"><code>height</code>
\ <code>texelHeight</code></span>, where <code>texelHeight</code> is the largest value
of <code>shadingRateAttachmentTexelSize.height</code> in a
<a href="#VkFragmentShadingRateAttachmentInfoKHR">VkFragmentShadingRateAttachmentInfoKHR</a> which references that
attachment</p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-04545" href="#VUID-VkFramebufferCreateInfo-flags-04545"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-04545</span><br>

If <code>flags</code> includes <code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, the
<code>layerCount</code> member of any element of the
<code>pAttachmentImageInfos</code> member of an instance of
<a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a> in the <code>pNext</code> chain that
is used as a <a href="chap28.html#primsrast-fragment-shading-rate-attachment">fragment
shading rate attachment</a> <strong class="purple">must</strong> be either <code>1</code>, or greater than or equal
to <code>layers</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-04587" href="#VUID-VkFramebufferCreateInfo-flags-04587"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-04587</span><br>

If <code>flags</code> includes <code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, and
<code>renderPass</code> was specified with non-zero view masks, each element of
<code>pAttachments</code> that is used as a
<a href="chap28.html#primsrast-fragment-shading-rate-attachment">fragment shading rate
attachment</a> by <code>renderPass</code> <strong class="purple">must</strong> have a <code>layerCount</code> that is
either <code>1</code>, or greater than the index of the most significant bit set in
any of those view masks</p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-renderPass-03198" href="#VUID-VkFramebufferCreateInfo-renderPass-03198"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-renderPass-03198</span><br>

If multiview is enabled for <code>renderPass</code>, and <code>flags</code> includes
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, the <code>layerCount</code> member
of any element of the <code>pAttachmentImageInfos</code> member of a
<a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a> structure included in the
<code>pNext</code> chain used as an input, color, resolve, or depth/stencil
attachment in <code>pRenderPass</code> <strong class="purple">must</strong> be greater than the maximum bit
index set in the view mask in the subpasses in which it is used in
<code>renderPass</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-renderPass-04546" href="#VUID-VkFramebufferCreateInfo-renderPass-04546"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-renderPass-04546</span><br>

If multiview is not enabled for <code>renderPass</code>, and <code>flags</code>
includes <code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, the <code>layerCount</code>
member of any element of the <code>pAttachmentImageInfos</code> member of a
<a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a> structure included in the
<code>pNext</code> chain used as an input, color, resolve, or depth/stencil
attachment in <code>pRenderPass</code> <strong class="purple">must</strong> be greater than or equal to
<code>layers</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-04547" href="#VUID-VkFramebufferCreateInfo-flags-04547"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-04547</span><br>

If <code>flags</code> includes <code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, the
<code>layerCount</code> member of any element of the
<code>pAttachmentImageInfos</code> member of a
<a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a> structure included in the
<code>pNext</code> chain used as an input, color, resolve, or depth/stencil
attachment in <code>pRenderPass</code> <strong class="purple">must</strong> be greater than or equal to
<code>layers</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-03201" href="#VUID-VkFramebufferCreateInfo-flags-03201"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-03201</span><br>

If <code>flags</code> includes <code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, the
<code>usage</code> member of any element of the <code>pAttachmentImageInfos</code>
member of a <a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a> structure included
in the <code>pNext</code> chain that refers to an attachment used as a color
attachment or resolve attachment by <code>renderPass</code> <strong class="purple">must</strong> include
<code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-03202" href="#VUID-VkFramebufferCreateInfo-flags-03202"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-03202</span><br>

If <code>flags</code> includes <code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, the
<code>usage</code> member of any element of the <code>pAttachmentImageInfos</code>
member of a <a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a> structure included
in the <code>pNext</code> chain that refers to an attachment used as a
depth/stencil attachment by <code>renderPass</code> <strong class="purple">must</strong> include
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-03203" href="#VUID-VkFramebufferCreateInfo-flags-03203"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-03203</span><br>

If <code>flags</code> includes <code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, the
<code>usage</code> member of any element of the <code>pAttachmentImageInfos</code>
member of a <a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a> structure included
in the <code>pNext</code> chain that refers to an attachment used as a
depth/stencil resolve attachment by <code>renderPass</code> <strong class="purple">must</strong> include
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-03204" href="#VUID-VkFramebufferCreateInfo-flags-03204"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-03204</span><br>

If <code>flags</code> includes <code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, the
<code>usage</code> member of any element of the <code>pAttachmentImageInfos</code>
member of a <a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a> structure included
in the <code>pNext</code> chain that refers to an attachment used as an input
attachment by <code>renderPass</code> <strong class="purple">must</strong> include
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-03205" href="#VUID-VkFramebufferCreateInfo-flags-03205"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-03205</span><br>

If <code>flags</code> includes <code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, at
least one element of the <code>pViewFormats</code> member of any element of the
<code>pAttachmentImageInfos</code> member of a
<a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a> structure included in the
<code>pNext</code> chain <strong class="purple">must</strong> be equal to the corresponding value of
<a href="#VkAttachmentDescription">VkAttachmentDescription</a>::<code>format</code> used to create
<code>renderPass</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-04113" href="#VUID-VkFramebufferCreateInfo-flags-04113"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-04113</span><br>

If <code>flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of
<code>pAttachments</code> <strong class="purple">must</strong> have been created with
<a href="chap13.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>viewType</code> not equal to
<code>VK_IMAGE_VIEW_TYPE_3D</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-04548" href="#VUID-VkFramebufferCreateInfo-flags-04548"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-04548</span><br>

If <code>flags</code> does not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of
<code>pAttachments</code> that is used as a fragment shading rate attachment by
<code>renderPass</code> <strong class="purple">must</strong> have been created with a <code>usage</code> value
including <code>VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-04549" href="#VUID-VkFramebufferCreateInfo-flags-04549"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-04549</span><br>

If <code>flags</code> includes <code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, the
<code>usage</code> member of any element of the <code>pAttachmentImageInfos</code>
member of a <a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a> structure included
in the <code>pNext</code> chain that refers to an attachment used as a fragment
shading rate attachment by <code>renderPass</code> <strong class="purple">must</strong> include
<code>VK_IMAGE_USAGE_FRAGMENT_SHADING_RATE_ATTACHMENT_BIT_KHR</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-sType-sType" href="#VUID-VkFramebufferCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_FRAMEBUFFER_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-pNext-pNext" href="#VUID-VkFramebufferCreateInfo-pNext-pNext"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code> or a pointer to a valid instance of <a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a></p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-sType-unique" href="#VUID-VkFramebufferCreateInfo-sType-unique"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-flags-parameter" href="#VUID-VkFramebufferCreateInfo-flags-parameter"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="#VkFramebufferCreateFlagBits">VkFramebufferCreateFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-renderPass-parameter" href="#VUID-VkFramebufferCreateInfo-renderPass-parameter"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-renderPass-parameter</span><br>
 <code>renderPass</code> <strong class="purple">must</strong> be a valid <a href="#VkRenderPass">VkRenderPass</a> handle</p>
</li>
<li>
<p><a id="VUID-VkFramebufferCreateInfo-commonparent" href="#VUID-VkFramebufferCreateInfo-commonparent"></a> <span class="vuid">VUID-VkFramebufferCreateInfo-commonparent</span><br>
 Both of <code>renderPass</code>, and the elements of <code>pAttachments</code> that are valid handles of non-ignored parameters <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap6.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkFramebufferAttachmentsCreateInfo</code> structure is defined as:</p>
</div>
<div id="VkFramebufferAttachmentsCreateInfo" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">struct</span> VkFramebufferAttachmentsCreateInfo {
    VkStructureType                            sType;
    <span class="directive">const</span> <span class="directive">void</span>*                                pNext;
    uint32_t                                   attachmentImageInfoCount;
    <span class="directive">const</span> VkFramebufferAttachmentImageInfo*    pAttachmentImageInfos;
} VkFramebufferAttachmentsCreateInfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkFramebufferAttachmentsCreateInfoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_imageless_framebuffer</span>
<span class="keyword">typedef</span> VkFramebufferAttachmentsCreateInfo VkFramebufferAttachmentsCreateInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>attachmentImageInfoCount</code> is the number of attachments being
described.</p>
</li>
<li>
<p><code>pAttachmentImageInfos</code> is a pointer to an array of
<a href="#VkFramebufferAttachmentImageInfo">VkFramebufferAttachmentImageInfo</a> instances, each of which
describes a number of parameters of the corresponding attachment in a
render pass instance.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkFramebufferAttachmentsCreateInfo-sType-sType" href="#VUID-VkFramebufferAttachmentsCreateInfo-sType-sType"></a> <span class="vuid">VUID-VkFramebufferAttachmentsCreateInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_FRAMEBUFFER_ATTACHMENTS_CREATE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferAttachmentsCreateInfo-pAttachmentImageInfos-parameter" href="#VUID-VkFramebufferAttachmentsCreateInfo-pAttachmentImageInfos-parameter"></a> <span class="vuid">VUID-VkFramebufferAttachmentsCreateInfo-pAttachmentImageInfos-parameter</span><br>
 If <code>attachmentImageInfoCount</code> is not <code>0</code>, <code>pAttachmentImageInfos</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>attachmentImageInfoCount</code> valid <a href="#VkFramebufferAttachmentImageInfo">VkFramebufferAttachmentImageInfo</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkFramebufferAttachmentImageInfo</code> structure is defined as:</p>
</div>
<div id="VkFramebufferAttachmentImageInfo" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">struct</span> VkFramebufferAttachmentImageInfo {
    VkStructureType       sType;
    <span class="directive">const</span> <span class="directive">void</span>*           pNext;
    VkImageCreateFlags    flags;
    VkImageUsageFlags     usage;
    uint32_t              width;
    uint32_t              height;
    uint32_t              layerCount;
    uint32_t              viewFormatCount;
    <span class="directive">const</span> VkFormat*       pViewFormats;
} VkFramebufferAttachmentImageInfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkFramebufferAttachmentImageInfoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_imageless_framebuffer</span>
<span class="keyword">typedef</span> VkFramebufferAttachmentImageInfo VkFramebufferAttachmentImageInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>flags</code> is a bitmask of <a href="chap13.html#VkImageCreateFlagBits">VkImageCreateFlagBits</a>, matching the
value of <a href="chap13.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>flags</code> used to create an image
that will be used with this framebuffer.</p>
</li>
<li>
<p><code>usage</code> is a bitmask of <a href="chap13.html#VkImageUsageFlagBits">VkImageUsageFlagBits</a>, matching the
value of <a href="chap13.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>usage</code> used to create an image
used with this framebuffer.</p>
</li>
<li>
<p><code>width</code> is the width of the image view used for rendering.</p>
</li>
<li>
<p><code>height</code> is the height of the image view used for rendering.</p>
</li>
<li>
<p><code>viewFormatCount</code> is the number of entries in the <code>pViewFormats</code>
array, matching the value of
<a href="chap13.html#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>::<code>viewFormatCount</code> used to create
an image used with this framebuffer.</p>
</li>
<li>
<p><code>pViewFormats</code> is an array which lists of all formats which <strong class="purple">can</strong> be
used when creating views of the image, matching the value of
<a href="chap13.html#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>::pViewFormats used to create an image
used with this framebuffer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Images that <strong class="purple">can</strong> be used with the framebuffer when beginning a render pass,
as specified by <a href="#VkRenderPassAttachmentBeginInfo">VkRenderPassAttachmentBeginInfo</a>, <strong class="purple">must</strong> be created with
parameters that are identical to those specified here.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkFramebufferAttachmentImageInfo-sType-sType" href="#VUID-VkFramebufferAttachmentImageInfo-sType-sType"></a> <span class="vuid">VUID-VkFramebufferAttachmentImageInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_FRAMEBUFFER_ATTACHMENT_IMAGE_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferAttachmentImageInfo-pNext-pNext" href="#VUID-VkFramebufferAttachmentImageInfo-pNext-pNext"></a> <span class="vuid">VUID-VkFramebufferAttachmentImageInfo-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferAttachmentImageInfo-flags-parameter" href="#VUID-VkFramebufferAttachmentImageInfo-flags-parameter"></a> <span class="vuid">VUID-VkFramebufferAttachmentImageInfo-flags-parameter</span><br>
 <code>flags</code> <strong class="purple">must</strong> be a valid combination of <a href="chap13.html#VkImageCreateFlagBits">VkImageCreateFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkFramebufferAttachmentImageInfo-usage-parameter" href="#VUID-VkFramebufferAttachmentImageInfo-usage-parameter"></a> <span class="vuid">VUID-VkFramebufferAttachmentImageInfo-usage-parameter</span><br>
 <code>usage</code> <strong class="purple">must</strong> be a valid combination of <a href="chap13.html#VkImageUsageFlagBits">VkImageUsageFlagBits</a> values</p>
</li>
<li>
<p><a id="VUID-VkFramebufferAttachmentImageInfo-usage-requiredbitmask" href="#VUID-VkFramebufferAttachmentImageInfo-usage-requiredbitmask"></a> <span class="vuid">VUID-VkFramebufferAttachmentImageInfo-usage-requiredbitmask</span><br>
 <code>usage</code> <strong class="purple">must</strong> not be <code>0</code></p>
</li>
<li>
<p><a id="VUID-VkFramebufferAttachmentImageInfo-pViewFormats-parameter" href="#VUID-VkFramebufferAttachmentImageInfo-pViewFormats-parameter"></a> <span class="vuid">VUID-VkFramebufferAttachmentImageInfo-pViewFormats-parameter</span><br>
 If <code>viewFormatCount</code> is not <code>0</code>, <code>pViewFormats</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>viewFormatCount</code> valid <a href="chap43.html#VkFormat">VkFormat</a> values</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Bits which <strong class="purple">can</strong> be set in <a href="#VkFramebufferCreateInfo">VkFramebufferCreateInfo</a>::<code>flags</code> to
specify options for framebuffers are:</p>
</div>
<div id="VkFramebufferCreateFlagBits" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkFramebufferCreateFlagBits {
    VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT = <span class="hex">0x00000001</span>,
  <span class="comment">// Provided by VK_KHR_imageless_framebuffer</span>
    VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT_KHR = VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT,
} VkFramebufferCreateFlagBits;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code> specifies that image views are
not specified, and only attachment compatibility information will be
provided via a <a href="#VkFramebufferAttachmentImageInfo">VkFramebufferAttachmentImageInfo</a> structure.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div id="VkFramebufferCreateFlags" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="keyword">typedef</span> VkFlags VkFramebufferCreateFlags;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>VkFramebufferCreateFlags</code> is a bitmask type for setting a mask of zero
or more <a href="#VkFramebufferCreateFlagBits">VkFramebufferCreateFlagBits</a>.</p>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To destroy a framebuffer, call:</p>
</div>
<div id="vkDestroyFramebuffer" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="directive">void</span> vkDestroyFramebuffer(
    VkDevice                                    device,
    VkFramebuffer                               framebuffer,
    <span class="directive">const</span> VkAllocationCallbacks*                pAllocator);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that destroys the framebuffer.</p>
</li>
<li>
<p><code>framebuffer</code> is the handle of the framebuffer to destroy.</p>
</li>
<li>
<p><code>pAllocator</code> controls host memory allocation as described in the
<a href="chap12.html#memory-allocation">Memory Allocation</a> chapter.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyFramebuffer-framebuffer-00892" href="#VUID-vkDestroyFramebuffer-framebuffer-00892"></a> <span class="vuid">VUID-vkDestroyFramebuffer-framebuffer-00892</span><br>

All submitted commands that refer to <code>framebuffer</code> <strong class="purple">must</strong> have
completed execution</p>
</li>
<li>
<p><a id="VUID-vkDestroyFramebuffer-framebuffer-00893" href="#VUID-vkDestroyFramebuffer-framebuffer-00893"></a> <span class="vuid">VUID-vkDestroyFramebuffer-framebuffer-00893</span><br>

If <code>VkAllocationCallbacks</code> were provided when <code>framebuffer</code> was
created, a compatible set of callbacks <strong class="purple">must</strong> be provided here</p>
</li>
<li>
<p><a id="VUID-vkDestroyFramebuffer-framebuffer-00894" href="#VUID-vkDestroyFramebuffer-framebuffer-00894"></a> <span class="vuid">VUID-vkDestroyFramebuffer-framebuffer-00894</span><br>

If no <code>VkAllocationCallbacks</code> were provided when <code>framebuffer</code>
was created, <code>pAllocator</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkDestroyFramebuffer-device-parameter" href="#VUID-vkDestroyFramebuffer-device-parameter"></a> <span class="vuid">VUID-vkDestroyFramebuffer-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyFramebuffer-framebuffer-parameter" href="#VUID-vkDestroyFramebuffer-framebuffer-parameter"></a> <span class="vuid">VUID-vkDestroyFramebuffer-framebuffer-parameter</span><br>
 If <code>framebuffer</code> is not <a href="chap51.html#VK_NULL_HANDLE">VK_NULL_HANDLE</a>, <code>framebuffer</code> <strong class="purple">must</strong> be a valid <a href="#VkFramebuffer">VkFramebuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkDestroyFramebuffer-pAllocator-parameter" href="#VUID-vkDestroyFramebuffer-pAllocator-parameter"></a> <span class="vuid">VUID-vkDestroyFramebuffer-pAllocator-parameter</span><br>
 If <code>pAllocator</code> is not <code>NULL</code>, <code>pAllocator</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="chap12.html#VkAllocationCallbacks">VkAllocationCallbacks</a> structure</p>
</li>
<li>
<p><a id="VUID-vkDestroyFramebuffer-framebuffer-parent" href="#VUID-vkDestroyFramebuffer-framebuffer-parent"></a> <span class="vuid">VUID-vkDestroyFramebuffer-framebuffer-parent</span><br>
 If <code>framebuffer</code> is a valid handle, it <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>framebuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="renderpass-commands"><a class="anchor" href="#renderpass-commands"></a>8.4. Render Pass Commands</h3>
<div class="paragraph">
<p>An application records the commands for a render pass instance one subpass
at a time, by beginning a render pass instance, iterating over the subpasses
to record commands for that subpass, and then ending the render pass
instance.</p>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To begin a render pass instance, call:</p>
</div>
<div id="vkCmdBeginRenderPass" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="directive">void</span> vkCmdBeginRenderPass(
    VkCommandBuffer                             commandBuffer,
    <span class="directive">const</span> VkRenderPassBeginInfo*                pRenderPassBegin,
    VkSubpassContents                           contents);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer in which to record the
command.</p>
</li>
<li>
<p><code>pRenderPassBegin</code> is a pointer to a <a href="#VkRenderPassBeginInfo">VkRenderPassBeginInfo</a>
structure specifying the render pass to begin an instance of, and the
framebuffer the instance uses.</p>
</li>
<li>
<p><code>contents</code> is a <a href="#VkSubpassContents">VkSubpassContents</a> value specifying how the
commands in the first subpass will be provided.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After beginning a render pass instance, the command buffer is ready to
record the commands for the first subpass of that render pass.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBeginRenderPass-initialLayout-00895" href="#VUID-vkCmdBeginRenderPass-initialLayout-00895"></a> <span class="vuid">VUID-vkCmdBeginRenderPass-initialLayout-00895</span><br>

If any of the <code>initialLayout</code> or <code>finalLayout</code> member of the
<code>VkAttachmentDescription</code> structures or the <code>layout</code> member of
the <code>VkAttachmentReference</code> structures specified when creating the
render pass specified in the <code>renderPass</code> member of
<code>pRenderPassBegin</code> is <code>VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL</code>
then the corresponding attachment image view of the framebuffer
specified in the <code>framebuffer</code> member of <code>pRenderPassBegin</code>
<strong class="purple">must</strong> have been created with a <code>usage</code> value including
<code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass-initialLayout-01758" href="#VUID-vkCmdBeginRenderPass-initialLayout-01758"></a> <span class="vuid">VUID-vkCmdBeginRenderPass-initialLayout-01758</span><br>

If any of the <code>initialLayout</code> or <code>finalLayout</code> member of the
<code>VkAttachmentDescription</code> structures or the <code>layout</code> member of
the <code>VkAttachmentReference</code> structures specified when creating the
render pass specified in the <code>renderPass</code> member of
<code>pRenderPassBegin</code> is
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code> then the
corresponding attachment image view of the framebuffer specified in the
<code>framebuffer</code> member of <code>pRenderPassBegin</code> <strong class="purple">must</strong> have been
created with a <code>usage</code> value including
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass-initialLayout-02842" href="#VUID-vkCmdBeginRenderPass-initialLayout-02842"></a> <span class="vuid">VUID-vkCmdBeginRenderPass-initialLayout-02842</span><br>

If any of the <code>initialLayout</code> or <code>finalLayout</code> member of the
<code>VkAttachmentDescription</code> structures or the <code>layout</code> member of
the <code>VkAttachmentReference</code> structures specified when creating the
render pass specified in the <code>renderPass</code> member of
<code>pRenderPassBegin</code> is
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code> then the corresponding
attachment image view of the framebuffer specified in the
<code>framebuffer</code> member of <code>pRenderPassBegin</code> <strong class="purple">must</strong> have been
created with a <code>usage</code> value including
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass-stencilInitialLayout-02843" href="#VUID-vkCmdBeginRenderPass-stencilInitialLayout-02843"></a> <span class="vuid">VUID-vkCmdBeginRenderPass-stencilInitialLayout-02843</span><br>

If any of the <code>stencilInitialLayout</code> or <code>stencilFinalLayout</code>
member of the <code>VkAttachmentDescriptionStencilLayout</code> structures or
the <code>stencilLayout</code> member of the
<code>VkAttachmentReferenceStencilLayout</code> structures specified when
creating the render pass specified in the <code>renderPass</code> member of
<code>pRenderPassBegin</code> is
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code> then the corresponding
attachment image view of the framebuffer specified in the
<code>framebuffer</code> member of <code>pRenderPassBegin</code> <strong class="purple">must</strong> have been
created with a <code>usage</code> value including
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass-initialLayout-00897" href="#VUID-vkCmdBeginRenderPass-initialLayout-00897"></a> <span class="vuid">VUID-vkCmdBeginRenderPass-initialLayout-00897</span><br>

If any of the <code>initialLayout</code> or <code>finalLayout</code> member of the
<code>VkAttachmentDescription</code> structures or the <code>layout</code> member of
the <code>VkAttachmentReference</code> structures specified when creating the
render pass specified in the <code>renderPass</code> member of
<code>pRenderPassBegin</code> is <code>VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL</code>
then the corresponding attachment image view of the framebuffer
specified in the <code>framebuffer</code> member of <code>pRenderPassBegin</code>
<strong class="purple">must</strong> have been created with a <code>usage</code> value including
<code>VK_IMAGE_USAGE_SAMPLED_BIT</code> or
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass-initialLayout-00898" href="#VUID-vkCmdBeginRenderPass-initialLayout-00898"></a> <span class="vuid">VUID-vkCmdBeginRenderPass-initialLayout-00898</span><br>

If any of the <code>initialLayout</code> or <code>finalLayout</code> member of the
<code>VkAttachmentDescription</code> structures or the <code>layout</code> member of
the <code>VkAttachmentReference</code> structures specified when creating the
render pass specified in the <code>renderPass</code> member of
<code>pRenderPassBegin</code> is <code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code>
then the corresponding attachment image view of the framebuffer
specified in the <code>framebuffer</code> member of <code>pRenderPassBegin</code>
<strong class="purple">must</strong> have been created with a <code>usage</code> value including
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass-initialLayout-00899" href="#VUID-vkCmdBeginRenderPass-initialLayout-00899"></a> <span class="vuid">VUID-vkCmdBeginRenderPass-initialLayout-00899</span><br>

If any of the <code>initialLayout</code> or <code>finalLayout</code> member of the
<code>VkAttachmentDescription</code> structures or the <code>layout</code> member of
the <code>VkAttachmentReference</code> structures specified when creating the
render pass specified in the <code>renderPass</code> member of
<code>pRenderPassBegin</code> is <code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>
then the corresponding attachment image view of the framebuffer
specified in the <code>framebuffer</code> member of <code>pRenderPassBegin</code>
<strong class="purple">must</strong> have been created with a <code>usage</code> value including
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass-initialLayout-00900" href="#VUID-vkCmdBeginRenderPass-initialLayout-00900"></a> <span class="vuid">VUID-vkCmdBeginRenderPass-initialLayout-00900</span><br>

If any of the <code>initialLayout</code> members of the
<code>VkAttachmentDescription</code> structures specified when creating the
render pass specified in the <code>renderPass</code> member of
<code>pRenderPassBegin</code> is not <code>VK_IMAGE_LAYOUT_UNDEFINED</code>, then each
such <code>initialLayout</code> <strong class="purple">must</strong> be equal to the current layout of the
corresponding attachment image subresource of the framebuffer specified
in the <code>framebuffer</code> member of <code>pRenderPassBegin</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass-srcStageMask-00901" href="#VUID-vkCmdBeginRenderPass-srcStageMask-00901"></a> <span class="vuid">VUID-vkCmdBeginRenderPass-srcStageMask-00901</span><br>

The <code>srcStageMask</code> and <code>dstStageMask</code> members of any element of
the <code>pDependencies</code> member of <a href="#VkRenderPassCreateInfo">VkRenderPassCreateInfo</a> used to
create <code>renderPass</code> <strong class="purple">must</strong> be supported by the capabilities of the
queue family identified by the <code>queueFamilyIndex</code> member of the
<a href="chap7.html#VkCommandPoolCreateInfo">VkCommandPoolCreateInfo</a> used to create the command pool which
<code>commandBuffer</code> was allocated from</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass-framebuffer-02532" href="#VUID-vkCmdBeginRenderPass-framebuffer-02532"></a> <span class="vuid">VUID-vkCmdBeginRenderPass-framebuffer-02532</span><br>

For any attachment in <code>framebuffer</code> that is used by <code>renderPass</code>
and is bound to memory locations that are also bound to another
attachment used by <code>renderPass</code>, and if at least one of those uses
causes either attachment to be written to, both attachments <strong class="purple">must</strong> have
had the <code>VK_ATTACHMENT_DESCRIPTION_MAY_ALIAS_BIT</code> set</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBeginRenderPass-commandBuffer-parameter" href="#VUID-vkCmdBeginRenderPass-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdBeginRenderPass-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap7.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass-pRenderPassBegin-parameter" href="#VUID-vkCmdBeginRenderPass-pRenderPassBegin-parameter"></a> <span class="vuid">VUID-vkCmdBeginRenderPass-pRenderPassBegin-parameter</span><br>
 <code>pRenderPassBegin</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkRenderPassBeginInfo">VkRenderPassBeginInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass-contents-parameter" href="#VUID-vkCmdBeginRenderPass-contents-parameter"></a> <span class="vuid">VUID-vkCmdBeginRenderPass-contents-parameter</span><br>
 <code>contents</code> <strong class="purple">must</strong> be a valid <a href="#VkSubpassContents">VkSubpassContents</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass-commandBuffer-recording" href="#VUID-vkCmdBeginRenderPass-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdBeginRenderPass-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap7.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass-commandBuffer-cmdpool" href="#VUID-vkCmdBeginRenderPass-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdBeginRenderPass-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass-renderpass" href="#VUID-vkCmdBeginRenderPass-renderpass"></a> <span class="vuid">VUID-vkCmdBeginRenderPass-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass-bufferlevel" href="#VUID-vkCmdBeginRenderPass-bufferlevel"></a> <span class="vuid">VUID-vkCmdBeginRenderPass-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap7.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#synchronization-pipeline-stages-types">Pipeline Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Alternatively to begin a render pass, call:</p>
</div>
<div id="vkCmdBeginRenderPass2" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="directive">void</span> vkCmdBeginRenderPass2(
    VkCommandBuffer                             commandBuffer,
    <span class="directive">const</span> VkRenderPassBeginInfo*                pRenderPassBegin,
    <span class="directive">const</span> VkSubpassBeginInfo*                   pSubpassBeginInfo);</code></pre>
</div>
</div>
<div id="vkCmdBeginRenderPass2KHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_create_renderpass2</span>
<span class="directive">void</span> vkCmdBeginRenderPass2KHR(
    VkCommandBuffer                             commandBuffer,
    <span class="directive">const</span> VkRenderPassBeginInfo*                pRenderPassBegin,
    <span class="directive">const</span> VkSubpassBeginInfo*                   pSubpassBeginInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer in which to record the
command.</p>
</li>
<li>
<p><code>pRenderPassBegin</code> is a pointer to a <a href="#VkRenderPassBeginInfo">VkRenderPassBeginInfo</a>
structure specifying the render pass to begin an instance of, and the
framebuffer the instance uses.</p>
</li>
<li>
<p><code>pSubpassBeginInfo</code> is a pointer to a <a href="#VkSubpassBeginInfo">VkSubpassBeginInfo</a>
structure containing information about the subpass which is about to
begin rendering.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After beginning a render pass instance, the command buffer is ready to
record the commands for the first subpass of that render pass.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBeginRenderPass2-framebuffer-02779" href="#VUID-vkCmdBeginRenderPass2-framebuffer-02779"></a> <span class="vuid">VUID-vkCmdBeginRenderPass2-framebuffer-02779</span><br>

Both the <code>framebuffer</code> and <code>renderPass</code> members of
<code>pRenderPassBegin</code> <strong class="purple">must</strong> have been created on the same
<a href="chap6.html#VkDevice">VkDevice</a> that <code>commandBuffer</code> was allocated on</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass2-initialLayout-03094" href="#VUID-vkCmdBeginRenderPass2-initialLayout-03094"></a> <span class="vuid">VUID-vkCmdBeginRenderPass2-initialLayout-03094</span><br>

If any of the <code>initialLayout</code> or <code>finalLayout</code> member of the
<code>VkAttachmentDescription</code> structures or the <code>layout</code> member of
the <code>VkAttachmentReference</code> structures specified when creating the
render pass specified in the <code>renderPass</code> member of
<code>pRenderPassBegin</code> is <code>VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL</code>
then the corresponding attachment image view of the framebuffer
specified in the <code>framebuffer</code> member of <code>pRenderPassBegin</code>
<strong class="purple">must</strong> have been created with a <code>usage</code> value including
<code>VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass2-initialLayout-03096" href="#VUID-vkCmdBeginRenderPass2-initialLayout-03096"></a> <span class="vuid">VUID-vkCmdBeginRenderPass2-initialLayout-03096</span><br>

If any of the <code>initialLayout</code> or <code>finalLayout</code> member of the
<code>VkAttachmentDescription</code> structures or the <code>layout</code> member of
the <code>VkAttachmentReference</code> structures specified when creating the
render pass specified in the <code>renderPass</code> member of
<code>pRenderPassBegin</code> is
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_STENCIL_ATTACHMENT_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_STENCIL_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_DEPTH_STENCIL_READ_ONLY_OPTIMAL</code> then the
corresponding attachment image view of the framebuffer specified in the
<code>framebuffer</code> member of <code>pRenderPassBegin</code> <strong class="purple">must</strong> have been
created with a <code>usage</code> value including
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass2-initialLayout-02844" href="#VUID-vkCmdBeginRenderPass2-initialLayout-02844"></a> <span class="vuid">VUID-vkCmdBeginRenderPass2-initialLayout-02844</span><br>

If any of the <code>initialLayout</code> or <code>finalLayout</code> member of the
<code>VkAttachmentDescription</code> structures or the <code>layout</code> member of
the <code>VkAttachmentReference</code> structures specified when creating the
render pass specified in the <code>renderPass</code> member of
<code>pRenderPassBegin</code> is
<code>VK_IMAGE_LAYOUT_DEPTH_ATTACHMENT_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_DEPTH_READ_ONLY_OPTIMAL</code>,
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code> then the corresponding
attachment image view of the framebuffer specified in the
<code>framebuffer</code> member of <code>pRenderPassBegin</code> <strong class="purple">must</strong> have been
created with a <code>usage</code> value including
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass2-stencilInitialLayout-02845" href="#VUID-vkCmdBeginRenderPass2-stencilInitialLayout-02845"></a> <span class="vuid">VUID-vkCmdBeginRenderPass2-stencilInitialLayout-02845</span><br>

If any of the <code>stencilInitialLayout</code> or <code>stencilFinalLayout</code>
member of the <code>VkAttachmentDescriptionStencilLayout</code> structures or
the <code>stencilLayout</code> member of the
<code>VkAttachmentReferenceStencilLayout</code> structures specified when
creating the render pass specified in the <code>renderPass</code> member of
<code>pRenderPassBegin</code> is
<code>VK_IMAGE_LAYOUT_STENCIL_ATTACHMENT_OPTIMAL</code>, or
<code>VK_IMAGE_LAYOUT_STENCIL_READ_ONLY_OPTIMAL</code> then the corresponding
attachment image view of the framebuffer specified in the
<code>framebuffer</code> member of <code>pRenderPassBegin</code> <strong class="purple">must</strong> have been
created with a <code>usage</code> value including
<code>VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass2-initialLayout-03097" href="#VUID-vkCmdBeginRenderPass2-initialLayout-03097"></a> <span class="vuid">VUID-vkCmdBeginRenderPass2-initialLayout-03097</span><br>

If any of the <code>initialLayout</code> or <code>finalLayout</code> member of the
<code>VkAttachmentDescription</code> structures or the <code>layout</code> member of
the <code>VkAttachmentReference</code> structures specified when creating the
render pass specified in the <code>renderPass</code> member of
<code>pRenderPassBegin</code> is <code>VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL</code>
then the corresponding attachment image view of the framebuffer
specified in the <code>framebuffer</code> member of <code>pRenderPassBegin</code>
<strong class="purple">must</strong> have been created with a <code>usage</code> value including
<code>VK_IMAGE_USAGE_SAMPLED_BIT</code> or
<code>VK_IMAGE_USAGE_INPUT_ATTACHMENT_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass2-initialLayout-03098" href="#VUID-vkCmdBeginRenderPass2-initialLayout-03098"></a> <span class="vuid">VUID-vkCmdBeginRenderPass2-initialLayout-03098</span><br>

If any of the <code>initialLayout</code> or <code>finalLayout</code> member of the
<code>VkAttachmentDescription</code> structures or the <code>layout</code> member of
the <code>VkAttachmentReference</code> structures specified when creating the
render pass specified in the <code>renderPass</code> member of
<code>pRenderPassBegin</code> is <code>VK_IMAGE_LAYOUT_TRANSFER_SRC_OPTIMAL</code>
then the corresponding attachment image view of the framebuffer
specified in the <code>framebuffer</code> member of <code>pRenderPassBegin</code>
<strong class="purple">must</strong> have been created with a <code>usage</code> value including
<code>VK_IMAGE_USAGE_TRANSFER_SRC_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass2-initialLayout-03099" href="#VUID-vkCmdBeginRenderPass2-initialLayout-03099"></a> <span class="vuid">VUID-vkCmdBeginRenderPass2-initialLayout-03099</span><br>

If any of the <code>initialLayout</code> or <code>finalLayout</code> member of the
<code>VkAttachmentDescription</code> structures or the <code>layout</code> member of
the <code>VkAttachmentReference</code> structures specified when creating the
render pass specified in the <code>renderPass</code> member of
<code>pRenderPassBegin</code> is <code>VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL</code>
then the corresponding attachment image view of the framebuffer
specified in the <code>framebuffer</code> member of <code>pRenderPassBegin</code>
<strong class="purple">must</strong> have been created with a <code>usage</code> value including
<code>VK_IMAGE_USAGE_TRANSFER_DST_BIT</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass2-initialLayout-03100" href="#VUID-vkCmdBeginRenderPass2-initialLayout-03100"></a> <span class="vuid">VUID-vkCmdBeginRenderPass2-initialLayout-03100</span><br>

If any of the <code>initialLayout</code> members of the
<code>VkAttachmentDescription</code> structures specified when creating the
render pass specified in the <code>renderPass</code> member of
<code>pRenderPassBegin</code> is not <code>VK_IMAGE_LAYOUT_UNDEFINED</code>, then each
such <code>initialLayout</code> <strong class="purple">must</strong> be equal to the current layout of the
corresponding attachment image subresource of the framebuffer specified
in the <code>framebuffer</code> member of <code>pRenderPassBegin</code></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass2-srcStageMask-03101" href="#VUID-vkCmdBeginRenderPass2-srcStageMask-03101"></a> <span class="vuid">VUID-vkCmdBeginRenderPass2-srcStageMask-03101</span><br>

The <code>srcStageMask</code> and <code>dstStageMask</code> members of any element of
the <code>pDependencies</code> member of <a href="#VkRenderPassCreateInfo">VkRenderPassCreateInfo</a> used to
create <code>renderPass</code> <strong class="purple">must</strong> be supported by the capabilities of the
queue family identified by the <code>queueFamilyIndex</code> member of the
<a href="chap7.html#VkCommandPoolCreateInfo">VkCommandPoolCreateInfo</a> used to create the command pool which
<code>commandBuffer</code> was allocated from</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass2-framebuffer-02533" href="#VUID-vkCmdBeginRenderPass2-framebuffer-02533"></a> <span class="vuid">VUID-vkCmdBeginRenderPass2-framebuffer-02533</span><br>

For any attachment in <code>framebuffer</code> that is used by <code>renderPass</code>
and is bound to memory locations that are also bound to another
attachment used by <code>renderPass</code>, and if at least one of those uses
causes either attachment to be written to, both attachments <strong class="purple">must</strong> have
had the <code>VK_ATTACHMENT_DESCRIPTION_MAY_ALIAS_BIT</code> set</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdBeginRenderPass2-commandBuffer-parameter" href="#VUID-vkCmdBeginRenderPass2-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdBeginRenderPass2-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap7.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass2-pRenderPassBegin-parameter" href="#VUID-vkCmdBeginRenderPass2-pRenderPassBegin-parameter"></a> <span class="vuid">VUID-vkCmdBeginRenderPass2-pRenderPassBegin-parameter</span><br>
 <code>pRenderPassBegin</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkRenderPassBeginInfo">VkRenderPassBeginInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass2-pSubpassBeginInfo-parameter" href="#VUID-vkCmdBeginRenderPass2-pSubpassBeginInfo-parameter"></a> <span class="vuid">VUID-vkCmdBeginRenderPass2-pSubpassBeginInfo-parameter</span><br>
 <code>pSubpassBeginInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkSubpassBeginInfo">VkSubpassBeginInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass2-commandBuffer-recording" href="#VUID-vkCmdBeginRenderPass2-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdBeginRenderPass2-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap7.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass2-commandBuffer-cmdpool" href="#VUID-vkCmdBeginRenderPass2-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdBeginRenderPass2-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass2-renderpass" href="#VUID-vkCmdBeginRenderPass2-renderpass"></a> <span class="vuid">VUID-vkCmdBeginRenderPass2-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called outside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdBeginRenderPass2-bufferlevel" href="#VUID-vkCmdBeginRenderPass2-bufferlevel"></a> <span class="vuid">VUID-vkCmdBeginRenderPass2-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap7.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#synchronization-pipeline-stages-types">Pipeline Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkRenderPassBeginInfo</code> structure is defined as:</p>
</div>
<div id="VkRenderPassBeginInfo" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkRenderPassBeginInfo {
    VkStructureType        sType;
    <span class="directive">const</span> <span class="directive">void</span>*            pNext;
    VkRenderPass           renderPass;
    VkFramebuffer          framebuffer;
    VkRect2D               renderArea;
    uint32_t               clearValueCount;
    <span class="directive">const</span> VkClearValue*    pClearValues;
} VkRenderPassBeginInfo;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>renderPass</code> is the render pass to begin an instance of.</p>
</li>
<li>
<p><code>framebuffer</code> is the framebuffer containing the attachments that are
used with the render pass.</p>
</li>
<li>
<p><code>renderArea</code> is the render area that is affected by the render pass
instance, and is described in more detail below.</p>
</li>
<li>
<p><code>clearValueCount</code> is the number of elements in <code>pClearValues</code>.</p>
</li>
<li>
<p><code>pClearValues</code> is a pointer to an array of <code>clearValueCount</code>
<a href="chap20.html#VkClearValue">VkClearValue</a> structures that contains clear values for each
attachment, if the attachment uses a <code>loadOp</code> value of
<code>VK_ATTACHMENT_LOAD_OP_CLEAR</code> or if the attachment has a
depth/stencil format and uses a <code>stencilLoadOp</code> value of
<code>VK_ATTACHMENT_LOAD_OP_CLEAR</code>.
The array is indexed by attachment number.
Only elements corresponding to cleared attachments are used.
Other elements of <code>pClearValues</code> are ignored.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>renderArea</code> is the render area that is affected by the render pass
instance.
The effects of attachment load, store and multisample resolve operations are
restricted to the pixels whose x and y coordinates fall within the render
area on all attachments.
The render area extends to all layers of <code>framebuffer</code>.
The application <strong class="purple">must</strong> ensure (using scissor if necessary) that all rendering
is contained within the render area.
The render area, after any transform specified by
<a href="#VkRenderPassTransformBeginInfoQCOM">VkRenderPassTransformBeginInfoQCOM</a>::<code>transform</code> is applied, <strong class="purple">must</strong>
be contained within the framebuffer dimensions.</p>
</div>
<div class="paragraph">
<p>If <a href="chap27.html#vertexpostproc-renderpass-transform">render pass transform</a> is
enabled, then <code>renderArea</code> <strong class="purple">must</strong> equal the framebuffer pre-transformed
dimensions.
After <code>renderArea</code> has been transformed by
<a href="#VkRenderPassTransformBeginInfoQCOM">VkRenderPassTransformBeginInfoQCOM</a>::<code>transform</code>, the resulting
render area <strong class="purple">must</strong> be equal to the framebuffer dimensions.</p>
</div>
<div class="paragraph">
<p>When multiview is enabled, the resolve operation at the end of a subpass
applies to all views in the view mask.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Note</div>
<div class="paragraph">
<p>There <strong class="purple">may</strong> be a performance cost for using a render area smaller than the
framebuffer, unless it matches the render area granularity for the render
pass.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-clearValueCount-00902" href="#VUID-VkRenderPassBeginInfo-clearValueCount-00902"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-clearValueCount-00902</span><br>

<code>clearValueCount</code> <strong class="purple">must</strong> be greater than the largest attachment index
in <code>renderPass</code> that specifies a <code>loadOp</code> (or
<code>stencilLoadOp</code>, if the attachment has a depth/stencil format) of
<code>VK_ATTACHMENT_LOAD_OP_CLEAR</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-renderPass-00904" href="#VUID-VkRenderPassBeginInfo-renderPass-00904"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-renderPass-00904</span><br>

<code>renderPass</code> <strong class="purple">must</strong> be <a href="#renderpass-compatibility">compatible</a> with
the <code>renderPass</code> member of the <a href="#VkFramebufferCreateInfo">VkFramebufferCreateInfo</a>
structure specified when creating <code>framebuffer</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-pNext-02850" href="#VUID-VkRenderPassBeginInfo-pNext-02850"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-pNext-02850</span><br>

If the <code>pNext</code> chain does not contain
<a href="#VkDeviceGroupRenderPassBeginInfo">VkDeviceGroupRenderPassBeginInfo</a> or its
<code>deviceRenderAreaCount</code> member is equal to 0,
<code>renderArea.offset.x</code> <strong class="purple">must</strong> be greater than or equal to 0</p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-pNext-02851" href="#VUID-VkRenderPassBeginInfo-pNext-02851"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-pNext-02851</span><br>

If the <code>pNext</code> chain does not contain
<a href="#VkDeviceGroupRenderPassBeginInfo">VkDeviceGroupRenderPassBeginInfo</a> or its
<code>deviceRenderAreaCount</code> member is equal to 0,
<code>renderArea.offset.y</code> <strong class="purple">must</strong> be greater than or equal to 0</p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-pNext-02852" href="#VUID-VkRenderPassBeginInfo-pNext-02852"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-pNext-02852</span><br>

If the <code>pNext</code> chain does not contain
<a href="#VkDeviceGroupRenderPassBeginInfo">VkDeviceGroupRenderPassBeginInfo</a> or its
<code>deviceRenderAreaCount</code> member is equal to 0,
<span class="eq"><code>renderArea.offset.x</code> +  <code>renderArea.offset.width</code></span>
<strong class="purple">must</strong> be less than or equal to
<a href="#VkFramebufferCreateInfo">VkFramebufferCreateInfo</a>::<code>width</code> the <code>framebuffer</code> was
created with</p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-pNext-02853" href="#VUID-VkRenderPassBeginInfo-pNext-02853"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-pNext-02853</span><br>

If the <code>pNext</code> chain does not contain
<a href="#VkDeviceGroupRenderPassBeginInfo">VkDeviceGroupRenderPassBeginInfo</a> or its
<code>deviceRenderAreaCount</code> member is equal to 0,
<span class="eq"><code>renderArea.offset.y</code> +  <code>renderArea.offset.height</code></span>
<strong class="purple">must</strong> be less than or equal to
<a href="#VkFramebufferCreateInfo">VkFramebufferCreateInfo</a>::<code>height</code> the <code>framebuffer</code> was
created with</p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-pNext-02854" href="#VUID-VkRenderPassBeginInfo-pNext-02854"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-pNext-02854</span><br>

If the <code>pNext</code> chain contains
<a href="#VkDeviceGroupRenderPassBeginInfo">VkDeviceGroupRenderPassBeginInfo</a>, the <code>offset.x</code> member of
each element of <code>pDeviceRenderAreas</code> <strong class="purple">must</strong> be greater than or equal
to 0</p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-pNext-02855" href="#VUID-VkRenderPassBeginInfo-pNext-02855"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-pNext-02855</span><br>

If the <code>pNext</code> chain contains
<a href="#VkDeviceGroupRenderPassBeginInfo">VkDeviceGroupRenderPassBeginInfo</a>, the <code>offset.y</code> member of
each element of <code>pDeviceRenderAreas</code> <strong class="purple">must</strong> be greater than or equal
to 0</p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-pNext-02856" href="#VUID-VkRenderPassBeginInfo-pNext-02856"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-pNext-02856</span><br>

If the <code>pNext</code> chain contains
<a href="#VkDeviceGroupRenderPassBeginInfo">VkDeviceGroupRenderPassBeginInfo</a>, <span class="eq"><code>offset.x</code> + 
<code>offset.width</code></span> of each element of <code>pDeviceRenderAreas</code> <strong class="purple">must</strong> be
less than or equal to <a href="#VkFramebufferCreateInfo">VkFramebufferCreateInfo</a>::<code>width</code> the
<code>framebuffer</code> was created with</p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-pNext-02857" href="#VUID-VkRenderPassBeginInfo-pNext-02857"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-pNext-02857</span><br>

If the <code>pNext</code> chain contains
<a href="#VkDeviceGroupRenderPassBeginInfo">VkDeviceGroupRenderPassBeginInfo</a>, <span class="eq"><code>offset.y</code> + 
<code>offset.height</code></span> of each element of <code>pDeviceRenderAreas</code> <strong class="purple">must</strong>
be less than or equal to <a href="#VkFramebufferCreateInfo">VkFramebufferCreateInfo</a>::<code>height</code> the
<code>framebuffer</code> was created with</p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-framebuffer-03207" href="#VUID-VkRenderPassBeginInfo-framebuffer-03207"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-framebuffer-03207</span><br>

If <code>framebuffer</code> was created with a
<a href="#VkFramebufferCreateInfo">VkFramebufferCreateInfo</a>::<code>flags</code> value that did not include
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, and the <code>pNext</code> chain
includes a <a href="#VkRenderPassAttachmentBeginInfo">VkRenderPassAttachmentBeginInfo</a> structure, its
<code>attachmentCount</code> <strong class="purple">must</strong> be zero</p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-framebuffer-03208" href="#VUID-VkRenderPassBeginInfo-framebuffer-03208"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-framebuffer-03208</span><br>

If <code>framebuffer</code> was created with a
<a href="#VkFramebufferCreateInfo">VkFramebufferCreateInfo</a>::<code>flags</code> value that included
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, the <code>attachmentCount</code> of
a <a href="#VkRenderPassAttachmentBeginInfo">VkRenderPassAttachmentBeginInfo</a> structure included in the
<code>pNext</code> chain <strong class="purple">must</strong> be equal to the value of
<a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a>::<code>attachmentImageInfoCount</code>
used to create <code>framebuffer</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-framebuffer-02780" href="#VUID-VkRenderPassBeginInfo-framebuffer-02780"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-framebuffer-02780</span><br>

If <code>framebuffer</code> was created with a
<a href="#VkFramebufferCreateInfo">VkFramebufferCreateInfo</a>::<code>flags</code> value that included
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of the
<code>pAttachments</code> member of a <a href="#VkRenderPassAttachmentBeginInfo">VkRenderPassAttachmentBeginInfo</a>
structure included in the <code>pNext</code> chain <strong class="purple">must</strong> have been created on
the same <a href="chap6.html#VkDevice">VkDevice</a> as <code>framebuffer</code> and <code>renderPass</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-framebuffer-03209" href="#VUID-VkRenderPassBeginInfo-framebuffer-03209"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-framebuffer-03209</span><br>

If <code>framebuffer</code> was created with a
<a href="#VkFramebufferCreateInfo">VkFramebufferCreateInfo</a>::<code>flags</code> value that included
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of the
<code>pAttachments</code> member of a <a href="#VkRenderPassAttachmentBeginInfo">VkRenderPassAttachmentBeginInfo</a>
structure included in the <code>pNext</code> chain <strong class="purple">must</strong> be a <a href="chap13.html#VkImageView">VkImageView</a>
of an image created with a value of <a href="chap13.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>flags</code>
equal to the <code>flags</code> member of the corresponding element of
<a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a>::<code>pAttachmentImageInfos</code>
used to create <code>framebuffer</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-framebuffer-04627" href="#VUID-VkRenderPassBeginInfo-framebuffer-04627"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-framebuffer-04627</span><br>

If <code>framebuffer</code> was created with a
<a href="#VkFramebufferCreateInfo">VkFramebufferCreateInfo</a>::<code>flags</code> value that included
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of the
<code>pAttachments</code> member of a <a href="#VkRenderPassAttachmentBeginInfo">VkRenderPassAttachmentBeginInfo</a>
structure included in the <code>pNext</code> chain <strong class="purple">must</strong> be a <a href="chap13.html#VkImageView">VkImageView</a>
with <a href="chap13.html#resources-image-inherited-usage">an inherited usage</a> equal to
the <code>usage</code> member of the corresponding element of
<a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a>::<code>pAttachmentImageInfos</code>
used to create <code>framebuffer</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-framebuffer-03211" href="#VUID-VkRenderPassBeginInfo-framebuffer-03211"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-framebuffer-03211</span><br>

If <code>framebuffer</code> was created with a
<a href="#VkFramebufferCreateInfo">VkFramebufferCreateInfo</a>::<code>flags</code> value that included
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of the
<code>pAttachments</code> member of a <a href="#VkRenderPassAttachmentBeginInfo">VkRenderPassAttachmentBeginInfo</a>
structure included in the <code>pNext</code> chain <strong class="purple">must</strong> be a <a href="chap13.html#VkImageView">VkImageView</a>
with a width equal to the <code>width</code> member of the corresponding
element of
<a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a>::<code>pAttachmentImageInfos</code>
used to create <code>framebuffer</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-framebuffer-03212" href="#VUID-VkRenderPassBeginInfo-framebuffer-03212"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-framebuffer-03212</span><br>

If <code>framebuffer</code> was created with a
<a href="#VkFramebufferCreateInfo">VkFramebufferCreateInfo</a>::<code>flags</code> value that included
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of the
<code>pAttachments</code> member of a <a href="#VkRenderPassAttachmentBeginInfo">VkRenderPassAttachmentBeginInfo</a>
structure included in the <code>pNext</code> chain <strong class="purple">must</strong> be a <a href="chap13.html#VkImageView">VkImageView</a>
with a height equal to the <code>height</code> member of the corresponding
element of
<a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a>::<code>pAttachmentImageInfos</code>
used to create <code>framebuffer</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-framebuffer-03213" href="#VUID-VkRenderPassBeginInfo-framebuffer-03213"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-framebuffer-03213</span><br>

If <code>framebuffer</code> was created with a
<a href="#VkFramebufferCreateInfo">VkFramebufferCreateInfo</a>::<code>flags</code> value that included
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of the
<code>pAttachments</code> member of a <a href="#VkRenderPassAttachmentBeginInfo">VkRenderPassAttachmentBeginInfo</a>
structure included in the <code>pNext</code> chain <strong class="purple">must</strong> be a <a href="chap13.html#VkImageView">VkImageView</a>
of an image created with a value of
<a href="chap13.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>subresourceRange.layerCount</code> equal to
the <code>layerCount</code> member of the corresponding element of
<a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a>::<code>pAttachmentImageInfos</code>
used to create <code>framebuffer</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-framebuffer-03214" href="#VUID-VkRenderPassBeginInfo-framebuffer-03214"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-framebuffer-03214</span><br>

If <code>framebuffer</code> was created with a
<a href="#VkFramebufferCreateInfo">VkFramebufferCreateInfo</a>::<code>flags</code> value that included
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of the
<code>pAttachments</code> member of a <a href="#VkRenderPassAttachmentBeginInfo">VkRenderPassAttachmentBeginInfo</a>
structure included in the <code>pNext</code> chain <strong class="purple">must</strong> be a <a href="chap13.html#VkImageView">VkImageView</a>
of an image created with a value of
<a href="chap13.html#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>::<code>viewFormatCount</code> equal to the
<code>viewFormatCount</code> member of the corresponding element of
<a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a>::<code>pAttachmentImageInfos</code>
used to create <code>framebuffer</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-framebuffer-03215" href="#VUID-VkRenderPassBeginInfo-framebuffer-03215"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-framebuffer-03215</span><br>

If <code>framebuffer</code> was created with a
<a href="#VkFramebufferCreateInfo">VkFramebufferCreateInfo</a>::<code>flags</code> value that included
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of the
<code>pAttachments</code> member of a <a href="#VkRenderPassAttachmentBeginInfo">VkRenderPassAttachmentBeginInfo</a>
structure included in the <code>pNext</code> chain <strong class="purple">must</strong> be a <a href="chap13.html#VkImageView">VkImageView</a>
of an image created with a set of elements in
<a href="chap13.html#VkImageFormatListCreateInfo">VkImageFormatListCreateInfo</a>::<code>pViewFormats</code> equal to the set
of elements in the <code>pViewFormats</code> member of the corresponding
element of
<a href="#VkFramebufferAttachmentsCreateInfo">VkFramebufferAttachmentsCreateInfo</a>::<code>pAttachmentImageInfos</code>
used to create <code>framebuffer</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-framebuffer-03216" href="#VUID-VkRenderPassBeginInfo-framebuffer-03216"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-framebuffer-03216</span><br>

If <code>framebuffer</code> was created with a
<a href="#VkFramebufferCreateInfo">VkFramebufferCreateInfo</a>::<code>flags</code> value that included
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of the
<code>pAttachments</code> member of a <a href="#VkRenderPassAttachmentBeginInfo">VkRenderPassAttachmentBeginInfo</a>
structure included in the <code>pNext</code> chain <strong class="purple">must</strong> be a <a href="chap13.html#VkImageView">VkImageView</a>
of an image created with a value of
<a href="chap13.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>format</code> equal to the corresponding
value of <a href="#VkAttachmentDescription">VkAttachmentDescription</a>::<code>format</code> in <code>renderPass</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-framebuffer-03217" href="#VUID-VkRenderPassBeginInfo-framebuffer-03217"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-framebuffer-03217</span><br>

If <code>framebuffer</code> was created with a
<a href="#VkFramebufferCreateInfo">VkFramebufferCreateInfo</a>::<code>flags</code> value that included
<code>VK_FRAMEBUFFER_CREATE_IMAGELESS_BIT</code>, each element of the
<code>pAttachments</code> member of a <a href="#VkRenderPassAttachmentBeginInfo">VkRenderPassAttachmentBeginInfo</a>
structure included in the <code>pNext</code> chain <strong class="purple">must</strong> be a <a href="chap13.html#VkImageView">VkImageView</a>
of an image created with a value of
<a href="chap13.html#VkImageCreateInfo">VkImageCreateInfo</a>::<code>samples</code> equal to the corresponding value
of <a href="#VkAttachmentDescription">VkAttachmentDescription</a>::<code>samples</code> in <code>renderPass</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-pNext-02869" href="#VUID-VkRenderPassBeginInfo-pNext-02869"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-pNext-02869</span><br>

If the <code>pNext</code> chain includes
<a href="#VkRenderPassTransformBeginInfoQCOM">VkRenderPassTransformBeginInfoQCOM</a>, <code>renderArea.offset</code> <strong class="purple">must</strong>
equal (0,0)</p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-pNext-02870" href="#VUID-VkRenderPassBeginInfo-pNext-02870"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-pNext-02870</span><br>

If the <code>pNext</code> chain includes
<a href="#VkRenderPassTransformBeginInfoQCOM">VkRenderPassTransformBeginInfoQCOM</a>, <code>renderArea.extent</code>
transformed by <a href="#VkRenderPassTransformBeginInfoQCOM">VkRenderPassTransformBeginInfoQCOM</a>::<code>transform</code>
<strong class="purple">must</strong> equal the <code>framebuffer</code> dimensions</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-sType-sType" href="#VUID-VkRenderPassBeginInfo-sType-sType"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_RENDER_PASS_BEGIN_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-pNext-pNext" href="#VUID-VkRenderPassBeginInfo-pNext-pNext"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-pNext-pNext</span><br>
 Each <code>pNext</code> member of any structure (including this one) in the <code>pNext</code> chain <strong class="purple">must</strong> be either <code>NULL</code> or a pointer to a valid instance of <a href="#VkDeviceGroupRenderPassBeginInfo">VkDeviceGroupRenderPassBeginInfo</a>, <a href="#VkRenderPassAttachmentBeginInfo">VkRenderPassAttachmentBeginInfo</a>, <a href="#VkRenderPassSampleLocationsBeginInfoEXT">VkRenderPassSampleLocationsBeginInfoEXT</a>, or <a href="#VkRenderPassTransformBeginInfoQCOM">VkRenderPassTransformBeginInfoQCOM</a></p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-sType-unique" href="#VUID-VkRenderPassBeginInfo-sType-unique"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-sType-unique</span><br>
 The <code>sType</code> value of each struct in the <code>pNext</code> chain <strong class="purple">must</strong> be unique</p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-renderPass-parameter" href="#VUID-VkRenderPassBeginInfo-renderPass-parameter"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-renderPass-parameter</span><br>
 <code>renderPass</code> <strong class="purple">must</strong> be a valid <a href="#VkRenderPass">VkRenderPass</a> handle</p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-framebuffer-parameter" href="#VUID-VkRenderPassBeginInfo-framebuffer-parameter"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-framebuffer-parameter</span><br>
 <code>framebuffer</code> <strong class="purple">must</strong> be a valid <a href="#VkFramebuffer">VkFramebuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-pClearValues-parameter" href="#VUID-VkRenderPassBeginInfo-pClearValues-parameter"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-pClearValues-parameter</span><br>
 If <code>clearValueCount</code> is not <code>0</code>, <code>pClearValues</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>clearValueCount</code> <a href="chap20.html#VkClearValue">VkClearValue</a> unions</p>
</li>
<li>
<p><a id="VUID-VkRenderPassBeginInfo-commonparent" href="#VUID-VkRenderPassBeginInfo-commonparent"></a> <span class="vuid">VUID-VkRenderPassBeginInfo-commonparent</span><br>
 Both of <code>framebuffer</code>, and <code>renderPass</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from the same <a href="chap6.html#VkDevice">VkDevice</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The image layout of the depth aspect of a depth/stencil attachment referring
to an image created with
<code>VK_IMAGE_CREATE_SAMPLE_LOCATIONS_COMPATIBLE_DEPTH_BIT_EXT</code> is dependent
on the last sample locations used to render to the image subresource, thus
preserving the contents of such depth/stencil attachments across subpass
boundaries requires the application to specify these sample locations
whenever a layout transition of the attachment <strong class="purple">may</strong> occur.
This information <strong class="purple">can</strong> be provided by adding a
<code>VkRenderPassSampleLocationsBeginInfoEXT</code> structure to the <code>pNext</code>
chain of <code>VkRenderPassBeginInfo</code>.</p>
</div>
<div class="paragraph">
<p>The <code>VkRenderPassSampleLocationsBeginInfoEXT</code> structure is defined as:</p>
</div>
<div id="VkRenderPassSampleLocationsBeginInfoEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_sample_locations</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkRenderPassSampleLocationsBeginInfoEXT {
    VkStructureType                          sType;
    <span class="directive">const</span> <span class="directive">void</span>*                              pNext;
    uint32_t                                 attachmentInitialSampleLocationsCount;
    <span class="directive">const</span> VkAttachmentSampleLocationsEXT*    pAttachmentInitialSampleLocations;
    uint32_t                                 postSubpassSampleLocationsCount;
    <span class="directive">const</span> VkSubpassSampleLocationsEXT*       pPostSubpassSampleLocations;
} VkRenderPassSampleLocationsBeginInfoEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>attachmentInitialSampleLocationsCount</code> is the number of elements in
the <code>pAttachmentInitialSampleLocations</code> array.</p>
</li>
<li>
<p><code>pAttachmentInitialSampleLocations</code> is a pointer to an array of
<code>attachmentInitialSampleLocationsCount</code>
<a href="#VkAttachmentSampleLocationsEXT">VkAttachmentSampleLocationsEXT</a> structures specifying the
attachment indices and their corresponding sample location state.
Each element of <code>pAttachmentInitialSampleLocations</code> <strong class="purple">can</strong> specify the
sample location state to use in the automatic layout transition
performed to transition a depth/stencil attachment from the initial
layout of the attachment to the image layout specified for the
attachment in the first subpass using it.</p>
</li>
<li>
<p><code>postSubpassSampleLocationsCount</code> is the number of elements in the
<code>pPostSubpassSampleLocations</code> array.</p>
</li>
<li>
<p><code>pPostSubpassSampleLocations</code> is a pointer to an array of
<code>postSubpassSampleLocationsCount</code> <a href="#VkSubpassSampleLocationsEXT">VkSubpassSampleLocationsEXT</a>
structures specifying the subpass indices and their corresponding sample
location state.
Each element of <code>pPostSubpassSampleLocations</code> <strong class="purple">can</strong> specify the
sample location state to use in the automatic layout transition
performed to transition the depth/stencil attachment used by the
specified subpass to the image layout specified in a dependent subpass
or to the final layout of the attachment in case the specified subpass
is the last subpass using that attachment.
In addition, if
<a href="chap42.html#VkPhysicalDeviceSampleLocationsPropertiesEXT">VkPhysicalDeviceSampleLocationsPropertiesEXT</a>::<code>variableSampleLocations</code>
is <code>VK_FALSE</code>, each element of <code>pPostSubpassSampleLocations</code>
<strong class="purple">must</strong> specify the sample location state that matches the sample
locations used by all pipelines that will be bound to a command buffer
during the specified subpass.
If <code>variableSampleLocations</code> is <code>VK_TRUE</code>, the sample locations
used for rasterization do not depend on
<code>pPostSubpassSampleLocations</code>.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkRenderPassSampleLocationsBeginInfoEXT-sType-sType" href="#VUID-VkRenderPassSampleLocationsBeginInfoEXT-sType-sType"></a> <span class="vuid">VUID-VkRenderPassSampleLocationsBeginInfoEXT-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_RENDER_PASS_SAMPLE_LOCATIONS_BEGIN_INFO_EXT</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassSampleLocationsBeginInfoEXT-pAttachmentInitialSampleLocations-parameter" href="#VUID-VkRenderPassSampleLocationsBeginInfoEXT-pAttachmentInitialSampleLocations-parameter"></a> <span class="vuid">VUID-VkRenderPassSampleLocationsBeginInfoEXT-pAttachmentInitialSampleLocations-parameter</span><br>
 If <code>attachmentInitialSampleLocationsCount</code> is not <code>0</code>, <code>pAttachmentInitialSampleLocations</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>attachmentInitialSampleLocationsCount</code> valid <a href="#VkAttachmentSampleLocationsEXT">VkAttachmentSampleLocationsEXT</a> structures</p>
</li>
<li>
<p><a id="VUID-VkRenderPassSampleLocationsBeginInfoEXT-pPostSubpassSampleLocations-parameter" href="#VUID-VkRenderPassSampleLocationsBeginInfoEXT-pPostSubpassSampleLocations-parameter"></a> <span class="vuid">VUID-VkRenderPassSampleLocationsBeginInfoEXT-pPostSubpassSampleLocations-parameter</span><br>
 If <code>postSubpassSampleLocationsCount</code> is not <code>0</code>, <code>pPostSubpassSampleLocations</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>postSubpassSampleLocationsCount</code> valid <a href="#VkSubpassSampleLocationsEXT">VkSubpassSampleLocationsEXT</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkAttachmentSampleLocationsEXT</code> structure is defined as:</p>
</div>
<div id="VkAttachmentSampleLocationsEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_sample_locations</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkAttachmentSampleLocationsEXT {
    uint32_t                    attachmentIndex;
    VkSampleLocationsInfoEXT    sampleLocationsInfo;
} VkAttachmentSampleLocationsEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>attachmentIndex</code> is the index of the attachment for which the
sample locations state is provided.</p>
</li>
<li>
<p><code>sampleLocationsInfo</code> is the sample locations state to use for the
layout transition of the given attachment from the initial layout of the
attachment to the image layout specified for the attachment in the first
subpass using it.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the image referenced by the framebuffer attachment at index
<code>attachmentIndex</code> was not created with
<code>VK_IMAGE_CREATE_SAMPLE_LOCATIONS_COMPATIBLE_DEPTH_BIT_EXT</code> then the
values specified in <code>sampleLocationsInfo</code> are ignored.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAttachmentSampleLocationsEXT-attachmentIndex-01531" href="#VUID-VkAttachmentSampleLocationsEXT-attachmentIndex-01531"></a> <span class="vuid">VUID-VkAttachmentSampleLocationsEXT-attachmentIndex-01531</span><br>

<code>attachmentIndex</code> <strong class="purple">must</strong> be less than the <code>attachmentCount</code>
specified in <a href="#VkRenderPassCreateInfo">VkRenderPassCreateInfo</a> the render pass specified by
<a href="#VkRenderPassBeginInfo">VkRenderPassBeginInfo</a>::<code>renderPass</code> was created with</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkAttachmentSampleLocationsEXT-sampleLocationsInfo-parameter" href="#VUID-VkAttachmentSampleLocationsEXT-sampleLocationsInfo-parameter"></a> <span class="vuid">VUID-VkAttachmentSampleLocationsEXT-sampleLocationsInfo-parameter</span><br>
 <code>sampleLocationsInfo</code> <strong class="purple">must</strong> be a valid <a href="chap28.html#VkSampleLocationsInfoEXT">VkSampleLocationsInfoEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkSubpassSampleLocationsEXT</code> structure is defined as:</p>
</div>
<div id="VkSubpassSampleLocationsEXT" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_EXT_sample_locations</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkSubpassSampleLocationsEXT {
    uint32_t                    subpassIndex;
    VkSampleLocationsInfoEXT    sampleLocationsInfo;
} VkSubpassSampleLocationsEXT;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>subpassIndex</code> is the index of the subpass for which the sample
locations state is provided.</p>
</li>
<li>
<p><code>sampleLocationsInfo</code> is the sample locations state to use for the
layout transition of the depth/stencil attachment away from the image
layout the attachment is used with in the subpass specified in
<code>subpassIndex</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the image referenced by the depth/stencil attachment used in the subpass
identified by <code>subpassIndex</code> was not created with
<code>VK_IMAGE_CREATE_SAMPLE_LOCATIONS_COMPATIBLE_DEPTH_BIT_EXT</code> or if the
subpass does not use a depth/stencil attachment, and
<a href="chap42.html#VkPhysicalDeviceSampleLocationsPropertiesEXT">VkPhysicalDeviceSampleLocationsPropertiesEXT</a>::<code>variableSampleLocations</code>
is <code>VK_TRUE</code> then the values specified in <code>sampleLocationsInfo</code> are
ignored.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSubpassSampleLocationsEXT-subpassIndex-01532" href="#VUID-VkSubpassSampleLocationsEXT-subpassIndex-01532"></a> <span class="vuid">VUID-VkSubpassSampleLocationsEXT-subpassIndex-01532</span><br>

<code>subpassIndex</code> <strong class="purple">must</strong> be less than the <code>subpassCount</code> specified
in <a href="#VkRenderPassCreateInfo">VkRenderPassCreateInfo</a> the render pass specified by
<a href="#VkRenderPassBeginInfo">VkRenderPassBeginInfo</a>::<code>renderPass</code> was created with</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSubpassSampleLocationsEXT-sampleLocationsInfo-parameter" href="#VUID-VkSubpassSampleLocationsEXT-sampleLocationsInfo-parameter"></a> <span class="vuid">VUID-VkSubpassSampleLocationsEXT-sampleLocationsInfo-parameter</span><br>
 <code>sampleLocationsInfo</code> <strong class="purple">must</strong> be a valid <a href="chap28.html#VkSampleLocationsInfoEXT">VkSampleLocationsInfoEXT</a> structure</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To begin a renderpass instance with <a href="chap27.html#vertexpostproc-renderpass-transform">render pass transform</a> enabled, add the
<a href="#VkRenderPassTransformBeginInfoQCOM">VkRenderPassTransformBeginInfoQCOM</a> to the <code>pNext</code> chain of
<a href="#VkRenderPassBeginInfo">VkRenderPassBeginInfo</a> structure passed to the
<a href="#vkCmdBeginRenderPass">vkCmdBeginRenderPass</a> command specifying the renderpass transform.</p>
</div>
<div class="paragraph">
<p>The <code>VkRenderPassTransformBeginInfoQCOM</code> structure is defined as:</p>
</div>
<div id="VkRenderPassTransformBeginInfoQCOM" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_QCOM_render_pass_transform</span>
<span class="keyword">typedef</span> <span class="keyword">struct</span> VkRenderPassTransformBeginInfoQCOM {
    VkStructureType                  sType;
    <span class="directive">void</span>*                            pNext;
    VkSurfaceTransformFlagBitsKHR    transform;
} VkRenderPassTransformBeginInfoQCOM;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>transform</code> is a <a href="chap34.html#VkSurfaceTransformFlagBitsKHR">VkSurfaceTransformFlagBitsKHR</a> value
describing the transform to be applied to rasterization.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkRenderPassTransformBeginInfoQCOM-transform-02871" href="#VUID-VkRenderPassTransformBeginInfoQCOM-transform-02871"></a> <span class="vuid">VUID-VkRenderPassTransformBeginInfoQCOM-transform-02871</span><br>

<code>transform</code> <strong class="purple">must</strong> be <code>VK_SURFACE_TRANSFORM_IDENTITY_BIT_KHR</code>,
<code>VK_SURFACE_TRANSFORM_ROTATE_90_BIT_KHR</code>,
<code>VK_SURFACE_TRANSFORM_ROTATE_180_BIT_KHR</code>, or
<code>VK_SURFACE_TRANSFORM_ROTATE_270_BIT_KHR</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassTransformBeginInfoQCOM-flags-02872" href="#VUID-VkRenderPassTransformBeginInfoQCOM-flags-02872"></a> <span class="vuid">VUID-VkRenderPassTransformBeginInfoQCOM-flags-02872</span><br>

The <code>renderpass</code> <strong class="purple">must</strong> have been created with
<a href="#VkRenderPassCreateInfo">VkRenderPassCreateInfo</a>::<code>flags</code> containing
<code>VK_RENDER_PASS_CREATE_TRANSFORM_BIT_QCOM</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkRenderPassTransformBeginInfoQCOM-sType-sType" href="#VUID-VkRenderPassTransformBeginInfoQCOM-sType-sType"></a> <span class="vuid">VUID-VkRenderPassTransformBeginInfoQCOM-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_RENDER_PASS_TRANSFORM_BEGIN_INFO_QCOM</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkSubpassBeginInfo</code> structure is defined as:</p>
</div>
<div id="VkSubpassBeginInfo" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">struct</span> VkSubpassBeginInfo {
    VkStructureType      sType;
    <span class="directive">const</span> <span class="directive">void</span>*          pNext;
    VkSubpassContents    contents;
} VkSubpassBeginInfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkSubpassBeginInfoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_create_renderpass2</span>
<span class="keyword">typedef</span> VkSubpassBeginInfo VkSubpassBeginInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>contents</code> is a <a href="#VkSubpassContents">VkSubpassContents</a> value specifying how the
commands in the next subpass will be provided.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSubpassBeginInfo-sType-sType" href="#VUID-VkSubpassBeginInfo-sType-sType"></a> <span class="vuid">VUID-VkSubpassBeginInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_SUBPASS_BEGIN_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassBeginInfo-pNext-pNext" href="#VUID-VkSubpassBeginInfo-pNext-pNext"></a> <span class="vuid">VUID-VkSubpassBeginInfo-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassBeginInfo-contents-parameter" href="#VUID-VkSubpassBeginInfo-contents-parameter"></a> <span class="vuid">VUID-VkSubpassBeginInfo-contents-parameter</span><br>
 <code>contents</code> <strong class="purple">must</strong> be a valid <a href="#VkSubpassContents">VkSubpassContents</a> value</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Possible values of <a href="#vkCmdBeginRenderPass">vkCmdBeginRenderPass</a>::<code>contents</code>, specifying
how the commands in the first subpass will be provided, are:</p>
</div>
<div id="VkSubpassContents" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="keyword">typedef</span> <span class="keyword">enum</span> VkSubpassContents {
    VK_SUBPASS_CONTENTS_INLINE = <span class="integer">0</span>,
    VK_SUBPASS_CONTENTS_SECONDARY_COMMAND_BUFFERS = <span class="integer">1</span>,
} VkSubpassContents;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VK_SUBPASS_CONTENTS_INLINE</code> specifies that the contents of the
subpass will be recorded inline in the primary command buffer, and
secondary command buffers <strong class="purple">must</strong> not be executed within the subpass.</p>
</li>
<li>
<p><code>VK_SUBPASS_CONTENTS_SECONDARY_COMMAND_BUFFERS</code> specifies that the
contents are recorded in secondary command buffers that will be called
from the primary command buffer, and <a href="chap7.html#vkCmdExecuteCommands">vkCmdExecuteCommands</a> is the
only valid command on the command buffer until <a href="#vkCmdNextSubpass">vkCmdNextSubpass</a> or
<a href="#vkCmdEndRenderPass">vkCmdEndRenderPass</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>If the <code>pNext</code> chain of <a href="#VkRenderPassBeginInfo">VkRenderPassBeginInfo</a> includes a
<code>VkDeviceGroupRenderPassBeginInfo</code> structure, then that structure
includes a device mask and set of render areas for the render pass instance.</p>
</div>
<div class="paragraph">
<p>The <code>VkDeviceGroupRenderPassBeginInfo</code> structure is defined as:</p>
</div>
<div id="VkDeviceGroupRenderPassBeginInfo" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">struct</span> VkDeviceGroupRenderPassBeginInfo {
    VkStructureType    sType;
    <span class="directive">const</span> <span class="directive">void</span>*        pNext;
    uint32_t           deviceMask;
    uint32_t           deviceRenderAreaCount;
    <span class="directive">const</span> VkRect2D*    pDeviceRenderAreas;
} VkDeviceGroupRenderPassBeginInfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkDeviceGroupRenderPassBeginInfoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_device_group</span>
<span class="keyword">typedef</span> VkDeviceGroupRenderPassBeginInfo VkDeviceGroupRenderPassBeginInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>deviceMask</code> is the device mask for the render pass instance.</p>
</li>
<li>
<p><code>deviceRenderAreaCount</code> is the number of elements in the
<code>pDeviceRenderAreas</code> array.</p>
</li>
<li>
<p><code>pDeviceRenderAreas</code> is a pointer to an array of <a href="chap4.html#VkRect2D">VkRect2D</a>
structures defining the render area for each physical device.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>deviceMask</code> serves several purposes.
It is an upper bound on the set of physical devices that <strong class="purple">can</strong> be used during
the render pass instance, and the initial device mask when the render pass
instance begins.
In addition, commands transitioning to the next subpass in the render pass
instance and commands ending the render pass instance, and, accordingly
render pass attachment load, store, and resolve operations and subpass
dependencies corresponding to the render pass instance, are executed on the
physical devices included in the device mask provided here.</p>
</div>
<div class="paragraph">
<p>If <code>deviceRenderAreaCount</code> is not zero, then the elements of
<code>pDeviceRenderAreas</code> override the value of
<a href="#VkRenderPassBeginInfo">VkRenderPassBeginInfo</a>::<code>renderArea</code>, and provide a render area
specific to each physical device.
These render areas serve the same purpose as
<a href="#VkRenderPassBeginInfo">VkRenderPassBeginInfo</a>::<code>renderArea</code>, including controlling the
region of attachments that are cleared by <code>VK_ATTACHMENT_LOAD_OP_CLEAR</code>
and that are resolved into resolve attachments.</p>
</div>
<div class="paragraph">
<p>If this structure is not present, the render pass instances device mask is
the value of <a href="chap7.html#VkDeviceGroupCommandBufferBeginInfo">VkDeviceGroupCommandBufferBeginInfo</a>::<code>deviceMask</code>.
If this structure is not present or if <code>deviceRenderAreaCount</code> is zero,
<a href="#VkRenderPassBeginInfo">VkRenderPassBeginInfo</a>::<code>renderArea</code> is used for all physical
devices.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDeviceGroupRenderPassBeginInfo-deviceMask-00905" href="#VUID-VkDeviceGroupRenderPassBeginInfo-deviceMask-00905"></a> <span class="vuid">VUID-VkDeviceGroupRenderPassBeginInfo-deviceMask-00905</span><br>

<code>deviceMask</code> <strong class="purple">must</strong> be a valid device mask value</p>
</li>
<li>
<p><a id="VUID-VkDeviceGroupRenderPassBeginInfo-deviceMask-00906" href="#VUID-VkDeviceGroupRenderPassBeginInfo-deviceMask-00906"></a> <span class="vuid">VUID-VkDeviceGroupRenderPassBeginInfo-deviceMask-00906</span><br>

<code>deviceMask</code> <strong class="purple">must</strong> not be zero</p>
</li>
<li>
<p><a id="VUID-VkDeviceGroupRenderPassBeginInfo-deviceMask-00907" href="#VUID-VkDeviceGroupRenderPassBeginInfo-deviceMask-00907"></a> <span class="vuid">VUID-VkDeviceGroupRenderPassBeginInfo-deviceMask-00907</span><br>

<code>deviceMask</code> <strong class="purple">must</strong> be a subset of the command buffers initial
device mask</p>
</li>
<li>
<p><a id="VUID-VkDeviceGroupRenderPassBeginInfo-deviceRenderAreaCount-00908" href="#VUID-VkDeviceGroupRenderPassBeginInfo-deviceRenderAreaCount-00908"></a> <span class="vuid">VUID-VkDeviceGroupRenderPassBeginInfo-deviceRenderAreaCount-00908</span><br>

<code>deviceRenderAreaCount</code> <strong class="purple">must</strong> either be zero or equal to the number
of physical devices in the logical device</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkDeviceGroupRenderPassBeginInfo-sType-sType" href="#VUID-VkDeviceGroupRenderPassBeginInfo-sType-sType"></a> <span class="vuid">VUID-VkDeviceGroupRenderPassBeginInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_DEVICE_GROUP_RENDER_PASS_BEGIN_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkDeviceGroupRenderPassBeginInfo-pDeviceRenderAreas-parameter" href="#VUID-VkDeviceGroupRenderPassBeginInfo-pDeviceRenderAreas-parameter"></a> <span class="vuid">VUID-VkDeviceGroupRenderPassBeginInfo-pDeviceRenderAreas-parameter</span><br>
 If <code>deviceRenderAreaCount</code> is not <code>0</code>, <code>pDeviceRenderAreas</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>deviceRenderAreaCount</code> <a href="chap4.html#VkRect2D">VkRect2D</a> structures</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkRenderPassAttachmentBeginInfo</code> structure is defined as:</p>
</div>
<div id="VkRenderPassAttachmentBeginInfo" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">struct</span> VkRenderPassAttachmentBeginInfo {
    VkStructureType       sType;
    <span class="directive">const</span> <span class="directive">void</span>*           pNext;
    uint32_t              attachmentCount;
    <span class="directive">const</span> VkImageView*    pAttachments;
} VkRenderPassAttachmentBeginInfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkRenderPassAttachmentBeginInfoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_imageless_framebuffer</span>
<span class="keyword">typedef</span> VkRenderPassAttachmentBeginInfo VkRenderPassAttachmentBeginInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
<li>
<p><code>attachmentCount</code> is the number of attachments.</p>
</li>
<li>
<p><code>pAttachments</code> is a pointer to an array of <code>VkImageView</code>
handles, each of which will be used as the corresponding attachment in
the render pass instance.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkRenderPassAttachmentBeginInfo-pAttachments-03218" href="#VUID-VkRenderPassAttachmentBeginInfo-pAttachments-03218"></a> <span class="vuid">VUID-VkRenderPassAttachmentBeginInfo-pAttachments-03218</span><br>

Each element of <code>pAttachments</code> <strong class="purple">must</strong> only specify a single mip level</p>
</li>
<li>
<p><a id="VUID-VkRenderPassAttachmentBeginInfo-pAttachments-03219" href="#VUID-VkRenderPassAttachmentBeginInfo-pAttachments-03219"></a> <span class="vuid">VUID-VkRenderPassAttachmentBeginInfo-pAttachments-03219</span><br>

Each element of <code>pAttachments</code> <strong class="purple">must</strong> have been created with the
identity swizzle</p>
</li>
<li>
<p><a id="VUID-VkRenderPassAttachmentBeginInfo-pAttachments-04114" href="#VUID-VkRenderPassAttachmentBeginInfo-pAttachments-04114"></a> <span class="vuid">VUID-VkRenderPassAttachmentBeginInfo-pAttachments-04114</span><br>

Each element of <code>pAttachments</code> <strong class="purple">must</strong> have been created with
<a href="chap13.html#VkImageViewCreateInfo">VkImageViewCreateInfo</a>::<code>viewType</code> not equal to
<code>VK_IMAGE_VIEW_TYPE_3D</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkRenderPassAttachmentBeginInfo-sType-sType" href="#VUID-VkRenderPassAttachmentBeginInfo-sType-sType"></a> <span class="vuid">VUID-VkRenderPassAttachmentBeginInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_RENDER_PASS_ATTACHMENT_BEGIN_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkRenderPassAttachmentBeginInfo-pAttachments-parameter" href="#VUID-VkRenderPassAttachmentBeginInfo-pAttachments-parameter"></a> <span class="vuid">VUID-VkRenderPassAttachmentBeginInfo-pAttachments-parameter</span><br>
 If <code>attachmentCount</code> is not <code>0</code>, <code>pAttachments</code> <strong class="purple">must</strong> be a valid pointer to an array of <code>attachmentCount</code> valid <a href="chap13.html#VkImageView">VkImageView</a> handles</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To query the render area granularity, call:</p>
</div>
<div id="vkGetRenderAreaGranularity" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="directive">void</span> vkGetRenderAreaGranularity(
    VkDevice                                    device,
    VkRenderPass                                renderPass,
    VkExtent2D*                                 pGranularity);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>device</code> is the logical device that owns the render pass.</p>
</li>
<li>
<p><code>renderPass</code> is a handle to a render pass.</p>
</li>
<li>
<p><code>pGranularity</code> is a pointer to a <a href="chap4.html#VkExtent2D">VkExtent2D</a> structure in which
the granularity is returned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The conditions leading to an optimal <code>renderArea</code> are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <code>offset.x</code> member in <code>renderArea</code> is a multiple of the
<code>width</code> member of the returned <a href="chap4.html#VkExtent2D">VkExtent2D</a> (the horizontal
granularity).</p>
</li>
<li>
<p>the <code>offset.y</code> member in <code>renderArea</code> is a multiple of the
<code>height</code> of the returned <a href="chap4.html#VkExtent2D">VkExtent2D</a> (the vertical
granularity).</p>
</li>
<li>
<p>either the <code>offset.width</code> member in <code>renderArea</code> is a multiple
of the horizontal granularity or <code>offset.x</code>+<code>offset.width</code> is
equal to the <code>width</code> of the <code>framebuffer</code> in the
<a href="#VkRenderPassBeginInfo">VkRenderPassBeginInfo</a>.</p>
</li>
<li>
<p>either the <code>offset.height</code> member in <code>renderArea</code> is a multiple
of the vertical granularity or <code>offset.y</code>+<code>offset.height</code> is
equal to the <code>height</code> of the <code>framebuffer</code> in the
<a href="#VkRenderPassBeginInfo">VkRenderPassBeginInfo</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Subpass dependencies are not affected by the render area, and apply to the
entire image subresources attached to the framebuffer as specified in the
description of <a href="#renderpass-layout-transitions">automatic layout
transitions</a>.
Similarly, pipeline barriers are valid even if their effect extends outside
the render area.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkGetRenderAreaGranularity-device-parameter" href="#VUID-vkGetRenderAreaGranularity-device-parameter"></a> <span class="vuid">VUID-vkGetRenderAreaGranularity-device-parameter</span><br>
 <code>device</code> <strong class="purple">must</strong> be a valid <a href="chap6.html#VkDevice">VkDevice</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetRenderAreaGranularity-renderPass-parameter" href="#VUID-vkGetRenderAreaGranularity-renderPass-parameter"></a> <span class="vuid">VUID-vkGetRenderAreaGranularity-renderPass-parameter</span><br>
 <code>renderPass</code> <strong class="purple">must</strong> be a valid <a href="#VkRenderPass">VkRenderPass</a> handle</p>
</li>
<li>
<p><a id="VUID-vkGetRenderAreaGranularity-pGranularity-parameter" href="#VUID-vkGetRenderAreaGranularity-pGranularity-parameter"></a> <span class="vuid">VUID-vkGetRenderAreaGranularity-pGranularity-parameter</span><br>
 <code>pGranularity</code> <strong class="purple">must</strong> be a valid pointer to a <a href="chap4.html#VkExtent2D">VkExtent2D</a> structure</p>
</li>
<li>
<p><a id="VUID-vkGetRenderAreaGranularity-renderPass-parent" href="#VUID-vkGetRenderAreaGranularity-renderPass-parent"></a> <span class="vuid">VUID-vkGetRenderAreaGranularity-renderPass-parent</span><br>
 <code>renderPass</code> <strong class="purple">must</strong> have been created, allocated, or retrieved from <code>device</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To transition to the next subpass in the render pass instance after
recording the commands for a subpass, call:</p>
</div>
<div id="vkCmdNextSubpass" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="directive">void</span> vkCmdNextSubpass(
    VkCommandBuffer                             commandBuffer,
    VkSubpassContents                           contents);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer in which to record the
command.</p>
</li>
<li>
<p><code>contents</code> specifies how the commands in the next subpass will be
provided, in the same fashion as the corresponding parameter of
<a href="#vkCmdBeginRenderPass">vkCmdBeginRenderPass</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The subpass index for a render pass begins at zero when
<code>vkCmdBeginRenderPass</code> is recorded, and increments each time
<code>vkCmdNextSubpass</code> is recorded.</p>
</div>
<div class="paragraph">
<p>Moving to the next subpass automatically performs any multisample resolve
operations in the subpass being ended.
End-of-subpass multisample resolves are treated as color attachment writes
for the purposes of synchronization.
This applies to resolve operations for both color and depth/stencil
attachments.
That is, they are considered to execute in the
<code>VK_PIPELINE_STAGE_COLOR_ATTACHMENT_OUTPUT_BIT</code> pipeline stage and their
writes are synchronized with <code>VK_ACCESS_COLOR_ATTACHMENT_WRITE_BIT</code>.
Synchronization between rendering within a subpass and any resolve
operations at the end of the subpass occurs automatically, without need for
explicit dependencies or pipeline barriers.
However, if the resolve attachment is also used in a different subpass, an
explicit dependency is needed.</p>
</div>
<div class="paragraph">
<p>After transitioning to the next subpass, the application <strong class="purple">can</strong> record the
commands for that subpass.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdNextSubpass-None-00909" href="#VUID-vkCmdNextSubpass-None-00909"></a> <span class="vuid">VUID-vkCmdNextSubpass-None-00909</span><br>

The current subpass index <strong class="purple">must</strong> be less than the number of subpasses in
the render pass minus one</p>
</li>
<li>
<p><a id="VUID-vkCmdNextSubpass-None-02349" href="#VUID-vkCmdNextSubpass-None-02349"></a> <span class="vuid">VUID-vkCmdNextSubpass-None-02349</span><br>

This command <strong class="purple">must</strong> not be recorded when transform feedback is active</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdNextSubpass-commandBuffer-parameter" href="#VUID-vkCmdNextSubpass-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdNextSubpass-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap7.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdNextSubpass-contents-parameter" href="#VUID-vkCmdNextSubpass-contents-parameter"></a> <span class="vuid">VUID-vkCmdNextSubpass-contents-parameter</span><br>
 <code>contents</code> <strong class="purple">must</strong> be a valid <a href="#VkSubpassContents">VkSubpassContents</a> value</p>
</li>
<li>
<p><a id="VUID-vkCmdNextSubpass-commandBuffer-recording" href="#VUID-vkCmdNextSubpass-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdNextSubpass-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap7.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdNextSubpass-commandBuffer-cmdpool" href="#VUID-vkCmdNextSubpass-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdNextSubpass-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdNextSubpass-renderpass" href="#VUID-vkCmdNextSubpass-renderpass"></a> <span class="vuid">VUID-vkCmdNextSubpass-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called inside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdNextSubpass-bufferlevel" href="#VUID-vkCmdNextSubpass-bufferlevel"></a> <span class="vuid">VUID-vkCmdNextSubpass-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap7.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#synchronization-pipeline-stages-types">Pipeline Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To transition to the next subpass in the render pass instance after
recording the commands for a subpass, call:</p>
</div>
<div id="vkCmdNextSubpass2" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="directive">void</span> vkCmdNextSubpass2(
    VkCommandBuffer                             commandBuffer,
    <span class="directive">const</span> VkSubpassBeginInfo*                   pSubpassBeginInfo,
    <span class="directive">const</span> VkSubpassEndInfo*                     pSubpassEndInfo);</code></pre>
</div>
</div>
<div id="vkCmdNextSubpass2KHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_create_renderpass2</span>
<span class="directive">void</span> vkCmdNextSubpass2KHR(
    VkCommandBuffer                             commandBuffer,
    <span class="directive">const</span> VkSubpassBeginInfo*                   pSubpassBeginInfo,
    <span class="directive">const</span> VkSubpassEndInfo*                     pSubpassEndInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer in which to record the
command.</p>
</li>
<li>
<p><code>pSubpassBeginInfo</code> is a pointer to a <a href="#VkSubpassBeginInfo">VkSubpassBeginInfo</a>
structure containing information about the subpass which is about to
begin rendering.</p>
</li>
<li>
<p><code>pSubpassEndInfo</code> is a pointer to a <a href="#VkSubpassEndInfo">VkSubpassEndInfo</a> structure
containing information about how the previous subpass will be ended.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkCmdNextSubpass2</code> is semantically identical to <a href="#vkCmdNextSubpass">vkCmdNextSubpass</a>,
except that it is extensible, and that <code>contents</code> is provided as part of
an extensible structure instead of as a flat parameter.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdNextSubpass2-None-03102" href="#VUID-vkCmdNextSubpass2-None-03102"></a> <span class="vuid">VUID-vkCmdNextSubpass2-None-03102</span><br>

The current subpass index <strong class="purple">must</strong> be less than the number of subpasses in
the render pass minus one</p>
</li>
<li>
<p><a id="VUID-vkCmdNextSubpass2-None-02350" href="#VUID-vkCmdNextSubpass2-None-02350"></a> <span class="vuid">VUID-vkCmdNextSubpass2-None-02350</span><br>

This command <strong class="purple">must</strong> not be recorded when transform feedback is active</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdNextSubpass2-commandBuffer-parameter" href="#VUID-vkCmdNextSubpass2-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdNextSubpass2-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap7.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdNextSubpass2-pSubpassBeginInfo-parameter" href="#VUID-vkCmdNextSubpass2-pSubpassBeginInfo-parameter"></a> <span class="vuid">VUID-vkCmdNextSubpass2-pSubpassBeginInfo-parameter</span><br>
 <code>pSubpassBeginInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkSubpassBeginInfo">VkSubpassBeginInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdNextSubpass2-pSubpassEndInfo-parameter" href="#VUID-vkCmdNextSubpass2-pSubpassEndInfo-parameter"></a> <span class="vuid">VUID-vkCmdNextSubpass2-pSubpassEndInfo-parameter</span><br>
 <code>pSubpassEndInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkSubpassEndInfo">VkSubpassEndInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdNextSubpass2-commandBuffer-recording" href="#VUID-vkCmdNextSubpass2-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdNextSubpass2-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap7.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdNextSubpass2-commandBuffer-cmdpool" href="#VUID-vkCmdNextSubpass2-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdNextSubpass2-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdNextSubpass2-renderpass" href="#VUID-vkCmdNextSubpass2-renderpass"></a> <span class="vuid">VUID-vkCmdNextSubpass2-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called inside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdNextSubpass2-bufferlevel" href="#VUID-vkCmdNextSubpass2-bufferlevel"></a> <span class="vuid">VUID-vkCmdNextSubpass2-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap7.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#synchronization-pipeline-stages-types">Pipeline Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To record a command to end a render pass instance after recording the
commands for the last subpass, call:</p>
</div>
<div id="vkCmdEndRenderPass" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_VERSION_1_0</span>
<span class="directive">void</span> vkCmdEndRenderPass(
    VkCommandBuffer                             commandBuffer);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer in which to end the current
render pass instance.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ending a render pass instance performs any multisample resolve operations on
the final subpass.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdEndRenderPass-None-00910" href="#VUID-vkCmdEndRenderPass-None-00910"></a> <span class="vuid">VUID-vkCmdEndRenderPass-None-00910</span><br>

The current subpass index <strong class="purple">must</strong> be equal to the number of subpasses in
the render pass minus one</p>
</li>
<li>
<p><a id="VUID-vkCmdEndRenderPass-None-02351" href="#VUID-vkCmdEndRenderPass-None-02351"></a> <span class="vuid">VUID-vkCmdEndRenderPass-None-02351</span><br>

This command <strong class="purple">must</strong> not be recorded when transform feedback is active</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdEndRenderPass-commandBuffer-parameter" href="#VUID-vkCmdEndRenderPass-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdEndRenderPass-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap7.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdEndRenderPass-commandBuffer-recording" href="#VUID-vkCmdEndRenderPass-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdEndRenderPass-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap7.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdEndRenderPass-commandBuffer-cmdpool" href="#VUID-vkCmdEndRenderPass-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdEndRenderPass-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdEndRenderPass-renderpass" href="#VUID-vkCmdEndRenderPass-renderpass"></a> <span class="vuid">VUID-vkCmdEndRenderPass-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called inside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdEndRenderPass-bufferlevel" href="#VUID-vkCmdEndRenderPass-bufferlevel"></a> <span class="vuid">VUID-vkCmdEndRenderPass-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap7.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#synchronization-pipeline-stages-types">Pipeline Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To record a command to end a render pass instance after recording the
commands for the last subpass, call:</p>
</div>
<div id="vkCmdEndRenderPass2" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="directive">void</span> vkCmdEndRenderPass2(
    VkCommandBuffer                             commandBuffer,
    <span class="directive">const</span> VkSubpassEndInfo*                     pSubpassEndInfo);</code></pre>
</div>
</div>
<div id="vkCmdEndRenderPass2KHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_create_renderpass2</span>
<span class="directive">void</span> vkCmdEndRenderPass2KHR(
    VkCommandBuffer                             commandBuffer,
    <span class="directive">const</span> VkSubpassEndInfo*                     pSubpassEndInfo);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>commandBuffer</code> is the command buffer in which to end the current
render pass instance.</p>
</li>
<li>
<p><code>pSubpassEndInfo</code> is a pointer to a <a href="#VkSubpassEndInfo">VkSubpassEndInfo</a> structure
containing information about how the previous subpass will be ended.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>vkCmdEndRenderPass2</code> is semantically identical to
<a href="#vkCmdEndRenderPass">vkCmdEndRenderPass</a>, except that it is extensible.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdEndRenderPass2-None-03103" href="#VUID-vkCmdEndRenderPass2-None-03103"></a> <span class="vuid">VUID-vkCmdEndRenderPass2-None-03103</span><br>

The current subpass index <strong class="purple">must</strong> be equal to the number of subpasses in
the render pass minus one</p>
</li>
<li>
<p><a id="VUID-vkCmdEndRenderPass2-None-02352" href="#VUID-vkCmdEndRenderPass2-None-02352"></a> <span class="vuid">VUID-vkCmdEndRenderPass2-None-02352</span><br>

This command <strong class="purple">must</strong> not be recorded when transform feedback is active</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-vkCmdEndRenderPass2-commandBuffer-parameter" href="#VUID-vkCmdEndRenderPass2-commandBuffer-parameter"></a> <span class="vuid">VUID-vkCmdEndRenderPass2-commandBuffer-parameter</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a valid <a href="chap7.html#VkCommandBuffer">VkCommandBuffer</a> handle</p>
</li>
<li>
<p><a id="VUID-vkCmdEndRenderPass2-pSubpassEndInfo-parameter" href="#VUID-vkCmdEndRenderPass2-pSubpassEndInfo-parameter"></a> <span class="vuid">VUID-vkCmdEndRenderPass2-pSubpassEndInfo-parameter</span><br>
 <code>pSubpassEndInfo</code> <strong class="purple">must</strong> be a valid pointer to a valid <a href="#VkSubpassEndInfo">VkSubpassEndInfo</a> structure</p>
</li>
<li>
<p><a id="VUID-vkCmdEndRenderPass2-commandBuffer-recording" href="#VUID-vkCmdEndRenderPass2-commandBuffer-recording"></a> <span class="vuid">VUID-vkCmdEndRenderPass2-commandBuffer-recording</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be in the <a href="chap7.html#commandbuffers-lifecycle">recording state</a></p>
</li>
<li>
<p><a id="VUID-vkCmdEndRenderPass2-commandBuffer-cmdpool" href="#VUID-vkCmdEndRenderPass2-commandBuffer-cmdpool"></a> <span class="vuid">VUID-vkCmdEndRenderPass2-commandBuffer-cmdpool</span><br>
 The <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> support graphics operations</p>
</li>
<li>
<p><a id="VUID-vkCmdEndRenderPass2-renderpass" href="#VUID-vkCmdEndRenderPass2-renderpass"></a> <span class="vuid">VUID-vkCmdEndRenderPass2-renderpass</span><br>
 This command <strong class="purple">must</strong> only be called inside of a render pass instance</p>
</li>
<li>
<p><a id="VUID-vkCmdEndRenderPass2-bufferlevel" href="#VUID-vkCmdEndRenderPass2-bufferlevel"></a> <span class="vuid">VUID-vkCmdEndRenderPass2-bufferlevel</span><br>
 <code>commandBuffer</code> <strong class="purple">must</strong> be a primary <code>VkCommandBuffer</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Host Synchronization</div>
<div class="ulist">
<ul>
<li>
<p>Host access to <code>commandBuffer</code> <strong class="purple">must</strong> be externally synchronized</p>
</li>
<li>
<p>Host access to the <code>VkCommandPool</code> that <code>commandBuffer</code> was allocated from <strong class="purple">must</strong> be externally synchronized</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Command Properties</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><a href="chap7.html#VkCommandBufferLevel">Command Buffer Levels</a></th>
<th class="tableblock halign-left valign-top"><a href="#vkCmdBeginRenderPass">Render Pass Scope</a></th>
<th class="tableblock halign-left valign-top"><a href="chap6.html#VkQueueFlagBits">Supported Queue Types</a></th>
<th class="tableblock halign-left valign-top"><a href="chap8.html#synchronization-pipeline-stages-types">Pipeline Type</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inside</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Graphics</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <code>VkSubpassEndInfo</code> structure is defined as:</p>
</div>
<div id="VkSubpassEndInfo" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="keyword">typedef</span> <span class="keyword">struct</span> VkSubpassEndInfo {
    VkStructureType    sType;
    <span class="directive">const</span> <span class="directive">void</span>*        pNext;
} VkSubpassEndInfo;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the equivalent</p>
</div>
<div id="VkSubpassEndInfoKHR" class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="c++"><span class="comment">// Provided by VK_KHR_create_renderpass2</span>
<span class="keyword">typedef</span> VkSubpassEndInfo VkSubpassEndInfoKHR;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sType</code> is the type of this structure.</p>
</li>
<li>
<p><code>pNext</code> is <code>NULL</code> or a pointer to a structure extending this
structure.</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Valid Usage (Implicit)</div>
<div class="ulist">
<ul>
<li>
<p><a id="VUID-VkSubpassEndInfo-sType-sType" href="#VUID-VkSubpassEndInfo-sType-sType"></a> <span class="vuid">VUID-VkSubpassEndInfo-sType-sType</span><br>
 <code>sType</code> <strong class="purple">must</strong> be <code>VK_STRUCTURE_TYPE_SUBPASS_END_INFO</code></p>
</li>
<li>
<p><a id="VUID-VkSubpassEndInfo-pNext-pNext" href="#VUID-VkSubpassEndInfo-pNext-pNext"></a> <span class="vuid">VUID-VkSubpassEndInfo-pNext-pNext</span><br>
 <code>pNext</code> <strong class="purple">must</strong> be <code>NULL</code></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div></div>
<div id="footer" style="max-width: 100%;">
<div id="footer-text">
Version 1.0.168<br>
Last updated 2021-01-19 03:38:19 -0800
</div>
</div>


</body>
</html>